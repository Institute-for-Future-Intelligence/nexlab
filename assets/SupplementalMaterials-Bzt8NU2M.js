import{j as e,B as a,a as j,c as be,T as n,n as Q,o as V,p as X,q as xe,s as Y,r as u,C as he,G as h,S as me,A as ue,I as _,au as je,x as ge,m as ye,f as Ce,h as Se,P as ve,aC as te,av as oe,a8 as ae,u as D,v as A,ao as Ie,k as B,y as w,ap as ke,z as M,F as R,w as K,ar as Fe,at as De,as as Ae,D as ie}from"./ui-Dgq5IdU5.js";import{u as N,b as fe,g as Be,f as we,e as Me,B as Re}from"./index-FVI33ckQ.js";import{P as $,e as L,y as ze,i as Ee,f as pe,R as le,x as ce,v as J,_ as de,I as Pe}from"./firebase-BbBYlhCW.js";import"./vendor-DeqkGhWy.js";const We=()=>{const r=N(),c=()=>{r("/")};return e.jsxs(a,{children:[e.jsx(a,{className:"supplemental-header",children:e.jsx(j,{variant:"text",startIcon:e.jsx(be,{}),onClick:c,className:"supplemental-back-button",children:"Home Page"})}),e.jsx(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:e.jsx(n,{className:"supplemental-title",children:"Course Materials"})})]})},Oe=({selectedCourse:r})=>{const c=N();return e.jsx(j,{className:"add-material-button",variant:"contained",color:"primary",disabled:!r,onClick:()=>r&&c(`/add-material?course=${r}`),children:"+ Add Material"})},Ue=({materialId:r,open:c,onClose:s,onDelete:x})=>{const i=$(),f=async()=>{const p=L(i,"materials",r);await ze(p),x(),s()};return e.jsxs(Q,{open:c,onClose:s,children:[e.jsx(V,{children:"Delete Material"}),e.jsx(X,{children:e.jsx(xe,{children:"Are you sure you want to delete this material? This action cannot be undone."})}),e.jsxs(Y,{children:[e.jsx(j,{onClick:s,color:"primary",children:"Cancel"}),e.jsx(j,{onClick:f,color:"secondary",children:"Delete"})]})]})},Te=({materialId:r,onClick:c})=>e.jsx(j,{variant:"contained",color:"error",onClick:()=>c(r),sx:{backgroundColor:"#FFCDD2",color:"#C62828",borderRadius:"15px",fontWeight:"bold",padding:"4px 8px",ml:1,textTransform:"none"},children:"Unpublish"}),qe=({materialId:r,open:c,onClose:s,onUnpublish:x})=>{const i=$(),f=async()=>{const p=L(i,"materials",r);await Ee(p,{published:!1}),x(),s()};return e.jsxs(Q,{open:c,onClose:s,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(V,{id:"alert-dialog-title",children:"Unpublish Material"}),e.jsx(X,{children:e.jsx(xe,{id:"alert-dialog-description",children:"Are you sure you want to unpublish this material? It will no longer be visible to users until it is published again."})}),e.jsxs(Y,{children:[e.jsx(j,{onClick:s,color:"primary",children:"Cancel"}),e.jsx(j,{onClick:f,color:"error",autoFocus:!0,children:"Unpublish"})]})]})},Ne=({initialCourse:r})=>{const{userDetails:c}=fe(),s=$(),[x,i]=u.useState([]),[f,p]=u.useState(!0),[y,z]=u.useState(!1),[C,O]=u.useState(!1),[d,U]=u.useState(r??null),[E,H]=u.useState(null),[g,P]=u.useState({open:!1,materialId:null}),[v,I]=u.useState(null),k=N(),W=u.useCallback(async()=>{if(!d)return;const o=L(s,"courses",d),T=await pe(o);if(T.exists()){const S=T.data(),q=(S==null?void 0:S.courseAdmin)||[];O(q.includes(c==null?void 0:c.uid))}else O(!1)},[d,s,c]);u.useEffect(()=>{d&&W()},[d,W]),u.useEffect(()=>{r&&d!==r&&U(r)},[r,d]),u.useEffect(()=>{if(!d){console.log("No course selected"),i([]),p(!1);return}console.log(`Fetching materials for course: ${d}`),p(!0);const o=c!=null&&c.isAdmin?le(de(s,"materials"),J("course","==",d),ce("timestamp","desc")):le(de(s,"materials"),J("course","==",d),J("published","==",!0),ce("timestamp","desc")),T=Pe(o,S=>{const q=S.docs.map(re=>({id:re.id,...re.data()}));i(q),console.log(`Fetched ${q.length} materials for course: ${d}`),p(!1)},S=>{console.error(S),I("Failed to fetch materials"),p(!1)});return()=>T()},[s,d,c]);const F=o=>{H(o),z(!0)},t=()=>{z(!1),H(null)},l=()=>{i(x.filter(o=>o.id!==E))},b=o=>{P({open:!0,materialId:o})},m=()=>{i(x.map(o=>o.id===g.materialId?{...o,published:!1}:o))},G=()=>{P({open:!1,materialId:null})};if(f)return e.jsx(he,{});const ee=x.filter(o=>!o.published&&!o.scheduledTimestamp),se=x.filter(o=>o.scheduledTimestamp&&!o.published),ne=x.filter(o=>o.published);return e.jsxs(a,{sx:{width:"100%"},children:[x.length===0&&d&&e.jsx(n,{variant:"body1",align:"center",sx:{width:"100%",mb:4},children:"No materials found for the selected course."}),C&&x.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(a,{sx:{mb:4},children:[e.jsx(n,{variant:"h6",sx:{fontWeight:"bold",color:"#F57C00",mb:2},children:"Saved"}),e.jsx(h,{container:!0,spacing:3,children:ee.length===0?e.jsx(n,{variant:"body1",align:"center",sx:{width:"100%"},children:"No saved (unpublished) materials found."}):ee.map(o=>e.jsx(Z,{material:o,isCourseAdmin:C,navigate:k,selectedCourse:d||"",onDeleteClick:F,onUnpublishClick:b},o.id))})]}),e.jsxs(a,{sx:{mb:4},children:[e.jsx(n,{variant:"h6",sx:{fontWeight:"bold",color:"#0D47A1",mb:2},children:"Publish Scheduled"}),e.jsx(h,{container:!0,spacing:3,children:se.length===0?e.jsx(n,{variant:"body1",align:"center",sx:{width:"100%"},children:"No materials scheduled for publishing found."}):se.map(o=>e.jsx(Z,{material:o,isCourseAdmin:C,navigate:k,selectedCourse:d||"",onDeleteClick:F,onUnpublishClick:b},o.id))})]})]}),e.jsxs(a,{sx:{mb:4},children:[e.jsx(n,{variant:"h6",sx:{fontWeight:"bold",color:"#2E7D32",mb:2},children:"Published"}),e.jsx(h,{container:!0,spacing:3,children:ne.length===0?e.jsx(n,{variant:"body1",align:"center",sx:{width:"100%"},children:"No published materials found."}):ne.map(o=>e.jsx(Z,{material:o,isCourseAdmin:C,navigate:k,selectedCourse:d||"",onDeleteClick:F,onUnpublishClick:b},o.id))})]}),E&&e.jsx(Ue,{materialId:E,open:y,onClose:t,onDelete:l}),g.materialId&&e.jsx(qe,{materialId:g.materialId,open:g.open,onClose:G,onUnpublish:m}),v&&e.jsx(me,{open:!0,autoHideDuration:6e3,onClose:()=>I(null),children:e.jsx(ue,{onClose:()=>I(null),severity:"error",children:v})},v)]})},Z=({material:r,isCourseAdmin:c,navigate:s,selectedCourse:x,onDeleteClick:i,onUnpublishClick:f})=>e.jsx(h,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(a,{sx:{border:"1px solid #ddd",borderRadius:"8px",padding:2,position:"relative",backgroundColor:r.published?"#E8F5E9":"#FFF9C4"},children:[e.jsx(_,{onClick:()=>s(`/view-material/${r.id}?course=${x}`),"aria-label":"view",children:e.jsx(je,{})}),e.jsx(n,{variant:"h6",children:r.title||"Untitled"}),e.jsx(a,{sx:{position:"absolute",top:8,right:8,display:"flex",gap:1},children:c&&e.jsxs(e.Fragment,{children:[e.jsx(_,{onClick:()=>s(`/edit-material/${r.id}?course=${x}`),"aria-label":"edit",children:e.jsx(ge,{})}),e.jsx(_,{onClick:()=>i(r.id),"aria-label":"delete",children:e.jsx(ye,{})}),r.published&&e.jsx(Te,{materialId:r.id,onClick:f})]})})]})}),$e=({courses:r})=>{const c=N();return e.jsxs(a,{sx:{width:"100%",padding:4},children:[e.jsx(n,{variant:"h5",align:"center",sx:{mt:3,pb:2,fontFamily:"Staatliches, sans-serif",fontSize:"2rem",color:"#00695c",textTransform:"uppercase",letterSpacing:"1px"},children:"Select a Course"}),e.jsx(h,{container:!0,spacing:4,justifyContent:"center",children:r.map(s=>e.jsx(h,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(Ce,{onClick:()=>c(`/supplemental-materials?course=${s.id}`),sx:{cursor:"pointer",borderRadius:"15px",transition:"transform 0.3s, box-shadow 0.3s","&:hover":{transform:"scale(1.05)",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.1)"},boxShadow:"0 3px 10px rgba(0, 0, 0, 0.1)"},children:e.jsxs(Se,{sx:{textAlign:"center",padding:3,backgroundColor:"#e0f7fa","&:hover":{backgroundColor:"#b2ebf2"}},children:[e.jsx(n,{variant:"h5",sx:{fontFamily:"Staatliches, sans-serif",fontSize:"1.5rem",color:"#006064"},children:s.number}),e.jsx(n,{variant:"body1",sx:{fontFamily:"Gabarito, sans-serif",fontSize:"1rem",color:"#004d40",marginTop:1},children:s.title})]})})},s.id))})]})},Le=({courseId:r,isAdmin:c=!1})=>{var I,k,W,F;const[s,x]=u.useState(null),[i,f]=u.useState(null),[p,y]=u.useState(!0),[z,C]=u.useState(null),[O,d]=u.useState(!1),U=$();u.useEffect(()=>{r&&(async()=>{try{y(!0);const l=L(U,"courses",r),b=await pe(l);if(b.exists()){const m=b.data();x(m.additionalInfo||null),f(m.syllabusFile||null)}else C("Course not found")}catch(l){console.error("Error fetching course additional info:",l),C("Failed to load course information")}finally{y(!1)}})()},[r,U]);const E=()=>{i!=null&&i.url&&window.open(i.url,"_blank")},g=(()=>{if(!s)return{};const t=new Set(["contactInfo","policies","additionalResources","labSpecific","textbooks","gradingPolicy","assignments","prerequisites","lastUpdated"]),l={};return Object.keys(s).forEach(b=>{!t.has(b)&&s[b]!=null&&(l[b]=s[b])}),l})(),P=Object.keys(g).length>0,v=s&&(s.contactInfo||s.policies||s.additionalResources||s.labSpecific||((I=s.textbooks)==null?void 0:I.length)||((k=s.gradingPolicy)==null?void 0:k.length)||((W=s.assignments)==null?void 0:W.length)||((F=s.prerequisites)==null?void 0:F.length)||P);return p?e.jsx(a,{sx:{display:"flex",justifyContent:"center",p:3},children:e.jsx(he,{})}):z?e.jsx(ue,{severity:"error",sx:{mb:3},children:z}):!v&&!i?null:e.jsxs(ve,{sx:{p:3,mb:4,backgroundColor:"#f8f9fa",borderRadius:"15px",border:"1px solid #e3f2fd"},children:[e.jsxs(n,{variant:"h4",sx:{mb:3,display:"flex",alignItems:"center",gap:1,fontFamily:"Staatliches, sans-serif",fontWeight:"bold",color:"#0B53C0",fontSize:"2rem"},children:[e.jsx(te,{sx:{color:"#0B53C0"}}),"Course Information"]}),i&&e.jsx(a,{sx:{mb:3},children:e.jsx(j,{variant:"outlined",startIcon:e.jsx(ae,{}),endIcon:e.jsx(oe,{}),onClick:()=>d(!0),sx:{mb:2,fontFamily:"Staatliches, sans-serif",fontSize:"1.2rem",textTransform:"none",borderRadius:"15px",backgroundColor:"#CDDAFF",color:"#0B53C0",border:"1px solid #0B53C0","&:hover":{backgroundColor:"#0B53C0",color:"#FFFFFF"}},children:"Syllabus"})}),v&&e.jsxs(a,{sx:{mb:2},children:[(s==null?void 0:s.contactInfo)&&Object.keys(s.contactInfo).length>0&&e.jsxs(D,{children:[e.jsx(A,{expandIcon:e.jsx(B,{sx:{color:"#0B53C0"}}),sx:{"&:hover":{backgroundColor:"#f0f7ff !important"},"&.Mui-expanded":{backgroundColor:"#f0f7ff"},backgroundColor:"transparent"},children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ie,{sx:{color:"#0B53C0"}}),e.jsx(n,{variant:"h6",sx:{fontFamily:"Staatliches, sans-serif",fontWeight:"bold",color:"#0B53C0",fontSize:"1.25rem"},children:"Contact Information"})]})}),e.jsx(w,{children:e.jsxs(h,{container:!0,spacing:2,children:[s.contactInfo.email&&e.jsxs(h,{item:!0,xs:12,md:6,children:[e.jsx(n,{variant:"body2",color:"text.secondary",children:"Email"}),e.jsx(n,{variant:"body1",children:s.contactInfo.email})]}),s.contactInfo.phone&&e.jsxs(h,{item:!0,xs:12,md:6,children:[e.jsx(n,{variant:"body2",color:"text.secondary",children:"Phone"}),e.jsx(n,{variant:"body1",children:s.contactInfo.phone})]}),s.contactInfo.office&&e.jsxs(h,{item:!0,xs:12,md:6,children:[e.jsx(n,{variant:"body2",color:"text.secondary",children:"Office"}),e.jsx(n,{variant:"body1",children:s.contactInfo.office})]}),s.contactInfo.officeHours&&e.jsxs(h,{item:!0,xs:12,md:6,children:[e.jsx(n,{variant:"body2",color:"text.secondary",children:"Office Hours"}),e.jsx(n,{variant:"body1",children:s.contactInfo.officeHours})]}),s.contactInfo.website&&e.jsxs(h,{item:!0,xs:12,children:[e.jsx(n,{variant:"body2",color:"text.secondary",children:"Website"}),e.jsx(n,{variant:"body1",children:e.jsx("a",{href:s.contactInfo.website,target:"_blank",rel:"noopener noreferrer",children:s.contactInfo.website})})]})]})})]}),(s==null?void 0:s.textbooks)&&s.textbooks.length>0&&e.jsxs(D,{children:[e.jsx(A,{expandIcon:e.jsx(B,{sx:{color:"#0B53C0"}}),sx:{"&:hover":{backgroundColor:"#f0f7ff !important"},"&.Mui-expanded":{backgroundColor:"#f0f7ff"},backgroundColor:"transparent"},children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ke,{sx:{color:"#0B53C0"}}),e.jsx(n,{variant:"h6",sx:{fontFamily:"Staatliches, sans-serif",fontWeight:"bold",color:"#0B53C0",fontSize:"1.25rem"},children:"Textbooks & Resources"})]})}),e.jsx(w,{children:e.jsx(M,{children:s.textbooks.map((t,l)=>e.jsxs(R,{sx:{px:0,flexDirection:"column",alignItems:"flex-start"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(n,{variant:"body1",sx:{fontWeight:"medium"},children:t.title}),e.jsx(K,{label:t.required?"Required":"Optional",size:"small",color:t.required?"error":"default"})]}),e.jsxs(a,{sx:{pl:0},children:[t.author&&e.jsxs(n,{variant:"body2",color:"text.secondary",children:["by ",t.author]}),t.edition&&e.jsxs(n,{variant:"body2",color:"text.secondary",children:["Edition: ",t.edition]}),t.isbn&&e.jsxs(n,{variant:"body2",color:"text.secondary",children:["ISBN: ",t.isbn]})]})]},l))})})]}),(s==null?void 0:s.gradingPolicy)&&s.gradingPolicy.length>0&&e.jsxs(D,{children:[e.jsx(A,{expandIcon:e.jsx(B,{sx:{color:"#0B53C0"}}),sx:{"&:hover":{backgroundColor:"#f0f7ff !important"},"&.Mui-expanded":{backgroundColor:"#f0f7ff"},backgroundColor:"transparent"},children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Fe,{sx:{color:"#0B53C0"}}),e.jsx(n,{variant:"h6",sx:{fontFamily:"Staatliches, sans-serif",fontWeight:"bold",color:"#0B53C0",fontSize:"1.25rem"},children:"Grading Policy"})]})}),e.jsx(w,{children:e.jsx(M,{children:s.gradingPolicy.map((t,l)=>e.jsxs(R,{sx:{px:0,flexDirection:"column",alignItems:"flex-start"},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",mb:t.description?1:0},children:[e.jsx(n,{variant:"body1",children:t.component}),e.jsx(K,{label:`${t.percentage}%`,size:"small",color:"primary"})]}),t.description&&e.jsx(n,{variant:"body2",color:"text.secondary",children:t.description})]},l))})})]}),(s==null?void 0:s.labSpecific)&&Object.keys(s.labSpecific).length>0&&e.jsxs(D,{children:[e.jsx(A,{expandIcon:e.jsx(B,{sx:{color:"#0B53C0"}}),sx:{"&:hover":{backgroundColor:"#f0f7ff !important"},"&.Mui-expanded":{backgroundColor:"#f0f7ff"},backgroundColor:"transparent"},children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(De,{sx:{color:"#0B53C0"}}),e.jsx(n,{variant:"h6",sx:{fontFamily:"Staatliches, sans-serif",fontWeight:"bold",color:"#0B53C0",fontSize:"1.25rem"},children:"Laboratory Information"})]})}),e.jsx(w,{children:e.jsxs(h,{container:!0,spacing:3,children:[s.labSpecific.safetyRequirements&&e.jsxs(h,{item:!0,xs:12,children:[e.jsx(n,{variant:"body2",color:"text.secondary",sx:{fontWeight:"bold"},children:"Safety Requirements"}),e.jsx(M,{dense:!0,children:s.labSpecific.safetyRequirements.map((t,l)=>e.jsx(R,{sx:{py:.5},children:e.jsxs(n,{variant:"body2",children:["• ",t]})},l))})]}),s.labSpecific.dresscode&&e.jsxs(h,{item:!0,xs:12,md:6,children:[e.jsx(n,{variant:"body2",color:"text.secondary",sx:{fontWeight:"bold"},children:"Dress Code"}),e.jsx(M,{dense:!0,children:s.labSpecific.dresscode.map((t,l)=>e.jsx(R,{sx:{py:.5},children:e.jsxs(n,{variant:"body2",children:["• ",t]})},l))})]}),s.labSpecific.requiredEquipment&&e.jsxs(h,{item:!0,xs:12,md:6,children:[e.jsx(n,{variant:"body2",color:"text.secondary",sx:{fontWeight:"bold"},children:"Required Equipment"}),e.jsx(M,{dense:!0,children:s.labSpecific.requiredEquipment.map((t,l)=>e.jsx(R,{sx:{py:.5},children:e.jsxs(n,{variant:"body2",children:["• ",t]})},l))})]})]})})]}),(s==null?void 0:s.policies)&&Object.keys(s.policies).length>0&&e.jsxs(D,{children:[e.jsx(A,{expandIcon:e.jsx(B,{sx:{color:"#0B53C0"}}),sx:{"&:hover":{backgroundColor:"#f0f7ff !important"},"&.Mui-expanded":{backgroundColor:"#f0f7ff"},backgroundColor:"transparent"},children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ae,{sx:{color:"#0B53C0"}}),e.jsx(n,{variant:"h6",sx:{fontFamily:"Staatliches, sans-serif",fontWeight:"bold",color:"#0B53C0",fontSize:"1.25rem"},children:"Course Policies"})]})}),e.jsx(w,{children:e.jsx(h,{container:!0,spacing:2,children:Object.entries(s.policies).map(([t,l])=>{if(!l)return null;const b=t.replace(/([A-Z])/g," $1").replace(/^./,m=>m.toUpperCase());return e.jsxs(h,{item:!0,xs:12,children:[e.jsx(n,{variant:"body2",color:"text.secondary",sx:{fontWeight:"bold"},children:b}),e.jsx(n,{variant:"body2",sx:{mt:.5},children:l}),e.jsx(ie,{sx:{mt:1}})]},t)})})})]}),P&&e.jsxs(D,{children:[e.jsx(A,{expandIcon:e.jsx(B,{sx:{color:"#0B53C0"}}),sx:{"&:hover":{backgroundColor:"#f0f7ff !important"},"&.Mui-expanded":{backgroundColor:"#f0f7ff"},backgroundColor:"transparent"},children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(te,{sx:{color:"#0B53C0"}}),e.jsx(n,{variant:"h6",sx:{fontFamily:"Staatliches, sans-serif",fontWeight:"bold",color:"#0B53C0",fontSize:"1.25rem"},children:"Other Course Information"})]})}),e.jsx(w,{children:e.jsx(h,{container:!0,spacing:2,children:Object.entries(g).map(([t,l])=>{const b=t.replace(/([A-Z])/g," $1").replace(/^./,m=>m.toUpperCase());return e.jsxs(h,{item:!0,xs:12,children:[e.jsx(n,{variant:"body2",color:"text.secondary",sx:{fontWeight:"bold"},children:b}),e.jsx(a,{sx:{mt:.5},children:Array.isArray(l)?e.jsx(M,{dense:!0,children:l.map((m,G)=>e.jsx(R,{sx:{py:.25,px:0},children:e.jsxs(n,{variant:"body2",children:["• ",typeof m=="object"?JSON.stringify(m,null,2):String(m)]})},G))}):typeof l=="object"?e.jsx(a,{sx:{p:1,backgroundColor:"grey.100",borderRadius:1},children:e.jsx(n,{variant:"body2",component:"pre",sx:{fontFamily:"monospace",fontSize:"0.875rem"},children:JSON.stringify(l,null,2)})}):e.jsx(n,{variant:"body2",children:String(l)})}),Object.keys(g).indexOf(t)<Object.keys(g).length-1&&e.jsx(ie,{sx:{mt:2}})]},t)})})})]})]}),e.jsxs(Q,{open:O,onClose:()=>d(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:"15px",backgroundColor:"#f8f9fa"}},children:[e.jsxs(V,{sx:{display:"flex",alignItems:"center",gap:1,fontFamily:"Staatliches, sans-serif",fontSize:"1.5rem",fontWeight:"bold",color:"#0B53C0",backgroundColor:"#ECF4FE",borderBottom:"1px solid #e3f2fd"},children:[e.jsx(ae,{sx:{color:"#0B53C0"}}),"Syllabus Document"]}),e.jsx(X,{sx:{pt:3},children:i&&e.jsxs(a,{children:[e.jsxs(n,{variant:"body1",sx:{mb:2,fontFamily:"Staatliches, sans-serif",fontSize:"1.1rem",color:"#0B53C0"},children:[e.jsx("strong",{children:"Filename:"})," ",i.metadata.originalFilename]}),e.jsxs(n,{variant:"body2",color:"text.secondary",sx:{mb:1},children:[e.jsx("strong",{children:"Type:"})," ",Be(i.metadata.fileType)]}),e.jsxs(n,{variant:"body2",color:"text.secondary",sx:{mb:1},children:[e.jsx("strong",{children:"Size:"})," ",we(i.metadata.fileSize)]}),e.jsxs(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:[e.jsx("strong",{children:"Uploaded:"})," ",(()=>{if(!i.metadata.uploadedAt)return"Date not available";const t=i.metadata.uploadedAt;if(t instanceof Date)return t.toLocaleDateString();if(typeof t=="object"&&t!==null&&"seconds"in t)return new Date(t.seconds*1e3).toLocaleDateString();try{return new Date(t).toLocaleDateString()}catch{return"Date not available"}})()]})]})}),e.jsxs(Y,{sx:{p:3,gap:2},children:[e.jsx(j,{onClick:()=>d(!1),sx:{fontFamily:"Staatliches, sans-serif",fontSize:"1.1rem",textTransform:"none",borderRadius:"15px",color:"#666","&:hover":{backgroundColor:"#f0f0f0"}},children:"Close"}),e.jsx(j,{onClick:E,variant:"contained",startIcon:e.jsx(oe,{}),sx:{fontFamily:"Staatliches, sans-serif",fontSize:"1.1rem",textTransform:"none",borderRadius:"15px",backgroundColor:"#CDDAFF",color:"#0B53C0","&:hover":{backgroundColor:"#0B53C0",color:"#FFFFFF"}},children:"Download"})]})]})]})},Ze=()=>{const{userDetails:r}=fe(),[c]=Me(),s=c.get("course")||null,x=u.useMemo(()=>{const f=r!=null&&r.classes?Object.entries(r.classes).map(([p,y])=>({id:p,number:y.number,title:y.title})):[];return console.log("[SupplementalMaterials] Course list updated:",{count:f.length,courses:f.map(p=>`${p.number} - ${p.title}`),timestamp:new Date().toISOString()}),f},[r==null?void 0:r.classes]),i=u.useMemo(()=>x.find(f=>f.id===s),[x,s]);return e.jsxs(a,{className:"supplemental-container",children:[e.jsx(We,{}),s?e.jsxs(a,{children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(Re,{returnToSelection:!0}),e.jsx(K,{label:i?`${i.number} - ${i.title}`:"Selected Course",variant:"outlined",sx:{borderRadius:"15px",fontSize:"32px",fontWeight:"bold",background:"#e0f2f1",color:"#00695c",cursor:"pointer",transition:"background-color 0.3s",fontFamily:"Staatliches, sans-serif",padding:"20px 20px","&:hover":{backgroundColor:"#b2dfdb"}}})]}),e.jsx(Le,{courseId:s,isAdmin:r==null?void 0:r.isAdmin}),e.jsxs(a,{className:"supplemental-content",children:[(r==null?void 0:r.isAdmin)&&e.jsx(Oe,{selectedCourse:s}),e.jsx(Ne,{initialCourse:s})]})]}):e.jsx(e.Fragment,{children:e.jsx($e,{courses:x})})]})};export{Ze as default};
