import{j as e,B as i,c as C,T as n,l as H,m as _,n as J,o as re,p as V,r as d,bd as ie,be as N,G as h,I as L,t as U,S as le,A as te,f as ce,h as de,C as xe,P as ue,av as K,an as Q,a0 as X,q as M,s as T,af as he,i as z,v as E,ag as fe,w as R,x as W,aj as pe,al as be,ak as me,D as Y}from"./ui-D8o6Mz5h.js";import{u as $,A as je,b as Z,V as ge,E as ye,D as Ce,g as Se,f as Fe,c as ve,B as ke}from"./index-B3zUpBd6.js";import{P,e as q,y as Ie,i as Be,R as ee,x as se,v as G,_ as ne,I as De,f as oe}from"./firebase-DpGenoA-.js";import"./vendor-CkjDiaq4.js";const Ae=()=>{const o=$(),x=()=>{o("/")};return e.jsxs(i,{children:[e.jsx(i,{className:"supplemental-header",children:e.jsx(C,{variant:"text",startIcon:e.jsx(je,{}),onClick:x,className:"supplemental-back-button",children:"Home Page"})}),e.jsx(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:e.jsx(n,{className:"supplemental-title",children:"Course Materials"})})]})},we=({selectedCourse:o})=>{const x=$();return e.jsx(C,{className:"add-material-button",variant:"contained",color:"primary",disabled:!o,onClick:()=>o&&x(`/add-material?course=${o}`),children:"+ Add Material"})},Me=({materialId:o,open:x,onClose:s,onDelete:b})=>{const l=P(),f=async()=>{const c=q(l,"materials",o);await Ie(c),b(),s()};return e.jsxs(H,{open:x,onClose:s,children:[e.jsx(_,{children:"Delete Material"}),e.jsx(J,{children:e.jsx(re,{children:"Are you sure you want to delete this material? This action cannot be undone."})}),e.jsxs(V,{children:[e.jsx(C,{onClick:s,color:"primary",children:"Cancel"}),e.jsx(C,{onClick:f,color:"secondary",children:"Delete"})]})]})},Te=({materialId:o,open:x,onClose:s,onUnpublish:b})=>{const l=P(),f=async()=>{const c=q(l,"materials",o);await Be(c,{published:!1}),b(),s()};return e.jsxs(H,{open:x,onClose:s,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(_,{id:"alert-dialog-title",children:"Unpublish Material"}),e.jsx(J,{children:e.jsx(re,{id:"alert-dialog-description",children:"Are you sure you want to unpublish this material? It will no longer be visible to users until it is published again."})}),e.jsxs(V,{children:[e.jsx(C,{onClick:s,color:"primary",children:"Cancel"}),e.jsx(C,{onClick:f,color:"error",autoFocus:!0,children:"Unpublish"})]})]})},ze=({materialId:o,onClick:x})=>e.jsx(C,{variant:"contained",color:"error",onClick:()=>x(o),sx:{backgroundColor:"#FFCDD2",color:"#C62828",borderRadius:"15px",fontWeight:"bold",padding:"4px 8px",ml:1,textTransform:"none"},children:"Unpublish"}),Ee=({courseId:o,isCourseAdmin:x,onDeleteClick:s,onUnpublishClick:b})=>{const[l,f]=d.useState(0),[c,u]=d.useState([]),[A,j]=d.useState(!0),[I,g]=d.useState(null),{userDetails:y}=Z(),F=$(),B=P();d.useEffect(()=>{if(!o){u([]),j(!1);return}j(!0);const r=y!=null&&y.isAdmin?ee(ne(B,"materials"),G("course","==",o),se("timestamp","desc")):ee(ne(B,"materials"),G("course","==",o),G("published","==",!0),se("timestamp","desc")),v=De(r,k=>{const t=k.docs.map(a=>({id:a.id,...a.data()}));u(t),j(!1),g(null)},k=>{console.error("Error fetching materials:",k),g("Failed to fetch materials"),j(!1)});return()=>v()},[o,B,y]);const S=(r,v)=>{f(v)},D=(()=>{switch(l){case 0:return c.filter(r=>r.published);case 1:return c.filter(r=>r.scheduledTimestamp&&!r.published);case 2:return c.filter(r=>!r.published&&!r.scheduledTimestamp);default:return[]}})(),w=r=>r.published?"published":r.scheduledTimestamp?"scheduled":"saved";return A?e.jsx(i,{sx:{display:"flex",justifyContent:"center",alignItems:"center",mt:3,backgroundColor:"#F0F4FF",borderRadius:"15px",padding:3},children:e.jsx(n,{variant:"body1",sx:{fontFamily:"Gabarito, sans-serif",fontSize:"1.1rem",color:"#0B53C0"},children:"Loading materials..."})}):I?e.jsx(i,{sx:{mt:3,backgroundColor:"#FFE5E5",borderRadius:"15px",padding:3},children:e.jsx(n,{variant:"body1",color:"error",align:"center",sx:{fontFamily:"Gabarito, sans-serif",fontSize:"1.1rem",color:"#FF6B6B"},children:I})}):e.jsxs(i,{sx:{width:"100%"},children:[e.jsxs(ie,{value:l,onChange:S,textColor:"primary",indicatorColor:"primary",sx:{mb:3,backgroundColor:"#F0F4FF",borderRadius:"15px",padding:"8px","& .MuiTabs-flexContainer":{gap:"8px"},"& .MuiTab-root":{fontFamily:"Staatliches, sans-serif",fontWeight:"bold",fontSize:"1.2rem",textTransform:"none",borderRadius:"10px",minHeight:"50px",transition:"all 0.3s ease-in-out","&.Mui-selected":{backgroundColor:"#0B53C0",color:"#FFFFFF",boxShadow:"0px 2px 8px rgba(11, 83, 192, 0.3)"},"&:not(.Mui-selected)":{backgroundColor:"#CDDAFF",color:"#0B53C0","&:hover":{backgroundColor:"#E0ECFF",transform:"scale(1.02)"}}},"& .MuiTabs-indicator":{display:"none"}},variant:"fullWidth",children:[e.jsx(N,{label:`Published ${c.filter(r=>r.published).length>0?`(${c.filter(r=>r.published).length})`:""}`}),e.jsx(N,{label:`Scheduled ${c.filter(r=>r.scheduledTimestamp&&!r.published).length>0?`(${c.filter(r=>r.scheduledTimestamp&&!r.published).length})`:""}`}),e.jsx(N,{label:`Saved ${c.filter(r=>!r.published&&!r.scheduledTimestamp).length>0?`(${c.filter(r=>!r.published&&!r.scheduledTimestamp).length})`:""}`})]}),D.length===0?e.jsx(n,{variant:"body1",align:"center",sx:{width:"100%",mb:4,fontFamily:"Gabarito, sans-serif",fontSize:"1.1rem",color:"#0B53C0"},children:"No materials in this category."}):e.jsx(h,{container:!0,spacing:3,children:D.map(r=>e.jsx(h,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(i,{sx:{backgroundColor:"#F5F5F5",border:"none",borderRadius:"15px",padding:2,position:"relative",minHeight:"140px",transition:"all 0.3s ease-in-out",boxShadow:"none","&:hover":{backgroundColor:"#E0ECFF",transform:"scale(1.02)",boxShadow:"0px 4px 12px rgba(11, 83, 192, 0.15)"}},children:[e.jsx(L,{onClick:()=>F(`/view-material/${r.id}?course=${o}`),"aria-label":"view",sx:{mb:1,color:"#0B53C0","&:hover":{backgroundColor:"#CDDAFF"}},children:e.jsx(ge,{})}),e.jsx(n,{variant:"h6",sx:{mb:1,fontFamily:"Staatliches, sans-serif",fontSize:"1.3rem",color:"#0B53C0",fontWeight:"bold"},children:r.title||"Untitled"}),e.jsx(U,{label:w(r),size:"small",sx:{backgroundColor:r.published?"#2ECC71":r.scheduledTimestamp?"#4A90E2":"#F6C90E",color:r.published||r.scheduledTimestamp?"#FFFFFF":"#000000",fontFamily:"Gabarito, sans-serif",fontWeight:"bold",textTransform:"capitalize",fontSize:"0.8rem",borderRadius:"8px"}}),e.jsx(i,{sx:{position:"absolute",top:8,right:8,display:"flex",gap:1},children:x&&e.jsxs(e.Fragment,{children:[e.jsx(L,{onClick:()=>F(`/edit-material/${r.id}?course=${o}`),"aria-label":"edit",size:"small",sx:{color:"#0B53C0","&:hover":{backgroundColor:"#CDDAFF"}},children:e.jsx(ye,{fontSize:"small"})}),e.jsx(L,{onClick:()=>s(r.id),"aria-label":"delete",size:"small",sx:{color:"#FF6B6B","&:hover":{backgroundColor:"#FFE5E5"}},children:e.jsx(Ce,{fontSize:"small"})}),r.published&&e.jsx(ze,{materialId:r.id,onClick:b})]})})]})},r.id))})]})},Re=({initialCourse:o})=>{const{userDetails:x}=Z(),s=P(),[b,l]=d.useState(!1),[f,c]=d.useState(!1),[u,A]=d.useState(o??null),[j,I]=d.useState(null),[g,y]=d.useState({open:!1,materialId:null}),[F,B]=d.useState(null),S=d.useCallback(async()=>{if(!u)return;const t=q(s,"courses",u),a=await oe(t);if(a.exists()){const p=a.data(),m=(p==null?void 0:p.courseAdmin)||[];c(m.includes(x==null?void 0:x.uid))}else c(!1)},[u,s,x]);d.useEffect(()=>{u&&S()},[u,S]),d.useEffect(()=>{o&&u!==o&&A(o)},[o,u]);const O=t=>{I(t),l(!0)},D=()=>{l(!1),I(null)},w=()=>{console.log("Material deleted:",j)},r=t=>{y({open:!0,materialId:t})},v=()=>{console.log("Material unpublished:",g.materialId)},k=()=>{y({open:!1,materialId:null})};return e.jsxs(i,{sx:{width:"100%"},children:[u?e.jsx(Ee,{courseId:u,isCourseAdmin:f,onDeleteClick:O,onUnpublishClick:r}):e.jsx(n,{variant:"body1",align:"center",sx:{width:"100%",mb:4},children:"Please select a course to view materials."}),j&&e.jsx(Me,{materialId:j,open:b,onClose:D,onDelete:w}),g.materialId&&e.jsx(Te,{materialId:g.materialId,open:g.open,onClose:k,onUnpublish:v}),F&&e.jsx(le,{open:!0,autoHideDuration:6e3,onClose:()=>B(null),children:e.jsx(te,{onClose:()=>B(null),severity:"error",children:F})},F)]})},We=({courses:o})=>{const x=$();return e.jsxs(i,{sx:{width:"100%",padding:4},children:[e.jsx(n,{variant:"h5",align:"center",sx:{mt:3,pb:2,fontFamily:"Staatliches, sans-serif",fontSize:"2rem",color:"#00695c",textTransform:"uppercase",letterSpacing:"1px"},children:"Select a Course"}),e.jsx(h,{container:!0,spacing:4,justifyContent:"center",children:o.map(s=>e.jsx(h,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(ce,{onClick:()=>x(`/supplemental-materials?course=${s.id}`),sx:{cursor:"pointer",borderRadius:"15px",transition:"transform 0.3s, box-shadow 0.3s","&:hover":{transform:"scale(1.05)",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.1)"},boxShadow:"0 3px 10px rgba(0, 0, 0, 0.1)"},children:e.jsxs(de,{sx:{textAlign:"center",padding:3,backgroundColor:"#e0f7fa","&:hover":{backgroundColor:"#b2ebf2"}},children:[e.jsx(n,{variant:"h5",sx:{fontFamily:"Staatliches, sans-serif",fontSize:"1.5rem",color:"#006064"},children:s.number}),e.jsx(n,{variant:"body1",sx:{fontFamily:"Gabarito, sans-serif",fontSize:"1rem",color:"#004d40",marginTop:1},children:s.title})]})})},s.id))})]})},Oe=({courseId:o,isAdmin:x=!1})=>{var w,r,v,k;const[s,b]=d.useState(null),[l,f]=d.useState(null),[c,u]=d.useState(!0),[A,j]=d.useState(null),[I,g]=d.useState(!1),y=P();d.useEffect(()=>{o&&(async()=>{try{u(!0);const a=q(y,"courses",o),p=await oe(a);if(p.exists()){const m=p.data();b(m.additionalInfo||null),f(m.syllabusFile||null)}else j("Course not found")}catch(a){console.error("Error fetching course additional info:",a),j("Failed to load course information")}finally{u(!1)}})()},[o,y]);const F=()=>{l!=null&&l.url&&window.open(l.url,"_blank")},S=(()=>{if(!s)return{};const t=new Set(["contactInfo","policies","additionalResources","labSpecific","textbooks","gradingPolicy","assignments","prerequisites","lastUpdated"]),a={};return Object.keys(s).forEach(p=>{!t.has(p)&&s[p]!=null&&(a[p]=s[p])}),a})(),O=Object.keys(S).length>0,D=s&&(s.contactInfo||s.policies||s.additionalResources||s.labSpecific||((w=s.textbooks)==null?void 0:w.length)||((r=s.gradingPolicy)==null?void 0:r.length)||((v=s.assignments)==null?void 0:v.length)||((k=s.prerequisites)==null?void 0:k.length)||O);return c?e.jsx(i,{sx:{display:"flex",justifyContent:"center",p:3},children:e.jsx(xe,{})}):A?e.jsx(te,{severity:"error",sx:{mb:3},children:A}):!D&&!l?null:e.jsxs(ue,{sx:{p:3,mb:4,backgroundColor:"#f8f9fa",borderRadius:"15px",border:"1px solid #e3f2fd"},children:[e.jsxs(n,{variant:"h4",sx:{mb:3,display:"flex",alignItems:"center",gap:1,fontFamily:"Staatliches, sans-serif",fontWeight:"bold",color:"#0B53C0",fontSize:"2rem"},children:[e.jsx(K,{sx:{color:"#0B53C0"}}),"Course Information"]}),l&&e.jsx(i,{sx:{mb:3},children:e.jsx(C,{variant:"outlined",startIcon:e.jsx(X,{}),endIcon:e.jsx(Q,{}),onClick:()=>g(!0),sx:{mb:2,fontFamily:"Staatliches, sans-serif",fontSize:"1.2rem",textTransform:"none",borderRadius:"15px",backgroundColor:"#CDDAFF",color:"#0B53C0",border:"1px solid #0B53C0","&:hover":{backgroundColor:"#0B53C0",color:"#FFFFFF"}},children:"Syllabus"})}),D&&e.jsxs(i,{sx:{mb:2},children:[(s==null?void 0:s.contactInfo)&&Object.keys(s.contactInfo).length>0&&e.jsxs(M,{children:[e.jsx(T,{expandIcon:e.jsx(z,{sx:{color:"#0B53C0"}}),sx:{"&:hover":{backgroundColor:"#f0f7ff !important"},"&.Mui-expanded":{backgroundColor:"#f0f7ff"},backgroundColor:"transparent"},children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(he,{sx:{color:"#0B53C0"}}),e.jsx(n,{variant:"h6",sx:{fontFamily:"Staatliches, sans-serif",fontWeight:"bold",color:"#0B53C0",fontSize:"1.25rem"},children:"Contact Information"})]})}),e.jsx(E,{children:e.jsxs(h,{container:!0,spacing:2,children:[s.contactInfo.email&&e.jsxs(h,{item:!0,xs:12,md:6,children:[e.jsx(n,{variant:"body2",color:"text.secondary",children:"Email"}),e.jsx(n,{variant:"body1",children:s.contactInfo.email})]}),s.contactInfo.phone&&e.jsxs(h,{item:!0,xs:12,md:6,children:[e.jsx(n,{variant:"body2",color:"text.secondary",children:"Phone"}),e.jsx(n,{variant:"body1",children:s.contactInfo.phone})]}),s.contactInfo.office&&e.jsxs(h,{item:!0,xs:12,md:6,children:[e.jsx(n,{variant:"body2",color:"text.secondary",children:"Office"}),e.jsx(n,{variant:"body1",children:s.contactInfo.office})]}),s.contactInfo.officeHours&&e.jsxs(h,{item:!0,xs:12,md:6,children:[e.jsx(n,{variant:"body2",color:"text.secondary",children:"Office Hours"}),e.jsx(n,{variant:"body1",children:s.contactInfo.officeHours})]}),s.contactInfo.website&&e.jsxs(h,{item:!0,xs:12,children:[e.jsx(n,{variant:"body2",color:"text.secondary",children:"Website"}),e.jsx(n,{variant:"body1",children:e.jsx("a",{href:s.contactInfo.website,target:"_blank",rel:"noopener noreferrer",children:s.contactInfo.website})})]})]})})]}),(s==null?void 0:s.textbooks)&&s.textbooks.length>0&&e.jsxs(M,{children:[e.jsx(T,{expandIcon:e.jsx(z,{sx:{color:"#0B53C0"}}),sx:{"&:hover":{backgroundColor:"#f0f7ff !important"},"&.Mui-expanded":{backgroundColor:"#f0f7ff"},backgroundColor:"transparent"},children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(fe,{sx:{color:"#0B53C0"}}),e.jsx(n,{variant:"h6",sx:{fontFamily:"Staatliches, sans-serif",fontWeight:"bold",color:"#0B53C0",fontSize:"1.25rem"},children:"Textbooks & Resources"})]})}),e.jsx(E,{children:e.jsx(R,{children:s.textbooks.map((t,a)=>e.jsxs(W,{sx:{px:0,flexDirection:"column",alignItems:"flex-start"},children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(n,{variant:"body1",sx:{fontWeight:"medium"},children:t.title}),e.jsx(U,{label:t.required?"Required":"Optional",size:"small",color:t.required?"error":"default"})]}),e.jsxs(i,{sx:{pl:0},children:[t.author&&e.jsxs(n,{variant:"body2",color:"text.secondary",children:["by ",t.author]}),t.edition&&e.jsxs(n,{variant:"body2",color:"text.secondary",children:["Edition: ",t.edition]}),t.isbn&&e.jsxs(n,{variant:"body2",color:"text.secondary",children:["ISBN: ",t.isbn]})]})]},a))})})]}),(s==null?void 0:s.gradingPolicy)&&s.gradingPolicy.length>0&&e.jsxs(M,{children:[e.jsx(T,{expandIcon:e.jsx(z,{sx:{color:"#0B53C0"}}),sx:{"&:hover":{backgroundColor:"#f0f7ff !important"},"&.Mui-expanded":{backgroundColor:"#f0f7ff"},backgroundColor:"transparent"},children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(pe,{sx:{color:"#0B53C0"}}),e.jsx(n,{variant:"h6",sx:{fontFamily:"Staatliches, sans-serif",fontWeight:"bold",color:"#0B53C0",fontSize:"1.25rem"},children:"Grading Policy"})]})}),e.jsx(E,{children:e.jsx(R,{children:s.gradingPolicy.map((t,a)=>e.jsxs(W,{sx:{px:0,flexDirection:"column",alignItems:"flex-start"},children:[e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",mb:t.description?1:0},children:[e.jsx(n,{variant:"body1",children:t.component}),e.jsx(U,{label:`${t.percentage}%`,size:"small",color:"primary"})]}),t.description&&e.jsx(n,{variant:"body2",color:"text.secondary",children:t.description})]},a))})})]}),(s==null?void 0:s.labSpecific)&&Object.keys(s.labSpecific).length>0&&e.jsxs(M,{children:[e.jsx(T,{expandIcon:e.jsx(z,{sx:{color:"#0B53C0"}}),sx:{"&:hover":{backgroundColor:"#f0f7ff !important"},"&.Mui-expanded":{backgroundColor:"#f0f7ff"},backgroundColor:"transparent"},children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(be,{sx:{color:"#0B53C0"}}),e.jsx(n,{variant:"h6",sx:{fontFamily:"Staatliches, sans-serif",fontWeight:"bold",color:"#0B53C0",fontSize:"1.25rem"},children:"Laboratory Information"})]})}),e.jsx(E,{children:e.jsxs(h,{container:!0,spacing:3,children:[s.labSpecific.safetyRequirements&&e.jsxs(h,{item:!0,xs:12,children:[e.jsx(n,{variant:"body2",color:"text.secondary",sx:{fontWeight:"bold"},children:"Safety Requirements"}),e.jsx(R,{dense:!0,children:s.labSpecific.safetyRequirements.map((t,a)=>e.jsx(W,{sx:{py:.5},children:e.jsxs(n,{variant:"body2",children:["• ",t]})},a))})]}),s.labSpecific.dresscode&&e.jsxs(h,{item:!0,xs:12,md:6,children:[e.jsx(n,{variant:"body2",color:"text.secondary",sx:{fontWeight:"bold"},children:"Dress Code"}),e.jsx(R,{dense:!0,children:s.labSpecific.dresscode.map((t,a)=>e.jsx(W,{sx:{py:.5},children:e.jsxs(n,{variant:"body2",children:["• ",t]})},a))})]}),s.labSpecific.requiredEquipment&&e.jsxs(h,{item:!0,xs:12,md:6,children:[e.jsx(n,{variant:"body2",color:"text.secondary",sx:{fontWeight:"bold"},children:"Required Equipment"}),e.jsx(R,{dense:!0,children:s.labSpecific.requiredEquipment.map((t,a)=>e.jsx(W,{sx:{py:.5},children:e.jsxs(n,{variant:"body2",children:["• ",t]})},a))})]})]})})]}),(s==null?void 0:s.policies)&&Object.keys(s.policies).length>0&&e.jsxs(M,{children:[e.jsx(T,{expandIcon:e.jsx(z,{sx:{color:"#0B53C0"}}),sx:{"&:hover":{backgroundColor:"#f0f7ff !important"},"&.Mui-expanded":{backgroundColor:"#f0f7ff"},backgroundColor:"transparent"},children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(me,{sx:{color:"#0B53C0"}}),e.jsx(n,{variant:"h6",sx:{fontFamily:"Staatliches, sans-serif",fontWeight:"bold",color:"#0B53C0",fontSize:"1.25rem"},children:"Course Policies"})]})}),e.jsx(E,{children:e.jsx(h,{container:!0,spacing:2,children:Object.entries(s.policies).map(([t,a])=>{if(!a)return null;const p=t.replace(/([A-Z])/g," $1").replace(/^./,m=>m.toUpperCase());return e.jsxs(h,{item:!0,xs:12,children:[e.jsx(n,{variant:"body2",color:"text.secondary",sx:{fontWeight:"bold"},children:p}),e.jsx(n,{variant:"body2",sx:{mt:.5},children:a}),e.jsx(Y,{sx:{mt:1}})]},t)})})})]}),O&&e.jsxs(M,{children:[e.jsx(T,{expandIcon:e.jsx(z,{sx:{color:"#0B53C0"}}),sx:{"&:hover":{backgroundColor:"#f0f7ff !important"},"&.Mui-expanded":{backgroundColor:"#f0f7ff"},backgroundColor:"transparent"},children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(K,{sx:{color:"#0B53C0"}}),e.jsx(n,{variant:"h6",sx:{fontFamily:"Staatliches, sans-serif",fontWeight:"bold",color:"#0B53C0",fontSize:"1.25rem"},children:"Other Course Information"})]})}),e.jsx(E,{children:e.jsx(h,{container:!0,spacing:2,children:Object.entries(S).map(([t,a])=>{const p=t.replace(/([A-Z])/g," $1").replace(/^./,m=>m.toUpperCase());return e.jsxs(h,{item:!0,xs:12,children:[e.jsx(n,{variant:"body2",color:"text.secondary",sx:{fontWeight:"bold"},children:p}),e.jsx(i,{sx:{mt:.5},children:Array.isArray(a)?e.jsx(R,{dense:!0,children:a.map((m,ae)=>e.jsx(W,{sx:{py:.25,px:0},children:e.jsxs(n,{variant:"body2",children:["• ",typeof m=="object"?JSON.stringify(m,null,2):String(m)]})},ae))}):typeof a=="object"?e.jsx(i,{sx:{p:1,backgroundColor:"grey.100",borderRadius:1},children:e.jsx(n,{variant:"body2",component:"pre",sx:{fontFamily:"monospace",fontSize:"0.875rem"},children:JSON.stringify(a,null,2)})}):e.jsx(n,{variant:"body2",children:String(a)})}),Object.keys(S).indexOf(t)<Object.keys(S).length-1&&e.jsx(Y,{sx:{mt:2}})]},t)})})})]})]}),e.jsxs(H,{open:I,onClose:()=>g(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:"15px",backgroundColor:"#f8f9fa"}},children:[e.jsxs(_,{sx:{display:"flex",alignItems:"center",gap:1,fontFamily:"Staatliches, sans-serif",fontSize:"1.5rem",fontWeight:"bold",color:"#0B53C0",backgroundColor:"#ECF4FE",borderBottom:"1px solid #e3f2fd"},children:[e.jsx(X,{sx:{color:"#0B53C0"}}),"Syllabus Document"]}),e.jsx(J,{sx:{pt:3},children:l&&e.jsxs(i,{children:[e.jsxs(n,{variant:"body1",sx:{mb:2,fontFamily:"Staatliches, sans-serif",fontSize:"1.1rem",color:"#0B53C0"},children:[e.jsx("strong",{children:"Filename:"})," ",l.metadata.originalFilename]}),e.jsxs(n,{variant:"body2",color:"text.secondary",sx:{mb:1},children:[e.jsx("strong",{children:"Type:"})," ",Se(l.metadata.fileType)]}),e.jsxs(n,{variant:"body2",color:"text.secondary",sx:{mb:1},children:[e.jsx("strong",{children:"Size:"})," ",Fe(l.metadata.fileSize)]}),e.jsxs(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:[e.jsx("strong",{children:"Uploaded:"})," ",(()=>{if(!l.metadata.uploadedAt)return"Date not available";const t=l.metadata.uploadedAt;if(t instanceof Date)return t.toLocaleDateString();if(typeof t=="object"&&t!==null&&"seconds"in t)return new Date(t.seconds*1e3).toLocaleDateString();try{return new Date(t).toLocaleDateString()}catch{return"Date not available"}})()]})]})}),e.jsxs(V,{sx:{p:3,gap:2},children:[e.jsx(C,{onClick:()=>g(!1),sx:{fontFamily:"Staatliches, sans-serif",fontSize:"1.1rem",textTransform:"none",borderRadius:"15px",color:"#666","&:hover":{backgroundColor:"#f0f0f0"}},children:"Close"}),e.jsx(C,{onClick:F,variant:"contained",startIcon:e.jsx(Q,{}),sx:{fontFamily:"Staatliches, sans-serif",fontSize:"1.1rem",textTransform:"none",borderRadius:"15px",backgroundColor:"#CDDAFF",color:"#0B53C0","&:hover":{backgroundColor:"#0B53C0",color:"#FFFFFF"}},children:"Download"})]})]})]})},Ne=()=>{const{userDetails:o}=Z(),[x]=ve(),s=x.get("course")||null,b=d.useMemo(()=>{const f=o!=null&&o.classes?Object.entries(o.classes).map(([c,u])=>({id:c,number:u.number,title:u.title})):[];return console.log("[SupplementalMaterials] Course list updated:",{count:f.length,courses:f.map(c=>`${c.number} - ${c.title}`),timestamp:new Date().toISOString()}),f},[o==null?void 0:o.classes]),l=d.useMemo(()=>b.find(f=>f.id===s),[b,s]);return e.jsxs(i,{className:"supplemental-container",children:[e.jsx(Ae,{}),s?e.jsxs(i,{children:[e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(ke,{returnToSelection:!0}),e.jsx(U,{label:l?`${l.number} - ${l.title}`:"Selected Course",variant:"outlined",sx:{borderRadius:"15px",fontSize:"32px",fontWeight:"bold",background:"#e0f2f1",color:"#00695c",cursor:"pointer",transition:"background-color 0.3s",fontFamily:"Staatliches, sans-serif",padding:"20px 20px","&:hover":{backgroundColor:"#b2dfdb"}}})]}),e.jsx(Oe,{courseId:s,isAdmin:o==null?void 0:o.isAdmin}),e.jsxs(i,{className:"supplemental-content",children:[(o==null?void 0:o.isAdmin)&&e.jsx(we,{selectedCourse:s}),e.jsx(Re,{initialCourse:s})]})]}):e.jsx(e.Fragment,{children:e.jsx(We,{courses:b})})]})};export{Ne as default};
