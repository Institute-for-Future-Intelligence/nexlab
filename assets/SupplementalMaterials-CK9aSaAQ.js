import{j as e,E as ee,H as te,ao as D,ac as Ie,an as _,B as l,v as Y,t as X,I as Q,a4 as ge,a8 as we,am as ce,T as a,ah as Fe,a3 as Ae,a as w,ak as De,$ as de,r as f,G as b,c0 as ze,c1 as Me,aq as ye,V as se,W as ne,X as oe,Y as je,Z as ae,C as Ce,aa as We,A as Se,O as Te,P as Pe,aL as xe,aI as he,at as ue,aA as O,aB as q,aC as Re,a6 as L,aD as N,aE as Be,a0 as U,a1 as H,aF as $e,U as Ee,aG as Oe,D as pe}from"./ui-BwJ-ZVW0.js";import{j as r,P as qe,f as ie,b as I,u as le,c as y,a as re,d as Le,s as S,t as j,k as ve,l as Ne,m as Ue,n as He}from"./index-mmg1ZZRz.js";import{P as Z,R as fe,j as V,_ as me,I as Ye,e as K,D as Ge,i as _e,f as ke}from"./firebase-Bm-nAVUv.js";import"./vendor-BFl3bqVE.js";const Ze=s=>{const x=new Date;if(s.scheduledTimestamp){const o=s.scheduledTimestamp.toDate();return o>x?`Scheduled for ${o.toLocaleDateString()}`:`Scheduled ${o.toLocaleDateString()}`}if(s.published){const o=s.timestamp.toDate(),d=Math.floor((x.getTime()-o.getTime())/(1e3*60*60*24));if(d===0)return"Published today";if(d===1)return"Published yesterday";if(d<7)return`Published ${d} days ago`;if(d<30){const h=Math.floor(d/7);return`Published ${h} week${h>1?"s":""} ago`}else return`Published ${o.toLocaleDateString()}`}const t=s.timestamp.toDate(),c=Math.floor((x.getTime()-t.getTime())/(1e3*60*60*24));if(c===0)return"Created today";if(c===1)return"Created yesterday";if(c<7)return`Created ${c} days ago`;if(c<30){const o=Math.floor(c/7);return`Created ${o} week${o>1?"s":""} ago`}else return`Created ${t.toLocaleDateString()}`},Je=({material:s,isCourseAdmin:x=!1,loading:t=!1,onView:c,onEdit:o,onDelete:d,onUnpublish:h,className:u})=>{const p=(g=>g.published?{label:"Published",color:r.palette.success.main,backgroundColor:r.palette.success.light,icon:e.jsx(ce,{sx:{fontSize:16}})}:g.scheduledTimestamp?{label:"Scheduled",color:r.palette.info.main,backgroundColor:r.palette.info.light,icon:e.jsx(Fe,{sx:{fontSize:16}})}:{label:"Draft",color:r.palette.warning.main,backgroundColor:r.palette.warning.light,icon:e.jsx(Ae,{sx:{fontSize:16}})})(s);return t?e.jsxs(ee,{className:u,sx:{height:200},children:[e.jsxs(te,{children:[e.jsx(D,{variant:"text",width:"80%",height:32}),e.jsx(D,{variant:"text",width:"60%",height:24,sx:{mt:1}}),e.jsx(D,{variant:"rectangular",width:"100%",height:40,sx:{mt:2,borderRadius:2}})]}),e.jsxs(Ie,{children:[e.jsx(D,{variant:"circular",width:40,height:40}),e.jsx(D,{variant:"circular",width:40,height:40}),e.jsx(D,{variant:"circular",width:40,height:40})]})]}):e.jsx(_,{in:!0,timeout:300,children:e.jsx(ee,{className:u,sx:{height:"100%",display:"flex",flexDirection:"column",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"translateY(-4px)",boxShadow:r.shadows[8]}},children:e.jsxs(te,{sx:{flexGrow:1,pb:3,px:3,pt:3},children:[e.jsxs(l,{sx:{mb:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(Y,{icon:p.icon,label:p.label,size:"small",sx:{backgroundColor:p.backgroundColor,color:p.color,fontWeight:600,"& .MuiChip-icon":{color:p.color}}}),x&&e.jsxs(l,{sx:{display:"flex",gap:.5},children:[e.jsx(X,{title:"Edit Material",arrow:!0,children:e.jsx(Q,{size:"small",onClick:g=>{g.stopPropagation(),o==null||o(s.id)},sx:{color:r.palette.primary.main,"&:hover":{backgroundColor:r.palette.primary.light,color:r.palette.primary.contrastText}},children:e.jsx(ge,{fontSize:"small"})})}),e.jsx(X,{title:"Delete Material",arrow:!0,children:e.jsx(Q,{size:"small",onClick:g=>{g.stopPropagation(),d==null||d(s.id)},sx:{color:r.palette.error.main,"&:hover":{backgroundColor:r.palette.error.light,color:r.palette.error.contrastText}},children:e.jsx(we,{fontSize:"small"})})}),s.published&&h&&e.jsx(X,{title:"Unpublish Material",arrow:!0,children:e.jsx(Q,{size:"small",onClick:g=>{g.stopPropagation(),h==null||h(s.id)},sx:{color:r.palette.warning.main,"&:hover":{backgroundColor:r.palette.warning.light,color:r.palette.warning.contrastText}},children:e.jsx(ce,{fontSize:"small"})})})]})]}),e.jsx(a,{variant:"h5",component:"h3",sx:{fontFamily:r.typography.h5.fontFamily,fontWeight:600,fontSize:{xs:"1.25rem",sm:"1.5rem"},lineHeight:1.3,color:r.palette.text.primary,mb:1,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{color:r.palette.primary.main,textDecoration:"underline",textDecorationColor:r.palette.primary.main,textDecorationThickness:"2px",textUnderlineOffset:"4px",transform:"translateY(-1px)"}},onClick:g=>{g.stopPropagation(),c==null||c(s.id)},children:s.title||"Untitled Material"}),e.jsx(l,{sx:{mt:2},children:e.jsxs(a,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.875rem",display:"flex",alignItems:"center",gap:1},children:[e.jsx(l,{component:"span",sx:{width:8,height:8,borderRadius:"50%",backgroundColor:p.color}}),Ze(s)]})})]})})})},Ke=()=>e.jsx(qe,{title:"Course Materials"}),Xe=({selectedCourse:s,variant:x="contained",size:t="large",showModeToggle:c=!1,onModeChange:o,currentMode:d="manual"})=>{const h=ie(),u=()=>{s&&h(`/add-material?course=${s}&mode=${c?d:"manual"}`)},v=p=>{o&&o(p)};return c?e.jsx(_,{in:!0,timeout:500,children:e.jsxs(l,{sx:{display:"flex",flexDirection:"column",gap:2,p:3,backgroundColor:r.palette.background.paper,borderRadius:I["2xl"],border:`1px solid ${r.palette.divider}`,boxShadow:r.shadows[2]},children:[e.jsx(a,{variant:"h6",sx:{fontFamily:r.typography.h6.fontFamily,fontWeight:r.typography.h6.fontWeight,color:r.palette.text.primary,textAlign:"center",mb:1},children:"Create New Material"}),e.jsx(a,{variant:"body2",sx:{color:r.palette.text.secondary,textAlign:"center",mb:2},children:"Choose how you'd like to create your material"}),e.jsxs(l,{sx:{display:"flex",gap:2},children:[e.jsx(w,{variant:d==="manual"?"contained":"outlined",startIcon:e.jsx(ge,{}),onClick:()=>v("manual"),disabled:!s,sx:{flex:1,py:2,borderRadius:I.xl,textTransform:"none",fontWeight:600,...d==="manual"&&{backgroundColor:r.palette.primary.main,"&:hover":{backgroundColor:r.palette.primary.dark}},...d!=="manual"&&{borderColor:r.palette.primary.main,color:r.palette.primary.main,"&:hover":{backgroundColor:r.palette.primary.light,borderColor:r.palette.primary.dark}}},children:"Manual Entry"}),e.jsx(w,{variant:d==="ai"?"contained":"outlined",startIcon:e.jsx(De,{}),onClick:()=>v("ai"),disabled:!s,sx:{flex:1,py:2,borderRadius:I.xl,textTransform:"none",fontWeight:600,...d==="ai"&&{backgroundColor:r.palette.secondary.main,"&:hover":{backgroundColor:r.palette.secondary.dark}},...d!=="ai"&&{borderColor:r.palette.secondary.main,color:r.palette.secondary.main,"&:hover":{backgroundColor:r.palette.secondary.light,borderColor:r.palette.secondary.dark}}},children:"AI Import"})]}),e.jsx(w,{variant:"contained",startIcon:e.jsx(de,{}),onClick:u,disabled:!s,size:t,sx:{width:"100%",py:2,borderRadius:I.xl,textTransform:"none",fontWeight:600,backgroundColor:d==="ai"?r.palette.secondary.main:r.palette.primary.main,"&:hover":{backgroundColor:d==="ai"?r.palette.secondary.dark:r.palette.primary.dark,transform:"translateY(-1px)",boxShadow:r.shadows[4]},transition:r.transitions.create(["all"],{duration:r.transitions.duration.short})},children:d==="ai"?"Import with AI":"Create Material"})]})}):e.jsx(_,{in:!0,timeout:300,children:e.jsx(w,{variant:x,startIcon:e.jsx(de,{}),onClick:u,disabled:!s,size:t,sx:{borderRadius:r.shape.borderRadius,textTransform:"none",fontWeight:600,py:t==="large"?2:t==="medium"?1.5:1,px:t==="large"?4:t==="medium"?3:2,transition:r.transitions.create(["all"],{duration:r.transitions.duration.short}),"&:hover":{transform:"translateY(-1px)",boxShadow:r.shadows[4]},...x==="contained"&&{backgroundColor:r.palette.primary.main,"&:hover":{backgroundColor:r.palette.primary.dark}},...x==="outlined"&&{borderColor:r.palette.primary.main,color:r.palette.primary.main,"&:hover":{backgroundColor:r.palette.primary.light,borderColor:r.palette.primary.dark}}},children:"Add Material"})})},Qe=({courseId:s,isCourseAdmin:x,onDeleteClick:t,onUnpublishClick:c})=>{const[o,d]=f.useState(0),[h,u]=f.useState([]),[v,p]=f.useState(!0),[g,F]=f.useState(null),{userDetails:A}=le(),P=ie(),z=Z(),k=x;f.useEffect(()=>{if(!s){u([]),p(!1);return}p(!0);const n=A!=null&&A.isAdmin?fe(me(z,"materials"),V("course","==",s)):fe(me(z,"materials"),V("course","==",s),V("published","==",!0)),i=Ye(n,m=>{const G=m.docs.map(T=>({id:T.id,...T.data()})).sort((T,J)=>T.sequenceNumber!==void 0&&J.sequenceNumber!==void 0?T.sequenceNumber-J.sequenceNumber:T.sequenceNumber!==void 0?-1:J.sequenceNumber!==void 0?1:J.timestamp.toMillis()-T.timestamp.toMillis());u(G),p(!1),F(null)},m=>{console.error("Error fetching materials:",m),F("Failed to fetch materials"),p(!1)});return()=>i()},[s,z,A]);const R=(n,i)=>{d(i)},B=n=>{P(`/view-material/${n}`)},$=n=>{P(`/edit-material/${n}`)},M=n=>h.filter(i=>{switch(n){case"published":return i.published===!0;case"scheduled":return i.scheduledTimestamp&&!i.published;case"saved":return!i.published&&!i.scheduledTimestamp;default:return!1}}),E=n=>M(n).length,W=k?M(["published","scheduled","saved"][o]):h.filter(n=>n.published===!0);return v?e.jsxs(l,{sx:{width:"100%"},children:[e.jsx(l,{sx:{mb:4},children:e.jsx(D,{variant:"rectangular",height:60,sx:{borderRadius:2}})}),e.jsx(b,{container:!0,spacing:3,children:Array.from({length:6}).map((n,i)=>e.jsx(b,{item:!0,xs:12,sm:6,md:4,children:e.jsx(D,{variant:"rectangular",height:200,sx:{borderRadius:2}})},i))})]}):g?e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:200,p:4},children:[e.jsx(a,{variant:"h6",sx:{color:r.palette.error.main,mb:2,textAlign:"center"},children:"Error Loading Materials"}),e.jsx(a,{variant:"body2",sx:{color:r.palette.text.secondary,textAlign:"center"},children:g})]}):e.jsxs(l,{sx:{width:"100%"},children:[k&&e.jsx(l,{sx:{mb:4},children:e.jsx(ze,{value:o,onChange:R,variant:"fullWidth",sx:{backgroundColor:r.palette.background.paper,borderRadius:I.xl,boxShadow:r.shadows[1],"& .MuiTabs-indicator":{backgroundColor:r.palette.primary.main,height:3,borderRadius:"3px 3px 0 0"},"& .MuiTabs-flexContainer":{gap:1}},children:[{key:"published",label:"Published",icon:"ðŸ“š"},{key:"scheduled",label:"Scheduled",icon:"â°"},{key:"saved",label:"Drafts",icon:"ðŸ’¾"}].map((n,i)=>{const m=E(n.key);return e.jsx(Me,{label:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(a,{variant:"button",sx:{fontWeight:600,textTransform:"none",fontSize:"0.875rem"},children:n.label}),e.jsx(Y,{label:m,size:"small",sx:{backgroundColor:r.palette.primary.light,color:r.palette.primary.main,fontWeight:600,minWidth:24,height:20,fontSize:"0.75rem"}})]}),sx:{textTransform:"none",fontWeight:600,minHeight:48,color:r.palette.text.primary,"&.Mui-selected":{color:r.palette.primary.main,backgroundColor:r.palette.primary.light,borderRadius:I.xl},"&:hover":{backgroundColor:r.palette.action.hover,borderRadius:I.xl}}},n.key)})})}),W.length===0?e.jsx(ye,{maxWidth:"md",children:e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:300,textAlign:"center"},children:[e.jsx(a,{variant:"h6",sx:{color:r.palette.text.secondary,mb:2},children:k?e.jsxs(e.Fragment,{children:[o===0&&"No published materials yet.",o===1&&"No scheduled materials.",o===2&&"No draft materials saved."]}):"No published materials available."}),e.jsx(a,{variant:"body2",sx:{color:r.palette.text.disabled},children:k?e.jsxs(e.Fragment,{children:[o===0&&"Published materials will appear here once you publish them.",o===1&&"Scheduled materials will appear here once you schedule them.",o===2&&"Draft materials will appear here as you work on them."]}):"Published materials will appear here once they are made available."})]})}):e.jsx(_,{in:!0,timeout:300,children:e.jsx(b,{container:!0,spacing:3,children:W.map(n=>e.jsx(b,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Je,{material:n,isCourseAdmin:x,onView:B,onEdit:$,onDelete:t,onUnpublish:c})},n.id))})})]})},Ve=({materialId:s,open:x,onClose:t,onDelete:c})=>{const o=Z(),d=async()=>{const h=K(o,"materials",s);await Ge(h),c(),t()};return e.jsxs(se,{open:x,onClose:t,children:[e.jsx(ne,{children:"Delete Material"}),e.jsx(oe,{children:e.jsx(je,{children:"Are you sure you want to delete this material? This action cannot be undone."})}),e.jsxs(ae,{children:[e.jsx(w,{onClick:t,color:"primary",children:"Cancel"}),e.jsx(w,{onClick:d,color:"secondary",children:"Delete"})]})]})},et=({materialId:s,open:x,onClose:t,onUnpublish:c})=>{const o=Z(),d=async()=>{const h=K(o,"materials",s);await _e(h,{published:!1}),c(),t()};return e.jsxs(se,{open:x,onClose:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(ne,{id:"alert-dialog-title",children:"Unpublish Material"}),e.jsx(oe,{children:e.jsx(je,{id:"alert-dialog-description",children:"Are you sure you want to unpublish this material? It will no longer be visible to users until it is published again."})}),e.jsxs(ae,{children:[e.jsx(w,{onClick:t,color:"primary",children:"Cancel"}),e.jsx(w,{onClick:d,color:"error",autoFocus:!0,children:"Unpublish"})]})]})},tt=({initialCourse:s})=>{const{userDetails:x}=le(),t=Z(),[c,o]=f.useState(s??null),[d,h]=f.useState(!1),[u,v]=f.useState(null),[p,g]=f.useState({open:!1,materialId:null}),[F,A]=f.useState(null),[P,z]=f.useState(!1),k=f.useCallback(async()=>{if(c)try{z(!0);const i=K(t,"courses",c),m=await ke(i);if(m.exists()){const C=m.data(),G=(C==null?void 0:C.courseAdmin)||[];h(G.includes(x==null?void 0:x.uid))}else h(!1)}catch(i){console.error("Error fetching course admin status:",i),A("Failed to verify course permissions")}finally{z(!1)}},[c,t,x]);f.useEffect(()=>{c&&k()},[c,k]),f.useEffect(()=>{s&&c!==s&&o(s)},[s,c]);const R=i=>{v(i)},B=()=>{v(null)},$=()=>{console.log("Material deleted:",u),v(null)},M=i=>{g({open:!0,materialId:i})},E=()=>{console.log("Material unpublished:",p.materialId),g({open:!1,materialId:null})},W=()=>{g({open:!1,materialId:null})},n=()=>{A(null)};return e.jsxs(l,{sx:{width:"100%"},children:[c?e.jsx(_,{in:!0,timeout:500,children:e.jsx(l,{children:e.jsx(Qe,{courseId:c,isCourseAdmin:d,onDeleteClick:R,onUnpublishClick:M})})}):e.jsx(ye,{maxWidth:"md",children:e.jsxs(l,{sx:{textAlign:"center",py:8,px:4,backgroundColor:r.palette.background.paper,borderRadius:I["2xl"],border:`1px solid ${r.palette.divider}`},children:[e.jsx(a,{variant:"h5",sx:{fontFamily:r.typography.h5.fontFamily,fontWeight:r.typography.h5.fontWeight,color:r.palette.text.secondary,mb:2},children:"Select a Course"}),e.jsx(a,{variant:"body1",sx:{color:r.palette.text.secondary,maxWidth:400,mx:"auto"},children:"Please select a course from the dropdown above to view and manage course materials."})]})}),P&&e.jsx(l,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:4},children:e.jsx(Ce,{size:40,sx:{color:r.palette.primary.main}})}),u&&e.jsx(Ve,{materialId:u,open:!!u,onClose:B,onDelete:$}),p.materialId&&e.jsx(et,{materialId:p.materialId,open:p.open,onClose:W,onUnpublish:E}),F&&e.jsx(We,{open:!!F,autoHideDuration:6e3,onClose:n,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(Se,{onClose:n,severity:"error",sx:{backgroundColor:r.palette.error.light,color:r.palette.error.contrastText,"& .MuiAlert-icon":{color:r.palette.error.main}},children:F})})]})},rt=({course:s,onClick:x})=>{const t=s.isPublic??!1;return e.jsx(ee,{onClick:x,sx:{height:"100%",cursor:"pointer",backgroundColor:y.background.primary,borderRadius:I.xl,border:`1px solid ${y.neutral[200]}`,boxShadow:re.sm,transition:Le.transitions.normal,position:"relative","&:hover":{transform:"translateY(-8px)",boxShadow:re.xl,border:`1px solid ${t?y.warning:y.primary[500]}`}},children:e.jsx(te,{sx:{textAlign:"center",p:S[4],height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:e.jsxs(l,{sx:{flex:1},children:[e.jsx(l,{sx:{color:t?y.warning:y.primary[500],mb:S[3],display:"flex",justifyContent:"center"},children:e.jsx(Te,{sx:{fontSize:40}})}),e.jsx(a,{variant:"h6",component:"h3",sx:{fontWeight:j.fontWeight.bold,fontFamily:j.fontFamily.display,fontSize:"2rem",color:y.text.primary,mb:S[2]},children:s.number}),e.jsx(a,{variant:"body2",sx:{color:y.text.secondary,fontFamily:j.fontFamily.secondary,fontSize:j.fontSize.lg,lineHeight:1.5,mb:S[1]},children:s.title}),s.enrolledAt&&e.jsxs(a,{variant:"caption",sx:{color:y.text.tertiary,fontFamily:j.fontFamily.secondary,fontSize:j.fontSize.xs,fontStyle:"italic",mb:S[2],display:"block"},children:["Enrolled: ",s.enrolledAt.toLocaleDateString()]}),e.jsx(Y,{label:s.isCourseAdmin?"Instructor Access":"Student Access",size:"small",sx:{backgroundColor:s.isCourseAdmin?y.warning+"20":y.secondary[100],color:s.isCourseAdmin?y.warning:y.secondary[700],fontFamily:j.fontFamily.secondary,fontWeight:j.fontWeight.medium,fontSize:j.fontSize.xs}})]})})})},be=({title:s,courses:x,onCourseClick:t})=>x.length===0?null:e.jsxs(l,{sx:{mb:S[6]},children:[e.jsxs(l,{sx:{mb:S[4]},children:[e.jsx(a,{variant:"h4",component:"h2",sx:{fontFamily:j.fontFamily.display,fontSize:j.fontSize.xl,fontWeight:j.fontWeight.bold,color:y.text.primary,mb:S[2]},children:s}),e.jsxs(a,{variant:"body1",sx:{fontFamily:j.fontFamily.secondary,fontSize:j.fontSize.base,color:y.text.secondary,lineHeight:1.6},children:[x.length," ",x.length===1?"course":"courses"," available"]})]}),e.jsx(b,{container:!0,spacing:S[4],children:x.map(c=>e.jsx(b,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(rt,{course:c,onClick:()=>t(c.id)})},c.id))})]}),st=({courses:s})=>{const x=ie(),{publicCourses:t,userCourses:c}=ve(),o=d=>{x(`/supplemental-materials?course=${d}`)};return e.jsx(l,{sx:{width:"100%",padding:4},children:e.jsxs(l,{sx:{mb:S[6],p:S[4],backgroundColor:y.background.secondary,borderRadius:I.xl,border:`1px solid ${y.neutral[200]}`,boxShadow:re.sm,position:"relative",mt:S[3]},children:[e.jsx(l,{sx:{position:"absolute",top:"-25px",left:"40px",backgroundColor:y.secondary[500],borderRadius:`${I.lg} ${I.lg} 0 0`,px:S[3],py:S[1],zIndex:1},children:e.jsx(a,{sx:{color:y.text.inverse,fontFamily:j.fontFamily.display,fontSize:"2rem",fontWeight:j.fontWeight.bold,whiteSpace:"nowrap",lineHeight:1},children:"Available Courses"})}),e.jsxs(l,{sx:{mt:S[3]},children:[t.length>0&&e.jsx(be,{title:t.length===1?"Public Course":"Public Courses",courses:t,onCourseClick:o}),e.jsx(be,{title:"Your Enrolled Courses",courses:c,onCourseClick:o})]})]})})},nt=({courseId:s,isAdmin:x=!1})=>{var $,M,E,W;const[t,c]=f.useState(null),[o,d]=f.useState(null),[h,u]=f.useState(!0),[v,p]=f.useState(null),[g,F]=f.useState(!1),A=Z();f.useEffect(()=>{s&&(async()=>{try{u(!0);const i=K(A,"courses",s),m=await ke(i);if(m.exists()){const C=m.data();c(C.additionalInfo||null),d(C.syllabusFile||null)}else p("Course not found")}catch(i){console.error("Error fetching course additional info:",i),p("Failed to load course information")}finally{u(!1)}})()},[s,A]);const P=()=>{o!=null&&o.url&&window.open(o.url,"_blank")},k=(()=>{if(!t)return{};const n=new Set(["contactInfo","policies","additionalResources","labSpecific","textbooks","gradingPolicy","assignments","prerequisites","lastUpdated"]),i={};return Object.keys(t).forEach(m=>{!n.has(m)&&t[m]!=null&&(i[m]=t[m])}),i})(),R=Object.keys(k).length>0,B=t&&(t.contactInfo||t.policies||t.additionalResources||t.labSpecific||(($=t.textbooks)==null?void 0:$.length)||((M=t.gradingPolicy)==null?void 0:M.length)||((E=t.assignments)==null?void 0:E.length)||((W=t.prerequisites)==null?void 0:W.length)||R);return h?e.jsx(l,{sx:{display:"flex",justifyContent:"center",p:3},children:e.jsx(Ce,{})}):v?e.jsx(Se,{severity:"error",sx:{mb:3},children:v}):!B&&!o?null:e.jsxs(Pe,{sx:{p:3,mb:4,backgroundColor:"#f8f9fa",borderRadius:"15px",border:"1px solid #e3f2fd"},children:[e.jsxs(a,{variant:"h4",sx:{mb:3,display:"flex",alignItems:"center",gap:1,fontFamily:"Staatliches, sans-serif",fontWeight:"bold",color:"#0B53C0",fontSize:"2rem"},children:[e.jsx(xe,{sx:{color:"#0B53C0"}}),"Course Information"]}),o&&e.jsx(l,{sx:{mb:3},children:e.jsx(w,{variant:"outlined",startIcon:e.jsx(ue,{}),endIcon:e.jsx(he,{}),onClick:()=>F(!0),sx:{mb:2,fontFamily:"Staatliches, sans-serif",fontSize:"1.2rem",textTransform:"none",borderRadius:"15px",backgroundColor:"#CDDAFF",color:"#0B53C0",border:"1px solid #0B53C0","&:hover":{backgroundColor:"#0B53C0",color:"#FFFFFF"}},children:"Syllabus"})}),B&&e.jsxs(l,{sx:{mb:2},children:[(t==null?void 0:t.contactInfo)&&Object.keys(t.contactInfo).length>0&&e.jsxs(O,{children:[e.jsx(q,{expandIcon:e.jsx(L,{sx:{color:"#0B53C0"}}),sx:{"&:hover":{backgroundColor:"#f0f7ff !important"},"&.Mui-expanded":{backgroundColor:"#f0f7ff"},backgroundColor:"transparent"},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Re,{sx:{color:"#0B53C0"}}),e.jsx(a,{variant:"h6",sx:{fontFamily:"Staatliches, sans-serif",fontWeight:"bold",color:"#0B53C0",fontSize:"1.25rem"},children:"Contact Information"})]})}),e.jsx(N,{children:e.jsxs(b,{container:!0,spacing:2,children:[t.contactInfo.email&&e.jsxs(b,{item:!0,xs:12,md:6,children:[e.jsx(a,{variant:"body2",color:"text.secondary",children:"Email"}),e.jsx(a,{variant:"body1",children:t.contactInfo.email})]}),t.contactInfo.phone&&e.jsxs(b,{item:!0,xs:12,md:6,children:[e.jsx(a,{variant:"body2",color:"text.secondary",children:"Phone"}),e.jsx(a,{variant:"body1",children:t.contactInfo.phone})]}),t.contactInfo.office&&e.jsxs(b,{item:!0,xs:12,md:6,children:[e.jsx(a,{variant:"body2",color:"text.secondary",children:"Office"}),e.jsx(a,{variant:"body1",children:t.contactInfo.office})]}),t.contactInfo.officeHours&&e.jsxs(b,{item:!0,xs:12,md:6,children:[e.jsx(a,{variant:"body2",color:"text.secondary",children:"Office Hours"}),e.jsx(a,{variant:"body1",children:t.contactInfo.officeHours})]}),t.contactInfo.website&&e.jsxs(b,{item:!0,xs:12,children:[e.jsx(a,{variant:"body2",color:"text.secondary",children:"Website"}),e.jsx(a,{variant:"body1",children:e.jsx("a",{href:t.contactInfo.website,target:"_blank",rel:"noopener noreferrer",children:t.contactInfo.website})})]})]})})]}),(t==null?void 0:t.textbooks)&&t.textbooks.length>0&&e.jsxs(O,{children:[e.jsx(q,{expandIcon:e.jsx(L,{sx:{color:"#0B53C0"}}),sx:{"&:hover":{backgroundColor:"#f0f7ff !important"},"&.Mui-expanded":{backgroundColor:"#f0f7ff"},backgroundColor:"transparent"},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Be,{sx:{color:"#0B53C0"}}),e.jsx(a,{variant:"h6",sx:{fontFamily:"Staatliches, sans-serif",fontWeight:"bold",color:"#0B53C0",fontSize:"1.25rem"},children:"Textbooks & Resources"})]})}),e.jsx(N,{children:e.jsx(U,{children:t.textbooks.map((n,i)=>e.jsxs(H,{sx:{px:0,flexDirection:"column",alignItems:"flex-start"},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(a,{variant:"body1",sx:{fontWeight:"medium"},children:n.title}),e.jsx(Y,{label:n.required?"Required":"Optional",size:"small",color:n.required?"error":"default"})]}),e.jsxs(l,{sx:{pl:0},children:[n.author&&e.jsxs(a,{variant:"body2",color:"text.secondary",children:["by ",n.author]}),n.edition&&e.jsxs(a,{variant:"body2",color:"text.secondary",children:["Edition: ",n.edition]}),n.isbn&&e.jsxs(a,{variant:"body2",color:"text.secondary",children:["ISBN: ",n.isbn]})]})]},i))})})]}),(t==null?void 0:t.gradingPolicy)&&t.gradingPolicy.length>0&&e.jsxs(O,{children:[e.jsx(q,{expandIcon:e.jsx(L,{sx:{color:"#0B53C0"}}),sx:{"&:hover":{backgroundColor:"#f0f7ff !important"},"&.Mui-expanded":{backgroundColor:"#f0f7ff"},backgroundColor:"transparent"},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx($e,{sx:{color:"#0B53C0"}}),e.jsx(a,{variant:"h6",sx:{fontFamily:"Staatliches, sans-serif",fontWeight:"bold",color:"#0B53C0",fontSize:"1.25rem"},children:"Grading Policy"})]})}),e.jsx(N,{children:e.jsx(U,{children:t.gradingPolicy.map((n,i)=>e.jsxs(H,{sx:{px:0,flexDirection:"column",alignItems:"flex-start"},children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",mb:n.description?1:0},children:[e.jsx(a,{variant:"body1",children:n.component}),e.jsx(Y,{label:`${n.percentage}%`,size:"small",color:"primary"})]}),n.description&&e.jsx(a,{variant:"body2",color:"text.secondary",children:n.description})]},i))})})]}),(t==null?void 0:t.labSpecific)&&Object.keys(t.labSpecific).length>0&&e.jsxs(O,{children:[e.jsx(q,{expandIcon:e.jsx(L,{sx:{color:"#0B53C0"}}),sx:{"&:hover":{backgroundColor:"#f0f7ff !important"},"&.Mui-expanded":{backgroundColor:"#f0f7ff"},backgroundColor:"transparent"},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ee,{sx:{color:"#0B53C0"}}),e.jsx(a,{variant:"h6",sx:{fontFamily:"Staatliches, sans-serif",fontWeight:"bold",color:"#0B53C0",fontSize:"1.25rem"},children:"Laboratory Information"})]})}),e.jsx(N,{children:e.jsxs(b,{container:!0,spacing:3,children:[t.labSpecific.safetyRequirements&&e.jsxs(b,{item:!0,xs:12,children:[e.jsx(a,{variant:"body2",color:"text.secondary",sx:{fontWeight:"bold"},children:"Safety Requirements"}),e.jsx(U,{dense:!0,children:t.labSpecific.safetyRequirements.map((n,i)=>e.jsx(H,{sx:{py:.5},children:e.jsxs(a,{variant:"body2",children:["â€¢ ",n]})},i))})]}),t.labSpecific.dresscode&&e.jsxs(b,{item:!0,xs:12,md:6,children:[e.jsx(a,{variant:"body2",color:"text.secondary",sx:{fontWeight:"bold"},children:"Dress Code"}),e.jsx(U,{dense:!0,children:t.labSpecific.dresscode.map((n,i)=>e.jsx(H,{sx:{py:.5},children:e.jsxs(a,{variant:"body2",children:["â€¢ ",n]})},i))})]}),t.labSpecific.requiredEquipment&&e.jsxs(b,{item:!0,xs:12,md:6,children:[e.jsx(a,{variant:"body2",color:"text.secondary",sx:{fontWeight:"bold"},children:"Required Equipment"}),e.jsx(U,{dense:!0,children:t.labSpecific.requiredEquipment.map((n,i)=>e.jsx(H,{sx:{py:.5},children:e.jsxs(a,{variant:"body2",children:["â€¢ ",n]})},i))})]})]})})]}),(t==null?void 0:t.policies)&&Object.keys(t.policies).length>0&&e.jsxs(O,{children:[e.jsx(q,{expandIcon:e.jsx(L,{sx:{color:"#0B53C0"}}),sx:{"&:hover":{backgroundColor:"#f0f7ff !important"},"&.Mui-expanded":{backgroundColor:"#f0f7ff"},backgroundColor:"transparent"},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Oe,{sx:{color:"#0B53C0"}}),e.jsx(a,{variant:"h6",sx:{fontFamily:"Staatliches, sans-serif",fontWeight:"bold",color:"#0B53C0",fontSize:"1.25rem"},children:"Course Policies"})]})}),e.jsx(N,{children:e.jsx(b,{container:!0,spacing:2,children:Object.entries(t.policies).map(([n,i])=>{if(!i)return null;const m=n.replace(/([A-Z])/g," $1").replace(/^./,C=>C.toUpperCase());return e.jsxs(b,{item:!0,xs:12,children:[e.jsx(a,{variant:"body2",color:"text.secondary",sx:{fontWeight:"bold"},children:m}),e.jsx(a,{variant:"body2",sx:{mt:.5},children:i}),e.jsx(pe,{sx:{mt:1}})]},n)})})})]}),R&&e.jsxs(O,{children:[e.jsx(q,{expandIcon:e.jsx(L,{sx:{color:"#0B53C0"}}),sx:{"&:hover":{backgroundColor:"#f0f7ff !important"},"&.Mui-expanded":{backgroundColor:"#f0f7ff"},backgroundColor:"transparent"},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(xe,{sx:{color:"#0B53C0"}}),e.jsx(a,{variant:"h6",sx:{fontFamily:"Staatliches, sans-serif",fontWeight:"bold",color:"#0B53C0",fontSize:"1.25rem"},children:"Other Course Information"})]})}),e.jsx(N,{children:e.jsx(b,{container:!0,spacing:2,children:Object.entries(k).map(([n,i])=>{const m=n.replace(/([A-Z])/g," $1").replace(/^./,C=>C.toUpperCase());return e.jsxs(b,{item:!0,xs:12,children:[e.jsx(a,{variant:"body2",color:"text.secondary",sx:{fontWeight:"bold"},children:m}),e.jsx(l,{sx:{mt:.5},children:Array.isArray(i)?e.jsx(U,{dense:!0,children:i.map((C,G)=>e.jsx(H,{sx:{py:.25,px:0},children:e.jsxs(a,{variant:"body2",children:["â€¢ ",typeof C=="object"?JSON.stringify(C,null,2):String(C)]})},G))}):typeof i=="object"?e.jsx(l,{sx:{p:1,backgroundColor:"grey.100",borderRadius:1},children:e.jsx(a,{variant:"body2",component:"pre",sx:{fontFamily:"monospace",fontSize:"0.875rem"},children:JSON.stringify(i,null,2)})}):e.jsx(a,{variant:"body2",children:String(i)})}),Object.keys(k).indexOf(n)<Object.keys(k).length-1&&e.jsx(pe,{sx:{mt:2}})]},n)})})})]})]}),e.jsxs(se,{open:g,onClose:()=>F(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:"15px",backgroundColor:"#f8f9fa"}},children:[e.jsxs(ne,{sx:{display:"flex",alignItems:"center",gap:1,fontFamily:"Staatliches, sans-serif",fontSize:"1.5rem",fontWeight:"bold",color:"#0B53C0",backgroundColor:"#ECF4FE",borderBottom:"1px solid #e3f2fd"},children:[e.jsx(ue,{sx:{color:"#0B53C0"}}),"Syllabus Document"]}),e.jsx(oe,{sx:{pt:3},children:o&&e.jsxs(l,{children:[e.jsxs(a,{variant:"body1",sx:{mb:2,fontFamily:"Staatliches, sans-serif",fontSize:"1.1rem",color:"#0B53C0"},children:[e.jsx("strong",{children:"Filename:"})," ",o.metadata.originalFilename]}),e.jsxs(a,{variant:"body2",color:"text.secondary",sx:{mb:1},children:[e.jsx("strong",{children:"Type:"})," ",Ne(o.metadata.fileType)]}),e.jsxs(a,{variant:"body2",color:"text.secondary",sx:{mb:1},children:[e.jsx("strong",{children:"Size:"})," ",Ue(o.metadata.fileSize)]}),e.jsxs(a,{variant:"body2",color:"text.secondary",sx:{mb:2},children:[e.jsx("strong",{children:"Uploaded:"})," ",(()=>{if(!o.metadata.uploadedAt)return"Date not available";const n=o.metadata.uploadedAt;if(n instanceof Date)return n.toLocaleDateString();if(typeof n=="object"&&n!==null&&"seconds"in n)return new Date(n.seconds*1e3).toLocaleDateString();try{return new Date(n).toLocaleDateString()}catch{return"Date not available"}})()]})]})}),e.jsxs(ae,{sx:{p:3,gap:2},children:[e.jsx(w,{onClick:()=>F(!1),sx:{fontFamily:"Staatliches, sans-serif",fontSize:"1.1rem",textTransform:"none",borderRadius:"15px",color:"#666","&:hover":{backgroundColor:"#f0f0f0"}},children:"Close"}),e.jsx(w,{onClick:P,variant:"contained",startIcon:e.jsx(he,{}),sx:{fontFamily:"Staatliches, sans-serif",fontSize:"1.1rem",textTransform:"none",borderRadius:"15px",backgroundColor:"#CDDAFF",color:"#0B53C0","&:hover":{backgroundColor:"#0B53C0",color:"#FFFFFF"}},children:"Download"})]})]})]})},ct=()=>{const{userDetails:s}=le(),{userCourses:x,publicCourses:t}=ve(),[c]=He(),o=c.get("course")||null,d=f.useMemo(()=>[...t,...x],[t,x]),h=f.useMemo(()=>{const u=d.find(v=>v.id===o);return o&&u&&console.log("[SupplementalMaterials] Selected course data:",{courseId:o,courseTitle:u.title,isCourseAdmin:u.isCourseAdmin,isPublic:u.isPublic,userIsAdmin:s==null?void 0:s.isAdmin,shouldShowAddButton:(s==null?void 0:s.isAdmin)&&u.isCourseAdmin,timestamp:new Date().toISOString()}),u},[d,o,s==null?void 0:s.isAdmin]);return e.jsxs(l,{className:"supplemental-container",children:[e.jsx(Ke,{}),o?e.jsxs(l,{children:[e.jsx(l,{sx:{display:"flex",justifyContent:"center",alignItems:"center",mb:3},children:e.jsx(Y,{label:h?`${h.number} - ${h.title}`:"Selected Course",variant:"outlined",sx:{borderRadius:"15px",fontSize:"32px",fontWeight:"bold",background:"#e0f2f1",color:"#00695c",cursor:"pointer",transition:"background-color 0.3s",fontFamily:"Staatliches, sans-serif",padding:"20px 20px","&:hover":{backgroundColor:"#b2dfdb"}}})}),e.jsx(nt,{courseId:o,isAdmin:s==null?void 0:s.isAdmin}),e.jsxs(l,{className:"supplemental-content",children:[(s==null?void 0:s.isAdmin)&&(h==null?void 0:h.isCourseAdmin)&&e.jsx(Xe,{selectedCourse:o}),e.jsx(tt,{initialCourse:o})]})]}):e.jsx(e.Fragment,{children:e.jsx(st,{courses:d})})]})};export{ct as default};
