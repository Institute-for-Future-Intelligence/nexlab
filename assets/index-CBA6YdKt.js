const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-gpDNOp2m.js","assets/vendor-BFl3bqVE.js","assets/index-CZYWMsg6.js","assets/MaterialImportWrapper-C8s3KCLq.js","assets/ui-CvbxGYbq.js","assets/firebase-CiLlnz7t.js","assets/index.es-CNx6xYqH.js","assets/index-DnhDUOBe.js","assets/index-D0RLAIPH.js","assets/FileUploadSection-VIHUnuNO.js","assets/purify.es-CQJ0hv7W.js","assets/DesignDetailPage-GUCtDcIU.js","assets/DesignDetailPage-B5DZHykP.css","assets/SupplementalMaterials-DZ_K5zUM.js","assets/MessagesPage-CNk4d88R.js"])))=>i.map(i=>d[i]);
var V9=Object.defineProperty;var Y9=(e,n,t)=>n in e?V9(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var nt=(e,n,t)=>Y9(e,typeof n!="symbol"?n+"":n,t);import{s as ip,r as X,R as _6,j as h,C as Zr,B as de,P as gn,T as he,a as Ct,b as $j,u as G9,c as Pd,d as zd,e as Uj,f as st,g as gx,A as rr,h as Q9,I as _n,i as tv,k as nv,l as rv,m as bc,n as En,o as iv,p as pp,q as jd,t as fi,v as cr,L as Og,F as Td,w as ap,S as Dc,M as ai,x as N6,y as Hj,D as qs,z as Jt,G as wt,E as Ja,H as es,Q as K9,J as X9,K as Wj,N as Vj,O as Od,U as j6,V as Zi,W as pa,X as Ji,Y as Il,Z as ma,_ as Z9,$ as pu,a0 as Gh,a1 as yd,a2 as dc,a3 as O0,a4 as bu,a5 as bx,a6 as Nl,a7 as J9,a8 as mu,a9 as T6,aa as Ll,ab as e3,ac as Yj,ad as t3,ae as n3,af as gs,ag as r3,ah as G0,ai as O6,aj as Q0,ak as i3,al as Qo,am as a3,an as Gw,ao as s3,ap as Xr,aq as D6,ar as Jk,as as o3,at as yx,au as l3,av as u3,aw as c3,ax as d3,ay as Sd,az as Ad,aA as xd,aB as vd,aC as f3,aD as wd,aE as h3,aF as p3,aG as m3,aH as I6,aI as rg,aJ as g3,aK as b3,aL as y3,aM as xx,aN as Dg,aO as x3,aP as v3,aQ as w3,aR as S3,aS as Gj,aT as Qj,aU as ig,aV as vx,aW as A3,aX as Kj,aY as Ic,aZ as C3,a_ as Xj,a$ as k3,b0 as Qw,b1 as E3,b2 as Zj,b3 as _3,b4 as Jj,b5 as e8,b6 as N3,b7 as j3,b8 as T3,b9 as S5,ba as $y,bb as O3,bc as D3,bd as t8,be as I3,bf as n8,bg as eT,bh as L3,bi as wn,bj as tT,bk as nT,bl as rT,bm as iT,bn as aT,bo as sT,bp as R3,bq as M3,br as F3,bs as P3,bt as z3}from"./ui-CvbxGYbq.js";import{r as q3,b as B3,g as ns,a as $3}from"./vendor-BFl3bqVE.js";import{g as U3,G as H3,o as W3,b as V3,a as Y3,s as G3,c as Q3,d as K3,P as Xn,e as un,f as ga,h as Bf,m as oT,i as Hr,I as X3,j as Z3,_ as J3,k as L6,l as eR,n as tR,C as nR,r as r8,F as rR,p as iR,q as mp,t as Si,u as yc,v as $f,w as Uf,x as lT,y as Ai,z as ln,A as Ig,B as Ci,K as aR,W as av,R as Ol,D as Ri,Q as sR,E as sv,H as ov}from"./firebase-CiLlnz7t.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var A5={exports:{}},o1={},C5={exports:{}},k5={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i8;function oR(){return i8||(i8=1,function(e){function n(W,Q){var J=W.length;W.push(Q);e:for(;0<J;){var se=J-1>>>1,U=W[se];if(0<i(U,Q))W[se]=Q,W[J]=U,J=se;else break e}}function t(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var Q=W[0],J=W.pop();if(J!==Q){W[0]=J;e:for(var se=0,U=W.length,le=U>>>1;se<le;){var q=2*(se+1)-1,B=W[q],ee=q+1,re=W[ee];if(0>i(B,J))ee<U&&0>i(re,B)?(W[se]=re,W[ee]=J,se=ee):(W[se]=B,W[q]=J,se=q);else if(ee<U&&0>i(re,J))W[se]=re,W[ee]=J,se=ee;else break e}}return Q}function i(W,Q){var J=W.sortIndex-Q.sortIndex;return J!==0?J:W.id-Q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var u=[],d=[],f=1,m=null,b=3,g=!1,x=!1,y=!1,A=!1,w=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function F(W){for(var Q=t(d);Q!==null;){if(Q.callback===null)r(d);else if(Q.startTime<=W)r(d),Q.sortIndex=Q.expirationTime,n(u,Q);else break;Q=t(d)}}function M(W){if(y=!1,F(W),!x)if(t(u)!==null)x=!0,z||(z=!0,T());else{var Q=t(d);Q!==null&&G(M,Q.startTime-W)}}var z=!1,_=-1,L=5,$=-1;function Z(){return A?!0:!(e.unstable_now()-$<L)}function O(){if(A=!1,z){var W=e.unstable_now();$=W;var Q=!0;try{e:{x=!1,y&&(y=!1,C(_),_=-1),g=!0;var J=b;try{t:{for(F(W),m=t(u);m!==null&&!(m.expirationTime>W&&Z());){var se=m.callback;if(typeof se=="function"){m.callback=null,b=m.priorityLevel;var U=se(m.expirationTime<=W);if(W=e.unstable_now(),typeof U=="function"){m.callback=U,F(W),Q=!0;break t}m===t(u)&&r(u),F(W)}else r(u);m=t(u)}if(m!==null)Q=!0;else{var le=t(d);le!==null&&G(M,le.startTime-W),Q=!1}}break e}finally{m=null,b=J,g=!1}Q=void 0}}finally{Q?T():z=!1}}}var T;if(typeof j=="function")T=function(){j(O)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,N=R.port2;R.port1.onmessage=O,T=function(){N.postMessage(null)}}else T=function(){w(O,0)};function G(W,Q){_=w(function(){W(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(W){W.callback=null},e.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<W?Math.floor(1e3/W):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_next=function(W){switch(b){case 1:case 2:case 3:var Q=3;break;default:Q=b}var J=b;b=Q;try{return W()}finally{b=J}},e.unstable_requestPaint=function(){A=!0},e.unstable_runWithPriority=function(W,Q){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var J=b;b=W;try{return Q()}finally{b=J}},e.unstable_scheduleCallback=function(W,Q,J){var se=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?se+J:se):J=se,W){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=J+U,W={id:f++,callback:Q,priorityLevel:W,startTime:J,expirationTime:U,sortIndex:-1},J>se?(W.sortIndex=J,n(d,W),t(u)===null&&W===t(d)&&(y?(C(_),_=-1):y=!0,G(M,J-se))):(W.sortIndex=U,n(u,W),x||g||(x=!0,z||(z=!0,T()))),W},e.unstable_shouldYield=Z,e.unstable_wrapCallback=function(W){var Q=b;return function(){var J=b;b=Q;try{return W.apply(this,arguments)}finally{b=J}}}}(k5)),k5}var a8;function lR(){return a8||(a8=1,C5.exports=oR()),C5.exports}var s8;function uR(){if(s8)return o1;s8=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e=lR(),n=q3(),t=B3();function r(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)c+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var c=o,p=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(p=c.return),o=c.return;while(o)}return c.tag===3?p:null}function s(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function l(o){if(a(o)!==o)throw Error(r(188))}function u(o){var c=o.alternate;if(!c){if(c=a(o),c===null)throw Error(r(188));return c!==o?null:o}for(var p=o,v=c;;){var k=p.return;if(k===null)break;var D=k.alternate;if(D===null){if(v=k.return,v!==null){p=v;continue}break}if(k.child===D.child){for(D=k.child;D;){if(D===p)return l(k),o;if(D===v)return l(k),c;D=D.sibling}throw Error(r(188))}if(p.return!==v.return)p=k,v=D;else{for(var te=!1,me=k.child;me;){if(me===p){te=!0,p=k,v=D;break}if(me===v){te=!0,v=k,p=D;break}me=me.sibling}if(!te){for(me=D.child;me;){if(me===p){te=!0,p=D,v=k;break}if(me===v){te=!0,v=D,p=k;break}me=me.sibling}if(!te)throw Error(r(189))}}if(p.alternate!==v)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?o:c}function d(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=d(o),c!==null)return c;o=o.sibling}return null}var f=Object.assign,m=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),j=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),$=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function T(o){return o===null||typeof o!="object"?null:(o=O&&o[O]||o["@@iterator"],typeof o=="function"?o:null)}var R=Symbol.for("react.client.reference");function N(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===R?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case x:return"Fragment";case A:return"Profiler";case y:return"StrictMode";case M:return"Suspense";case z:return"SuspenseList";case $:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case g:return"Portal";case j:return(o.displayName||"Context")+".Provider";case C:return(o._context.displayName||"Context")+".Consumer";case F:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case _:return c=o.displayName||null,c!==null?c:N(o.type)||"Memo";case L:c=o._payload,o=o._init;try{return N(o(c))}catch{}}return null}var G=Array.isArray,W=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},se=[],U=-1;function le(o){return{current:o}}function q(o){0>U||(o.current=se[U],se[U]=null,U--)}function B(o,c){U++,se[U]=o.current,o.current=c}var ee=le(null),re=le(null),oe=le(null),Ce=le(null);function ye(o,c){switch(B(oe,c),B(re,o),B(ee,null),c.nodeType){case 9:case 11:o=(o=c.documentElement)&&(o=o.namespaceURI)?_k(o):0;break;default:if(o=c.tagName,c=c.namespaceURI)c=_k(c),o=Nk(c,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}q(ee),B(ee,o)}function Se(){q(ee),q(re),q(oe)}function Te(o){o.memoizedState!==null&&B(Ce,o);var c=ee.current,p=Nk(c,o.type);c!==p&&(B(re,o),B(ee,p))}function Le(o){re.current===o&&(q(ee),q(re)),Ce.current===o&&(q(Ce),n1._currentValue=J)}var He=Object.prototype.hasOwnProperty,Ye=e.unstable_scheduleCallback,V=e.unstable_cancelCallback,Ae=e.unstable_shouldYield,ne=e.unstable_requestPaint,be=e.unstable_now,fe=e.unstable_getCurrentPriorityLevel,ke=e.unstable_ImmediatePriority,Re=e.unstable_UserBlockingPriority,qe=e.unstable_NormalPriority,je=e.unstable_LowPriority,Ze=e.unstable_IdlePriority,ut=e.log,rt=e.unstable_setDisableYieldValue,Pe=null,ve=null;function Ne(o){if(typeof ut=="function"&&rt(o),ve&&typeof ve.setStrictMode=="function")try{ve.setStrictMode(Pe,o)}catch{}}var De=Math.clz32?Math.clz32:Pt,ft=Math.log,et=Math.LN2;function Pt(o){return o>>>=0,o===0?32:31-(ft(o)/et|0)|0}var Nt=256,Vt=4194304;function Rt(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Xt(o,c,p){var v=o.pendingLanes;if(v===0)return 0;var k=0,D=o.suspendedLanes,te=o.pingedLanes;o=o.warmLanes;var me=v&134217727;return me!==0?(v=me&~D,v!==0?k=Rt(v):(te&=me,te!==0?k=Rt(te):p||(p=me&~o,p!==0&&(k=Rt(p))))):(me=v&~D,me!==0?k=Rt(me):te!==0?k=Rt(te):p||(p=v&~o,p!==0&&(k=Rt(p)))),k===0?0:c!==0&&c!==k&&(c&D)===0&&(D=k&-k,p=c&-c,D>=p||D===32&&(p&4194048)!==0)?c:k}function nn(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function cn(o,c){switch(o){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pn(){var o=Nt;return Nt<<=1,(Nt&4194048)===0&&(Nt=256),o}function zn(){var o=Vt;return Vt<<=1,(Vt&62914560)===0&&(Vt=4194304),o}function Yr(o){for(var c=[],p=0;31>p;p++)c.push(o);return c}function ir(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Rn(o,c,p,v,k,D){var te=o.pendingLanes;o.pendingLanes=p,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=p,o.entangledLanes&=p,o.errorRecoveryDisabledLanes&=p,o.shellSuspendCounter=0;var me=o.entanglements,Oe=o.expirationTimes,Je=o.hiddenUpdates;for(p=te&~p;0<p;){var mt=31-De(p),St=1<<mt;me[mt]=0,Oe[mt]=-1;var tt=Je[mt];if(tt!==null)for(Je[mt]=null,mt=0;mt<tt.length;mt++){var it=tt[mt];it!==null&&(it.lane&=-536870913)}p&=~St}v!==0&&Yt(o,v,0),D!==0&&k===0&&o.tag!==0&&(o.suspendedLanes|=D&~(te&~c))}function Yt(o,c,p){o.pendingLanes|=c,o.suspendedLanes&=~c;var v=31-De(c);o.entangledLanes|=c,o.entanglements[v]=o.entanglements[v]|1073741824|p&4194090}function An(o,c){var p=o.entangledLanes|=c;for(o=o.entanglements;p;){var v=31-De(p),k=1<<v;k&c|o[v]&c&&(o[v]|=c),p&=~k}}function wa(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function wr(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function oi(){var o=Q.p;return o!==0?o:(o=window.event,o===void 0?32:Yk(o.type))}function Sa(o,c){var p=Q.p;try{return Q.p=o,c()}finally{Q.p=p}}var Lt=Math.random().toString(36).slice(2),Hn="__reactFiber$"+Lt,ar="__reactProps$"+Lt,Rr="__reactContainer$"+Lt,dr="__reactEvents$"+Lt,fr="__reactListeners$"+Lt,Un="__reactHandles$"+Lt,ys="__reactResources$"+Lt,_r="__reactMarker$"+Lt;function Ia(o){delete o[Hn],delete o[ar],delete o[dr],delete o[fr],delete o[Un]}function qi(o){var c=o[Hn];if(c)return c;for(var p=o.parentNode;p;){if(c=p[Rr]||p[Hn]){if(p=c.alternate,c.child!==null||p!==null&&p.child!==null)for(o=Dk(o);o!==null;){if(p=o[Hn])return p;o=Dk(o)}return c}o=p,p=o.parentNode}return null}function Bi(o){if(o=o[Hn]||o[Rr]){var c=o.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return o}return null}function Zn(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o.stateNode;throw Error(r(33))}function ki(o){var c=o[ys];return c||(c=o[ys]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Jn(o){o[_r]=!0}var no=new Set,Co={};function Fa(o,c){Mr(o,c),Mr(o+"Capture",c)}function Mr(o,c){for(Co[o]=c,o=0;o<c.length;o++)no.add(c[o])}var tl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zl={},ju={};function Bc(o){return He.call(ju,o)?!0:He.call(zl,o)?!1:tl.test(o)?ju[o]=!0:(zl[o]=!0,!1)}function Us(o,c,p){if(Bc(c))if(p===null)o.removeAttribute(c);else{switch(typeof p){case"undefined":case"function":case"symbol":o.removeAttribute(c);return;case"boolean":var v=c.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){o.removeAttribute(c);return}}o.setAttribute(c,""+p)}}function xs(o,c,p){if(p===null)o.removeAttribute(c);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttribute(c,""+p)}}function Pa(o,c,p,v){if(v===null)o.removeAttribute(p);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(p);return}o.setAttributeNS(c,p,""+v)}}var vs,is;function as(o){if(vs===void 0)try{throw Error()}catch(p){var c=p.stack.trim().match(/\n( *(at )?)/);vs=c&&c[1]||"",is=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+vs+o+is}var ql=!1;function ro(o,c){if(!o||ql)return"";ql=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(c){var St=function(){throw Error()};if(Object.defineProperty(St.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(St,[])}catch(it){var tt=it}Reflect.construct(o,[],St)}else{try{St.call()}catch(it){tt=it}o.call(St.prototype)}}else{try{throw Error()}catch(it){tt=it}(St=o())&&typeof St.catch=="function"&&St.catch(function(){})}}catch(it){if(it&&tt&&typeof it.stack=="string")return[it.stack,tt.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var k=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");k&&k.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var D=v.DetermineComponentFrameRoot(),te=D[0],me=D[1];if(te&&me){var Oe=te.split(`
`),Je=me.split(`
`);for(k=v=0;v<Oe.length&&!Oe[v].includes("DetermineComponentFrameRoot");)v++;for(;k<Je.length&&!Je[k].includes("DetermineComponentFrameRoot");)k++;if(v===Oe.length||k===Je.length)for(v=Oe.length-1,k=Je.length-1;1<=v&&0<=k&&Oe[v]!==Je[k];)k--;for(;1<=v&&0<=k;v--,k--)if(Oe[v]!==Je[k]){if(v!==1||k!==1)do if(v--,k--,0>k||Oe[v]!==Je[k]){var mt=`
`+Oe[v].replace(" at new "," at ");return o.displayName&&mt.includes("<anonymous>")&&(mt=mt.replace("<anonymous>",o.displayName)),mt}while(1<=v&&0<=k);break}}}finally{ql=!1,Error.prepareStackTrace=p}return(p=o?o.displayName||o.name:"")?as(p):""}function $c(o){switch(o.tag){case 26:case 27:case 5:return as(o.type);case 16:return as("Lazy");case 13:return as("Suspense");case 19:return as("SuspenseList");case 0:case 15:return ro(o.type,!1);case 11:return ro(o.type.render,!1);case 1:return ro(o.type,!0);case 31:return as("Activity");default:return""}}function Fr(o){try{var c="";do c+=$c(o),o=o.return;while(o);return c}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function ta(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function io(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function nl(o){var c=io(o)?"checked":"value",p=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),v=""+o[c];if(!o.hasOwnProperty(c)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var k=p.get,D=p.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return k.call(this)},set:function(te){v=""+te,D.call(this,te)}}),Object.defineProperty(o,c,{enumerable:p.enumerable}),{getValue:function(){return v},setValue:function(te){v=""+te},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function za(o){o._valueTracker||(o._valueTracker=nl(o))}function Bl(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var p=c.getValue(),v="";return o&&(v=io(o)?o.checked?"true":"false":o.value),o=v,o!==p?(c.setValue(o),!0):!1}function na(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var rl=/[\n"\\]/g;function hr(o){return o.replace(rl,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function ko(o,c,p,v,k,D,te,me){o.name="",te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"?o.type=te:o.removeAttribute("type"),c!=null?te==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+ta(c)):o.value!==""+ta(c)&&(o.value=""+ta(c)):te!=="submit"&&te!=="reset"||o.removeAttribute("value"),c!=null?Eo(o,te,ta(c)):p!=null?Eo(o,te,ta(p)):v!=null&&o.removeAttribute("value"),k==null&&D!=null&&(o.defaultChecked=!!D),k!=null&&(o.checked=k&&typeof k!="function"&&typeof k!="symbol"),me!=null&&typeof me!="function"&&typeof me!="symbol"&&typeof me!="boolean"?o.name=""+ta(me):o.removeAttribute("name")}function $l(o,c,p,v,k,D,te,me){if(D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(o.type=D),c!=null||p!=null){if(!(D!=="submit"&&D!=="reset"||c!=null))return;p=p!=null?""+ta(p):"",c=c!=null?""+ta(c):p,me||c===o.value||(o.value=c),o.defaultValue=c}v=v??k,v=typeof v!="function"&&typeof v!="symbol"&&!!v,o.checked=me?o.checked:!!v,o.defaultChecked=!!v,te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"&&(o.name=te)}function Eo(o,c,p){c==="number"&&na(o.ownerDocument)===o||o.defaultValue===""+p||(o.defaultValue=""+p)}function Hs(o,c,p,v){if(o=o.options,c){c={};for(var k=0;k<p.length;k++)c["$"+p[k]]=!0;for(p=0;p<o.length;p++)k=c.hasOwnProperty("$"+o[p].value),o[p].selected!==k&&(o[p].selected=k),k&&v&&(o[p].defaultSelected=!0)}else{for(p=""+ta(p),c=null,k=0;k<o.length;k++){if(o[k].value===p){o[k].selected=!0,v&&(o[k].defaultSelected=!0);return}c!==null||o[k].disabled||(c=o[k])}c!==null&&(c.selected=!0)}}function Tu(o,c,p){if(c!=null&&(c=""+ta(c),c!==o.value&&(o.value=c),p==null)){o.defaultValue!==c&&(o.defaultValue=c);return}o.defaultValue=p!=null?""+ta(p):""}function Ws(o,c,p,v){if(c==null){if(v!=null){if(p!=null)throw Error(r(92));if(G(v)){if(1<v.length)throw Error(r(93));v=v[0]}p=v}p==null&&(p=""),c=p}p=ta(c),o.defaultValue=p,v=o.textContent,v===p&&v!==""&&v!==null&&(o.value=v)}function $i(o,c){if(c){var p=o.firstChild;if(p&&p===o.lastChild&&p.nodeType===3){p.nodeValue=c;return}}o.textContent=c}var ss=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ws(o,c,p){var v=c.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?v?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="":v?o.setProperty(c,p):typeof p!="number"||p===0||ss.has(c)?c==="float"?o.cssFloat=p:o[c]=(""+p).trim():o[c]=p+"px"}function Ou(o,c,p){if(c!=null&&typeof c!="object")throw Error(r(62));if(o=o.style,p!=null){for(var v in p)!p.hasOwnProperty(v)||c!=null&&c.hasOwnProperty(v)||(v.indexOf("--")===0?o.setProperty(v,""):v==="float"?o.cssFloat="":o[v]="");for(var k in c)v=c[k],c.hasOwnProperty(k)&&p[k]!==v&&ws(o,k,v)}else for(var D in c)c.hasOwnProperty(D)&&ws(o,D,c[D])}function qa(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vs=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),il=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ys(o){return il.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var al=null;function li(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Jr=null,Ss=null;function tn(o){var c=Bi(o);if(c&&(o=c.stateNode)){var p=o[ar]||null;e:switch(o=c.stateNode,c.type){case"input":if(ko(o,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),c=p.name,p.type==="radio"&&c!=null){for(p=o;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+hr(""+c)+'"][type="radio"]'),c=0;c<p.length;c++){var v=p[c];if(v!==o&&v.form===o.form){var k=v[ar]||null;if(!k)throw Error(r(90));ko(v,k.value,k.defaultValue,k.defaultValue,k.checked,k.defaultChecked,k.type,k.name)}}for(c=0;c<p.length;c++)v=p[c],v.form===o.form&&Bl(v)}break e;case"textarea":Tu(o,p.value,p.defaultValue);break e;case"select":c=p.value,c!=null&&Hs(o,!!p.multiple,c,!1)}}}var ao=!1;function sl(o,c,p){if(ao)return o(c,p);ao=!0;try{var v=o(c);return v}finally{if(ao=!1,(Jr!==null||Ss!==null)&&($b(),Jr&&(c=Jr,o=Ss,Ss=Jr=null,tn(c),o)))for(c=0;c<o.length;c++)tn(o[c])}}function Ei(o,c){var p=o.stateNode;if(p===null)return null;var v=p[ar]||null;if(v===null)return null;p=v[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(o=o.type,v=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!v;break e;default:o=!1}if(o)return null;if(p&&typeof p!="function")throw Error(r(231,c,typeof p));return p}var Ba=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_o=!1;if(Ba)try{var $a={};Object.defineProperty($a,"passive",{get:function(){_o=!0}}),window.addEventListener("test",$a,$a),window.removeEventListener("test",$a,$a)}catch{_o=!1}var La=null,Ua=null,No=null;function ol(){if(No)return No;var o,c=Ua,p=c.length,v,k="value"in La?La.value:La.textContent,D=k.length;for(o=0;o<p&&c[o]===k[o];o++);var te=p-o;for(v=1;v<=te&&c[p-v]===k[D-v];v++);return No=k.slice(o,1<v?1-v:void 0)}function so(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function As(){return!0}function H(){return!1}function ge(o){function c(p,v,k,D,te){this._reactName=p,this._targetInst=k,this.type=v,this.nativeEvent=D,this.target=te,this.currentTarget=null;for(var me in o)o.hasOwnProperty(me)&&(p=o[me],this[me]=p?p(D):D[me]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?As:H,this.isPropagationStopped=H,this}return f(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=As)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=As)},persist:function(){},isPersistent:As}),c}var Ie={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lt=ge(Ie),Zt=f({},Ie,{view:0,detail:0}),$t=ge(Zt),Tn,Cn,pr,bn=f({},Zt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yd,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==pr&&(pr&&o.type==="mousemove"?(Tn=o.screenX-pr.screenX,Cn=o.screenY-pr.screenY):Cn=Tn=0,pr=o),Tn)},movementY:function(o){return"movementY"in o?o.movementY:Cn}}),Nr=ge(bn),Aa=f({},bn,{dataTransfer:0}),Sr=ge(Aa),Ar=f({},Zt,{relatedTarget:0}),Gr=ge(Ar),Ha=f({},Ie,{animationName:0,elapsedTime:0,pseudoElement:0}),Gs=ge(Ha),Cs=f({},Ie,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Wd=ge(Cs),ll=f({},Ie,{data:0}),jo=ge(ll),jp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ch={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dh(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=ch[o])?!!c[o]:!1}function Yd(){return dh}var Sm=f({},Zt,{key:function(o){if(o.key){var c=jp[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=so(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Vd[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yd,charCode:function(o){return o.type==="keypress"?so(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?so(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Gd=ge(Sm),Uc=f({},bn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qd=ge(Uc),Du=f({},Zt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yd}),fh=ge(Du),I=f({},Ie,{propertyName:0,elapsedTime:0,pseudoElement:0}),ae=ge(I),_e=f({},bn,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Me=ge(_e),Ge=f({},Ie,{newState:0,oldState:0}),dt=ge(Ge),At=[9,13,27,32],Ot=Ba&&"CompositionEvent"in window,Ut=null;Ba&&"documentMode"in document&&(Ut=document.documentMode);var vn=Ba&&"TextEvent"in window&&!Ut,pn=Ba&&(!Ot||Ut&&8<Ut&&11>=Ut),qn=" ",ei=!1;function ui(o,c){switch(o){case"keyup":return At.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _i(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Ni=!1;function Ca(o,c){switch(o){case"compositionend":return _i(c);case"keypress":return c.which!==32?null:(ei=!0,qn);case"textInput":return o=c.data,o===qn&&ei?null:o;default:return null}}function To(o,c){if(Ni)return o==="compositionend"||!Ot&&ui(o,c)?(o=ol(),No=Ua=La=null,Ni=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return pn&&c.locale!=="ko"?null:c.data;default:return null}}var Qs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oo(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!Qs[o.type]:c==="textarea"}function hh(o,c,p,v){Jr?Ss?Ss.push(v):Ss=[v]:Jr=v,c=Gb(c,"onChange"),0<c.length&&(p=new lt("onChange","change",null,p,v),o.push({event:p,listeners:c}))}var Ul=null,Hl=null;function Kd(o){Sk(o,0)}function Iu(o){var c=Zn(o);if(Bl(c))return o}function Xd(o,c){if(o==="change")return c}var Hc=!1;if(Ba){var ra;if(Ba){var Lu="oninput"in document;if(!Lu){var Wc=document.createElement("div");Wc.setAttribute("oninput","return;"),Lu=typeof Wc.oninput=="function"}ra=Lu}else ra=!1;Hc=ra&&(!document.documentMode||9<document.documentMode)}function Vc(){Ul&&(Ul.detachEvent("onpropertychange",Zd),Hl=Ul=null)}function Zd(o){if(o.propertyName==="value"&&Iu(Hl)){var c=[];hh(c,Hl,o,li(o)),sl(Kd,c)}}function ks(o,c,p){o==="focusin"?(Vc(),Ul=c,Hl=p,Ul.attachEvent("onpropertychange",Zd)):o==="focusout"&&Vc()}function Am(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Iu(Hl)}function ph(o,c){if(o==="click")return Iu(c)}function Tp(o,c){if(o==="input"||o==="change")return Iu(c)}function oo(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var ka=typeof Object.is=="function"?Object.is:oo;function Ru(o,c){if(ka(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var p=Object.keys(o),v=Object.keys(c);if(p.length!==v.length)return!1;for(v=0;v<p.length;v++){var k=p[v];if(!He.call(c,k)||!ka(o[k],c[k]))return!1}return!0}function mh(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Wl(o,c){var p=mh(o);o=0;for(var v;p;){if(p.nodeType===3){if(v=o+p.textContent.length,o<=c&&v>=c)return{node:p,offset:c-o};o=v}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=mh(p)}}function Mu(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?Mu(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function os(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var c=na(o.document);c instanceof o.HTMLIFrameElement;){try{var p=typeof c.contentWindow.location.href=="string"}catch{p=!1}if(p)o=c.contentWindow;else break;c=na(o.document)}return c}function Ra(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}var Fu=Ba&&"documentMode"in document&&11>=document.documentMode,Es=null,Do=null,ul=null,Io=!1;function mi(o,c,p){var v=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Io||Es==null||Es!==na(v)||(v=Es,"selectionStart"in v&&Ra(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),ul&&Ru(ul,v)||(ul=v,v=Gb(Do,"onSelect"),0<v.length&&(c=new lt("onSelect","select",null,c,p),o.push({event:c,listeners:v}),c.target=Es)))}function Lo(o,c){var p={};return p[o.toLowerCase()]=c.toLowerCase(),p["Webkit"+o]="webkit"+c,p["Moz"+o]="moz"+c,p}var Ui={animationend:Lo("Animation","AnimationEnd"),animationiteration:Lo("Animation","AnimationIteration"),animationstart:Lo("Animation","AnimationStart"),transitionrun:Lo("Transition","TransitionRun"),transitionstart:Lo("Transition","TransitionStart"),transitioncancel:Lo("Transition","TransitionCancel"),transitionend:Lo("Transition","TransitionEnd")},_s={},Yc={};Ba&&(Yc=document.createElement("div").style,"AnimationEvent"in window||(delete Ui.animationend.animation,delete Ui.animationiteration.animation,delete Ui.animationstart.animation),"TransitionEvent"in window||delete Ui.transitionend.transition);function cl(o){if(_s[o])return _s[o];if(!Ui[o])return o;var c=Ui[o],p;for(p in c)if(c.hasOwnProperty(p)&&p in Yc)return _s[o]=c[p];return o}var Jd=cl("animationend"),Pu=cl("animationiteration"),zu=cl("animationstart"),qu=cl("transitionrun"),Gc=cl("transitionstart"),ef=cl("transitioncancel"),Bu=cl("transitionend"),Vl=new Map,Qc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qc.push("scrollEnd");function gi(o,c){Vl.set(o,c),Fa(c,[o])}var Ks=new WeakMap;function In(o,c){if(typeof o=="object"&&o!==null){var p=Ks.get(o);return p!==void 0?p:(c={value:o,source:c,stack:Fr(c)},Ks.set(o,c),c)}return{value:o,source:c,stack:Fr(c)}}var Ln=[],Pr=0,ji=0;function lo(){for(var o=Pr,c=ji=Pr=0;c<o;){var p=Ln[c];Ln[c++]=null;var v=Ln[c];Ln[c++]=null;var k=Ln[c];Ln[c++]=null;var D=Ln[c];if(Ln[c++]=null,v!==null&&k!==null){var te=v.pending;te===null?k.next=k:(k.next=te.next,te.next=k),v.pending=k}D!==0&&Op(p,k,D)}}function $u(o,c,p,v){Ln[Pr++]=o,Ln[Pr++]=c,Ln[Pr++]=p,Ln[Pr++]=v,ji|=v,o.lanes|=v,o=o.alternate,o!==null&&(o.lanes|=v)}function Uu(o,c,p,v){return $u(o,c,p,v),Kc(o)}function Yl(o,c){return $u(o,null,null,c),Kc(o)}function Op(o,c,p){o.lanes|=p;var v=o.alternate;v!==null&&(v.lanes|=p);for(var k=!1,D=o.return;D!==null;)D.childLanes|=p,v=D.alternate,v!==null&&(v.childLanes|=p),D.tag===22&&(o=D.stateNode,o===null||o._visibility&1||(k=!0)),o=D,D=D.return;return o.tag===3?(D=o.stateNode,k&&c!==null&&(k=31-De(p),o=D.hiddenUpdates,v=o[k],v===null?o[k]=[c]:v.push(c),c.lane=p|536870912),D):null}function Kc(o){if(50<Gm)throw Gm=0,V2=null,Error(r(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}var Ea={};function uo(o,c,p,v){this.tag=o,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wa(o,c,p,v){return new uo(o,c,p,v)}function tf(o){return o=o.prototype,!(!o||!o.isReactComponent)}function dl(o,c){var p=o.alternate;return p===null?(p=Wa(o.tag,c,o.key,o.mode),p.elementType=o.elementType,p.type=o.type,p.stateNode=o.stateNode,p.alternate=o,o.alternate=p):(p.pendingProps=c,p.type=o.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=o.flags&65011712,p.childLanes=o.childLanes,p.lanes=o.lanes,p.child=o.child,p.memoizedProps=o.memoizedProps,p.memoizedState=o.memoizedState,p.updateQueue=o.updateQueue,c=o.dependencies,p.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},p.sibling=o.sibling,p.index=o.index,p.ref=o.ref,p.refCleanup=o.refCleanup,p}function gh(o,c){o.flags&=65011714;var p=o.alternate;return p===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=p.childLanes,o.lanes=p.lanes,o.child=p.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=p.memoizedProps,o.memoizedState=p.memoizedState,o.updateQueue=p.updateQueue,o.type=p.type,c=p.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function Xc(o,c,p,v,k,D){var te=0;if(v=o,typeof o=="function")tf(o)&&(te=1);else if(typeof o=="string")te=I9(o,p,ee.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case $:return o=Wa(31,p,c,k),o.elementType=$,o.lanes=D,o;case x:return Gl(p.children,k,D,c);case y:te=8,k|=24;break;case A:return o=Wa(12,p,c,k|2),o.elementType=A,o.lanes=D,o;case M:return o=Wa(13,p,c,k),o.elementType=M,o.lanes=D,o;case z:return o=Wa(19,p,c,k),o.elementType=z,o.lanes=D,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case w:case j:te=10;break e;case C:te=9;break e;case F:te=11;break e;case _:te=14;break e;case L:te=16,v=null;break e}te=29,p=Error(r(130,o===null?"null":typeof o,"")),v=null}return c=Wa(te,p,c,k),c.elementType=o,c.type=v,c.lanes=D,c}function Gl(o,c,p,v){return o=Wa(7,o,v,c),o.lanes=p,o}function Dp(o,c,p){return o=Wa(6,o,null,c),o.lanes=p,o}function bh(o,c,p){return c=Wa(4,o.children!==null?o.children:[],o.key,c),c.lanes=p,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}var Hu=[],Ql=0,nf=null,Ip=0,co=[],Xs=0,Zc=null,Kl=1,Xl="";function Jc(o,c){Hu[Ql++]=Ip,Hu[Ql++]=nf,nf=o,Ip=c}function fb(o,c,p){co[Xs++]=Kl,co[Xs++]=Xl,co[Xs++]=Zc,Zc=o;var v=Kl;o=Xl;var k=32-De(v)-1;v&=~(1<<k),p+=1;var D=32-De(c)+k;if(30<D){var te=k-k%5;D=(v&(1<<te)-1).toString(32),v>>=te,k-=te,Kl=1<<32-De(c)+k|p<<k|v,Xl=D+o}else Kl=1<<D|p<<k|v,Xl=o}function yh(o){o.return!==null&&(Jc(o,1),fb(o,1,0))}function xh(o){for(;o===nf;)nf=Hu[--Ql],Hu[Ql]=null,Ip=Hu[--Ql],Hu[Ql]=null;for(;o===Zc;)Zc=co[--Xs],co[Xs]=null,Xl=co[--Xs],co[Xs]=null,Kl=co[--Xs],co[Xs]=null}var ia=null,bi=null,er=!1,Wu=null,fl=!1,Cm=Error(r(519));function ed(o){var c=Error(r(418,""));throw rf(In(c,o)),Cm}function hb(o){var c=o.stateNode,p=o.type,v=o.memoizedProps;switch(c[Hn]=o,c[ar]=v,p){case"dialog":$n("cancel",c),$n("close",c);break;case"iframe":case"object":case"embed":$n("load",c);break;case"video":case"audio":for(p=0;p<Km.length;p++)$n(Km[p],c);break;case"source":$n("error",c);break;case"img":case"image":case"link":$n("error",c),$n("load",c);break;case"details":$n("toggle",c);break;case"input":$n("invalid",c),$l(c,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0),za(c);break;case"select":$n("invalid",c);break;case"textarea":$n("invalid",c),Ws(c,v.value,v.defaultValue,v.children),za(c)}p=v.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||c.textContent===""+p||v.suppressHydrationWarning===!0||Ek(c.textContent,p)?(v.popover!=null&&($n("beforetoggle",c),$n("toggle",c)),v.onScroll!=null&&$n("scroll",c),v.onScrollEnd!=null&&$n("scrollend",c),v.onClick!=null&&(c.onclick=Qb),c=!0):c=!1,c||ed(o)}function Zl(o){for(ia=o.return;ia;)switch(ia.tag){case 5:case 13:fl=!1;return;case 27:case 3:fl=!0;return;default:ia=ia.return}}function ls(o){if(o!==ia)return!1;if(!er)return Zl(o),er=!0,!1;var c=o.tag,p;if((p=c!==3&&c!==27)&&((p=c===5)&&(p=o.type,p=!(p!=="form"&&p!=="button")||l5(o.type,o.memoizedProps)),p=!p),p&&bi&&ed(o),Zl(o),c===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8)if(p=o.data,p==="/$"){if(c===0){bi=su(o.nextSibling);break e}c--}else p!=="$"&&p!=="$!"&&p!=="$?"||c++;o=o.nextSibling}bi=null}}else c===27?(c=bi,wf(o.type)?(o=f5,f5=null,bi=o):bi=c):bi=ia?su(o.stateNode.nextSibling):null;return!0}function Zs(){bi=ia=null,er=!1}function pb(){var o=Wu;return o!==null&&(po===null?po=o:po.push.apply(po,o),Wu=null),o}function rf(o){Wu===null?Wu=[o]:Wu.push(o)}var hl=le(null),_a=null,Jl=null;function Vu(o,c,p){B(hl,c._currentValue),c._currentValue=p}function pl(o){o._currentValue=hl.current,q(hl)}function Lp(o,c,p){for(;o!==null;){var v=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,v!==null&&(v.childLanes|=c)):v!==null&&(v.childLanes&c)!==c&&(v.childLanes|=c),o===p)break;o=o.return}}function Rp(o,c,p,v){var k=o.child;for(k!==null&&(k.return=o);k!==null;){var D=k.dependencies;if(D!==null){var te=k.child;D=D.firstContext;e:for(;D!==null;){var me=D;D=k;for(var Oe=0;Oe<c.length;Oe++)if(me.context===c[Oe]){D.lanes|=p,me=D.alternate,me!==null&&(me.lanes|=p),Lp(D.return,p,o),v||(te=null);break e}D=me.next}}else if(k.tag===18){if(te=k.return,te===null)throw Error(r(341));te.lanes|=p,D=te.alternate,D!==null&&(D.lanes|=p),Lp(te,p,o),te=null}else te=k.child;if(te!==null)te.return=k;else for(te=k;te!==null;){if(te===o){te=null;break}if(k=te.sibling,k!==null){k.return=te.return,te=k;break}te=te.return}k=te}}function af(o,c,p,v){o=null;for(var k=c,D=!1;k!==null;){if(!D){if((k.flags&524288)!==0)D=!0;else if((k.flags&262144)!==0)break}if(k.tag===10){var te=k.alternate;if(te===null)throw Error(r(387));if(te=te.memoizedProps,te!==null){var me=k.type;ka(k.pendingProps.value,te.value)||(o!==null?o.push(me):o=[me])}}else if(k===Ce.current){if(te=k.alternate,te===null)throw Error(r(387));te.memoizedState.memoizedState!==k.memoizedState.memoizedState&&(o!==null?o.push(n1):o=[n1])}k=k.return}o!==null&&Rp(c,o,p,v),c.flags|=262144}function Mp(o){for(o=o.firstContext;o!==null;){if(!ka(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function ml(o){_a=o,Jl=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function aa(o){return Fp(_a,o)}function Yu(o,c){return _a===null&&ml(o),Fp(o,c)}function Fp(o,c){var p=c._currentValue;if(c={context:c,memoizedValue:p,next:null},Jl===null){if(o===null)throw Error(r(308));Jl=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else Jl=Jl.next=c;return p}var b2=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(p,v){o.push(v)}};this.abort=function(){c.aborted=!0,o.forEach(function(p){return p()})}},mb=e.unstable_scheduleCallback,y2=e.unstable_NormalPriority,sa={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function km(){return{controller:new b2,data:new Map,refCount:0}}function vh(o){o.refCount--,o.refCount===0&&mb(y2,function(){o.controller.abort()})}var wh=null,Em=0,td=0,eu=null;function x2(o,c){if(wh===null){var p=wh=[];Em=0,td=J2(),eu={status:"pending",value:void 0,then:function(v){p.push(v)}}}return Em++,c.then(gb,gb),c}function gb(){if(--Em===0&&wh!==null){eu!==null&&(eu.status="fulfilled");var o=wh;wh=null,td=0,eu=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function bb(o,c){var p=[],v={status:"pending",value:null,reason:null,then:function(k){p.push(k)}};return o.then(function(){v.status="fulfilled",v.value=c;for(var k=0;k<p.length;k++)(0,p[k])(c)},function(k){for(v.status="rejected",v.reason=k,k=0;k<p.length;k++)(0,p[k])(void 0)}),v}var S=W.S;W.S=function(o,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&x2(o,c),S!==null&&S(o,c)};var E=le(null);function P(){var o=E.current;return o!==null?o:ni.pooledCache}function Y(o,c){c===null?B(E,E.current):B(E,c.pool)}function ie(){var o=P();return o===null?null:{parent:sa._currentValue,pool:o}}var ue=Error(r(460)),ce=Error(r(474)),pe=Error(r(542)),xe={then:function(){}};function Ee(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Fe(){}function Xe(o,c,p){switch(p=o[p],p===void 0?o.push(c):p!==c&&(c.then(Fe,Fe),c=p),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,yt(o),o;default:if(typeof c.status=="string")c.then(Fe,Fe);else{if(o=ni,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=c,o.status="pending",o.then(function(v){if(c.status==="pending"){var k=c;k.status="fulfilled",k.value=v}},function(v){if(c.status==="pending"){var k=c;k.status="rejected",k.reason=v}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,yt(o),o}throw Qe=c,ue}}var Qe=null;function We(){if(Qe===null)throw Error(r(459));var o=Qe;return Qe=null,o}function yt(o){if(o===ue||o===pe)throw Error(r(483))}var at=!1;function ze(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ue(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function pt(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function xt(o,c,p){var v=o.updateQueue;if(v===null)return null;if(v=v.shared,(Tr&2)!==0){var k=v.pending;return k===null?c.next=c:(c.next=k.next,k.next=c),v.pending=c,c=Kc(o),Op(o,null,p),c}return $u(o,v,c,p),Kc(o)}function gt(o,c,p){if(c=c.updateQueue,c!==null&&(c=c.shared,(p&4194048)!==0)){var v=c.lanes;v&=o.pendingLanes,p|=v,c.lanes=p,An(o,p)}}function Dt(o,c){var p=o.updateQueue,v=o.alternate;if(v!==null&&(v=v.updateQueue,p===v)){var k=null,D=null;if(p=p.firstBaseUpdate,p!==null){do{var te={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};D===null?k=D=te:D=D.next=te,p=p.next}while(p!==null);D===null?k=D=c:D=D.next=c}else k=D=c;p={baseState:v.baseState,firstBaseUpdate:k,lastBaseUpdate:D,shared:v.shared,callbacks:v.callbacks},o.updateQueue=p;return}o=p.lastBaseUpdate,o===null?p.firstBaseUpdate=c:o.next=c,p.lastBaseUpdate=c}var jt=!1;function Gt(){if(jt){var o=eu;if(o!==null)throw o}}function Tt(o,c,p,v){jt=!1;var k=o.updateQueue;at=!1;var D=k.firstBaseUpdate,te=k.lastBaseUpdate,me=k.shared.pending;if(me!==null){k.shared.pending=null;var Oe=me,Je=Oe.next;Oe.next=null,te===null?D=Je:te.next=Je,te=Oe;var mt=o.alternate;mt!==null&&(mt=mt.updateQueue,me=mt.lastBaseUpdate,me!==te&&(me===null?mt.firstBaseUpdate=Je:me.next=Je,mt.lastBaseUpdate=Oe))}if(D!==null){var St=k.baseState;te=0,mt=Je=Oe=null,me=D;do{var tt=me.lane&-536870913,it=tt!==me.lane;if(it?(Gn&tt)===tt:(v&tt)===tt){tt!==0&&tt===td&&(jt=!0),mt!==null&&(mt=mt.next={lane:0,tag:me.tag,payload:me.payload,callback:null,next:null});e:{var hn=o,rn=me;tt=c;var qr=p;switch(rn.tag){case 1:if(hn=rn.payload,typeof hn=="function"){St=hn.call(qr,St,tt);break e}St=hn;break e;case 3:hn.flags=hn.flags&-65537|128;case 0:if(hn=rn.payload,tt=typeof hn=="function"?hn.call(qr,St,tt):hn,tt==null)break e;St=f({},St,tt);break e;case 2:at=!0}}tt=me.callback,tt!==null&&(o.flags|=64,it&&(o.flags|=8192),it=k.callbacks,it===null?k.callbacks=[tt]:it.push(tt))}else it={lane:tt,tag:me.tag,payload:me.payload,callback:me.callback,next:null},mt===null?(Je=mt=it,Oe=St):mt=mt.next=it,te|=tt;if(me=me.next,me===null){if(me=k.shared.pending,me===null)break;it=me,me=it.next,it.next=null,k.lastBaseUpdate=it,k.shared.pending=null}}while(!0);mt===null&&(Oe=St),k.baseState=Oe,k.firstBaseUpdate=Je,k.lastBaseUpdate=mt,D===null&&(k.shared.lanes=0),bf|=te,o.lanes=te,o.memoizedState=St}}function Vn(o,c){if(typeof o!="function")throw Error(r(191,o));o.call(c)}function sr(o,c){var p=o.callbacks;if(p!==null)for(o.callbacks=null,o=0;o<p.length;o++)Vn(p[o],c)}var Dn=le(null),On=le(0);function Cr(o,c){o=dd,B(On,o),B(Dn,c),dd=o|c.baseLanes}function or(){B(On,dd),B(Dn,Dn.current)}function yn(){dd=On.current,q(Dn),q(On)}var jr=0,en=null,dn=null,Wn=null,Yn=!1,Na=!1,oa=!1,Ti=0,Oi=0,Hi=null,fo=0;function lr(){throw Error(r(321))}function Wi(o,c){if(c===null)return!1;for(var p=0;p<c.length&&p<o.length;p++)if(!ka(o[p],c[p]))return!1;return!0}function Ro(o,c,p,v,k,D){return jr=D,en=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,W.H=o===null||o.memoizedState===null?sC:oC,oa=!1,D=p(v,k),oa=!1,Na&&(D=nd(c,p,v,k)),Gu(o),D}function Gu(o){W.H=jb;var c=dn!==null&&dn.next!==null;if(jr=0,Wn=dn=en=null,Yn=!1,Oi=0,Hi=null,c)throw Error(r(300));o===null||Va||(o=o.dependencies,o!==null&&Mp(o)&&(Va=!0))}function nd(o,c,p,v){en=o;var k=0;do{if(Na&&(Hi=null),Oi=0,Na=!1,25<=k)throw Error(r(301));if(k+=1,Wn=dn=null,o.updateQueue!=null){var D=o.updateQueue;D.lastEffect=null,D.events=null,D.stores=null,D.memoCache!=null&&(D.memoCache.index=0)}W.H=HL,D=c(p,v)}while(Na);return D}function Qu(){var o=W.H,c=o.useState()[0];return c=typeof c.then=="function"?Ku(c):c,o=o.useState()[0],(dn!==null?dn.memoizedState:null)!==o&&(en.flags|=1024),c}function ti(){var o=Ti!==0;return Ti=0,o}function Sh(o,c,p){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~p}function Pp(o){if(Yn){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}Yn=!1}jr=0,Wn=dn=en=null,Na=!1,Oi=Ti=0,Hi=null}function us(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wn===null?en.memoizedState=Wn=o:Wn=Wn.next=o,Wn}function ci(){if(dn===null){var o=en.alternate;o=o!==null?o.memoizedState:null}else o=dn.next;var c=Wn===null?en.memoizedState:Wn.next;if(c!==null)Wn=c,dn=o;else{if(o===null)throw en.alternate===null?Error(r(467)):Error(r(310));dn=o,o={memoizedState:dn.memoizedState,baseState:dn.baseState,baseQueue:dn.baseQueue,queue:dn.queue,next:null},Wn===null?en.memoizedState=Wn=o:Wn=Wn.next=o}return Wn}function rd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ku(o){var c=Oi;return Oi+=1,Hi===null&&(Hi=[]),o=Xe(Hi,o,c),c=en,(Wn===null?c.memoizedState:Wn.next)===null&&(c=c.alternate,W.H=c===null||c.memoizedState===null?sC:oC),o}function Ns(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Ku(o);if(o.$$typeof===j)return aa(o)}throw Error(r(438,String(o)))}function Xu(o){var c=null,p=en.updateQueue;if(p!==null&&(c=p.memoCache),c==null){var v=en.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(c={data:v.data.map(function(k){return k.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),p===null&&(p=rd(),en.updateQueue=p),p.memoCache=c,p=c.data[c.index],p===void 0)for(p=c.data[c.index]=Array(o),v=0;v<o;v++)p[v]=Z;return c.index++,p}function js(o,c){return typeof c=="function"?c(o):c}function Ah(o){var c=ci();return sf(c,dn,o)}function sf(o,c,p){var v=o.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=p;var k=o.baseQueue,D=v.pending;if(D!==null){if(k!==null){var te=k.next;k.next=D.next,D.next=te}c.baseQueue=k=D,v.pending=null}if(D=o.baseState,k===null)o.memoizedState=D;else{c=k.next;var me=te=null,Oe=null,Je=c,mt=!1;do{var St=Je.lane&-536870913;if(St!==Je.lane?(Gn&St)===St:(jr&St)===St){var tt=Je.revertLane;if(tt===0)Oe!==null&&(Oe=Oe.next={lane:0,revertLane:0,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null}),St===td&&(mt=!0);else if((jr&tt)===tt){Je=Je.next,tt===td&&(mt=!0);continue}else St={lane:0,revertLane:Je.revertLane,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null},Oe===null?(me=Oe=St,te=D):Oe=Oe.next=St,en.lanes|=tt,bf|=tt;St=Je.action,oa&&p(D,St),D=Je.hasEagerState?Je.eagerState:p(D,St)}else tt={lane:St,revertLane:Je.revertLane,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null},Oe===null?(me=Oe=tt,te=D):Oe=Oe.next=tt,en.lanes|=St,bf|=St;Je=Je.next}while(Je!==null&&Je!==c);if(Oe===null?te=D:Oe.next=me,!ka(D,o.memoizedState)&&(Va=!0,mt&&(p=eu,p!==null)))throw p;o.memoizedState=D,o.baseState=te,o.baseQueue=Oe,v.lastRenderedState=D}return k===null&&(v.lanes=0),[o.memoizedState,v.dispatch]}function zp(o){var c=ci(),p=c.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=o;var v=p.dispatch,k=p.pending,D=c.memoizedState;if(k!==null){p.pending=null;var te=k=k.next;do D=o(D,te.action),te=te.next;while(te!==k);ka(D,c.memoizedState)||(Va=!0),c.memoizedState=D,c.baseQueue===null&&(c.baseState=D),p.lastRenderedState=D}return[D,v]}function Ch(o,c,p){var v=en,k=ci(),D=er;if(D){if(p===void 0)throw Error(r(407));p=p()}else p=c();var te=!ka((dn||k).memoizedState,p);te&&(k.memoizedState=p,Va=!0),k=k.queue;var me=of.bind(null,v,k,o);if(cf(2048,8,me,[o]),k.getSnapshot!==c||te||Wn!==null&&Wn.memoizedState.tag&1){if(v.flags|=2048,nu(9,Nh(),kh.bind(null,v,k,p,c),null),ni===null)throw Error(r(349));D||(jr&124)!==0||qp(v,c,p)}return p}function qp(o,c,p){o.flags|=16384,o={getSnapshot:c,value:p},c=en.updateQueue,c===null?(c=rd(),en.updateQueue=c,c.stores=[o]):(p=c.stores,p===null?c.stores=[o]:p.push(o))}function kh(o,c,p,v){c.value=p,c.getSnapshot=v,yb(c)&&xb(o)}function of(o,c,p){return p(function(){yb(c)&&xb(o)})}function yb(o){var c=o.getSnapshot;o=o.value;try{var p=c();return!ka(o,p)}catch{return!0}}function xb(o){var c=Yl(o,2);c!==null&&Bo(c,o,2)}function Eh(o){var c=us();if(typeof o=="function"){var p=o;if(o=p(),oa){Ne(!0);try{p()}finally{Ne(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:js,lastRenderedState:o},c}function tu(o,c,p,v){return o.baseState=p,sf(o,dn,typeof v=="function"?v:js)}function v2(o,c,p,v,k){if(Nb(o))throw Error(r(485));if(o=c.action,o!==null){var D={payload:k,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(te){D.listeners.push(te)}};W.T!==null?p(!0):D.isTransition=!1,v(D),p=c.pending,p===null?(D.next=c.pending=D,vb(c,D)):(D.next=p.next,c.pending=p.next=D)}}function vb(o,c){var p=c.action,v=c.payload,k=o.state;if(c.isTransition){var D=W.T,te={};W.T=te;try{var me=p(k,v),Oe=W.S;Oe!==null&&Oe(te,me),wb(o,c,me)}catch(Je){lf(o,c,Je)}finally{W.T=D}}else try{D=p(k,v),wb(o,c,D)}catch(Je){lf(o,c,Je)}}function wb(o,c,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(v){_m(o,c,v)},function(v){return lf(o,c,v)}):_m(o,c,p)}function _m(o,c,p){c.status="fulfilled",c.value=p,Nm(c),o.state=p,c=o.pending,c!==null&&(p=c.next,p===c?o.pending=null:(p=p.next,c.next=p,vb(o,p)))}function lf(o,c,p){var v=o.pending;if(o.pending=null,v!==null){v=v.next;do c.status="rejected",c.reason=p,Nm(c),c=c.next;while(c!==v)}o.action=null}function Nm(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function jm(o,c){return c}function _h(o,c){if(er){var p=ni.formState;if(p!==null){e:{var v=en;if(er){if(bi){t:{for(var k=bi,D=fl;k.nodeType!==8;){if(!D){k=null;break t}if(k=su(k.nextSibling),k===null){k=null;break t}}D=k.data,k=D==="F!"||D==="F"?k:null}if(k){bi=su(k.nextSibling),v=k.data==="F!";break e}}ed(v)}v=!1}v&&(c=p[0])}}return p=us(),p.memoizedState=p.baseState=c,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jm,lastRenderedState:c},p.queue=v,p=rC.bind(null,en,v),v.dispatch=p,v=Eh(!1),D=w2.bind(null,en,!1,v.queue),v=us(),k={state:c,dispatch:null,action:o,pending:null},v.queue=k,p=v2.bind(null,en,k,D,p),k.dispatch=p,v.memoizedState=o,[c,p,!1]}function Bp(o){var c=ci();return uf(c,dn,o)}function uf(o,c,p){if(c=sf(o,c,jm)[0],o=Ah(js)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var v=Ku(c)}catch(te){throw te===ue?pe:te}else v=c;c=ci();var k=c.queue,D=k.dispatch;return p!==c.memoizedState&&(en.flags|=2048,nu(9,Nh(),Sb.bind(null,k,p),null)),[v,D,o]}function Sb(o,c){o.action=c}function Ab(o){var c=ci(),p=dn;if(p!==null)return uf(c,p,o);ci(),c=c.memoizedState,p=ci();var v=p.queue.dispatch;return p.memoizedState=o,[c,v,!1]}function nu(o,c,p,v){return o={tag:o,create:p,deps:v,inst:c,next:null},c=en.updateQueue,c===null&&(c=rd(),en.updateQueue=c),p=c.lastEffect,p===null?c.lastEffect=o.next=o:(v=p.next,p.next=o,o.next=v,c.lastEffect=o),o}function Nh(){return{destroy:void 0,resource:void 0}}function $p(){return ci().memoizedState}function Mo(o,c,p,v){var k=us();v=v===void 0?null:v,en.flags|=o,k.memoizedState=nu(1|c,Nh(),p,v)}function cf(o,c,p,v){var k=ci();v=v===void 0?null:v;var D=k.memoizedState.inst;dn!==null&&v!==null&&Wi(v,dn.memoizedState.deps)?k.memoizedState=nu(c,D,p,v):(en.flags|=o,k.memoizedState=nu(1|c,D,p,v))}function Tm(o,c){Mo(8390656,8,o,c)}function Cb(o,c){cf(2048,8,o,c)}function Om(o,c){return cf(4,2,o,c)}function id(o,c){return cf(4,4,o,c)}function kb(o,c){if(typeof c=="function"){o=o();var p=c(o);return function(){typeof p=="function"?p():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function Dm(o,c,p){p=p!=null?p.concat([o]):null,cf(4,4,kb.bind(null,c,o),p)}function Im(){}function Lm(o,c){var p=ci();c=c===void 0?null:c;var v=p.memoizedState;return c!==null&&Wi(c,v[1])?v[0]:(p.memoizedState=[o,c],o)}function Eb(o,c){var p=ci();c=c===void 0?null:c;var v=p.memoizedState;if(c!==null&&Wi(c,v[1]))return v[0];if(v=o(),oa){Ne(!0);try{o()}finally{Ne(!1)}}return p.memoizedState=[v,c],v}function ad(o,c,p){return p===void 0||(jr&1073741824)!==0?o.memoizedState=c:(o.memoizedState=p,o=JC(),en.lanes|=o,bf|=o,p)}function Up(o,c,p,v){return ka(p,c)?p:Dn.current!==null?(o=ad(o,p,v),ka(o,c)||(Va=!0),o):(jr&42)===0?(Va=!0,o.memoizedState=p):(o=JC(),en.lanes|=o,bf|=o,c)}function jh(o,c,p,v,k){var D=Q.p;Q.p=D!==0&&8>D?D:8;var te=W.T,me={};W.T=me,w2(o,!1,c,p);try{var Oe=k(),Je=W.S;if(Je!==null&&Je(me,Oe),Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var mt=bb(Oe,v);Pm(o,c,mt,qo(o))}else Pm(o,c,v,qo(o))}catch(St){Pm(o,c,{then:function(){},status:"rejected",reason:St},qo())}finally{Q.p=D,W.T=te}}function ru(){}function gl(o,c,p,v){if(o.tag!==5)throw Error(r(476));var k=iu(o).queue;jh(o,k,c,J,p===null?ru:function(){return Th(o),p(v)})}function iu(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:js,lastRenderedState:J},next:null};var p={};return c.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:js,lastRenderedState:p},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function Th(o){var c=iu(o).next.queue;Pm(o,c,{},qo())}function Oh(){return aa(n1)}function Rm(){return ci().memoizedState}function _b(){return ci().memoizedState}function Mm(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var p=qo();o=pt(p);var v=xt(c,o,p);v!==null&&(Bo(v,c,p),gt(v,c,p)),c={cache:km()},o.payload=c;return}c=c.return}}function Fm(o,c,p){var v=qo();p={lane:v,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},Nb(o)?iC(c,p):(p=Uu(o,c,p,v),p!==null&&(Bo(p,o,v),aC(p,c,v)))}function rC(o,c,p){var v=qo();Pm(o,c,p,v)}function Pm(o,c,p,v){var k={lane:v,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(Nb(o))iC(c,k);else{var D=o.alternate;if(o.lanes===0&&(D===null||D.lanes===0)&&(D=c.lastRenderedReducer,D!==null))try{var te=c.lastRenderedState,me=D(te,p);if(k.hasEagerState=!0,k.eagerState=me,ka(me,te))return $u(o,c,k,0),ni===null&&lo(),!1}catch{}finally{}if(p=Uu(o,c,k,v),p!==null)return Bo(p,o,v),aC(p,c,v),!0}return!1}function w2(o,c,p,v){if(v={lane:2,revertLane:J2(),action:v,hasEagerState:!1,eagerState:null,next:null},Nb(o)){if(c)throw Error(r(479))}else c=Uu(o,p,v,2),c!==null&&Bo(c,o,2)}function Nb(o){var c=o.alternate;return o===en||c!==null&&c===en}function iC(o,c){Na=Yn=!0;var p=o.pending;p===null?c.next=c:(c.next=p.next,p.next=c),o.pending=c}function aC(o,c,p){if((p&4194048)!==0){var v=c.lanes;v&=o.pendingLanes,p|=v,c.lanes=p,An(o,p)}}var jb={readContext:aa,use:Ns,useCallback:lr,useContext:lr,useEffect:lr,useImperativeHandle:lr,useLayoutEffect:lr,useInsertionEffect:lr,useMemo:lr,useReducer:lr,useRef:lr,useState:lr,useDebugValue:lr,useDeferredValue:lr,useTransition:lr,useSyncExternalStore:lr,useId:lr,useHostTransitionStatus:lr,useFormState:lr,useActionState:lr,useOptimistic:lr,useMemoCache:lr,useCacheRefresh:lr},sC={readContext:aa,use:Ns,useCallback:function(o,c){return us().memoizedState=[o,c===void 0?null:c],o},useContext:aa,useEffect:Tm,useImperativeHandle:function(o,c,p){p=p!=null?p.concat([o]):null,Mo(4194308,4,kb.bind(null,c,o),p)},useLayoutEffect:function(o,c){return Mo(4194308,4,o,c)},useInsertionEffect:function(o,c){Mo(4,2,o,c)},useMemo:function(o,c){var p=us();c=c===void 0?null:c;var v=o();if(oa){Ne(!0);try{o()}finally{Ne(!1)}}return p.memoizedState=[v,c],v},useReducer:function(o,c,p){var v=us();if(p!==void 0){var k=p(c);if(oa){Ne(!0);try{p(c)}finally{Ne(!1)}}}else k=c;return v.memoizedState=v.baseState=k,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:k},v.queue=o,o=o.dispatch=Fm.bind(null,en,o),[v.memoizedState,o]},useRef:function(o){var c=us();return o={current:o},c.memoizedState=o},useState:function(o){o=Eh(o);var c=o.queue,p=rC.bind(null,en,c);return c.dispatch=p,[o.memoizedState,p]},useDebugValue:Im,useDeferredValue:function(o,c){var p=us();return ad(p,o,c)},useTransition:function(){var o=Eh(!1);return o=jh.bind(null,en,o.queue,!0,!1),us().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,p){var v=en,k=us();if(er){if(p===void 0)throw Error(r(407));p=p()}else{if(p=c(),ni===null)throw Error(r(349));(Gn&124)!==0||qp(v,c,p)}k.memoizedState=p;var D={value:p,getSnapshot:c};return k.queue=D,Tm(of.bind(null,v,D,o),[o]),v.flags|=2048,nu(9,Nh(),kh.bind(null,v,D,p,c),null),p},useId:function(){var o=us(),c=ni.identifierPrefix;if(er){var p=Xl,v=Kl;p=(v&~(1<<32-De(v)-1)).toString(32)+p,c=""+c+"R"+p,p=Ti++,0<p&&(c+="H"+p.toString(32)),c+=""}else p=fo++,c=""+c+"r"+p.toString(32)+"";return o.memoizedState=c},useHostTransitionStatus:Oh,useFormState:_h,useActionState:_h,useOptimistic:function(o){var c=us();c.memoizedState=c.baseState=o;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=p,c=w2.bind(null,en,!0,p),p.dispatch=c,[o,c]},useMemoCache:Xu,useCacheRefresh:function(){return us().memoizedState=Mm.bind(null,en)}},oC={readContext:aa,use:Ns,useCallback:Lm,useContext:aa,useEffect:Cb,useImperativeHandle:Dm,useInsertionEffect:Om,useLayoutEffect:id,useMemo:Eb,useReducer:Ah,useRef:$p,useState:function(){return Ah(js)},useDebugValue:Im,useDeferredValue:function(o,c){var p=ci();return Up(p,dn.memoizedState,o,c)},useTransition:function(){var o=Ah(js)[0],c=ci().memoizedState;return[typeof o=="boolean"?o:Ku(o),c]},useSyncExternalStore:Ch,useId:Rm,useHostTransitionStatus:Oh,useFormState:Bp,useActionState:Bp,useOptimistic:function(o,c){var p=ci();return tu(p,dn,o,c)},useMemoCache:Xu,useCacheRefresh:_b},HL={readContext:aa,use:Ns,useCallback:Lm,useContext:aa,useEffect:Cb,useImperativeHandle:Dm,useInsertionEffect:Om,useLayoutEffect:id,useMemo:Eb,useReducer:zp,useRef:$p,useState:function(){return zp(js)},useDebugValue:Im,useDeferredValue:function(o,c){var p=ci();return dn===null?ad(p,o,c):Up(p,dn.memoizedState,o,c)},useTransition:function(){var o=zp(js)[0],c=ci().memoizedState;return[typeof o=="boolean"?o:Ku(o),c]},useSyncExternalStore:Ch,useId:Rm,useHostTransitionStatus:Oh,useFormState:Ab,useActionState:Ab,useOptimistic:function(o,c){var p=ci();return dn!==null?tu(p,dn,o,c):(p.baseState=o,[o,p.queue.dispatch])},useMemoCache:Xu,useCacheRefresh:_b},Hp=null,zm=0;function Tb(o){var c=zm;return zm+=1,Hp===null&&(Hp=[]),Xe(Hp,o,c)}function qm(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function Ob(o,c){throw c.$$typeof===m?Error(r(525)):(o=Object.prototype.toString.call(c),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function lC(o){var c=o._init;return c(o._payload)}function uC(o){function c(Ve,Be){if(o){var Ke=Ve.deletions;Ke===null?(Ve.deletions=[Be],Ve.flags|=16):Ke.push(Be)}}function p(Ve,Be){if(!o)return null;for(;Be!==null;)c(Ve,Be),Be=Be.sibling;return null}function v(Ve){for(var Be=new Map;Ve!==null;)Ve.key!==null?Be.set(Ve.key,Ve):Be.set(Ve.index,Ve),Ve=Ve.sibling;return Be}function k(Ve,Be){return Ve=dl(Ve,Be),Ve.index=0,Ve.sibling=null,Ve}function D(Ve,Be,Ke){return Ve.index=Ke,o?(Ke=Ve.alternate,Ke!==null?(Ke=Ke.index,Ke<Be?(Ve.flags|=67108866,Be):Ke):(Ve.flags|=67108866,Be)):(Ve.flags|=1048576,Be)}function te(Ve){return o&&Ve.alternate===null&&(Ve.flags|=67108866),Ve}function me(Ve,Be,Ke,bt){return Be===null||Be.tag!==6?(Be=Dp(Ke,Ve.mode,bt),Be.return=Ve,Be):(Be=k(Be,Ke),Be.return=Ve,Be)}function Oe(Ve,Be,Ke,bt){var qt=Ke.type;return qt===x?mt(Ve,Be,Ke.props.children,bt,Ke.key):Be!==null&&(Be.elementType===qt||typeof qt=="object"&&qt!==null&&qt.$$typeof===L&&lC(qt)===Be.type)?(Be=k(Be,Ke.props),qm(Be,Ke),Be.return=Ve,Be):(Be=Xc(Ke.type,Ke.key,Ke.props,null,Ve.mode,bt),qm(Be,Ke),Be.return=Ve,Be)}function Je(Ve,Be,Ke,bt){return Be===null||Be.tag!==4||Be.stateNode.containerInfo!==Ke.containerInfo||Be.stateNode.implementation!==Ke.implementation?(Be=bh(Ke,Ve.mode,bt),Be.return=Ve,Be):(Be=k(Be,Ke.children||[]),Be.return=Ve,Be)}function mt(Ve,Be,Ke,bt,qt){return Be===null||Be.tag!==7?(Be=Gl(Ke,Ve.mode,bt,qt),Be.return=Ve,Be):(Be=k(Be,Ke),Be.return=Ve,Be)}function St(Ve,Be,Ke){if(typeof Be=="string"&&Be!==""||typeof Be=="number"||typeof Be=="bigint")return Be=Dp(""+Be,Ve.mode,Ke),Be.return=Ve,Be;if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case b:return Ke=Xc(Be.type,Be.key,Be.props,null,Ve.mode,Ke),qm(Ke,Be),Ke.return=Ve,Ke;case g:return Be=bh(Be,Ve.mode,Ke),Be.return=Ve,Be;case L:var bt=Be._init;return Be=bt(Be._payload),St(Ve,Be,Ke)}if(G(Be)||T(Be))return Be=Gl(Be,Ve.mode,Ke,null),Be.return=Ve,Be;if(typeof Be.then=="function")return St(Ve,Tb(Be),Ke);if(Be.$$typeof===j)return St(Ve,Yu(Ve,Be),Ke);Ob(Ve,Be)}return null}function tt(Ve,Be,Ke,bt){var qt=Be!==null?Be.key:null;if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return qt!==null?null:me(Ve,Be,""+Ke,bt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case b:return Ke.key===qt?Oe(Ve,Be,Ke,bt):null;case g:return Ke.key===qt?Je(Ve,Be,Ke,bt):null;case L:return qt=Ke._init,Ke=qt(Ke._payload),tt(Ve,Be,Ke,bt)}if(G(Ke)||T(Ke))return qt!==null?null:mt(Ve,Be,Ke,bt,null);if(typeof Ke.then=="function")return tt(Ve,Be,Tb(Ke),bt);if(Ke.$$typeof===j)return tt(Ve,Be,Yu(Ve,Ke),bt);Ob(Ve,Ke)}return null}function it(Ve,Be,Ke,bt,qt){if(typeof bt=="string"&&bt!==""||typeof bt=="number"||typeof bt=="bigint")return Ve=Ve.get(Ke)||null,me(Be,Ve,""+bt,qt);if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case b:return Ve=Ve.get(bt.key===null?Ke:bt.key)||null,Oe(Be,Ve,bt,qt);case g:return Ve=Ve.get(bt.key===null?Ke:bt.key)||null,Je(Be,Ve,bt,qt);case L:var Mn=bt._init;return bt=Mn(bt._payload),it(Ve,Be,Ke,bt,qt)}if(G(bt)||T(bt))return Ve=Ve.get(Ke)||null,mt(Be,Ve,bt,qt,null);if(typeof bt.then=="function")return it(Ve,Be,Ke,Tb(bt),qt);if(bt.$$typeof===j)return it(Ve,Be,Ke,Yu(Be,bt),qt);Ob(Be,bt)}return null}function hn(Ve,Be,Ke,bt){for(var qt=null,Mn=null,Kt=Be,sn=Be=0,Ga=null;Kt!==null&&sn<Ke.length;sn++){Kt.index>sn?(Ga=Kt,Kt=null):Ga=Kt.sibling;var ur=tt(Ve,Kt,Ke[sn],bt);if(ur===null){Kt===null&&(Kt=Ga);break}o&&Kt&&ur.alternate===null&&c(Ve,Kt),Be=D(ur,Be,sn),Mn===null?qt=ur:Mn.sibling=ur,Mn=ur,Kt=Ga}if(sn===Ke.length)return p(Ve,Kt),er&&Jc(Ve,sn),qt;if(Kt===null){for(;sn<Ke.length;sn++)Kt=St(Ve,Ke[sn],bt),Kt!==null&&(Be=D(Kt,Be,sn),Mn===null?qt=Kt:Mn.sibling=Kt,Mn=Kt);return er&&Jc(Ve,sn),qt}for(Kt=v(Kt);sn<Ke.length;sn++)Ga=it(Kt,Ve,sn,Ke[sn],bt),Ga!==null&&(o&&Ga.alternate!==null&&Kt.delete(Ga.key===null?sn:Ga.key),Be=D(Ga,Be,sn),Mn===null?qt=Ga:Mn.sibling=Ga,Mn=Ga);return o&&Kt.forEach(function(Ef){return c(Ve,Ef)}),er&&Jc(Ve,sn),qt}function rn(Ve,Be,Ke,bt){if(Ke==null)throw Error(r(151));for(var qt=null,Mn=null,Kt=Be,sn=Be=0,Ga=null,ur=Ke.next();Kt!==null&&!ur.done;sn++,ur=Ke.next()){Kt.index>sn?(Ga=Kt,Kt=null):Ga=Kt.sibling;var Ef=tt(Ve,Kt,ur.value,bt);if(Ef===null){Kt===null&&(Kt=Ga);break}o&&Kt&&Ef.alternate===null&&c(Ve,Kt),Be=D(Ef,Be,sn),Mn===null?qt=Ef:Mn.sibling=Ef,Mn=Ef,Kt=Ga}if(ur.done)return p(Ve,Kt),er&&Jc(Ve,sn),qt;if(Kt===null){for(;!ur.done;sn++,ur=Ke.next())ur=St(Ve,ur.value,bt),ur!==null&&(Be=D(ur,Be,sn),Mn===null?qt=ur:Mn.sibling=ur,Mn=ur);return er&&Jc(Ve,sn),qt}for(Kt=v(Kt);!ur.done;sn++,ur=Ke.next())ur=it(Kt,Ve,sn,ur.value,bt),ur!==null&&(o&&ur.alternate!==null&&Kt.delete(ur.key===null?sn:ur.key),Be=D(ur,Be,sn),Mn===null?qt=ur:Mn.sibling=ur,Mn=ur);return o&&Kt.forEach(function(W9){return c(Ve,W9)}),er&&Jc(Ve,sn),qt}function qr(Ve,Be,Ke,bt){if(typeof Ke=="object"&&Ke!==null&&Ke.type===x&&Ke.key===null&&(Ke=Ke.props.children),typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case b:e:{for(var qt=Ke.key;Be!==null;){if(Be.key===qt){if(qt=Ke.type,qt===x){if(Be.tag===7){p(Ve,Be.sibling),bt=k(Be,Ke.props.children),bt.return=Ve,Ve=bt;break e}}else if(Be.elementType===qt||typeof qt=="object"&&qt!==null&&qt.$$typeof===L&&lC(qt)===Be.type){p(Ve,Be.sibling),bt=k(Be,Ke.props),qm(bt,Ke),bt.return=Ve,Ve=bt;break e}p(Ve,Be);break}else c(Ve,Be);Be=Be.sibling}Ke.type===x?(bt=Gl(Ke.props.children,Ve.mode,bt,Ke.key),bt.return=Ve,Ve=bt):(bt=Xc(Ke.type,Ke.key,Ke.props,null,Ve.mode,bt),qm(bt,Ke),bt.return=Ve,Ve=bt)}return te(Ve);case g:e:{for(qt=Ke.key;Be!==null;){if(Be.key===qt)if(Be.tag===4&&Be.stateNode.containerInfo===Ke.containerInfo&&Be.stateNode.implementation===Ke.implementation){p(Ve,Be.sibling),bt=k(Be,Ke.children||[]),bt.return=Ve,Ve=bt;break e}else{p(Ve,Be);break}else c(Ve,Be);Be=Be.sibling}bt=bh(Ke,Ve.mode,bt),bt.return=Ve,Ve=bt}return te(Ve);case L:return qt=Ke._init,Ke=qt(Ke._payload),qr(Ve,Be,Ke,bt)}if(G(Ke))return hn(Ve,Be,Ke,bt);if(T(Ke)){if(qt=T(Ke),typeof qt!="function")throw Error(r(150));return Ke=qt.call(Ke),rn(Ve,Be,Ke,bt)}if(typeof Ke.then=="function")return qr(Ve,Be,Tb(Ke),bt);if(Ke.$$typeof===j)return qr(Ve,Be,Yu(Ve,Ke),bt);Ob(Ve,Ke)}return typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint"?(Ke=""+Ke,Be!==null&&Be.tag===6?(p(Ve,Be.sibling),bt=k(Be,Ke),bt.return=Ve,Ve=bt):(p(Ve,Be),bt=Dp(Ke,Ve.mode,bt),bt.return=Ve,Ve=bt),te(Ve)):p(Ve,Be)}return function(Ve,Be,Ke,bt){try{zm=0;var qt=qr(Ve,Be,Ke,bt);return Hp=null,qt}catch(Kt){if(Kt===ue||Kt===pe)throw Kt;var Mn=Wa(29,Kt,null,Ve.mode);return Mn.lanes=bt,Mn.return=Ve,Mn}finally{}}}var Wp=uC(!0),cC=uC(!1),bl=le(null),Zu=null;function df(o){var c=o.alternate;B(Ma,Ma.current&1),B(bl,o),Zu===null&&(c===null||Dn.current!==null||c.memoizedState!==null)&&(Zu=o)}function dC(o){if(o.tag===22){if(B(Ma,Ma.current),B(bl,o),Zu===null){var c=o.alternate;c!==null&&c.memoizedState!==null&&(Zu=o)}}else ff()}function ff(){B(Ma,Ma.current),B(bl,bl.current)}function sd(o){q(bl),Zu===o&&(Zu=null),q(Ma)}var Ma=le(0);function Db(o){for(var c=o;c!==null;){if(c.tag===13){var p=c.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||d5(p)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function S2(o,c,p,v){c=o.memoizedState,p=p(v,c),p=p==null?c:f({},c,p),o.memoizedState=p,o.lanes===0&&(o.updateQueue.baseState=p)}var A2={enqueueSetState:function(o,c,p){o=o._reactInternals;var v=qo(),k=pt(v);k.payload=c,p!=null&&(k.callback=p),c=xt(o,k,v),c!==null&&(Bo(c,o,v),gt(c,o,v))},enqueueReplaceState:function(o,c,p){o=o._reactInternals;var v=qo(),k=pt(v);k.tag=1,k.payload=c,p!=null&&(k.callback=p),c=xt(o,k,v),c!==null&&(Bo(c,o,v),gt(c,o,v))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var p=qo(),v=pt(p);v.tag=2,c!=null&&(v.callback=c),c=xt(o,v,p),c!==null&&(Bo(c,o,p),gt(c,o,p))}};function fC(o,c,p,v,k,D,te){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(v,D,te):c.prototype&&c.prototype.isPureReactComponent?!Ru(p,v)||!Ru(k,D):!0}function hC(o,c,p,v){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(p,v),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(p,v),c.state!==o&&A2.enqueueReplaceState(c,c.state,null)}function Dh(o,c){var p=c;if("ref"in c){p={};for(var v in c)v!=="ref"&&(p[v]=c[v])}if(o=o.defaultProps){p===c&&(p=f({},p));for(var k in o)p[k]===void 0&&(p[k]=o[k])}return p}var Ib=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function pC(o){Ib(o)}function mC(o){console.error(o)}function gC(o){Ib(o)}function Lb(o,c){try{var p=o.onUncaughtError;p(c.value,{componentStack:c.stack})}catch(v){setTimeout(function(){throw v})}}function bC(o,c,p){try{var v=o.onCaughtError;v(p.value,{componentStack:p.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(k){setTimeout(function(){throw k})}}function C2(o,c,p){return p=pt(p),p.tag=3,p.payload={element:null},p.callback=function(){Lb(o,c)},p}function yC(o){return o=pt(o),o.tag=3,o}function xC(o,c,p,v){var k=p.type.getDerivedStateFromError;if(typeof k=="function"){var D=v.value;o.payload=function(){return k(D)},o.callback=function(){bC(c,p,v)}}var te=p.stateNode;te!==null&&typeof te.componentDidCatch=="function"&&(o.callback=function(){bC(c,p,v),typeof k!="function"&&(yf===null?yf=new Set([this]):yf.add(this));var me=v.stack;this.componentDidCatch(v.value,{componentStack:me!==null?me:""})})}function WL(o,c,p,v,k){if(p.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(c=p.alternate,c!==null&&af(c,p,k,!0),p=bl.current,p!==null){switch(p.tag){case 13:return Zu===null?G2():p.alternate===null&&Vi===0&&(Vi=3),p.flags&=-257,p.flags|=65536,p.lanes=k,v===xe?p.flags|=16384:(c=p.updateQueue,c===null?p.updateQueue=new Set([v]):c.add(v),K2(o,v,k)),!1;case 22:return p.flags|=65536,v===xe?p.flags|=16384:(c=p.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([v])},p.updateQueue=c):(p=c.retryQueue,p===null?c.retryQueue=new Set([v]):p.add(v)),K2(o,v,k)),!1}throw Error(r(435,p.tag))}return K2(o,v,k),G2(),!1}if(er)return c=bl.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=k,v!==Cm&&(o=Error(r(422),{cause:v}),rf(In(o,p)))):(v!==Cm&&(c=Error(r(423),{cause:v}),rf(In(c,p))),o=o.current.alternate,o.flags|=65536,k&=-k,o.lanes|=k,v=In(v,p),k=C2(o.stateNode,v,k),Dt(o,k),Vi!==4&&(Vi=2)),!1;var D=Error(r(520),{cause:v});if(D=In(D,p),Ym===null?Ym=[D]:Ym.push(D),Vi!==4&&(Vi=2),c===null)return!0;v=In(v,p),p=c;do{switch(p.tag){case 3:return p.flags|=65536,o=k&-k,p.lanes|=o,o=C2(p.stateNode,v,o),Dt(p,o),!1;case 1:if(c=p.type,D=p.stateNode,(p.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(yf===null||!yf.has(D))))return p.flags|=65536,k&=-k,p.lanes|=k,k=yC(k),xC(k,o,p,v),Dt(p,k),!1}p=p.return}while(p!==null);return!1}var vC=Error(r(461)),Va=!1;function cs(o,c,p,v){c.child=o===null?cC(c,null,p,v):Wp(c,o.child,p,v)}function wC(o,c,p,v,k){p=p.render;var D=c.ref;if("ref"in v){var te={};for(var me in v)me!=="ref"&&(te[me]=v[me])}else te=v;return ml(c),v=Ro(o,c,p,te,D,k),me=ti(),o!==null&&!Va?(Sh(o,c,k),od(o,c,k)):(er&&me&&yh(c),c.flags|=1,cs(o,c,v,k),c.child)}function SC(o,c,p,v,k){if(o===null){var D=p.type;return typeof D=="function"&&!tf(D)&&D.defaultProps===void 0&&p.compare===null?(c.tag=15,c.type=D,AC(o,c,D,v,k)):(o=Xc(p.type,null,v,c,c.mode,k),o.ref=c.ref,o.return=c,c.child=o)}if(D=o.child,!D2(o,k)){var te=D.memoizedProps;if(p=p.compare,p=p!==null?p:Ru,p(te,v)&&o.ref===c.ref)return od(o,c,k)}return c.flags|=1,o=dl(D,v),o.ref=c.ref,o.return=c,c.child=o}function AC(o,c,p,v,k){if(o!==null){var D=o.memoizedProps;if(Ru(D,v)&&o.ref===c.ref)if(Va=!1,c.pendingProps=v=D,D2(o,k))(o.flags&131072)!==0&&(Va=!0);else return c.lanes=o.lanes,od(o,c,k)}return k2(o,c,p,v,k)}function CC(o,c,p){var v=c.pendingProps,k=v.children,D=o!==null?o.memoizedState:null;if(v.mode==="hidden"){if((c.flags&128)!==0){if(v=D!==null?D.baseLanes|p:p,o!==null){for(k=c.child=o.child,D=0;k!==null;)D=D|k.lanes|k.childLanes,k=k.sibling;c.childLanes=D&~v}else c.childLanes=0,c.child=null;return kC(o,c,v,p)}if((p&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&Y(c,D!==null?D.cachePool:null),D!==null?Cr(c,D):or(),dC(c);else return c.lanes=c.childLanes=536870912,kC(o,c,D!==null?D.baseLanes|p:p,p)}else D!==null?(Y(c,D.cachePool),Cr(c,D),ff(),c.memoizedState=null):(o!==null&&Y(c,null),or(),ff());return cs(o,c,k,p),c.child}function kC(o,c,p,v){var k=P();return k=k===null?null:{parent:sa._currentValue,pool:k},c.memoizedState={baseLanes:p,cachePool:k},o!==null&&Y(c,null),or(),dC(c),o!==null&&af(o,c,v,!0),null}function Rb(o,c){var p=c.ref;if(p===null)o!==null&&o.ref!==null&&(c.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(r(284));(o===null||o.ref!==p)&&(c.flags|=4194816)}}function k2(o,c,p,v,k){return ml(c),p=Ro(o,c,p,v,void 0,k),v=ti(),o!==null&&!Va?(Sh(o,c,k),od(o,c,k)):(er&&v&&yh(c),c.flags|=1,cs(o,c,p,k),c.child)}function EC(o,c,p,v,k,D){return ml(c),c.updateQueue=null,p=nd(c,v,p,k),Gu(o),v=ti(),o!==null&&!Va?(Sh(o,c,D),od(o,c,D)):(er&&v&&yh(c),c.flags|=1,cs(o,c,p,D),c.child)}function _C(o,c,p,v,k){if(ml(c),c.stateNode===null){var D=Ea,te=p.contextType;typeof te=="object"&&te!==null&&(D=aa(te)),D=new p(v,D),c.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,D.updater=A2,c.stateNode=D,D._reactInternals=c,D=c.stateNode,D.props=v,D.state=c.memoizedState,D.refs={},ze(c),te=p.contextType,D.context=typeof te=="object"&&te!==null?aa(te):Ea,D.state=c.memoizedState,te=p.getDerivedStateFromProps,typeof te=="function"&&(S2(c,p,te,v),D.state=c.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(te=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),te!==D.state&&A2.enqueueReplaceState(D,D.state,null),Tt(c,v,D,k),Gt(),D.state=c.memoizedState),typeof D.componentDidMount=="function"&&(c.flags|=4194308),v=!0}else if(o===null){D=c.stateNode;var me=c.memoizedProps,Oe=Dh(p,me);D.props=Oe;var Je=D.context,mt=p.contextType;te=Ea,typeof mt=="object"&&mt!==null&&(te=aa(mt));var St=p.getDerivedStateFromProps;mt=typeof St=="function"||typeof D.getSnapshotBeforeUpdate=="function",me=c.pendingProps!==me,mt||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(me||Je!==te)&&hC(c,D,v,te),at=!1;var tt=c.memoizedState;D.state=tt,Tt(c,v,D,k),Gt(),Je=c.memoizedState,me||tt!==Je||at?(typeof St=="function"&&(S2(c,p,St,v),Je=c.memoizedState),(Oe=at||fC(c,p,Oe,v,tt,Je,te))?(mt||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(c.flags|=4194308)):(typeof D.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=v,c.memoizedState=Je),D.props=v,D.state=Je,D.context=te,v=Oe):(typeof D.componentDidMount=="function"&&(c.flags|=4194308),v=!1)}else{D=c.stateNode,Ue(o,c),te=c.memoizedProps,mt=Dh(p,te),D.props=mt,St=c.pendingProps,tt=D.context,Je=p.contextType,Oe=Ea,typeof Je=="object"&&Je!==null&&(Oe=aa(Je)),me=p.getDerivedStateFromProps,(Je=typeof me=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(te!==St||tt!==Oe)&&hC(c,D,v,Oe),at=!1,tt=c.memoizedState,D.state=tt,Tt(c,v,D,k),Gt();var it=c.memoizedState;te!==St||tt!==it||at||o!==null&&o.dependencies!==null&&Mp(o.dependencies)?(typeof me=="function"&&(S2(c,p,me,v),it=c.memoizedState),(mt=at||fC(c,p,mt,v,tt,it,Oe)||o!==null&&o.dependencies!==null&&Mp(o.dependencies))?(Je||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(v,it,Oe),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(v,it,Oe)),typeof D.componentDidUpdate=="function"&&(c.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof D.componentDidUpdate!="function"||te===o.memoizedProps&&tt===o.memoizedState||(c.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||te===o.memoizedProps&&tt===o.memoizedState||(c.flags|=1024),c.memoizedProps=v,c.memoizedState=it),D.props=v,D.state=it,D.context=Oe,v=mt):(typeof D.componentDidUpdate!="function"||te===o.memoizedProps&&tt===o.memoizedState||(c.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||te===o.memoizedProps&&tt===o.memoizedState||(c.flags|=1024),v=!1)}return D=v,Rb(o,c),v=(c.flags&128)!==0,D||v?(D=c.stateNode,p=v&&typeof p.getDerivedStateFromError!="function"?null:D.render(),c.flags|=1,o!==null&&v?(c.child=Wp(c,o.child,null,k),c.child=Wp(c,null,p,k)):cs(o,c,p,k),c.memoizedState=D.state,o=c.child):o=od(o,c,k),o}function NC(o,c,p,v){return Zs(),c.flags|=256,cs(o,c,p,v),c.child}var E2={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _2(o){return{baseLanes:o,cachePool:ie()}}function N2(o,c,p){return o=o!==null?o.childLanes&~p:0,c&&(o|=yl),o}function jC(o,c,p){var v=c.pendingProps,k=!1,D=(c.flags&128)!==0,te;if((te=D)||(te=o!==null&&o.memoizedState===null?!1:(Ma.current&2)!==0),te&&(k=!0,c.flags&=-129),te=(c.flags&32)!==0,c.flags&=-33,o===null){if(er){if(k?df(c):ff(),er){var me=bi,Oe;if(Oe=me){e:{for(Oe=me,me=fl;Oe.nodeType!==8;){if(!me){me=null;break e}if(Oe=su(Oe.nextSibling),Oe===null){me=null;break e}}me=Oe}me!==null?(c.memoizedState={dehydrated:me,treeContext:Zc!==null?{id:Kl,overflow:Xl}:null,retryLane:536870912,hydrationErrors:null},Oe=Wa(18,null,null,0),Oe.stateNode=me,Oe.return=c,c.child=Oe,ia=c,bi=null,Oe=!0):Oe=!1}Oe||ed(c)}if(me=c.memoizedState,me!==null&&(me=me.dehydrated,me!==null))return d5(me)?c.lanes=32:c.lanes=536870912,null;sd(c)}return me=v.children,v=v.fallback,k?(ff(),k=c.mode,me=Mb({mode:"hidden",children:me},k),v=Gl(v,k,p,null),me.return=c,v.return=c,me.sibling=v,c.child=me,k=c.child,k.memoizedState=_2(p),k.childLanes=N2(o,te,p),c.memoizedState=E2,v):(df(c),j2(c,me))}if(Oe=o.memoizedState,Oe!==null&&(me=Oe.dehydrated,me!==null)){if(D)c.flags&256?(df(c),c.flags&=-257,c=T2(o,c,p)):c.memoizedState!==null?(ff(),c.child=o.child,c.flags|=128,c=null):(ff(),k=v.fallback,me=c.mode,v=Mb({mode:"visible",children:v.children},me),k=Gl(k,me,p,null),k.flags|=2,v.return=c,k.return=c,v.sibling=k,c.child=v,Wp(c,o.child,null,p),v=c.child,v.memoizedState=_2(p),v.childLanes=N2(o,te,p),c.memoizedState=E2,c=k);else if(df(c),d5(me)){if(te=me.nextSibling&&me.nextSibling.dataset,te)var Je=te.dgst;te=Je,v=Error(r(419)),v.stack="",v.digest=te,rf({value:v,source:null,stack:null}),c=T2(o,c,p)}else if(Va||af(o,c,p,!1),te=(p&o.childLanes)!==0,Va||te){if(te=ni,te!==null&&(v=p&-p,v=(v&42)!==0?1:wa(v),v=(v&(te.suspendedLanes|p))!==0?0:v,v!==0&&v!==Oe.retryLane))throw Oe.retryLane=v,Yl(o,v),Bo(te,o,v),vC;me.data==="$?"||G2(),c=T2(o,c,p)}else me.data==="$?"?(c.flags|=192,c.child=o.child,c=null):(o=Oe.treeContext,bi=su(me.nextSibling),ia=c,er=!0,Wu=null,fl=!1,o!==null&&(co[Xs++]=Kl,co[Xs++]=Xl,co[Xs++]=Zc,Kl=o.id,Xl=o.overflow,Zc=c),c=j2(c,v.children),c.flags|=4096);return c}return k?(ff(),k=v.fallback,me=c.mode,Oe=o.child,Je=Oe.sibling,v=dl(Oe,{mode:"hidden",children:v.children}),v.subtreeFlags=Oe.subtreeFlags&65011712,Je!==null?k=dl(Je,k):(k=Gl(k,me,p,null),k.flags|=2),k.return=c,v.return=c,v.sibling=k,c.child=v,v=k,k=c.child,me=o.child.memoizedState,me===null?me=_2(p):(Oe=me.cachePool,Oe!==null?(Je=sa._currentValue,Oe=Oe.parent!==Je?{parent:Je,pool:Je}:Oe):Oe=ie(),me={baseLanes:me.baseLanes|p,cachePool:Oe}),k.memoizedState=me,k.childLanes=N2(o,te,p),c.memoizedState=E2,v):(df(c),p=o.child,o=p.sibling,p=dl(p,{mode:"visible",children:v.children}),p.return=c,p.sibling=null,o!==null&&(te=c.deletions,te===null?(c.deletions=[o],c.flags|=16):te.push(o)),c.child=p,c.memoizedState=null,p)}function j2(o,c){return c=Mb({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function Mb(o,c){return o=Wa(22,o,null,c),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function T2(o,c,p){return Wp(c,o.child,null,p),o=j2(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function TC(o,c,p){o.lanes|=c;var v=o.alternate;v!==null&&(v.lanes|=c),Lp(o.return,c,p)}function O2(o,c,p,v,k){var D=o.memoizedState;D===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:v,tail:p,tailMode:k}:(D.isBackwards=c,D.rendering=null,D.renderingStartTime=0,D.last=v,D.tail=p,D.tailMode=k)}function OC(o,c,p){var v=c.pendingProps,k=v.revealOrder,D=v.tail;if(cs(o,c,v.children,p),v=Ma.current,(v&2)!==0)v=v&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&TC(o,p,c);else if(o.tag===19)TC(o,p,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}v&=1}switch(B(Ma,v),k){case"forwards":for(p=c.child,k=null;p!==null;)o=p.alternate,o!==null&&Db(o)===null&&(k=p),p=p.sibling;p=k,p===null?(k=c.child,c.child=null):(k=p.sibling,p.sibling=null),O2(c,!1,k,p,D);break;case"backwards":for(p=null,k=c.child,c.child=null;k!==null;){if(o=k.alternate,o!==null&&Db(o)===null){c.child=k;break}o=k.sibling,k.sibling=p,p=k,k=o}O2(c,!0,p,null,D);break;case"together":O2(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function od(o,c,p){if(o!==null&&(c.dependencies=o.dependencies),bf|=c.lanes,(p&c.childLanes)===0)if(o!==null){if(af(o,c,p,!1),(p&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(r(153));if(c.child!==null){for(o=c.child,p=dl(o,o.pendingProps),c.child=p,p.return=c;o.sibling!==null;)o=o.sibling,p=p.sibling=dl(o,o.pendingProps),p.return=c;p.sibling=null}return c.child}function D2(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&Mp(o)))}function VL(o,c,p){switch(c.tag){case 3:ye(c,c.stateNode.containerInfo),Vu(c,sa,o.memoizedState.cache),Zs();break;case 27:case 5:Te(c);break;case 4:ye(c,c.stateNode.containerInfo);break;case 10:Vu(c,c.type,c.memoizedProps.value);break;case 13:var v=c.memoizedState;if(v!==null)return v.dehydrated!==null?(df(c),c.flags|=128,null):(p&c.child.childLanes)!==0?jC(o,c,p):(df(c),o=od(o,c,p),o!==null?o.sibling:null);df(c);break;case 19:var k=(o.flags&128)!==0;if(v=(p&c.childLanes)!==0,v||(af(o,c,p,!1),v=(p&c.childLanes)!==0),k){if(v)return OC(o,c,p);c.flags|=128}if(k=c.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),B(Ma,Ma.current),v)break;return null;case 22:case 23:return c.lanes=0,CC(o,c,p);case 24:Vu(c,sa,o.memoizedState.cache)}return od(o,c,p)}function DC(o,c,p){if(o!==null)if(o.memoizedProps!==c.pendingProps)Va=!0;else{if(!D2(o,p)&&(c.flags&128)===0)return Va=!1,VL(o,c,p);Va=(o.flags&131072)!==0}else Va=!1,er&&(c.flags&1048576)!==0&&fb(c,Ip,c.index);switch(c.lanes=0,c.tag){case 16:e:{o=c.pendingProps;var v=c.elementType,k=v._init;if(v=k(v._payload),c.type=v,typeof v=="function")tf(v)?(o=Dh(v,o),c.tag=1,c=_C(null,c,v,o,p)):(c.tag=0,c=k2(null,c,v,o,p));else{if(v!=null){if(k=v.$$typeof,k===F){c.tag=11,c=wC(null,c,v,o,p);break e}else if(k===_){c.tag=14,c=SC(null,c,v,o,p);break e}}throw c=N(v)||v,Error(r(306,c,""))}}return c;case 0:return k2(o,c,c.type,c.pendingProps,p);case 1:return v=c.type,k=Dh(v,c.pendingProps),_C(o,c,v,k,p);case 3:e:{if(ye(c,c.stateNode.containerInfo),o===null)throw Error(r(387));v=c.pendingProps;var D=c.memoizedState;k=D.element,Ue(o,c),Tt(c,v,null,p);var te=c.memoizedState;if(v=te.cache,Vu(c,sa,v),v!==D.cache&&Rp(c,[sa],p,!0),Gt(),v=te.element,D.isDehydrated)if(D={element:v,isDehydrated:!1,cache:te.cache},c.updateQueue.baseState=D,c.memoizedState=D,c.flags&256){c=NC(o,c,v,p);break e}else if(v!==k){k=In(Error(r(424)),c),rf(k),c=NC(o,c,v,p);break e}else{switch(o=c.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(bi=su(o.firstChild),ia=c,er=!0,Wu=null,fl=!0,p=cC(c,null,v,p),c.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(Zs(),v===k){c=od(o,c,p);break e}cs(o,c,v,p)}c=c.child}return c;case 26:return Rb(o,c),o===null?(p=Mk(c.type,null,c.pendingProps,null))?c.memoizedState=p:er||(p=c.type,o=c.pendingProps,v=Kb(oe.current).createElement(p),v[Hn]=c,v[ar]=o,fs(v,p,o),Jn(v),c.stateNode=v):c.memoizedState=Mk(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:return Te(c),o===null&&er&&(v=c.stateNode=Ik(c.type,c.pendingProps,oe.current),ia=c,fl=!0,k=bi,wf(c.type)?(f5=k,bi=su(v.firstChild)):bi=k),cs(o,c,c.pendingProps.children,p),Rb(o,c),o===null&&(c.flags|=4194304),c.child;case 5:return o===null&&er&&((k=v=bi)&&(v=v9(v,c.type,c.pendingProps,fl),v!==null?(c.stateNode=v,ia=c,bi=su(v.firstChild),fl=!1,k=!0):k=!1),k||ed(c)),Te(c),k=c.type,D=c.pendingProps,te=o!==null?o.memoizedProps:null,v=D.children,l5(k,D)?v=null:te!==null&&l5(k,te)&&(c.flags|=32),c.memoizedState!==null&&(k=Ro(o,c,Qu,null,null,p),n1._currentValue=k),Rb(o,c),cs(o,c,v,p),c.child;case 6:return o===null&&er&&((o=p=bi)&&(p=w9(p,c.pendingProps,fl),p!==null?(c.stateNode=p,ia=c,bi=null,o=!0):o=!1),o||ed(c)),null;case 13:return jC(o,c,p);case 4:return ye(c,c.stateNode.containerInfo),v=c.pendingProps,o===null?c.child=Wp(c,null,v,p):cs(o,c,v,p),c.child;case 11:return wC(o,c,c.type,c.pendingProps,p);case 7:return cs(o,c,c.pendingProps,p),c.child;case 8:return cs(o,c,c.pendingProps.children,p),c.child;case 12:return cs(o,c,c.pendingProps.children,p),c.child;case 10:return v=c.pendingProps,Vu(c,c.type,v.value),cs(o,c,v.children,p),c.child;case 9:return k=c.type._context,v=c.pendingProps.children,ml(c),k=aa(k),v=v(k),c.flags|=1,cs(o,c,v,p),c.child;case 14:return SC(o,c,c.type,c.pendingProps,p);case 15:return AC(o,c,c.type,c.pendingProps,p);case 19:return OC(o,c,p);case 31:return v=c.pendingProps,p=c.mode,v={mode:v.mode,children:v.children},o===null?(p=Mb(v,p),p.ref=c.ref,c.child=p,p.return=c,c=p):(p=dl(o.child,v),p.ref=c.ref,c.child=p,p.return=c,c=p),c;case 22:return CC(o,c,p);case 24:return ml(c),v=aa(sa),o===null?(k=P(),k===null&&(k=ni,D=km(),k.pooledCache=D,D.refCount++,D!==null&&(k.pooledCacheLanes|=p),k=D),c.memoizedState={parent:v,cache:k},ze(c),Vu(c,sa,k)):((o.lanes&p)!==0&&(Ue(o,c),Tt(c,null,null,p),Gt()),k=o.memoizedState,D=c.memoizedState,k.parent!==v?(k={parent:v,cache:v},c.memoizedState=k,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=k),Vu(c,sa,v)):(v=D.cache,Vu(c,sa,v),v!==k.cache&&Rp(c,[sa],p,!0))),cs(o,c,c.pendingProps.children,p),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function ld(o){o.flags|=4}function IC(o,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!Bk(c)){if(c=bl.current,c!==null&&((Gn&4194048)===Gn?Zu!==null:(Gn&62914560)!==Gn&&(Gn&536870912)===0||c!==Zu))throw Qe=xe,ce;o.flags|=8192}}function Fb(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?zn():536870912,o.lanes|=c,Qp|=c)}function Bm(o,c){if(!er)switch(o.tailMode){case"hidden":c=o.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?o.tail=null:p.sibling=null;break;case"collapsed":p=o.tail;for(var v=null;p!==null;)p.alternate!==null&&(v=p),p=p.sibling;v===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:v.sibling=null}}function Di(o){var c=o.alternate!==null&&o.alternate.child===o.child,p=0,v=0;if(c)for(var k=o.child;k!==null;)p|=k.lanes|k.childLanes,v|=k.subtreeFlags&65011712,v|=k.flags&65011712,k.return=o,k=k.sibling;else for(k=o.child;k!==null;)p|=k.lanes|k.childLanes,v|=k.subtreeFlags,v|=k.flags,k.return=o,k=k.sibling;return o.subtreeFlags|=v,o.childLanes=p,c}function YL(o,c,p){var v=c.pendingProps;switch(xh(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Di(c),null;case 1:return Di(c),null;case 3:return p=c.stateNode,v=null,o!==null&&(v=o.memoizedState.cache),c.memoizedState.cache!==v&&(c.flags|=2048),pl(sa),Se(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(o===null||o.child===null)&&(ls(c)?ld(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,pb())),Di(c),null;case 26:return p=c.memoizedState,o===null?(ld(c),p!==null?(Di(c),IC(c,p)):(Di(c),c.flags&=-16777217)):p?p!==o.memoizedState?(ld(c),Di(c),IC(c,p)):(Di(c),c.flags&=-16777217):(o.memoizedProps!==v&&ld(c),Di(c),c.flags&=-16777217),null;case 27:Le(c),p=oe.current;var k=c.type;if(o!==null&&c.stateNode!=null)o.memoizedProps!==v&&ld(c);else{if(!v){if(c.stateNode===null)throw Error(r(166));return Di(c),null}o=ee.current,ls(c)?hb(c):(o=Ik(k,v,p),c.stateNode=o,ld(c))}return Di(c),null;case 5:if(Le(c),p=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==v&&ld(c);else{if(!v){if(c.stateNode===null)throw Error(r(166));return Di(c),null}if(o=ee.current,ls(c))hb(c);else{switch(k=Kb(oe.current),o){case 1:o=k.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:o=k.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":o=k.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":o=k.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":o=k.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof v.is=="string"?k.createElement("select",{is:v.is}):k.createElement("select"),v.multiple?o.multiple=!0:v.size&&(o.size=v.size);break;default:o=typeof v.is=="string"?k.createElement(p,{is:v.is}):k.createElement(p)}}o[Hn]=c,o[ar]=v;e:for(k=c.child;k!==null;){if(k.tag===5||k.tag===6)o.appendChild(k.stateNode);else if(k.tag!==4&&k.tag!==27&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===c)break e;for(;k.sibling===null;){if(k.return===null||k.return===c)break e;k=k.return}k.sibling.return=k.return,k=k.sibling}c.stateNode=o;e:switch(fs(o,p,v),p){case"button":case"input":case"select":case"textarea":o=!!v.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&ld(c)}}return Di(c),c.flags&=-16777217,null;case 6:if(o&&c.stateNode!=null)o.memoizedProps!==v&&ld(c);else{if(typeof v!="string"&&c.stateNode===null)throw Error(r(166));if(o=oe.current,ls(c)){if(o=c.stateNode,p=c.memoizedProps,v=null,k=ia,k!==null)switch(k.tag){case 27:case 5:v=k.memoizedProps}o[Hn]=c,o=!!(o.nodeValue===p||v!==null&&v.suppressHydrationWarning===!0||Ek(o.nodeValue,p)),o||ed(c)}else o=Kb(o).createTextNode(v),o[Hn]=c,c.stateNode=o}return Di(c),null;case 13:if(v=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(k=ls(c),v!==null&&v.dehydrated!==null){if(o===null){if(!k)throw Error(r(318));if(k=c.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(r(317));k[Hn]=c}else Zs(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Di(c),k=!1}else k=pb(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=k),k=!0;if(!k)return c.flags&256?(sd(c),c):(sd(c),null)}if(sd(c),(c.flags&128)!==0)return c.lanes=p,c;if(p=v!==null,o=o!==null&&o.memoizedState!==null,p){v=c.child,k=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(k=v.alternate.memoizedState.cachePool.pool);var D=null;v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(D=v.memoizedState.cachePool.pool),D!==k&&(v.flags|=2048)}return p!==o&&p&&(c.child.flags|=8192),Fb(c,c.updateQueue),Di(c),null;case 4:return Se(),o===null&&r5(c.stateNode.containerInfo),Di(c),null;case 10:return pl(c.type),Di(c),null;case 19:if(q(Ma),k=c.memoizedState,k===null)return Di(c),null;if(v=(c.flags&128)!==0,D=k.rendering,D===null)if(v)Bm(k,!1);else{if(Vi!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(D=Db(o),D!==null){for(c.flags|=128,Bm(k,!1),o=D.updateQueue,c.updateQueue=o,Fb(c,o),c.subtreeFlags=0,o=p,p=c.child;p!==null;)gh(p,o),p=p.sibling;return B(Ma,Ma.current&1|2),c.child}o=o.sibling}k.tail!==null&&be()>qb&&(c.flags|=128,v=!0,Bm(k,!1),c.lanes=4194304)}else{if(!v)if(o=Db(D),o!==null){if(c.flags|=128,v=!0,o=o.updateQueue,c.updateQueue=o,Fb(c,o),Bm(k,!0),k.tail===null&&k.tailMode==="hidden"&&!D.alternate&&!er)return Di(c),null}else 2*be()-k.renderingStartTime>qb&&p!==536870912&&(c.flags|=128,v=!0,Bm(k,!1),c.lanes=4194304);k.isBackwards?(D.sibling=c.child,c.child=D):(o=k.last,o!==null?o.sibling=D:c.child=D,k.last=D)}return k.tail!==null?(c=k.tail,k.rendering=c,k.tail=c.sibling,k.renderingStartTime=be(),c.sibling=null,o=Ma.current,B(Ma,v?o&1|2:o&1),c):(Di(c),null);case 22:case 23:return sd(c),yn(),v=c.memoizedState!==null,o!==null?o.memoizedState!==null!==v&&(c.flags|=8192):v&&(c.flags|=8192),v?(p&536870912)!==0&&(c.flags&128)===0&&(Di(c),c.subtreeFlags&6&&(c.flags|=8192)):Di(c),p=c.updateQueue,p!==null&&Fb(c,p.retryQueue),p=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==p&&(c.flags|=2048),o!==null&&q(E),null;case 24:return p=null,o!==null&&(p=o.memoizedState.cache),c.memoizedState.cache!==p&&(c.flags|=2048),pl(sa),Di(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function GL(o,c){switch(xh(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return pl(sa),Se(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return Le(c),null;case 13:if(sd(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(r(340));Zs()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return q(Ma),null;case 4:return Se(),null;case 10:return pl(c.type),null;case 22:case 23:return sd(c),yn(),o!==null&&q(E),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return pl(sa),null;case 25:return null;default:return null}}function LC(o,c){switch(xh(c),c.tag){case 3:pl(sa),Se();break;case 26:case 27:case 5:Le(c);break;case 4:Se();break;case 13:sd(c);break;case 19:q(Ma);break;case 10:pl(c.type);break;case 22:case 23:sd(c),yn(),o!==null&&q(E);break;case 24:pl(sa)}}function $m(o,c){try{var p=c.updateQueue,v=p!==null?p.lastEffect:null;if(v!==null){var k=v.next;p=k;do{if((p.tag&o)===o){v=void 0;var D=p.create,te=p.inst;v=D(),te.destroy=v}p=p.next}while(p!==k)}}catch(me){Qr(c,c.return,me)}}function hf(o,c,p){try{var v=c.updateQueue,k=v!==null?v.lastEffect:null;if(k!==null){var D=k.next;v=D;do{if((v.tag&o)===o){var te=v.inst,me=te.destroy;if(me!==void 0){te.destroy=void 0,k=c;var Oe=p,Je=me;try{Je()}catch(mt){Qr(k,Oe,mt)}}}v=v.next}while(v!==D)}}catch(mt){Qr(c,c.return,mt)}}function RC(o){var c=o.updateQueue;if(c!==null){var p=o.stateNode;try{sr(c,p)}catch(v){Qr(o,o.return,v)}}}function MC(o,c,p){p.props=Dh(o.type,o.memoizedProps),p.state=o.memoizedState;try{p.componentWillUnmount()}catch(v){Qr(o,c,v)}}function Um(o,c){try{var p=o.ref;if(p!==null){switch(o.tag){case 26:case 27:case 5:var v=o.stateNode;break;case 30:v=o.stateNode;break;default:v=o.stateNode}typeof p=="function"?o.refCleanup=p(v):p.current=v}}catch(k){Qr(o,c,k)}}function Ju(o,c){var p=o.ref,v=o.refCleanup;if(p!==null)if(typeof v=="function")try{v()}catch(k){Qr(o,c,k)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(k){Qr(o,c,k)}else p.current=null}function FC(o){var c=o.type,p=o.memoizedProps,v=o.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":p.autoFocus&&v.focus();break e;case"img":p.src?v.src=p.src:p.srcSet&&(v.srcset=p.srcSet)}}catch(k){Qr(o,o.return,k)}}function I2(o,c,p){try{var v=o.stateNode;m9(v,o.type,p,c),v[ar]=c}catch(k){Qr(o,o.return,k)}}function PC(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&wf(o.type)||o.tag===4}function L2(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||PC(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&wf(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function R2(o,c,p){var v=o.tag;if(v===5||v===6)o=o.stateNode,c?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(o,c):(c=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,c.appendChild(o),p=p._reactRootContainer,p!=null||c.onclick!==null||(c.onclick=Qb));else if(v!==4&&(v===27&&wf(o.type)&&(p=o.stateNode,c=null),o=o.child,o!==null))for(R2(o,c,p),o=o.sibling;o!==null;)R2(o,c,p),o=o.sibling}function Pb(o,c,p){var v=o.tag;if(v===5||v===6)o=o.stateNode,c?p.insertBefore(o,c):p.appendChild(o);else if(v!==4&&(v===27&&wf(o.type)&&(p=o.stateNode),o=o.child,o!==null))for(Pb(o,c,p),o=o.sibling;o!==null;)Pb(o,c,p),o=o.sibling}function zC(o){var c=o.stateNode,p=o.memoizedProps;try{for(var v=o.type,k=c.attributes;k.length;)c.removeAttributeNode(k[0]);fs(c,v,p),c[Hn]=o,c[ar]=p}catch(D){Qr(o,o.return,D)}}var ud=!1,la=!1,M2=!1,qC=typeof WeakSet=="function"?WeakSet:Set,Ya=null;function QL(o,c){if(o=o.containerInfo,s5=ny,o=os(o),Ra(o)){if("selectionStart"in o)var p={start:o.selectionStart,end:o.selectionEnd};else e:{p=(p=o.ownerDocument)&&p.defaultView||window;var v=p.getSelection&&p.getSelection();if(v&&v.rangeCount!==0){p=v.anchorNode;var k=v.anchorOffset,D=v.focusNode;v=v.focusOffset;try{p.nodeType,D.nodeType}catch{p=null;break e}var te=0,me=-1,Oe=-1,Je=0,mt=0,St=o,tt=null;t:for(;;){for(var it;St!==p||k!==0&&St.nodeType!==3||(me=te+k),St!==D||v!==0&&St.nodeType!==3||(Oe=te+v),St.nodeType===3&&(te+=St.nodeValue.length),(it=St.firstChild)!==null;)tt=St,St=it;for(;;){if(St===o)break t;if(tt===p&&++Je===k&&(me=te),tt===D&&++mt===v&&(Oe=te),(it=St.nextSibling)!==null)break;St=tt,tt=St.parentNode}St=it}p=me===-1||Oe===-1?null:{start:me,end:Oe}}else p=null}p=p||{start:0,end:0}}else p=null;for(o5={focusedElem:o,selectionRange:p},ny=!1,Ya=c;Ya!==null;)if(c=Ya,o=c.child,(c.subtreeFlags&1024)!==0&&o!==null)o.return=c,Ya=o;else for(;Ya!==null;){switch(c=Ya,D=c.alternate,o=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&D!==null){o=void 0,p=c,k=D.memoizedProps,D=D.memoizedState,v=p.stateNode;try{var hn=Dh(p.type,k,p.elementType===p.type);o=v.getSnapshotBeforeUpdate(hn,D),v.__reactInternalSnapshotBeforeUpdate=o}catch(rn){Qr(p,p.return,rn)}}break;case 3:if((o&1024)!==0){if(o=c.stateNode.containerInfo,p=o.nodeType,p===9)c5(o);else if(p===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":c5(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=c.sibling,o!==null){o.return=c.return,Ya=o;break}Ya=c.return}}function BC(o,c,p){var v=p.flags;switch(p.tag){case 0:case 11:case 15:pf(o,p),v&4&&$m(5,p);break;case 1:if(pf(o,p),v&4)if(o=p.stateNode,c===null)try{o.componentDidMount()}catch(te){Qr(p,p.return,te)}else{var k=Dh(p.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(k,c,o.__reactInternalSnapshotBeforeUpdate)}catch(te){Qr(p,p.return,te)}}v&64&&RC(p),v&512&&Um(p,p.return);break;case 3:if(pf(o,p),v&64&&(o=p.updateQueue,o!==null)){if(c=null,p.child!==null)switch(p.child.tag){case 27:case 5:c=p.child.stateNode;break;case 1:c=p.child.stateNode}try{sr(o,c)}catch(te){Qr(p,p.return,te)}}break;case 27:c===null&&v&4&&zC(p);case 26:case 5:pf(o,p),c===null&&v&4&&FC(p),v&512&&Um(p,p.return);break;case 12:pf(o,p);break;case 13:pf(o,p),v&4&&HC(o,p),v&64&&(o=p.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(p=i9.bind(null,p),S9(o,p))));break;case 22:if(v=p.memoizedState!==null||ud,!v){c=c!==null&&c.memoizedState!==null||la,k=ud;var D=la;ud=v,(la=c)&&!D?mf(o,p,(p.subtreeFlags&8772)!==0):pf(o,p),ud=k,la=D}break;case 30:break;default:pf(o,p)}}function $C(o){var c=o.alternate;c!==null&&(o.alternate=null,$C(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&Ia(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var yi=null,ho=!1;function cd(o,c,p){for(p=p.child;p!==null;)UC(o,c,p),p=p.sibling}function UC(o,c,p){if(ve&&typeof ve.onCommitFiberUnmount=="function")try{ve.onCommitFiberUnmount(Pe,p)}catch{}switch(p.tag){case 26:la||Ju(p,c),cd(o,c,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:la||Ju(p,c);var v=yi,k=ho;wf(p.type)&&(yi=p.stateNode,ho=!1),cd(o,c,p),Zm(p.stateNode),yi=v,ho=k;break;case 5:la||Ju(p,c);case 6:if(v=yi,k=ho,yi=null,cd(o,c,p),yi=v,ho=k,yi!==null)if(ho)try{(yi.nodeType===9?yi.body:yi.nodeName==="HTML"?yi.ownerDocument.body:yi).removeChild(p.stateNode)}catch(D){Qr(p,c,D)}else try{yi.removeChild(p.stateNode)}catch(D){Qr(p,c,D)}break;case 18:yi!==null&&(ho?(o=yi,Ok(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,p.stateNode),s1(o)):Ok(yi,p.stateNode));break;case 4:v=yi,k=ho,yi=p.stateNode.containerInfo,ho=!0,cd(o,c,p),yi=v,ho=k;break;case 0:case 11:case 14:case 15:la||hf(2,p,c),la||hf(4,p,c),cd(o,c,p);break;case 1:la||(Ju(p,c),v=p.stateNode,typeof v.componentWillUnmount=="function"&&MC(p,c,v)),cd(o,c,p);break;case 21:cd(o,c,p);break;case 22:la=(v=la)||p.memoizedState!==null,cd(o,c,p),la=v;break;default:cd(o,c,p)}}function HC(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{s1(o)}catch(p){Qr(c,c.return,p)}}function KL(o){switch(o.tag){case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new qC),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new qC),c;default:throw Error(r(435,o.tag))}}function F2(o,c){var p=KL(o);c.forEach(function(v){var k=a9.bind(null,o,v);p.has(v)||(p.add(v),v.then(k,k))})}function Fo(o,c){var p=c.deletions;if(p!==null)for(var v=0;v<p.length;v++){var k=p[v],D=o,te=c,me=te;e:for(;me!==null;){switch(me.tag){case 27:if(wf(me.type)){yi=me.stateNode,ho=!1;break e}break;case 5:yi=me.stateNode,ho=!1;break e;case 3:case 4:yi=me.stateNode.containerInfo,ho=!0;break e}me=me.return}if(yi===null)throw Error(r(160));UC(D,te,k),yi=null,ho=!1,D=k.alternate,D!==null&&(D.return=null),k.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)WC(c,o),c=c.sibling}var au=null;function WC(o,c){var p=o.alternate,v=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Fo(c,o),Po(o),v&4&&(hf(3,o,o.return),$m(3,o),hf(5,o,o.return));break;case 1:Fo(c,o),Po(o),v&512&&(la||p===null||Ju(p,p.return)),v&64&&ud&&(o=o.updateQueue,o!==null&&(v=o.callbacks,v!==null&&(p=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=p===null?v:p.concat(v))));break;case 26:var k=au;if(Fo(c,o),Po(o),v&512&&(la||p===null||Ju(p,p.return)),v&4){var D=p!==null?p.memoizedState:null;if(v=o.memoizedState,p===null)if(v===null)if(o.stateNode===null){e:{v=o.type,p=o.memoizedProps,k=k.ownerDocument||k;t:switch(v){case"title":D=k.getElementsByTagName("title")[0],(!D||D[_r]||D[Hn]||D.namespaceURI==="http://www.w3.org/2000/svg"||D.hasAttribute("itemprop"))&&(D=k.createElement(v),k.head.insertBefore(D,k.querySelector("head > title"))),fs(D,v,p),D[Hn]=o,Jn(D),v=D;break e;case"link":var te=zk("link","href",k).get(v+(p.href||""));if(te){for(var me=0;me<te.length;me++)if(D=te[me],D.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&D.getAttribute("rel")===(p.rel==null?null:p.rel)&&D.getAttribute("title")===(p.title==null?null:p.title)&&D.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){te.splice(me,1);break t}}D=k.createElement(v),fs(D,v,p),k.head.appendChild(D);break;case"meta":if(te=zk("meta","content",k).get(v+(p.content||""))){for(me=0;me<te.length;me++)if(D=te[me],D.getAttribute("content")===(p.content==null?null:""+p.content)&&D.getAttribute("name")===(p.name==null?null:p.name)&&D.getAttribute("property")===(p.property==null?null:p.property)&&D.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&D.getAttribute("charset")===(p.charSet==null?null:p.charSet)){te.splice(me,1);break t}}D=k.createElement(v),fs(D,v,p),k.head.appendChild(D);break;default:throw Error(r(468,v))}D[Hn]=o,Jn(D),v=D}o.stateNode=v}else qk(k,o.type,o.stateNode);else o.stateNode=Pk(k,v,o.memoizedProps);else D!==v?(D===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):D.count--,v===null?qk(k,o.type,o.stateNode):Pk(k,v,o.memoizedProps)):v===null&&o.stateNode!==null&&I2(o,o.memoizedProps,p.memoizedProps)}break;case 27:Fo(c,o),Po(o),v&512&&(la||p===null||Ju(p,p.return)),p!==null&&v&4&&I2(o,o.memoizedProps,p.memoizedProps);break;case 5:if(Fo(c,o),Po(o),v&512&&(la||p===null||Ju(p,p.return)),o.flags&32){k=o.stateNode;try{$i(k,"")}catch(it){Qr(o,o.return,it)}}v&4&&o.stateNode!=null&&(k=o.memoizedProps,I2(o,k,p!==null?p.memoizedProps:k)),v&1024&&(M2=!0);break;case 6:if(Fo(c,o),Po(o),v&4){if(o.stateNode===null)throw Error(r(162));v=o.memoizedProps,p=o.stateNode;try{p.nodeValue=v}catch(it){Qr(o,o.return,it)}}break;case 3:if(Jb=null,k=au,au=Xb(c.containerInfo),Fo(c,o),au=k,Po(o),v&4&&p!==null&&p.memoizedState.isDehydrated)try{s1(c.containerInfo)}catch(it){Qr(o,o.return,it)}M2&&(M2=!1,VC(o));break;case 4:v=au,au=Xb(o.stateNode.containerInfo),Fo(c,o),Po(o),au=v;break;case 12:Fo(c,o),Po(o);break;case 13:Fo(c,o),Po(o),o.child.flags&8192&&o.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(U2=be()),v&4&&(v=o.updateQueue,v!==null&&(o.updateQueue=null,F2(o,v)));break;case 22:k=o.memoizedState!==null;var Oe=p!==null&&p.memoizedState!==null,Je=ud,mt=la;if(ud=Je||k,la=mt||Oe,Fo(c,o),la=mt,ud=Je,Po(o),v&8192)e:for(c=o.stateNode,c._visibility=k?c._visibility&-2:c._visibility|1,k&&(p===null||Oe||ud||la||Ih(o)),p=null,c=o;;){if(c.tag===5||c.tag===26){if(p===null){Oe=p=c;try{if(D=Oe.stateNode,k)te=D.style,typeof te.setProperty=="function"?te.setProperty("display","none","important"):te.display="none";else{me=Oe.stateNode;var St=Oe.memoizedProps.style,tt=St!=null&&St.hasOwnProperty("display")?St.display:null;me.style.display=tt==null||typeof tt=="boolean"?"":(""+tt).trim()}}catch(it){Qr(Oe,Oe.return,it)}}}else if(c.tag===6){if(p===null){Oe=c;try{Oe.stateNode.nodeValue=k?"":Oe.memoizedProps}catch(it){Qr(Oe,Oe.return,it)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break e;for(;c.sibling===null;){if(c.return===null||c.return===o)break e;p===c&&(p=null),c=c.return}p===c&&(p=null),c.sibling.return=c.return,c=c.sibling}v&4&&(v=o.updateQueue,v!==null&&(p=v.retryQueue,p!==null&&(v.retryQueue=null,F2(o,p))));break;case 19:Fo(c,o),Po(o),v&4&&(v=o.updateQueue,v!==null&&(o.updateQueue=null,F2(o,v)));break;case 30:break;case 21:break;default:Fo(c,o),Po(o)}}function Po(o){var c=o.flags;if(c&2){try{for(var p,v=o.return;v!==null;){if(PC(v)){p=v;break}v=v.return}if(p==null)throw Error(r(160));switch(p.tag){case 27:var k=p.stateNode,D=L2(o);Pb(o,D,k);break;case 5:var te=p.stateNode;p.flags&32&&($i(te,""),p.flags&=-33);var me=L2(o);Pb(o,me,te);break;case 3:case 4:var Oe=p.stateNode.containerInfo,Je=L2(o);R2(o,Je,Oe);break;default:throw Error(r(161))}}catch(mt){Qr(o,o.return,mt)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function VC(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;VC(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),o=o.sibling}}function pf(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)BC(o,c.alternate,c),c=c.sibling}function Ih(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:hf(4,c,c.return),Ih(c);break;case 1:Ju(c,c.return);var p=c.stateNode;typeof p.componentWillUnmount=="function"&&MC(c,c.return,p),Ih(c);break;case 27:Zm(c.stateNode);case 26:case 5:Ju(c,c.return),Ih(c);break;case 22:c.memoizedState===null&&Ih(c);break;case 30:Ih(c);break;default:Ih(c)}o=o.sibling}}function mf(o,c,p){for(p=p&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var v=c.alternate,k=o,D=c,te=D.flags;switch(D.tag){case 0:case 11:case 15:mf(k,D,p),$m(4,D);break;case 1:if(mf(k,D,p),v=D,k=v.stateNode,typeof k.componentDidMount=="function")try{k.componentDidMount()}catch(Je){Qr(v,v.return,Je)}if(v=D,k=v.updateQueue,k!==null){var me=v.stateNode;try{var Oe=k.shared.hiddenCallbacks;if(Oe!==null)for(k.shared.hiddenCallbacks=null,k=0;k<Oe.length;k++)Vn(Oe[k],me)}catch(Je){Qr(v,v.return,Je)}}p&&te&64&&RC(D),Um(D,D.return);break;case 27:zC(D);case 26:case 5:mf(k,D,p),p&&v===null&&te&4&&FC(D),Um(D,D.return);break;case 12:mf(k,D,p);break;case 13:mf(k,D,p),p&&te&4&&HC(k,D);break;case 22:D.memoizedState===null&&mf(k,D,p),Um(D,D.return);break;case 30:break;default:mf(k,D,p)}c=c.sibling}}function P2(o,c){var p=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==p&&(o!=null&&o.refCount++,p!=null&&vh(p))}function z2(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&vh(o))}function ec(o,c,p,v){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)YC(o,c,p,v),c=c.sibling}function YC(o,c,p,v){var k=c.flags;switch(c.tag){case 0:case 11:case 15:ec(o,c,p,v),k&2048&&$m(9,c);break;case 1:ec(o,c,p,v);break;case 3:ec(o,c,p,v),k&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&vh(o)));break;case 12:if(k&2048){ec(o,c,p,v),o=c.stateNode;try{var D=c.memoizedProps,te=D.id,me=D.onPostCommit;typeof me=="function"&&me(te,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(Oe){Qr(c,c.return,Oe)}}else ec(o,c,p,v);break;case 13:ec(o,c,p,v);break;case 23:break;case 22:D=c.stateNode,te=c.alternate,c.memoizedState!==null?D._visibility&2?ec(o,c,p,v):Hm(o,c):D._visibility&2?ec(o,c,p,v):(D._visibility|=2,Vp(o,c,p,v,(c.subtreeFlags&10256)!==0)),k&2048&&P2(te,c);break;case 24:ec(o,c,p,v),k&2048&&z2(c.alternate,c);break;default:ec(o,c,p,v)}}function Vp(o,c,p,v,k){for(k=k&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var D=o,te=c,me=p,Oe=v,Je=te.flags;switch(te.tag){case 0:case 11:case 15:Vp(D,te,me,Oe,k),$m(8,te);break;case 23:break;case 22:var mt=te.stateNode;te.memoizedState!==null?mt._visibility&2?Vp(D,te,me,Oe,k):Hm(D,te):(mt._visibility|=2,Vp(D,te,me,Oe,k)),k&&Je&2048&&P2(te.alternate,te);break;case 24:Vp(D,te,me,Oe,k),k&&Je&2048&&z2(te.alternate,te);break;default:Vp(D,te,me,Oe,k)}c=c.sibling}}function Hm(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var p=o,v=c,k=v.flags;switch(v.tag){case 22:Hm(p,v),k&2048&&P2(v.alternate,v);break;case 24:Hm(p,v),k&2048&&z2(v.alternate,v);break;default:Hm(p,v)}c=c.sibling}}var Wm=8192;function Yp(o){if(o.subtreeFlags&Wm)for(o=o.child;o!==null;)GC(o),o=o.sibling}function GC(o){switch(o.tag){case 26:Yp(o),o.flags&Wm&&o.memoizedState!==null&&R9(au,o.memoizedState,o.memoizedProps);break;case 5:Yp(o);break;case 3:case 4:var c=au;au=Xb(o.stateNode.containerInfo),Yp(o),au=c;break;case 22:o.memoizedState===null&&(c=o.alternate,c!==null&&c.memoizedState!==null?(c=Wm,Wm=16777216,Yp(o),Wm=c):Yp(o));break;default:Yp(o)}}function QC(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function Vm(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var p=0;p<c.length;p++){var v=c[p];Ya=v,XC(v,o)}QC(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)KC(o),o=o.sibling}function KC(o){switch(o.tag){case 0:case 11:case 15:Vm(o),o.flags&2048&&hf(9,o,o.return);break;case 3:Vm(o);break;case 12:Vm(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&2&&(o.return===null||o.return.tag!==13)?(c._visibility&=-3,zb(o)):Vm(o);break;default:Vm(o)}}function zb(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var p=0;p<c.length;p++){var v=c[p];Ya=v,XC(v,o)}QC(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:hf(8,c,c.return),zb(c);break;case 22:p=c.stateNode,p._visibility&2&&(p._visibility&=-3,zb(c));break;default:zb(c)}o=o.sibling}}function XC(o,c){for(;Ya!==null;){var p=Ya;switch(p.tag){case 0:case 11:case 15:hf(8,p,c);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var v=p.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:vh(p.memoizedState.cache)}if(v=p.child,v!==null)v.return=p,Ya=v;else e:for(p=o;Ya!==null;){v=Ya;var k=v.sibling,D=v.return;if($C(v),v===p){Ya=null;break e}if(k!==null){k.return=D,Ya=k;break e}Ya=D}}}var XL={getCacheForType:function(o){var c=aa(sa),p=c.data.get(o);return p===void 0&&(p=o(),c.data.set(o,p)),p}},ZL=typeof WeakMap=="function"?WeakMap:Map,Tr=0,ni=null,Bn=null,Gn=0,Or=0,zo=null,gf=!1,Gp=!1,q2=!1,dd=0,Vi=0,bf=0,Lh=0,B2=0,yl=0,Qp=0,Ym=null,po=null,$2=!1,U2=0,qb=1/0,Bb=null,yf=null,ds=0,xf=null,Kp=null,Xp=0,H2=0,W2=null,ZC=null,Gm=0,V2=null;function qo(){if((Tr&2)!==0&&Gn!==0)return Gn&-Gn;if(W.T!==null){var o=td;return o!==0?o:J2()}return oi()}function JC(){yl===0&&(yl=(Gn&536870912)===0||er?Pn():536870912);var o=bl.current;return o!==null&&(o.flags|=32),yl}function Bo(o,c,p){(o===ni&&(Or===2||Or===9)||o.cancelPendingCommit!==null)&&(Zp(o,0),vf(o,Gn,yl,!1)),ir(o,p),((Tr&2)===0||o!==ni)&&(o===ni&&((Tr&2)===0&&(Lh|=p),Vi===4&&vf(o,Gn,yl,!1)),tc(o))}function ek(o,c,p){if((Tr&6)!==0)throw Error(r(327));var v=!p&&(c&124)===0&&(c&o.expiredLanes)===0||nn(o,c),k=v?t9(o,c):Q2(o,c,!0),D=v;do{if(k===0){Gp&&!v&&vf(o,c,0,!1);break}else{if(p=o.current.alternate,D&&!JL(p)){k=Q2(o,c,!1),D=!1;continue}if(k===2){if(D=c,o.errorRecoveryDisabledLanes&D)var te=0;else te=o.pendingLanes&-536870913,te=te!==0?te:te&536870912?536870912:0;if(te!==0){c=te;e:{var me=o;k=Ym;var Oe=me.current.memoizedState.isDehydrated;if(Oe&&(Zp(me,te).flags|=256),te=Q2(me,te,!1),te!==2){if(q2&&!Oe){me.errorRecoveryDisabledLanes|=D,Lh|=D,k=4;break e}D=po,po=k,D!==null&&(po===null?po=D:po.push.apply(po,D))}k=te}if(D=!1,k!==2)continue}}if(k===1){Zp(o,0),vf(o,c,0,!0);break}e:{switch(v=o,D=k,D){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:vf(v,c,yl,!gf);break e;case 2:po=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(k=U2+300-be(),10<k)){if(vf(v,c,yl,!gf),Xt(v,0,!0)!==0)break e;v.timeoutHandle=jk(tk.bind(null,v,p,po,Bb,$2,c,yl,Lh,Qp,gf,D,2,-0,0),k);break e}tk(v,p,po,Bb,$2,c,yl,Lh,Qp,gf,D,0,-0,0)}}break}while(!0);tc(o)}function tk(o,c,p,v,k,D,te,me,Oe,Je,mt,St,tt,it){if(o.timeoutHandle=-1,St=c.subtreeFlags,(St&8192||(St&16785408)===16785408)&&(t1={stylesheets:null,count:0,unsuspend:L9},GC(c),St=M9(),St!==null)){o.cancelPendingCommit=St(lk.bind(null,o,c,D,p,v,k,te,me,Oe,mt,1,tt,it)),vf(o,D,te,!Je);return}lk(o,c,D,p,v,k,te,me,Oe)}function JL(o){for(var c=o;;){var p=c.tag;if((p===0||p===11||p===15)&&c.flags&16384&&(p=c.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var v=0;v<p.length;v++){var k=p[v],D=k.getSnapshot;k=k.value;try{if(!ka(D(),k))return!1}catch{return!1}}if(p=c.child,c.subtreeFlags&16384&&p!==null)p.return=c,c=p;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function vf(o,c,p,v){c&=~B2,c&=~Lh,o.suspendedLanes|=c,o.pingedLanes&=~c,v&&(o.warmLanes|=c),v=o.expirationTimes;for(var k=c;0<k;){var D=31-De(k),te=1<<D;v[D]=-1,k&=~te}p!==0&&Yt(o,p,c)}function $b(){return(Tr&6)===0?(Qm(0),!1):!0}function Y2(){if(Bn!==null){if(Or===0)var o=Bn.return;else o=Bn,Jl=_a=null,Pp(o),Hp=null,zm=0,o=Bn;for(;o!==null;)LC(o.alternate,o),o=o.return;Bn=null}}function Zp(o,c){var p=o.timeoutHandle;p!==-1&&(o.timeoutHandle=-1,b9(p)),p=o.cancelPendingCommit,p!==null&&(o.cancelPendingCommit=null,p()),Y2(),ni=o,Bn=p=dl(o.current,null),Gn=c,Or=0,zo=null,gf=!1,Gp=nn(o,c),q2=!1,Qp=yl=B2=Lh=bf=Vi=0,po=Ym=null,$2=!1,(c&8)!==0&&(c|=c&32);var v=o.entangledLanes;if(v!==0)for(o=o.entanglements,v&=c;0<v;){var k=31-De(v),D=1<<k;c|=o[k],v&=~D}return dd=c,lo(),p}function nk(o,c){en=null,W.H=jb,c===ue||c===pe?(c=We(),Or=3):c===ce?(c=We(),Or=4):Or=c===vC?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,zo=c,Bn===null&&(Vi=1,Lb(o,In(c,o.current)))}function rk(){var o=W.H;return W.H=jb,o===null?jb:o}function ik(){var o=W.A;return W.A=XL,o}function G2(){Vi=4,gf||(Gn&4194048)!==Gn&&bl.current!==null||(Gp=!0),(bf&134217727)===0&&(Lh&134217727)===0||ni===null||vf(ni,Gn,yl,!1)}function Q2(o,c,p){var v=Tr;Tr|=2;var k=rk(),D=ik();(ni!==o||Gn!==c)&&(Bb=null,Zp(o,c)),c=!1;var te=Vi;e:do try{if(Or!==0&&Bn!==null){var me=Bn,Oe=zo;switch(Or){case 8:Y2(),te=6;break e;case 3:case 2:case 9:case 6:bl.current===null&&(c=!0);var Je=Or;if(Or=0,zo=null,Jp(o,me,Oe,Je),p&&Gp){te=0;break e}break;default:Je=Or,Or=0,zo=null,Jp(o,me,Oe,Je)}}e9(),te=Vi;break}catch(mt){nk(o,mt)}while(!0);return c&&o.shellSuspendCounter++,Jl=_a=null,Tr=v,W.H=k,W.A=D,Bn===null&&(ni=null,Gn=0,lo()),te}function e9(){for(;Bn!==null;)ak(Bn)}function t9(o,c){var p=Tr;Tr|=2;var v=rk(),k=ik();ni!==o||Gn!==c?(Bb=null,qb=be()+500,Zp(o,c)):Gp=nn(o,c);e:do try{if(Or!==0&&Bn!==null){c=Bn;var D=zo;t:switch(Or){case 1:Or=0,zo=null,Jp(o,c,D,1);break;case 2:case 9:if(Ee(D)){Or=0,zo=null,sk(c);break}c=function(){Or!==2&&Or!==9||ni!==o||(Or=7),tc(o)},D.then(c,c);break e;case 3:Or=7;break e;case 4:Or=5;break e;case 7:Ee(D)?(Or=0,zo=null,sk(c)):(Or=0,zo=null,Jp(o,c,D,7));break;case 5:var te=null;switch(Bn.tag){case 26:te=Bn.memoizedState;case 5:case 27:var me=Bn;if(!te||Bk(te)){Or=0,zo=null;var Oe=me.sibling;if(Oe!==null)Bn=Oe;else{var Je=me.return;Je!==null?(Bn=Je,Ub(Je)):Bn=null}break t}}Or=0,zo=null,Jp(o,c,D,5);break;case 6:Or=0,zo=null,Jp(o,c,D,6);break;case 8:Y2(),Vi=6;break e;default:throw Error(r(462))}}n9();break}catch(mt){nk(o,mt)}while(!0);return Jl=_a=null,W.H=v,W.A=k,Tr=p,Bn!==null?0:(ni=null,Gn=0,lo(),Vi)}function n9(){for(;Bn!==null&&!Ae();)ak(Bn)}function ak(o){var c=DC(o.alternate,o,dd);o.memoizedProps=o.pendingProps,c===null?Ub(o):Bn=c}function sk(o){var c=o,p=c.alternate;switch(c.tag){case 15:case 0:c=EC(p,c,c.pendingProps,c.type,void 0,Gn);break;case 11:c=EC(p,c,c.pendingProps,c.type.render,c.ref,Gn);break;case 5:Pp(c);default:LC(p,c),c=Bn=gh(c,dd),c=DC(p,c,dd)}o.memoizedProps=o.pendingProps,c===null?Ub(o):Bn=c}function Jp(o,c,p,v){Jl=_a=null,Pp(c),Hp=null,zm=0;var k=c.return;try{if(WL(o,k,c,p,Gn)){Vi=1,Lb(o,In(p,o.current)),Bn=null;return}}catch(D){if(k!==null)throw Bn=k,D;Vi=1,Lb(o,In(p,o.current)),Bn=null;return}c.flags&32768?(er||v===1?o=!0:Gp||(Gn&536870912)!==0?o=!1:(gf=o=!0,(v===2||v===9||v===3||v===6)&&(v=bl.current,v!==null&&v.tag===13&&(v.flags|=16384))),ok(c,o)):Ub(c)}function Ub(o){var c=o;do{if((c.flags&32768)!==0){ok(c,gf);return}o=c.return;var p=YL(c.alternate,c,dd);if(p!==null){Bn=p;return}if(c=c.sibling,c!==null){Bn=c;return}Bn=c=o}while(c!==null);Vi===0&&(Vi=5)}function ok(o,c){do{var p=GL(o.alternate,o);if(p!==null){p.flags&=32767,Bn=p;return}if(p=o.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!c&&(o=o.sibling,o!==null)){Bn=o;return}Bn=o=p}while(o!==null);Vi=6,Bn=null}function lk(o,c,p,v,k,D,te,me,Oe){o.cancelPendingCommit=null;do Hb();while(ds!==0);if((Tr&6)!==0)throw Error(r(327));if(c!==null){if(c===o.current)throw Error(r(177));if(D=c.lanes|c.childLanes,D|=ji,Rn(o,p,D,te,me,Oe),o===ni&&(Bn=ni=null,Gn=0),Kp=c,xf=o,Xp=p,H2=D,W2=k,ZC=v,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,s9(qe,function(){return hk(),null})):(o.callbackNode=null,o.callbackPriority=0),v=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||v){v=W.T,W.T=null,k=Q.p,Q.p=2,te=Tr,Tr|=4;try{QL(o,c,p)}finally{Tr=te,Q.p=k,W.T=v}}ds=1,uk(),ck(),dk()}}function uk(){if(ds===1){ds=0;var o=xf,c=Kp,p=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||p){p=W.T,W.T=null;var v=Q.p;Q.p=2;var k=Tr;Tr|=4;try{WC(c,o);var D=o5,te=os(o.containerInfo),me=D.focusedElem,Oe=D.selectionRange;if(te!==me&&me&&me.ownerDocument&&Mu(me.ownerDocument.documentElement,me)){if(Oe!==null&&Ra(me)){var Je=Oe.start,mt=Oe.end;if(mt===void 0&&(mt=Je),"selectionStart"in me)me.selectionStart=Je,me.selectionEnd=Math.min(mt,me.value.length);else{var St=me.ownerDocument||document,tt=St&&St.defaultView||window;if(tt.getSelection){var it=tt.getSelection(),hn=me.textContent.length,rn=Math.min(Oe.start,hn),qr=Oe.end===void 0?rn:Math.min(Oe.end,hn);!it.extend&&rn>qr&&(te=qr,qr=rn,rn=te);var Ve=Wl(me,rn),Be=Wl(me,qr);if(Ve&&Be&&(it.rangeCount!==1||it.anchorNode!==Ve.node||it.anchorOffset!==Ve.offset||it.focusNode!==Be.node||it.focusOffset!==Be.offset)){var Ke=St.createRange();Ke.setStart(Ve.node,Ve.offset),it.removeAllRanges(),rn>qr?(it.addRange(Ke),it.extend(Be.node,Be.offset)):(Ke.setEnd(Be.node,Be.offset),it.addRange(Ke))}}}}for(St=[],it=me;it=it.parentNode;)it.nodeType===1&&St.push({element:it,left:it.scrollLeft,top:it.scrollTop});for(typeof me.focus=="function"&&me.focus(),me=0;me<St.length;me++){var bt=St[me];bt.element.scrollLeft=bt.left,bt.element.scrollTop=bt.top}}ny=!!s5,o5=s5=null}finally{Tr=k,Q.p=v,W.T=p}}o.current=c,ds=2}}function ck(){if(ds===2){ds=0;var o=xf,c=Kp,p=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||p){p=W.T,W.T=null;var v=Q.p;Q.p=2;var k=Tr;Tr|=4;try{BC(o,c.alternate,c)}finally{Tr=k,Q.p=v,W.T=p}}ds=3}}function dk(){if(ds===4||ds===3){ds=0,ne();var o=xf,c=Kp,p=Xp,v=ZC;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?ds=5:(ds=0,Kp=xf=null,fk(o,o.pendingLanes));var k=o.pendingLanes;if(k===0&&(yf=null),wr(p),c=c.stateNode,ve&&typeof ve.onCommitFiberRoot=="function")try{ve.onCommitFiberRoot(Pe,c,void 0,(c.current.flags&128)===128)}catch{}if(v!==null){c=W.T,k=Q.p,Q.p=2,W.T=null;try{for(var D=o.onRecoverableError,te=0;te<v.length;te++){var me=v[te];D(me.value,{componentStack:me.stack})}}finally{W.T=c,Q.p=k}}(Xp&3)!==0&&Hb(),tc(o),k=o.pendingLanes,(p&4194090)!==0&&(k&42)!==0?o===V2?Gm++:(Gm=0,V2=o):Gm=0,Qm(0)}}function fk(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,vh(c)))}function Hb(o){return uk(),ck(),dk(),hk()}function hk(){if(ds!==5)return!1;var o=xf,c=H2;H2=0;var p=wr(Xp),v=W.T,k=Q.p;try{Q.p=32>p?32:p,W.T=null,p=W2,W2=null;var D=xf,te=Xp;if(ds=0,Kp=xf=null,Xp=0,(Tr&6)!==0)throw Error(r(331));var me=Tr;if(Tr|=4,KC(D.current),YC(D,D.current,te,p),Tr=me,Qm(0,!1),ve&&typeof ve.onPostCommitFiberRoot=="function")try{ve.onPostCommitFiberRoot(Pe,D)}catch{}return!0}finally{Q.p=k,W.T=v,fk(o,c)}}function pk(o,c,p){c=In(p,c),c=C2(o.stateNode,c,2),o=xt(o,c,2),o!==null&&(ir(o,2),tc(o))}function Qr(o,c,p){if(o.tag===3)pk(o,o,p);else for(;c!==null;){if(c.tag===3){pk(c,o,p);break}else if(c.tag===1){var v=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(yf===null||!yf.has(v))){o=In(p,o),p=yC(2),v=xt(c,p,2),v!==null&&(xC(p,v,c,o),ir(v,2),tc(v));break}}c=c.return}}function K2(o,c,p){var v=o.pingCache;if(v===null){v=o.pingCache=new ZL;var k=new Set;v.set(c,k)}else k=v.get(c),k===void 0&&(k=new Set,v.set(c,k));k.has(p)||(q2=!0,k.add(p),o=r9.bind(null,o,c,p),c.then(o,o))}function r9(o,c,p){var v=o.pingCache;v!==null&&v.delete(c),o.pingedLanes|=o.suspendedLanes&p,o.warmLanes&=~p,ni===o&&(Gn&p)===p&&(Vi===4||Vi===3&&(Gn&62914560)===Gn&&300>be()-U2?(Tr&2)===0&&Zp(o,0):B2|=p,Qp===Gn&&(Qp=0)),tc(o)}function mk(o,c){c===0&&(c=zn()),o=Yl(o,c),o!==null&&(ir(o,c),tc(o))}function i9(o){var c=o.memoizedState,p=0;c!==null&&(p=c.retryLane),mk(o,p)}function a9(o,c){var p=0;switch(o.tag){case 13:var v=o.stateNode,k=o.memoizedState;k!==null&&(p=k.retryLane);break;case 19:v=o.stateNode;break;case 22:v=o.stateNode._retryCache;break;default:throw Error(r(314))}v!==null&&v.delete(c),mk(o,p)}function s9(o,c){return Ye(o,c)}var Wb=null,e0=null,X2=!1,Vb=!1,Z2=!1,Rh=0;function tc(o){o!==e0&&o.next===null&&(e0===null?Wb=e0=o:e0=e0.next=o),Vb=!0,X2||(X2=!0,l9())}function Qm(o,c){if(!Z2&&Vb){Z2=!0;do for(var p=!1,v=Wb;v!==null;){if(o!==0){var k=v.pendingLanes;if(k===0)var D=0;else{var te=v.suspendedLanes,me=v.pingedLanes;D=(1<<31-De(42|o)+1)-1,D&=k&~(te&~me),D=D&201326741?D&201326741|1:D?D|2:0}D!==0&&(p=!0,xk(v,D))}else D=Gn,D=Xt(v,v===ni?D:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(D&3)===0||nn(v,D)||(p=!0,xk(v,D));v=v.next}while(p);Z2=!1}}function o9(){gk()}function gk(){Vb=X2=!1;var o=0;Rh!==0&&(g9()&&(o=Rh),Rh=0);for(var c=be(),p=null,v=Wb;v!==null;){var k=v.next,D=bk(v,c);D===0?(v.next=null,p===null?Wb=k:p.next=k,k===null&&(e0=p)):(p=v,(o!==0||(D&3)!==0)&&(Vb=!0)),v=k}Qm(o)}function bk(o,c){for(var p=o.suspendedLanes,v=o.pingedLanes,k=o.expirationTimes,D=o.pendingLanes&-62914561;0<D;){var te=31-De(D),me=1<<te,Oe=k[te];Oe===-1?((me&p)===0||(me&v)!==0)&&(k[te]=cn(me,c)):Oe<=c&&(o.expiredLanes|=me),D&=~me}if(c=ni,p=Gn,p=Xt(o,o===c?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),v=o.callbackNode,p===0||o===c&&(Or===2||Or===9)||o.cancelPendingCommit!==null)return v!==null&&v!==null&&V(v),o.callbackNode=null,o.callbackPriority=0;if((p&3)===0||nn(o,p)){if(c=p&-p,c===o.callbackPriority)return c;switch(v!==null&&V(v),wr(p)){case 2:case 8:p=Re;break;case 32:p=qe;break;case 268435456:p=Ze;break;default:p=qe}return v=yk.bind(null,o),p=Ye(p,v),o.callbackPriority=c,o.callbackNode=p,c}return v!==null&&v!==null&&V(v),o.callbackPriority=2,o.callbackNode=null,2}function yk(o,c){if(ds!==0&&ds!==5)return o.callbackNode=null,o.callbackPriority=0,null;var p=o.callbackNode;if(Hb()&&o.callbackNode!==p)return null;var v=Gn;return v=Xt(o,o===ni?v:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),v===0?null:(ek(o,v,c),bk(o,be()),o.callbackNode!=null&&o.callbackNode===p?yk.bind(null,o):null)}function xk(o,c){if(Hb())return null;ek(o,c,!0)}function l9(){y9(function(){(Tr&6)!==0?Ye(ke,o9):gk()})}function J2(){return Rh===0&&(Rh=Pn()),Rh}function vk(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Ys(""+o)}function wk(o,c){var p=c.ownerDocument.createElement("input");return p.name=c.name,p.value=c.value,o.id&&p.setAttribute("form",o.id),c.parentNode.insertBefore(p,c),o=new FormData(o),p.parentNode.removeChild(p),o}function u9(o,c,p,v,k){if(c==="submit"&&p&&p.stateNode===k){var D=vk((k[ar]||null).action),te=v.submitter;te&&(c=(c=te[ar]||null)?vk(c.formAction):te.getAttribute("formAction"),c!==null&&(D=c,te=null));var me=new lt("action","action",null,v,k);o.push({event:me,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(Rh!==0){var Oe=te?wk(k,te):new FormData(k);gl(p,{pending:!0,data:Oe,method:k.method,action:D},null,Oe)}}else typeof D=="function"&&(me.preventDefault(),Oe=te?wk(k,te):new FormData(k),gl(p,{pending:!0,data:Oe,method:k.method,action:D},D,Oe))},currentTarget:k}]})}}for(var e5=0;e5<Qc.length;e5++){var t5=Qc[e5],c9=t5.toLowerCase(),d9=t5[0].toUpperCase()+t5.slice(1);gi(c9,"on"+d9)}gi(Jd,"onAnimationEnd"),gi(Pu,"onAnimationIteration"),gi(zu,"onAnimationStart"),gi("dblclick","onDoubleClick"),gi("focusin","onFocus"),gi("focusout","onBlur"),gi(qu,"onTransitionRun"),gi(Gc,"onTransitionStart"),gi(ef,"onTransitionCancel"),gi(Bu,"onTransitionEnd"),Mr("onMouseEnter",["mouseout","mouseover"]),Mr("onMouseLeave",["mouseout","mouseover"]),Mr("onPointerEnter",["pointerout","pointerover"]),Mr("onPointerLeave",["pointerout","pointerover"]),Fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Km="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f9=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Km));function Sk(o,c){c=(c&4)!==0;for(var p=0;p<o.length;p++){var v=o[p],k=v.event;v=v.listeners;e:{var D=void 0;if(c)for(var te=v.length-1;0<=te;te--){var me=v[te],Oe=me.instance,Je=me.currentTarget;if(me=me.listener,Oe!==D&&k.isPropagationStopped())break e;D=me,k.currentTarget=Je;try{D(k)}catch(mt){Ib(mt)}k.currentTarget=null,D=Oe}else for(te=0;te<v.length;te++){if(me=v[te],Oe=me.instance,Je=me.currentTarget,me=me.listener,Oe!==D&&k.isPropagationStopped())break e;D=me,k.currentTarget=Je;try{D(k)}catch(mt){Ib(mt)}k.currentTarget=null,D=Oe}}}}function $n(o,c){var p=c[dr];p===void 0&&(p=c[dr]=new Set);var v=o+"__bubble";p.has(v)||(Ak(c,o,2,!1),p.add(v))}function n5(o,c,p){var v=0;c&&(v|=4),Ak(p,o,v,c)}var Yb="_reactListening"+Math.random().toString(36).slice(2);function r5(o){if(!o[Yb]){o[Yb]=!0,no.forEach(function(p){p!=="selectionchange"&&(f9.has(p)||n5(p,!1,o),n5(p,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[Yb]||(c[Yb]=!0,n5("selectionchange",!1,c))}}function Ak(o,c,p,v){switch(Yk(c)){case 2:var k=z9;break;case 8:k=q9;break;default:k=b5}p=k.bind(null,c,p,o),k=void 0,!_o||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(k=!0),v?k!==void 0?o.addEventListener(c,p,{capture:!0,passive:k}):o.addEventListener(c,p,!0):k!==void 0?o.addEventListener(c,p,{passive:k}):o.addEventListener(c,p,!1)}function i5(o,c,p,v,k){var D=v;if((c&1)===0&&(c&2)===0&&v!==null)e:for(;;){if(v===null)return;var te=v.tag;if(te===3||te===4){var me=v.stateNode.containerInfo;if(me===k)break;if(te===4)for(te=v.return;te!==null;){var Oe=te.tag;if((Oe===3||Oe===4)&&te.stateNode.containerInfo===k)return;te=te.return}for(;me!==null;){if(te=qi(me),te===null)return;if(Oe=te.tag,Oe===5||Oe===6||Oe===26||Oe===27){v=D=te;continue e}me=me.parentNode}}v=v.return}sl(function(){var Je=D,mt=li(p),St=[];e:{var tt=Vl.get(o);if(tt!==void 0){var it=lt,hn=o;switch(o){case"keypress":if(so(p)===0)break e;case"keydown":case"keyup":it=Gd;break;case"focusin":hn="focus",it=Gr;break;case"focusout":hn="blur",it=Gr;break;case"beforeblur":case"afterblur":it=Gr;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":it=Nr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":it=Sr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":it=fh;break;case Jd:case Pu:case zu:it=Gs;break;case Bu:it=ae;break;case"scroll":case"scrollend":it=$t;break;case"wheel":it=Me;break;case"copy":case"cut":case"paste":it=Wd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":it=Qd;break;case"toggle":case"beforetoggle":it=dt}var rn=(c&4)!==0,qr=!rn&&(o==="scroll"||o==="scrollend"),Ve=rn?tt!==null?tt+"Capture":null:tt;rn=[];for(var Be=Je,Ke;Be!==null;){var bt=Be;if(Ke=bt.stateNode,bt=bt.tag,bt!==5&&bt!==26&&bt!==27||Ke===null||Ve===null||(bt=Ei(Be,Ve),bt!=null&&rn.push(Xm(Be,bt,Ke))),qr)break;Be=Be.return}0<rn.length&&(tt=new it(tt,hn,null,p,mt),St.push({event:tt,listeners:rn}))}}if((c&7)===0){e:{if(tt=o==="mouseover"||o==="pointerover",it=o==="mouseout"||o==="pointerout",tt&&p!==al&&(hn=p.relatedTarget||p.fromElement)&&(qi(hn)||hn[Rr]))break e;if((it||tt)&&(tt=mt.window===mt?mt:(tt=mt.ownerDocument)?tt.defaultView||tt.parentWindow:window,it?(hn=p.relatedTarget||p.toElement,it=Je,hn=hn?qi(hn):null,hn!==null&&(qr=a(hn),rn=hn.tag,hn!==qr||rn!==5&&rn!==27&&rn!==6)&&(hn=null)):(it=null,hn=Je),it!==hn)){if(rn=Nr,bt="onMouseLeave",Ve="onMouseEnter",Be="mouse",(o==="pointerout"||o==="pointerover")&&(rn=Qd,bt="onPointerLeave",Ve="onPointerEnter",Be="pointer"),qr=it==null?tt:Zn(it),Ke=hn==null?tt:Zn(hn),tt=new rn(bt,Be+"leave",it,p,mt),tt.target=qr,tt.relatedTarget=Ke,bt=null,qi(mt)===Je&&(rn=new rn(Ve,Be+"enter",hn,p,mt),rn.target=Ke,rn.relatedTarget=qr,bt=rn),qr=bt,it&&hn)t:{for(rn=it,Ve=hn,Be=0,Ke=rn;Ke;Ke=t0(Ke))Be++;for(Ke=0,bt=Ve;bt;bt=t0(bt))Ke++;for(;0<Be-Ke;)rn=t0(rn),Be--;for(;0<Ke-Be;)Ve=t0(Ve),Ke--;for(;Be--;){if(rn===Ve||Ve!==null&&rn===Ve.alternate)break t;rn=t0(rn),Ve=t0(Ve)}rn=null}else rn=null;it!==null&&Ck(St,tt,it,rn,!1),hn!==null&&qr!==null&&Ck(St,qr,hn,rn,!0)}}e:{if(tt=Je?Zn(Je):window,it=tt.nodeName&&tt.nodeName.toLowerCase(),it==="select"||it==="input"&&tt.type==="file")var qt=Xd;else if(Oo(tt))if(Hc)qt=Tp;else{qt=Am;var Mn=ks}else it=tt.nodeName,!it||it.toLowerCase()!=="input"||tt.type!=="checkbox"&&tt.type!=="radio"?Je&&qa(Je.elementType)&&(qt=Xd):qt=ph;if(qt&&(qt=qt(o,Je))){hh(St,qt,p,mt);break e}Mn&&Mn(o,tt,Je),o==="focusout"&&Je&&tt.type==="number"&&Je.memoizedProps.value!=null&&Eo(tt,"number",tt.value)}switch(Mn=Je?Zn(Je):window,o){case"focusin":(Oo(Mn)||Mn.contentEditable==="true")&&(Es=Mn,Do=Je,ul=null);break;case"focusout":ul=Do=Es=null;break;case"mousedown":Io=!0;break;case"contextmenu":case"mouseup":case"dragend":Io=!1,mi(St,p,mt);break;case"selectionchange":if(Fu)break;case"keydown":case"keyup":mi(St,p,mt)}var Kt;if(Ot)e:{switch(o){case"compositionstart":var sn="onCompositionStart";break e;case"compositionend":sn="onCompositionEnd";break e;case"compositionupdate":sn="onCompositionUpdate";break e}sn=void 0}else Ni?ui(o,p)&&(sn="onCompositionEnd"):o==="keydown"&&p.keyCode===229&&(sn="onCompositionStart");sn&&(pn&&p.locale!=="ko"&&(Ni||sn!=="onCompositionStart"?sn==="onCompositionEnd"&&Ni&&(Kt=ol()):(La=mt,Ua="value"in La?La.value:La.textContent,Ni=!0)),Mn=Gb(Je,sn),0<Mn.length&&(sn=new jo(sn,o,null,p,mt),St.push({event:sn,listeners:Mn}),Kt?sn.data=Kt:(Kt=_i(p),Kt!==null&&(sn.data=Kt)))),(Kt=vn?Ca(o,p):To(o,p))&&(sn=Gb(Je,"onBeforeInput"),0<sn.length&&(Mn=new jo("onBeforeInput","beforeinput",null,p,mt),St.push({event:Mn,listeners:sn}),Mn.data=Kt)),u9(St,o,Je,p,mt)}Sk(St,c)})}function Xm(o,c,p){return{instance:o,listener:c,currentTarget:p}}function Gb(o,c){for(var p=c+"Capture",v=[];o!==null;){var k=o,D=k.stateNode;if(k=k.tag,k!==5&&k!==26&&k!==27||D===null||(k=Ei(o,p),k!=null&&v.unshift(Xm(o,k,D)),k=Ei(o,c),k!=null&&v.push(Xm(o,k,D))),o.tag===3)return v;o=o.return}return[]}function t0(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function Ck(o,c,p,v,k){for(var D=c._reactName,te=[];p!==null&&p!==v;){var me=p,Oe=me.alternate,Je=me.stateNode;if(me=me.tag,Oe!==null&&Oe===v)break;me!==5&&me!==26&&me!==27||Je===null||(Oe=Je,k?(Je=Ei(p,D),Je!=null&&te.unshift(Xm(p,Je,Oe))):k||(Je=Ei(p,D),Je!=null&&te.push(Xm(p,Je,Oe)))),p=p.return}te.length!==0&&o.push({event:c,listeners:te})}var h9=/\r\n?/g,p9=/\u0000|\uFFFD/g;function kk(o){return(typeof o=="string"?o:""+o).replace(h9,`
`).replace(p9,"")}function Ek(o,c){return c=kk(c),kk(o)===c}function Qb(){}function zr(o,c,p,v,k,D){switch(p){case"children":typeof v=="string"?c==="body"||c==="textarea"&&v===""||$i(o,v):(typeof v=="number"||typeof v=="bigint")&&c!=="body"&&$i(o,""+v);break;case"className":xs(o,"class",v);break;case"tabIndex":xs(o,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":xs(o,p,v);break;case"style":Ou(o,v,D);break;case"data":if(c!=="object"){xs(o,"data",v);break}case"src":case"href":if(v===""&&(c!=="a"||p!=="href")){o.removeAttribute(p);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){o.removeAttribute(p);break}v=Ys(""+v),o.setAttribute(p,v);break;case"action":case"formAction":if(typeof v=="function"){o.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof D=="function"&&(p==="formAction"?(c!=="input"&&zr(o,c,"name",k.name,k,null),zr(o,c,"formEncType",k.formEncType,k,null),zr(o,c,"formMethod",k.formMethod,k,null),zr(o,c,"formTarget",k.formTarget,k,null)):(zr(o,c,"encType",k.encType,k,null),zr(o,c,"method",k.method,k,null),zr(o,c,"target",k.target,k,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){o.removeAttribute(p);break}v=Ys(""+v),o.setAttribute(p,v);break;case"onClick":v!=null&&(o.onclick=Qb);break;case"onScroll":v!=null&&$n("scroll",o);break;case"onScrollEnd":v!=null&&$n("scrollend",o);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(p=v.__html,p!=null){if(k.children!=null)throw Error(r(60));o.innerHTML=p}}break;case"multiple":o.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":o.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){o.removeAttribute("xlink:href");break}p=Ys(""+v),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?o.setAttribute(p,""+v):o.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?o.setAttribute(p,""):o.removeAttribute(p);break;case"capture":case"download":v===!0?o.setAttribute(p,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?o.setAttribute(p,v):o.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?o.setAttribute(p,v):o.removeAttribute(p);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?o.removeAttribute(p):o.setAttribute(p,v);break;case"popover":$n("beforetoggle",o),$n("toggle",o),Us(o,"popover",v);break;case"xlinkActuate":Pa(o,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":Pa(o,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":Pa(o,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":Pa(o,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":Pa(o,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":Pa(o,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":Pa(o,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":Pa(o,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":Pa(o,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":Us(o,"is",v);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=Vs.get(p)||p,Us(o,p,v))}}function a5(o,c,p,v,k,D){switch(p){case"style":Ou(o,v,D);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(p=v.__html,p!=null){if(k.children!=null)throw Error(r(60));o.innerHTML=p}}break;case"children":typeof v=="string"?$i(o,v):(typeof v=="number"||typeof v=="bigint")&&$i(o,""+v);break;case"onScroll":v!=null&&$n("scroll",o);break;case"onScrollEnd":v!=null&&$n("scrollend",o);break;case"onClick":v!=null&&(o.onclick=Qb);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Co.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(k=p.endsWith("Capture"),c=p.slice(2,k?p.length-7:void 0),D=o[ar]||null,D=D!=null?D[p]:null,typeof D=="function"&&o.removeEventListener(c,D,k),typeof v=="function")){typeof D!="function"&&D!==null&&(p in o?o[p]=null:o.hasAttribute(p)&&o.removeAttribute(p)),o.addEventListener(c,v,k);break e}p in o?o[p]=v:v===!0?o.setAttribute(p,""):Us(o,p,v)}}}function fs(o,c,p){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$n("error",o),$n("load",o);var v=!1,k=!1,D;for(D in p)if(p.hasOwnProperty(D)){var te=p[D];if(te!=null)switch(D){case"src":v=!0;break;case"srcSet":k=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:zr(o,c,D,te,p,null)}}k&&zr(o,c,"srcSet",p.srcSet,p,null),v&&zr(o,c,"src",p.src,p,null);return;case"input":$n("invalid",o);var me=D=te=k=null,Oe=null,Je=null;for(v in p)if(p.hasOwnProperty(v)){var mt=p[v];if(mt!=null)switch(v){case"name":k=mt;break;case"type":te=mt;break;case"checked":Oe=mt;break;case"defaultChecked":Je=mt;break;case"value":D=mt;break;case"defaultValue":me=mt;break;case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(r(137,c));break;default:zr(o,c,v,mt,p,null)}}$l(o,D,me,Oe,Je,te,k,!1),za(o);return;case"select":$n("invalid",o),v=te=D=null;for(k in p)if(p.hasOwnProperty(k)&&(me=p[k],me!=null))switch(k){case"value":D=me;break;case"defaultValue":te=me;break;case"multiple":v=me;default:zr(o,c,k,me,p,null)}c=D,p=te,o.multiple=!!v,c!=null?Hs(o,!!v,c,!1):p!=null&&Hs(o,!!v,p,!0);return;case"textarea":$n("invalid",o),D=k=v=null;for(te in p)if(p.hasOwnProperty(te)&&(me=p[te],me!=null))switch(te){case"value":v=me;break;case"defaultValue":k=me;break;case"children":D=me;break;case"dangerouslySetInnerHTML":if(me!=null)throw Error(r(91));break;default:zr(o,c,te,me,p,null)}Ws(o,v,k,D),za(o);return;case"option":for(Oe in p)if(p.hasOwnProperty(Oe)&&(v=p[Oe],v!=null))switch(Oe){case"selected":o.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:zr(o,c,Oe,v,p,null)}return;case"dialog":$n("beforetoggle",o),$n("toggle",o),$n("cancel",o),$n("close",o);break;case"iframe":case"object":$n("load",o);break;case"video":case"audio":for(v=0;v<Km.length;v++)$n(Km[v],o);break;case"image":$n("error",o),$n("load",o);break;case"details":$n("toggle",o);break;case"embed":case"source":case"link":$n("error",o),$n("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Je in p)if(p.hasOwnProperty(Je)&&(v=p[Je],v!=null))switch(Je){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:zr(o,c,Je,v,p,null)}return;default:if(qa(c)){for(mt in p)p.hasOwnProperty(mt)&&(v=p[mt],v!==void 0&&a5(o,c,mt,v,p,void 0));return}}for(me in p)p.hasOwnProperty(me)&&(v=p[me],v!=null&&zr(o,c,me,v,p,null))}function m9(o,c,p,v){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var k=null,D=null,te=null,me=null,Oe=null,Je=null,mt=null;for(it in p){var St=p[it];if(p.hasOwnProperty(it)&&St!=null)switch(it){case"checked":break;case"value":break;case"defaultValue":Oe=St;default:v.hasOwnProperty(it)||zr(o,c,it,null,v,St)}}for(var tt in v){var it=v[tt];if(St=p[tt],v.hasOwnProperty(tt)&&(it!=null||St!=null))switch(tt){case"type":D=it;break;case"name":k=it;break;case"checked":Je=it;break;case"defaultChecked":mt=it;break;case"value":te=it;break;case"defaultValue":me=it;break;case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(r(137,c));break;default:it!==St&&zr(o,c,tt,it,v,St)}}ko(o,te,me,Oe,Je,mt,D,k);return;case"select":it=te=me=tt=null;for(D in p)if(Oe=p[D],p.hasOwnProperty(D)&&Oe!=null)switch(D){case"value":break;case"multiple":it=Oe;default:v.hasOwnProperty(D)||zr(o,c,D,null,v,Oe)}for(k in v)if(D=v[k],Oe=p[k],v.hasOwnProperty(k)&&(D!=null||Oe!=null))switch(k){case"value":tt=D;break;case"defaultValue":me=D;break;case"multiple":te=D;default:D!==Oe&&zr(o,c,k,D,v,Oe)}c=me,p=te,v=it,tt!=null?Hs(o,!!p,tt,!1):!!v!=!!p&&(c!=null?Hs(o,!!p,c,!0):Hs(o,!!p,p?[]:"",!1));return;case"textarea":it=tt=null;for(me in p)if(k=p[me],p.hasOwnProperty(me)&&k!=null&&!v.hasOwnProperty(me))switch(me){case"value":break;case"children":break;default:zr(o,c,me,null,v,k)}for(te in v)if(k=v[te],D=p[te],v.hasOwnProperty(te)&&(k!=null||D!=null))switch(te){case"value":tt=k;break;case"defaultValue":it=k;break;case"children":break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(r(91));break;default:k!==D&&zr(o,c,te,k,v,D)}Tu(o,tt,it);return;case"option":for(var hn in p)if(tt=p[hn],p.hasOwnProperty(hn)&&tt!=null&&!v.hasOwnProperty(hn))switch(hn){case"selected":o.selected=!1;break;default:zr(o,c,hn,null,v,tt)}for(Oe in v)if(tt=v[Oe],it=p[Oe],v.hasOwnProperty(Oe)&&tt!==it&&(tt!=null||it!=null))switch(Oe){case"selected":o.selected=tt&&typeof tt!="function"&&typeof tt!="symbol";break;default:zr(o,c,Oe,tt,v,it)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var rn in p)tt=p[rn],p.hasOwnProperty(rn)&&tt!=null&&!v.hasOwnProperty(rn)&&zr(o,c,rn,null,v,tt);for(Je in v)if(tt=v[Je],it=p[Je],v.hasOwnProperty(Je)&&tt!==it&&(tt!=null||it!=null))switch(Je){case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(r(137,c));break;default:zr(o,c,Je,tt,v,it)}return;default:if(qa(c)){for(var qr in p)tt=p[qr],p.hasOwnProperty(qr)&&tt!==void 0&&!v.hasOwnProperty(qr)&&a5(o,c,qr,void 0,v,tt);for(mt in v)tt=v[mt],it=p[mt],!v.hasOwnProperty(mt)||tt===it||tt===void 0&&it===void 0||a5(o,c,mt,tt,v,it);return}}for(var Ve in p)tt=p[Ve],p.hasOwnProperty(Ve)&&tt!=null&&!v.hasOwnProperty(Ve)&&zr(o,c,Ve,null,v,tt);for(St in v)tt=v[St],it=p[St],!v.hasOwnProperty(St)||tt===it||tt==null&&it==null||zr(o,c,St,tt,v,it)}var s5=null,o5=null;function Kb(o){return o.nodeType===9?o:o.ownerDocument}function _k(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Nk(o,c){if(o===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&c==="foreignObject"?0:o}function l5(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var u5=null;function g9(){var o=window.event;return o&&o.type==="popstate"?o===u5?!1:(u5=o,!0):(u5=null,!1)}var jk=typeof setTimeout=="function"?setTimeout:void 0,b9=typeof clearTimeout=="function"?clearTimeout:void 0,Tk=typeof Promise=="function"?Promise:void 0,y9=typeof queueMicrotask=="function"?queueMicrotask:typeof Tk<"u"?function(o){return Tk.resolve(null).then(o).catch(x9)}:jk;function x9(o){setTimeout(function(){throw o})}function wf(o){return o==="head"}function Ok(o,c){var p=c,v=0,k=0;do{var D=p.nextSibling;if(o.removeChild(p),D&&D.nodeType===8)if(p=D.data,p==="/$"){if(0<v&&8>v){p=v;var te=o.ownerDocument;if(p&1&&Zm(te.documentElement),p&2&&Zm(te.body),p&4)for(p=te.head,Zm(p),te=p.firstChild;te;){var me=te.nextSibling,Oe=te.nodeName;te[_r]||Oe==="SCRIPT"||Oe==="STYLE"||Oe==="LINK"&&te.rel.toLowerCase()==="stylesheet"||p.removeChild(te),te=me}}if(k===0){o.removeChild(D),s1(c);return}k--}else p==="$"||p==="$?"||p==="$!"?k++:v=p.charCodeAt(0)-48;else v=0;p=D}while(p);s1(c)}function c5(o){var c=o.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var p=c;switch(c=c.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":c5(p),Ia(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}o.removeChild(p)}}function v9(o,c,p,v){for(;o.nodeType===1;){var k=p;if(o.nodeName.toLowerCase()!==c.toLowerCase()){if(!v&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(v){if(!o[_r])switch(c){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(D=o.getAttribute("rel"),D==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(D!==k.rel||o.getAttribute("href")!==(k.href==null||k.href===""?null:k.href)||o.getAttribute("crossorigin")!==(k.crossOrigin==null?null:k.crossOrigin)||o.getAttribute("title")!==(k.title==null?null:k.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(D=o.getAttribute("src"),(D!==(k.src==null?null:k.src)||o.getAttribute("type")!==(k.type==null?null:k.type)||o.getAttribute("crossorigin")!==(k.crossOrigin==null?null:k.crossOrigin))&&D&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(c==="input"&&o.type==="hidden"){var D=k.name==null?null:""+k.name;if(k.type==="hidden"&&o.getAttribute("name")===D)return o}else return o;if(o=su(o.nextSibling),o===null)break}return null}function w9(o,c,p){if(c==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!p||(o=su(o.nextSibling),o===null))return null;return o}function d5(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function S9(o,c){var p=o.ownerDocument;if(o.data!=="$?"||p.readyState==="complete")c();else{var v=function(){c(),p.removeEventListener("DOMContentLoaded",v)};p.addEventListener("DOMContentLoaded",v),o._reactRetry=v}}function su(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return o}var f5=null;function Dk(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var p=o.data;if(p==="$"||p==="$!"||p==="$?"){if(c===0)return o;c--}else p==="/$"&&c++}o=o.previousSibling}return null}function Ik(o,c,p){switch(c=Kb(p),o){case"html":if(o=c.documentElement,!o)throw Error(r(452));return o;case"head":if(o=c.head,!o)throw Error(r(453));return o;case"body":if(o=c.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function Zm(o){for(var c=o.attributes;c.length;)o.removeAttributeNode(c[0]);Ia(o)}var xl=new Map,Lk=new Set;function Xb(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var fd=Q.d;Q.d={f:A9,r:C9,D:k9,C:E9,L:_9,m:N9,X:T9,S:j9,M:O9};function A9(){var o=fd.f(),c=$b();return o||c}function C9(o){var c=Bi(o);c!==null&&c.tag===5&&c.type==="form"?Th(c):fd.r(o)}var n0=typeof document>"u"?null:document;function Rk(o,c,p){var v=n0;if(v&&typeof c=="string"&&c){var k=hr(c);k='link[rel="'+o+'"][href="'+k+'"]',typeof p=="string"&&(k+='[crossorigin="'+p+'"]'),Lk.has(k)||(Lk.add(k),o={rel:o,crossOrigin:p,href:c},v.querySelector(k)===null&&(c=v.createElement("link"),fs(c,"link",o),Jn(c),v.head.appendChild(c)))}}function k9(o){fd.D(o),Rk("dns-prefetch",o,null)}function E9(o,c){fd.C(o,c),Rk("preconnect",o,c)}function _9(o,c,p){fd.L(o,c,p);var v=n0;if(v&&o&&c){var k='link[rel="preload"][as="'+hr(c)+'"]';c==="image"&&p&&p.imageSrcSet?(k+='[imagesrcset="'+hr(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(k+='[imagesizes="'+hr(p.imageSizes)+'"]')):k+='[href="'+hr(o)+'"]';var D=k;switch(c){case"style":D=r0(o);break;case"script":D=i0(o)}xl.has(D)||(o=f({rel:"preload",href:c==="image"&&p&&p.imageSrcSet?void 0:o,as:c},p),xl.set(D,o),v.querySelector(k)!==null||c==="style"&&v.querySelector(Jm(D))||c==="script"&&v.querySelector(e1(D))||(c=v.createElement("link"),fs(c,"link",o),Jn(c),v.head.appendChild(c)))}}function N9(o,c){fd.m(o,c);var p=n0;if(p&&o){var v=c&&typeof c.as=="string"?c.as:"script",k='link[rel="modulepreload"][as="'+hr(v)+'"][href="'+hr(o)+'"]',D=k;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":D=i0(o)}if(!xl.has(D)&&(o=f({rel:"modulepreload",href:o},c),xl.set(D,o),p.querySelector(k)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(e1(D)))return}v=p.createElement("link"),fs(v,"link",o),Jn(v),p.head.appendChild(v)}}}function j9(o,c,p){fd.S(o,c,p);var v=n0;if(v&&o){var k=ki(v).hoistableStyles,D=r0(o);c=c||"default";var te=k.get(D);if(!te){var me={loading:0,preload:null};if(te=v.querySelector(Jm(D)))me.loading=5;else{o=f({rel:"stylesheet",href:o,"data-precedence":c},p),(p=xl.get(D))&&h5(o,p);var Oe=te=v.createElement("link");Jn(Oe),fs(Oe,"link",o),Oe._p=new Promise(function(Je,mt){Oe.onload=Je,Oe.onerror=mt}),Oe.addEventListener("load",function(){me.loading|=1}),Oe.addEventListener("error",function(){me.loading|=2}),me.loading|=4,Zb(te,c,v)}te={type:"stylesheet",instance:te,count:1,state:me},k.set(D,te)}}}function T9(o,c){fd.X(o,c);var p=n0;if(p&&o){var v=ki(p).hoistableScripts,k=i0(o),D=v.get(k);D||(D=p.querySelector(e1(k)),D||(o=f({src:o,async:!0},c),(c=xl.get(k))&&p5(o,c),D=p.createElement("script"),Jn(D),fs(D,"link",o),p.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},v.set(k,D))}}function O9(o,c){fd.M(o,c);var p=n0;if(p&&o){var v=ki(p).hoistableScripts,k=i0(o),D=v.get(k);D||(D=p.querySelector(e1(k)),D||(o=f({src:o,async:!0,type:"module"},c),(c=xl.get(k))&&p5(o,c),D=p.createElement("script"),Jn(D),fs(D,"link",o),p.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},v.set(k,D))}}function Mk(o,c,p,v){var k=(k=oe.current)?Xb(k):null;if(!k)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(c=r0(p.href),p=ki(k).hoistableStyles,v=p.get(c),v||(v={type:"style",instance:null,count:0,state:null},p.set(c,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){o=r0(p.href);var D=ki(k).hoistableStyles,te=D.get(o);if(te||(k=k.ownerDocument||k,te={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},D.set(o,te),(D=k.querySelector(Jm(o)))&&!D._p&&(te.instance=D,te.state.loading=5),xl.has(o)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},xl.set(o,p),D||D9(k,o,p,te.state))),c&&v===null)throw Error(r(528,""));return te}if(c&&v!==null)throw Error(r(529,""));return null;case"script":return c=p.async,p=p.src,typeof p=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=i0(p),p=ki(k).hoistableScripts,v=p.get(c),v||(v={type:"script",instance:null,count:0,state:null},p.set(c,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function r0(o){return'href="'+hr(o)+'"'}function Jm(o){return'link[rel="stylesheet"]['+o+"]"}function Fk(o){return f({},o,{"data-precedence":o.precedence,precedence:null})}function D9(o,c,p,v){o.querySelector('link[rel="preload"][as="style"]['+c+"]")?v.loading=1:(c=o.createElement("link"),v.preload=c,c.addEventListener("load",function(){return v.loading|=1}),c.addEventListener("error",function(){return v.loading|=2}),fs(c,"link",p),Jn(c),o.head.appendChild(c))}function i0(o){return'[src="'+hr(o)+'"]'}function e1(o){return"script[async]"+o}function Pk(o,c,p){if(c.count++,c.instance===null)switch(c.type){case"style":var v=o.querySelector('style[data-href~="'+hr(p.href)+'"]');if(v)return c.instance=v,Jn(v),v;var k=f({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return v=(o.ownerDocument||o).createElement("style"),Jn(v),fs(v,"style",k),Zb(v,p.precedence,o),c.instance=v;case"stylesheet":k=r0(p.href);var D=o.querySelector(Jm(k));if(D)return c.state.loading|=4,c.instance=D,Jn(D),D;v=Fk(p),(k=xl.get(k))&&h5(v,k),D=(o.ownerDocument||o).createElement("link"),Jn(D);var te=D;return te._p=new Promise(function(me,Oe){te.onload=me,te.onerror=Oe}),fs(D,"link",v),c.state.loading|=4,Zb(D,p.precedence,o),c.instance=D;case"script":return D=i0(p.src),(k=o.querySelector(e1(D)))?(c.instance=k,Jn(k),k):(v=p,(k=xl.get(D))&&(v=f({},p),p5(v,k)),o=o.ownerDocument||o,k=o.createElement("script"),Jn(k),fs(k,"link",v),o.head.appendChild(k),c.instance=k);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(v=c.instance,c.state.loading|=4,Zb(v,p.precedence,o));return c.instance}function Zb(o,c,p){for(var v=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),k=v.length?v[v.length-1]:null,D=k,te=0;te<v.length;te++){var me=v[te];if(me.dataset.precedence===c)D=me;else if(D!==k)break}D?D.parentNode.insertBefore(o,D.nextSibling):(c=p.nodeType===9?p.head:p,c.insertBefore(o,c.firstChild))}function h5(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.title==null&&(o.title=c.title)}function p5(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.integrity==null&&(o.integrity=c.integrity)}var Jb=null;function zk(o,c,p){if(Jb===null){var v=new Map,k=Jb=new Map;k.set(p,v)}else k=Jb,v=k.get(p),v||(v=new Map,k.set(p,v));if(v.has(o))return v;for(v.set(o,null),p=p.getElementsByTagName(o),k=0;k<p.length;k++){var D=p[k];if(!(D[_r]||D[Hn]||o==="link"&&D.getAttribute("rel")==="stylesheet")&&D.namespaceURI!=="http://www.w3.org/2000/svg"){var te=D.getAttribute(c)||"";te=o+te;var me=v.get(te);me?me.push(D):v.set(te,[D])}}return v}function qk(o,c,p){o=o.ownerDocument||o,o.head.insertBefore(p,c==="title"?o.querySelector("head > title"):null)}function I9(o,c,p){if(p===1||c.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return o=c.disabled,typeof c.precedence=="string"&&o==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function Bk(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var t1=null;function L9(){}function R9(o,c,p){if(t1===null)throw Error(r(475));var v=t1;if(c.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var k=r0(p.href),D=o.querySelector(Jm(k));if(D){o=D._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(v.count++,v=ey.bind(v),o.then(v,v)),c.state.loading|=4,c.instance=D,Jn(D);return}D=o.ownerDocument||o,p=Fk(p),(k=xl.get(k))&&h5(p,k),D=D.createElement("link"),Jn(D);var te=D;te._p=new Promise(function(me,Oe){te.onload=me,te.onerror=Oe}),fs(D,"link",p),c.instance=D}v.stylesheets===null&&(v.stylesheets=new Map),v.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(v.count++,c=ey.bind(v),o.addEventListener("load",c),o.addEventListener("error",c))}}function M9(){if(t1===null)throw Error(r(475));var o=t1;return o.stylesheets&&o.count===0&&m5(o,o.stylesheets),0<o.count?function(c){var p=setTimeout(function(){if(o.stylesheets&&m5(o,o.stylesheets),o.unsuspend){var v=o.unsuspend;o.unsuspend=null,v()}},6e4);return o.unsuspend=c,function(){o.unsuspend=null,clearTimeout(p)}}:null}function ey(){if(this.count--,this.count===0){if(this.stylesheets)m5(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var ty=null;function m5(o,c){o.stylesheets=null,o.unsuspend!==null&&(o.count++,ty=new Map,c.forEach(F9,o),ty=null,ey.call(o))}function F9(o,c){if(!(c.state.loading&4)){var p=ty.get(o);if(p)var v=p.get(null);else{p=new Map,ty.set(o,p);for(var k=o.querySelectorAll("link[data-precedence],style[data-precedence]"),D=0;D<k.length;D++){var te=k[D];(te.nodeName==="LINK"||te.getAttribute("media")!=="not all")&&(p.set(te.dataset.precedence,te),v=te)}v&&p.set(null,v)}k=c.instance,te=k.getAttribute("data-precedence"),D=p.get(te)||v,D===v&&p.set(null,k),p.set(te,k),this.count++,v=ey.bind(this),k.addEventListener("load",v),k.addEventListener("error",v),D?D.parentNode.insertBefore(k,D.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(k,o.firstChild)),c.state.loading|=4}}var n1={$$typeof:j,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function P9(o,c,p,v,k,D,te,me){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yr(0),this.hiddenUpdates=Yr(null),this.identifierPrefix=v,this.onUncaughtError=k,this.onCaughtError=D,this.onRecoverableError=te,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=me,this.incompleteTransitions=new Map}function $k(o,c,p,v,k,D,te,me,Oe,Je,mt,St){return o=new P9(o,c,p,te,me,Oe,Je,St),c=1,D===!0&&(c|=24),D=Wa(3,null,null,c),o.current=D,D.stateNode=o,c=km(),c.refCount++,o.pooledCache=c,c.refCount++,D.memoizedState={element:v,isDehydrated:p,cache:c},ze(D),o}function Uk(o){return o?(o=Ea,o):Ea}function Hk(o,c,p,v,k,D){k=Uk(k),v.context===null?v.context=k:v.pendingContext=k,v=pt(c),v.payload={element:p},D=D===void 0?null:D,D!==null&&(v.callback=D),p=xt(o,v,c),p!==null&&(Bo(p,o,c),gt(p,o,c))}function Wk(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var p=o.retryLane;o.retryLane=p!==0&&p<c?p:c}}function g5(o,c){Wk(o,c),(o=o.alternate)&&Wk(o,c)}function Vk(o){if(o.tag===13){var c=Yl(o,67108864);c!==null&&Bo(c,o,67108864),g5(o,67108864)}}var ny=!0;function z9(o,c,p,v){var k=W.T;W.T=null;var D=Q.p;try{Q.p=2,b5(o,c,p,v)}finally{Q.p=D,W.T=k}}function q9(o,c,p,v){var k=W.T;W.T=null;var D=Q.p;try{Q.p=8,b5(o,c,p,v)}finally{Q.p=D,W.T=k}}function b5(o,c,p,v){if(ny){var k=y5(v);if(k===null)i5(o,c,v,ry,p),Gk(o,v);else if($9(k,o,c,p,v))v.stopPropagation();else if(Gk(o,v),c&4&&-1<B9.indexOf(o)){for(;k!==null;){var D=Bi(k);if(D!==null)switch(D.tag){case 3:if(D=D.stateNode,D.current.memoizedState.isDehydrated){var te=Rt(D.pendingLanes);if(te!==0){var me=D;for(me.pendingLanes|=2,me.entangledLanes|=2;te;){var Oe=1<<31-De(te);me.entanglements[1]|=Oe,te&=~Oe}tc(D),(Tr&6)===0&&(qb=be()+500,Qm(0))}}break;case 13:me=Yl(D,2),me!==null&&Bo(me,D,2),$b(),g5(D,2)}if(D=y5(v),D===null&&i5(o,c,v,ry,p),D===k)break;k=D}k!==null&&v.stopPropagation()}else i5(o,c,v,null,p)}}function y5(o){return o=li(o),x5(o)}var ry=null;function x5(o){if(ry=null,o=qi(o),o!==null){var c=a(o);if(c===null)o=null;else{var p=c.tag;if(p===13){if(o=s(c),o!==null)return o;o=null}else if(p===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null)}}return ry=o,null}function Yk(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fe()){case ke:return 2;case Re:return 8;case qe:case je:return 32;case Ze:return 268435456;default:return 32}default:return 32}}var v5=!1,Sf=null,Af=null,Cf=null,r1=new Map,i1=new Map,kf=[],B9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Gk(o,c){switch(o){case"focusin":case"focusout":Sf=null;break;case"dragenter":case"dragleave":Af=null;break;case"mouseover":case"mouseout":Cf=null;break;case"pointerover":case"pointerout":r1.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":i1.delete(c.pointerId)}}function a1(o,c,p,v,k,D){return o===null||o.nativeEvent!==D?(o={blockedOn:c,domEventName:p,eventSystemFlags:v,nativeEvent:D,targetContainers:[k]},c!==null&&(c=Bi(c),c!==null&&Vk(c)),o):(o.eventSystemFlags|=v,c=o.targetContainers,k!==null&&c.indexOf(k)===-1&&c.push(k),o)}function $9(o,c,p,v,k){switch(c){case"focusin":return Sf=a1(Sf,o,c,p,v,k),!0;case"dragenter":return Af=a1(Af,o,c,p,v,k),!0;case"mouseover":return Cf=a1(Cf,o,c,p,v,k),!0;case"pointerover":var D=k.pointerId;return r1.set(D,a1(r1.get(D)||null,o,c,p,v,k)),!0;case"gotpointercapture":return D=k.pointerId,i1.set(D,a1(i1.get(D)||null,o,c,p,v,k)),!0}return!1}function Qk(o){var c=qi(o.target);if(c!==null){var p=a(c);if(p!==null){if(c=p.tag,c===13){if(c=s(p),c!==null){o.blockedOn=c,Sa(o.priority,function(){if(p.tag===13){var v=qo();v=wa(v);var k=Yl(p,v);k!==null&&Bo(k,p,v),g5(p,v)}});return}}else if(c===3&&p.stateNode.current.memoizedState.isDehydrated){o.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}o.blockedOn=null}function iy(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var p=y5(o.nativeEvent);if(p===null){p=o.nativeEvent;var v=new p.constructor(p.type,p);al=v,p.target.dispatchEvent(v),al=null}else return c=Bi(p),c!==null&&Vk(c),o.blockedOn=p,!1;c.shift()}return!0}function Kk(o,c,p){iy(o)&&p.delete(c)}function U9(){v5=!1,Sf!==null&&iy(Sf)&&(Sf=null),Af!==null&&iy(Af)&&(Af=null),Cf!==null&&iy(Cf)&&(Cf=null),r1.forEach(Kk),i1.forEach(Kk)}function ay(o,c){o.blockedOn===c&&(o.blockedOn=null,v5||(v5=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,U9)))}var sy=null;function Xk(o){sy!==o&&(sy=o,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){sy===o&&(sy=null);for(var c=0;c<o.length;c+=3){var p=o[c],v=o[c+1],k=o[c+2];if(typeof v!="function"){if(x5(v||p)===null)continue;break}var D=Bi(p);D!==null&&(o.splice(c,3),c-=3,gl(D,{pending:!0,data:k,method:p.method,action:v},v,k))}}))}function s1(o){function c(Oe){return ay(Oe,o)}Sf!==null&&ay(Sf,o),Af!==null&&ay(Af,o),Cf!==null&&ay(Cf,o),r1.forEach(c),i1.forEach(c);for(var p=0;p<kf.length;p++){var v=kf[p];v.blockedOn===o&&(v.blockedOn=null)}for(;0<kf.length&&(p=kf[0],p.blockedOn===null);)Qk(p),p.blockedOn===null&&kf.shift();if(p=(o.ownerDocument||o).$$reactFormReplay,p!=null)for(v=0;v<p.length;v+=3){var k=p[v],D=p[v+1],te=k[ar]||null;if(typeof D=="function")te||Xk(p);else if(te){var me=null;if(D&&D.hasAttribute("formAction")){if(k=D,te=D[ar]||null)me=te.formAction;else if(x5(k)!==null)continue}else me=te.action;typeof me=="function"?p[v+1]=me:(p.splice(v,3),v-=3),Xk(p)}}}function w5(o){this._internalRoot=o}oy.prototype.render=w5.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(r(409));var p=c.current,v=qo();Hk(p,v,o,c,null,null)},oy.prototype.unmount=w5.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;Hk(o.current,2,null,o,null,null),$b(),c[Rr]=null}};function oy(o){this._internalRoot=o}oy.prototype.unstable_scheduleHydration=function(o){if(o){var c=oi();o={blockedOn:null,target:o,priority:c};for(var p=0;p<kf.length&&c!==0&&c<kf[p].priority;p++);kf.splice(p,0,o),p===0&&Qk(o)}};var Zk=n.version;if(Zk!=="19.1.1")throw Error(r(527,Zk,"19.1.1"));Q.findDOMNode=function(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=u(c),o=o!==null?d(o):null,o=o===null?null:o.stateNode,o};var H9={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ly=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ly.isDisabled&&ly.supportsFiber)try{Pe=ly.inject(H9),ve=ly}catch{}}return o1.createRoot=function(o,c){if(!i(o))throw Error(r(299));var p=!1,v="",k=pC,D=mC,te=gC,me=null;return c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(k=c.onUncaughtError),c.onCaughtError!==void 0&&(D=c.onCaughtError),c.onRecoverableError!==void 0&&(te=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(me=c.unstable_transitionCallbacks)),c=$k(o,1,!1,null,null,p,v,k,D,te,me,null),o[Rr]=c.current,r5(o),new w5(c)},o1.hydrateRoot=function(o,c,p){if(!i(o))throw Error(r(299));var v=!1,k="",D=pC,te=mC,me=gC,Oe=null,Je=null;return p!=null&&(p.unstable_strictMode===!0&&(v=!0),p.identifierPrefix!==void 0&&(k=p.identifierPrefix),p.onUncaughtError!==void 0&&(D=p.onUncaughtError),p.onCaughtError!==void 0&&(te=p.onCaughtError),p.onRecoverableError!==void 0&&(me=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(Oe=p.unstable_transitionCallbacks),p.formState!==void 0&&(Je=p.formState)),c=$k(o,1,!0,c,p??null,v,k,D,te,me,Oe,Je),c.context=Uk(null),p=c.current,v=qo(),v=wa(v),k=pt(v),k.callback=null,xt(p,k,v),p=v,c.current.lanes=p,ir(c,p),tc(c),o[Rr]=c.current,r5(o),new oy(c)},o1.version="19.1.1",o1}var o8;function cR(){if(o8)return A5.exports;o8=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),A5.exports=uR(),A5.exports}var dR=cR();const fR=ns(dR);typeof window<"u"&&(window.styled_default=ip,window.styled=ip);typeof globalThis<"u"&&(globalThis.styled_default=ip,globalThis.styled=ip);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ag(){return ag=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ag.apply(this,arguments)}var Uh;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Uh||(Uh={}));const l8="popstate";function hR(e){e===void 0&&(e={});function n(r,i){let{pathname:a,search:s,hash:l}=r.location;return Kw("",{pathname:a,search:s,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:cT(i)}return mR(n,t,null,e)}function Bs(e,n){if(e===!1||e===null||typeof e>"u")throw new Error(n)}function uT(e,n){if(!e){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function pR(){return Math.random().toString(36).substr(2,8)}function u8(e,n){return{usr:e.state,key:e.key,idx:n}}function Kw(e,n,t,r){return t===void 0&&(t=null),ag({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof n=="string"?Lg(n):n,{state:t,key:n&&n.key||r||pR()})}function cT(e){let{pathname:n="/",search:t="",hash:r=""}=e;return t&&t!=="?"&&(n+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(n+=r.charAt(0)==="#"?r:"#"+r),n}function Lg(e){let n={};if(e){let t=e.indexOf("#");t>=0&&(n.hash=e.substr(t),e=e.substr(0,t));let r=e.indexOf("?");r>=0&&(n.search=e.substr(r),e=e.substr(0,r)),e&&(n.pathname=e)}return n}function mR(e,n,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,l=Uh.Pop,u=null,d=f();d==null&&(d=0,s.replaceState(ag({},s.state,{idx:d}),""));function f(){return(s.state||{idx:null}).idx}function m(){l=Uh.Pop;let A=f(),w=A==null?null:A-d;d=A,u&&u({action:l,location:y.location,delta:w})}function b(A,w){l=Uh.Push;let C=Kw(y.location,A,w);d=f()+1;let j=u8(C,d),F=y.createHref(C);try{s.pushState(j,"",F)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(F)}a&&u&&u({action:l,location:y.location,delta:1})}function g(A,w){l=Uh.Replace;let C=Kw(y.location,A,w);d=f();let j=u8(C,d),F=y.createHref(C);s.replaceState(j,"",F),a&&u&&u({action:l,location:y.location,delta:0})}function x(A){let w=i.location.origin!=="null"?i.location.origin:i.location.href,C=typeof A=="string"?A:cT(A);return C=C.replace(/ $/,"%20"),Bs(w,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,w)}let y={get action(){return l},get location(){return e(i,s)},listen(A){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(l8,m),u=A,()=>{i.removeEventListener(l8,m),u=null}},createHref(A){return n(i,A)},createURL:x,encodeLocation(A){let w=x(A);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:b,replace:g,go(A){return s.go(A)}};return y}var c8;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(c8||(c8={}));function gR(e,n,t){return t===void 0&&(t="/"),bR(e,n,t)}function bR(e,n,t,r){let i=typeof n=="string"?Lg(n):n,a=hT(i.pathname||"/",t);if(a==null)return null;let s=dT(e);yR(s);let l=null;for(let u=0;l==null&&u<s.length;++u){let d=TR(a);l=_R(s[u],d)}return l}function dT(e,n,t,r){n===void 0&&(n=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(a,s,l)=>{let u={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};u.relativePath.startsWith("/")&&(Bs(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Qh([r,u.relativePath]),f=t.concat(u);a.children&&a.children.length>0&&(Bs(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),dT(a.children,n,f,d)),!(a.path==null&&!a.index)&&n.push({path:d,score:kR(d,a.index),routesMeta:f})};return e.forEach((a,s)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,s);else for(let u of fT(a.path))i(a,s,u)}),n}function fT(e){let n=e.split("/");if(n.length===0)return[];let[t,...r]=n,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=fT(r.join("/")),l=[];return l.push(...s.map(u=>u===""?a:[a,u].join("/"))),i&&l.push(...s),l.map(u=>e.startsWith("/")&&u===""?"/":u)}function yR(e){e.sort((n,t)=>n.score!==t.score?t.score-n.score:ER(n.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const xR=/^:[\w-]+$/,vR=3,wR=2,SR=1,AR=10,CR=-2,d8=e=>e==="*";function kR(e,n){let t=e.split("/"),r=t.length;return t.some(d8)&&(r+=CR),n&&(r+=wR),t.filter(i=>!d8(i)).reduce((i,a)=>i+(xR.test(a)?vR:a===""?SR:AR),r)}function ER(e,n){return e.length===n.length&&e.slice(0,-1).every((r,i)=>r===n[i])?e[e.length-1]-n[n.length-1]:0}function _R(e,n,t){let{routesMeta:r}=e,i={},a="/",s=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,f=a==="/"?n:n.slice(a.length)||"/",m=NR({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),b=u.route;if(!m)return null;Object.assign(i,m.params),s.push({params:i,pathname:Qh([a,m.pathname]),pathnameBase:LR(Qh([a,m.pathnameBase])),route:b}),m.pathnameBase!=="/"&&(a=Qh([a,m.pathnameBase]))}return s}function NR(e,n){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[t,r]=jR(e.path,e.caseSensitive,e.end),i=n.match(t);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((d,f,m)=>{let{paramName:b,isOptional:g}=f;if(b==="*"){let y=l[m]||"";s=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const x=l[m];return g&&!x?d[b]=void 0:d[b]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:s,pattern:e}}function jR(e,n,t){n===void 0&&(n=!1),t===void 0&&(t=!0),uT(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,n?void 0:"i"),r]}function TR(e){try{return e.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return uT(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),e}}function hT(e,n){if(n==="/")return e;if(!e.toLowerCase().startsWith(n.toLowerCase()))return null;let t=n.endsWith("/")?n.length-1:n.length,r=e.charAt(t);return r&&r!=="/"?null:e.slice(t)||"/"}function OR(e,n){n===void 0&&(n="/");let{pathname:t,search:r="",hash:i=""}=typeof e=="string"?Lg(e):e;return{pathname:t?t.startsWith("/")?t:DR(t,n):n,search:RR(r),hash:MR(i)}}function DR(e,n){let t=n.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function E5(e,n,t,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function IR(e){return e.filter((n,t)=>t===0||n.route.path&&n.route.path.length>0)}function pT(e,n){let t=IR(e);return n?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function mT(e,n,t,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Lg(e):(i=ag({},e),Bs(!i.pathname||!i.pathname.includes("?"),E5("?","pathname","search",i)),Bs(!i.pathname||!i.pathname.includes("#"),E5("#","pathname","hash",i)),Bs(!i.search||!i.search.includes("#"),E5("#","search","hash",i)));let a=e===""||i.pathname==="",s=a?"/":i.pathname,l;if(s==null)l=t;else{let m=n.length-1;if(!r&&s.startsWith("..")){let b=s.split("/");for(;b[0]==="..";)b.shift(),m-=1;i.pathname=b.join("/")}l=m>=0?n[m]:"/"}let u=OR(i,l),d=s&&s!=="/"&&s.endsWith("/"),f=(a||s===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const Qh=e=>e.join("/").replace(/\/\/+/g,"/"),LR=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),RR=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,MR=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function FR(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const gT=["post","put","patch","delete"];new Set(gT);const PR=["get",...gT];new Set(PR);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wx(){return wx=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},wx.apply(this,arguments)}const R6=X.createContext(null),zR=X.createContext(null),Rg=X.createContext(null),M6=X.createContext(null),nh=X.createContext({outlet:null,matches:[],isDataRoute:!1}),bT=X.createContext(null);function Mg(){return X.useContext(M6)!=null}function Fg(){return Mg()||Bs(!1),X.useContext(M6).location}function yT(e){X.useContext(Rg).static||X.useLayoutEffect(e)}function ya(){let{isDataRoute:e}=X.useContext(nh);return e?ZR():qR()}function qR(){Mg()||Bs(!1);let e=X.useContext(R6),{basename:n,future:t,navigator:r}=X.useContext(Rg),{matches:i}=X.useContext(nh),{pathname:a}=Fg(),s=JSON.stringify(pT(i,t.v7_relativeSplatPath)),l=X.useRef(!1);return yT(()=>{l.current=!0}),X.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let m=mT(d,JSON.parse(s),a,f.relative==="path");e==null&&n!=="/"&&(m.pathname=m.pathname==="/"?n:Qh([n,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[n,r,s,a,e])}function F6(){let{matches:e}=X.useContext(nh),n=e[e.length-1];return n?n.params:{}}function BR(e,n){return $R(e)}function $R(e,n,t,r){Mg()||Bs(!1);let{navigator:i}=X.useContext(Rg),{matches:a}=X.useContext(nh),s=a[a.length-1],l=s?s.params:{};s&&s.pathname;let u=s?s.pathnameBase:"/";s&&s.route;let d=Fg(),f;f=d;let m=f.pathname||"/",b=m;if(u!=="/"){let y=u.replace(/^\//,"").split("/");b="/"+m.replace(/^\//,"").split("/").slice(y.length).join("/")}let g=gR(e,{pathname:b});return YR(g&&g.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:Qh([u,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?u:Qh([u,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),a,t,r)}function UR(){let e=XR(),n=FR(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),t=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return X.createElement(X.Fragment,null,X.createElement("h2",null,"Unexpected Application Error!"),X.createElement("h3",{style:{fontStyle:"italic"}},n),t?X.createElement("pre",{style:i},t):null,null)}const HR=X.createElement(UR,null);class WR extends X.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,t){return t.location!==n.location||t.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:t.error,location:t.location,revalidation:n.revalidation||t.revalidation}}componentDidCatch(n,t){console.error("React Router caught the following error during render",n,t)}render(){return this.state.error!==void 0?X.createElement(nh.Provider,{value:this.props.routeContext},X.createElement(bT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function VR(e){let{routeContext:n,match:t,children:r}=e,i=X.useContext(R6);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),X.createElement(nh.Provider,{value:n},r)}function YR(e,n,t,r){var i;if(n===void 0&&(n=[]),t===void 0&&(t=null),r===void 0&&(r=null),e==null){var a;if(!t)return null;if(t.errors)e=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&n.length===0&&!t.initialized&&t.matches.length>0)e=t.matches;else return null}let s=e,l=(i=t)==null?void 0:i.errors;if(l!=null){let f=s.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);f>=0||Bs(!1),s=s.slice(0,Math.min(s.length,f+1))}let u=!1,d=-1;if(t&&r&&r.v7_partialHydration)for(let f=0;f<s.length;f++){let m=s[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:b,errors:g}=t,x=m.route.loader&&b[m.route.id]===void 0&&(!g||g[m.route.id]===void 0);if(m.route.lazy||x){u=!0,d>=0?s=s.slice(0,d+1):s=[s[0]];break}}}return s.reduceRight((f,m,b)=>{let g,x=!1,y=null,A=null;t&&(g=l&&m.route.id?l[m.route.id]:void 0,y=m.route.errorElement||HR,u&&(d<0&&b===0?(JR("route-fallback"),x=!0,A=null):d===b&&(x=!0,A=m.route.hydrateFallbackElement||null)));let w=n.concat(s.slice(0,b+1)),C=()=>{let j;return g?j=y:x?j=A:m.route.Component?j=X.createElement(m.route.Component,null):m.route.element?j=m.route.element:j=f,X.createElement(VR,{match:m,routeContext:{outlet:f,matches:w,isDataRoute:t!=null},children:j})};return t&&(m.route.ErrorBoundary||m.route.errorElement||b===0)?X.createElement(WR,{location:t.location,revalidation:t.revalidation,component:y,error:g,children:C(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):C()},null)}var xT=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(xT||{}),vT=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(vT||{});function GR(e){let n=X.useContext(R6);return n||Bs(!1),n}function QR(e){let n=X.useContext(zR);return n||Bs(!1),n}function KR(e){let n=X.useContext(nh);return n||Bs(!1),n}function wT(e){let n=KR(),t=n.matches[n.matches.length-1];return t.route.id||Bs(!1),t.route.id}function XR(){var e;let n=X.useContext(bT),t=QR(),r=wT();return n!==void 0?n:(e=t.errors)==null?void 0:e[r]}function ZR(){let{router:e}=GR(xT.UseNavigateStable),n=wT(vT.UseNavigateStable),t=X.useRef(!1);return yT(()=>{t.current=!0}),X.useCallback(function(i,a){a===void 0&&(a={}),t.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,wx({fromRouteId:n},a)))},[e,n])}const f8={};function JR(e,n,t){f8[e]||(f8[e]=!0)}function eM(e,n){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function ST(e){let{to:n,replace:t,state:r,relative:i}=e;Mg()||Bs(!1);let{future:a,static:s}=X.useContext(Rg),{matches:l}=X.useContext(nh),{pathname:u}=Fg(),d=ya(),f=mT(n,pT(l,a.v7_relativeSplatPath),u,i==="path"),m=JSON.stringify(f);return X.useEffect(()=>d(JSON.parse(m),{replace:t,state:r,relative:i}),[d,m,i,t,r]),null}function tM(e){let{basename:n="/",children:t=null,location:r,navigationType:i=Uh.Pop,navigator:a,static:s=!1,future:l}=e;Mg()&&Bs(!1);let u=n.replace(/^\/*/,"/"),d=X.useMemo(()=>({basename:u,navigator:a,static:s,future:wx({v7_relativeSplatPath:!1},l)}),[u,l,a,s]);typeof r=="string"&&(r=Lg(r));let{pathname:f="/",search:m="",hash:b="",state:g=null,key:x="default"}=r,y=X.useMemo(()=>{let A=hT(f,u);return A==null?null:{location:{pathname:A,search:m,hash:b,state:g,key:x},navigationType:i}},[u,f,m,b,g,x,i]);return y==null?null:X.createElement(Rg.Provider,{value:d},X.createElement(M6.Provider,{children:t,value:y}))}new Promise(()=>{});/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xw(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((n,t)=>{let r=e[t];return n.concat(Array.isArray(r)?r.map(i=>[t,i]):[[t,r]])},[]))}function nM(e,n){let t=Xw(e);return n&&n.forEach((r,i)=>{t.has(i)||n.getAll(i).forEach(a=>{t.append(i,a)})}),t}const rM="6";try{window.__reactRouterVersion=rM}catch{}const iM="startTransition",h8=_6[iM];function aM(e){let{basename:n,children:t,future:r,window:i}=e,a=X.useRef();a.current==null&&(a.current=hR({window:i,v5Compat:!0}));let s=a.current,[l,u]=X.useState({action:s.action,location:s.location}),{v7_startTransition:d}=r||{},f=X.useCallback(m=>{d&&h8?h8(()=>u(m)):u(m)},[u,d]);return X.useLayoutEffect(()=>s.listen(f),[s,f]),X.useEffect(()=>eM(r),[r]),X.createElement(tM,{basename:n,children:t,location:l.location,navigationType:l.action,navigator:s,future:r})}var p8;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(p8||(p8={}));var m8;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(m8||(m8={}));function Pg(e){let n=X.useRef(Xw(e)),t=X.useRef(!1),r=Fg(),i=X.useMemo(()=>nM(r.search,t.current?null:n.current),[r.search]),a=ya(),s=X.useCallback((l,u)=>{const d=Xw(typeof l=="function"?l(i):l);t.current=!0,a("?"+d,u)},[a,i]);return[i,s]}const sM="modulepreload",oM=function(e){return"/"+e},g8={},wi=function(n,t,r){let i=Promise.resolve();if(t&&t.length>0){let s=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=s(t.map(d=>{if(d=oM(d),d in g8)return;g8[d]=!0;const f=d.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${m}`))return;const b=document.createElement("link");if(b.rel=f?"stylesheet":sM,f||(b.as="script"),b.crossOrigin="",b.href=d,u&&b.setAttribute("nonce",u),document.head.appendChild(b),f)return new Promise((g,x)=>{b.addEventListener("load",g),b.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(s){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s}return i.then(s=>{for(const l of s||[])l.status==="rejected"&&a(l.reason);return n().catch(a)})};var Ho=(e=>(e.NETWORK="NETWORK",e.AUTHENTICATION="AUTHENTICATION",e.AUTHORIZATION="AUTHORIZATION",e.VALIDATION="VALIDATION",e.NOT_FOUND="NOT_FOUND",e.SERVER_ERROR="SERVER_ERROR",e.UNKNOWN="UNKNOWN",e))(Ho||{});const b8={"auth/user-not-found":{type:"AUTHENTICATION",message:"No user found with this email address."},"auth/wrong-password":{type:"AUTHENTICATION",message:"Incorrect password. Please try again."},"auth/user-disabled":{type:"AUTHORIZATION",message:"This account has been disabled. Please contact support."},"auth/too-many-requests":{type:"NETWORK",message:"Too many failed attempts. Please try again later."},"auth/network-request-failed":{type:"NETWORK",message:"Network error. Please check your connection and try again."},"permission-denied":{type:"AUTHORIZATION",message:"You do not have permission for this action."},"not-found":{type:"NOT_FOUND",message:"The requested resource was not found."},unavailable:{type:"NETWORK",message:"Service is temporarily unavailable. Please try again."}},$h=class $h{constructor(){nt(this,"errorQueue",[]);nt(this,"maxErrorQueueSize",50)}static getInstance(){return $h.instance||($h.instance=new $h),$h.instance}handleError(n,t){const r=this.createAppError(n,t);return this.logError(r),this.queueError(r),r}createAppError(n,t){let r="UNKNOWN",i="An unexpected error occurred.";if(n!=null&&n.code&&b8[n.code]){const a=b8[n.code];r=a.type,i=a.message}else n!=null&&n.message&&(i=n.message,n.message.includes("network")||n.message.includes("fetch")?r="NETWORK":n.message.includes("unauthorized")||n.message.includes("permission")?r="AUTHORIZATION":n.message.includes("not found")?r="NOT_FOUND":n.message.includes("validation")&&(r="VALIDATION"));return{type:r,message:i,originalError:n instanceof Error?n:new Error(String(n)),context:{...t,userAgent:navigator.userAgent,url:window.location.href,timestamp:new Date().toISOString()},timestamp:new Date,userId:t==null?void 0:t.userId}}logError(n){const t=`[${n.type}] ${n.message}`,r={error:n.originalError,context:n.context,timestamp:n.timestamp};switch(n.type){case"NETWORK":case"NOT_FOUND":console.warn(t,r);break;case"AUTHENTICATION":case"AUTHORIZATION":case"VALIDATION":console.error(t,r);break;case"SERVER_ERROR":case"UNKNOWN":console.error(t,r);break}}queueError(n){this.errorQueue.push(n),this.errorQueue.length>this.maxErrorQueueSize&&this.errorQueue.shift()}getErrorQueue(){return[...this.errorQueue]}clearErrorQueue(){this.errorQueue=[]}getUserFriendlyMessage(n){return n.message}shouldRetry(n){return n.type==="NETWORK"}};nt($h,"instance");let sg=$h;const y8=async(e,n)=>{try{return{data:await e()}}catch(t){return{error:sg.getInstance().handleError(t,n)}}},hhe=()=>{const e=sg.getInstance();return{handleError:(i,a)=>e.handleError(i,a),getUserFriendlyMessage:i=>e.getUserFriendlyMessage(i),shouldRetry:i=>e.shouldRetry(i)}};sg.getInstance();class lM{constructor(){nt(this,"auth",null);nt(this,"googleProvider",null)}initialize(){this.auth||(wi(()=>Promise.resolve().then(()=>Kh),void 0),this.auth=U3(),this.googleProvider=new H3)}async signInWithGoogle(n=!0){var r;this.initialize();const t=await y8(async()=>{const i=n?V3:Y3;await G3(this.auth,i),this.googleProvider.setCustomParameters({});const a=await Q3(this.auth,this.googleProvider);if(!a.user)throw new Error("No user returned from authentication");return a.user},{operation:"google_sign_in",keepSignedIn:n});if(t.error){const i=(r=t.error.originalError)==null?void 0:r.code;throw console.error("Google Auth Error:",{code:i,message:t.error.message,originalError:t.error.originalError}),i==="auth/popup-closed-by-user"?new Error("Sign-in was cancelled. Please try again and complete the sign-in process. If you only have one Google account logged in, try logging out and back in to your Google account."):i==="auth/popup-blocked"?new Error("Popup was blocked by your browser. Please allow popups for this site and try again."):i==="auth/network-request-failed"?new Error("Network error. Please check your internet connection and try again."):i==="auth/account-exists-with-different-credential"?new Error("An account already exists with this email address. Please use a different sign-in method."):t.error}return t.data}async signOut(){this.initialize();const n=await y8(async()=>{await K3(this.auth)},{operation:"sign_out"});if(n.error)throw n.error}onAuthStateChanged(n){return this.initialize(),W3(this.auth,n)}getCurrentUser(){return this.initialize(),this.auth.currentUser}getErrorMessage(n){return{"auth/network-request-failed":"Login Failed: Network error, please check your connection.","auth/popup-closed-by-user":"Login Failed: The sign-in popup was closed before completion.","auth/cancelled-popup-request":"Login Failed: Another sign-in request was made before the first one was completed.","auth/popup-blocked":"Login Failed: The sign-in popup was blocked by the browser. Please allow popups for this site.","auth/user-disabled":"Login Failed: This account has been disabled.","auth/user-not-found":"Login Failed: No account found with this email.","auth/wrong-password":"Login Failed: Incorrect password.","auth/too-many-requests":"Login Failed: Too many failed attempts. Please try again later."}[n]||"Login Failed: An unexpected error occurred."}}const AT=new lM;class uM{constructor(){nt(this,"db",null);nt(this,"publicCourseId");if(this.publicCourseId="rqoyheM9Lf8jGftIoZyT",!this.publicCourseId)throw new Error("Public course ID is not defined in environment variables.")}initialize(){this.db||(wi(()=>Promise.resolve().then(()=>Kh),void 0),this.db=Xn())}async getUserDetails(n){this.initialize();try{const t=un(this.db,"users",n),r=await ga(t);return r.exists()?{...r.data(),uid:n}:null}catch(t){throw console.error("Error fetching user details:",t),new Error("Failed to fetch user details")}}async createUserDocument(n){this.initialize();try{const t=await this.getPublicCourseInfo(),r=un(this.db,"users",n.uid),i={isAdmin:!1,isSuperAdmin:!1,lastLogin:Bf(),classes:{[this.publicCourseId]:t}};return await oT(r,i),{uid:n.uid,isAdmin:!1,isSuperAdmin:!1,lastLogin:Bf(),classes:{[this.publicCourseId]:t}}}catch(t){throw console.error("Error creating user document:",t),new Error("Failed to create user document")}}async updateUserLogin(n){this.initialize();try{const t=un(this.db,"users",n);await Hr(t,{lastLogin:Bf()})}catch(t){throw console.error("Error updating user login:",t),new Error("Failed to update user login")}}async refreshUserDetails(n){return this.getUserDetails(n)}subscribeToUserDetails(n,t){this.initialize();const r=un(this.db,"users",n);return X3(r,i=>{if(i.exists()){const a=i.data();t({...a,uid:n})}else t(null)},i=>{console.error("Error in user details subscription:",i),t(null)})}async ensurePublicCourseAccess(n,t){this.initialize();try{if(t.classes&&t.classes[this.publicCourseId])return t;const r=await this.getPublicCourseInfo(),i=un(this.db,"users",n);return await Hr(i,{[`classes.${this.publicCourseId}`]:r}),{...t,classes:{...t.classes||{},[this.publicCourseId]:r}}}catch(r){throw console.error("Error ensuring public course access:",r),new Error("Failed to ensure public course access")}}async getPublicCourseInfo(){this.initialize();try{const n=un(this.db,"courses",this.publicCourseId),t=await ga(n);if(!t.exists())throw new Error("Public course document does not exist in the courses collection!");const r=t.data();if(!r||!r.number||!r.title)throw new Error("Public course data is incomplete or invalid.");return{number:r.number,title:r.title,isCourseAdmin:!1}}catch(n){throw console.error("Error fetching public course info:",n),new Error("Failed to fetch public course information")}}}const a0=new uM;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM="type.googleapis.com/google.protobuf.Int64Value",dM="type.googleapis.com/google.protobuf.UInt64Value";function CT(e,n){const t={};for(const r in e)e.hasOwnProperty(r)&&(t[r]=n(e[r]));return t}function Zw(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(n=>Zw(n));if(typeof e=="function"||typeof e=="object")return CT(e,n=>Zw(n));throw new Error("Data cannot be encoded in JSON: "+e)}function Sx(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case cM:case dM:{const n=Number(e.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+e);return n}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(n=>Sx(n)):typeof e=="function"||typeof e=="object"?CT(e,n=>Sx(n)):e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x8={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class D0 extends rR{constructor(n,t,r){super(`${P6}/${n}`,t||""),this.details=r}}function fM(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function hM(e,n){let t=fM(e),r=t,i;try{const a=n&&n.error;if(a){const s=a.status;if(typeof s=="string"){if(!x8[s])return new D0("internal","internal");t=x8[s],r=s}const l=a.message;typeof l=="string"&&(r=l),i=a.details,i!==void 0&&(i=Sx(i))}}catch{}return t==="ok"?null:new D0(t,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(n,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=n.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const n=await this.auth.getToken();return n==null?void 0:n.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(n){if(this.appCheck){const t=n?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(n){const t=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(n);return{authToken:t,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw="us-central1";function mM(e){let n=null;return{promise:new Promise((t,r)=>{n=setTimeout(()=>{r(new D0("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{n&&clearTimeout(n)}}}class gM{constructor(n,t,r,i,a=Jw,s){this.app=n,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new pM(t,r,i),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(a);this.customDomain=l.origin,this.region=Jw}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(n){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${n}`:this.customDomain!==null?`${this.customDomain}/${n}`:`https://${this.region}-${t}.cloudfunctions.net/${n}`}}function bM(e,n,t){e.emulatorOrigin=`http://${n}:${t}`}function yM(e,n,t){return r=>vM(e,n,r,{})}async function xM(e,n,t,r){t["Content-Type"]="application/json";let i;try{i=await r(e,{method:"POST",body:JSON.stringify(n),headers:t})}catch{return{status:0,json:null}}let a=null;try{a=await i.json()}catch{}return{status:i.status,json:a}}function vM(e,n,t,r){const i=e._url(n);return wM(e,i,t,r)}async function wM(e,n,t,r){t=Zw(t);const i={data:t},a={},s=await e.contextProvider.getContext(r.limitedUseAppCheckTokens);s.authToken&&(a.Authorization="Bearer "+s.authToken),s.messagingToken&&(a["Firebase-Instance-ID-Token"]=s.messagingToken),s.appCheckToken!==null&&(a["X-Firebase-AppCheck"]=s.appCheckToken);const l=r.timeout||7e4,u=mM(l),d=await Promise.race([xM(n,i,a,e.fetchImpl),u.promise,e.cancelAllRequests]);if(u.cancel(),!d)throw new D0("cancelled","Firebase Functions instance was deleted.");const f=hM(d.status,d.json);if(f)throw f;if(!d.json)throw new D0("internal","Response is not valid JSON object.");let m=d.json.data;if(typeof m>"u"&&(m=d.json.result),typeof m>"u")throw new D0("internal","Response is missing data field.");return{data:Sx(m)}}const v8="@firebase/functions",w8="0.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM="auth-internal",AM="app-check-internal",CM="messaging-internal";function kM(e,n){const t=(r,{instanceIdentifier:i})=>{const a=r.getProvider("app").getImmediate(),s=r.getProvider(SM),l=r.getProvider(CM),u=r.getProvider(AM);return new gM(a,s,l,u,i,e)};tR(new nR(P6,t,"PUBLIC").setMultipleInstances(!0)),r8(v8,w8,n),r8(v8,w8,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EM(e=Z3(),n=Jw){const r=J3(L6(e),P6).getImmediate({identifier:n}),i=eR("functions");return i&&_M(r,...i),r}function _M(e,n,t){bM(L6(e),n,t)}function kT(e,n,t){return yM(L6(e),n)}kM(fetch.bind(self));const NM={apiKey:"AIzaSyD3b8ezNVNI376HM1OsVumOLuyMJP2AG7w",authDomain:"nexlab-prod.firebaseapp.com",projectId:"nexlab-prod",storageBucket:"nexlab-prod.firebasestorage.app",messagingSenderId:"922352392986",appId:"1:922352392986:web:6c4d6e16b5e615bd4daaa3"},lv=iR(NM),ET=Xn(lv),jM=mp(lv),z6=EM(lv),Kh=Object.freeze(Object.defineProperty({__proto__:null,app:lv,db:ET,functions:z6,storage:jM},Symbol.toStringTag,{value:"Module"})),_T=X.createContext(void 0),TM=({children:e})=>{const[n,t]=X.useState(null),[r,i]=X.useState(null),[a,s]=X.useState(!1),[l,u]=X.useState(!0),[d,f]=X.useState(null),m=X.useRef(null);X.useEffect(()=>{const g=AT.onAuthStateChanged(async x=>{u(!0),f(null),m.current&&(m.current(),m.current=null);try{if(x){console.log("User is signed in with UID:",x.uid);let y=await a0.getUserDetails(x.uid);y?(await a0.updateUserLogin(x.uid),y=await a0.ensurePublicCourseAccess(x.uid,y)):(console.log("User document does not exist. Creating a new one..."),y=await a0.createUserDocument(x)),i(y),s(y.isSuperAdmin||!1);const A=a0.subscribeToUserDetails(x.uid,w=>{console.log("[UserContext] User details updated in real-time:",{uid:w==null?void 0:w.uid,classesCount:w!=null&&w.classes?Object.keys(w.classes).length:0,classes:w!=null&&w.classes?Object.keys(w.classes):[],timestamp:new Date().toISOString()}),w&&(i(w),s(w.isSuperAdmin||!1))});m.current=A}else i(null),s(!1);t(x)}catch(y){console.error("Error managing user authentication:",y),f(y instanceof Error?y:new Error("Failed to manage user authentication")),t(null),i(null),s(!1)}finally{u(!1)}});return()=>{g(),m.current&&(m.current(),m.current=null)}},[]);const b=async()=>{if(!n){console.warn("No user signed in, cannot refresh user details");return}try{const g=await a0.refreshUserDetails(n.uid);g?(i(g),s(g.isSuperAdmin||!1)):(console.error("User document does not exist. Unable to refresh user details."),f(new Error("User document not found")))}catch(g){console.error("Error refreshing user details:",g),f(g instanceof Error?g:new Error("Failed to refresh user details"))}};return h.jsx(_T.Provider,{value:{user:n,userDetails:r,setUserDetails:i,refreshUserDetails:b,loading:l,error:d,isSuperAdmin:a},children:e})},zi=()=>{const e=X.useContext(_T);if(e===void 0)throw new Error("useUser must be used within a UserProvider");return e},Qa=({element:e})=>{const{userDetails:n,loading:t}=zi();return t?h.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:h.jsx(Zr,{})}):n?h.jsx(e,{}):h.jsx(ST,{to:"/"})};let uv=class extends X.Component{constructor(){super(...arguments);nt(this,"state",{hasError:!1})}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("ErrorBoundary caught an error:",t,r)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:h.jsx(de,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"50vh",p:4},children:h.jsxs(gn,{elevation:2,sx:{p:4,textAlign:"center",maxWidth:500,width:"100%"},children:[h.jsx(he,{variant:"h5",color:"error",gutterBottom:!0,children:"Something went wrong"}),h.jsx(he,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"An error occurred while loading this component. Please try refreshing the page."}),h.jsx(Ct,{variant:"contained",startIcon:h.jsx($j,{}),onClick:()=>window.location.reload(),children:"Refresh Page"})]})}):this.props.children}};var l1={},_5={};const OM=$3(G9);var S8;function qd(){return S8||(S8=1,function(e){"use client";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.createSvgIcon}});var n=OM}(_5)),_5}var A8;function DM(){if(A8)return l1;A8=1;var e=Pd();Object.defineProperty(l1,"__esModule",{value:!0}),l1.default=void 0;var n=e(qd()),t=zd();return l1.default=(0,n.default)((0,t.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"ErrorOutline"),l1}var IM=DM();const LM=ns(IM);var u1={},C8;function RM(){if(C8)return u1;C8=1;var e=Pd();Object.defineProperty(u1,"__esModule",{value:!0}),u1.default=void 0;var n=e(qd()),t=zd();return u1.default=(0,n.default)((0,t.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home"),u1}var MM=RM();const FM=ns(MM);var c1={},k8;function PM(){if(k8)return c1;k8=1;var e=Pd();Object.defineProperty(c1,"__esModule",{value:!0}),c1.default=void 0;var n=e(qd()),t=zd();return c1.default=(0,n.default)((0,t.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack"),c1}var zM=PM();const NT=ns(zM),qM=()=>{const e=ya();return h.jsxs(gn,{elevation:3,sx:{p:4,m:4,textAlign:"center",backgroundColor:"#fafafa",border:"1px solid #e0e0e0",maxWidth:600,mx:"auto",mt:8},children:[h.jsx(LM,{color:"error",sx:{fontSize:64,mb:2}}),h.jsx(he,{variant:"h4",gutterBottom:!0,color:"error",children:"Page Error"}),h.jsx(he,{variant:"body1",sx:{mb:4,color:"text.secondary"},children:"This page encountered an error and cannot be displayed. You can try going back to the previous page or return to the home page."}),h.jsxs(de,{sx:{display:"flex",gap:2,justifyContent:"center",flexWrap:"wrap"},children:[h.jsx(Ct,{variant:"contained",color:"primary",startIcon:h.jsx(FM,{}),onClick:()=>e("/"),children:"Go to Home"}),h.jsx(Ct,{variant:"outlined",color:"primary",startIcon:h.jsx(NT,{}),onClick:()=>e(-1),children:"Go Back"}),h.jsx(Ct,{variant:"outlined",color:"secondary",onClick:()=>window.location.reload(),children:"Refresh Page"})]})]})},jT=({children:e,showDetails:n})=>h.jsx(uv,{fallback:h.jsx(qM,{}),children:e}),K={primary:{50:"#F0F4FF",100:"#E0ECFF",200:"#CDDAFF",300:"#9BB5FF",400:"#6B8FFF",500:"#0B53C0",600:"#0841A0",700:"#062F80"},secondary:{50:"#F0FDF4",100:"#DCFCE7",200:"#BBF7D0",300:"#86EFAC",500:"#22C55E",600:"#16A34A",700:"#15803D"},neutral:{50:"#FAFAFA",100:"#F5F5F5",200:"#E5E5E5",300:"#D4D4D4",400:"#A3A3A3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717"},success:"#22C55E",warning:"#F59E0B",error:"#EF4444",info:"#3B82F6",background:{primary:"#FFFFFF",secondary:"#F8FAFC",tertiary:"#F1F5F9",elevated:"#FFFFFF"},surface:{primary:"#FFFFFF",elevated:"#FFFFFF"},text:{primary:"#0F172A",secondary:"#475569",tertiary:"#64748B",disabled:"#94A3B8",inverse:"#FFFFFF"}},we={fontFamily:{primary:["Inter","system-ui","sans-serif"].join(","),secondary:["Gabarito","system-ui","sans-serif"].join(","),display:["Staatliches","system-ui","sans-serif"].join(",")},fontSize:{xs:"0.75rem",sm:"0.875rem",base:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem"},fontWeight:{light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},lineHeight:{tight:1.25,snug:1.375,normal:1.5,relaxed:1.625}},$e={1:"0.25rem",2:"0.5rem",3:"0.75rem",4:"1rem",5:"1.25rem",6:"1.5rem",8:"2rem",12:"3rem"},kt={sm:"0.125rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem",full:"9999px"},Ft={sm:"0 1px 2px 0 rgb(0 0 0 / 0.05)",base:"0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)",md:"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)",lg:"0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)",xl:"0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1)","2xl":"0 25px 50px -12px rgb(0 0 0 / 0.25)"},xc={transitions:{fast:"all 150ms cubic-bezier(0.4, 0, 0.2, 1)",normal:"all 300ms cubic-bezier(0.4, 0, 0.2, 1)"}},BM={width:"320px",minWidth:"320px",maxWidth:"320px",backgroundColor:K.background.secondary,borderRight:`1px solid ${K.neutral[200]}`},TT=()=>({palette:{primary:{main:K.primary[500],light:K.primary[300],dark:K.primary[700],contrastText:K.text.inverse},secondary:{main:K.secondary[500],light:K.secondary[300],dark:K.secondary[700],contrastText:K.text.inverse},error:{main:K.error,light:"#FEE2E2",dark:"#DC2626"},warning:{main:K.warning,light:"#FEF3C7",dark:"#D97706"},info:{main:K.info,light:"#DBEAFE",dark:"#2563EB"},success:{main:K.success,light:"#D1FAE5",dark:"#059669"},background:{default:K.background.primary,paper:K.surface.primary},text:{primary:K.text.primary,secondary:K.text.secondary,disabled:K.text.disabled},grey:{50:K.neutral[50],100:K.neutral[100],200:K.neutral[200],300:K.neutral[300],400:K.neutral[400],500:K.neutral[500],600:K.neutral[600],700:K.neutral[700],800:K.neutral[800],900:K.neutral[900]}},typography:{fontFamily:we.fontFamily.primary,h1:{fontFamily:we.fontFamily.display,fontSize:we.fontSize["5xl"],fontWeight:we.fontWeight.bold,lineHeight:we.lineHeight.tight,color:K.text.primary},h2:{fontFamily:we.fontFamily.display,fontSize:we.fontSize["4xl"],fontWeight:we.fontWeight.bold,lineHeight:we.lineHeight.tight,color:K.text.primary},h3:{fontFamily:we.fontFamily.display,fontSize:we.fontSize["3xl"],fontWeight:we.fontWeight.bold,lineHeight:we.lineHeight.snug,color:K.text.primary},h4:{fontFamily:we.fontFamily.display,fontSize:we.fontSize["2xl"],fontWeight:we.fontWeight.semibold,lineHeight:we.lineHeight.snug,color:K.text.primary},h5:{fontFamily:we.fontFamily.secondary,fontSize:we.fontSize.xl,fontWeight:we.fontWeight.semibold,lineHeight:we.lineHeight.normal,color:K.text.primary},h6:{fontFamily:we.fontFamily.secondary,fontSize:we.fontSize.lg,fontWeight:we.fontWeight.semibold,lineHeight:we.lineHeight.normal,color:K.text.primary},body1:{fontFamily:we.fontFamily.primary,fontSize:we.fontSize.base,fontWeight:we.fontWeight.normal,lineHeight:we.lineHeight.normal,color:K.text.primary},body2:{fontFamily:we.fontFamily.primary,fontSize:we.fontSize.sm,fontWeight:we.fontWeight.normal,lineHeight:we.lineHeight.normal,color:K.text.secondary},button:{fontFamily:we.fontFamily.secondary,fontSize:we.fontSize.base,fontWeight:we.fontWeight.semibold,textTransform:"none"}},shape:{borderRadius:12},shadows:["none",Ft.sm,Ft.base,Ft.md,Ft.lg,Ft.xl,Ft["2xl"],Ft["2xl"],Ft["2xl"],Ft["2xl"],Ft["2xl"],Ft["2xl"],Ft["2xl"],Ft["2xl"],Ft["2xl"],Ft["2xl"],Ft["2xl"],Ft["2xl"],Ft["2xl"],Ft["2xl"],Ft["2xl"],Ft["2xl"],Ft["2xl"],Ft["2xl"],Ft["2xl"]],components:{MuiButton:{styleOverrides:{root:{borderRadius:kt.xl,padding:`${$e[3]} ${$e[6]}`,fontWeight:we.fontWeight.semibold,textTransform:"none",transition:xc.transitions.fast,boxShadow:"none","&:hover":{boxShadow:Ft.md,transform:"none !important"}},contained:{backgroundColor:K.primary[500],"&:hover":{backgroundColor:K.primary[600]}},outlined:{borderColor:K.primary[500],color:K.primary[500],"&:hover":{backgroundColor:K.primary[50],borderColor:K.primary[600]}}}},MuiCard:{styleOverrides:{root:{borderRadius:kt.lg,boxShadow:Ft.md,border:`1px solid ${K.neutral[200]}`,transition:xc.transitions.fast,"&:hover":{boxShadow:Ft.lg,transform:"translateY(-2px)"}}}},MuiTextField:{styleOverrides:{root:{"& .MuiOutlinedInput-root":{borderRadius:kt.lg,"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:K.primary[300]},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:K.primary[500],borderWidth:2}}}}},MuiChip:{styleOverrides:{root:{borderRadius:kt.full,fontWeight:we.fontWeight.medium}}},MuiTabs:{styleOverrides:{root:{backgroundColor:K.background.secondary,borderRadius:kt.lg,padding:$e[2],"& .MuiTabs-indicator":{display:"none"}}}},MuiTab:{styleOverrides:{root:{borderRadius:kt.lg,fontWeight:we.fontWeight.semibold,textTransform:"none",transition:xc.transitions.fast,"&.Mui-selected":{backgroundColor:K.primary[500],color:K.text.inverse,boxShadow:Ft.sm},"&:not(.Mui-selected)":{backgroundColor:K.primary[100],color:K.primary[700],"&:hover":{backgroundColor:K.primary[200],transform:"none"}}}}}}}),$M=TT(),ht=Uj($M);var d1={},E8;function UM(){if(E8)return d1;E8=1;var e=Pd();Object.defineProperty(d1,"__esModule",{value:!0}),d1.default=void 0;var n=e(qd()),t=zd();return d1.default=(0,n.default)((0,t.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),d1}var HM=UM();const WM=ns(HM),_8=e=>{let n;const t=new Set,r=(d,f)=>{const m=typeof d=="function"?d(n):d;if(!Object.is(m,n)){const b=n;n=f??(typeof m!="object"||m===null)?m:Object.assign({},n,m),t.forEach(g=>g(n,b))}},i=()=>n,l={setState:r,getState:i,getInitialState:()=>u,subscribe:d=>(t.add(d),()=>t.delete(d))},u=n=e(r,i,l);return l},VM=e=>e?_8(e):_8,YM=e=>e;function GM(e,n=YM){const t=st.useSyncExternalStore(e.subscribe,()=>n(e.getState()),()=>n(e.getInitialState()));return st.useDebugValue(t),t}const N8=e=>{const n=VM(e),t=r=>GM(n,r);return Object.assign(t,n),t},gp=e=>e?N8(e):N8,QM=()=>Math.random().toString(36).substr(2,9),KM=e=>{switch(e){case Ho.NETWORK:return"";case Ho.AUTHENTICATION:return"";case Ho.AUTHORIZATION:return"";case Ho.VALIDATION:return"";case Ho.NOT_FOUND:return"";case Ho.SERVER_ERROR:return"";default:return""}},XM=e=>{switch(e){case Ho.NETWORK:return 8e3;case Ho.AUTHENTICATION:case Ho.AUTHORIZATION:return 1e4;case Ho.VALIDATION:return 6e3;case Ho.NOT_FOUND:return 5e3;default:return 7e3}},ZM=gp((e,n)=>({notifications:[],addNotification:t=>{const r={...t,id:QM(),timestamp:new Date,duration:t.duration??5e3};e(i=>({notifications:[...i.notifications,r]})),r.duration>0&&setTimeout(()=>{n().removeNotification(r.id)},r.duration)},removeNotification:t=>{e(r=>({notifications:r.notifications.filter(i=>i.id!==t)}))},clearAll:()=>{e({notifications:[]})},showError:(t,r)=>{const i=KM(t.type),a=XM(t.type),s=[];t.type===Ho.NETWORK&&s.push({label:"Retry",action:()=>{console.log("Retry requested for:",t)},primary:!0}),n().addNotification({type:"error",title:`${i} ${t.type.replace("_"," ")} Error`,message:t.message,duration:a,actions:r||s,error:t})},showSuccess:(t,r)=>{n().addNotification({type:"success",title:r||" Success",message:t,duration:4e3})},showWarning:(t,r)=>{n().addNotification({type:"warning",title:r||" Warning",message:t,duration:6e3})},showInfo:(t,r)=>{n().addNotification({type:"info",title:r||" Info",message:t,duration:5e3})}})),JM=()=>{const{notifications:e,removeNotification:n}=ZM();return e.length===0?null:h.jsx(de,{sx:{position:"fixed",top:16,right:16,zIndex:9999,maxWidth:400,display:"flex",flexDirection:"column",gap:1},children:e.map(t=>h.jsx(gx,{in:!0,timeout:300,children:h.jsx(gn,{elevation:6,children:h.jsxs(rr,{severity:t.type,sx:{width:"100%","& .MuiAlert-action":{alignItems:"flex-start",padding:"4px 0 0 16px"}},action:h.jsx(_n,{size:"small",onClick:()=>n(t.id),sx:{color:"inherit"},children:h.jsx(WM,{fontSize:"small"})}),children:[t.title&&h.jsx(Q9,{sx:{fontWeight:"bold",mb:.5},children:t.title}),t.message,t.actions&&t.actions.length>0&&h.jsx(de,{sx:{mt:1.5,display:"flex",gap:1,flexWrap:"wrap"},children:t.actions.map((r,i)=>h.jsx(Ct,{size:"small",variant:r.primary?"contained":"outlined",color:t.type==="error"?"error":"primary",onClick:()=>{r.action(),n(t.id)},sx:{minWidth:"auto",fontSize:"0.75rem",padding:"2px 8px"},children:r.label},i))})]})})},t.id))})},eF=({message:e})=>h.jsx(de,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",py:$e[12],color:K.text.secondary},children:h.jsx(he,{variant:"body1",sx:{fontStyle:"italic",textAlign:"center",fontFamily:"Gabarito, sans-serif"},children:e})}),tF=()=>h.jsx(de,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:$e[12]},children:h.jsx(Zr,{size:40})});function rh({data:e,columns:n,loading:t=!1,emptyMessage:r="No data available",onRowClick:i,stickyHeader:a=!1,maxHeight:s,headerColor:l=K.primary[500],headerTextColor:u=K.text.inverse,rowHeight:d="72px",showRowNumbers:f=!1,className:m}){const b=n.length+(f?1:0);return h.jsx(tv,{component:gn,className:m,sx:{borderRadius:kt["2xl"],boxShadow:Ft.lg,border:`1px solid ${K.neutral[200]}`,overflow:"hidden",maxHeight:s},children:h.jsxs(nv,{stickyHeader:a,sx:{"& .MuiTableCell-root":{fontSize:we.fontSize.base,fontFamily:we.fontFamily.primary,borderBottom:`1px solid ${K.neutral[200]}`},"& .MuiTableCell-head":{fontSize:we.fontSize.lg,fontFamily:we.fontFamily.display,fontWeight:we.fontWeight.semibold,backgroundColor:l,color:u,textTransform:"uppercase",letterSpacing:"0.5px"},"& .MuiTableRow-root:hover":{backgroundColor:K.primary[25],cursor:i?"pointer":"default"}},children:[h.jsx(rv,{children:h.jsxs(bc,{sx:{height:"64px"},children:[f&&h.jsx(En,{sx:{width:"60px",textAlign:"center"},children:"#"}),n.map(g=>h.jsx(En,{sx:{width:g.width,textAlign:g.align||"left"},children:g.label},String(g.id)))]})}),h.jsx(iv,{children:t?h.jsx(bc,{children:h.jsx(En,{colSpan:b,sx:{border:"none",p:0},children:h.jsx(tF,{})})}):e.length===0?h.jsx(bc,{children:h.jsx(En,{colSpan:b,sx:{border:"none",p:0},children:h.jsx(eF,{message:r})})}):e.map((g,x)=>h.jsxs(bc,{onClick:()=>i==null?void 0:i(g,x),sx:{height:d,transition:xc.transitions.fast,"&:hover":{backgroundColor:K.primary[25],transform:"translateY(-1px)",boxShadow:Ft.sm}},children:[f&&h.jsx(En,{sx:{textAlign:"center"},children:h.jsx(he,{variant:"body2",sx:{fontWeight:we.fontWeight.semibold,color:K.text.secondary},children:x+1})}),n.map(y=>{const A=g[y.id];return h.jsx(En,{sx:{textAlign:y.align||"left"},children:y.render?y.render(A,g,x):A},String(y.id))})]},x))})]})})}const So=({title:e,subtitle:n})=>{const t=pp(),r=jd(t.breakpoints.down("md"));return h.jsxs(de,{sx:{p:r?$e[4]:$e[6],backgroundColor:K.primary[100],borderRadius:kt["2xl"],mb:$e[6],border:`1px solid ${K.primary[200]}`,boxShadow:Ft.sm},children:[h.jsx(he,{variant:"h2",sx:{fontFamily:we.fontFamily.display,fontSize:r?we.fontSize["3xl"]:we.fontSize["5xl"],fontWeight:we.fontWeight.bold,color:K.primary[700],lineHeight:we.lineHeight.tight,mb:n?$e[2]:0},children:e}),n&&h.jsx(he,{variant:"body1",sx:{fontFamily:we.fontFamily.primary,fontSize:r?we.fontSize.base:we.fontSize.lg,color:K.text.secondary,lineHeight:we.lineHeight.relaxed},children:n})]})},ih=({userId:e,userType:n="student",maxLength:t=999})=>{const[r,i]=X.useState(!1),a=async d=>{d.stopPropagation();try{await navigator.clipboard.writeText(e),i(!0),setTimeout(()=>i(!1),2e3)}catch(f){console.error("Failed to copy:",f)}},s=()=>{switch(n){case"superAdmin":return{backgroundColor:K.secondary[100],color:K.secondary[700],borderColor:K.secondary[300],hoverColor:K.secondary[200]};case"educator":return{backgroundColor:K.primary[100],color:K.primary[700],borderColor:K.primary[300],hoverColor:K.primary[200]};default:return{backgroundColor:K.neutral[100],color:K.neutral[700],borderColor:K.neutral[300],hoverColor:K.neutral[200]}}},l=e.length>t?`${e.substring(0,t)}...`:e,u=s();return h.jsx(fi,{title:r?"Copied!":"Click to Copy",children:h.jsx(de,{onClick:a,sx:{display:"inline-flex",alignItems:"center",backgroundColor:u.backgroundColor,color:u.color,border:`1px solid ${u.borderColor}`,borderRadius:kt.full,padding:`${$e[2]} ${$e[3]}`,fontSize:we.fontSize.sm,fontWeight:we.fontWeight.medium,fontFamily:"monospace",cursor:"pointer",transition:"all 0.2s ease",maxWidth:"100%","&:hover":{backgroundColor:u.hoverColor,transform:"translateY(-1px)",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},"&:active":{transform:"translateY(0)"}},children:h.jsx(he,{variant:"body2",sx:{fontFamily:"monospace",fontSize:"inherit",color:"inherit",fontWeight:"inherit",userSelect:"none"},title:e,children:l})})})},bp=({courseId:e,courseNumber:n,courseTitle:t,variant:r="link",isAdmin:i=!1,showNumber:a=!0,showTitle:s=!0,maxTitleLength:l=50,onClick:u})=>{const d=ya(),f=g=>{if(g.preventDefault(),g.stopPropagation(),u)u();else{const x=window.location.hostname==="nexlab.bio",A=`${x?"https://nexlab.bio":""}/supplemental-materials?course=${e}`;x?window.open(A,"_blank"):d(`/supplemental-materials?course=${e}`)}},m=t.length>l?`${t.substring(0,l)}...`:t,b=()=>i?{backgroundColor:K.primary[100],color:K.primary[700],"&:hover":{backgroundColor:K.primary[200]}}:{backgroundColor:K.neutral[200],color:K.neutral[700],"&:hover":{backgroundColor:K.neutral[300]}};if(r==="chip"){const g=a&&s?`${n} - ${m}`:a?n:s?m:"";return h.jsx(cr,{label:g,size:"small",clickable:!0,onClick:f,sx:{...b(),fontFamily:we.fontFamily.secondary,fontWeight:we.fontWeight.medium,fontSize:we.fontSize.sm,cursor:"pointer",transition:"all 0.2s ease",maxWidth:"100%"},title:`${n} - ${t}`})}return r==="text"?h.jsxs(de,{sx:{display:"flex",flexDirection:"column",gap:$e[1]},children:[a&&h.jsx(he,{variant:"body2",sx:{fontWeight:we.fontWeight.semibold,color:K.text.primary,fontSize:we.fontSize.sm},children:n}),s&&h.jsx(Og,{component:"button",variant:"body2",onClick:f,sx:{color:K.primary[600],textDecoration:"none",fontSize:we.fontSize.sm,fontWeight:we.fontWeight.medium,textAlign:"left",cursor:"pointer","&:hover":{textDecoration:"underline",color:K.primary[700]}},title:t,children:m})]}):h.jsx(de,{onClick:f,sx:{display:"inline-flex",alignItems:"center",backgroundColor:K.primary[50],border:`1px solid ${K.primary[200]}`,borderRadius:kt.lg,padding:`${$e[2]} ${$e[3]}`,cursor:"pointer",transition:"all 0.2s ease",maxWidth:"100%","&:hover":{backgroundColor:K.primary[100],borderColor:K.primary[300],transform:"translateY(-1px)",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},"&:active":{transform:"translateY(0)"}},title:`${n} - ${t}`,children:h.jsx(he,{variant:"body1",sx:{fontFamily:we.fontFamily.secondary,fontSize:we.fontSize.base,fontWeight:we.fontWeight.semibold,color:K.primary[700],textDecoration:"none",userSelect:"none","&:hover":{textDecoration:"underline"}},children:a&&s?`${n} - ${m}`:a?n:s?m:""})})},cm=({value:e,onChange:n,courses:t,label:r="Course",placeholder:i,helperText:a,error:s=!1,disabled:l=!1,loading:u=!1,required:d=!1,showNumber:f=!0,showTitle:m=!0,showAdminBadge:b=!0,maxTitleLength:g=50,fullWidth:x=!0,variant:y="outlined",size:A="medium","aria-label":w,"data-testid":C})=>{const j=M=>{n(M.target.value)},F=()=>t.find(M=>M.id===e);return F(),h.jsxs(Td,{fullWidth:x,error:s,disabled:l,required:d,variant:y,size:A,sx:{"& .MuiOutlinedInput-root":{borderRadius:kt.lg,backgroundColor:K.surface.primary,border:`2px solid ${K.neutral[300]}`,minHeight:A==="small"?"48px":"56px","&:hover":{backgroundColor:K.surface.primary,borderColor:K.neutral[300]},"&.Mui-focused":{backgroundColor:K.surface.primary,borderColor:K.primary[500],borderWidth:"2px"},"&.Mui-error":{borderColor:K.error},"& .MuiSelect-select":{padding:A==="small"?"12px 14px":"16px 14px",boxSizing:"border-box",fontFamily:we.fontFamily.primary,fontSize:we.fontSize.base,color:K.text.primary}},"& .MuiOutlinedInput-notchedOutline":{border:"none"},"& .MuiInputLabel-root":{fontFamily:we.fontFamily.secondary,fontSize:we.fontSize.base,fontWeight:we.fontWeight.medium,color:K.text.secondary,transform:"none",position:"static",marginBottom:$e[1],"&.Mui-focused":{color:K.primary[600]},"&.Mui-error":{color:K.error}},"& .MuiFormHelperText-root":{fontFamily:we.fontFamily.secondary,fontSize:we.fontSize.sm,color:s?K.error:K.text.secondary,marginTop:$e[1],marginBottom:0}},children:[r&&h.jsx(ap,{id:`course-selector-label-${Math.random().toString(36).substr(2,9)}`,"aria-label":w,children:r}),h.jsx(Dc,{labelId:r?`course-selector-label-${Math.random().toString(36).substr(2,9)}`:void 0,value:e,onChange:j,label:r||void 0,displayEmpty:!e||e==="",renderValue:M=>{const z=F();return z?h.jsx(de,{sx:{display:"flex",alignItems:"center",gap:$e[2]},children:h.jsxs(de,{sx:{backgroundColor:K.primary[50],border:`1px solid ${K.primary[200]}`,borderRadius:kt.lg,padding:`${$e[2]} ${$e[3]}`,display:"inline-flex",alignItems:"center",gap:$e[1],width:"fit-content",maxWidth:"100%"},children:[f&&h.jsx(he,{sx:{fontFamily:we.fontFamily.secondary,fontSize:we.fontSize.sm,fontWeight:we.fontWeight.semibold,color:K.primary[700],flexShrink:0},children:z.number}),f&&m&&h.jsx(he,{sx:{fontFamily:we.fontFamily.primary,fontSize:we.fontSize.sm,color:K.text.secondary,flexShrink:0},children:"-"}),m&&h.jsx(he,{sx:{fontFamily:we.fontFamily.secondary,fontSize:we.fontSize.sm,fontWeight:we.fontWeight.semibold,color:K.primary[700],flexShrink:0},children:z.title.length>g?`${z.title.substring(0,g)}...`:z.title})]})}):h.jsx(he,{sx:{color:K.text.secondary,fontFamily:we.fontFamily.primary,fontSize:we.fontSize.base},children:i||`Select ${r.toLowerCase()}`})},"data-testid":C,MenuProps:{PaperProps:{sx:{borderRadius:kt.lg,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",border:`1px solid ${K.neutral[200]}`,backgroundColor:K.surface.primary,maxHeight:"300px"}}},children:u?h.jsx(ai,{disabled:!0,children:h.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:$e[2],width:"100%"},children:[h.jsx(Zr,{size:20}),h.jsx(he,{sx:{fontFamily:we.fontFamily.primary},children:"Loading courses..."})]})}):t.length>0?t.map(M=>h.jsx(ai,{value:M.id,sx:{padding:`${$e[2]} ${$e[3]}`,"&:hover":{backgroundColor:K.primary[50]},"&.Mui-selected":{backgroundColor:K.primary[100],"&:hover":{backgroundColor:K.primary[200]}}},children:h.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:$e[2],width:"100%"},children:[h.jsxs(de,{sx:{backgroundColor:K.primary[100],border:`1px solid ${K.primary[300]}`,borderRadius:kt.lg,padding:`${$e[2]} ${$e[3]}`,display:"inline-flex",alignItems:"center",gap:$e[1],width:"fit-content",maxWidth:"100%"},children:[f&&h.jsx(he,{sx:{fontFamily:we.fontFamily.secondary,fontSize:we.fontSize.sm,fontWeight:we.fontWeight.semibold,color:K.primary[700],flexShrink:0},children:M.number}),f&&m&&h.jsx(he,{sx:{fontFamily:we.fontFamily.primary,fontSize:we.fontSize.sm,color:K.text.secondary,flexShrink:0},children:"-"}),m&&h.jsx(he,{sx:{fontFamily:we.fontFamily.secondary,fontSize:we.fontSize.sm,fontWeight:we.fontWeight.semibold,color:K.primary[700],flexShrink:0},children:M.title})]}),b&&M.isCourseAdmin&&h.jsx(de,{sx:{backgroundColor:K.secondary[100],border:`1px solid ${K.secondary[300]}`,borderRadius:kt.sm,padding:`${$e[.5]} ${$e[1]}`,display:"inline-flex",alignItems:"center",flexShrink:0},children:h.jsx(he,{sx:{fontFamily:we.fontFamily.secondary,fontSize:we.fontSize.xs,fontWeight:we.fontWeight.semibold,color:K.secondary[700],textTransform:"uppercase"},children:"Admin"})})]})},M.id)):h.jsx(ai,{disabled:!0,children:h.jsx(he,{sx:{fontFamily:we.fontFamily.primary,color:K.text.secondary,fontStyle:"italic"},children:"No courses available"})})}),a&&h.jsx(N6,{children:a})]})},nF=({value:e,onChange:n,materials:t,label:r="Material",placeholder:i,helperText:a,error:s=!1,disabled:l=!1,loading:u=!1,required:d=!1,fullWidth:f=!0,variant:m="outlined",size:b="medium",sx:g})=>{const x=()=>t.find(y=>y.id===e);return x(),h.jsxs(Td,{fullWidth:f,error:s,disabled:l,required:d,variant:m,size:b,sx:{"& .MuiOutlinedInput-root":{borderRadius:kt.lg,backgroundColor:K.surface.primary,border:`2px solid ${K.neutral[300]}`,minHeight:b==="small"?"48px":"56px","&:hover":{backgroundColor:K.surface.primary,borderColor:K.neutral[300]},"&.Mui-focused":{backgroundColor:K.surface.primary,borderColor:K.primary[500],borderWidth:"2px"},"&.Mui-error":{borderColor:K.error},"& .MuiSelect-select":{padding:b==="small"?"12px 14px":"16px 14px",boxSizing:"border-box",fontFamily:we.fontFamily.primary,fontSize:we.fontSize.base,color:K.text.primary}},"& .MuiOutlinedInput-notchedOutline":{border:"none"},"& .MuiInputLabel-root":{fontFamily:we.fontFamily.secondary,fontSize:we.fontSize.base,fontWeight:we.fontWeight.medium,color:K.text.secondary,transform:"none",position:"static",marginBottom:$e[1],"&.Mui-focused":{color:K.primary[600]},"&.Mui-error":{color:K.error}},"& .MuiFormHelperText-root":{fontFamily:we.fontFamily.primary,fontSize:we.fontSize.sm,marginTop:$e[1],minHeight:"20px",lineHeight:"1.2"},...g},children:[h.jsx(Hj,{required:d,sx:{mb:1,fontFamily:we.fontFamily.secondary,fontSize:we.fontSize.base,fontWeight:we.fontWeight.medium,color:K.text.secondary},children:r}),h.jsx(Dc,{value:e,onChange:y=>n(y.target.value),displayEmpty:!0,renderValue:y=>{if(!y)return h.jsx(he,{sx:{color:K.text.secondary,fontFamily:we.fontFamily.primary,fontSize:we.fontSize.base},children:i||`Select ${r.toLowerCase()}`});const A=x();return A?h.jsx(de,{sx:{display:"flex",alignItems:"center",gap:$e[2]},children:h.jsx(de,{sx:{backgroundColor:"#D1FAE5",border:"1px solid #22C55E",borderRadius:kt.lg,padding:`${$e[2]} ${$e[3]}`,display:"inline-flex",alignItems:"center",gap:$e[1],width:"fit-content",maxWidth:"100%"},children:h.jsx(he,{sx:{fontFamily:we.fontFamily.secondary,fontSize:we.fontSize.sm,fontWeight:we.fontWeight.semibold,color:"#059669",flexShrink:0,minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:A.title})})}):""},children:u?h.jsx(ai,{disabled:!0,children:h.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:$e[2]},children:[h.jsx(Zr,{size:20}),h.jsx(he,{sx:{fontFamily:we.fontFamily.primary},children:"Loading materials..."})]})}):t.length>0?t.map(y=>h.jsx(ai,{value:y.id,sx:{padding:$e[2],"&:hover":{backgroundColor:"#ECFDF5"},"&.Mui-selected":{backgroundColor:"#D1FAE5","&:hover":{backgroundColor:"#A7F3D0"}}},children:h.jsx(de,{sx:{display:"flex",alignItems:"center",gap:$e[2],width:"100%"},children:h.jsx(de,{sx:{backgroundColor:"#A7F3D0",border:"1px solid #22C55E",borderRadius:kt.lg,padding:`${$e[2]} ${$e[3]}`,display:"inline-flex",alignItems:"center",gap:$e[1],width:"fit-content",maxWidth:"100%"},children:h.jsx(he,{sx:{fontFamily:we.fontFamily.secondary,fontSize:we.fontSize.sm,fontWeight:we.fontWeight.semibold,color:"#059669",flexShrink:0,minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:y.title})})})},y.id)):h.jsx(ai,{disabled:!0,children:h.jsx(he,{sx:{fontFamily:we.fontFamily.primary,color:K.text.secondary},children:"No materials available"})})}),a&&h.jsx(N6,{children:a})]})},OT=({materialId:e,materialTitle:n,maxTitleLength:t=50,variant:r="link",onClick:i})=>{const a=ya(),s=u=>{if(u.preventDefault(),u.stopPropagation(),i)i();else{const d=window.location.hostname==="nexlab.bio",m=`${d?"https://nexlab.bio":""}/view-material/${e}?material=${e}`;d?window.open(m,"_blank"):a(`/view-material/${e}?material=${e}`)}},l=n.length>t?`${n.substring(0,t)}...`:n;return r==="text"?h.jsx(he,{variant:"body2",sx:{color:K.text.primary,fontSize:we.fontSize.sm,fontWeight:we.fontWeight.medium},title:n,children:l}):h.jsx(he,{variant:"body1",onClick:s,sx:{fontFamily:we.fontFamily.secondary,fontSize:we.fontSize.base,fontWeight:we.fontWeight.semibold,color:K.text.primary,cursor:"pointer",textDecoration:"none","&:hover":{color:K.primary[600],textDecoration:"underline"}},title:n,children:l})},DT=({status:e,size:n="small",variant:t="filled"})=>{const i=(()=>{switch(e){case"superAdmin":return{label:"Super Admin",color:t==="filled"?{backgroundColor:K.success,color:K.text.inverse,borderColor:K.success}:{backgroundColor:"transparent",color:K.success,borderColor:K.success}};case"educator":return{label:"Educator",color:t==="filled"?{backgroundColor:K.primary[500],color:K.text.inverse,borderColor:K.primary[500]}:{backgroundColor:"transparent",color:K.primary[500],borderColor:K.primary[500]}};case"student":return{label:"Student",color:t==="filled"?{backgroundColor:K.neutral[400],color:K.text.inverse,borderColor:K.neutral[400]}:{backgroundColor:"transparent",color:K.neutral[600],borderColor:K.neutral[400]}};default:return{label:"Unknown",color:{backgroundColor:K.neutral[200],color:K.neutral[700],borderColor:K.neutral[300]}}}})();return h.jsx(cr,{label:i.label,size:n,variant:t==="outlined"?"outlined":"filled",sx:{...i.color,fontFamily:we.fontFamily.secondary,fontWeight:we.fontWeight.medium,fontSize:n==="small"?we.fontSize.xs:we.fontSize.sm,border:`1px solid ${i.color.borderColor}`,"&:hover":{backgroundColor:t==="filled"?i.color.backgroundColor:`${i.color.borderColor}10`}}})},IT=({chatbotId:e,maxLength:n=999})=>{const[t,r]=X.useState(!1),i=async s=>{s.stopPropagation();try{await navigator.clipboard.writeText(e),r(!0),setTimeout(()=>r(!1),2e3)}catch(l){console.error("Failed to copy:",l)}},a=e.length>n?`${e.substring(0,n)}...`:e;return h.jsx(fi,{title:t?"Copied!":"Click to Copy",children:h.jsx(de,{onClick:i,sx:{display:"inline-flex",alignItems:"center",backgroundColor:K.info+"15",color:K.info,border:`1px solid ${K.info}40`,borderRadius:kt.md,padding:`${$e[2]} ${$e[3]}`,fontSize:we.fontSize.sm,fontWeight:we.fontWeight.medium,fontFamily:"monospace",cursor:"pointer",transition:"all 0.2s ease",maxWidth:"100%","&:hover":{backgroundColor:K.info+"25",transform:"translateY(-1px)",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},"&:active":{transform:"translateY(0)"}},children:h.jsx(he,{variant:"body2",sx:{fontFamily:"monospace",fontSize:"inherit",color:"inherit",fontWeight:"inherit",userSelect:"none"},title:e,children:a})})})},rF=({conversationId:e,maxLength:n=999})=>{const[t,r]=X.useState(!1),i=async s=>{s.stopPropagation();try{await navigator.clipboard.writeText(e),r(!0),setTimeout(()=>r(!1),2e3)}catch(l){console.error("Failed to copy:",l)}},a=e.length>n?`${e.substring(0,n)}...`:e;return h.jsx(fi,{title:t?"Copied!":"Click to Copy",children:h.jsx(de,{onClick:i,sx:{display:"inline-flex",alignItems:"center",backgroundColor:K.warning+"15",color:K.warning,border:`1px solid ${K.warning}40`,borderRadius:kt.full,padding:`${$e[2]} ${$e[3]}`,fontSize:we.fontSize.sm,fontWeight:we.fontWeight.medium,fontFamily:"monospace",cursor:"pointer",transition:"all 0.2s ease",maxWidth:"100%","&:hover":{backgroundColor:K.warning+"25",transform:"translateY(-1px)",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},"&:active":{transform:"translateY(0)"}},children:h.jsx(he,{variant:"body2",sx:{fontFamily:"monospace",fontSize:"inherit",color:"inherit",fontWeight:"inherit",userSelect:"none"},title:e,children:a})})})},LT=({courseId:e,maxLength:n=999})=>{const[t,r]=X.useState(!1),i=async s=>{s.stopPropagation();try{await navigator.clipboard.writeText(e),r(!0),setTimeout(()=>r(!1),2e3)}catch(l){console.error("Failed to copy:",l)}},a=e.length>n?`${e.substring(0,n)}...`:e;return h.jsx(fi,{title:t?"Copied!":"Click to Copy",children:h.jsx(de,{onClick:i,sx:{display:"inline-flex",alignItems:"center",backgroundColor:K.neutral[100],color:K.neutral[700],border:`1px solid ${K.neutral[300]}`,borderRadius:kt.full,padding:`${$e[2]} ${$e[3]}`,fontSize:we.fontSize.sm,fontWeight:we.fontWeight.medium,fontFamily:"monospace",cursor:"pointer",transition:"all 0.2s ease",maxWidth:"100%","&:hover":{backgroundColor:K.neutral[200],transform:"translateY(-1px)",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},"&:active":{transform:"translateY(0)"}},children:h.jsx(he,{variant:"body2",sx:{fontFamily:"monospace",fontSize:"inherit",color:"inherit",fontWeight:"inherit",userSelect:"none"},title:e,children:a})})})},iF=({materialId:e,maxLength:n=999})=>{const[t,r]=X.useState(!1),i=async s=>{s.stopPropagation();try{await navigator.clipboard.writeText(e),r(!0),setTimeout(()=>r(!1),2e3)}catch(l){console.error("Failed to copy:",l)}},a=e.length>n?`${e.substring(0,n)}...`:e;return h.jsx(fi,{title:t?"Copied!":"Click to Copy",children:h.jsx(de,{onClick:i,sx:{display:"inline-flex",alignItems:"center",backgroundColor:K.secondary[50],color:K.secondary[700],border:`1px solid ${K.secondary[300]}`,borderRadius:kt.md,padding:`${$e[2]} ${$e[3]}`,fontSize:we.fontSize.sm,fontWeight:we.fontWeight.medium,fontFamily:"monospace",cursor:"pointer",transition:"all 0.2s ease",maxWidth:"100%","&:hover":{backgroundColor:K.secondary[100],transform:"translateY(-1px)",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},"&:active":{transform:"translateY(0)"}},children:h.jsx(he,{variant:"body2",sx:{fontFamily:"monospace",fontSize:"inherit",color:"inherit",fontWeight:"inherit",userSelect:"none"},title:e,children:a})})})};var f1={},j8;function aF(){if(j8)return f1;j8=1;var e=Pd();Object.defineProperty(f1,"__esModule",{value:!0}),f1.default=void 0;var n=e(qd()),t=zd();return f1.default=(0,n.default)((0,t.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),f1}var sF=aF();const RT=ns(sF);var h1={},T8;function oF(){if(T8)return h1;T8=1;var e=Pd();Object.defineProperty(h1,"__esModule",{value:!0}),h1.default=void 0;var n=e(qd()),t=zd();return h1.default=(0,n.default)((0,t.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility"),h1}var lF=oF();const uF=ns(lF);var p1={},O8;function cF(){if(O8)return p1;O8=1;var e=Pd();Object.defineProperty(p1,"__esModule",{value:!0}),p1.default=void 0;var n=e(qd()),t=zd();return p1.default=(0,n.default)((0,t.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),p1}var dF=cF();const fF=ns(dF);var m1={},D8;function hF(){if(D8)return m1;D8=1;var e=Pd();Object.defineProperty(m1,"__esModule",{value:!0}),m1.default=void 0;var n=e(qd()),t=zd();return m1.default=(0,n.default)((0,t.jsx)("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download"),m1}var pF=hF();const mF=ns(pF),I8=e=>e?e instanceof Si?e.toDate().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):e.seconds?new Date(e.seconds*1e3).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):e instanceof Date?e.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"N/A":"N/A",MT=e=>e?e instanceof Si?e.toDate().toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):e.seconds?new Date(e.seconds*1e3).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):e instanceof Date?e.toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):"N/A":"N/A",cv=({label:e,status:n,size:t="small"})=>{const r=()=>{switch(n){case"success":return{backgroundColor:K.secondary[100],color:K.secondary[700]};case"warning":return{backgroundColor:"#FEF3C7",color:"#D97706"};case"error":return{backgroundColor:"#FEE2E2",color:"#DC2626"};case"info":return{backgroundColor:K.primary[100],color:K.primary[700]};default:return{backgroundColor:K.neutral[100],color:K.neutral[700]}}};return h.jsx(cr,{label:e,size:t,sx:{...r(),fontFamily:we.fontFamily.secondary,fontWeight:we.fontWeight.medium,fontSize:we.fontSize.sm}})},zg=({actions:e})=>h.jsx(de,{sx:{display:"flex",justifyContent:"center",gap:$e[1]},children:e.map((n,t)=>h.jsx(fi,{title:n.tooltip,children:h.jsx("span",{children:h.jsx(_n,{size:"small",onClick:n.onClick,disabled:n.disabled,sx:{color:n.disabled?K.text.disabled:n.color||K.primary[600],"&:hover":{backgroundColor:n.disabled?"transparent":n.hoverColor||K.primary[100]}},children:n.icon})})},t))}),yp=({date:e,format:n="long"})=>h.jsx(he,{variant:"body2",sx:{color:K.text.secondary,fontSize:we.fontSize.sm},children:n==="short"?I8(e).split(",")[0]:n==="full"?MT(e):I8(e)}),Za=({text:e,maxLength:n=100,variant:t="primary",weight:r="normal"})=>{const i=e.length>n?`${e.substring(0,n)}...`:e,a=()=>{const s={fontSize:we.fontSize.sm,fontWeight:we.fontWeight[r]};switch(t){case"secondary":return{...s,color:K.text.secondary};case"monospace":return{...s,fontFamily:"monospace",color:K.text.secondary,wordBreak:"break-all"};default:return{...s,color:K.text.primary}}};return h.jsx(he,{variant:"body2",sx:a(),title:e.length>n?e:void 0,children:i})},og={delete:h.jsx(RT,{fontSize:"small"}),view:h.jsx(uF,{fontSize:"small"}),add:h.jsx(fF,{fontSize:"small"})},q6=({title:e,subtitle:n,children:t,maxWidth:r="1200px",className:i=""})=>{const a=pp(),s=jd(a.breakpoints.down("md"));return h.jsxs(de,{className:`form-page-container ${i}`,sx:{p:s?$e[3]:$e[4],maxWidth:r,mx:"auto",minHeight:"100vh",backgroundColor:K.primary[50]},children:[h.jsx(So,{title:e,subtitle:n}),h.jsx(gn,{className:"form-container",elevation:0,sx:{backgroundColor:K.surface.primary,borderRadius:kt["2xl"],p:s?$e[4]:$e[6],border:`1px solid ${K.neutral[200]}`,boxShadow:Ft.lg,position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"3px",background:K.primary[500],borderRadius:`${kt["2xl"]} ${kt["2xl"]} 0 0`}},children:t})]})},Hf=({title:e,description:n,children:t,showDivider:r=!1,className:i=""})=>h.jsxs(h.Fragment,{children:[r&&h.jsx(qs,{sx:{my:$e[4],borderColor:K.neutral[200]}}),h.jsxs(de,{className:`form-section ${i}`,sx:{mb:$e[4]},children:[e&&h.jsx(he,{variant:"h6",component:"h2",sx:{mb:$e[2],fontFamily:we.fontFamily.display,fontWeight:we.fontWeight.semibold,color:K.text.primary,fontSize:we.fontSize.xl},children:e}),n&&h.jsx(he,{variant:"body1",sx:{mb:$e[3],color:K.text.secondary,lineHeight:we.lineHeight.relaxed,fontFamily:we.fontFamily.primary},children:n}),t]})]}),fu=({sx:e,variant:n="outlined",...t})=>{const r=pp(),i=jd(r.breakpoints.down("sm"));return h.jsx(Jt,{variant:"outlined",fullWidth:!0,margin:"normal",...t,sx:{"& .MuiOutlinedInput-root":{borderRadius:kt.lg,backgroundColor:K.surface.primary,border:`2px solid ${K.neutral[300]}`,minHeight:"56px","&:hover":{backgroundColor:K.surface.primary,borderColor:K.neutral[300]},"&.Mui-focused":{backgroundColor:K.surface.primary,borderColor:K.neutral[300]},"&.Mui-error":{borderColor:K.error},"& .MuiOutlinedInput-input":{padding:"16px 14px",boxSizing:"border-box"}},"& .MuiOutlinedInput-notchedOutline":{border:"none"},"& .MuiInputLabel-root":{fontFamily:we.fontFamily.primary,fontWeight:we.fontWeight.medium,color:K.text.secondary,transition:"color 0.2s ease-in-out",transform:"none !important",position:"static !important",marginBottom:"8px","&.Mui-focused":{color:K.primary[600],transform:"none !important"},"&.MuiInputLabel-shrink":{transform:"none !important"},"&.Mui-error":{color:K.error}},"& .MuiFormHelperText-root":{fontFamily:we.fontFamily.primary,fontSize:we.fontSize.sm,marginTop:$e[1],minHeight:"20px",lineHeight:"1.2"},"& .MuiInputBase-input":{fontSize:we.fontSize.base,fontFamily:we.fontFamily.primary},...e}})},gF=({label:e,helperText:n,error:t=!1,required:r=!1,variant:i="outlined",children:a,sx:s,...l})=>{const u=pp(),d=jd(u.breakpoints.down("sm"));return h.jsxs(Td,{fullWidth:!0,margin:"normal",error:t,sx:{"& .MuiOutlinedInput-root":{borderRadius:kt.lg,backgroundColor:K.surface.primary,border:`2px solid ${K.neutral[300]}`,minHeight:"56px","&:hover":{backgroundColor:K.surface.primary,borderColor:K.neutral[300]},"&.Mui-focused":{backgroundColor:K.surface.primary,borderColor:K.neutral[300]},"&.Mui-error":{borderColor:K.error},"& .MuiSelect-select":{padding:"16px 14px",boxSizing:"border-box"}},"& .MuiOutlinedInput-notchedOutline":{border:"none"},"& .MuiInputLabel-root":{fontFamily:we.fontFamily.primary,fontWeight:we.fontWeight.medium,color:K.text.secondary,transition:"color 0.2s ease-in-out",transform:"none !important",position:"static !important",marginBottom:"8px","&.Mui-focused":{color:K.primary[600],transform:"none !important"},"&.MuiInputLabel-shrink":{transform:"none !important"}},"& .MuiFormHelperText-root":{fontFamily:we.fontFamily.primary,fontSize:we.fontSize.sm,marginTop:$e[1],minHeight:"20px",lineHeight:"1.2"},...s},children:[h.jsx(Hj,{required:r,sx:{mb:1,fontFamily:we.fontFamily.primary,fontWeight:we.fontWeight.medium,color:K.text.secondary,fontSize:d?we.fontSize.sm:we.fontSize.base},children:e}),h.jsx(Dc,{variant:"outlined",...l,children:a}),n&&h.jsx(de,{component:"span",sx:{fontSize:we.fontSize.sm,color:t?K.error:K.text.tertiary,mt:$e[1],display:"block",fontFamily:we.fontFamily.primary,fontWeight:we.fontWeight.normal},children:n})]})},K0=({variant:e="primary",loading:n=!1,children:t,sx:r,disabled:i,...a})=>{const s=pp(),l=jd(s.breakpoints.down("sm")),u=()=>{switch(e){case"primary":return{backgroundColor:K.primary[500],color:K.text.inverse,"&:hover":{backgroundColor:K.primary[600],boxShadow:Ft.md,transform:"translateY(-1px)"},"&:active":{transform:"translateY(0)"},"&:disabled":{backgroundColor:K.neutral[300],color:K.text.disabled}};case"secondary":return{backgroundColor:K.secondary[500],color:K.text.inverse,"&:hover":{backgroundColor:K.secondary[600],boxShadow:Ft.md,transform:"translateY(-1px)"},"&:active":{transform:"translateY(0)"},"&:disabled":{backgroundColor:K.neutral[300],color:K.text.disabled}};case"outline":return{backgroundColor:"transparent",color:K.primary[600],border:`2px solid ${K.primary[500]}`,"&:hover":{backgroundColor:K.primary[50],borderColor:K.primary[600],transform:"translateY(-1px)"},"&:active":{transform:"translateY(0)"},"&:disabled":{borderColor:K.neutral[300],color:K.text.disabled}};case"text":return{backgroundColor:"transparent",color:K.text.secondary,"&:hover":{backgroundColor:K.neutral[100],color:K.text.primary},"&:disabled":{color:K.text.disabled}};default:return{}}};return h.jsx(Ct,{disabled:i||n,...a,sx:{borderRadius:kt.xl,padding:l?`${$e[2]} ${$e[4]}`:`${$e[3]} ${$e[6]}`,fontFamily:we.fontFamily.secondary,fontWeight:we.fontWeight.semibold,fontSize:l?we.fontSize.sm:we.fontSize.base,textTransform:"none",transition:"all 0.2s ease-in-out",minHeight:"48px",position:"relative",...u(),...n&&{"&::after":{content:'""',position:"absolute",width:"16px",height:"16px",border:`2px solid ${e==="primary"||e==="secondary"?K.text.inverse:K.primary[500]}`,borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}},...r},children:n?"":t})},B6=({children:e,align:n="left",className:t=""})=>{const r=pp(),i=jd(r.breakpoints.down("sm")),a=()=>{switch(n){case"center":return"center";case"right":return"flex-end";case"space-between":return"space-between";default:return"flex-start"}};return h.jsx(de,{className:`form-actions ${t}`,sx:{display:"flex",flexDirection:i?"column":"row",gap:$e[3],justifyContent:a(),alignItems:i?"stretch":"center",mt:$e[5],pt:$e[4],borderTop:`1px solid ${K.neutral[200]}`,...i&&{"& > *":{width:"100%"}}},children:e})},FT=({children:e,title:n,appName:t="NexLAB",appUrl:r="https://nexlab.bio",supportEmail:i="andriy@intofuture.org"})=>`
    <!DOCTYPE html>
    <html lang="en">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>${n}</title>
      <style>
        body {
          margin: 0;
          padding: 0;
          font-family: ${we.fontFamily.primary};
          background-color: ${K.background.secondary};
          color: ${K.text.primary};
          line-height: ${we.lineHeight.normal};
        }
        .email-container {
          max-width: 600px;
          margin: 0 auto;
          background-color: ${K.background.primary};
          border-radius: ${kt.lg};
          box-shadow: ${Ft.lg};
          overflow: hidden;
        }
        .email-header {
          background: linear-gradient(135deg, ${K.primary[500]} 0%, ${K.primary[600]} 100%);
          padding: ${$e[8]} ${$e[6]};
          text-align: center;
          color: ${K.text.inverse};
        }
        .email-header h1 {
          margin: 0;
          font-size: ${we.fontSize["2xl"]};
          font-weight: ${we.fontWeight.bold};
          font-family: ${we.fontFamily.display};
        }
        .email-header p {
          margin: ${$e[2]} 0 0 0;
          font-size: ${we.fontSize.base};
          opacity: 0.9;
        }
        .email-content {
          padding: ${$e[8]} ${$e[6]};
        }
        .email-content h2 {
          color: ${K.text.primary};
          font-size: ${we.fontSize.xl};
          font-weight: ${we.fontWeight.semibold};
          margin: 0 0 ${$e[4]} 0;
          font-family: ${we.fontFamily.secondary};
        }
        .email-content p {
          color: ${K.text.secondary};
          font-size: ${we.fontSize.base};
          margin: 0 0 ${$e[4]} 0;
          line-height: ${we.lineHeight.relaxed};
        }
        .info-card {
          background: linear-gradient(135deg, ${K.background.secondary} 0%, ${K.background.tertiary} 100%);
          border: 1px solid ${K.neutral[200]};
          border-radius: ${kt.xl};
          padding: ${$e[8]};
          margin: ${$e[6]} 0;
          box-shadow: ${Ft.sm};
        }
        .info-table {
          width: 100%;
          border-collapse: collapse;
          margin: 0;
        }
        .info-row {
          display: table-row;
        }
        .info-label {
          font-weight: ${we.fontWeight.semibold};
          color: ${K.text.primary};
          font-size: ${we.fontSize.sm};
          padding: ${$e[3]} ${$e[4]};
          background-color: ${K.primary[50]};
          border: 1px solid ${K.neutral[200]};
          border-right: none;
          width: 35%;
          vertical-align: top;
        }
        .info-value {
          color: ${K.text.secondary};
          font-size: ${we.fontSize.sm};
          padding: ${$e[3]} ${$e[4]};
          background-color: ${K.background.primary};
          border: 1px solid ${K.neutral[200]};
          border-left: none;
          width: 65%;
          vertical-align: top;
        }
        .info-row:first-child .info-label,
        .info-row:first-child .info-value {
          border-top-left-radius: ${kt.lg};
          border-top-right-radius: ${kt.lg};
        }
        .info-row:last-child .info-label,
        .info-row:last-child .info-value {
          border-bottom-left-radius: ${kt.lg};
          border-bottom-right-radius: ${kt.lg};
        }
        .cta-button {
          display: inline-block;
          background: linear-gradient(135deg, ${K.primary[500]} 0%, ${K.primary[600]} 100%);
          color: ${K.text.inverse};
          text-decoration: none;
          padding: ${$e[4]} ${$e[8]};
          border-radius: ${kt.xl};
          font-weight: ${we.fontWeight.semibold};
          font-size: ${we.fontSize.base};
          text-align: center;
          margin: ${$e[6]} 0;
          transition: all 0.3s ease;
          box-shadow: ${Ft.md};
        }
        .cta-button:hover {
          transform: translateY(-2px);
          box-shadow: ${Ft.lg};
        }
        .status-badge {
          display: inline-block;
          padding: ${$e[1]} ${$e[3]};
          border-radius: ${kt.full};
          font-size: ${we.fontSize.xs};
          font-weight: ${we.fontWeight.semibold};
          text-transform: uppercase;
          letter-spacing: 0.5px;
        }
        .status-pending {
          background-color: ${K.warning}20;
          color: ${K.warning};
          border: 1px solid ${K.warning}40;
        }
        .status-approved {
          background-color: ${K.success}20;
          color: ${K.success};
          border: 1px solid ${K.success}40;
        }
        .email-footer {
          background-color: ${K.background.secondary};
          padding: ${$e[6]};
          text-align: center;
          border-top: 1px solid ${K.neutral[200]};
        }
        .email-footer p {
          margin: 0;
          font-size: ${we.fontSize.sm};
          color: ${K.text.tertiary};
        }
        .email-footer a {
          color: ${K.primary[500]};
          text-decoration: none;
        }
        .email-footer a:hover {
          text-decoration: underline;
        }
        @media (max-width: 600px) {
          .email-container {
            margin: 0;
            border-radius: 0;
          }
          .email-header, .email-content, .email-footer {
            padding: ${$e[4]};
          }
          .info-label, .info-value {
            display: block;
            width: 100%;
            border: 1px solid ${K.neutral[200]};
            border-radius: 0;
          }
          .info-label {
            border-bottom: none;
            background-color: ${K.primary[100]};
            font-weight: ${we.fontWeight.bold};
          }
          .info-value {
            border-top: none;
            margin-bottom: ${$e[2]};
          }
          .info-row:last-child .info-value {
            margin-bottom: 0;
          }
        }
      </style>
    </head>
    <body>
      <div class="email-container">
        <div class="email-header">
          <h1>${t}</h1>
          <p>Next-Generation Experiments and Learning for Advanced Biotech</p>
        </div>
        <div class="email-content">
          ${e}
        </div>
        <div class="email-footer">
          <p>
            This email was sent from <a href="${r}">${t}</a><br>
            If you have any questions, please contact us at <a href="mailto:${i}">${i}</a>
          </p>
        </div>
      </div>
    </body>
    </html>
  `,bF=(e,n="NexLAB",t="https://nexlab.bio")=>{const r=e.requestType==="primary"?"Primary Instructor":"Co-Instructor",i=e.courseCreationMode==="syllabus"?"Syllabus Import":"Manual Entry";return FT({children:`
      <h2> Instructor Request Submitted Successfully!</h2>
      <p>Dear ${e.firstName} ${e.lastName},</p>
      <p>Thank you for submitting your request to become an instructor on NexLAB platform. We have received your application and it is currently being reviewed by our team.</p>
      
      <div class="info-card">
        <table class="info-table">
          <tr class="info-row">
            <td class="info-label">Request Status</td>
            <td class="info-value"><span class="status-badge status-pending">Pending Review</span></td>
          </tr>
          <tr class="info-row">
            <td class="info-label">Request Type</td>
            <td class="info-value">${r}</td>
          </tr>
          <tr class="info-row">
            <td class="info-label">Course</td>
            <td class="info-value">${e.courseNumber} - ${e.courseTitle}</td>
          </tr>
          <tr class="info-row">
            <td class="info-label">Institution</td>
            <td class="info-value">${e.institution}</td>
          </tr>
          ${e.requestType==="primary"?`
          <tr class="info-row">
            <td class="info-label">Creation Method</td>
            <td class="info-value">${i}</td>
          </tr>
          `:""}
          ${e.generatedMaterialsCount&&e.generatedMaterialsCount>0?`
          <tr class="info-row">
            <td class="info-label">Materials Generated</td>
            <td class="info-value">${e.generatedMaterialsCount} materials ready for publication</td>
          </tr>
          `:""}
          <tr class="info-row">
            <td class="info-label">Request ID</td>
            <td class="info-value">${e.requestId}</td>
          </tr>
          <tr class="info-row">
            <td class="info-label">Submitted</td>
            <td class="info-value">${new Date(e.submittedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}</td>
          </tr>
        </table>
      </div>
      
      <p><strong>What happens next?</strong></p>
      <p>Our team will review your request within 1-2 business days. You will receive an email notification once your request has been processed.</p>
      
      <p>If you have any questions or need to make changes to your request, please don't hesitate to contact our support team.</p>
    `,title:"Instructor Request Submitted - NexLAB",appName:n,appUrl:t})},L8=(e,n="NexLAB",t="https://nexlab.bio")=>{const r=e.requestType==="primary"?"Primary Instructor":"Co-Instructor";return FT({children:`
      <h2> Congratulations! Your Request Has Been Approved!</h2>
      <p>Dear ${e.firstName} ${e.lastName},</p>
      <p>Great news! Your request to become an instructor on NexLAB platform has been approved. You now have access to instructor features and can start managing your course.</p>
      
      <div class="info-card">
        <table class="info-table">
          <tr class="info-row">
            <td class="info-label">Request Status</td>
            <td class="info-value"><span class="status-badge status-approved">Approved</span></td>
          </tr>
          <tr class="info-row">
            <td class="info-label">Request Type</td>
            <td class="info-value">${r}</td>
          </tr>
          <tr class="info-row">
            <td class="info-label">Course</td>
            <td class="info-value">${e.courseNumber} - ${e.courseTitle}</td>
          </tr>
          <tr class="info-row">
            <td class="info-label">Institution</td>
            <td class="info-value">${e.institution}</td>
          </tr>
          ${e.passcode?`
          <tr class="info-row">
            <td class="info-label">Course Passcode</td>
            <td class="info-value" style="font-family: monospace; font-weight: bold; color: ${K.primary[600]};">${e.passcode}</td>
          </tr>
          `:""}
          ${e.materialsCreatedCount&&e.materialsCreatedCount>0?`
          <tr class="info-row">
            <td class="info-label">Materials Created</td>
            <td class="info-value">${e.materialsCreatedCount} materials automatically added to your course</td>
          </tr>
          `:""}
          <tr class="info-row">
            <td class="info-label">Request ID</td>
            <td class="info-value">${e.requestId}</td>
          </tr>
          <tr class="info-row">
            <td class="info-label">Approved</td>
            <td class="info-value">${new Date(e.approvedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}</td>
          </tr>
        </table>
      </div>
      
      <div style="margin: ${$e[8]} 0;">
        <a href="${t}/supplemental-materials${e.courseId?`?course=${e.courseId}`:""}" class="cta-button">View My Course</a>
      </div>
      
      <p><strong>What you can do now:</strong></p>
      <ul style="color: ${K.text.secondary}; padding-left: ${$e[6]};">
        <li>Access your course management dashboard</li>
        <li>Create and manage course materials</li>
        <li>Set up student enrollment with your course passcode</li>
        ${e.materialsCreatedCount&&e.materialsCreatedCount>0?"<li>Review and customize your auto-generated materials</li>":""}
      </ul>
      
      <p>Welcome to the NexLAB instructor community! We're excited to see what you'll create.</p>
    `,title:"Instructor Request Approved - NexLAB",appName:n,appUrl:t})},eS=(e,n,t)=>({to:e,message:{subject:n,html:t}}),yF=()=>{const{userDetails:e}=zi(),n=ya(),t=e&&!e.isAdmin&&(!e.classes||Object.keys(e.classes).length===0),r=[{title:"My Account",description:"Manage your profile and account settings",icon:h.jsx(Wj,{sx:{fontSize:40}}),path:"/my-profile",color:K.primary[500],disabled:!1,external:!1},{title:"Messages",description:"View and manage course messages",icon:h.jsx(Vj,{sx:{fontSize:40}}),path:"/messages",color:K.secondary[500],disabled:!1,external:!1}],i=[{title:"Course Materials",description:"View and manage course materials",icon:h.jsx(Od,{sx:{fontSize:40}}),path:"/supplemental-materials",color:K.error,disabled:!1,external:!1},{title:"Laboratory Notebook",description:"Access your lab experiments and designs",icon:h.jsx(j6,{sx:{fontSize:40}}),path:"/laboratory-notebook",color:K.success,disabled:t,external:!1}];return h.jsxs(de,{className:"profile-container",children:[h.jsx(So,{title:"Welcome!"}),h.jsxs(de,{sx:{mb:$e[6],p:$e[4],backgroundColor:K.background.secondary,borderRadius:kt.xl,border:`1px solid ${K.neutral[200]}`,boxShadow:Ft.sm,position:"relative",mt:$e[8]},children:[h.jsx(de,{sx:{position:"absolute",top:"-25px",left:"40px",backgroundColor:K.warning,borderRadius:`${kt.lg} ${kt.lg} 0 0`,px:$e[3],py:$e[1],zIndex:1},children:h.jsx(he,{sx:{color:K.text.inverse,fontFamily:we.fontFamily.display,fontSize:"2rem",fontWeight:we.fontWeight.bold,whiteSpace:"nowrap",lineHeight:1},children:"Getting Started"})}),h.jsxs(wt,{container:!0,spacing:$e[4],sx:{mt:$e[3],mb:$e[4]},children:[h.jsx(wt,{item:!0,xs:12,sm:6,md:3,children:h.jsxs(de,{sx:{height:"100%",p:$e[3],backgroundColor:K.background.primary,borderRadius:kt.lg,border:`1px solid ${K.neutral[200]}`,boxShadow:Ft.sm},children:[h.jsx(he,{variant:"h6",component:"h3",sx:{fontFamily:we.fontFamily.display,fontSize:"2rem",fontWeight:we.fontWeight.bold,color:K.text.primary,mb:$e[3],textAlign:"left"},children:"What is NexLAB?"}),h.jsx(he,{variant:"body1",paragraph:!0,sx:{fontFamily:we.fontFamily.secondary,fontSize:we.fontSize.lg,color:K.text.secondary,lineHeight:1.6,textAlign:"left"},children:"NexLAB enhances the Antibody Engineering curriculum with an adaptive content management platform designed for educators, students, and researchers."})]})}),h.jsx(wt,{item:!0,xs:12,sm:6,md:3,children:h.jsxs(de,{sx:{height:"100%",p:$e[3],backgroundColor:K.background.primary,borderRadius:kt.lg,border:`1px solid ${K.neutral[200]}`,boxShadow:Ft.sm},children:[h.jsx(he,{variant:"h6",component:"h3",sx:{fontFamily:we.fontFamily.display,fontSize:"2rem",fontWeight:we.fontWeight.bold,color:K.text.primary,mb:$e[3],textAlign:"left"},children:"Key Features:"}),h.jsxs(de,{component:"ul",sx:{pl:$e[3],"& li":{fontFamily:we.fontFamily.secondary,fontSize:we.fontSize.lg,color:K.text.secondary,lineHeight:1.5,mb:$e[1]}},children:[h.jsx("li",{children:"Electronic Laboratory Notebook using the Design-Build-Test framework"}),h.jsx("li",{children:"Platform for creating and sharing learning materials"}),h.jsx("li",{children:"Student progress tracking and class content efficacy analysis"}),h.jsx("li",{children:"Quiz AI & Chatbot Tools to support interactive learning"})]})]})}),h.jsx(wt,{item:!0,xs:12,sm:6,md:3,children:h.jsx(Ja,{sx:{height:"100%",cursor:"pointer",backgroundColor:K.background.primary,borderRadius:kt.xl,border:`1px solid ${K.neutral[200]}`,boxShadow:Ft.sm,transition:xc.transitions.normal,"&:hover":{transform:"translateY(-8px)",boxShadow:Ft.xl,border:`1px solid ${K.warning}`}},onClick:()=>{const a=window.location.hostname==="nexlab.bio"?"https://nexlab.bio":"";window.open(`${a}/view-material/xsA42JCvfCUtmyoyx45s?material=xsA42JCvfCUtmyoyx45s`,"_blank")},children:h.jsxs(es,{sx:{textAlign:"center",p:$e[4],height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[h.jsx(de,{sx:{color:K.warning,mb:$e[3],display:"flex",justifyContent:"center"},children:h.jsx(K9,{sx:{fontSize:40}})}),h.jsxs(de,{sx:{flex:1},children:[h.jsx(he,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontWeight:we.fontWeight.bold,fontFamily:we.fontFamily.display,fontSize:"2rem",color:K.text.primary,mb:$e[2]},children:"Quick-Start Guide"}),h.jsx(he,{variant:"body2",sx:{color:K.text.secondary,fontFamily:we.fontFamily.secondary,fontSize:we.fontSize.lg,lineHeight:1.5},children:"Get started with public course materials and learn the basics"})]})]})})}),h.jsx(wt,{item:!0,xs:12,sm:6,md:3,children:h.jsx(Ja,{sx:{height:"100%",cursor:"pointer",backgroundColor:K.background.primary,borderRadius:kt.xl,border:`1px solid ${K.neutral[200]}`,boxShadow:Ft.sm,transition:xc.transitions.normal,"&:hover":{transform:"translateY(-8px)",boxShadow:Ft.xl,border:`1px solid ${K.primary[500]}`}},onClick:()=>window.open("https://www.loom.com/share/f3ca701c66d34f84a13eb7ec12b0c6ec","_blank"),children:h.jsxs(es,{sx:{textAlign:"center",p:$e[4],height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[h.jsx(de,{sx:{color:K.primary[500],mb:$e[3],display:"flex",justifyContent:"center"},children:h.jsx(X9,{sx:{fontSize:40}})}),h.jsxs(de,{sx:{flex:1},children:[h.jsx(he,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontWeight:we.fontWeight.bold,fontFamily:we.fontFamily.display,fontSize:"2rem",color:K.text.primary,mb:$e[2]},children:"Tutorial"}),h.jsx(he,{variant:"body2",sx:{color:K.text.secondary,fontFamily:we.fontFamily.secondary,fontSize:we.fontSize.lg,lineHeight:1.5},children:"Watch our introduction video to learn how to use NexLAB"})]})]})})})]})]}),h.jsxs(de,{sx:{mb:$e[6],p:$e[4],backgroundColor:K.background.secondary,borderRadius:kt.xl,border:`1px solid ${K.neutral[200]}`,boxShadow:Ft.sm,position:"relative",mt:$e[8]},children:[h.jsx(de,{sx:{position:"absolute",top:"-25px",left:"40px",backgroundColor:K.primary[500],borderRadius:`${kt.lg} ${kt.lg} 0 0`,px:$e[3],py:$e[1],zIndex:1},children:h.jsx(he,{sx:{color:K.text.inverse,fontFamily:we.fontFamily.display,fontSize:"2rem",fontWeight:we.fontWeight.bold,whiteSpace:"nowrap",lineHeight:1},children:"Quick Actions"})}),h.jsx(wt,{container:!0,spacing:$e[4],sx:{mb:$e[4],mt:$e[3]},children:r.map((a,s)=>h.jsx(wt,{item:!0,xs:12,sm:6,md:6,children:h.jsx(Ja,{sx:{height:"100%",cursor:a.disabled?"not-allowed":"pointer",opacity:a.disabled?.6:1,backgroundColor:K.background.primary,borderRadius:kt.xl,border:`1px solid ${K.neutral[200]}`,boxShadow:Ft.sm,transition:xc.transitions.normal,"&:hover":a.disabled?{}:{transform:"translateY(-8px)",boxShadow:Ft.xl,border:`1px solid ${a.color}`}},onClick:()=>{a.disabled||(a.external?window.open(a.path,"_blank"):n(a.path))},children:h.jsxs(es,{sx:{textAlign:"center",p:$e[4],height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[h.jsx(de,{sx:{color:a.color,mb:$e[3],display:"flex",justifyContent:"center"},children:a.icon}),h.jsxs(de,{sx:{flex:1},children:[h.jsx(he,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontWeight:we.fontWeight.bold,fontFamily:we.fontFamily.display,fontSize:"2rem",color:K.text.primary,mb:$e[2]},children:a.title}),h.jsx(he,{variant:"body2",sx:{color:K.text.secondary,fontFamily:we.fontFamily.secondary,fontSize:we.fontSize.lg,lineHeight:1.5},children:a.description}),a.disabled&&h.jsx(he,{variant:"caption",sx:{mt:$e[2],display:"block",color:K.error,fontFamily:we.fontFamily.secondary},children:"Enroll in a course to access this feature"})]})]})})},s))}),h.jsx(wt,{container:!0,spacing:$e[4],children:i.map((a,s)=>h.jsx(wt,{item:!0,xs:12,sm:6,md:6,children:h.jsx(Ja,{sx:{height:"100%",cursor:a.disabled?"not-allowed":"pointer",opacity:a.disabled?.6:1,backgroundColor:K.background.primary,borderRadius:kt.xl,border:`1px solid ${K.neutral[200]}`,boxShadow:Ft.sm,transition:xc.transitions.normal,"&:hover":a.disabled?{}:{transform:"translateY(-8px)",boxShadow:Ft.xl,border:`1px solid ${a.color}`}},onClick:()=>{a.disabled||(a.external?window.open(a.path,"_blank"):n(a.path))},children:h.jsxs(es,{sx:{textAlign:"center",p:$e[4],height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[h.jsx(de,{sx:{color:a.color,mb:$e[3],display:"flex",justifyContent:"center"},children:a.icon}),h.jsxs(de,{sx:{flex:1},children:[h.jsx(he,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontWeight:we.fontWeight.bold,fontFamily:we.fontFamily.display,fontSize:"2rem",color:K.text.primary,mb:$e[2]},children:a.title}),h.jsx(he,{variant:"body2",sx:{color:K.text.secondary,fontFamily:we.fontFamily.secondary,fontSize:we.fontSize.lg,lineHeight:1.5},children:a.description}),a.disabled&&h.jsx(he,{variant:"caption",sx:{mt:$e[2],display:"block",color:K.error,fontFamily:we.fontFamily.secondary},children:"Enroll in a course to access this feature"})]})]})})},s))})]})]})};let uy;const xF=new Uint8Array(16);function vF(){if(!uy&&(uy=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!uy))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return uy(xF)}const hs=[];for(let e=0;e<256;++e)hs.push((e+256).toString(16).slice(1));function wF(e,n=0){return hs[e[n+0]]+hs[e[n+1]]+hs[e[n+2]]+hs[e[n+3]]+"-"+hs[e[n+4]]+hs[e[n+5]]+"-"+hs[e[n+6]]+hs[e[n+7]]+"-"+hs[e[n+8]]+hs[e[n+9]]+"-"+hs[e[n+10]]+hs[e[n+11]]+hs[e[n+12]]+hs[e[n+13]]+hs[e[n+14]]+hs[e[n+15]]}const SF=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),R8={randomUUID:SF};function Mi(e,n,t){if(R8.randomUUID&&!e)return R8.randomUUID();e=e||{};const r=e.random||(e.rng||vF)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,wF(r)}const M8={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_KEY:"AIzaSyD3b8ezNVNI376HM1OsVumOLuyMJP2AG7w",VITE_APP_ID:"1:922352392986:web:6c4d6e16b5e615bd4daaa3",VITE_AUTH_DOMAIN:"nexlab-prod.firebaseapp.com",VITE_CHATBOT_DEFAULT_ID:"ce5f7921-a3a0-4ea7-b95f-10fe41becda5",VITE_DEPLOY_ENV:"github",VITE_GOOGLE_ANALYTICS_ID:"G-X2SBY2YQ4V",VITE_MESSAGING_SENDER_ID:"922352392986",VITE_PROJECT_ID:"nexlab-prod",VITE_PUBLIC_COURSE_ID:"rqoyheM9Lf8jGftIoZyT",VITE_STORAGE_BUCKET:"nexlab-prod.firebasestorage.app"},lg=new Map,cy=e=>{const n=lg.get(e);return n?Object.fromEntries(Object.entries(n.stores).map(([t,r])=>[t,r.getState()])):{}},AF=(e,n,t)=>{if(e===void 0)return{type:"untracked",connection:n.connect(t)};const r=lg.get(t.name);if(r)return{type:"tracked",store:e,...r};const i={connection:n.connect(t),stores:{}};return lg.set(t.name,i),{type:"tracked",store:e,...i}},CF=(e,n)=>{if(n===void 0)return;const t=lg.get(e);t&&(delete t.stores[n],Object.keys(t.stores).length===0&&lg.delete(e))},kF=e=>{var n,t;if(!e)return;const r=e.split(`
`),i=r.findIndex(s=>s.includes("api.setState"));if(i<0)return;const a=((n=r[i+1])==null?void 0:n.trim())||"";return(t=/.+ (.+) .+/.exec(a))==null?void 0:t[1]},EF=(e,n={})=>(t,r,i)=>{const{enabled:a,anonymousActionType:s,store:l,...u}=n;let d;try{d=(a??(M8?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!d)return e(t,r,i);const{connection:f,...m}=AF(l,d,u);let b=!0;i.setState=(y,A,w)=>{const C=t(y,A);if(!b)return C;const j=w===void 0?{type:s||kF(new Error().stack)||"anonymous"}:typeof w=="string"?{type:w}:w;return l===void 0?(f==null||f.send(j,r()),C):(f==null||f.send({...j,type:`${l}/${j.type}`},{...cy(u.name),[l]:i.getState()}),C)},i.devtools={cleanup:()=>{f&&typeof f.unsubscribe=="function"&&f.unsubscribe(),CF(u.name,l)}};const g=(...y)=>{const A=b;b=!1,t(...y),b=A},x=e(i.setState,r,i);if(m.type==="untracked"?f==null||f.init(x):(m.stores[m.store]=i,f==null||f.init(Object.fromEntries(Object.entries(m.stores).map(([y,A])=>[y,y===m.store?x:A.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let y=!1;const A=i.dispatch;i.dispatch=(...w)=>{(M8?"production":void 0)!=="production"&&w[0].type==="__setState"&&!y&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),y=!0),A(...w)}}return f.subscribe(y=>{var A;switch(y.type){case"ACTION":if(typeof y.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return N5(y.payload,w=>{if(w.type==="__setState"){if(l===void 0){g(w.state);return}Object.keys(w.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const C=w.state[l];if(C==null)return;JSON.stringify(i.getState())!==JSON.stringify(C)&&g(C);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(w)});case"DISPATCH":switch(y.payload.type){case"RESET":return g(x),l===void 0?f==null?void 0:f.init(i.getState()):f==null?void 0:f.init(cy(u.name));case"COMMIT":if(l===void 0){f==null||f.init(i.getState());return}return f==null?void 0:f.init(cy(u.name));case"ROLLBACK":return N5(y.state,w=>{if(l===void 0){g(w),f==null||f.init(i.getState());return}g(w[l]),f==null||f.init(cy(u.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return N5(y.state,w=>{if(l===void 0){g(w);return}JSON.stringify(i.getState())!==JSON.stringify(w[l])&&g(w[l])});case"IMPORT_STATE":{const{nextLiftedState:w}=y.payload,C=(A=w.computedStates.slice(-1)[0])==null?void 0:A.state;if(!C)return;g(l===void 0?C:C[l]),f==null||f.send(null,w);return}case"PAUSE_RECORDING":return b=!b}return}}),x},qg=EF,N5=(e,n)=>{let t;try{t=JSON.parse(e)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}t!==void 0&&n(t)};function _F(e,n){let t;try{t=e()}catch{return}return{getItem:i=>{var a;const s=u=>u===null?null:JSON.parse(u,void 0),l=(a=t.getItem(i))!=null?a:null;return l instanceof Promise?l.then(s):s(l)},setItem:(i,a)=>t.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>t.removeItem(i)}}const tS=e=>n=>{try{const t=e(n);return t instanceof Promise?t:{then(r){return tS(r)(t)},catch(r){return this}}}catch(t){return{then(r){return this},catch(r){return tS(r)(t)}}}},NF=(e,n)=>(t,r,i)=>{let a={storage:_F(()=>localStorage),partialize:y=>y,version:0,merge:(y,A)=>({...A,...y}),...n},s=!1;const l=new Set,u=new Set;let d=a.storage;if(!d)return e((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),t(...y)},r,i);const f=()=>{const y=a.partialize({...r()});return d.setItem(a.name,{state:y,version:a.version})},m=i.setState;i.setState=(y,A)=>{m(y,A),f()};const b=e((...y)=>{t(...y),f()},r,i);i.getInitialState=()=>b;let g;const x=()=>{var y,A;if(!d)return;s=!1,l.forEach(C=>{var j;return C((j=r())!=null?j:b)});const w=((A=a.onRehydrateStorage)==null?void 0:A.call(a,(y=r())!=null?y:b))||void 0;return tS(d.getItem.bind(d))(a.name).then(C=>{if(C)if(typeof C.version=="number"&&C.version!==a.version){if(a.migrate){const j=a.migrate(C.state,C.version);return j instanceof Promise?j.then(F=>[!0,F]):[!0,j]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,C.state];return[!1,void 0]}).then(C=>{var j;const[F,M]=C;if(g=a.merge(M,(j=r())!=null?j:b),t(g,!0),F)return f()}).then(()=>{w==null||w(g,void 0),g=r(),s=!0,u.forEach(C=>C(g))}).catch(C=>{w==null||w(void 0,C)})};return i.persist={setOptions:y=>{a={...a,...y},y.storage&&(d=y.storage)},clearStorage:()=>{d==null||d.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>x(),hasHydrated:()=>s,onHydrate:y=>(l.add(y),()=>{l.delete(y)}),onFinishHydration:y=>(u.add(y),()=>{u.delete(y)})},a.skipHydration||x(),g||b},dv=NF,j5=async(e,n)=>{const t=kT(z6,"processCourseWithGemini");try{const r=await t({prompt:e,thinkingLevel:(n==null?void 0:n.thinkingLevel)||"high",maxTokens:(n==null?void 0:n.maxTokens)||16384});if(!r.data.success)throw new Error("Gemini processing failed");return r.data.text}catch(r){throw console.error("Gemini proxy error:",r),r.code==="unauthenticated"?new Error("You must be signed in to use AI features"):r.code==="resource-exhausted"?new Error("API rate limit exceeded. Please try again in a few minutes."):r.code==="failed-precondition"?new Error(r.message||"API key configuration error"):new Error(`AI processing failed: ${r.message}`)}},F8=async(e,n)=>{const t=kT(z6,"processMaterialWithGemini");try{const r=await t({prompt:e,thinkingLevel:(n==null?void 0:n.thinkingLevel)||"low",maxTokens:(n==null?void 0:n.maxTokens)||16384,useMaterialKey:!0,mediaResolution:(n==null?void 0:n.mediaResolution)||"media_resolution_high"});if(!r.data.success)throw new Error("Material processing failed");return r.data.text}catch(r){throw console.error("Material proxy error:",r),r.code==="unauthenticated"?new Error("You must be signed in to use AI features"):r.code==="resource-exhausted"?new Error("API rate limit exceeded. Please try again in a few minutes."):r.code==="failed-precondition"?new Error(r.message||"API key configuration error"):new Error(`Material processing failed: ${r.message}`)}};var T5={exports:{}},P8;function jF(){return P8||(P8=1,(()=>{var e={d:(a,s)=>{for(var l in s)e.o(s,l)&&!e.o(a,l)&&Object.defineProperty(a,l,{enumerable:!0,get:s[l]})},o:(a,s)=>Object.prototype.hasOwnProperty.call(a,s),r:a=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})}},n={};function t(a,s){for(var l=0;l<s.length;l++){var u=s[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}e.r(n),e.d(n,{default:()=>i});var r=function(){function a(){(function(u,d){if(!(u instanceof d))throw new TypeError("Cannot call a class as a function")})(this,a)}var s,l;return s=a,l=[{key:"changeHeightWidth",value:function(u,d,f,m,b,g){return f>m&&(u=Math.round(u*m/f),f=m),u>d&&(f=Math.round(f*d/u),u=d),b&&f<b&&(u=Math.round(u*b/f),f=b),g&&u<g&&(f=Math.round(f*g/u),u=g),{height:u,width:f}}},{key:"resizeAndRotateImage",value:function(u,d,f,m,b){var g=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"jpeg",x=arguments.length>6&&arguments[6]!==void 0?arguments[6]:100,y=arguments.length>7&&arguments[7]!==void 0?arguments[7]:0,A=x/100,w=document.createElement("canvas"),C=u.width,j=u.height,F=this.changeHeightWidth(j,f,C,d,m,b);!y||y!==90&&y!==270?(w.width=F.width,w.height=F.height):(w.width=F.height,w.height=F.width),C=F.width,j=F.height;var M=w.getContext("2d");return M.fillStyle="rgba(0, 0, 0, 0)",M.fillRect(0,0,C,j),M.imageSmoothingEnabled&&M.imageSmoothingQuality&&(M.imageSmoothingQuality="high"),y&&(M.rotate(y*Math.PI/180),y===90?M.translate(0,-w.width):y===180?M.translate(-w.width,-w.height):y===270?M.translate(-w.height,0):y!==0&&y!==360||M.translate(0,0)),M.drawImage(u,0,0,C,j),w.toDataURL("image/".concat(g),A)}},{key:"b64toByteArrays",value:function(u,d){for(var f=atob(u.toString().replace(/^data:image\/(png|jpeg|jpg|webp);base64,/,"")),m=[],b=0;b<f.length;b+=512){for(var g=f.slice(b,b+512),x=new Array(g.length),y=0;y<g.length;y++)x[y]=g.charCodeAt(y);var A=new Uint8Array(x);m.push(A)}return m}},{key:"b64toBlob",value:function(u,d){var f=this.b64toByteArrays(u,d);return new Blob(f,{type:d,lastModified:new Date})}},{key:"b64toFile",value:function(u,d,f){var m=this.b64toByteArrays(u,f);return new File(m,d,{type:f,lastModified:new Date})}},{key:"createResizedImage",value:function(u,d,f,m,b,g,x){var y=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"base64",A=arguments.length>8&&arguments[8]!==void 0?arguments[8]:null,w=arguments.length>9&&arguments[9]!==void 0?arguments[9]:null,C=new FileReader;if(!u)throw Error("File Not Found!");if(u.type&&!u.type.includes("image"))throw Error("File Is NOT Image!");C.readAsDataURL(u),C.onload=function(){var j=new Image;j.src=C.result,j.onload=function(){var F=a.resizeAndRotateImage(j,d,f,A,w,m,b,g),M="image/".concat(m);switch(y){case"blob":var z=a.b64toBlob(F,M);x(z);break;case"base64":x(F);break;case"file":var _=u.name.toString().replace(/(png|jpeg|jpg|webp)$/i,"").concat(m.toString()),L=a.b64toFile(F,_,M);x(L);break;default:x(F)}}},C.onerror=function(j){throw Error(j)}}}],l&&t(s,l),a}();const i={imageFileResizer:function(a,s,l,u,d,f,m,b,g,x){return r.createResizedImage(a,s,l,u,d,f,m,b,g,x)}};T5.exports=n})()),T5.exports}var TF=jF();const PT=ns(TF),OF=(e,n=5*1024*1024)=>new Promise((t,r)=>{var b;const i=((b=e.type.split("/")[1])==null?void 0:b.toLowerCase())||"unknown";if(e.size<=n&&(i==="jpeg"||i==="png"||i==="webp")){console.log(` Image already optimized: ${e.size} bytes, format: ${i}`),t({blob:e,format:i==="jpeg"?"jpg":i});return}const a=e.size>n;console.log(` Processing image: ${e.size} bytes, format: ${i}, compress: ${a}`);const s=new File([e],`image.${i}`,{type:e.type});let l="JPEG",u="jpg";(i==="png"||i==="gif")&&(l="PNG",u="png");const d=a?60:75,f=a?600:800,m=setTimeout(()=>{r(new Error("Image compression timed out after 10 seconds"))},1e4);PT.imageFileResizer(s,f,f,l,d,0,g=>{clearTimeout(m),g instanceof Blob?(console.log(` Image compressed: ${e.size}  ${g.size} bytes (${((1-g.size/e.size)*100).toFixed(1)}% reduction)`),t({blob:g,format:u})):r(new Error("Compression failed - unexpected result type"))},"blob")}),DF=async(e,n,t,r=3,i=15e3)=>{const a=mp();for(let s=1;s<=r;s++)try{const{blob:l,format:u}=await OF(e),d=`${n}_${Mi()}.${u}`,f=async()=>{const g=yc(a,`materials/${t}/${d}`),x=await $f(g,l);return{url:await Uf(x.ref),path:x.ref.fullPath,filename:d,originalSize:e.size,compressedSize:l.size}},m=new Promise((g,x)=>{setTimeout(()=>x(new Error(`Upload timeout after ${i}ms`)),i)}),b=await Promise.race([f(),m]);return console.log(`Successfully uploaded image: ${b.filename} (attempt ${s})`,{originalSize:b.originalSize,compressedSize:b.compressedSize,url:b.url}),{url:b.url,path:b.path}}catch(l){const u=l instanceof Error?l.message:"Unknown error";if(console.warn(`Upload attempt ${s}/${r} failed for ${n}: ${u}`),s===r)throw console.error(`All ${r} upload attempts failed for ${n}:`,l),new Error(`Image upload failed after ${r} attempts: ${u}`);const d=Math.min(1e3*Math.pow(2,s-1),5e3);console.log(`Waiting ${d}ms before retry...`),await new Promise(f=>setTimeout(f,d))}throw new Error("Upload failed - should not reach here")},O5=e=>{const t=`
    <svg width="400" height="300" xmlns="http://www.w3.org/2000/svg">
      <rect width="100%" height="100%" fill="#f44336"/>
      <text x="50%" y="45%" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle" dominant-baseline="middle">
        Upload Failed
      </text>
      <text x="50%" y="55%" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle" dominant-baseline="middle">
        ${e.replace(/[^\u0020-\u00FF]/g,"?").substring(0,30)}
      </text>
    </svg>
  `;try{return`data:image/svg+xml;base64,${btoa(t)}`}catch(r){return console.error("Failed to create fallback placeholder:",r),`data:image/svg+xml,${encodeURIComponent(t)}`}},IF=async(e,n,t,r=3)=>{const i=e.filter(u=>u.imageBlob),a=[];console.log(` Starting batch upload of ${i.length} images (batch size: ${r})`),console.log(" Images to upload:",i.map((u,d)=>{var f,m;return{index:d+1,slideNumber:u.slideNumber,description:u.description,blobSize:(f=u.imageBlob)==null?void 0:f.size,blobType:(m=u.imageBlob)==null?void 0:m.type}}));for(let u=0;u<i.length;u+=r){const d=Math.min(u+r,i.length),f=i.slice(u,d);console.log(`Processing batch ${Math.floor(u/r)+1}/${Math.ceil(i.length/r)} (images ${u+1}-${d})`);const m=f.map(async(b,g)=>{const x=u+g;console.log(` Starting upload for image ${x+1}/${i.length} (slide ${b.slideNumber})`);try{const y=`slide_${b.slideNumber}_image_${x+1}`,A=DF(b.imageBlob,y,n,2,1e4),w=new Promise((j,F)=>{setTimeout(()=>{F(new Error(`Individual image timeout after 15 seconds for image ${x+1}`))},15e3)}),{url:C}=await Promise.race([A,w]);return console.log(` Successfully processed image ${x+1}/${i.length}`),{url:C,title:b.description||`Image from Slide ${b.slideNumber}`,originalFilename:b.filename,slideNumber:b.slideNumber,index:x}}catch(y){return console.error(` Failed to upload image ${x+1}/${i.length} from slide ${b.slideNumber}:`,y),{url:O5(b.description||`Image from Slide ${b.slideNumber}`),title:b.description||`Image from Slide ${b.slideNumber}`,originalFilename:b.filename,slideNumber:b.slideNumber,index:x}}});try{console.log(` Waiting for batch ${Math.floor(u/r)+1} to complete...`);const b=2e4,g=new Promise((y,A)=>{setTimeout(()=>{A(new Error(`Batch ${Math.floor(u/r)+1} timeout after ${b}ms`))},b)}),x=await Promise.race([Promise.allSettled(m),g]);console.log(` Batch ${Math.floor(u/r)+1} completed, processing ${x.length} results...`),x.forEach((y,A)=>{const w=u+A;if(y.status==="fulfilled")a.push(y.value),console.log(` Image ${w+1}/${i.length} uploaded successfully`);else{console.error(` Image ${w+1}/${i.length} failed:`,y.reason);const C=f[A];a.push({url:O5(C.description||`Image from Slide ${C.slideNumber}`),title:C.description||`Image from Slide ${C.slideNumber}`,originalFilename:C.filename,slideNumber:C.slideNumber})}t==null||t(w+1,i.length)})}catch(b){console.error(` Batch ${Math.floor(u/r)+1} failed or timed out:`,b),f.forEach((g,x)=>{const y=u+x;console.log(` Creating fallback for timed out image ${y+1}/${i.length}`),a.push({url:O5(g.description||`Image from Slide ${g.slideNumber}`),title:g.description||`Image from Slide ${g.slideNumber}`,originalFilename:g.filename,slideNumber:g.slideNumber}),t==null||t(y+1,i.length)})}d<i.length&&(console.log(" Waiting 1 second before next batch..."),await new Promise(b=>setTimeout(b,1e3)))}a.sort((u,d)=>(u.index||0)-(d.index||0));const s=a.filter(u=>!u.url.startsWith("data:")).length,l=a.length-s;return console.log(`Upload complete: ${s} successful, ${l} failed out of ${a.length} total`),a};class LF{constructor(){nt(this,"activeBlobUrls",new Set);console.log("MaterialImportService initialized with secure proxy mode")}cleanupBlobUrls(){this.activeBlobUrls.forEach(n=>{URL.revokeObjectURL(n)}),this.activeBlobUrls.clear()}createTrackedBlobUrl(n){const t=URL.createObjectURL(n);return this.activeBlobUrls.add(t),t}async processMaterialContent(n,t,r,i,a,s){if(!(n!=null&&n.trim()))throw new Error("No content provided for processing");a==null||a({stage:"analyzing",percentage:20,currentOperation:"Analyzing document structure..."});const l=n.length,u=Math.ceil(l/4);if(l>15e3||u>4e3){console.log(`Document is large (${l} chars, ~${u} tokens), using chunked processing`);const d=n.substring(0,15e3);return console.log("Truncating input to prevent AI response truncation"),this.processSingleMaterial(d+`

[Content truncated for processing]`,t,r,i,a,s)}return this.processSingleMaterial(n,t,r,i,a,s)}async processSingleMaterial(n,t,r,i,a,s){const l=this.buildMaterialAnalysisPrompt(n,t,r,i,s);a==null||a({stage:"analyzing",percentage:40,currentOperation:"Processing with AI..."});try{const u=await F8(l,{thinkingLevel:"low",maxTokens:(i==null?void 0:i.maxOutputTokens)||16384,mediaResolution:"media_resolution_high"});if(!u||u.trim().length===0)throw new Error("Empty response from AI service");a==null||a({stage:"structuring",percentage:70,currentOperation:"Structuring content..."});let d=u.replace(/```json\n?/g,"").replace(/```\n?/g,"").trim();console.log("Raw response text (first 1000 chars):",u.substring(0,1e3)),console.log("Cleaned text (first 1000 chars):",d.substring(0,1e3)),d=this.repairTruncatedJSON(d);let f;try{f=JSON.parse(d)}catch(m){throw console.error("JSON parsing failed:",m),console.error("Raw response text (first 1000 chars):",u.substring(0,1e3)),console.error("Cleaned text (first 1000 chars):",d.substring(0,1e3)),new Error("AI response format invalid - unable to parse JSON")}if(!f||typeof f!="object")throw new Error("AI response is not a valid object");return a==null||a({stage:"complete",percentage:100,currentOperation:"Processing complete!"}),this.validateAndSanitizeMaterialResponse(f,t,r)}catch(u){throw console.error("Material Import AI Error:",u),a==null||a({stage:"error",percentage:0,currentOperation:`Error: ${u instanceof Error?u.message:"Unknown error"}`}),u instanceof Error&&(u.message.includes("AI processing failed")||u.message.includes("Material processing failed")||u.message.includes("signed in")||u.message.includes("rate limit")||u.message.includes("API key configuration")||u.message.includes("AI response")||u.message.includes("JSON parsing"))?u:new Error(`Material processing failed: ${u instanceof Error?u.message:"Unknown error"}`)}}async processLargeMaterial(n,t,r,i,a){a==null||a({stage:"analyzing",percentage:10,currentOperation:"Processing large document with chunking..."});const s=this.chunkMaterialText(n);let l=null;const u=[];a==null||a({stage:"analyzing",percentage:30,currentOperation:`Processing main content (1/${s.length})...`,subSteps:{current:1,total:s.length,description:"Analyzing primary structure"}}),l=await this.processSingleMaterial(s[0],t,r,i);for(let f=1;f<s.length;f++){a==null||a({stage:"analyzing",percentage:30+40*f/s.length,currentOperation:`Processing additional content (${f+1}/${s.length})...`,subSteps:{current:f+1,total:s.length,description:"Extracting supplementary details"}});try{const m=await this.processChunkForAdditionalContent(s[f],t,r);m&&u.push(m)}catch(m){console.warn(`Failed to process chunk ${f+1}:`,m)}}a==null||a({stage:"structuring",percentage:80,currentOperation:"Merging content from all sections..."});const d=this.mergeChunkedMaterialResults(l,u);return a==null||a({stage:"complete",percentage:100,currentOperation:"Large document processing complete!"}),d}buildMaterialAnalysisPrompt(n,t,r,i,a){const s=this.getFileTypeContext(r);return`
Analyze this ${s} educational material and extract structured information for course content management.

File: ${t}
Type: ${r}

CONTENT:
${n}

${a!=null&&a.images&&a.images.length>0?`
DETECTED IMAGES:
${a.images.map((l,u)=>`${u+1}. ${l.description||`Image ${u+1}`}${l.slideNumber?` (Slide ${l.slideNumber})`:""}${l.altText?` - ${l.altText}`:""}`).join(`
`)}

CRITICAL IMAGE PLACEMENT INSTRUCTIONS:
- Each image MUST be placed in the section corresponding to its slide number
- If "Image X (Slide Y)" is detected, place it in the section created from Slide Y content
- Each image should have a unique, descriptive title based on its context
- Include slideNumber property in each image object for proper matching
- DO NOT reuse the same image in multiple sections
`:""}

Please extract and structure this content into a comprehensive educational material format. Focus on:

1. **Document Structure**: Identify main topics, subtopics, and hierarchical organization
2. **Content Quality**: Preserve important educational information and context
3. **Visual Elements**: Note references to images, diagrams, charts (even if not extractable)
4. **Links and Resources**: Extract any URLs, references, or external resources mentioned
5. **Learning Context**: Maintain educational value and logical flow

${s==="presentation slide deck"?`
SPECIAL INSTRUCTIONS FOR PRESENTATIONS:
- Each slide should become a section or subsection
- Preserve slide order and hierarchy
- Note slide titles and main content points
- Identify slide transitions and logical groupings
- Extract speaker notes or additional context if present
`:""}

Return ONLY a JSON object with this exact structure:
{
  "title": "Material title (extracted from content or filename)",
  "description": "Brief description of the material content",
  "header": {
    "title": "Introduction or Overview",
    "content": "HTML formatted introductory content"
  },
  "footer": {
    "title": "Summary or Conclusion", 
    "content": "HTML formatted concluding content"
  },
  "sections": [
    {
      "title": "Section Title",
      "content": "HTML formatted main section content",
      "subsections": [
        {
          "title": "Subsection Title",
          "content": "HTML formatted subsection content",
          "subSubsections": [
            {
              "title": "Sub-subsection Title",
              "content": "HTML formatted detailed content",
              "images": [{"url": "", "title": "Image description", "description": "Context or caption", "slideNumber": 2}],
              "links": [{"title": "Link title", "url": "URL if available", "description": "Link context"}]
            }
          ],
          "images": [{"url": "", "title": "Image description", "description": "Context or caption", "slideNumber": 3}],
          "links": [{"title": "Link title", "url": "URL if available", "description": "Link context"}]
        }
      ],
      "images": [{"url": "", "title": "Image description", "description": "Context or caption", "slideNumber": 4}],
      "links": [{"title": "Link title", "url": "URL if available", "description": "Link context"}]
    }
  ],
  "sourceInfo": {
    "fileName": "${t}",
    "fileType": "${r}",
    "extractedAt": "${new Date().toISOString()}",
    "originalFileReference": "Reference to original file for debugging"
  },
  "images": [{"url": "", "title": "Overall image description", "description": "Context", "slideNumber": 1}],
  "links": [{"title": "Overall link title", "url": "URL", "description": "Link context"}]
}

CRITICAL JSON FORMATTING RULES:
- Return ONLY valid JSON - no comments, no explanations, no additional text
- Use proper HTML tags for content formatting (<p>, <h1>-<h6>, <ul>, <ol>, <li>, <strong>, <em>, <br>)
- Preserve educational structure and hierarchy
- Create logical sections based on content organization
- For images: Use EMPTY STRINGS for URLs ("url": "") with descriptive titles, context, and slideNumber property
-- IMPORTANT: Each image object MUST include "slideNumber" property matching the source slide
-- NEVER use placeholder filenames like "placeholder_image_1.png" - always use empty strings for URLs
- For links: Extract actual URLs when present, provide context
- Complete ALL sections and subsections - do not use comments like "// ... continue"
- Ensure all JSON arrays and objects are properly closed
- Maintain educational value and readability

IMPORTANT: Your response must be complete, valid JSON that can be parsed directly. Do not include any explanatory text, comments, or incomplete sections. End your response when the JSON object is complete.
`}async processChunkForAdditionalContent(n,t,r){const i=`
Extract additional educational content from this section of the material:

File: ${t}
Type: ${r}

CONTENT:
${n}

Focus on extracting any additional sections, detailed information, or supplementary content that should be included in the educational material.

Return ONLY a JSON object with additional sections, images, or links:
{
  "sections": [...],
  "images": [...],
  "links": [...]
}
`;try{const a=await F8(i,{thinkingLevel:"low",maxTokens:8192,mediaResolution:"media_resolution_high"});if(!a||a.trim().length===0)return null;let s;try{s=this.extractValidJSON(a)}catch(l){try{s=this.fallbackJSONExtraction(a)}catch{throw l}}return JSON.parse(s)}catch(a){return console.warn("Failed to process additional content chunk:",a),null}}chunkMaterialText(n,t=25e3){const r=[],i=n.split(`
`);let a="";for(const s of i)a.length+s.length>t&&a.length>0?(r.push(a.trim()),a=s):a+=(a?`
`:"")+s;return a.trim()&&r.push(a.trim()),r.length>0?r:[n]}mergeChunkedMaterialResults(n,t){const r={...n};for(const i of t)i.sections&&Array.isArray(i.sections)&&(r.sections=[...r.sections,...i.sections]),i.images&&Array.isArray(i.images)&&(r.images=[...r.images||[],...i.images]),i.links&&Array.isArray(i.links)&&(r.links=[...r.links||[],...i.links]);return r}extractValidJSON(n){let t=n.replace(/```json\n?/g,"").replace(/```\n?/g,"").trim();t=t.replace(/\/\/.*$/gm,"").replace(/\/\*[\s\S]*?\*\//g,"");const r=t.indexOf("{");if(r===-1)throw new Error("No JSON object found in response");t=t.substring(r);let i=0,a=-1,s=!1,l=!1;for(let f=0;f<t.length;f++){const m=t[f];if(l){l=!1;continue}if(m==="\\"){l=!0;continue}if(m==='"'&&!l){s=!s;continue}if(!s){if(m==="{")i++;else if(m==="}"&&(i--,i===0)){a=f+1;break}}}if(a===-1)throw new Error("No matching closing brace found for JSON object");let u=t.substring(0,a);u=u.replace(/,(\s*[}\]])/g,"$1"),this.detectTruncatedJSON(u)&&(console.warn("Detected truncated JSON response, attempting repair"),u=this.attemptJSONRepair(u));try{return JSON.parse(u),u}catch(f){console.warn("Initial JSON parsing failed, attempting to fix common issues:",f);const m=this.attemptJSONRepair(u);try{return JSON.parse(m),m}catch(b){throw console.error("JSON repair failed:",b),new Error(`Invalid JSON structure: ${b.message}`)}}}detectTruncatedJSON(n){const t=n.trim(),r=[/"[^"]*$/,/:\s*$/,/,\s*$/,/"[a-zA-Z]+\w*$/,/[a-zA-Z]+\w*$/,/\[\s*$/,/{\s*$/];for(const a of r)if(a.test(t))return console.log(`Truncation detected: ${a.toString()}`),!0;const i=t.charAt(t.length-1);return i!=="}"&&i!=="]"?(console.log(`Truncation detected: JSON doesn't end with } or ], ends with: "${i}"`),!0):!1}detectTruncatedResponse(n){const r=n.trim().replace(/```json\n?/g,"").replace(/```\n?/g,"").trim(),i=[/"[^"]*$/,/\w+$/,/:\s*$/,/,\s*$/,!r.endsWith("}"),!r.endsWith("]"),r.length<500];for(let a=0;a<i.length-1;a++){const s=i[a];if(s instanceof RegExp&&s.test(r))return!0}return!!(i[i.length-3]||i[i.length-2]||i[i.length-1])}attemptJSONRepair(n){let t=n;const r=t.split(`
`),i=[];for(const d of r){const f=d.trim();f.startsWith("//")||f.includes("... (Continue")||f.includes("continue structuring")||f.includes("similarly")||i.push(d)}t=i.join(`
`),t=t.replace(/,(\s*[}\]])/g,"$1");const a=(t.match(/{/g)||[]).length,s=(t.match(/}/g)||[]).length,l=(t.match(/\[/g)||[]).length,u=(t.match(/\]/g)||[]).length;for(let d=0;d<a-s;d++)t+="}";for(let d=0;d<l-u;d++)t+="]";return t}fallbackJSONExtraction(n){console.log("Attempting fallback JSON extraction...");let t=n.replace(/```json\n?/g,"").replace(/```\n?/g,"").trim();t=t.replace(/\/\/.*$/gm,"").replace(/\/\*[\s\S]*?\*\//g,"");const r=t.indexOf("{");if(r===-1)throw new Error("No JSON object found in response");t=t.substring(r);const i=[/}\s*$/m,/}\s*\n\s*[A-Z]/m,/}\s*\n\s*This/m,/}\s*\n\s*Note:/m];let a=-1;for(const l of i){const u=t.match(l);if(u&&u.index!==void 0){const d=u.index+u[0].indexOf("}")+1;(a===-1||d<a)&&(a=d)}}a>0&&(t=t.substring(0,a));const s=this.attemptJSONRepair(t);try{return JSON.parse(s),s}catch{return console.log("Attempting aggressive JSON repair..."),this.aggressiveJSONRepair(t)}}aggressiveJSONRepair(n){let t=n;const r=t.split(`
`),i=[];for(const d of r){const f=d.trim();if(f.startsWith("//")||f.includes("... (")||f.includes("continue")||f.includes("similarly")||f.includes("Remember to")||f.includes("This structure")||f.length>0&&!f.includes('"')&&!f.includes("{")&&!f.includes("}")&&!f.includes("[")&&!f.includes("]"))break;i.push(d)}t=i.join(`
`),t=t.replace(/,(\s*[}\]])/g,"$1");const a=(t.match(/{/g)||[]).length,s=(t.match(/}/g)||[]).length,l=(t.match(/\[/g)||[]).length,u=(t.match(/\]/g)||[]).length;for(let d=0;d<a-s;d++)t+=`
}`;for(let d=0;d<l-u;d++)t+=`
]`;return t=t.replace(/,(\s*[}\]])/g,"$1"),t}repairTruncatedJSON(n){let t=n;const r=t.split(`
`),i=[];for(const d of r){const f=d.trim();if(f.length===0){i.push(d);continue}if(f.match(/^"[^"]*$/)){i.push('"": ""');break}if(f.match(/:\s*"[^"]*$/)){i.push(f.replace(/:\s*"[^"]*$/,': ""'));break}if(f.match(/^[a-zA-Z]+\w*$/))break;i.push(d)}t=i.join(`
`),t=t.replace(/,(\s*[}\]])/g,"$1"),t=t.replace(/,\s*$/,"");const a=(t.match(/{/g)||[]).length,s=(t.match(/}/g)||[]).length,l=(t.match(/\[/g)||[]).length,u=(t.match(/\]/g)||[]).length;console.log(`JSON structure analysis: ${a} open braces, ${s} close braces, ${l} open brackets, ${u} close brackets`);for(let d=0;d<l-u;d++)t+=`
]`;for(let d=0;d<a-s;d++)t+=`
}`;return t=t.replace(/,(\s*[}\]])/g,"$1"),console.log("Repaired JSON (first 1000 chars):",t.substring(0,1e3)),t}getFileTypeContext(n){const t=n.toLowerCase();return t.includes("presentation")||t.includes("powerpoint")||t.includes("pptx")?"presentation slide deck":t.includes("pdf")?"PDF document":t.includes("word")||t.includes("docx")?"Word document":"document"}validateAndSanitizeMaterialResponse(n,t,r){var a,s,l,u,d;const i={title:n.title||t.replace(/\.[^/.]+$/,"")||"Untitled Material",description:n.description||"",header:{title:((a=n.header)==null?void 0:a.title)||"Introduction",content:((s=n.header)==null?void 0:s.content)||""},footer:{title:((l=n.footer)==null?void 0:l.title)||"Summary",content:((u=n.footer)==null?void 0:u.content)||""},sections:[],sourceInfo:{fileName:t,fileType:r,extractedAt:new Date().toISOString(),originalFileReference:((d=n.sourceInfo)==null?void 0:d.originalFileReference)||t},images:Array.isArray(n.images)?n.images:[],links:Array.isArray(n.links)?n.links:[]};return Array.isArray(n.sections)&&(i.sections=n.sections.map(f=>({title:f.title||"Section",content:f.content||"",subsections:Array.isArray(f.subsections)?f.subsections.map(m=>({title:m.title||"Subsection",content:m.content||"",subSubsections:Array.isArray(m.subSubsections)?m.subSubsections.map(b=>({title:b.title||"Sub-subsection",content:b.content||"",images:Array.isArray(b.images)?b.images:[],links:Array.isArray(b.links)?b.links:[]})):[],images:Array.isArray(m.images)?m.images:[],links:Array.isArray(m.links)?m.links:[]})):[],images:Array.isArray(f.images)?f.images:[],links:Array.isArray(f.links)?f.links:[]}))),i.sections.length===0&&i.sections.push({title:"Main Content",content:"Content extracted from the uploaded material.",subsections:[],images:[],links:[]}),i}convertToMaterialFormat(n,t,r,i){const a=(u,d=400,f=300)=>{const m=u.replace(/[^\u0020-\u00FF]/g,"?").substring(0,30),b=`
        <svg width="${d}" height="${f}" xmlns="http://www.w3.org/2000/svg">
          <rect width="100%" height="100%" fill="#4a90e2"/>
          <text x="50%" y="50%" font-family="Arial, sans-serif" font-size="14" fill="white" text-anchor="middle" dominant-baseline="middle">
            ${m}
          </text>
        </svg>
      `;try{return`data:image/svg+xml;base64,${btoa(b)}`}catch(g){return console.error("Failed to create placeholder image URL:",g),`data:image/svg+xml,${encodeURIComponent(b)}`}},s=u=>{const d=new Map;i!=null&&i.images&&i.images.forEach(g=>{g.slideNumber&&g.imageBlob&&(d.has(g.slideNumber)||d.set(g.slideNumber,[]),d.get(g.slideNumber).push(g))});const f=new Map,m=(u==null?void 0:u.map((g,x)=>{let y="";if(g.slideNumber&&d.has(g.slideNumber)){const w=d.get(g.slideNumber);f.has(g.slideNumber)||f.set(g.slideNumber,new Set);const C=f.get(g.slideNumber);let j=null;if(g.title||g.description){const F=(g.title||g.description).toLowerCase();j=w.find(M=>{const z=(M.description||"").toLowerCase();return!C.has(M.embedId||"")&&z.includes(F.split(" ")[0])})||null}if(j||(j=w.find(F=>!C.has(F.embedId||""))||null),!j&&w.length>0){const F=x%w.length;j=w[F]}j!=null&&j.imageBlob&&(j.embedId&&C.add(j.embedId),y=this.createTrackedBlobUrl(j.imageBlob),console.log(`Using extracted image blob for slide ${g.slideNumber} (${C.size}/${w.length}):`,{slideNumber:g.slideNumber,imageIndex:x,embedId:j.embedId,blobSize:j.imageBlob.size,blobType:j.imageBlob.type,matchedBy:j.description||"position"}))}y||(g.url&&g.url.trim()&&(g.url.startsWith("data:")||g.url.startsWith("http"))&&!g.url.includes("placeholder_image")?y=g.url:y=a(g.title||"Image"));const A={url:y,title:g.title||g.description||"Detected Image"};return console.log("Enhanced image (preview):",A),A}))||[],b=Array.from(d.values()).reduce((g,x)=>g+x.length,0);return console.log(`Enhanced ${m.length} images for material preview (${b} extracted images available across ${d.size} slides)`),m},l=u=>{var d;return{id:Mi(),title:u.title,content:u.content,subsections:((d=u.subsections)==null?void 0:d.map(f=>{var m;return{id:Mi(),title:f.title,content:f.content,subSubsections:((m=f.subSubsections)==null?void 0:m.map(b=>({id:Mi(),title:b.title,content:b.content,images:s(b.images||[]),links:b.links||[]})))||[],images:s(f.images||[]),links:f.links||[]}}))||[],images:s(u.images||[]),links:u.links||[]}};return{course:t,title:n.title,header:n.header,footer:n.footer,sections:n.sections.map(l),author:r,published:!1,sourceInfo:n.sourceInfo}}async convertToMaterialFormatWithImageUpload(n,t,r,i,a,s){var g;let l=[];if(a!=null&&a.images)try{console.log(` Starting image upload process for ${a.images.length} extracted images...`),console.log(" Image metadata:",a.images.map(x=>{var y;return{slideNumber:x.slideNumber,description:x.description,hasBlob:!!x.imageBlob,blobSize:(y=x.imageBlob)==null?void 0:y.size}})),l=await IF(a.images,i,s),console.log(` Successfully uploaded ${l.length} images to Firebase Storage`),console.log(" Uploaded image URLs:",l.map(x=>({title:x.title,url:x.url.substring(0,100)+"...",slideNumber:x.slideNumber})))}catch(x){console.error(" Failed to upload extracted images:",x)}else console.log(" No images to upload - extractionMetadata.images is empty or undefined");const u=(x,y=400,A=300)=>{const w=x.substring(0,30),C=`
        <svg width="${y}" height="${A}" xmlns="http://www.w3.org/2000/svg">
          <rect width="100%" height="100%" fill="#4a90e2"/>
          <text x="50%" y="50%" font-family="Arial, sans-serif" font-size="14" fill="white" text-anchor="middle" dominant-baseline="middle">
            ${w}
          </text>
        </svg>
      `;return`data:image/svg+xml;base64,${btoa(C)}`},d=x=>{const y=new Map;l.forEach(C=>{C.slideNumber&&(y.has(C.slideNumber)||y.set(C.slideNumber,[]),y.get(C.slideNumber).push(C))});const A=new Set,w=(x==null?void 0:x.map((C,j)=>{let F=null;if(C.slideNumber&&y.has(C.slideNumber)){const z=y.get(C.slideNumber);if(F=z.find(_=>!A.has(_.url))||null,!F&&z.length>0){const _=j%z.length;F=z[_]}}if(!F){const z=(C.title||C.description||"").toLowerCase().split(" ");F=l.find(_=>{if(A.has(_.url))return!1;const L=_.title.toLowerCase().split(" ");return z.some($=>$.length>3&&L.some(Z=>Z.includes($)))})||null}if(F||(F=l.find(z=>!A.has(z.url))||null),!F&&l.length>0){const z=j%l.length;F=l[z]}F&&A.add(F.url);const M={url:(F==null?void 0:F.url)||(C.url&&C.url.trim()?C.url:u(C.title||"Image")),title:(F==null?void 0:F.title)||C.title||C.description||"Detected Image"};return console.log("Enhanced image with upload:",{...M,url:M.url.substring(0,100)+"...",isUploaded:!!F,imageIndex:j,originalSlideNumber:C.slideNumber,matchedSlideNumber:F==null?void 0:F.slideNumber,matchStrategy:F?F.slideNumber===C.slideNumber?"slideNumber":M.title.includes(C.title||"")?"title":"sequential":"placeholder",usedCount:A.size,totalAvailable:l.length}),M}))||[];return console.log(`Enhanced ${w.length} images for material (${l.length} uploaded, ${A.size} used)`),w},f=x=>{var y;return{id:Mi(),title:x.title,content:x.content,images:d(x.images||[]),links:x.links||[],subsections:((y=x.subsections)==null?void 0:y.map(m))||[]}},m=x=>{var y;return{id:Mi(),title:x.title,content:x.content,images:d(x.images||[]),links:x.links||[],subSubsections:((y=x.subSubsections)==null?void 0:y.map(b))||[]}},b=x=>({id:Mi(),title:x.title,content:x.content,images:d(x.images||[]),links:x.links||[]});return{course:t,title:n.title,header:n.header||{title:"",content:""},footer:n.footer||{title:"",content:""},sections:((g=n.sections)==null?void 0:g.map(f))||[],author:r,published:!1,scheduledTimestamp:null}}}let D5=null;const nS=()=>(D5||(D5=new LF),D5),RF=async e=>{try{const n=await wi(()=>import("./pdf-VQKGuvxX.js"),[]),t="";n.GlobalWorkerOptions.workerSrc=`${t}/js/pdf.worker.min.js`;const r=await e.arrayBuffer(),i=await n.getDocument({data:r}).promise,a=i.numPages;let s="";for(let l=1;l<=a;l++){const f=(await(await i.getPage(l)).getTextContent()).items.filter(m=>m&&typeof m.str=="string").map(m=>m.str).join(" ").trim();f&&(s+=f+`

`)}return{text:s.trim(),metadata:{pageCount:a,wordCount:s.trim().split(/\s+/).length,fileSize:e.size,extractionMethod:"PDF.js"}}}catch(n){throw{message:"Failed to extract text from PDF file. Please ensure the PDF contains selectable text.",code:"PDF_EXTRACTION_ERROR",originalError:n instanceof Error?n:new Error(String(n))}}},MF=async e=>{try{const n=await wi(()=>import("./index-gpDNOp2m.js").then(i=>i.i),__vite__mapDeps([0,1])),t=await e.arrayBuffer(),r=await n.extractRawText({arrayBuffer:t});return r.messages&&r.messages.length>0&&console.warn("DOCX extraction warnings:",r.messages),{text:r.value.trim(),metadata:{wordCount:r.value.trim().split(/\s+/).length,fileSize:e.size,extractionMethod:"Mammoth"}}}catch(n){throw{message:"Failed to extract text from Word document. Please ensure the file is not corrupted.",code:"DOCX_EXTRACTION_ERROR",originalError:n instanceof Error?n:new Error(String(n))}}},FF=async e=>{var n,t;try{const r=(await wi(async()=>{const{default:m}=await import("./index-CZYWMsg6.js").then(b=>b.i);return{default:m}},__vite__mapDeps([2,1]))).default,i=await e.arrayBuffer(),a=new r(i);let s="",l=0;const u=[],d=Object.keys(a.files).filter(m=>m.startsWith("ppt/slides/slide")&&m.endsWith(".xml"));l=d.length;for(const m of d)try{const b=a.files[m].asText(),g=parseInt(((n=m.match(/slide(\d+)\.xml/))==null?void 0:n[1])||"0"),x=b.matchAll(/<a:blip[^>]*r:embed="([^"]*)"[^>]*>/g);for(const w of x){const C=w[1],j=b.match(new RegExp('<p:cNvPr[^>]*name="([^"]*)"[^>]*>',"i")),F=b.match(new RegExp('<p:cNvPr[^>]*descr="([^"]*)"[^>]*>',"i")),M=b.replace(/<a:t[^>]*>(.*?)<\/a:t>/g,"$1 ").replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim();let z=`Image on slide ${g}`;const _=["chart","graph","diagram","figure","table","photo","image","illustration","screenshot","logo","flowchart","timeline","comparison","data","results","example","structure","process"],L=M.toLowerCase().split(/\s+/),$=_.filter(O=>L.some(T=>T.includes(O)));if($.length>0)z=`${$[0].charAt(0).toUpperCase()+$[0].slice(1)} (Slide ${g})`;else if(M.length>0){const O=L.slice(0,3).join(" ");O.length>5&&(z=`Image: ${O}... (Slide ${g})`)}let Z;try{const O=`ppt/slides/_rels/slide${g}.xml.rels`;if(a.files[O]){const R=a.files[O].asText().match(new RegExp(`Id="${C}"[^>]*Target="([^"]*)"`,"i"));if(R){const N=R[1],G=N.startsWith("../")?`ppt/${N.substring(3)}`:`ppt/slides/${N}`;if(a.files[G]){const W=a.files[G].asUint8Array();let Q="image/jpeg";const J=G.toLowerCase();if(J.includes(".png"))Q="image/png";else if(J.includes(".gif"))Q="image/gif";else if(J.includes(".bmp"))Q="image/bmp";else if(J.includes(".webp"))Q="image/webp";else if(J.includes(".emf")||J.includes(".wmf")){console.warn(`Skipping unsupported vector image format: ${G}`);continue}const se=W.slice(0).buffer;Z=new Blob([se],{type:Q}),console.log(`Extracted image blob for slide ${g}:`,{size:Z.size,type:Q,path:G})}}}}catch(O){console.warn(`Failed to extract image blob for ${C} on slide ${g}:`,O)}u.push({slideNumber:g,description:(j==null?void 0:j[1])||z,altText:(F==null?void 0:F[1])||void 0,filename:C,embedId:C,imageBlob:Z})}const y=b.replace(/<a:t[^>]*>(.*?)<\/a:t>/g,"$1 ").replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim();y&&(s+=`
--- Slide ${g} ---
${y}
`);const A=u.filter(w=>w.slideNumber===g);A.length>0&&(s+=`
[IMAGES ON SLIDE ${g}]: `,A.forEach(w=>{s+=`"${w.description}"${w.altText?` (${w.altText})`:""}, `}),s=s.slice(0,-2)+`
`)}catch(b){console.warn(`Failed to extract text from ${m}:`,b)}const f=Object.keys(a.files).filter(m=>m.startsWith("ppt/notesSlides/notesSlide")&&m.endsWith(".xml"));for(const m of f)try{const g=a.files[m].asText().replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim();if(g){const x=((t=m.match(/notesSlide(\d+)\.xml/))==null?void 0:t[1])||"unknown";s+=`
--- Notes for Slide ${x} ---
${g}
`}}catch(b){console.warn(`Failed to extract notes from ${m}:`,b)}if(!s.trim())throw new Error("No text content found in PowerPoint file");return{text:s.trim(),metadata:{slideCount:l,wordCount:s.trim().split(/\s+/).length,fileSize:e.size,extractionMethod:"PizZip",images:u.length>0?u:void 0}}}catch(r){throw{message:"Failed to extract text from PowerPoint file. Please ensure the file is not corrupted and contains text content.",code:"PPTX_EXTRACTION_ERROR",originalError:r instanceof Error?r:new Error(String(r))}}},PF=async e=>{try{const n=await e.text();return{text:n.trim(),metadata:{wordCount:n.trim().split(/\s+/).length,fileSize:e.size,extractionMethod:"Native"}}}catch(n){throw{message:"Failed to extract text from text file",code:"TXT_EXTRACTION_ERROR",originalError:n instanceof Error?n:new Error(String(n))}}},zT=async e=>{if(!e)throw{message:"No file provided",code:"NO_FILE_ERROR"};const n=e.type.toLowerCase(),t=e.name.toLowerCase();try{if(n==="application/pdf"||t.endsWith(".pdf"))return await RF(e);if(n==="application/vnd.openxmlformats-officedocument.wordprocessingml.document"||t.endsWith(".docx"))return await MF(e);if(n==="application/vnd.openxmlformats-officedocument.presentationml.presentation"||t.endsWith(".pptx"))return await FF(e);if(n==="text/plain"||t.endsWith(".txt"))return await PF(e);throw{message:`Unsupported file format: ${n||"unknown"}. Supported formats: PDF (.pdf), Word (.docx), PowerPoint (.pptx), Text (.txt)`,code:"UNSUPPORTED_FORMAT_ERROR"}}catch(r){throw r&&typeof r=="object"&&"code"in r?r:{message:`Failed to extract text from ${e.name}`,code:"GENERIC_EXTRACTION_ERROR",originalError:r instanceof Error?r:new Error(String(r))}}},qT=e=>{const t=["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","text/plain"],r=[".pdf",".docx",".pptx",".txt"];if(e.size>524288e3)return{isValid:!1,error:`File size (${(e.size/1024/1024).toFixed(1)}MB) exceeds the maximum limit of 500MB.`};const i=e.type.toLowerCase(),a=e.name.toLowerCase(),s=t.includes(i),l=r.some(u=>a.endsWith(u));return!s&&!l?{isValid:!1,error:`Unsupported file format. Please upload files with extensions: ${r.join(", ")}`}:{isValid:!0}},BT=e=>{const n=e.type.toLowerCase(),t=e.name.toLowerCase();return n==="application/pdf"||t.endsWith(".pdf")?"PDF Document":n==="application/vnd.openxmlformats-officedocument.wordprocessingml.document"||t.endsWith(".docx")?"Word Document":n==="application/vnd.openxmlformats-officedocument.presentationml.presentation"||t.endsWith(".pptx")?"PowerPoint Presentation":n==="text/plain"||t.endsWith(".txt")?"Text File":"Unknown Format"},zF=e=>{const n=e.size/1048576,t=e.type.toLowerCase();let r=0;return t==="application/pdf"?r=Math.max(2,n*.5):t==="application/vnd.openxmlformats-officedocument.wordprocessingml.document"?r=Math.max(1,n*.3):t==="application/vnd.openxmlformats-officedocument.presentationml.presentation"?r=Math.max(1.5,n*.4):r=Math.max(.5,n*.1),Math.round(r)};class qF{constructor(){nt(this,"storage",mp());nt(this,"DEFAULT_CHUNK_SIZE",5*1024*1024);nt(this,"DEFAULT_MAX_RETRIES",3);nt(this,"DEFAULT_TIMEOUT",6e4)}async uploadLargeFile(n,t,r={}){const i=Date.now(),{chunkSize:a=this.DEFAULT_CHUNK_SIZE,maxRetries:s=this.DEFAULT_MAX_RETRIES,timeoutMs:l=this.DEFAULT_TIMEOUT,onProgress:u,onChunkComplete:d}=r,f=500*1024*1024;if(n.size>f)throw new Error(`File size (${(n.size/1024/1024).toFixed(1)}MB) exceeds maximum limit of 500MB`);if(!(n.size>a))return this.uploadStandardFile(n,t,u);console.log(` Starting chunked upload for ${n.name} (${(n.size/1024/1024).toFixed(1)}MB)`),u==null||u({stage:"preparing",percentage:0,bytesUploaded:0,totalBytes:n.size,currentOperation:"Preparing file for chunked upload..."});const b=this.createChunkMetadata(n,a),g=Mi(),x=`${t}_chunks_${g}`;u==null||u({stage:"preparing",percentage:5,totalChunks:b.length,bytesUploaded:0,totalBytes:n.size,currentOperation:`Created ${b.length} chunks for upload...`});try{await this.uploadChunks(n,b,x,{maxRetries:s,timeoutMs:l,onProgress:w=>{const C=this.calculateOverallProgress(b,w);u==null||u({stage:"uploading",percentage:5+C*.85,currentChunk:w.currentChunk,totalChunks:b.length,bytesUploaded:w.bytesUploaded,totalBytes:n.size,currentOperation:w.currentOperation,estimatedTimeRemaining:this.estimateTimeRemaining(i,C)})},onChunkComplete:d}),u==null||u({stage:"assembling",percentage:90,totalChunks:b.length,bytesUploaded:n.size,totalBytes:n.size,currentOperation:"Assembling chunks into final file..."});const y=await this.assembleChunks(n,b,t,g);u==null||u({stage:"completed",percentage:100,totalChunks:b.length,bytesUploaded:n.size,totalBytes:n.size,currentOperation:"Upload completed successfully!"});const A=Date.now()-i;return console.log(` Chunked upload completed in ${(A/1e3).toFixed(1)}s`),{...y,chunks:b.length,uploadTime:A}}catch(y){throw console.error(" Chunked upload failed:",y),await this.cleanupFailedUpload(b),y}}createChunkMetadata(n,t){const r=[];let i=0;for(;i<n.size;){const a=Math.min(i+t,n.size);r.push({index:r.length,size:a-i,start:i,end:a,retries:0}),i=a}return r}async uploadChunks(n,t,r,i){const{maxRetries:a,timeoutMs:s,onProgress:l,onChunkComplete:u}=i;let d=0;const f=3;for(let m=0;m<t.length;m+=f){const g=t.slice(m,Math.min(m+f,t.length)).map(async x=>{const y=n.slice(x.start,x.end),A=`${r}/chunk_${x.index.toString().padStart(4,"0")}`;let w=null;for(let C=0;C<=a;C++)try{l==null||l({currentChunk:x.index+1,bytesUploaded:d,currentOperation:`Uploading chunk ${x.index+1}/${t.length} (attempt ${C+1})`});const j=await this.uploadSingleChunk(y,A,s);x.uploadUrl=j.url,x.uploadPath=j.path,d+=x.size,u==null||u(x.index,t.length),console.log(` Chunk ${x.index+1}/${t.length} uploaded successfully`);return}catch(j){w=j,x.retries=C+1,C<a&&(console.warn(` Chunk ${x.index+1} failed (attempt ${C+1}), retrying...`),await this.delay(Math.pow(2,C)*1e3))}throw new Error(`Failed to upload chunk ${x.index+1} after ${a+1} attempts: ${w==null?void 0:w.message}`)});await Promise.all(g),m+f<t.length&&await this.delay(500)}}async uploadSingleChunk(n,t,r){const i=yc(this.storage,t),a=async()=>{const l=await $f(i,n);return{url:await Uf(l.ref),path:l.ref.fullPath}},s=new Promise((l,u)=>{setTimeout(()=>u(new Error(`Chunk upload timeout after ${r}ms`)),r)});return Promise.race([a(),s])}async assembleChunks(n,t,r,i){const a=await this.reconstructFileFromChunks(n,t),s=yc(this.storage,r),l=await $f(s,a),u=await Uf(l.ref);return await this.cleanupChunks(t),{url:u,path:l.ref.fullPath,name:n.name,type:n.type,size:n.size,uploadedAt:new Date}}async reconstructFileFromChunks(n,t){const r=[];for(const i of t.sort((a,s)=>a.index-s.index))r.push(n.slice(i.start,i.end));return new Blob(r,{type:n.type})}async uploadStandardFile(n,t,r){const i=Date.now(),a=yc(this.storage,t);r==null||r({stage:"uploading",percentage:10,bytesUploaded:0,totalBytes:n.size,currentOperation:"Uploading file..."});const s=await $f(a,n);r==null||r({stage:"uploading",percentage:90,bytesUploaded:n.size,totalBytes:n.size,currentOperation:"Getting download URL..."});const l=await Uf(s.ref);r==null||r({stage:"completed",percentage:100,bytesUploaded:n.size,totalBytes:n.size,currentOperation:"Upload completed!"});const u=Date.now()-i;return{url:l,path:s.ref.fullPath,name:n.name,type:n.type,size:n.size,uploadedAt:new Date,chunks:1,uploadTime:u}}calculateOverallProgress(n,t){const r=n.filter(a=>a.uploadUrl).length,i=t.currentChunk?t.bytesUploaded/n.reduce((a,s)=>a+s.size,0):0;return(r+i)/n.length}estimateTimeRemaining(n,t){if(t<=0)return 0;const r=Date.now()-n,i=r/t;return Math.max(0,i-r)}async cleanupChunks(n){const t=n.filter(r=>r.uploadPath).map(async r=>{try{const i=yc(this.storage,r.uploadPath);await lT(i)}catch(i){console.warn(`Failed to cleanup chunk ${r.index}:`,i)}});await Promise.allSettled(t)}async cleanupFailedUpload(n){console.log(" Cleaning up failed chunked upload..."),await this.cleanupChunks(n)}delay(n){return new Promise(t=>setTimeout(t,n))}validateFileForChunkedUpload(n){return n.size>524288e3?{isValid:!1,error:`File size (${(n.size/1024/1024).toFixed(1)}MB) exceeds maximum limit of 500MB`}:["application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.ms-powerpoint","application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","text/plain"].includes(n.type)?{isValid:!0}:{isValid:!1,error:`Unsupported file type: ${n.type}. Supported formats: PowerPoint, PDF, Word, Text files`}}}const z8=new qF;class BF{constructor(){nt(this,"storage",mp())}async uploadOriginalFile(n,t,r,i){return n.size>26214400?(console.log(` File is large (${(n.size/1024/1024).toFixed(1)}MB), using chunked upload`),this.uploadOriginalFileEnhanced(n,t,r,i?s=>i(s.percentage):void 0)):this.uploadOriginalFileStandard(n,t,r,i)}async uploadOriginalFileEnhanced(n,t,r,i){const a=z8.validateFileForChunkedUpload(n);if(!a.isValid)throw new Error(a.error);const s=n.name.split(".").pop()||"",l=r||Mi(),u=`${n.name.replace(/\.[^/.]+$/,"")}_${l}.${s}`,d=`original-files/${t}/${u}`;console.log(" Starting enhanced original file upload:",{fileName:u,fileSize:n.size,fileType:n.type,courseId:t,chunked:!0});try{const f=await z8.uploadLargeFile(n,d,{chunkSize:5242880,maxRetries:3,timeoutMs:6e4,onProgress:i,onChunkComplete:(b,g)=>{console.log(` Chunk ${b+1}/${g} completed`)}}),m={name:n.name,type:n.type,size:n.size,url:f.url,uploadedAt:new Date};return console.log(" Enhanced original file uploaded successfully:",{originalName:n.name,storageName:u,url:f.url,size:n.size,chunks:f.chunks,uploadTime:`${(f.uploadTime/1e3).toFixed(1)}s`}),m}catch(f){throw console.error(" Enhanced original file upload failed:",f),new Error(`Failed to upload original file: ${f instanceof Error?f.message:"Unknown error"}`)}}async uploadOriginalFileStandard(n,t,r,i){try{const a=n.name.split(".").pop()||"",s=r||Mi(),l=`${n.name.replace(/\.[^/.]+$/,"")}_${s}.${a}`,u=yc(this.storage,`original-files/${t}/${l}`);console.log(" Starting original file upload:",{fileName:l,fileSize:n.size,fileType:n.type,courseId:t}),i==null||i(10);const d=await $f(u,n);i==null||i(70);const f=await Uf(d.ref);i==null||i(100);const m={name:n.name,type:n.type,size:n.size,url:f,uploadedAt:new Date};return console.log(" Original file uploaded successfully:",{originalName:n.name,storageName:l,url:f,size:n.size}),m}catch(a){throw console.error(" Original file upload failed:",a),new Error(`Failed to upload original file: ${a instanceof Error?a.message:"Unknown error"}`)}}async deleteOriginalFile(n){try{const r=new URL(n).pathname.match(/\/o\/(.+?)\?/);if(!r)throw new Error("Invalid Firebase Storage URL format");const i=decodeURIComponent(r[1]),a=yc(this.storage,i);await lT(a),console.log(" Original file deleted successfully:",i)}catch(t){console.error(" Original file deletion failed:",t),console.warn("Continuing despite file deletion failure")}}async replaceOriginalFile(n,t,r,i,a){try{return i&&await this.deleteOriginalFile(i),await this.uploadOriginalFile(n,t,r,a)}catch(s){throw console.error(" Original file replacement failed:",s),new Error(`Failed to replace original file: ${s instanceof Error?s.message:"Unknown error"}`)}}getFileExtension(n){var t;return((t=n.split(".").pop())==null?void 0:t.toLowerCase())||""}validateFile(n){return n.size>524288e3?{isValid:!1,error:`File size (${(n.size/1024/1024).toFixed(1)}MB) exceeds maximum limit of 500MB`}:["application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.ms-powerpoint","application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","text/plain"].includes(n.type)?{isValid:!0}:{isValid:!1,error:`Unsupported file type: ${n.type}. Supported formats: PowerPoint, PDF, Word, Text files`}}}const I5=new BF,q8={isProcessing:!1,progress:null,error:null,uploadedFile:null,extractedText:null,extractionResult:null,originalFileUploadProgress:null,originalFileUrl:null,aiExtractedData:null,convertedMaterial:null,processingOptions:{maxOutputTokens:4096,topK:1,topP:.1,preserveFormatting:!0,extractImages:!0,extractLinks:!0}},Cd=gp()(qg((e,n)=>({...q8,setUploadedFile:t=>{const{originalFileUrl:r}=n();r&&t&&t.name!==r&&I5.deleteOriginalFile(r).catch(i=>{console.warn("Failed to delete previous original file:",i)}),e({uploadedFile:t,extractedText:null,extractionResult:null,originalFileUploadProgress:null,originalFileUrl:null,aiExtractedData:null,convertedMaterial:null,error:null})},extractTextFromFile:async()=>{const{uploadedFile:t}=n();if(!t){e({error:"No file uploaded"});return}try{const r=qT(t);if(!r.isValid){e({error:r.error||"Invalid file"});return}}catch(r){console.error("File validation error:",r),e({error:"Failed to validate file"});return}e({isProcessing:!0,error:null,progress:{stage:"extracting",percentage:10,currentOperation:`Extracting text from ${BT(t)}...`}});try{const r=await zT(t);if(!r||!r.text||r.text.trim().length===0)throw new Error("No text content could be extracted from the file");const i=r.text.trim().split(/\s+/).length;i<5&&console.warn("Very short text extracted:",{wordCount:i,text:r.text.substring(0,100)}),e({extractedText:r.text,extractionResult:r,progress:{stage:"extracting",percentage:100,currentOperation:"Text extraction complete!"}}),setTimeout(()=>{e({isProcessing:!1,progress:null})},500)}catch(r){console.error("Text extraction error:",r);const i=r;let a="Failed to extract text from file";i.code==="PDF_EXTRACTION_ERROR"?a="Could not extract text from PDF. The file may be image-based or corrupted.":i.code==="DOCX_EXTRACTION_ERROR"?a="Could not extract text from Word document. Please check the file is not corrupted.":i.code==="PPTX_EXTRACTION_ERROR"?a="Could not extract text from PowerPoint presentation. Please ensure it contains text content.":i.message&&(a=i.message),e({error:a,isProcessing:!1,progress:null})}},processWithAI:async(t,r,i)=>{var f;const{uploadedFile:a,extractedText:s,extractionResult:l,processingOptions:u}=n();if(!(t!=null&&t.trim())){e({error:"Course ID is required for AI processing"});return}if(!(r!=null&&r.trim())){e({error:"Author ID is required for AI processing"});return}if(!a||!(s!=null&&s.trim())){e({error:"No file or extracted text available for AI processing"});return}const d=s.trim().split(/\s+/).length;if(d<10){e({error:"Extracted text is too short for meaningful AI processing (minimum 10 words required)"});return}d>5e4&&console.warn("Very large text content detected:",{wordCount:d,fileName:a.name}),e({isProcessing:!0,error:null,progress:{stage:"analyzing",percentage:0,currentOperation:"Initializing AI processing..."}});try{let m;try{m=nS(i)}catch(w){console.error("Service initialization error:",w);let C="Material import service not available.";w instanceof Error&&(w.message.includes("API key")?C="API key not configured. Please set VITE_GEMINI_MATERIAL_API_KEY or VITE_GEMINI_COURSE_API_KEY environment variable.":C=`Service error: ${w.message}`),e({error:C,isProcessing:!1,progress:null});return}const b={maxOutputTokens:Math.min(Math.max(u.maxOutputTokens||16384,8192),32768),topK:Math.min(Math.max(u.topK||3,1),10),topP:Math.min(Math.max(u.topP||.9,.1),1),preserveFormatting:!!u.preserveFormatting,extractImages:!!u.extractImages,extractLinks:!!u.extractLinks},g=12e4,x=new Promise((w,C)=>{setTimeout(()=>C(new Error("AI processing timeout - please try with a smaller file")),g)}),y=await Promise.race([m.processMaterialContent(s,a.name,a.type,b,w=>{w&&typeof w=="object"&&e({progress:w})},l==null?void 0:l.metadata),x]);if(!y||typeof y!="object")throw new Error("Invalid AI processing result received");(f=y.title)!=null&&f.trim()||(console.warn("AI result missing title, using filename as fallback"),y.title=a.name.replace(/\.[^/.]+$/,"")||"Untitled Material"),(!y.sections||!Array.isArray(y.sections)||y.sections.length===0)&&(console.warn("AI result missing sections, creating default section"),y.sections=[{title:"Main Content",content:"Content extracted from uploaded material.",subsections:[],images:[],links:[]}]);const A=m.convertToMaterialFormat(y,t,r,l==null?void 0:l.metadata);e({aiExtractedData:y,convertedMaterial:A,isProcessing:!1,progress:{stage:"complete",percentage:100,currentOperation:"Material processing complete!"}}),setTimeout(()=>{e({progress:null})},1500)}catch(m){console.error("AI processing error:",m);let b="Failed to process material with AI";m instanceof Error&&(m.message.includes("timeout")?b="AI processing timed out. Please try with a smaller file or simpler content.":m.message.includes("API key")||m.message.includes("API_KEY_INVALID")?b="Invalid API key. Please check your API key configuration.":m.message.includes("RATE_LIMIT")||m.message.includes("rate limit")?b="API rate limit exceeded. Please wait a few minutes before trying again.":m.message.includes("SAFETY")||m.message.includes("safety")?b="Content flagged by safety filters. Please try with different content.":m.message.includes("network")||m.message.includes("fetch")?b="Network error. Please check your internet connection and try again.":b=`AI processing failed: ${m.message}`),e({error:b,isProcessing:!1,progress:null})}},uploadOriginalFile:async(t,r)=>{const{uploadedFile:i}=n();if(!i){e({error:"No file selected for upload"});return}try{e({originalFileUploadProgress:0,error:null});const a=i.size>25*1024*1024,s=(i.size/1024/1024).toFixed(1);console.log(` Starting original file upload to Firebase Storage... (${s}MB, ${a?"chunked":"standard"} upload)`);const l=await I5.uploadOriginalFile(i,t,r,u=>{e({originalFileUploadProgress:u})});e({originalFileUrl:l.url,originalFileUploadProgress:null}),console.log(" Original file uploaded successfully:",{url:l.url,size:`${s}MB`,method:a?"chunked":"standard"})}catch(a){throw console.error(" Original file upload failed:",a),e({error:a instanceof Error?a.message:"Failed to upload original file",originalFileUploadProgress:null}),a}},replaceOriginalFile:async(t,r,i)=>{const{uploadedFile:a}=n();if(!a){e({error:"No file selected for replacement"});return}try{e({originalFileUploadProgress:0,error:null}),console.log(" Replacing original file in Firebase Storage...");const s=await I5.replaceOriginalFile(a,t,r,i,l=>{e({originalFileUploadProgress:l})});e({originalFileUrl:s.url,originalFileUploadProgress:null}),console.log(" Original file replaced successfully:",s.url)}catch(s){throw console.error(" Original file replacement failed:",s),e({error:s instanceof Error?s.message:"Failed to replace original file",originalFileUploadProgress:null}),s}},resetImport:()=>{try{nS().cleanupBlobUrls()}catch(t){console.warn("Failed to cleanup blob URLs during reset:",t)}e(q8)},setProcessingOptions:t=>{e(r=>({processingOptions:{...r.processingOptions,...t}}))},setError:t=>{e({error:t})}}),{name:"material-import-store",partialize:e=>({processingOptions:e.processingOptions})})),$F=()=>{const e=Cd();return{setUploadedFile:e.setUploadedFile,extractTextFromFile:e.extractTextFromFile,processWithAI:e.processWithAI,resetImport:e.resetImport,setProcessingOptions:e.setProcessingOptions,setError:e.setError}},UF=()=>{const e=Cd();return{isProcessing:e.isProcessing,progress:e.progress,error:e.error,uploadedFile:e.uploadedFile,extractedText:e.extractedText,aiExtractedData:e.aiExtractedData,convertedMaterial:e.convertedMaterial,processingOptions:e.processingOptions}},rS=async(e,n,t,r)=>{const i=Cd.getState(),{aiExtractedData:a,extractionResult:s}=i;if(!a)throw new Error("No AI result available for conversion");return await nS().convertToMaterialFormatWithImageUpload(a,e,n,t,s==null?void 0:s.metadata,r)},HF=()=>{const{extractedText:e,isProcessing:n}=Cd();return!n&&!!(e!=null&&e.trim())},WF=()=>{const{convertedMaterial:e,isProcessing:n}=Cd();return!n&&!!e},mhe=Object.freeze(Object.defineProperty({__proto__:null,convertMaterialWithImageUpload:rS,useIsImportComplete:WF,useIsReadyForAI:HF,useMaterialImportActions:$F,useMaterialImportStatus:UF,useMaterialImportStore:Cd},Symbol.toStringTag,{value:"Module"})),L5=({onDelete:e,itemType:n})=>{const[t,r]=st.useState(!1),i=()=>{r(!0)},a=()=>{r(!1)},s=()=>{e(),a()};return h.jsxs(h.Fragment,{children:[h.jsx(_n,{onClick:i,size:"small",children:h.jsx(RT,{})}),h.jsxs(Zi,{open:t,onClose:a,children:[h.jsx(pa,{children:`Delete ${n}`}),h.jsx(Ji,{children:h.jsx(Il,{children:`Are you sure you want to delete this ${n}? This action cannot be undone.`})}),h.jsxs(ma,{children:[h.jsx(Ct,{onClick:a,color:"primary",children:"Cancel"}),h.jsx(Ct,{onClick:s,color:"secondary",children:"Delete"})]})]})]})},$T=({sections:e,selected:n,onAddSection:t,onAddSubsection:r,onAddSubSubsection:i,onSelectSection:a,onUpdateSectionTitle:s,onUpdateSubsectionTitle:l,onUpdateSubSubsectionTitle:u,onDeleteSection:d,onDeleteSubsection:f,onDeleteSubSubsection:m,isViewMode:b=!1})=>{const[g,x]=X.useState(null),[y,A]=X.useState(null),[w,C]=X.useState(null),[j,F]=X.useState(""),[M,z]=X.useState(e.map(()=>!0)),[_,L]=X.useState(e.reduce((U,le,q)=>(U[q]=le.subsections.map(()=>!0),U),{}));X.useEffect(()=>{z(e.map(()=>!0))},[e]),X.useEffect(()=>{const U=e.reduce((le,q,B)=>(le[B]=q.subsections.map(()=>!0),le),{});L(U)},[e]);const $=U=>{const le=[...M];le[U]=!le[U],z(le)},Z=(U,le)=>{const q={..._};q[U][le]=!q[U][le],L(q)},O=(U,le)=>{g!==null?s(g,j):y?l(y.section,y.subsection,j):w&&u(w.section,w.subsection,w.subSubsection,j),x(U),A(null),C(null),F(le)},T=U=>{s(U,j),x(null),F("")},R=(U,le,q)=>{g!==null?s(g,j):y?l(y.section,y.subsection,j):w&&u(w.section,w.subsection,w.subSubsection,j),x(null),A({section:U,subsection:le}),C(null),F(q)},N=(U,le)=>{l(U,le,j),A(null),F("")},G=(U,le,q,B)=>{g!==null?s(g,j):y?l(y.section,y.subsection,j):w&&u(w.section,w.subsection,w.subSubsection,j),x(null),A(null),C({section:U,subsection:le,subSubsection:q}),F(B)},W=(U,le,q)=>{u(U,le,q,j),C(null),F("")},Q=(U,le,q,B)=>n.sectionIndex===U&&n.subsectionIndex===le&&n.subSubsectionIndex===q&&n.type===B,se=BM||{width:"320px",minWidth:"320px",maxWidth:"320px",backgroundColor:"#F8FAFC",borderRight:"1px solid #E2E8F0"};return h.jsxs(de,{sx:{width:se.width,minWidth:se.minWidth,maxWidth:se.maxWidth,backgroundColor:se.backgroundColor,borderRight:se.borderRight,height:"100%",display:"flex",flexDirection:"column"},children:[h.jsxs(de,{sx:{p:3,pb:2},children:[h.jsxs(he,{variant:"h6",sx:{fontFamily:ht.typography.h6.fontFamily,fontWeight:ht.typography.h6.fontWeight,color:ht.palette.text.primary,mb:2,display:"flex",alignItems:"center",gap:1},children:[h.jsx(Z9,{sx:{fontSize:20}}),"Outline"]}),!b&&h.jsx(Ct,{variant:"contained",startIcon:h.jsx(pu,{}),onClick:t,sx:{width:"100%",borderRadius:kt.xl,textTransform:"none",fontWeight:600},children:"Add Section"})]}),h.jsx(qs,{}),h.jsx(de,{sx:{flex:1,overflow:"auto"},children:h.jsxs(Gh,{sx:{p:0},children:[h.jsx(yd,{onClick:()=>a("header"),sx:{cursor:"pointer",backgroundColor:Q(void 0,void 0,void 0,"header")?ht.palette.primary.light:"transparent",borderLeft:Q(void 0,void 0,void 0,"header")?`4px solid ${ht.palette.primary.main}`:"4px solid transparent",transition:ht.transitions.create(["background-color","border-color"]),"&:hover":{backgroundColor:ht.palette.action.hover}},children:h.jsx(dc,{primary:"Header",sx:{"& .MuiListItemText-primary":{fontFamily:ht.typography.body1.fontFamily,fontWeight:Q(void 0,void 0,void 0,"header")?600:400,color:Q(void 0,void 0,void 0,"header")?ht.palette.primary.main:ht.palette.text.primary}}})}),e.map((U,le)=>h.jsxs(de,{children:[h.jsx(yd,{onClick:()=>a(le),sx:{cursor:"pointer",backgroundColor:Q(le)?ht.palette.primary.light:"transparent",borderLeft:Q(le)?`4px solid ${ht.palette.primary.main}`:"4px solid transparent",transition:ht.transitions.create(["background-color","border-color"]),"&:hover":{backgroundColor:ht.palette.action.hover}},children:g===le?h.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[h.jsx(Jt,{value:j,onChange:q=>F(q.target.value),size:"small",variant:"outlined",disabled:b,sx:{flex:1}}),!b&&h.jsx(_n,{onClick:()=>T(le),size:"small",color:"primary",children:h.jsx(O0,{})})]}):h.jsxs(h.Fragment,{children:[h.jsx(dc,{primary:U.title,sx:{"& .MuiListItemText-primary":{fontFamily:ht.typography.body1.fontFamily,fontWeight:Q(le)?600:400,color:Q(le)?ht.palette.primary.main:ht.palette.text.primary}}}),!b&&h.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:.5},children:[h.jsx(fi,{title:"Edit Section",arrow:!0,children:h.jsx(_n,{onClick:q=>{q.stopPropagation(),O(le,U.title)},size:"small",sx:{color:ht.palette.primary.main},children:h.jsx(bu,{fontSize:"small"})})}),h.jsx(L5,{onDelete:()=>d(le),itemType:"section"})]}),U.subsections.length>0&&h.jsx(_n,{onClick:q=>{q.stopPropagation(),$(le)},size:"small",sx:{ml:1},children:M[le]?h.jsx(bx,{fontSize:"small"}):h.jsx(Nl,{fontSize:"small"})}),!b&&h.jsx(fi,{title:"Add Subsection",arrow:!0,children:h.jsx(_n,{onClick:q=>{q.stopPropagation(),r(le)},size:"small",sx:{color:ht.palette.success.main},children:h.jsx(pu,{fontSize:"small"})})})]})}),h.jsx(gx,{in:M[le],timeout:"auto",unmountOnExit:!0,children:h.jsx(Gh,{sx:{pl:2},children:U.subsections.map((q,B)=>h.jsxs(de,{children:[h.jsx(yd,{onClick:()=>a(le,B),sx:{cursor:"pointer",backgroundColor:Q(le,B)?ht.palette.primary.light:"transparent",borderLeft:Q(le,B)?`4px solid ${ht.palette.primary.main}`:"4px solid transparent",transition:ht.transitions.create(["background-color","border-color"]),"&:hover":{backgroundColor:ht.palette.action.hover}},children:y&&y.section===le&&y.subsection===B?h.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[h.jsx(Jt,{value:j,onChange:ee=>F(ee.target.value),size:"small",variant:"outlined",disabled:b,sx:{flex:1}}),!b&&h.jsx(_n,{onClick:()=>N(le,B),size:"small",color:"primary",children:h.jsx(O0,{})})]}):h.jsxs(h.Fragment,{children:[h.jsx(dc,{primary:q.title,sx:{"& .MuiListItemText-primary":{fontFamily:ht.typography.body2.fontFamily,fontWeight:Q(le,B)?600:400,color:Q(le,B)?ht.palette.primary.main:ht.palette.text.primary}}}),!b&&h.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:.5},children:[h.jsx(fi,{title:"Edit Subsection",arrow:!0,children:h.jsx(_n,{onClick:ee=>{ee.stopPropagation(),R(le,B,q.title)},size:"small",sx:{color:ht.palette.primary.main},children:h.jsx(bu,{fontSize:"small"})})}),h.jsx(L5,{onDelete:()=>f(le,B),itemType:"subsection"})]}),q.subSubsections.length>0&&h.jsx(_n,{onClick:ee=>{ee.stopPropagation(),Z(le,B)},size:"small",sx:{ml:1},children:_[le][B]?h.jsx(bx,{fontSize:"small"}):h.jsx(Nl,{fontSize:"small"})}),!b&&h.jsx(fi,{title:"Add Sub-subsection",arrow:!0,children:h.jsx(_n,{onClick:ee=>{ee.stopPropagation(),i(le,B)},size:"small",sx:{color:ht.palette.success.main},children:h.jsx(pu,{fontSize:"small"})})})]})}),h.jsx(gx,{in:_[le][B],timeout:"auto",unmountOnExit:!0,children:h.jsx(Gh,{sx:{pl:2},children:q.subSubsections.map((ee,re)=>h.jsx(yd,{onClick:()=>a(le,B,re),sx:{cursor:"pointer",backgroundColor:Q(le,B,re)?ht.palette.primary.light:"transparent",borderLeft:Q(le,B,re)?`4px solid ${ht.palette.primary.main}`:"4px solid transparent",transition:ht.transitions.create(["background-color","border-color"]),"&:hover":{backgroundColor:ht.palette.action.hover}},children:w&&w.section===le&&w.subsection===B&&w.subSubsection===re?h.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[h.jsx(Jt,{value:j,onChange:oe=>F(oe.target.value),size:"small",variant:"outlined",disabled:b,sx:{flex:1}}),!b&&h.jsx(_n,{onClick:()=>W(le,B,re),size:"small",color:"primary",children:h.jsx(O0,{})})]}):h.jsxs(h.Fragment,{children:[h.jsx(dc,{primary:ee.title,sx:{"& .MuiListItemText-primary":{fontFamily:ht.typography.body2.fontFamily,fontWeight:Q(le,B,re)?600:400,color:Q(le,B,re)?ht.palette.primary.main:ht.palette.text.secondary,fontSize:"0.875rem"}}}),!b&&h.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:.5},children:[h.jsx(fi,{title:"Edit Sub-subsection",arrow:!0,children:h.jsx(_n,{onClick:oe=>{oe.stopPropagation(),G(le,B,re,ee.title)},size:"small",sx:{color:ht.palette.primary.main},children:h.jsx(bu,{fontSize:"small"})})}),h.jsx(L5,{onDelete:()=>m(le,B,re),itemType:"subSubsection"})]})]})},ee.id))})})]},q.id))})})]},U.id)),h.jsx(yd,{onClick:()=>a("footer"),sx:{cursor:"pointer",backgroundColor:Q(void 0,void 0,void 0,"footer")?ht.palette.primary.light:"transparent",borderLeft:Q(void 0,void 0,void 0,"footer")?`4px solid ${ht.palette.primary.main}`:"4px solid transparent",transition:ht.transitions.create(["background-color","border-color"]),"&:hover":{backgroundColor:ht.palette.action.hover}},children:h.jsx(dc,{primary:"Footer",sx:{"& .MuiListItemText-primary":{fontFamily:ht.typography.body1.fontFamily,fontWeight:Q(void 0,void 0,void 0,"footer")?600:400,color:Q(void 0,void 0,void 0,"footer")?ht.palette.primary.main:ht.palette.text.primary}}})})]})})]})},UT=({returnToSelection:e=!1,courseId:n})=>{const t=ya(),[r]=Pg(),i=r.get("course"),a=()=>{const s=n||i;t(e||!s?"/supplemental-materials":`/supplemental-materials?course=${s}`)};return h.jsx(Ct,{variant:"text",color:"primary",startIcon:h.jsx(NT,{}),onClick:a,className:"supplemental-back-button",children:e?"Course Selection":"Course Materials"})},VF=({sectionId:e,images:n,onImagesChange:t})=>{const[r,i]=X.useState(!1),[a,s]=X.useState(""),[l,u]=X.useState("success"),[d,f]=X.useState(null),[m,b]=X.useState(""),g=mp(),x=async F=>{if(F.target.files){const M=Array.from(F.target.files),z=[];for(const _ of M)try{const L=await C(_),$=await j(L);z.push({url:$.url,title:`Image ${n.length+z.length+1}`,id:Mi()})}catch{s("Failed to upload images"),u("error"),i(!0)}t([...n,...z]),s("Image(s) uploaded successfully"),u("success"),i(!0)}},y=F=>{f(F),b(F.title)},A=()=>{if(d){const F=n.map(M=>M.url===d.url?{...M,title:m}:M);t(F),f(null),b("")}},w=F=>{const M=n.filter(z=>z.url!==F.url);t(M)},C=F=>new Promise((M,z)=>{F.size>5*1024*1024?PT.imageFileResizer(F,500,500,"JPEG",70,0,_=>{typeof _=="string"?z(new Error("Compression returned a string instead of a file")):M(_)},"file"):M(F)}),j=F=>new Promise((M,z)=>{const _=yc(g,`materials/${e}/${F.name}`);$f(_,F).then(L=>{Uf(L.ref).then($=>{M({url:$,path:L.ref.fullPath})})}).catch(L=>z(L))});return h.jsxs(de,{children:[h.jsxs(de,{sx:{display:"flex",alignItems:"center",mb:2},children:[h.jsx(J9,{sx:{mr:1,color:ht.palette.primary.main}}),h.jsx(he,{variant:"h6",sx:{fontWeight:600,color:ht.palette.text.primary},children:"Images"}),h.jsx(cr,{label:`${n.length} image${n.length!==1?"s":""}`,size:"small",sx:{ml:2}})]}),h.jsxs(Ct,{variant:"contained",component:"label",startIcon:h.jsx(pu,{}),sx:{mb:3,textTransform:"none",borderRadius:kt.xl},children:["Add Images",h.jsx("input",{type:"file",hidden:!0,accept:"image/*",multiple:!0,onChange:x})]}),n.length>0&&h.jsx(wt,{container:!0,spacing:2,children:n.map((F,M)=>h.jsx(wt,{item:!0,xs:12,sm:6,md:4,children:h.jsxs(Ja,{sx:{borderRadius:kt.xl,border:`1px solid ${ht.palette.divider}`,transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{boxShadow:ht.shadows[4],transform:"translateY(-2px)"}},children:[h.jsxs(de,{sx:{position:"relative"},children:[h.jsx("img",{src:F.url,alt:F.title,style:{width:"100%",height:"200px",objectFit:"cover",borderRadius:`${kt.xl} ${kt.xl} 0 0`}}),h.jsxs(de,{sx:{position:"absolute",top:8,right:8,display:"flex",gap:.5},children:[h.jsx(_n,{size:"small",onClick:()=>y(F),sx:{backgroundColor:"rgba(255, 255, 255, 0.9)","&:hover":{backgroundColor:ht.palette.primary.main,color:"white"}},children:h.jsx(bu,{fontSize:"small"})}),h.jsx(_n,{size:"small",onClick:()=>w(F),sx:{backgroundColor:"rgba(255, 255, 255, 0.9)","&:hover":{backgroundColor:ht.palette.error.main,color:"white"}},children:h.jsx(mu,{fontSize:"small"})})]})]}),h.jsx(es,{sx:{p:2},children:h.jsx(he,{variant:"body2",sx:{fontWeight:500,color:ht.palette.text.primary,wordBreak:"break-word"},children:F.title})})]})},F.id||M))}),h.jsxs(Zi,{open:!!d,onClose:()=>f(null),maxWidth:"sm",fullWidth:!0,children:[h.jsx(pa,{sx:{pb:1},children:h.jsxs(de,{sx:{display:"flex",alignItems:"center"},children:[h.jsx(bu,{sx:{mr:1,color:ht.palette.primary.main}}),"Edit Image Title"]})}),h.jsx(Ji,{children:h.jsx(Jt,{fullWidth:!0,label:"Image Title",value:m,onChange:F=>b(F.target.value),variant:"outlined",sx:{mt:2}})}),h.jsxs(ma,{sx:{p:3,pt:1},children:[h.jsx(Ct,{onClick:()=>f(null),startIcon:h.jsx(T6,{}),sx:{textTransform:"none"},children:"Cancel"}),h.jsx(Ct,{onClick:A,variant:"contained",startIcon:h.jsx(O0,{}),sx:{textTransform:"none"},children:"Save Changes"})]})]}),h.jsx(Ll,{open:r,autoHideDuration:6e3,onClose:()=>i(!1),children:h.jsx(rr,{onClose:()=>i(!1),severity:l,sx:{width:"100%"},children:a})})]})},YF=({links:e,onLinksChange:n})=>{const t=()=>{const s={title:"",url:"",description:""};n([...e,s])},r=s=>{const l=e.filter((u,d)=>d!==s);n(l)},i=(s,l,u)=>{const d=[...e];d[s][l]=u,n(d)},a=s=>{try{return new URL(s),!0}catch{return!1}};return h.jsxs(de,{children:[h.jsxs(de,{sx:{display:"flex",alignItems:"center",mb:2},children:[h.jsx(e3,{sx:{mr:1,color:ht.palette.primary.main}}),h.jsx(he,{variant:"h6",sx:{fontWeight:600,color:ht.palette.text.primary},children:"Links"}),h.jsx(cr,{label:`${e.length} link${e.length!==1?"s":""}`,size:"small",sx:{ml:2}})]}),h.jsx(Ct,{variant:"contained",onClick:t,startIcon:h.jsx(pu,{}),sx:{mb:3,textTransform:"none",borderRadius:kt.xl},children:"Add Link"}),e.length>0&&h.jsx(de,{sx:{display:"flex",flexDirection:"column",gap:2},children:e.map((s,l)=>h.jsxs(Ja,{sx:{borderRadius:kt.xl,border:`1px solid ${ht.palette.divider}`,transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{boxShadow:ht.shadows[2]}},children:[h.jsx(es,{sx:{p:3},children:h.jsxs(wt,{container:!0,spacing:2,children:[h.jsx(wt,{item:!0,xs:12,sm:6,children:h.jsx(Jt,{fullWidth:!0,label:"Link Title",value:s.title||"",onChange:u=>i(l,"title",u.target.value),variant:"outlined",size:"small",placeholder:"Enter link title",sx:{"& .MuiOutlinedInput-root":{borderRadius:kt.xl}}})}),h.jsx(wt,{item:!0,xs:12,sm:6,children:h.jsx(Jt,{fullWidth:!0,label:"URL",value:s.url||"",onChange:u=>i(l,"url",u.target.value),variant:"outlined",size:"small",placeholder:"https://example.com",error:s.url&&!a(s.url),helperText:s.url&&!a(s.url)?"Please enter a valid URL":"",sx:{"& .MuiOutlinedInput-root":{borderRadius:kt.xl}}})}),h.jsx(wt,{item:!0,xs:12,children:h.jsx(Jt,{fullWidth:!0,label:"Description (Optional)",value:s.description||"",onChange:u=>i(l,"description",u.target.value),variant:"outlined",size:"small",multiline:!0,rows:2,placeholder:"Enter link description",sx:{"& .MuiOutlinedInput-root":{borderRadius:kt.xl}}})})]})}),h.jsx(qs,{}),h.jsxs(Yj,{sx:{p:2,justifyContent:"space-between"},children:[h.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.url&&a(s.url)&&h.jsx(fi,{title:"Open link",arrow:!0,children:h.jsx(_n,{size:"small",onClick:()=>window.open(s.url,"_blank"),sx:{color:ht.palette.primary.main,"&:hover":{backgroundColor:ht.palette.primary.light}},children:h.jsx(t3,{fontSize:"small"})})}),h.jsxs(he,{variant:"caption",color:"text.secondary",children:["Link ",l+1]})]}),h.jsx(fi,{title:"Delete link",arrow:!0,children:h.jsx(_n,{size:"small",onClick:()=>r(l),sx:{color:ht.palette.error.main,"&:hover":{backgroundColor:ht.palette.error.light}},children:h.jsx(mu,{fontSize:"small"})})})]})]},l))})]})};var HT=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,GF=typeof self=="object"&&self&&self.Object===Object&&self,Pc=HT||GF||Function("return this")(),Qf=Pc.Symbol,WT=Object.prototype,QF=WT.hasOwnProperty,KF=WT.toString,g1=Qf?Qf.toStringTag:void 0;function XF(e){var n=QF.call(e,g1),t=e[g1];try{e[g1]=void 0;var r=!0}catch{}var i=KF.call(e);return r&&(n?e[g1]=t:delete e[g1]),i}var ZF=Object.prototype,JF=ZF.toString;function eP(e){return JF.call(e)}var tP="[object Null]",nP="[object Undefined]",B8=Qf?Qf.toStringTag:void 0;function dm(e){return e==null?e===void 0?nP:tP:B8&&B8 in Object(e)?XF(e):eP(e)}function Dd(e){return e!=null&&typeof e=="object"}var sp=Array.isArray;function ah(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}function VT(e){return e}var rP="[object AsyncFunction]",iP="[object Function]",aP="[object GeneratorFunction]",sP="[object Proxy]";function $6(e){if(!ah(e))return!1;var n=dm(e);return n==iP||n==aP||n==rP||n==sP}var R5=Pc["__core-js_shared__"],$8=function(){var e=/[^.]+$/.exec(R5&&R5.keys&&R5.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function oP(e){return!!$8&&$8 in e}var lP=Function.prototype,uP=lP.toString;function xp(e){if(e!=null){try{return uP.call(e)}catch{}try{return e+""}catch{}}return""}var cP=/[\\^$.*+?()[\]{}|]/g,dP=/^\[object .+?Constructor\]$/,fP=Function.prototype,hP=Object.prototype,pP=fP.toString,mP=hP.hasOwnProperty,gP=RegExp("^"+pP.call(mP).replace(cP,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function bP(e){if(!ah(e)||oP(e))return!1;var n=$6(e)?gP:dP;return n.test(xp(e))}function yP(e,n){return e==null?void 0:e[n]}function vp(e,n){var t=yP(e,n);return bP(t)?t:void 0}var iS=vp(Pc,"WeakMap"),U8=Object.create,xP=function(){function e(){}return function(n){if(!ah(n))return{};if(U8)return U8(n);e.prototype=n;var t=new e;return e.prototype=void 0,t}}();function vP(e,n,t){switch(t.length){case 0:return e.call(n);case 1:return e.call(n,t[0]);case 2:return e.call(n,t[0],t[1]);case 3:return e.call(n,t[0],t[1],t[2])}return e.apply(n,t)}function wP(e,n){var t=-1,r=e.length;for(n||(n=Array(r));++t<r;)n[t]=e[t];return n}var SP=800,AP=16,CP=Date.now;function kP(e){var n=0,t=0;return function(){var r=CP(),i=AP-(r-t);if(t=r,i>0){if(++n>=SP)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}function EP(e){return function(){return e}}var Ax=function(){try{var e=vp(Object,"defineProperty");return e({},"",{}),e}catch{}}(),_P=Ax?function(e,n){return Ax(e,"toString",{configurable:!0,enumerable:!1,value:EP(n),writable:!0})}:VT,NP=kP(_P);function jP(e,n){for(var t=-1,r=e==null?0:e.length;++t<r&&n(e[t],t,e)!==!1;);return e}var TP=9007199254740991,OP=/^(?:0|[1-9]\d*)$/;function YT(e,n){var t=typeof e;return n=n??TP,!!n&&(t=="number"||t!="symbol"&&OP.test(e))&&e>-1&&e%1==0&&e<n}function U6(e,n,t){n=="__proto__"&&Ax?Ax(e,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[n]=t}function Bg(e,n){return e===n||e!==e&&n!==n}var DP=Object.prototype,IP=DP.hasOwnProperty;function GT(e,n,t){var r=e[n];(!(IP.call(e,n)&&Bg(r,t))||t===void 0&&!(n in e))&&U6(e,n,t)}function LP(e,n,t,r){var i=!t;t||(t={});for(var a=-1,s=n.length;++a<s;){var l=n[a],u=void 0;u===void 0&&(u=e[l]),i?U6(t,l,u):GT(t,l,u)}return t}var H8=Math.max;function RP(e,n,t){return n=H8(n===void 0?e.length-1:n,0),function(){for(var r=arguments,i=-1,a=H8(r.length-n,0),s=Array(a);++i<a;)s[i]=r[n+i];i=-1;for(var l=Array(n+1);++i<n;)l[i]=r[i];return l[n]=t(s),vP(e,this,l)}}function MP(e,n){return NP(RP(e,n,VT),e+"")}var FP=9007199254740991;function QT(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=FP}function fv(e){return e!=null&&QT(e.length)&&!$6(e)}function PP(e,n,t){if(!ah(t))return!1;var r=typeof n;return(r=="number"?fv(t)&&YT(n,t.length):r=="string"&&n in t)?Bg(t[n],e):!1}function zP(e){return MP(function(n,t){var r=-1,i=t.length,a=i>1?t[i-1]:void 0,s=i>2?t[2]:void 0;for(a=e.length>3&&typeof a=="function"?(i--,a):void 0,s&&PP(t[0],t[1],s)&&(a=i<3?void 0:a,i=1),n=Object(n);++r<i;){var l=t[r];l&&e(n,l,r,a)}return n})}var qP=Object.prototype;function H6(e){var n=e&&e.constructor,t=typeof n=="function"&&n.prototype||qP;return e===t}function BP(e,n){for(var t=-1,r=Array(e);++t<e;)r[t]=n(t);return r}var $P="[object Arguments]";function W8(e){return Dd(e)&&dm(e)==$P}var KT=Object.prototype,UP=KT.hasOwnProperty,HP=KT.propertyIsEnumerable,aS=W8(function(){return arguments}())?W8:function(e){return Dd(e)&&UP.call(e,"callee")&&!HP.call(e,"callee")};function WP(){return!1}var XT=typeof exports=="object"&&exports&&!exports.nodeType&&exports,V8=XT&&typeof module=="object"&&module&&!module.nodeType&&module,VP=V8&&V8.exports===XT,Y8=VP?Pc.Buffer:void 0,YP=Y8?Y8.isBuffer:void 0,ug=YP||WP,GP="[object Arguments]",QP="[object Array]",KP="[object Boolean]",XP="[object Date]",ZP="[object Error]",JP="[object Function]",ez="[object Map]",tz="[object Number]",nz="[object Object]",rz="[object RegExp]",iz="[object Set]",az="[object String]",sz="[object WeakMap]",oz="[object ArrayBuffer]",lz="[object DataView]",uz="[object Float32Array]",cz="[object Float64Array]",dz="[object Int8Array]",fz="[object Int16Array]",hz="[object Int32Array]",pz="[object Uint8Array]",mz="[object Uint8ClampedArray]",gz="[object Uint16Array]",bz="[object Uint32Array]",di={};di[uz]=di[cz]=di[dz]=di[fz]=di[hz]=di[pz]=di[mz]=di[gz]=di[bz]=!0;di[GP]=di[QP]=di[oz]=di[KP]=di[lz]=di[XP]=di[ZP]=di[JP]=di[ez]=di[tz]=di[nz]=di[rz]=di[iz]=di[az]=di[sz]=!1;function yz(e){return Dd(e)&&QT(e.length)&&!!di[dm(e)]}function W6(e){return function(n){return e(n)}}var ZT=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Y1=ZT&&typeof module=="object"&&module&&!module.nodeType&&module,xz=Y1&&Y1.exports===ZT,M5=xz&&HT.process,X0=function(){try{var e=Y1&&Y1.require&&Y1.require("util").types;return e||M5&&M5.binding&&M5.binding("util")}catch{}}(),G8=X0&&X0.isTypedArray,V6=G8?W6(G8):yz,vz=Object.prototype,wz=vz.hasOwnProperty;function JT(e,n){var t=sp(e),r=!t&&aS(e),i=!t&&!r&&ug(e),a=!t&&!r&&!i&&V6(e),s=t||r||i||a,l=s?BP(e.length,String):[],u=l.length;for(var d in e)(n||wz.call(e,d))&&!(s&&(d=="length"||i&&(d=="offset"||d=="parent")||a&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||YT(d,u)))&&l.push(d);return l}function e7(e,n){return function(t){return e(n(t))}}var Sz=e7(Object.keys,Object),Az=Object.prototype,Cz=Az.hasOwnProperty;function kz(e){if(!H6(e))return Sz(e);var n=[];for(var t in Object(e))Cz.call(e,t)&&t!="constructor"&&n.push(t);return n}function Ez(e){return fv(e)?JT(e):kz(e)}function _z(e){var n=[];if(e!=null)for(var t in Object(e))n.push(t);return n}var Nz=Object.prototype,jz=Nz.hasOwnProperty;function Tz(e){if(!ah(e))return _z(e);var n=H6(e),t=[];for(var r in e)r=="constructor"&&(n||!jz.call(e,r))||t.push(r);return t}function t7(e){return fv(e)?JT(e,!0):Tz(e)}var cg=vp(Object,"create");function Oz(){this.__data__=cg?cg(null):{},this.size=0}function Dz(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}var Iz="__lodash_hash_undefined__",Lz=Object.prototype,Rz=Lz.hasOwnProperty;function Mz(e){var n=this.__data__;if(cg){var t=n[e];return t===Iz?void 0:t}return Rz.call(n,e)?n[e]:void 0}var Fz=Object.prototype,Pz=Fz.hasOwnProperty;function zz(e){var n=this.__data__;return cg?n[e]!==void 0:Pz.call(n,e)}var qz="__lodash_hash_undefined__";function Bz(e,n){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=cg&&n===void 0?qz:n,this}function op(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}op.prototype.clear=Oz;op.prototype.delete=Dz;op.prototype.get=Mz;op.prototype.has=zz;op.prototype.set=Bz;function $z(){this.__data__=[],this.size=0}function hv(e,n){for(var t=e.length;t--;)if(Bg(e[t][0],n))return t;return-1}var Uz=Array.prototype,Hz=Uz.splice;function Wz(e){var n=this.__data__,t=hv(n,e);if(t<0)return!1;var r=n.length-1;return t==r?n.pop():Hz.call(n,t,1),--this.size,!0}function Vz(e){var n=this.__data__,t=hv(n,e);return t<0?void 0:n[t][1]}function Yz(e){return hv(this.__data__,e)>-1}function Gz(e,n){var t=this.__data__,r=hv(t,e);return r<0?(++this.size,t.push([e,n])):t[r][1]=n,this}function Bd(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}Bd.prototype.clear=$z;Bd.prototype.delete=Wz;Bd.prototype.get=Vz;Bd.prototype.has=Yz;Bd.prototype.set=Gz;var dg=vp(Pc,"Map");function Qz(){this.size=0,this.__data__={hash:new op,map:new(dg||Bd),string:new op}}function Kz(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}function pv(e,n){var t=e.__data__;return Kz(n)?t[typeof n=="string"?"string":"hash"]:t.map}function Xz(e){var n=pv(this,e).delete(e);return this.size-=n?1:0,n}function Zz(e){return pv(this,e).get(e)}function Jz(e){return pv(this,e).has(e)}function eq(e,n){var t=pv(this,e),r=t.size;return t.set(e,n),this.size+=t.size==r?0:1,this}function wp(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}wp.prototype.clear=Qz;wp.prototype.delete=Xz;wp.prototype.get=Zz;wp.prototype.has=Jz;wp.prototype.set=eq;function tq(e,n){for(var t=-1,r=n.length,i=e.length;++t<r;)e[i+t]=n[t];return e}var n7=e7(Object.getPrototypeOf,Object),nq="[object Object]",rq=Function.prototype,iq=Object.prototype,r7=rq.toString,aq=iq.hasOwnProperty,sq=r7.call(Object);function oq(e){if(!Dd(e)||dm(e)!=nq)return!1;var n=n7(e);if(n===null)return!0;var t=aq.call(n,"constructor")&&n.constructor;return typeof t=="function"&&t instanceof t&&r7.call(t)==sq}function lq(){this.__data__=new Bd,this.size=0}function uq(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t}function cq(e){return this.__data__.get(e)}function dq(e){return this.__data__.has(e)}var fq=200;function hq(e,n){var t=this.__data__;if(t instanceof Bd){var r=t.__data__;if(!dg||r.length<fq-1)return r.push([e,n]),this.size=++t.size,this;t=this.__data__=new wp(r)}return t.set(e,n),this.size=t.size,this}function Sc(e){var n=this.__data__=new Bd(e);this.size=n.size}Sc.prototype.clear=lq;Sc.prototype.delete=uq;Sc.prototype.get=cq;Sc.prototype.has=dq;Sc.prototype.set=hq;var i7=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Q8=i7&&typeof module=="object"&&module&&!module.nodeType&&module,pq=Q8&&Q8.exports===i7,K8=pq?Pc.Buffer:void 0,X8=K8?K8.allocUnsafe:void 0;function a7(e,n){if(n)return e.slice();var t=e.length,r=X8?X8(t):new e.constructor(t);return e.copy(r),r}function mq(e,n){for(var t=-1,r=e==null?0:e.length,i=0,a=[];++t<r;){var s=e[t];n(s,t,e)&&(a[i++]=s)}return a}function gq(){return[]}var bq=Object.prototype,yq=bq.propertyIsEnumerable,Z8=Object.getOwnPropertySymbols,xq=Z8?function(e){return e==null?[]:(e=Object(e),mq(Z8(e),function(n){return yq.call(e,n)}))}:gq;function vq(e,n,t){var r=n(e);return sp(e)?r:tq(r,t(e))}function sS(e){return vq(e,Ez,xq)}var oS=vp(Pc,"DataView"),lS=vp(Pc,"Promise"),uS=vp(Pc,"Set"),J8="[object Map]",wq="[object Object]",e4="[object Promise]",t4="[object Set]",n4="[object WeakMap]",r4="[object DataView]",Sq=xp(oS),Aq=xp(dg),Cq=xp(lS),kq=xp(uS),Eq=xp(iS),hu=dm;(oS&&hu(new oS(new ArrayBuffer(1)))!=r4||dg&&hu(new dg)!=J8||lS&&hu(lS.resolve())!=e4||uS&&hu(new uS)!=t4||iS&&hu(new iS)!=n4)&&(hu=function(e){var n=dm(e),t=n==wq?e.constructor:void 0,r=t?xp(t):"";if(r)switch(r){case Sq:return r4;case Aq:return J8;case Cq:return e4;case kq:return t4;case Eq:return n4}return n});var _q=Object.prototype,Nq=_q.hasOwnProperty;function jq(e){var n=e.length,t=new e.constructor(n);return n&&typeof e[0]=="string"&&Nq.call(e,"index")&&(t.index=e.index,t.input=e.input),t}var Cx=Pc.Uint8Array;function Y6(e){var n=new e.constructor(e.byteLength);return new Cx(n).set(new Cx(e)),n}function Tq(e,n){var t=Y6(e.buffer);return new e.constructor(t,e.byteOffset,e.byteLength)}var Oq=/\w*$/;function Dq(e){var n=new e.constructor(e.source,Oq.exec(e));return n.lastIndex=e.lastIndex,n}var i4=Qf?Qf.prototype:void 0,a4=i4?i4.valueOf:void 0;function Iq(e){return a4?Object(a4.call(e)):{}}function s7(e,n){var t=n?Y6(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}var Lq="[object Boolean]",Rq="[object Date]",Mq="[object Map]",Fq="[object Number]",Pq="[object RegExp]",zq="[object Set]",qq="[object String]",Bq="[object Symbol]",$q="[object ArrayBuffer]",Uq="[object DataView]",Hq="[object Float32Array]",Wq="[object Float64Array]",Vq="[object Int8Array]",Yq="[object Int16Array]",Gq="[object Int32Array]",Qq="[object Uint8Array]",Kq="[object Uint8ClampedArray]",Xq="[object Uint16Array]",Zq="[object Uint32Array]";function Jq(e,n,t){var r=e.constructor;switch(n){case $q:return Y6(e);case Lq:case Rq:return new r(+e);case Uq:return Tq(e);case Hq:case Wq:case Vq:case Yq:case Gq:case Qq:case Kq:case Xq:case Zq:return s7(e,t);case Mq:return new r;case Fq:case qq:return new r(e);case Pq:return Dq(e);case zq:return new r;case Bq:return Iq(e)}}function o7(e){return typeof e.constructor=="function"&&!H6(e)?xP(n7(e)):{}}var eB="[object Map]";function tB(e){return Dd(e)&&hu(e)==eB}var s4=X0&&X0.isMap,nB=s4?W6(s4):tB,rB="[object Set]";function iB(e){return Dd(e)&&hu(e)==rB}var o4=X0&&X0.isSet,aB=o4?W6(o4):iB,sB=1,l7="[object Arguments]",oB="[object Array]",lB="[object Boolean]",uB="[object Date]",cB="[object Error]",u7="[object Function]",dB="[object GeneratorFunction]",fB="[object Map]",hB="[object Number]",c7="[object Object]",pB="[object RegExp]",mB="[object Set]",gB="[object String]",bB="[object Symbol]",yB="[object WeakMap]",xB="[object ArrayBuffer]",vB="[object DataView]",wB="[object Float32Array]",SB="[object Float64Array]",AB="[object Int8Array]",CB="[object Int16Array]",kB="[object Int32Array]",EB="[object Uint8Array]",_B="[object Uint8ClampedArray]",NB="[object Uint16Array]",jB="[object Uint32Array]",ri={};ri[l7]=ri[oB]=ri[xB]=ri[vB]=ri[lB]=ri[uB]=ri[wB]=ri[SB]=ri[AB]=ri[CB]=ri[kB]=ri[fB]=ri[hB]=ri[c7]=ri[pB]=ri[mB]=ri[gB]=ri[bB]=ri[EB]=ri[_B]=ri[NB]=ri[jB]=!0;ri[cB]=ri[u7]=ri[yB]=!1;function Uy(e,n,t,r,i,a){var s,l=n&sB;if(s!==void 0)return s;if(!ah(e))return e;var u=sp(e);if(u)s=jq(e);else{var d=hu(e),f=d==u7||d==dB;if(ug(e))return a7(e,l);if(d==c7||d==l7||f&&!i)s=f?{}:o7(e);else{if(!ri[d])return i?e:{};s=Jq(e,d,l)}}a||(a=new Sc);var m=a.get(e);if(m)return m;a.set(e,s),aB(e)?e.forEach(function(x){s.add(Uy(x,n,t,x,e,a))}):nB(e)&&e.forEach(function(x,y){s.set(y,Uy(x,n,t,y,e,a))});var b=sS,g=u?void 0:b(e);return jP(g||e,function(x,y){g&&(y=x,x=e[y]),GT(s,y,Uy(x,n,t,y,e,a))}),s}var TB=1,OB=4;function I0(e){return Uy(e,TB|OB)}var DB="__lodash_hash_undefined__";function IB(e){return this.__data__.set(e,DB),this}function LB(e){return this.__data__.has(e)}function kx(e){var n=-1,t=e==null?0:e.length;for(this.__data__=new wp;++n<t;)this.add(e[n])}kx.prototype.add=kx.prototype.push=IB;kx.prototype.has=LB;function RB(e,n){for(var t=-1,r=e==null?0:e.length;++t<r;)if(n(e[t],t,e))return!0;return!1}function MB(e,n){return e.has(n)}var FB=1,PB=2;function d7(e,n,t,r,i,a){var s=t&FB,l=e.length,u=n.length;if(l!=u&&!(s&&u>l))return!1;var d=a.get(e),f=a.get(n);if(d&&f)return d==n&&f==e;var m=-1,b=!0,g=t&PB?new kx:void 0;for(a.set(e,n),a.set(n,e);++m<l;){var x=e[m],y=n[m];if(r)var A=s?r(y,x,m,n,e,a):r(x,y,m,e,n,a);if(A!==void 0){if(A)continue;b=!1;break}if(g){if(!RB(n,function(w,C){if(!MB(g,C)&&(x===w||i(x,w,t,r,a)))return g.push(C)})){b=!1;break}}else if(!(x===y||i(x,y,t,r,a))){b=!1;break}}return a.delete(e),a.delete(n),b}function zB(e){var n=-1,t=Array(e.size);return e.forEach(function(r,i){t[++n]=[i,r]}),t}function qB(e){var n=-1,t=Array(e.size);return e.forEach(function(r){t[++n]=r}),t}var BB=1,$B=2,UB="[object Boolean]",HB="[object Date]",WB="[object Error]",VB="[object Map]",YB="[object Number]",GB="[object RegExp]",QB="[object Set]",KB="[object String]",XB="[object Symbol]",ZB="[object ArrayBuffer]",JB="[object DataView]",l4=Qf?Qf.prototype:void 0,F5=l4?l4.valueOf:void 0;function e$(e,n,t,r,i,a,s){switch(t){case JB:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case ZB:return!(e.byteLength!=n.byteLength||!a(new Cx(e),new Cx(n)));case UB:case HB:case YB:return Bg(+e,+n);case WB:return e.name==n.name&&e.message==n.message;case GB:case KB:return e==n+"";case VB:var l=zB;case QB:var u=r&BB;if(l||(l=qB),e.size!=n.size&&!u)return!1;var d=s.get(e);if(d)return d==n;r|=$B,s.set(e,n);var f=d7(l(e),l(n),r,i,a,s);return s.delete(e),f;case XB:if(F5)return F5.call(e)==F5.call(n)}return!1}var t$=1,n$=Object.prototype,r$=n$.hasOwnProperty;function i$(e,n,t,r,i,a){var s=t&t$,l=sS(e),u=l.length,d=sS(n),f=d.length;if(u!=f&&!s)return!1;for(var m=u;m--;){var b=l[m];if(!(s?b in n:r$.call(n,b)))return!1}var g=a.get(e),x=a.get(n);if(g&&x)return g==n&&x==e;var y=!0;a.set(e,n),a.set(n,e);for(var A=s;++m<u;){b=l[m];var w=e[b],C=n[b];if(r)var j=s?r(C,w,b,n,e,a):r(w,C,b,e,n,a);if(!(j===void 0?w===C||i(w,C,t,r,a):j)){y=!1;break}A||(A=b=="constructor")}if(y&&!A){var F=e.constructor,M=n.constructor;F!=M&&"constructor"in e&&"constructor"in n&&!(typeof F=="function"&&F instanceof F&&typeof M=="function"&&M instanceof M)&&(y=!1)}return a.delete(e),a.delete(n),y}var a$=1,u4="[object Arguments]",c4="[object Array]",dy="[object Object]",s$=Object.prototype,d4=s$.hasOwnProperty;function o$(e,n,t,r,i,a){var s=sp(e),l=sp(n),u=s?c4:hu(e),d=l?c4:hu(n);u=u==u4?dy:u,d=d==u4?dy:d;var f=u==dy,m=d==dy,b=u==d;if(b&&ug(e)){if(!ug(n))return!1;s=!0,f=!1}if(b&&!f)return a||(a=new Sc),s||V6(e)?d7(e,n,t,r,i,a):e$(e,n,u,t,r,i,a);if(!(t&a$)){var g=f&&d4.call(e,"__wrapped__"),x=m&&d4.call(n,"__wrapped__");if(g||x){var y=g?e.value():e,A=x?n.value():n;return a||(a=new Sc),i(y,A,t,r,a)}}return b?(a||(a=new Sc),i$(e,n,t,r,i,a)):!1}function f7(e,n,t,r,i){return e===n?!0:e==null||n==null||!Dd(e)&&!Dd(n)?e!==e&&n!==n:o$(e,n,t,r,f7,i)}function l$(e){return function(n,t,r){for(var i=-1,a=Object(n),s=r(n),l=s.length;l--;){var u=s[++i];if(t(a[u],u,a)===!1)break}return n}}var u$=l$();function cS(e,n,t){(t!==void 0&&!Bg(e[n],t)||t===void 0&&!(n in e))&&U6(e,n,t)}function c$(e){return Dd(e)&&fv(e)}function dS(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}function d$(e){return LP(e,t7(e))}function f$(e,n,t,r,i,a,s){var l=dS(e,t),u=dS(n,t),d=s.get(u);if(d){cS(e,t,d);return}var f=a?a(l,u,t+"",e,n,s):void 0,m=f===void 0;if(m){var b=sp(u),g=!b&&ug(u),x=!b&&!g&&V6(u);f=u,b||g||x?sp(l)?f=l:c$(l)?f=wP(l):g?(m=!1,f=a7(u,!0)):x?(m=!1,f=s7(u,!0)):f=[]:oq(u)||aS(u)?(f=l,aS(l)?f=d$(l):(!ah(l)||$6(l))&&(f=o7(u))):m=!1}m&&(s.set(u,f),i(f,u,r,a,s),s.delete(u)),cS(e,t,f)}function h7(e,n,t,r,i){e!==n&&u$(n,function(a,s){if(i||(i=new Sc),ah(a))f$(e,n,s,t,h7,r,i);else{var l=r?r(dS(e,s),a,s+"",e,n,i):void 0;l===void 0&&(l=a),cS(e,s,l)}},t7)}function Df(e,n){return f7(e,n)}var Wf=zP(function(e,n,t){h7(e,n,t)}),Wt=(e=>(e[e.TYPE=3]="TYPE",e[e.LEVEL=12]="LEVEL",e[e.ATTRIBUTE=13]="ATTRIBUTE",e[e.BLOT=14]="BLOT",e[e.INLINE=7]="INLINE",e[e.BLOCK=11]="BLOCK",e[e.BLOCK_BLOT=10]="BLOCK_BLOT",e[e.INLINE_BLOT=6]="INLINE_BLOT",e[e.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",e[e.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",e[e.ANY=15]="ANY",e))(Wt||{});class Lc{constructor(n,t,r={}){this.attrName=n,this.keyName=t;const i=Wt.TYPE&Wt.ATTRIBUTE;this.scope=r.scope!=null?r.scope&Wt.LEVEL|i:Wt.ATTRIBUTE,r.whitelist!=null&&(this.whitelist=r.whitelist)}static keys(n){return Array.from(n.attributes).map(t=>t.name)}add(n,t){return this.canAdd(n,t)?(n.setAttribute(this.keyName,t),!0):!1}canAdd(n,t){return this.whitelist==null?!0:typeof t=="string"?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1}remove(n){n.removeAttribute(this.keyName)}value(n){const t=n.getAttribute(this.keyName);return this.canAdd(n,t)&&t?t:""}}class L0 extends Error{constructor(n){n="[Parchment] "+n,super(n),this.message=n,this.name=this.constructor.name}}const p7=class fS{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(n,t=!1){if(n==null)return null;if(this.blots.has(n))return this.blots.get(n)||null;if(t){let r=null;try{r=n.parentNode}catch{return null}return this.find(r,t)}return null}create(n,t,r){const i=this.query(t);if(i==null)throw new L0(`Unable to create ${t} blot`);const a=i,s=t instanceof Node||t.nodeType===Node.TEXT_NODE?t:a.create(r),l=new a(n,s,r);return fS.blots.set(l.domNode,l),l}find(n,t=!1){return fS.find(n,t)}query(n,t=Wt.ANY){let r;return typeof n=="string"?r=this.types[n]||this.attributes[n]:n instanceof Text||n.nodeType===Node.TEXT_NODE?r=this.types.text:typeof n=="number"?n&Wt.LEVEL&Wt.BLOCK?r=this.types.block:n&Wt.LEVEL&Wt.INLINE&&(r=this.types.inline):n instanceof Element&&((n.getAttribute("class")||"").split(/\s+/).some(i=>(r=this.classes[i],!!r)),r=r||this.tags[n.tagName]),r==null?null:"scope"in r&&t&Wt.LEVEL&r.scope&&t&Wt.TYPE&r.scope?r:null}register(...n){return n.map(t=>{const r="blotName"in t,i="attrName"in t;if(!r&&!i)throw new L0("Invalid definition");if(r&&t.blotName==="abstract")throw new L0("Cannot register abstract class");const a=r?t.blotName:i?t.attrName:void 0;return this.types[a]=t,i?typeof t.keyName=="string"&&(this.attributes[t.keyName]=t):r&&(t.className&&(this.classes[t.className]=t),t.tagName&&(Array.isArray(t.tagName)?t.tagName=t.tagName.map(s=>s.toUpperCase()):t.tagName=t.tagName.toUpperCase(),(Array.isArray(t.tagName)?t.tagName:[t.tagName]).forEach(s=>{(this.tags[s]==null||t.className==null)&&(this.tags[s]=t)}))),t})}};p7.blots=new WeakMap;let Z0=p7;function f4(e,n){return(e.getAttribute("class")||"").split(/\s+/).filter(t=>t.indexOf(`${n}-`)===0)}class h$ extends Lc{static keys(n){return(n.getAttribute("class")||"").split(/\s+/).map(t=>t.split("-").slice(0,-1).join("-"))}add(n,t){return this.canAdd(n,t)?(this.remove(n),n.classList.add(`${this.keyName}-${t}`),!0):!1}remove(n){f4(n,this.keyName).forEach(t=>{n.classList.remove(t)}),n.classList.length===0&&n.removeAttribute("class")}value(n){const t=(f4(n,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(n,t)?t:""}}const Su=h$;function P5(e){const n=e.split("-"),t=n.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("");return n[0]+t}class p$ extends Lc{static keys(n){return(n.getAttribute("style")||"").split(";").map(t=>t.split(":")[0].trim())}add(n,t){return this.canAdd(n,t)?(n.style[P5(this.keyName)]=t,!0):!1}remove(n){n.style[P5(this.keyName)]="",n.getAttribute("style")||n.removeAttribute("style")}value(n){const t=n.style[P5(this.keyName)];return this.canAdd(n,t)?t:""}}const sh=p$;class m${constructor(n){this.attributes={},this.domNode=n,this.build()}attribute(n,t){t?n.add(this.domNode,t)&&(n.value(this.domNode)!=null?this.attributes[n.attrName]=n:delete this.attributes[n.attrName]):(n.remove(this.domNode),delete this.attributes[n.attrName])}build(){this.attributes={};const n=Z0.find(this.domNode);if(n==null)return;const t=Lc.keys(this.domNode),r=Su.keys(this.domNode),i=sh.keys(this.domNode);t.concat(r).concat(i).forEach(a=>{const s=n.scroll.query(a,Wt.ATTRIBUTE);s instanceof Lc&&(this.attributes[s.attrName]=s)})}copy(n){Object.keys(this.attributes).forEach(t=>{const r=this.attributes[t].value(this.domNode);n.format(t,r)})}move(n){this.copy(n),Object.keys(this.attributes).forEach(t=>{this.attributes[t].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((n,t)=>(n[t]=this.attributes[t].value(this.domNode),n),{})}}const mv=m$,m7=class{constructor(n,t){this.scroll=n,this.domNode=t,Z0.blots.set(t,this),this.prev=null,this.next=null}static create(n){if(this.tagName==null)throw new L0("Blot definition missing tagName");let t,r;return Array.isArray(this.tagName)?(typeof n=="string"?(r=n.toUpperCase(),parseInt(r,10).toString()===r&&(r=parseInt(r,10))):typeof n=="number"&&(r=n),typeof r=="number"?t=document.createElement(this.tagName[r-1]):r&&this.tagName.indexOf(r)>-1?t=document.createElement(r):t=document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t}get statics(){return this.constructor}attach(){}clone(){const n=this.domNode.cloneNode(!1);return this.scroll.create(n)}detach(){this.parent!=null&&this.parent.removeChild(this),Z0.blots.delete(this.domNode)}deleteAt(n,t){this.isolate(n,t).remove()}formatAt(n,t,r,i){const a=this.isolate(n,t);if(this.scroll.query(r,Wt.BLOT)!=null&&i)a.wrap(r,i);else if(this.scroll.query(r,Wt.ATTRIBUTE)!=null){const s=this.scroll.create(this.statics.scope);a.wrap(s),s.format(r,i)}}insertAt(n,t,r){const i=r==null?this.scroll.create("text",t):this.scroll.create(t,r),a=this.split(n);this.parent.insertBefore(i,a||void 0)}isolate(n,t){const r=this.split(n);if(r==null)throw new Error("Attempt to isolate at end");return r.split(t),r}length(){return 1}offset(n=this.parent){return this.parent==null||this===n?0:this.parent.children.offset(this)+this.parent.offset(n)}optimize(n){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(n,t){const r=typeof n=="string"?this.scroll.create(n,t):n;return this.parent!=null&&(this.parent.insertBefore(r,this.next||void 0),this.remove()),r}split(n,t){return n===0?this:this.next}update(n,t){}wrap(n,t){const r=typeof n=="string"?this.scroll.create(n,t):n;if(this.parent!=null&&this.parent.insertBefore(r,this.next||void 0),typeof r.appendChild!="function")throw new L0(`Cannot wrap ${n}`);return r.appendChild(this),r}};m7.blotName="abstract";let g7=m7;const b7=class extends g7{static value(n){return!0}index(n,t){return this.domNode===n||this.domNode.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1}position(n,t){let r=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return n>0&&(r+=1),[this.parent.domNode,r]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};b7.scope=Wt.INLINE_BLOT;let g$=b7;const Ms=g$;class b${constructor(){this.head=null,this.tail=null,this.length=0}append(...n){if(this.insertBefore(n[0],null),n.length>1){const t=n.slice(1);this.append(...t)}}at(n){const t=this.iterator();let r=t();for(;r&&n>0;)n-=1,r=t();return r}contains(n){const t=this.iterator();let r=t();for(;r;){if(r===n)return!0;r=t()}return!1}indexOf(n){const t=this.iterator();let r=t(),i=0;for(;r;){if(r===n)return i;i+=1,r=t()}return-1}insertBefore(n,t){n!=null&&(this.remove(n),n.next=t,t!=null?(n.prev=t.prev,t.prev!=null&&(t.prev.next=n),t.prev=n,t===this.head&&(this.head=n)):this.tail!=null?(this.tail.next=n,n.prev=this.tail,this.tail=n):(n.prev=null,this.head=this.tail=n),this.length+=1)}offset(n){let t=0,r=this.head;for(;r!=null;){if(r===n)return t;t+=r.length(),r=r.next}return-1}remove(n){this.contains(n)&&(n.prev!=null&&(n.prev.next=n.next),n.next!=null&&(n.next.prev=n.prev),n===this.head&&(this.head=n.next),n===this.tail&&(this.tail=n.prev),this.length-=1)}iterator(n=this.head){return()=>{const t=n;return n!=null&&(n=n.next),t}}find(n,t=!1){const r=this.iterator();let i=r();for(;i;){const a=i.length();if(n<a||t&&n===a&&(i.next==null||i.next.length()!==0))return[i,n];n-=a,i=r()}return[null,0]}forEach(n){const t=this.iterator();let r=t();for(;r;)n(r),r=t()}forEachAt(n,t,r){if(t<=0)return;const[i,a]=this.find(n);let s=n-a;const l=this.iterator(i);let u=l();for(;u&&s<n+t;){const d=u.length();n>s?r(u,n-s,Math.min(t,s+d-n)):r(u,0,Math.min(d,n+t-s)),s+=d,u=l()}}map(n){return this.reduce((t,r)=>(t.push(n(r)),t),[])}reduce(n,t){const r=this.iterator();let i=r();for(;i;)t=n(t,i),i=r();return t}}function h4(e,n){const t=n.find(e);if(t)return t;try{return n.create(e)}catch{const r=n.create(Wt.INLINE);return Array.from(e.childNodes).forEach(i=>{r.domNode.appendChild(i)}),e.parentNode&&e.parentNode.replaceChild(r.domNode,e),r.attach(),r}}const y7=class Of extends g7{constructor(n,t){super(n,t),this.uiNode=null,this.build()}appendChild(n){this.insertBefore(n)}attach(){super.attach(),this.children.forEach(n=>{n.attach()})}attachUI(n){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=n,Of.uiClass&&this.uiNode.classList.add(Of.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new b$,Array.from(this.domNode.childNodes).filter(n=>n!==this.uiNode).reverse().forEach(n=>{try{const t=h4(n,this.scroll);this.insertBefore(t,this.children.head||void 0)}catch(t){if(t instanceof L0)return;throw t}})}deleteAt(n,t){if(n===0&&t===this.length())return this.remove();this.children.forEachAt(n,t,(r,i,a)=>{r.deleteAt(i,a)})}descendant(n,t=0){const[r,i]=this.children.find(t);return n.blotName==null&&n(r)||n.blotName!=null&&r instanceof n?[r,i]:r instanceof Of?r.descendant(n,i):[null,-1]}descendants(n,t=0,r=Number.MAX_VALUE){let i=[],a=r;return this.children.forEachAt(t,r,(s,l,u)=>{(n.blotName==null&&n(s)||n.blotName!=null&&s instanceof n)&&i.push(s),s instanceof Of&&(i=i.concat(s.descendants(n,l,a))),a-=u}),i}detach(){this.children.forEach(n=>{n.detach()}),super.detach()}enforceAllowedChildren(){let n=!1;this.children.forEach(t=>{n||this.statics.allowedChildren.some(r=>t instanceof r)||(t.statics.scope===Wt.BLOCK_BLOT?(t.next!=null&&this.splitAfter(t),t.prev!=null&&this.splitAfter(t.prev),t.parent.unwrap(),n=!0):t instanceof Of?t.unwrap():t.remove())})}formatAt(n,t,r,i){this.children.forEachAt(n,t,(a,s,l)=>{a.formatAt(s,l,r,i)})}insertAt(n,t,r){const[i,a]=this.children.find(n);if(i)i.insertAt(a,t,r);else{const s=r==null?this.scroll.create("text",t):this.scroll.create(t,r);this.appendChild(s)}}insertBefore(n,t){n.parent!=null&&n.parent.children.remove(n);let r=null;this.children.insertBefore(n,t||null),n.parent=this,t!=null&&(r=t.domNode),(this.domNode.parentNode!==n.domNode||this.domNode.nextSibling!==r)&&this.domNode.insertBefore(n.domNode,r),n.attach()}length(){return this.children.reduce((n,t)=>n+t.length(),0)}moveChildren(n,t){this.children.forEach(r=>{n.insertBefore(r,t)})}optimize(n){if(super.optimize(n),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t)}else this.remove()}path(n,t=!1){const[r,i]=this.children.find(n,t),a=[[this,n]];return r instanceof Of?a.concat(r.path(i,t)):(r!=null&&a.push([r,i]),a)}removeChild(n){this.children.remove(n)}replaceWith(n,t){const r=typeof n=="string"?this.scroll.create(n,t):n;return r instanceof Of&&this.moveChildren(r),super.replaceWith(r)}split(n,t=!1){if(!t){if(n===0)return this;if(n===this.length())return this.next}const r=this.clone();return this.parent&&this.parent.insertBefore(r,this.next||void 0),this.children.forEachAt(n,this.length(),(i,a,s)=>{const l=i.split(a,t);l!=null&&r.appendChild(l)}),r}splitAfter(n){const t=this.clone();for(;n.next!=null;)t.appendChild(n.next);return this.parent&&this.parent.insertBefore(t,this.next||void 0),t}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(n,t){const r=[],i=[];n.forEach(a=>{a.target===this.domNode&&a.type==="childList"&&(r.push(...a.addedNodes),i.push(...a.removedNodes))}),i.forEach(a=>{if(a.parentNode!=null&&a.tagName!=="IFRAME"&&document.body.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const s=this.scroll.find(a);s!=null&&(s.domNode.parentNode==null||s.domNode.parentNode===this.domNode)&&s.detach()}),r.filter(a=>a.parentNode===this.domNode&&a!==this.uiNode).sort((a,s)=>a===s?0:a.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(a=>{let s=null;a.nextSibling!=null&&(s=this.scroll.find(a.nextSibling));const l=h4(a,this.scroll);(l.next!==s||l.next==null)&&(l.parent!=null&&l.parent.removeChild(this),this.insertBefore(l,s||void 0))}),this.enforceAllowedChildren()}};y7.uiClass="";let y$=y7;const yu=y$;function x$(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const t in e)if(e[t]!==n[t])return!1;return!0}const w0=class S0 extends yu{static create(n){return super.create(n)}static formats(n,t){const r=t.query(S0.blotName);if(!(r!=null&&n.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return n.tagName.toLowerCase()}}constructor(n,t){super(n,t),this.attributes=new mv(this.domNode)}format(n,t){if(n===this.statics.blotName&&!t)this.children.forEach(r=>{r instanceof S0||(r=r.wrap(S0.blotName,!0)),this.attributes.copy(r)}),this.unwrap();else{const r=this.scroll.query(n,Wt.INLINE);if(r==null)return;r instanceof Lc?this.attributes.attribute(r,t):t&&(n!==this.statics.blotName||this.formats()[n]!==t)&&this.replaceWith(n,t)}}formats(){const n=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(n[this.statics.blotName]=t),n}formatAt(n,t,r,i){this.formats()[r]!=null||this.scroll.query(r,Wt.ATTRIBUTE)?this.isolate(n,t).format(r,i):super.formatAt(n,t,r,i)}optimize(n){super.optimize(n);const t=this.formats();if(Object.keys(t).length===0)return this.unwrap();const r=this.next;r instanceof S0&&r.prev===this&&x$(t,r.formats())&&(r.moveChildren(this),r.remove())}replaceWith(n,t){const r=super.replaceWith(n,t);return this.attributes.copy(r),r}update(n,t){super.update(n,t),n.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}wrap(n,t){const r=super.wrap(n,t);return r instanceof S0&&this.attributes.move(r),r}};w0.allowedChildren=[w0,Ms],w0.blotName="inline",w0.scope=Wt.INLINE_BLOT,w0.tagName="SPAN";let v$=w0;const G6=v$,A0=class hS extends yu{static create(n){return super.create(n)}static formats(n,t){const r=t.query(hS.blotName);if(!(r!=null&&n.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return n.tagName.toLowerCase()}}constructor(n,t){super(n,t),this.attributes=new mv(this.domNode)}format(n,t){const r=this.scroll.query(n,Wt.BLOCK);r!=null&&(r instanceof Lc?this.attributes.attribute(r,t):n===this.statics.blotName&&!t?this.replaceWith(hS.blotName):t&&(n!==this.statics.blotName||this.formats()[n]!==t)&&this.replaceWith(n,t))}formats(){const n=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(n[this.statics.blotName]=t),n}formatAt(n,t,r,i){this.scroll.query(r,Wt.BLOCK)!=null?this.format(r,i):super.formatAt(n,t,r,i)}insertAt(n,t,r){if(r==null||this.scroll.query(t,Wt.INLINE)!=null)super.insertAt(n,t,r);else{const i=this.split(n);if(i!=null){const a=this.scroll.create(t,r);i.parent.insertBefore(a,i)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(n,t){const r=super.replaceWith(n,t);return this.attributes.copy(r),r}update(n,t){super.update(n,t),n.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}};A0.blotName="block",A0.scope=Wt.BLOCK_BLOT,A0.tagName="P",A0.allowedChildren=[G6,A0,Ms];let w$=A0;const fg=w$,pS=class extends yu{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(n,t){super.deleteAt(n,t),this.enforceAllowedChildren()}formatAt(n,t,r,i){super.formatAt(n,t,r,i),this.enforceAllowedChildren()}insertAt(n,t,r){super.insertAt(n,t,r),this.enforceAllowedChildren()}optimize(n){super.optimize(n),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};pS.blotName="container",pS.scope=Wt.BLOCK_BLOT;let S$=pS;const gv=S$;class A$ extends Ms{static formats(n,t){}format(n,t){super.formatAt(0,this.length(),n,t)}formatAt(n,t,r,i){n===0&&t===this.length()?this.format(r,i):super.formatAt(n,t,r,i)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const el=A$,C$={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},k$=100,C0=class extends yu{constructor(n,t){super(null,t),this.registry=n,this.scroll=this,this.build(),this.observer=new MutationObserver(r=>{this.update(r)}),this.observer.observe(this.domNode,C$),this.attach()}create(n,t){return this.registry.create(this,n,t)}find(n,t=!1){const r=this.registry.find(n,t);return r?r.scroll===this?r:t?this.find(r.scroll.domNode.parentNode,!0):null:null}query(n,t=Wt.ANY){return this.registry.query(n,t)}register(...n){return this.registry.register(...n)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(n,t){this.update(),n===0&&t===this.length()?this.children.forEach(r=>{r.remove()}):super.deleteAt(n,t)}formatAt(n,t,r,i){this.update(),super.formatAt(n,t,r,i)}insertAt(n,t,r){this.update(),super.insertAt(n,t,r)}optimize(n=[],t={}){super.optimize(t);const r=t.mutationsMap||new WeakMap;let i=Array.from(this.observer.takeRecords());for(;i.length>0;)n.push(i.pop());const a=(u,d=!0)=>{u==null||u===this||u.domNode.parentNode!=null&&(r.has(u.domNode)||r.set(u.domNode,[]),d&&a(u.parent))},s=u=>{r.has(u.domNode)&&(u instanceof yu&&u.children.forEach(s),r.delete(u.domNode),u.optimize(t))};let l=n;for(let u=0;l.length>0;u+=1){if(u>=k$)throw new Error("[Parchment] Maximum optimize iterations reached");for(l.forEach(d=>{const f=this.find(d.target,!0);f!=null&&(f.domNode===d.target&&(d.type==="childList"?(a(this.find(d.previousSibling,!1)),Array.from(d.addedNodes).forEach(m=>{const b=this.find(m,!1);a(b,!1),b instanceof yu&&b.children.forEach(g=>{a(g,!1)})})):d.type==="attributes"&&a(f.prev)),a(f))}),this.children.forEach(s),l=Array.from(this.observer.takeRecords()),i=l.slice();i.length>0;)n.push(i.pop())}}update(n,t={}){n=n||this.observer.takeRecords();const r=new WeakMap;n.map(i=>{const a=this.find(i.target,!0);return a==null?null:r.has(a.domNode)?(r.get(a.domNode).push(i),null):(r.set(a.domNode,[i]),a)}).forEach(i=>{i!=null&&i!==this&&r.has(i.domNode)&&i.update(r.get(i.domNode)||[],t)}),t.mutationsMap=r,r.has(this.domNode)&&super.update(r.get(this.domNode),t),this.optimize(n,t)}};C0.blotName="scroll",C0.defaultChild=fg,C0.allowedChildren=[fg,gv],C0.scope=Wt.BLOCK_BLOT,C0.tagName="DIV";let E$=C0;const Q6=E$,mS=class x7 extends Ms{static create(n){return document.createTextNode(n)}static value(n){return n.data}constructor(n,t){super(n,t),this.text=this.statics.value(this.domNode)}deleteAt(n,t){this.domNode.data=this.text=this.text.slice(0,n)+this.text.slice(n+t)}index(n,t){return this.domNode===n?t:-1}insertAt(n,t,r){r==null?(this.text=this.text.slice(0,n)+t+this.text.slice(n),this.domNode.data=this.text):super.insertAt(n,t,r)}length(){return this.text.length}optimize(n){super.optimize(n),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof x7&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(n,t=!1){return[this.domNode,n]}split(n,t=!1){if(!t){if(n===0)return this;if(n===this.length())return this.next}const r=this.scroll.create(this.domNode.splitText(n));return this.parent.insertBefore(r,this.next||void 0),this.text=this.statics.value(this.domNode),r}update(n,t){n.some(r=>r.type==="characterData"&&r.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};mS.blotName="text",mS.scope=Wt.INLINE_BLOT;let _$=mS;const Ex=_$,N$=Object.freeze(Object.defineProperty({__proto__:null,Attributor:Lc,AttributorStore:mv,BlockBlot:fg,ClassAttributor:Su,ContainerBlot:gv,EmbedBlot:el,InlineBlot:G6,LeafBlot:Ms,ParentBlot:yu,Registry:Z0,Scope:Wt,ScrollBlot:Q6,StyleAttributor:sh,TextBlot:Ex},Symbol.toStringTag,{value:"Module"}));var fy={exports:{}},z5,p4;function j$(){if(p4)return z5;p4=1;var e=-1,n=1,t=0;function r(O,T,R,N,G){if(O===T)return O?[[t,O]]:[];if(R!=null){var W=$(O,T,R);if(W)return W}var Q=l(O,T),J=O.substring(0,Q);O=O.substring(Q),T=T.substring(Q),Q=d(O,T);var se=O.substring(O.length-Q);O=O.substring(0,O.length-Q),T=T.substring(0,T.length-Q);var U=i(O,T);return J&&U.unshift([t,J]),se&&U.push([t,se]),C(U,G),N&&m(U),U}function i(O,T){var R;if(!O)return[[n,T]];if(!T)return[[e,O]];var N=O.length>T.length?O:T,G=O.length>T.length?T:O,W=N.indexOf(G);if(W!==-1)return R=[[n,N.substring(0,W)],[t,G],[n,N.substring(W+G.length)]],O.length>T.length&&(R[0][0]=R[2][0]=e),R;if(G.length===1)return[[e,O],[n,T]];var Q=f(O,T);if(Q){var J=Q[0],se=Q[1],U=Q[2],le=Q[3],q=Q[4],B=r(J,U),ee=r(se,le);return B.concat([[t,q]],ee)}return a(O,T)}function a(O,T){for(var R=O.length,N=T.length,G=Math.ceil((R+N)/2),W=G,Q=2*G,J=new Array(Q),se=new Array(Q),U=0;U<Q;U++)J[U]=-1,se[U]=-1;J[W+1]=0,se[W+1]=0;for(var le=R-N,q=le%2!==0,B=0,ee=0,re=0,oe=0,Ce=0;Ce<G;Ce++){for(var ye=-Ce+B;ye<=Ce-ee;ye+=2){var Se=W+ye,Te;ye===-Ce||ye!==Ce&&J[Se-1]<J[Se+1]?Te=J[Se+1]:Te=J[Se-1]+1;for(var Le=Te-ye;Te<R&&Le<N&&O.charAt(Te)===T.charAt(Le);)Te++,Le++;if(J[Se]=Te,Te>R)ee+=2;else if(Le>N)B+=2;else if(q){var He=W+le-ye;if(He>=0&&He<Q&&se[He]!==-1){var Ye=R-se[He];if(Te>=Ye)return s(O,T,Te,Le)}}}for(var V=-Ce+re;V<=Ce-oe;V+=2){var He=W+V,Ye;V===-Ce||V!==Ce&&se[He-1]<se[He+1]?Ye=se[He+1]:Ye=se[He-1]+1;for(var Ae=Ye-V;Ye<R&&Ae<N&&O.charAt(R-Ye-1)===T.charAt(N-Ae-1);)Ye++,Ae++;if(se[He]=Ye,Ye>R)oe+=2;else if(Ae>N)re+=2;else if(!q){var Se=W+le-V;if(Se>=0&&Se<Q&&J[Se]!==-1){var Te=J[Se],Le=W+Te-Se;if(Ye=R-Ye,Te>=Ye)return s(O,T,Te,Le)}}}}return[[e,O],[n,T]]}function s(O,T,R,N){var G=O.substring(0,R),W=T.substring(0,N),Q=O.substring(R),J=T.substring(N),se=r(G,W),U=r(Q,J);return se.concat(U)}function l(O,T){if(!O||!T||O.charAt(0)!==T.charAt(0))return 0;for(var R=0,N=Math.min(O.length,T.length),G=N,W=0;R<G;)O.substring(W,G)==T.substring(W,G)?(R=G,W=R):N=G,G=Math.floor((N-R)/2+R);return j(O.charCodeAt(G-1))&&G--,G}function u(O,T){var R=O.length,N=T.length;if(R==0||N==0)return 0;R>N?O=O.substring(R-N):R<N&&(T=T.substring(0,R));var G=Math.min(R,N);if(O==T)return G;for(var W=0,Q=1;;){var J=O.substring(G-Q),se=T.indexOf(J);if(se==-1)return W;Q+=se,(se==0||O.substring(G-Q)==T.substring(0,Q))&&(W=Q,Q++)}}function d(O,T){if(!O||!T||O.slice(-1)!==T.slice(-1))return 0;for(var R=0,N=Math.min(O.length,T.length),G=N,W=0;R<G;)O.substring(O.length-G,O.length-W)==T.substring(T.length-G,T.length-W)?(R=G,W=R):N=G,G=Math.floor((N-R)/2+R);return F(O.charCodeAt(O.length-G))&&G--,G}function f(O,T){var R=O.length>T.length?O:T,N=O.length>T.length?T:O;if(R.length<4||N.length*2<R.length)return null;function G(ee,re,oe){for(var Ce=ee.substring(oe,oe+Math.floor(ee.length/4)),ye=-1,Se="",Te,Le,He,Ye;(ye=re.indexOf(Ce,ye+1))!==-1;){var V=l(ee.substring(oe),re.substring(ye)),Ae=d(ee.substring(0,oe),re.substring(0,ye));Se.length<Ae+V&&(Se=re.substring(ye-Ae,ye)+re.substring(ye,ye+V),Te=ee.substring(0,oe-Ae),Le=ee.substring(oe+V),He=re.substring(0,ye-Ae),Ye=re.substring(ye+V))}return Se.length*2>=ee.length?[Te,Le,He,Ye,Se]:null}var W=G(R,N,Math.ceil(R.length/4)),Q=G(R,N,Math.ceil(R.length/2)),J;if(!W&&!Q)return null;Q?W?J=W[4].length>Q[4].length?W:Q:J=Q:J=W;var se,U,le,q;O.length>T.length?(se=J[0],U=J[1],le=J[2],q=J[3]):(le=J[0],q=J[1],se=J[2],U=J[3]);var B=J[4];return[se,U,le,q,B]}function m(O){for(var T=!1,R=[],N=0,G=null,W=0,Q=0,J=0,se=0,U=0;W<O.length;)O[W][0]==t?(R[N++]=W,Q=se,J=U,se=0,U=0,G=O[W][1]):(O[W][0]==n?se+=O[W][1].length:U+=O[W][1].length,G&&G.length<=Math.max(Q,J)&&G.length<=Math.max(se,U)&&(O.splice(R[N-1],0,[e,G]),O[R[N-1]+1][0]=n,N--,N--,W=N>0?R[N-1]:-1,Q=0,J=0,se=0,U=0,G=null,T=!0)),W++;for(T&&C(O),w(O),W=1;W<O.length;){if(O[W-1][0]==e&&O[W][0]==n){var le=O[W-1][1],q=O[W][1],B=u(le,q),ee=u(q,le);B>=ee?(B>=le.length/2||B>=q.length/2)&&(O.splice(W,0,[t,q.substring(0,B)]),O[W-1][1]=le.substring(0,le.length-B),O[W+1][1]=q.substring(B),W++):(ee>=le.length/2||ee>=q.length/2)&&(O.splice(W,0,[t,le.substring(0,ee)]),O[W-1][0]=n,O[W-1][1]=q.substring(0,q.length-ee),O[W+1][0]=e,O[W+1][1]=le.substring(ee),W++),W++}W++}}var b=/[^a-zA-Z0-9]/,g=/\s/,x=/[\r\n]/,y=/\n\r?\n$/,A=/^\r?\n\r?\n/;function w(O){function T(ee,re){if(!ee||!re)return 6;var oe=ee.charAt(ee.length-1),Ce=re.charAt(0),ye=oe.match(b),Se=Ce.match(b),Te=ye&&oe.match(g),Le=Se&&Ce.match(g),He=Te&&oe.match(x),Ye=Le&&Ce.match(x),V=He&&ee.match(y),Ae=Ye&&re.match(A);return V||Ae?5:He||Ye?4:ye&&!Te&&Le?3:Te||Le?2:ye||Se?1:0}for(var R=1;R<O.length-1;){if(O[R-1][0]==t&&O[R+1][0]==t){var N=O[R-1][1],G=O[R][1],W=O[R+1][1],Q=d(N,G);if(Q){var J=G.substring(G.length-Q);N=N.substring(0,N.length-Q),G=J+G.substring(0,G.length-Q),W=J+W}for(var se=N,U=G,le=W,q=T(N,G)+T(G,W);G.charAt(0)===W.charAt(0);){N+=G.charAt(0),G=G.substring(1)+W.charAt(0),W=W.substring(1);var B=T(N,G)+T(G,W);B>=q&&(q=B,se=N,U=G,le=W)}O[R-1][1]!=se&&(se?O[R-1][1]=se:(O.splice(R-1,1),R--),O[R][1]=U,le?O[R+1][1]=le:(O.splice(R+1,1),R--))}R++}}function C(O,T){O.push([t,""]);for(var R=0,N=0,G=0,W="",Q="",J;R<O.length;){if(R<O.length-1&&!O[R][1]){O.splice(R,1);continue}switch(O[R][0]){case n:G++,Q+=O[R][1],R++;break;case e:N++,W+=O[R][1],R++;break;case t:var se=R-G-N-1;if(T){if(se>=0&&z(O[se][1])){var U=O[se][1].slice(-1);if(O[se][1]=O[se][1].slice(0,-1),W=U+W,Q=U+Q,!O[se][1]){O.splice(se,1),R--;var le=se-1;O[le]&&O[le][0]===n&&(G++,Q=O[le][1]+Q,le--),O[le]&&O[le][0]===e&&(N++,W=O[le][1]+W,le--),se=le}}if(M(O[R][1])){var U=O[R][1].charAt(0);O[R][1]=O[R][1].slice(1),W+=U,Q+=U}}if(R<O.length-1&&!O[R][1]){O.splice(R,1);break}if(W.length>0||Q.length>0){W.length>0&&Q.length>0&&(J=l(Q,W),J!==0&&(se>=0?O[se][1]+=Q.substring(0,J):(O.splice(0,0,[t,Q.substring(0,J)]),R++),Q=Q.substring(J),W=W.substring(J)),J=d(Q,W),J!==0&&(O[R][1]=Q.substring(Q.length-J)+O[R][1],Q=Q.substring(0,Q.length-J),W=W.substring(0,W.length-J)));var q=G+N;W.length===0&&Q.length===0?(O.splice(R-q,q),R=R-q):W.length===0?(O.splice(R-q,q,[n,Q]),R=R-q+1):Q.length===0?(O.splice(R-q,q,[e,W]),R=R-q+1):(O.splice(R-q,q,[e,W],[n,Q]),R=R-q+2)}R!==0&&O[R-1][0]===t?(O[R-1][1]+=O[R][1],O.splice(R,1)):R++,G=0,N=0,W="",Q="";break}}O[O.length-1][1]===""&&O.pop();var B=!1;for(R=1;R<O.length-1;)O[R-1][0]===t&&O[R+1][0]===t&&(O[R][1].substring(O[R][1].length-O[R-1][1].length)===O[R-1][1]?(O[R][1]=O[R-1][1]+O[R][1].substring(0,O[R][1].length-O[R-1][1].length),O[R+1][1]=O[R-1][1]+O[R+1][1],O.splice(R-1,1),B=!0):O[R][1].substring(0,O[R+1][1].length)==O[R+1][1]&&(O[R-1][1]+=O[R+1][1],O[R][1]=O[R][1].substring(O[R+1][1].length)+O[R+1][1],O.splice(R+1,1),B=!0)),R++;B&&C(O,T)}function j(O){return O>=55296&&O<=56319}function F(O){return O>=56320&&O<=57343}function M(O){return F(O.charCodeAt(0))}function z(O){return j(O.charCodeAt(O.length-1))}function _(O){for(var T=[],R=0;R<O.length;R++)O[R][1].length>0&&T.push(O[R]);return T}function L(O,T,R,N){return z(O)||M(N)?null:_([[t,O],[e,T],[n,R],[t,N]])}function $(O,T,R){var N=typeof R=="number"?{index:R,length:0}:R.oldRange,G=typeof R=="number"?null:R.newRange,W=O.length,Q=T.length;if(N.length===0&&(G===null||G.length===0)){var J=N.index,se=O.slice(0,J),U=O.slice(J),le=G?G.index:null;e:{var q=J+Q-W;if(le!==null&&le!==q||q<0||q>Q)break e;var B=T.slice(0,q),ee=T.slice(q);if(ee!==U)break e;var re=Math.min(J,q),oe=se.slice(0,re),Ce=B.slice(0,re);if(oe!==Ce)break e;var ye=se.slice(re),Se=B.slice(re);return L(oe,ye,Se,U)}e:{if(le!==null&&le!==J)break e;var Te=J,B=T.slice(0,Te),ee=T.slice(Te);if(B!==se)break e;var Le=Math.min(W-Te,Q-Te),He=U.slice(U.length-Le),Ye=ee.slice(ee.length-Le);if(He!==Ye)break e;var ye=U.slice(0,U.length-Le),Se=ee.slice(0,ee.length-Le);return L(se,ye,Se,He)}}if(N.length>0&&G&&G.length===0)e:{var oe=O.slice(0,N.index),He=O.slice(N.index+N.length),re=oe.length,Le=He.length;if(Q<re+Le)break e;var Ce=T.slice(0,re),Ye=T.slice(Q-Le);if(oe!==Ce||He!==Ye)break e;var ye=O.slice(re,W-Le),Se=T.slice(re,Q-Le);return L(oe,ye,Se,He)}return null}function Z(O,T,R,N){return r(O,T,R,N,!0)}return Z.INSERT=n,Z.DELETE=e,Z.EQUAL=t,z5=Z,z5}var $1={exports:{}};$1.exports;var m4;function v7(){return m4||(m4=1,function(e,n){var t=200,r="__lodash_hash_undefined__",i=9007199254740991,a="[object Arguments]",s="[object Array]",l="[object Boolean]",u="[object Date]",d="[object Error]",f="[object Function]",m="[object GeneratorFunction]",b="[object Map]",g="[object Number]",x="[object Object]",y="[object Promise]",A="[object RegExp]",w="[object Set]",C="[object String]",j="[object Symbol]",F="[object WeakMap]",M="[object ArrayBuffer]",z="[object DataView]",_="[object Float32Array]",L="[object Float64Array]",$="[object Int8Array]",Z="[object Int16Array]",O="[object Int32Array]",T="[object Uint8Array]",R="[object Uint8ClampedArray]",N="[object Uint16Array]",G="[object Uint32Array]",W=/[\\^$.*+?()[\]{}|]/g,Q=/\w*$/,J=/^\[object .+?Constructor\]$/,se=/^(?:0|[1-9]\d*)$/,U={};U[a]=U[s]=U[M]=U[z]=U[l]=U[u]=U[_]=U[L]=U[$]=U[Z]=U[O]=U[b]=U[g]=U[x]=U[A]=U[w]=U[C]=U[j]=U[T]=U[R]=U[N]=U[G]=!0,U[d]=U[f]=U[F]=!1;var le=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,q=typeof self=="object"&&self&&self.Object===Object&&self,B=le||q||Function("return this")(),ee=n&&!n.nodeType&&n,re=ee&&!0&&e&&!e.nodeType&&e,oe=re&&re.exports===ee;function Ce(H,ge){return H.set(ge[0],ge[1]),H}function ye(H,ge){return H.add(ge),H}function Se(H,ge){for(var Ie=-1,lt=H?H.length:0;++Ie<lt&&ge(H[Ie],Ie,H)!==!1;);return H}function Te(H,ge){for(var Ie=-1,lt=ge.length,Zt=H.length;++Ie<lt;)H[Zt+Ie]=ge[Ie];return H}function Le(H,ge,Ie,lt){for(var Zt=-1,$t=H?H.length:0;++Zt<$t;)Ie=ge(Ie,H[Zt],Zt,H);return Ie}function He(H,ge){for(var Ie=-1,lt=Array(H);++Ie<H;)lt[Ie]=ge(Ie);return lt}function Ye(H,ge){return H==null?void 0:H[ge]}function V(H){var ge=!1;if(H!=null&&typeof H.toString!="function")try{ge=!!(H+"")}catch{}return ge}function Ae(H){var ge=-1,Ie=Array(H.size);return H.forEach(function(lt,Zt){Ie[++ge]=[Zt,lt]}),Ie}function ne(H,ge){return function(Ie){return H(ge(Ie))}}function be(H){var ge=-1,Ie=Array(H.size);return H.forEach(function(lt){Ie[++ge]=lt}),Ie}var fe=Array.prototype,ke=Function.prototype,Re=Object.prototype,qe=B["__core-js_shared__"],je=function(){var H=/[^.]+$/.exec(qe&&qe.keys&&qe.keys.IE_PROTO||"");return H?"Symbol(src)_1."+H:""}(),Ze=ke.toString,ut=Re.hasOwnProperty,rt=Re.toString,Pe=RegExp("^"+Ze.call(ut).replace(W,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ve=oe?B.Buffer:void 0,Ne=B.Symbol,De=B.Uint8Array,ft=ne(Object.getPrototypeOf,Object),et=Object.create,Pt=Re.propertyIsEnumerable,Nt=fe.splice,Vt=Object.getOwnPropertySymbols,Rt=ve?ve.isBuffer:void 0,Xt=ne(Object.keys,Object),nn=$i(B,"DataView"),cn=$i(B,"Map"),Pn=$i(B,"Promise"),zn=$i(B,"Set"),Yr=$i(B,"WeakMap"),ir=$i(Object,"create"),Rn=Jr(nn),Yt=Jr(cn),An=Jr(Pn),wa=Jr(zn),wr=Jr(Yr),oi=Ne?Ne.prototype:void 0,Sa=oi?oi.valueOf:void 0;function Lt(H){var ge=-1,Ie=H?H.length:0;for(this.clear();++ge<Ie;){var lt=H[ge];this.set(lt[0],lt[1])}}function Hn(){this.__data__=ir?ir(null):{}}function ar(H){return this.has(H)&&delete this.__data__[H]}function Rr(H){var ge=this.__data__;if(ir){var Ie=ge[H];return Ie===r?void 0:Ie}return ut.call(ge,H)?ge[H]:void 0}function dr(H){var ge=this.__data__;return ir?ge[H]!==void 0:ut.call(ge,H)}function fr(H,ge){var Ie=this.__data__;return Ie[H]=ir&&ge===void 0?r:ge,this}Lt.prototype.clear=Hn,Lt.prototype.delete=ar,Lt.prototype.get=Rr,Lt.prototype.has=dr,Lt.prototype.set=fr;function Un(H){var ge=-1,Ie=H?H.length:0;for(this.clear();++ge<Ie;){var lt=H[ge];this.set(lt[0],lt[1])}}function ys(){this.__data__=[]}function _r(H){var ge=this.__data__,Ie=vs(ge,H);if(Ie<0)return!1;var lt=ge.length-1;return Ie==lt?ge.pop():Nt.call(ge,Ie,1),!0}function Ia(H){var ge=this.__data__,Ie=vs(ge,H);return Ie<0?void 0:ge[Ie][1]}function qi(H){return vs(this.__data__,H)>-1}function Bi(H,ge){var Ie=this.__data__,lt=vs(Ie,H);return lt<0?Ie.push([H,ge]):Ie[lt][1]=ge,this}Un.prototype.clear=ys,Un.prototype.delete=_r,Un.prototype.get=Ia,Un.prototype.has=qi,Un.prototype.set=Bi;function Zn(H){var ge=-1,Ie=H?H.length:0;for(this.clear();++ge<Ie;){var lt=H[ge];this.set(lt[0],lt[1])}}function ki(){this.__data__={hash:new Lt,map:new(cn||Un),string:new Lt}}function Jn(H){return Ws(this,H).delete(H)}function no(H){return Ws(this,H).get(H)}function Co(H){return Ws(this,H).has(H)}function Fa(H,ge){return Ws(this,H).set(H,ge),this}Zn.prototype.clear=ki,Zn.prototype.delete=Jn,Zn.prototype.get=no,Zn.prototype.has=Co,Zn.prototype.set=Fa;function Mr(H){this.__data__=new Un(H)}function tl(){this.__data__=new Un}function zl(H){return this.__data__.delete(H)}function ju(H){return this.__data__.get(H)}function Bc(H){return this.__data__.has(H)}function Us(H,ge){var Ie=this.__data__;if(Ie instanceof Un){var lt=Ie.__data__;if(!cn||lt.length<t-1)return lt.push([H,ge]),this;Ie=this.__data__=new Zn(lt)}return Ie.set(H,ge),this}Mr.prototype.clear=tl,Mr.prototype.delete=zl,Mr.prototype.get=ju,Mr.prototype.has=Bc,Mr.prototype.set=Us;function xs(H,ge){var Ie=sl(H)||ao(H)?He(H.length,String):[],lt=Ie.length,Zt=!!lt;for(var $t in H)ut.call(H,$t)&&!(Zt&&($t=="length"||il($t,lt)))&&Ie.push($t);return Ie}function Pa(H,ge,Ie){var lt=H[ge];(!(ut.call(H,ge)&&tn(lt,Ie))||Ie===void 0&&!(ge in H))&&(H[ge]=Ie)}function vs(H,ge){for(var Ie=H.length;Ie--;)if(tn(H[Ie][0],ge))return Ie;return-1}function is(H,ge){return H&&Eo(ge,ol(ge),H)}function as(H,ge,Ie,lt,Zt,$t,Tn){var Cn;if(lt&&(Cn=$t?lt(H,Zt,$t,Tn):lt(H)),Cn!==void 0)return Cn;if(!Ua(H))return H;var pr=sl(H);if(pr){if(Cn=Ou(H),!ge)return $l(H,Cn)}else{var bn=ws(H),Nr=bn==f||bn==m;if(_o(H))return io(H,ge);if(bn==x||bn==a||Nr&&!$t){if(V(H))return $t?H:{};if(Cn=qa(Nr?{}:H),!ge)return Hs(H,is(Cn,H))}else{if(!U[bn])return $t?H:{};Cn=Vs(H,bn,as,ge)}}Tn||(Tn=new Mr);var Aa=Tn.get(H);if(Aa)return Aa;if(Tn.set(H,Cn),!pr)var Sr=Ie?Tu(H):ol(H);return Se(Sr||H,function(Ar,Gr){Sr&&(Gr=Ar,Ar=H[Gr]),Pa(Cn,Gr,as(Ar,ge,Ie,lt,Gr,H,Tn))}),Cn}function ql(H){return Ua(H)?et(H):{}}function ro(H,ge,Ie){var lt=ge(H);return sl(H)?lt:Te(lt,Ie(H))}function $c(H){return rt.call(H)}function Fr(H){if(!Ua(H)||al(H))return!1;var ge=$a(H)||V(H)?Pe:J;return ge.test(Jr(H))}function ta(H){if(!li(H))return Xt(H);var ge=[];for(var Ie in Object(H))ut.call(H,Ie)&&Ie!="constructor"&&ge.push(Ie);return ge}function io(H,ge){if(ge)return H.slice();var Ie=new H.constructor(H.length);return H.copy(Ie),Ie}function nl(H){var ge=new H.constructor(H.byteLength);return new De(ge).set(new De(H)),ge}function za(H,ge){var Ie=ge?nl(H.buffer):H.buffer;return new H.constructor(Ie,H.byteOffset,H.byteLength)}function Bl(H,ge,Ie){var lt=ge?Ie(Ae(H),!0):Ae(H);return Le(lt,Ce,new H.constructor)}function na(H){var ge=new H.constructor(H.source,Q.exec(H));return ge.lastIndex=H.lastIndex,ge}function rl(H,ge,Ie){var lt=ge?Ie(be(H),!0):be(H);return Le(lt,ye,new H.constructor)}function hr(H){return Sa?Object(Sa.call(H)):{}}function ko(H,ge){var Ie=ge?nl(H.buffer):H.buffer;return new H.constructor(Ie,H.byteOffset,H.length)}function $l(H,ge){var Ie=-1,lt=H.length;for(ge||(ge=Array(lt));++Ie<lt;)ge[Ie]=H[Ie];return ge}function Eo(H,ge,Ie,lt){Ie||(Ie={});for(var Zt=-1,$t=ge.length;++Zt<$t;){var Tn=ge[Zt],Cn=void 0;Pa(Ie,Tn,Cn===void 0?H[Tn]:Cn)}return Ie}function Hs(H,ge){return Eo(H,ss(H),ge)}function Tu(H){return ro(H,ol,ss)}function Ws(H,ge){var Ie=H.__data__;return Ys(ge)?Ie[typeof ge=="string"?"string":"hash"]:Ie.map}function $i(H,ge){var Ie=Ye(H,ge);return Fr(Ie)?Ie:void 0}var ss=Vt?ne(Vt,Object):so,ws=$c;(nn&&ws(new nn(new ArrayBuffer(1)))!=z||cn&&ws(new cn)!=b||Pn&&ws(Pn.resolve())!=y||zn&&ws(new zn)!=w||Yr&&ws(new Yr)!=F)&&(ws=function(H){var ge=rt.call(H),Ie=ge==x?H.constructor:void 0,lt=Ie?Jr(Ie):void 0;if(lt)switch(lt){case Rn:return z;case Yt:return b;case An:return y;case wa:return w;case wr:return F}return ge});function Ou(H){var ge=H.length,Ie=H.constructor(ge);return ge&&typeof H[0]=="string"&&ut.call(H,"index")&&(Ie.index=H.index,Ie.input=H.input),Ie}function qa(H){return typeof H.constructor=="function"&&!li(H)?ql(ft(H)):{}}function Vs(H,ge,Ie,lt){var Zt=H.constructor;switch(ge){case M:return nl(H);case l:case u:return new Zt(+H);case z:return za(H,lt);case _:case L:case $:case Z:case O:case T:case R:case N:case G:return ko(H,lt);case b:return Bl(H,lt,Ie);case g:case C:return new Zt(H);case A:return na(H);case w:return rl(H,lt,Ie);case j:return hr(H)}}function il(H,ge){return ge=ge??i,!!ge&&(typeof H=="number"||se.test(H))&&H>-1&&H%1==0&&H<ge}function Ys(H){var ge=typeof H;return ge=="string"||ge=="number"||ge=="symbol"||ge=="boolean"?H!=="__proto__":H===null}function al(H){return!!je&&je in H}function li(H){var ge=H&&H.constructor,Ie=typeof ge=="function"&&ge.prototype||Re;return H===Ie}function Jr(H){if(H!=null){try{return Ze.call(H)}catch{}try{return H+""}catch{}}return""}function Ss(H){return as(H,!0,!0)}function tn(H,ge){return H===ge||H!==H&&ge!==ge}function ao(H){return Ba(H)&&ut.call(H,"callee")&&(!Pt.call(H,"callee")||rt.call(H)==a)}var sl=Array.isArray;function Ei(H){return H!=null&&La(H.length)&&!$a(H)}function Ba(H){return No(H)&&Ei(H)}var _o=Rt||As;function $a(H){var ge=Ua(H)?rt.call(H):"";return ge==f||ge==m}function La(H){return typeof H=="number"&&H>-1&&H%1==0&&H<=i}function Ua(H){var ge=typeof H;return!!H&&(ge=="object"||ge=="function")}function No(H){return!!H&&typeof H=="object"}function ol(H){return Ei(H)?xs(H):ta(H)}function so(){return[]}function As(){return!1}e.exports=Ss}($1,$1.exports)),$1.exports}var U1={exports:{}};U1.exports;var g4;function w7(){return g4||(g4=1,function(e,n){var t=200,r="__lodash_hash_undefined__",i=1,a=2,s=9007199254740991,l="[object Arguments]",u="[object Array]",d="[object AsyncFunction]",f="[object Boolean]",m="[object Date]",b="[object Error]",g="[object Function]",x="[object GeneratorFunction]",y="[object Map]",A="[object Number]",w="[object Null]",C="[object Object]",j="[object Promise]",F="[object Proxy]",M="[object RegExp]",z="[object Set]",_="[object String]",L="[object Symbol]",$="[object Undefined]",Z="[object WeakMap]",O="[object ArrayBuffer]",T="[object DataView]",R="[object Float32Array]",N="[object Float64Array]",G="[object Int8Array]",W="[object Int16Array]",Q="[object Int32Array]",J="[object Uint8Array]",se="[object Uint8ClampedArray]",U="[object Uint16Array]",le="[object Uint32Array]",q=/[\\^$.*+?()[\]{}|]/g,B=/^\[object .+?Constructor\]$/,ee=/^(?:0|[1-9]\d*)$/,re={};re[R]=re[N]=re[G]=re[W]=re[Q]=re[J]=re[se]=re[U]=re[le]=!0,re[l]=re[u]=re[O]=re[f]=re[T]=re[m]=re[b]=re[g]=re[y]=re[A]=re[C]=re[M]=re[z]=re[_]=re[Z]=!1;var oe=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,Ce=typeof self=="object"&&self&&self.Object===Object&&self,ye=oe||Ce||Function("return this")(),Se=n&&!n.nodeType&&n,Te=Se&&!0&&e&&!e.nodeType&&e,Le=Te&&Te.exports===Se,He=Le&&oe.process,Ye=function(){try{return He&&He.binding&&He.binding("util")}catch{}}(),V=Ye&&Ye.isTypedArray;function Ae(H,ge){for(var Ie=-1,lt=H==null?0:H.length,Zt=0,$t=[];++Ie<lt;){var Tn=H[Ie];ge(Tn,Ie,H)&&($t[Zt++]=Tn)}return $t}function ne(H,ge){for(var Ie=-1,lt=ge.length,Zt=H.length;++Ie<lt;)H[Zt+Ie]=ge[Ie];return H}function be(H,ge){for(var Ie=-1,lt=H==null?0:H.length;++Ie<lt;)if(ge(H[Ie],Ie,H))return!0;return!1}function fe(H,ge){for(var Ie=-1,lt=Array(H);++Ie<H;)lt[Ie]=ge(Ie);return lt}function ke(H){return function(ge){return H(ge)}}function Re(H,ge){return H.has(ge)}function qe(H,ge){return H==null?void 0:H[ge]}function je(H){var ge=-1,Ie=Array(H.size);return H.forEach(function(lt,Zt){Ie[++ge]=[Zt,lt]}),Ie}function Ze(H,ge){return function(Ie){return H(ge(Ie))}}function ut(H){var ge=-1,Ie=Array(H.size);return H.forEach(function(lt){Ie[++ge]=lt}),Ie}var rt=Array.prototype,Pe=Function.prototype,ve=Object.prototype,Ne=ye["__core-js_shared__"],De=Pe.toString,ft=ve.hasOwnProperty,et=function(){var H=/[^.]+$/.exec(Ne&&Ne.keys&&Ne.keys.IE_PROTO||"");return H?"Symbol(src)_1."+H:""}(),Pt=ve.toString,Nt=RegExp("^"+De.call(ft).replace(q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vt=Le?ye.Buffer:void 0,Rt=ye.Symbol,Xt=ye.Uint8Array,nn=ve.propertyIsEnumerable,cn=rt.splice,Pn=Rt?Rt.toStringTag:void 0,zn=Object.getOwnPropertySymbols,Yr=Vt?Vt.isBuffer:void 0,ir=Ze(Object.keys,Object),Rn=ss(ye,"DataView"),Yt=ss(ye,"Map"),An=ss(ye,"Promise"),wa=ss(ye,"Set"),wr=ss(ye,"WeakMap"),oi=ss(Object,"create"),Sa=Jr(Rn),Lt=Jr(Yt),Hn=Jr(An),ar=Jr(wa),Rr=Jr(wr),dr=Rt?Rt.prototype:void 0,fr=dr?dr.valueOf:void 0;function Un(H){var ge=-1,Ie=H==null?0:H.length;for(this.clear();++ge<Ie;){var lt=H[ge];this.set(lt[0],lt[1])}}function ys(){this.__data__=oi?oi(null):{},this.size=0}function _r(H){var ge=this.has(H)&&delete this.__data__[H];return this.size-=ge?1:0,ge}function Ia(H){var ge=this.__data__;if(oi){var Ie=ge[H];return Ie===r?void 0:Ie}return ft.call(ge,H)?ge[H]:void 0}function qi(H){var ge=this.__data__;return oi?ge[H]!==void 0:ft.call(ge,H)}function Bi(H,ge){var Ie=this.__data__;return this.size+=this.has(H)?0:1,Ie[H]=oi&&ge===void 0?r:ge,this}Un.prototype.clear=ys,Un.prototype.delete=_r,Un.prototype.get=Ia,Un.prototype.has=qi,Un.prototype.set=Bi;function Zn(H){var ge=-1,Ie=H==null?0:H.length;for(this.clear();++ge<Ie;){var lt=H[ge];this.set(lt[0],lt[1])}}function ki(){this.__data__=[],this.size=0}function Jn(H){var ge=this.__data__,Ie=io(ge,H);if(Ie<0)return!1;var lt=ge.length-1;return Ie==lt?ge.pop():cn.call(ge,Ie,1),--this.size,!0}function no(H){var ge=this.__data__,Ie=io(ge,H);return Ie<0?void 0:ge[Ie][1]}function Co(H){return io(this.__data__,H)>-1}function Fa(H,ge){var Ie=this.__data__,lt=io(Ie,H);return lt<0?(++this.size,Ie.push([H,ge])):Ie[lt][1]=ge,this}Zn.prototype.clear=ki,Zn.prototype.delete=Jn,Zn.prototype.get=no,Zn.prototype.has=Co,Zn.prototype.set=Fa;function Mr(H){var ge=-1,Ie=H==null?0:H.length;for(this.clear();++ge<Ie;){var lt=H[ge];this.set(lt[0],lt[1])}}function tl(){this.size=0,this.__data__={hash:new Un,map:new(Yt||Zn),string:new Un}}function zl(H){var ge=$i(this,H).delete(H);return this.size-=ge?1:0,ge}function ju(H){return $i(this,H).get(H)}function Bc(H){return $i(this,H).has(H)}function Us(H,ge){var Ie=$i(this,H),lt=Ie.size;return Ie.set(H,ge),this.size+=Ie.size==lt?0:1,this}Mr.prototype.clear=tl,Mr.prototype.delete=zl,Mr.prototype.get=ju,Mr.prototype.has=Bc,Mr.prototype.set=Us;function xs(H){var ge=-1,Ie=H==null?0:H.length;for(this.__data__=new Mr;++ge<Ie;)this.add(H[ge])}function Pa(H){return this.__data__.set(H,r),this}function vs(H){return this.__data__.has(H)}xs.prototype.add=xs.prototype.push=Pa,xs.prototype.has=vs;function is(H){var ge=this.__data__=new Zn(H);this.size=ge.size}function as(){this.__data__=new Zn,this.size=0}function ql(H){var ge=this.__data__,Ie=ge.delete(H);return this.size=ge.size,Ie}function ro(H){return this.__data__.get(H)}function $c(H){return this.__data__.has(H)}function Fr(H,ge){var Ie=this.__data__;if(Ie instanceof Zn){var lt=Ie.__data__;if(!Yt||lt.length<t-1)return lt.push([H,ge]),this.size=++Ie.size,this;Ie=this.__data__=new Mr(lt)}return Ie.set(H,ge),this.size=Ie.size,this}is.prototype.clear=as,is.prototype.delete=ql,is.prototype.get=ro,is.prototype.has=$c,is.prototype.set=Fr;function ta(H,ge){var Ie=ao(H),lt=!Ie&&tn(H),Zt=!Ie&&!lt&&Ei(H),$t=!Ie&&!lt&&!Zt&&No(H),Tn=Ie||lt||Zt||$t,Cn=Tn?fe(H.length,String):[],pr=Cn.length;for(var bn in H)ft.call(H,bn)&&!(Tn&&(bn=="length"||Zt&&(bn=="offset"||bn=="parent")||$t&&(bn=="buffer"||bn=="byteLength"||bn=="byteOffset")||Vs(bn,pr)))&&Cn.push(bn);return Cn}function io(H,ge){for(var Ie=H.length;Ie--;)if(Ss(H[Ie][0],ge))return Ie;return-1}function nl(H,ge,Ie){var lt=ge(H);return ao(H)?lt:ne(lt,Ie(H))}function za(H){return H==null?H===void 0?$:w:Pn&&Pn in Object(H)?ws(H):li(H)}function Bl(H){return Ua(H)&&za(H)==l}function na(H,ge,Ie,lt,Zt){return H===ge?!0:H==null||ge==null||!Ua(H)&&!Ua(ge)?H!==H&&ge!==ge:rl(H,ge,Ie,lt,na,Zt)}function rl(H,ge,Ie,lt,Zt,$t){var Tn=ao(H),Cn=ao(ge),pr=Tn?u:qa(H),bn=Cn?u:qa(ge);pr=pr==l?C:pr,bn=bn==l?C:bn;var Nr=pr==C,Aa=bn==C,Sr=pr==bn;if(Sr&&Ei(H)){if(!Ei(ge))return!1;Tn=!0,Nr=!1}if(Sr&&!Nr)return $t||($t=new is),Tn||No(H)?Eo(H,ge,Ie,lt,Zt,$t):Hs(H,ge,pr,Ie,lt,Zt,$t);if(!(Ie&i)){var Ar=Nr&&ft.call(H,"__wrapped__"),Gr=Aa&&ft.call(ge,"__wrapped__");if(Ar||Gr){var Ha=Ar?H.value():H,Gs=Gr?ge.value():ge;return $t||($t=new is),Zt(Ha,Gs,Ie,lt,$t)}}return Sr?($t||($t=new is),Tu(H,ge,Ie,lt,Zt,$t)):!1}function hr(H){if(!La(H)||Ys(H))return!1;var ge=_o(H)?Nt:B;return ge.test(Jr(H))}function ko(H){return Ua(H)&&$a(H.length)&&!!re[za(H)]}function $l(H){if(!al(H))return ir(H);var ge=[];for(var Ie in Object(H))ft.call(H,Ie)&&Ie!="constructor"&&ge.push(Ie);return ge}function Eo(H,ge,Ie,lt,Zt,$t){var Tn=Ie&i,Cn=H.length,pr=ge.length;if(Cn!=pr&&!(Tn&&pr>Cn))return!1;var bn=$t.get(H);if(bn&&$t.get(ge))return bn==ge;var Nr=-1,Aa=!0,Sr=Ie&a?new xs:void 0;for($t.set(H,ge),$t.set(ge,H);++Nr<Cn;){var Ar=H[Nr],Gr=ge[Nr];if(lt)var Ha=Tn?lt(Gr,Ar,Nr,ge,H,$t):lt(Ar,Gr,Nr,H,ge,$t);if(Ha!==void 0){if(Ha)continue;Aa=!1;break}if(Sr){if(!be(ge,function(Gs,Cs){if(!Re(Sr,Cs)&&(Ar===Gs||Zt(Ar,Gs,Ie,lt,$t)))return Sr.push(Cs)})){Aa=!1;break}}else if(!(Ar===Gr||Zt(Ar,Gr,Ie,lt,$t))){Aa=!1;break}}return $t.delete(H),$t.delete(ge),Aa}function Hs(H,ge,Ie,lt,Zt,$t,Tn){switch(Ie){case T:if(H.byteLength!=ge.byteLength||H.byteOffset!=ge.byteOffset)return!1;H=H.buffer,ge=ge.buffer;case O:return!(H.byteLength!=ge.byteLength||!$t(new Xt(H),new Xt(ge)));case f:case m:case A:return Ss(+H,+ge);case b:return H.name==ge.name&&H.message==ge.message;case M:case _:return H==ge+"";case y:var Cn=je;case z:var pr=lt&i;if(Cn||(Cn=ut),H.size!=ge.size&&!pr)return!1;var bn=Tn.get(H);if(bn)return bn==ge;lt|=a,Tn.set(H,ge);var Nr=Eo(Cn(H),Cn(ge),lt,Zt,$t,Tn);return Tn.delete(H),Nr;case L:if(fr)return fr.call(H)==fr.call(ge)}return!1}function Tu(H,ge,Ie,lt,Zt,$t){var Tn=Ie&i,Cn=Ws(H),pr=Cn.length,bn=Ws(ge),Nr=bn.length;if(pr!=Nr&&!Tn)return!1;for(var Aa=pr;Aa--;){var Sr=Cn[Aa];if(!(Tn?Sr in ge:ft.call(ge,Sr)))return!1}var Ar=$t.get(H);if(Ar&&$t.get(ge))return Ar==ge;var Gr=!0;$t.set(H,ge),$t.set(ge,H);for(var Ha=Tn;++Aa<pr;){Sr=Cn[Aa];var Gs=H[Sr],Cs=ge[Sr];if(lt)var Wd=Tn?lt(Cs,Gs,Sr,ge,H,$t):lt(Gs,Cs,Sr,H,ge,$t);if(!(Wd===void 0?Gs===Cs||Zt(Gs,Cs,Ie,lt,$t):Wd)){Gr=!1;break}Ha||(Ha=Sr=="constructor")}if(Gr&&!Ha){var ll=H.constructor,jo=ge.constructor;ll!=jo&&"constructor"in H&&"constructor"in ge&&!(typeof ll=="function"&&ll instanceof ll&&typeof jo=="function"&&jo instanceof jo)&&(Gr=!1)}return $t.delete(H),$t.delete(ge),Gr}function Ws(H){return nl(H,ol,Ou)}function $i(H,ge){var Ie=H.__data__;return il(ge)?Ie[typeof ge=="string"?"string":"hash"]:Ie.map}function ss(H,ge){var Ie=qe(H,ge);return hr(Ie)?Ie:void 0}function ws(H){var ge=ft.call(H,Pn),Ie=H[Pn];try{H[Pn]=void 0;var lt=!0}catch{}var Zt=Pt.call(H);return lt&&(ge?H[Pn]=Ie:delete H[Pn]),Zt}var Ou=zn?function(H){return H==null?[]:(H=Object(H),Ae(zn(H),function(ge){return nn.call(H,ge)}))}:so,qa=za;(Rn&&qa(new Rn(new ArrayBuffer(1)))!=T||Yt&&qa(new Yt)!=y||An&&qa(An.resolve())!=j||wa&&qa(new wa)!=z||wr&&qa(new wr)!=Z)&&(qa=function(H){var ge=za(H),Ie=ge==C?H.constructor:void 0,lt=Ie?Jr(Ie):"";if(lt)switch(lt){case Sa:return T;case Lt:return y;case Hn:return j;case ar:return z;case Rr:return Z}return ge});function Vs(H,ge){return ge=ge??s,!!ge&&(typeof H=="number"||ee.test(H))&&H>-1&&H%1==0&&H<ge}function il(H){var ge=typeof H;return ge=="string"||ge=="number"||ge=="symbol"||ge=="boolean"?H!=="__proto__":H===null}function Ys(H){return!!et&&et in H}function al(H){var ge=H&&H.constructor,Ie=typeof ge=="function"&&ge.prototype||ve;return H===Ie}function li(H){return Pt.call(H)}function Jr(H){if(H!=null){try{return De.call(H)}catch{}try{return H+""}catch{}}return""}function Ss(H,ge){return H===ge||H!==H&&ge!==ge}var tn=Bl(function(){return arguments}())?Bl:function(H){return Ua(H)&&ft.call(H,"callee")&&!nn.call(H,"callee")},ao=Array.isArray;function sl(H){return H!=null&&$a(H.length)&&!_o(H)}var Ei=Yr||As;function Ba(H,ge){return na(H,ge)}function _o(H){if(!La(H))return!1;var ge=za(H);return ge==g||ge==x||ge==d||ge==F}function $a(H){return typeof H=="number"&&H>-1&&H%1==0&&H<=s}function La(H){var ge=typeof H;return H!=null&&(ge=="object"||ge=="function")}function Ua(H){return H!=null&&typeof H=="object"}var No=V?ke(V):ko;function ol(H){return sl(H)?ta(H):$l(H)}function so(){return[]}function As(){return!1}e.exports=Ba}(U1,U1.exports)),U1.exports}var hy={},b4;function T$(){if(b4)return hy;b4=1,Object.defineProperty(hy,"__esModule",{value:!0});const e=v7(),n=w7();var t;return function(r){function i(u={},d={},f=!1){typeof u!="object"&&(u={}),typeof d!="object"&&(d={});let m=e(d);f||(m=Object.keys(m).reduce((b,g)=>(m[g]!=null&&(b[g]=m[g]),b),{}));for(const b in u)u[b]!==void 0&&d[b]===void 0&&(m[b]=u[b]);return Object.keys(m).length>0?m:void 0}r.compose=i;function a(u={},d={}){typeof u!="object"&&(u={}),typeof d!="object"&&(d={});const f=Object.keys(u).concat(Object.keys(d)).reduce((m,b)=>(n(u[b],d[b])||(m[b]=d[b]===void 0?null:d[b]),m),{});return Object.keys(f).length>0?f:void 0}r.diff=a;function s(u={},d={}){u=u||{};const f=Object.keys(d).reduce((m,b)=>(d[b]!==u[b]&&u[b]!==void 0&&(m[b]=d[b]),m),{});return Object.keys(u).reduce((m,b)=>(u[b]!==d[b]&&d[b]===void 0&&(m[b]=null),m),f)}r.invert=s;function l(u,d,f=!1){if(typeof u!="object")return d;if(typeof d!="object")return;if(!f)return d;const m=Object.keys(d).reduce((b,g)=>(u[g]===void 0&&(b[g]=d[g]),b),{});return Object.keys(m).length>0?m:void 0}r.transform=l}(t||(t={})),hy.default=t,hy}var py={},y4;function S7(){if(y4)return py;y4=1,Object.defineProperty(py,"__esModule",{value:!0});var e;return function(n){function t(r){return typeof r.delete=="number"?r.delete:typeof r.retain=="number"?r.retain:typeof r.retain=="object"&&r.retain!==null?1:typeof r.insert=="string"?r.insert.length:1}n.length=t}(e||(e={})),py.default=e,py}var my={},x4;function O$(){if(x4)return my;x4=1,Object.defineProperty(my,"__esModule",{value:!0});const e=S7();class n{constructor(r){this.ops=r,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(r){r||(r=1/0);const i=this.ops[this.index];if(i){const a=this.offset,s=e.default.length(i);if(r>=s-a?(r=s-a,this.index+=1,this.offset=0):this.offset+=r,typeof i.delete=="number")return{delete:r};{const l={};return i.attributes&&(l.attributes=i.attributes),typeof i.retain=="number"?l.retain=r:typeof i.retain=="object"&&i.retain!==null?l.retain=i.retain:typeof i.insert=="string"?l.insert=i.insert.substr(a,r):l.insert=i.insert,l}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?e.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const r=this.ops[this.index];return r?typeof r.delete=="number"?"delete":typeof r.retain=="number"||typeof r.retain=="object"&&r.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const r=this.offset,i=this.index,a=this.next(),s=this.ops.slice(this.index);return this.offset=r,this.index=i,[a].concat(s)}}else return[]}}return my.default=n,my}var v4;function D$(){return v4||(v4=1,function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AttributeMap=n.OpIterator=n.Op=void 0;const t=j$(),r=v7(),i=w7(),a=T$();n.AttributeMap=a.default;const s=S7();n.Op=s.default;const l=O$();n.OpIterator=l.default;const u="\0",d=(m,b)=>{if(typeof m!="object"||m===null)throw new Error(`cannot retain a ${typeof m}`);if(typeof b!="object"||b===null)throw new Error(`cannot retain a ${typeof b}`);const g=Object.keys(m)[0];if(!g||g!==Object.keys(b)[0])throw new Error(`embed types not matched: ${g} != ${Object.keys(b)[0]}`);return[g,m[g],b[g]]};class f{constructor(b){Array.isArray(b)?this.ops=b:b!=null&&Array.isArray(b.ops)?this.ops=b.ops:this.ops=[]}static registerEmbed(b,g){this.handlers[b]=g}static unregisterEmbed(b){delete this.handlers[b]}static getHandler(b){const g=this.handlers[b];if(!g)throw new Error(`no handlers for embed type "${b}"`);return g}insert(b,g){const x={};return typeof b=="string"&&b.length===0?this:(x.insert=b,g!=null&&typeof g=="object"&&Object.keys(g).length>0&&(x.attributes=g),this.push(x))}delete(b){return b<=0?this:this.push({delete:b})}retain(b,g){if(typeof b=="number"&&b<=0)return this;const x={retain:b};return g!=null&&typeof g=="object"&&Object.keys(g).length>0&&(x.attributes=g),this.push(x)}push(b){let g=this.ops.length,x=this.ops[g-1];if(b=r(b),typeof x=="object"){if(typeof b.delete=="number"&&typeof x.delete=="number")return this.ops[g-1]={delete:x.delete+b.delete},this;if(typeof x.delete=="number"&&b.insert!=null&&(g-=1,x=this.ops[g-1],typeof x!="object"))return this.ops.unshift(b),this;if(i(b.attributes,x.attributes)){if(typeof b.insert=="string"&&typeof x.insert=="string")return this.ops[g-1]={insert:x.insert+b.insert},typeof b.attributes=="object"&&(this.ops[g-1].attributes=b.attributes),this;if(typeof b.retain=="number"&&typeof x.retain=="number")return this.ops[g-1]={retain:x.retain+b.retain},typeof b.attributes=="object"&&(this.ops[g-1].attributes=b.attributes),this}}return g===this.ops.length?this.ops.push(b):this.ops.splice(g,0,b),this}chop(){const b=this.ops[this.ops.length-1];return b&&typeof b.retain=="number"&&!b.attributes&&this.ops.pop(),this}filter(b){return this.ops.filter(b)}forEach(b){this.ops.forEach(b)}map(b){return this.ops.map(b)}partition(b){const g=[],x=[];return this.forEach(y=>{(b(y)?g:x).push(y)}),[g,x]}reduce(b,g){return this.ops.reduce(b,g)}changeLength(){return this.reduce((b,g)=>g.insert?b+s.default.length(g):g.delete?b-g.delete:b,0)}length(){return this.reduce((b,g)=>b+s.default.length(g),0)}slice(b=0,g=1/0){const x=[],y=new l.default(this.ops);let A=0;for(;A<g&&y.hasNext();){let w;A<b?w=y.next(b-A):(w=y.next(g-A),x.push(w)),A+=s.default.length(w)}return new f(x)}compose(b){const g=new l.default(this.ops),x=new l.default(b.ops),y=[],A=x.peek();if(A!=null&&typeof A.retain=="number"&&A.attributes==null){let C=A.retain;for(;g.peekType()==="insert"&&g.peekLength()<=C;)C-=g.peekLength(),y.push(g.next());A.retain-C>0&&x.next(A.retain-C)}const w=new f(y);for(;g.hasNext()||x.hasNext();)if(x.peekType()==="insert")w.push(x.next());else if(g.peekType()==="delete")w.push(g.next());else{const C=Math.min(g.peekLength(),x.peekLength()),j=g.next(C),F=x.next(C);if(F.retain){const M={};if(typeof j.retain=="number")M.retain=typeof F.retain=="number"?C:F.retain;else if(typeof F.retain=="number")j.retain==null?M.insert=j.insert:M.retain=j.retain;else{const _=j.retain==null?"insert":"retain",[L,$,Z]=d(j[_],F.retain),O=f.getHandler(L);M[_]={[L]:O.compose($,Z,_==="retain")}}const z=a.default.compose(j.attributes,F.attributes,typeof j.retain=="number");if(z&&(M.attributes=z),w.push(M),!x.hasNext()&&i(w.ops[w.ops.length-1],M)){const _=new f(g.rest());return w.concat(_).chop()}}else typeof F.delete=="number"&&(typeof j.retain=="number"||typeof j.retain=="object"&&j.retain!==null)&&w.push(F)}return w.chop()}concat(b){const g=new f(this.ops.slice());return b.ops.length>0&&(g.push(b.ops[0]),g.ops=g.ops.concat(b.ops.slice(1))),g}diff(b,g){if(this.ops===b.ops)return new f;const x=[this,b].map(j=>j.map(F=>{if(F.insert!=null)return typeof F.insert=="string"?F.insert:u;const M=j===b?"on":"with";throw new Error("diff() called "+M+" non-document")}).join("")),y=new f,A=t(x[0],x[1],g,!0),w=new l.default(this.ops),C=new l.default(b.ops);return A.forEach(j=>{let F=j[1].length;for(;F>0;){let M=0;switch(j[0]){case t.INSERT:M=Math.min(C.peekLength(),F),y.push(C.next(M));break;case t.DELETE:M=Math.min(F,w.peekLength()),w.next(M),y.delete(M);break;case t.EQUAL:M=Math.min(w.peekLength(),C.peekLength(),F);const z=w.next(M),_=C.next(M);i(z.insert,_.insert)?y.retain(M,a.default.diff(z.attributes,_.attributes)):y.push(_).delete(M);break}F-=M}}),y.chop()}eachLine(b,g=`
`){const x=new l.default(this.ops);let y=new f,A=0;for(;x.hasNext();){if(x.peekType()!=="insert")return;const w=x.peek(),C=s.default.length(w)-x.peekLength(),j=typeof w.insert=="string"?w.insert.indexOf(g,C)-C:-1;if(j<0)y.push(x.next());else if(j>0)y.push(x.next(j));else{if(b(y,x.next(1).attributes||{},A)===!1)return;A+=1,y=new f}}y.length()>0&&b(y,{},A)}invert(b){const g=new f;return this.reduce((x,y)=>{if(y.insert)g.delete(s.default.length(y));else{if(typeof y.retain=="number"&&y.attributes==null)return g.retain(y.retain),x+y.retain;if(y.delete||typeof y.retain=="number"){const A=y.delete||y.retain;return b.slice(x,x+A).forEach(C=>{y.delete?g.push(C):y.retain&&y.attributes&&g.retain(s.default.length(C),a.default.invert(y.attributes,C.attributes))}),x+A}else if(typeof y.retain=="object"&&y.retain!==null){const A=b.slice(x,x+1),w=new l.default(A.ops).next(),[C,j,F]=d(y.retain,w.insert),M=f.getHandler(C);return g.retain({[C]:M.invert(j,F)},a.default.invert(y.attributes,w.attributes)),x+1}}return x},0),g.chop()}transform(b,g=!1){if(g=!!g,typeof b=="number")return this.transformPosition(b,g);const x=b,y=new l.default(this.ops),A=new l.default(x.ops),w=new f;for(;y.hasNext()||A.hasNext();)if(y.peekType()==="insert"&&(g||A.peekType()!=="insert"))w.retain(s.default.length(y.next()));else if(A.peekType()==="insert")w.push(A.next());else{const C=Math.min(y.peekLength(),A.peekLength()),j=y.next(C),F=A.next(C);if(j.delete)continue;if(F.delete)w.push(F);else{const M=j.retain,z=F.retain;let _=typeof z=="object"&&z!==null?z:C;if(typeof M=="object"&&M!==null&&typeof z=="object"&&z!==null){const L=Object.keys(M)[0];if(L===Object.keys(z)[0]){const $=f.getHandler(L);$&&(_={[L]:$.transform(M[L],z[L],g)})}}w.retain(_,a.default.transform(j.attributes,F.attributes,g))}}return w.chop()}transformPosition(b,g=!1){g=!!g;const x=new l.default(this.ops);let y=0;for(;x.hasNext()&&y<=b;){const A=x.peekLength(),w=x.peekType();if(x.next(),w==="delete"){b-=Math.min(A,b-y);continue}else w==="insert"&&(y<b||!g)&&(b+=A);y+=A}return b}}f.Op=s.default,f.OpIterator=l.default,f.AttributeMap=a.default,f.handlers={},n.default=f,e.exports=f,e.exports.default=f}(fy,fy.exports)),fy.exports}var Tl=D$();const Ht=ns(Tl);class Au extends el{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}Au.blotName="break";Au.tagName="BR";let vu=class extends Ex{};const I$={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function bv(e){return e.replace(/[&<>"']/g,n=>I$[n])}const sc=class sc extends G6{static compare(n,t){const r=sc.order.indexOf(n),i=sc.order.indexOf(t);return r>=0||i>=0?r-i:n===t?0:n<t?-1:1}formatAt(n,t,r,i){if(sc.compare(this.statics.blotName,r)<0&&this.scroll.query(r,Wt.BLOT)){const a=this.isolate(n,t);i&&a.wrap(r,i)}else super.formatAt(n,t,r,i)}optimize(n){if(super.optimize(n),this.parent instanceof sc&&sc.compare(this.statics.blotName,this.parent.statics.blotName)>0){const t=this.parent.isolate(this.offset(),this.length());this.moveChildren(t),t.wrap(this)}}};nt(sc,"allowedChildren",[sc,Au,el,vu]),nt(sc,"order",["cursor","inline","link","underline","strike","italic","bold","script","code"]);let Rc=sc;const w4=1;class bs extends fg{constructor(){super(...arguments);nt(this,"cache",{})}delta(){return this.cache.delta==null&&(this.cache.delta=A7(this)),this.cache.delta}deleteAt(t,r){super.deleteAt(t,r),this.cache={}}formatAt(t,r,i,a){r<=0||(this.scroll.query(i,Wt.BLOCK)?t+r===this.length()&&this.format(i,a):super.formatAt(t,Math.min(r,this.length()-t-1),i,a),this.cache={})}insertAt(t,r,i){if(i!=null){super.insertAt(t,r,i),this.cache={};return}if(r.length===0)return;const a=r.split(`
`),s=a.shift();s.length>0&&(t<this.length()-1||this.children.tail==null?super.insertAt(Math.min(t,this.length()-1),s):this.children.tail.insertAt(this.children.tail.length(),s),this.cache={});let l=this;a.reduce((u,d)=>(l=l.split(u,!0),l.insertAt(0,d),d.length),t+s.length)}insertBefore(t,r){const{head:i}=this.children;super.insertBefore(t,r),i instanceof Au&&i.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+w4),this.cache.length}moveChildren(t,r){super.moveChildren(t,r),this.cache={}}optimize(t){super.optimize(t),this.cache={}}path(t){return super.path(t,!0)}removeChild(t){super.removeChild(t),this.cache={}}split(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r&&(t===0||t>=this.length()-w4)){const a=this.clone();return t===0?(this.parent.insertBefore(a,this),this):(this.parent.insertBefore(a,this.next),a)}const i=super.split(t,r);return this.cache={},i}}bs.blotName="block";bs.tagName="P";bs.defaultChild=Au;bs.allowedChildren=[Au,Rc,el,vu];class jl extends el{attach(){super.attach(),this.attributes=new mv(this.domNode)}delta(){return new Ht().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(n,t){const r=this.scroll.query(n,Wt.BLOCK_ATTRIBUTE);r!=null&&this.attributes.attribute(r,t)}formatAt(n,t,r,i){this.format(r,i)}insertAt(n,t,r){if(r!=null){super.insertAt(n,t,r);return}const i=t.split(`
`),a=i.pop(),s=i.map(u=>{const d=this.scroll.create(bs.blotName);return d.insertAt(0,u),d}),l=this.split(n);s.forEach(u=>{this.parent.insertBefore(u,l)}),a&&this.parent.insertBefore(this.scroll.create("text",a),l)}}jl.scope=Wt.BLOCK_BLOT;function A7(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.descendants(Ms).reduce((t,r)=>r.length()===0?t:t.insert(r.value(),Sl(r,{},n)),new Ht).insert(`
`,Sl(e))}function Sl(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return e==null||("formats"in e&&typeof e.formats=="function"&&(n={...n,...e.formats()},t&&delete n["code-token"]),e.parent==null||e.parent.statics.blotName==="scroll"||e.parent.statics.scope!==e.statics.scope)?n:Sl(e.parent,n,t)}const vl=class vl extends el{static value(){}constructor(n,t,r){super(n,t),this.selection=r,this.textNode=document.createTextNode(vl.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(n,t){if(this.savedLength!==0){super.format(n,t);return}let r=this,i=0;for(;r!=null&&r.statics.scope!==Wt.BLOCK_BLOT;)i+=r.offset(r.parent),r=r.parent;r!=null&&(this.savedLength=vl.CONTENTS.length,r.optimize(),r.formatAt(i,vl.CONTENTS.length,n,t),this.savedLength=0)}index(n,t){return n===this.textNode?0:super.index(n,t)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const n=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const t=this.prev instanceof vu?this.prev:null,r=t?t.length():0,i=this.next instanceof vu?this.next:null,a=i?i.text:"",{textNode:s}=this,l=s.data.split(vl.CONTENTS).join("");s.data=vl.CONTENTS;let u;if(t)u=t,(l||i)&&(t.insertAt(t.length(),l+a),i&&i.remove());else if(i)u=i,i.insertAt(0,l);else{const d=document.createTextNode(l);u=this.scroll.create(d),this.parent.insertBefore(u,this)}if(this.remove(),n){const d=(b,g)=>t&&b===t.domNode?g:b===s?r+g-1:i&&b===i.domNode?r+l.length+g:null,f=d(n.start.node,n.start.offset),m=d(n.end.node,n.end.offset);if(f!==null&&m!==null)return{startNode:u.domNode,startOffset:f,endNode:u.domNode,endOffset:m}}return null}update(n,t){if(n.some(r=>r.type==="characterData"&&r.target===this.textNode)){const r=this.restore();r&&(t.range=r)}}optimize(n){super.optimize(n);let{parent:t}=this;for(;t;){if(t.domNode.tagName==="A"){this.savedLength=vl.CONTENTS.length,t.isolate(this.offset(t),this.length()).unwrap(),this.savedLength=0;break}t=t.parent}}value(){return""}};nt(vl,"blotName","cursor"),nt(vl,"className","ql-cursor"),nt(vl,"tagName","span"),nt(vl,"CONTENTS","\uFEFF");let J0=vl;var q5={exports:{}},S4;function L$(){return S4||(S4=1,function(e){var n=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(u,d,f){this.fn=u,this.context=d,this.once=f||!1}function a(u,d,f,m,b){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new i(f,m||u,b),x=t?t+d:d;return u._events[x]?u._events[x].fn?u._events[x]=[u._events[x],g]:u._events[x].push(g):(u._events[x]=g,u._eventsCount++),u}function s(u,d){--u._eventsCount===0?u._events=new r:delete u._events[d]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],f,m;if(this._eventsCount===0)return d;for(m in f=this._events)n.call(f,m)&&d.push(t?m.slice(1):m);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},l.prototype.listeners=function(d){var f=t?t+d:d,m=this._events[f];if(!m)return[];if(m.fn)return[m.fn];for(var b=0,g=m.length,x=new Array(g);b<g;b++)x[b]=m[b].fn;return x},l.prototype.listenerCount=function(d){var f=t?t+d:d,m=this._events[f];return m?m.fn?1:m.length:0},l.prototype.emit=function(d,f,m,b,g,x){var y=t?t+d:d;if(!this._events[y])return!1;var A=this._events[y],w=arguments.length,C,j;if(A.fn){switch(A.once&&this.removeListener(d,A.fn,void 0,!0),w){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,f),!0;case 3:return A.fn.call(A.context,f,m),!0;case 4:return A.fn.call(A.context,f,m,b),!0;case 5:return A.fn.call(A.context,f,m,b,g),!0;case 6:return A.fn.call(A.context,f,m,b,g,x),!0}for(j=1,C=new Array(w-1);j<w;j++)C[j-1]=arguments[j];A.fn.apply(A.context,C)}else{var F=A.length,M;for(j=0;j<F;j++)switch(A[j].once&&this.removeListener(d,A[j].fn,void 0,!0),w){case 1:A[j].fn.call(A[j].context);break;case 2:A[j].fn.call(A[j].context,f);break;case 3:A[j].fn.call(A[j].context,f,m);break;case 4:A[j].fn.call(A[j].context,f,m,b);break;default:if(!C)for(M=1,C=new Array(w-1);M<w;M++)C[M-1]=arguments[M];A[j].fn.apply(A[j].context,C)}}return!0},l.prototype.on=function(d,f,m){return a(this,d,f,m,!1)},l.prototype.once=function(d,f,m){return a(this,d,f,m,!0)},l.prototype.removeListener=function(d,f,m,b){var g=t?t+d:d;if(!this._events[g])return this;if(!f)return s(this,g),this;var x=this._events[g];if(x.fn)x.fn===f&&(!b||x.once)&&(!m||x.context===m)&&s(this,g);else{for(var y=0,A=[],w=x.length;y<w;y++)(x[y].fn!==f||b&&!x[y].once||m&&x[y].context!==m)&&A.push(x[y]);A.length?this._events[g]=A.length===1?A[0]:A:s(this,g)}return this},l.prototype.removeAllListeners=function(d){var f;return d?(f=t?t+d:d,this._events[f]&&s(this,f)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=t,l.EventEmitter=l,e.exports=l}(q5)),q5.exports}var R$=L$();const M$=ns(R$),gS=new WeakMap,bS=["error","warn","log","info"];let yS="warn";function C7(e){if(yS&&bS.indexOf(e)<=bS.indexOf(yS)){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];console[e](...t)}}function $d(e){return bS.reduce((n,t)=>(n[t]=C7.bind(console,t,e),n),{})}$d.level=e=>{yS=e};C7.level=$d.level;const B5=$d("quill:events"),F$=["selectionchange","mousedown","mouseup","click"];F$.forEach(e=>{document.addEventListener(e,function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];Array.from(document.querySelectorAll(".ql-container")).forEach(i=>{const a=gS.get(i);a&&a.emitter&&a.emitter.handleDOM(...t)})})});class zt extends M${constructor(){super(),this.domListeners={},this.on("error",B5.error)}emit(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return B5.log.call(B5,...t),super.emit(...t)}handleDOM(n){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];(this.domListeners[n.type]||[]).forEach(a=>{let{node:s,handler:l}=a;(n.target===s||s.contains(n.target))&&l(n,...r)})}listenDOM(n,t,r){this.domListeners[n]||(this.domListeners[n]=[]),this.domListeners[n].push({node:t,handler:r})}}nt(zt,"events",{EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"}),nt(zt,"sources",{API:"api",SILENT:"silent",USER:"user"});const $5=$d("quill:selection");class lp{constructor(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=n,this.length=t}}class P${constructor(n,t){this.emitter=t,this.scroll=n,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new lp(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,zt.sources.USER),1)}),this.emitter.on(zt.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const r=this.getNativeRange();r!=null&&r.start.node!==this.cursor.textNode&&this.emitter.once(zt.events.SCROLL_UPDATE,(i,a)=>{try{this.root.contains(r.start.node)&&this.root.contains(r.end.node)&&this.setNativeRange(r.start.node,r.start.offset,r.end.node,r.end.offset);const s=a.some(l=>l.type==="characterData"||l.type==="childList"||l.type==="attributes"&&l.target===this.root);this.update(s?zt.sources.SILENT:i)}catch{}})}),this.emitter.on(zt.events.SCROLL_OPTIMIZE,(r,i)=>{if(i.range){const{startNode:a,startOffset:s,endNode:l,endOffset:u}=i.range;this.setNativeRange(a,s,l,u),this.update(zt.sources.SILENT)}}),this.update(zt.sources.SILENT)}handleComposition(){this.emitter.on(zt.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(zt.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const n=this.cursor.restore();if(!n)return;setTimeout(()=>{this.setNativeRange(n.startNode,n.startOffset,n.endNode,n.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(zt.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(n,t){this.scroll.update();const r=this.getNativeRange();if(!(r==null||!r.native.collapsed||this.scroll.query(n,Wt.BLOCK))){if(r.start.node!==this.cursor.textNode){const i=this.scroll.find(r.start.node,!1);if(i==null)return;if(i instanceof Ms){const a=i.split(r.start.offset);i.parent.insertBefore(this.cursor,a)}else i.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(n,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const r=this.scroll.length();n=Math.min(n,r-1),t=Math.min(n+t,r-1)-n;let i,[a,s]=this.scroll.leaf(n);if(a==null)return null;if(t>0&&s===a.length()){const[f]=this.scroll.leaf(n+1);if(f){const[m]=this.scroll.line(n),[b]=this.scroll.line(n+1);m===b&&(a=f,s=0)}}[i,s]=a.position(s,!0);const l=document.createRange();if(t>0)return l.setStart(i,s),[a,s]=this.scroll.leaf(n+t),a==null?null:([i,s]=a.position(s,!0),l.setEnd(i,s),l.getBoundingClientRect());let u="left",d;if(i instanceof Text){if(!i.data.length)return null;s<i.data.length?(l.setStart(i,s),l.setEnd(i,s+1)):(l.setStart(i,s-1),l.setEnd(i,s),u="right"),d=l.getBoundingClientRect()}else{if(!(a.domNode instanceof Element))return null;d=a.domNode.getBoundingClientRect(),s>0&&(u="right")}return{bottom:d.top+d.height,height:d.height,left:d[u],right:d[u],top:d.top,width:0}}getNativeRange(){const n=document.getSelection();if(n==null||n.rangeCount<=0)return null;const t=n.getRangeAt(0);if(t==null)return null;const r=this.normalizeNative(t);return $5.info("getNativeRange",r),r}getRange(){const n=this.scroll.domNode;if("isConnected"in n&&!n.isConnected)return[null,null];const t=this.getNativeRange();return t==null?[null,null]:[this.normalizedToRange(t),t]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&U5(this.root,document.activeElement)}normalizedToRange(n){const t=[[n.start.node,n.start.offset]];n.native.collapsed||t.push([n.end.node,n.end.offset]);const r=t.map(s=>{const[l,u]=s,d=this.scroll.find(l,!0),f=d.offset(this.scroll);return u===0?f:d instanceof Ms?f+d.index(l,u):f+d.length()}),i=Math.min(Math.max(...r),this.scroll.length()-1),a=Math.min(i,...r);return new lp(a,i-a)}normalizeNative(n){if(!U5(this.root,n.startContainer)||!n.collapsed&&!U5(this.root,n.endContainer))return null;const t={start:{node:n.startContainer,offset:n.startOffset},end:{node:n.endContainer,offset:n.endOffset},native:n};return[t.start,t.end].forEach(r=>{let{node:i,offset:a}=r;for(;!(i instanceof Text)&&i.childNodes.length>0;)if(i.childNodes.length>a)i=i.childNodes[a],a=0;else if(i.childNodes.length===a)i=i.lastChild,i instanceof Text?a=i.data.length:i.childNodes.length>0?a=i.childNodes.length:a=i.childNodes.length+1;else break;r.node=i,r.offset=a}),t}rangeToNative(n){const t=this.scroll.length(),r=(i,a)=>{i=Math.min(t-1,i);const[s,l]=this.scroll.leaf(i);return s?s.position(l,a):[null,-1]};return[...r(n.index,!1),...r(n.index+n.length,!0)]}setNativeRange(n,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:n,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:t,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if($5.info("setNativeRange",n,t,r,i),n!=null&&(this.root.parentNode==null||n.parentNode==null||r.parentNode==null))return;const s=document.getSelection();if(s!=null)if(n!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:l}=this.getNativeRange()||{};if(l==null||a||n!==l.startContainer||t!==l.startOffset||r!==l.endContainer||i!==l.endOffset){n instanceof Element&&n.tagName==="BR"&&(t=Array.from(n.parentNode.childNodes).indexOf(n),n=n.parentNode),r instanceof Element&&r.tagName==="BR"&&(i=Array.from(r.parentNode.childNodes).indexOf(r),r=r.parentNode);const u=document.createRange();u.setStart(n,t),u.setEnd(r,i),s.removeAllRanges(),s.addRange(u)}}else s.removeAllRanges(),this.root.blur()}setRange(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:zt.sources.API;if(typeof t=="string"&&(r=t,t=!1),$5.info("setRange",n),n!=null){const i=this.rangeToNative(n);this.setNativeRange(...i,t)}else this.setNativeRange(null);this.update(r)}update(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:zt.sources.USER;const t=this.lastRange,[r,i]=this.getRange();if(this.lastRange=r,this.lastNative=i,this.lastRange!=null&&(this.savedRange=this.lastRange),!Df(t,this.lastRange)){if(!this.composing&&i!=null&&i.native.collapsed&&i.start.node!==this.cursor.textNode){const s=this.cursor.restore();s&&this.setNativeRange(s.startNode,s.startOffset,s.endNode,s.endOffset)}const a=[zt.events.SELECTION_CHANGE,I0(this.lastRange),I0(t),n];this.emitter.emit(zt.events.EDITOR_CHANGE,...a),n!==zt.sources.SILENT&&this.emitter.emit(...a)}}}function U5(e,n){try{n.parentNode}catch{return!1}return e.contains(n)}const z$=/^[ -~]*$/;class q${constructor(n){this.scroll=n,this.delta=this.getDelta()}applyDelta(n){this.scroll.update();let t=this.scroll.length();this.scroll.batchStart();const r=A4(n),i=new Ht;return $$(r.ops.slice()).reduce((s,l)=>{const u=Tl.Op.length(l);let d=l.attributes||{},f=!1,m=!1;if(l.insert!=null){if(i.retain(u),typeof l.insert=="string"){const x=l.insert;m=!x.endsWith(`
`)&&(t<=s||!!this.scroll.descendant(jl,s)[0]),this.scroll.insertAt(s,x);const[y,A]=this.scroll.line(s);let w=Wf({},Sl(y));if(y instanceof bs){const[C]=y.descendant(Ms,A);C&&(w=Wf(w,Sl(C)))}d=Tl.AttributeMap.diff(w,d)||{}}else if(typeof l.insert=="object"){const x=Object.keys(l.insert)[0];if(x==null)return s;const y=this.scroll.query(x,Wt.INLINE)!=null;if(y)(t<=s||this.scroll.descendant(jl,s)[0])&&(m=!0);else if(s>0){const[A,w]=this.scroll.descendant(Ms,s-1);A instanceof vu?A.value()[w]!==`
`&&(f=!0):A instanceof el&&A.statics.scope===Wt.INLINE_BLOT&&(f=!0)}if(this.scroll.insertAt(s,x,l.insert[x]),y){const[A]=this.scroll.descendant(Ms,s);if(A){const w=Wf({},Sl(A));d=Tl.AttributeMap.diff(w,d)||{}}}}t+=u}else if(i.push(l),l.retain!==null&&typeof l.retain=="object"){const x=Object.keys(l.retain)[0];if(x==null)return s;this.scroll.updateEmbedAt(s,x,l.retain[x])}Object.keys(d).forEach(x=>{this.scroll.formatAt(s,u,x,d[x])});const b=f?1:0,g=m?1:0;return t+=b+g,i.retain(b),i.delete(g),s+u+b+g},0),i.reduce((s,l)=>typeof l.delete=="number"?(this.scroll.deleteAt(s,l.delete),s):s+Tl.Op.length(l),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(r)}deleteText(n,t){return this.scroll.deleteAt(n,t),this.update(new Ht().retain(n).delete(t))}formatLine(n,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(r).forEach(a=>{this.scroll.lines(n,Math.max(t,1)).forEach(s=>{s.format(a,r[a])})}),this.scroll.optimize();const i=new Ht().retain(n).retain(t,I0(r));return this.update(i)}formatText(n,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(r).forEach(a=>{this.scroll.formatAt(n,t,a,r[a])});const i=new Ht().retain(n).retain(t,I0(r));return this.update(i)}getContents(n,t){return this.delta.slice(n,n+t)}getDelta(){return this.scroll.lines().reduce((n,t)=>n.concat(t.delta()),new Ht)}getFormat(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=[],i=[];t===0?this.scroll.path(n).forEach(l=>{const[u]=l;u instanceof bs?r.push(u):u instanceof Ms&&i.push(u)}):(r=this.scroll.lines(n,t),i=this.scroll.descendants(Ms,n,t));const[a,s]=[r,i].map(l=>{const u=l.shift();if(u==null)return{};let d=Sl(u);for(;Object.keys(d).length>0;){const f=l.shift();if(f==null)return d;d=B$(Sl(f),d)}return d});return{...a,...s}}getHTML(n,t){const[r,i]=this.scroll.line(n);if(r){const a=r.length();return r.length()>=i+t&&!(i===0&&t===a)?hg(r,i,t,!0):hg(this.scroll,n,t,!0)}return""}getText(n,t){return this.getContents(n,t).filter(r=>typeof r.insert=="string").map(r=>r.insert).join("")}insertContents(n,t){const r=A4(t),i=new Ht().retain(n).concat(r);return this.scroll.insertContents(n,r),this.update(i)}insertEmbed(n,t,r){return this.scroll.insertAt(n,t,r),this.update(new Ht().retain(n).insert({[t]:r}))}insertText(n,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return t=t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(n,t),Object.keys(r).forEach(i=>{this.scroll.formatAt(n,t.length,i,r[i])}),this.update(new Ht().retain(n).insert(t,I0(r)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const n=this.scroll.children.head;if((n==null?void 0:n.statics.blotName)!==bs.blotName)return!1;const t=n;return t.children.length>1?!1:t.children.head instanceof Au}removeFormat(n,t){const r=this.getText(n,t),[i,a]=this.scroll.line(n+t);let s=0,l=new Ht;i!=null&&(s=i.length()-a,l=i.delta().slice(a,a+s-1).insert(`
`));const d=this.getContents(n,t+s).diff(new Ht().insert(r).concat(l)),f=new Ht().retain(n).concat(d);return this.applyDelta(f)}update(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const i=this.delta;if(t.length===1&&t[0].type==="characterData"&&t[0].target.data.match(z$)&&this.scroll.find(t[0].target)){const a=this.scroll.find(t[0].target),s=Sl(a),l=a.offset(this.scroll),u=t[0].oldValue.replace(J0.CONTENTS,""),d=new Ht().insert(u),f=new Ht().insert(a.value()),m=r&&{oldRange:C4(r.oldRange,-l),newRange:C4(r.newRange,-l)};n=new Ht().retain(l).concat(d.diff(f,m)).reduce((g,x)=>x.insert?g.insert(x.insert,s):g.push(x),new Ht),this.delta=i.compose(n)}else this.delta=this.getDelta(),(!n||!Df(i.compose(n),this.delta))&&(n=i.diff(this.delta,r));return n}}function k0(e,n,t){if(e.length===0){const[g]=H5(t.pop());return n<=0?`</li></${g}>`:`</li></${g}>${k0([],n-1,t)}`}const[{child:r,offset:i,length:a,indent:s,type:l},...u]=e,[d,f]=H5(l);if(s>n)return t.push(l),s===n+1?`<${d}><li${f}>${hg(r,i,a)}${k0(u,s,t)}`:`<${d}><li>${k0(e,n+1,t)}`;const m=t[t.length-1];if(s===n&&l===m)return`</li><li${f}>${hg(r,i,a)}${k0(u,s,t)}`;const[b]=H5(t.pop());return`</li></${b}>${k0(e,n-1,t)}`}function hg(e,n,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in e&&typeof e.html=="function")return e.html(n,t);if(e instanceof vu)return bv(e.value().slice(n,n+t)).replaceAll(" ","&nbsp;");if(e instanceof yu){if(e.statics.blotName==="list-container"){const d=[];return e.children.forEachAt(n,t,(f,m,b)=>{const g="formats"in f&&typeof f.formats=="function"?f.formats():{};d.push({child:f,offset:m,length:b,indent:g.indent||0,type:g.list})}),k0(d,-1,[])}const i=[];if(e.children.forEachAt(n,t,(d,f,m)=>{i.push(hg(d,f,m))}),r||e.statics.blotName==="list")return i.join("");const{outerHTML:a,innerHTML:s}=e.domNode,[l,u]=a.split(`>${s}<`);return l==="<table"?`<table style="border: 1px solid #000;">${i.join("")}<${u}`:`${l}>${i.join("")}<${u}`}return e.domNode instanceof Element?e.domNode.outerHTML:""}function B$(e,n){return Object.keys(n).reduce((t,r)=>{if(e[r]==null)return t;const i=n[r];return i===e[r]?t[r]=i:Array.isArray(i)?i.indexOf(e[r])<0?t[r]=i.concat([e[r]]):t[r]=i:t[r]=[i,e[r]],t},{})}function H5(e){const n=e==="ordered"?"ol":"ul";switch(e){case"checked":return[n,' data-list="checked"'];case"unchecked":return[n,' data-list="unchecked"'];default:return[n,""]}}function A4(e){return e.reduce((n,t)=>{if(typeof t.insert=="string"){const r=t.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return n.insert(r,t.attributes)}return n.push(t)},new Ht)}function C4(e,n){let{index:t,length:r}=e;return new lp(t+n,r)}function $$(e){const n=[];return e.forEach(t=>{typeof t.insert=="string"?t.insert.split(`
`).forEach((i,a)=>{a&&n.push({insert:`
`,attributes:t.attributes}),i&&n.push({insert:i,attributes:t.attributes})}):n.push(t)}),n}class Cu{constructor(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=n,this.options=t}}nt(Cu,"DEFAULTS",{});const gy="\uFEFF";class K6 extends el{constructor(n,t){super(n,t),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(r=>{this.contentNode.appendChild(r)}),this.leftGuard=document.createTextNode(gy),this.rightGuard=document.createTextNode(gy),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(n,t){return n===this.leftGuard?0:n===this.rightGuard?1:super.index(n,t)}restore(n){let t=null,r;const i=n.data.split(gy).join("");if(n===this.leftGuard)if(this.prev instanceof vu){const a=this.prev.length();this.prev.insertAt(a,i),t={startNode:this.prev.domNode,startOffset:a+i.length}}else r=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(r),this),t={startNode:r,startOffset:i.length};else n===this.rightGuard&&(this.next instanceof vu?(this.next.insertAt(0,i),t={startNode:this.next.domNode,startOffset:i.length}):(r=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(r),this.next),t={startNode:r,startOffset:i.length}));return n.data=gy,t}update(n,t){n.forEach(r=>{if(r.type==="characterData"&&(r.target===this.leftGuard||r.target===this.rightGuard)){const i=this.restore(r.target);i&&(t.range=i)}})}}class U${constructor(n,t){nt(this,"isComposing",!1);this.scroll=n,this.emitter=t,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",n=>{this.isComposing||this.handleCompositionStart(n)}),this.scroll.domNode.addEventListener("compositionend",n=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(n)})})}handleCompositionStart(n){const t=n.target instanceof Node?this.scroll.find(n.target,!0):null;t&&!(t instanceof K6)&&(this.emitter.emit(zt.events.COMPOSITION_BEFORE_START,n),this.scroll.batchStart(),this.emitter.emit(zt.events.COMPOSITION_START,n),this.isComposing=!0)}handleCompositionEnd(n){this.emitter.emit(zt.events.COMPOSITION_BEFORE_END,n),this.scroll.batchEnd(),this.emitter.emit(zt.events.COMPOSITION_END,n),this.isComposing=!1}}const tg=class tg{constructor(n,t){nt(this,"modules",{});this.quill=n,this.options=t}init(){Object.keys(this.options.modules).forEach(n=>{this.modules[n]==null&&this.addModule(n)})}addModule(n){const t=this.quill.constructor.import(`modules/${n}`);return this.modules[n]=new t(this.quill,this.options.modules[n]||{}),this.modules[n]}};nt(tg,"DEFAULTS",{modules:{}}),nt(tg,"themes",{default:tg});let em=tg;const H$=e=>e.parentElement||e.getRootNode().host||null,W$=e=>{const n=e.getBoundingClientRect(),t="offsetWidth"in e&&Math.abs(n.width)/e.offsetWidth||1,r="offsetHeight"in e&&Math.abs(n.height)/e.offsetHeight||1;return{top:n.top,right:n.left+e.clientWidth*t,bottom:n.top+e.clientHeight*r,left:n.left}},by=e=>{const n=parseInt(e,10);return Number.isNaN(n)?0:n},k4=(e,n,t,r,i,a)=>e<t&&n>r?0:e<t?-(t-e+i):n>r?n-e>r-t?e+i-t:n-r+a:0,V$=(e,n)=>{var a,s,l;const t=e.ownerDocument;let r=n,i=e;for(;i;){const u=i===t.body,d=u?{top:0,right:((a=window.visualViewport)==null?void 0:a.width)??t.documentElement.clientWidth,bottom:((s=window.visualViewport)==null?void 0:s.height)??t.documentElement.clientHeight,left:0}:W$(i),f=getComputedStyle(i),m=k4(r.left,r.right,d.left,d.right,by(f.scrollPaddingLeft),by(f.scrollPaddingRight)),b=k4(r.top,r.bottom,d.top,d.bottom,by(f.scrollPaddingTop),by(f.scrollPaddingBottom));if(m||b)if(u)(l=t.defaultView)==null||l.scrollBy(m,b);else{const{scrollLeft:g,scrollTop:x}=i;b&&(i.scrollTop+=b),m&&(i.scrollLeft+=m);const y=i.scrollLeft-g,A=i.scrollTop-x;r={left:r.left-y,top:r.top-A,right:r.right-y,bottom:r.bottom-A}}i=u||f.position==="fixed"?null:H$(i)}},Y$=100,G$=["block","break","cursor","inline","scroll","text"],Q$=(e,n,t)=>{const r=new Z0;return G$.forEach(i=>{const a=n.query(i);a&&r.register(a)}),e.forEach(i=>{let a=n.query(i);a||t.error(`Cannot register "${i}" specified in "formats" config. Are you sure it was registered?`);let s=0;for(;a;)if(r.register(a),a="blotName"in a?a.requiredContainer??null:null,s+=1,s>Y$){t.error(`Cycle detected in registering blot requiredContainer: "${i}"`);break}}),r},R0=$d("quill"),yy=new Z0;yu.uiClass="ql-ui";const cu=class cu{static debug(n){n===!0&&(n="log"),$d.level(n)}static find(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return gS.get(n)||yy.find(n,t)}static import(n){return this.imports[n]==null&&R0.error(`Cannot import ${n}. Are you sure it was registered?`),this.imports[n]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const n=arguments.length<=0?void 0:arguments[0],t=!!(!(arguments.length<=1)&&arguments[1]),r="attrName"in n?n.attrName:n.blotName;typeof r=="string"?this.register(`formats/${r}`,n,t):Object.keys(n).forEach(i=>{this.register(i,n[i],t)})}else{const n=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],r=!!(!(arguments.length<=2)&&arguments[2]);this.imports[n]!=null&&!r&&R0.warn(`Overwriting ${n} with`,t),this.imports[n]=t,(n.startsWith("blots/")||n.startsWith("formats/"))&&t&&typeof t!="boolean"&&t.blotName!=="abstract"&&yy.register(t),typeof t.register=="function"&&t.register(yy)}}constructor(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=K$(n,t),this.container=this.options.container,this.container==null){R0.error("Invalid Quill container",n);return}this.options.debug&&cu.debug(this.options.debug);const r=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",gS.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new zt;const i=Q6.blotName,a=this.options.registry.query(i);if(!a||!("blotName"in a))throw new Error(`Cannot initialize Quill without "${i}" blot`);if(this.scroll=new a(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new q$(this.scroll),this.selection=new P$(this.scroll,this.emitter),this.composition=new U$(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(zt.events.EDITOR_CHANGE,s=>{s===zt.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(zt.events.SCROLL_UPDATE,(s,l)=>{const u=this.selection.lastRange,[d]=this.selection.getRange(),f=u&&d?{oldRange:u,newRange:d}:void 0;ou.call(this,()=>this.editor.update(null,l,f),s)}),this.emitter.on(zt.events.SCROLL_EMBED_UPDATE,(s,l)=>{const u=this.selection.lastRange,[d]=this.selection.getRange(),f=u&&d?{oldRange:u,newRange:d}:void 0;ou.call(this,()=>{const m=new Ht().retain(s.offset(this)).retain({[s.statics.blotName]:l});return this.editor.update(m,[],f)},cu.sources.USER)}),r){const s=this.clipboard.convert({html:`${r}<p><br></p>`,text:`
`});this.setContents(s)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof n=="string"){const r=n;n=document.createElement("div"),n.classList.add(r)}return this.container.insertBefore(n,t),n}blur(){this.selection.setRange(null)}deleteText(n,t,r){return[n,t,,r]=hd(n,t,r),ou.call(this,()=>this.editor.deleteText(n,t),r,n,-1*t)}disable(){this.enable(!1)}editReadOnly(n){this.allowReadOnlyEdits=!0;const t=n();return this.allowReadOnlyEdits=!1,t}enable(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(n),this.container.classList.toggle("ql-disabled",!n)}focus(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),n.preventScroll||this.scrollSelectionIntoView()}format(n,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:zt.sources.API;return ou.call(this,()=>{const i=this.getSelection(!0);let a=new Ht;if(i==null)return a;if(this.scroll.query(n,Wt.BLOCK))a=this.editor.formatLine(i.index,i.length,{[n]:t});else{if(i.length===0)return this.selection.format(n,t),a;a=this.editor.formatText(i.index,i.length,{[n]:t})}return this.setSelection(i,zt.sources.SILENT),a},r)}formatLine(n,t,r,i,a){let s;return[n,t,s,a]=hd(n,t,r,i,a),ou.call(this,()=>this.editor.formatLine(n,t,s),a,n,0)}formatText(n,t,r,i,a){let s;return[n,t,s,a]=hd(n,t,r,i,a),ou.call(this,()=>this.editor.formatText(n,t,s),a,n,0)}getBounds(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=null;if(typeof n=="number"?r=this.selection.getBounds(n,t):r=this.selection.getBounds(n.index,n.length),!r)return null;const i=this.container.getBoundingClientRect();return{bottom:r.bottom-i.top,height:r.height,left:r.left-i.left,right:r.right-i.left,top:r.top-i.top,width:r.width}}getContents(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-n;return[n,t]=hd(n,t),this.editor.getContents(n,t)}getFormat(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof n=="number"?this.editor.getFormat(n,t):this.editor.getFormat(n.index,n.length)}getIndex(n){return n.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(n){return this.scroll.leaf(n)}getLine(n){return this.scroll.line(n)}getLines(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof n!="number"?this.scroll.lines(n.index,n.length):this.scroll.lines(n,t)}getModule(n){return this.theme.modules[n]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof n=="number"&&(t=t??this.getLength()-n),[n,t]=hd(n,t),this.editor.getHTML(n,t)}getText(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof n=="number"&&(t=t??this.getLength()-n),[n,t]=hd(n,t),this.editor.getText(n,t)}hasFocus(){return this.selection.hasFocus()}insertEmbed(n,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:cu.sources.API;return ou.call(this,()=>this.editor.insertEmbed(n,t,r),i,n)}insertText(n,t,r,i,a){let s;return[n,,s,a]=hd(n,0,r,i,a),ou.call(this,()=>this.editor.insertText(n,t,s),a,n,t.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(n,t,r){return[n,t,,r]=hd(n,t,r),ou.call(this,()=>this.editor.removeFormat(n,t),r,n)}scrollRectIntoView(n){V$(this.root,n)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const n=this.selection.lastRange,t=n&&this.selection.getBounds(n.index,n.length);t&&this.scrollRectIntoView(t)}setContents(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zt.sources.API;return ou.call(this,()=>{n=new Ht(n);const r=this.getLength(),i=this.editor.deleteText(0,r),a=this.editor.insertContents(0,n),s=this.editor.deleteText(this.getLength()-1,1);return i.compose(a).compose(s)},t)}setSelection(n,t,r){n==null?this.selection.setRange(null,t||cu.sources.API):([n,t,,r]=hd(n,t,r),this.selection.setRange(new lp(Math.max(0,n),t),r),r!==zt.sources.SILENT&&this.scrollSelectionIntoView())}setText(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zt.sources.API;const r=new Ht().insert(n);return this.setContents(r,t)}update(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:zt.sources.USER;const t=this.scroll.update(n);return this.selection.update(n),t}updateContents(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zt.sources.API;return ou.call(this,()=>(n=new Ht(n),this.editor.applyDelta(n)),t,!0)}};nt(cu,"DEFAULTS",{bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:yy,theme:"default"}),nt(cu,"events",zt.events),nt(cu,"sources",zt.sources),nt(cu,"version","2.0.3"),nt(cu,"imports",{delta:Ht,parchment:N$,"core/module":Cu,"core/theme":em});let vt=cu;function E4(e){return typeof e=="string"?document.querySelector(e):e}function W5(e){return Object.entries(e??{}).reduce((n,t)=>{let[r,i]=t;return{...n,[r]:i===!0?{}:i}},{})}function _4(e){return Object.fromEntries(Object.entries(e).filter(n=>n[1]!==void 0))}function K$(e,n){const t=E4(e);if(!t)throw new Error("Invalid Quill container");const i=!n.theme||n.theme===vt.DEFAULTS.theme?em:vt.import(`themes/${n.theme}`);if(!i)throw new Error(`Invalid theme ${n.theme}. Did you register it?`);const{modules:a,...s}=vt.DEFAULTS,{modules:l,...u}=i.DEFAULTS;let d=W5(n.modules);d!=null&&d.toolbar&&d.toolbar.constructor!==Object&&(d={...d,toolbar:{container:d.toolbar}});const f=Wf({},W5(a),W5(l),d),m={...s,..._4(u),..._4(n)};let b=n.registry;return b?n.formats&&R0.warn('Ignoring "formats" option because "registry" is specified'):b=n.formats?Q$(n.formats,m.registry,R0):m.registry,{...m,registry:b,container:t,theme:i,modules:Object.entries(f).reduce((g,x)=>{let[y,A]=x;if(!A)return g;const w=vt.import(`modules/${y}`);return w==null?(R0.error(`Cannot load ${y} module. Are you sure you registered it?`),g):{...g,[y]:Wf({},w.DEFAULTS||{},A)}},{}),bounds:E4(m.bounds)}}function ou(e,n,t,r){if(!this.isEnabled()&&n===zt.sources.USER&&!this.allowReadOnlyEdits)return new Ht;let i=t==null?null:this.getSelection();const a=this.editor.delta,s=e();if(i!=null&&(t===!0&&(t=i.index),r==null?i=N4(i,s,n):r!==0&&(i=N4(i,t,r,n)),this.setSelection(i,zt.sources.SILENT)),s.length()>0){const l=[zt.events.TEXT_CHANGE,s,a,n];this.emitter.emit(zt.events.EDITOR_CHANGE,...l),n!==zt.sources.SILENT&&this.emitter.emit(...l)}return s}function hd(e,n,t,r,i){let a={};return typeof e.index=="number"&&typeof e.length=="number"?typeof n!="number"?(i=r,r=t,t=n,n=e.length,e=e.index):(n=e.length,e=e.index):typeof n!="number"&&(i=r,r=t,t=n,n=0),typeof t=="object"?(a=t,i=r):typeof t=="string"&&(r!=null?a[t]=r:i=t),i=i||zt.sources.API,[e,n,a,i]}function N4(e,n,t,r){const i=typeof t=="number"?t:0;if(e==null)return null;let a,s;return n&&typeof n.transformPosition=="function"?[a,s]=[e.index,e.index+e.length].map(l=>n.transformPosition(l,r!==zt.sources.USER)):[a,s]=[e.index,e.index+e.length].map(l=>l<n||l===n&&r===zt.sources.USER?l:i>=0?l+i:Math.max(n,l+i)),new lp(a,s-a)}class Sp extends gv{}function j4(e){return e instanceof bs||e instanceof jl}function T4(e){return typeof e.updateContent=="function"}class E0 extends Q6{constructor(n,t,r){let{emitter:i}=r;super(n,t),this.emitter=i,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",a=>this.handleDragStart(a))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const n=this.batch;this.batch=!1,this.update(n)}emitMount(n){this.emitter.emit(zt.events.SCROLL_BLOT_MOUNT,n)}emitUnmount(n){this.emitter.emit(zt.events.SCROLL_BLOT_UNMOUNT,n)}emitEmbedUpdate(n,t){this.emitter.emit(zt.events.SCROLL_EMBED_UPDATE,n,t)}deleteAt(n,t){const[r,i]=this.line(n),[a]=this.line(n+t);if(super.deleteAt(n,t),a!=null&&r!==a&&i>0){if(r instanceof jl||a instanceof jl){this.optimize();return}const s=a.children.head instanceof Au?null:a.children.head;r.moveChildren(a,s),r.remove()}this.optimize()}enable(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",n?"true":"false")}formatAt(n,t,r,i){super.formatAt(n,t,r,i),this.optimize()}insertAt(n,t,r){if(n>=this.length())if(r==null||this.scroll.query(t,Wt.BLOCK)==null){const i=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(i),r==null&&t.endsWith(`
`)?i.insertAt(0,t.slice(0,-1),r):i.insertAt(0,t,r)}else{const i=this.scroll.create(t,r);this.appendChild(i)}else super.insertAt(n,t,r);this.optimize()}insertBefore(n,t){if(n.statics.scope===Wt.INLINE_BLOT){const r=this.scroll.create(this.statics.defaultChild.blotName);r.appendChild(n),super.insertBefore(r,t)}else super.insertBefore(n,t)}insertContents(n,t){const r=this.deltaToRenderBlocks(t.concat(new Ht().insert(`
`))),i=r.pop();if(i==null)return;this.batchStart();const a=r.shift();if(a){const u=a.type==="block"&&(a.delta.length()===0||!this.descendant(jl,n)[0]&&n<this.length()),d=a.type==="block"?a.delta:new Ht().insert({[a.key]:a.value});V5(this,n,d);const f=a.type==="block"?1:0,m=n+d.length()+f;u&&this.insertAt(m-1,`
`);const b=Sl(this.line(n)[0]),g=Tl.AttributeMap.diff(b,a.attributes)||{};Object.keys(g).forEach(x=>{this.formatAt(m-1,1,x,g[x])}),n=m}let[s,l]=this.children.find(n);if(r.length&&(s&&(s=s.split(l),l=0),r.forEach(u=>{if(u.type==="block"){const d=this.createBlock(u.attributes,s||void 0);V5(d,0,u.delta)}else{const d=this.create(u.key,u.value);this.insertBefore(d,s||void 0),Object.keys(u.attributes).forEach(f=>{d.format(f,u.attributes[f])})}})),i.type==="block"&&i.delta.length()){const u=s?s.offset(s.scroll)+l:this.length();V5(this,u,i.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(n){const t=this.path(n).pop();if(!t)return[null,-1];const[r,i]=t;return r instanceof Ms?[r,i]:[null,-1]}line(n){return n===this.length()?this.line(n-1):this.descendant(j4,n)}lines(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const r=(i,a,s)=>{let l=[],u=s;return i.children.forEachAt(a,s,(d,f,m)=>{j4(d)?l.push(d):d instanceof gv&&(l=l.concat(r(d,f,u))),u-=m}),l};return r(this,n,t)}optimize(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(n,t),n.length>0&&this.emitter.emit(zt.events.SCROLL_OPTIMIZE,n,t))}path(n){return super.path(n).slice(1)}remove(){}update(n){if(this.batch){Array.isArray(n)&&(this.batch=this.batch.concat(n));return}let t=zt.sources.USER;typeof n=="string"&&(t=n),Array.isArray(n)||(n=this.observer.takeRecords()),n=n.filter(r=>{let{target:i}=r;const a=this.find(i,!0);return a&&!T4(a)}),n.length>0&&this.emitter.emit(zt.events.SCROLL_BEFORE_UPDATE,t,n),super.update(n.concat([])),n.length>0&&this.emitter.emit(zt.events.SCROLL_UPDATE,t,n)}updateEmbedAt(n,t,r){const[i]=this.descendant(a=>a instanceof jl,n);i&&i.statics.blotName===t&&T4(i)&&i.updateContent(r)}handleDragStart(n){n.preventDefault()}deltaToRenderBlocks(n){const t=[];let r=new Ht;return n.forEach(i=>{const a=i==null?void 0:i.insert;if(a)if(typeof a=="string"){const s=a.split(`
`);s.slice(0,-1).forEach(u=>{r.insert(u,i.attributes),t.push({type:"block",delta:r,attributes:i.attributes??{}}),r=new Ht});const l=s[s.length-1];l&&r.insert(l,i.attributes)}else{const s=Object.keys(a)[0];if(!s)return;this.query(s,Wt.INLINE)?r.push(i):(r.length()&&t.push({type:"block",delta:r,attributes:{}}),r=new Ht,t.push({type:"blockEmbed",key:s,value:a[s],attributes:i.attributes??{}}))}}),r.length()&&t.push({type:"block",delta:r,attributes:{}}),t}createBlock(n,t){let r;const i={};Object.entries(n).forEach(l=>{let[u,d]=l;this.query(u,Wt.BLOCK&Wt.BLOT)!=null?r=u:i[u]=d});const a=this.create(r||this.statics.defaultChild.blotName,r?n[r]:void 0);this.insertBefore(a,t||void 0);const s=a.length();return Object.entries(i).forEach(l=>{let[u,d]=l;a.formatAt(0,s,u,d)}),a}}nt(E0,"blotName","scroll"),nt(E0,"className","ql-editor"),nt(E0,"tagName","DIV"),nt(E0,"defaultChild",bs),nt(E0,"allowedChildren",[bs,jl,Sp]);function V5(e,n,t){t.reduce((r,i)=>{const a=Tl.Op.length(i);let s=i.attributes||{};if(i.insert!=null){if(typeof i.insert=="string"){const l=i.insert;e.insertAt(r,l);const[u]=e.descendant(Ms,r),d=Sl(u);s=Tl.AttributeMap.diff(d,s)||{}}else if(typeof i.insert=="object"){const l=Object.keys(i.insert)[0];if(l==null)return r;if(e.insertAt(r,l,i.insert[l]),e.scroll.query(l,Wt.INLINE)!=null){const[d]=e.descendant(Ms,r),f=Sl(d);s=Tl.AttributeMap.diff(f,s)||{}}}}return Object.keys(s).forEach(l=>{e.formatAt(r,a,l,s[l])}),r+a},n)}const X6={scope:Wt.BLOCK,whitelist:["right","center","justify"]},X$=new Lc("align","align",X6),k7=new Su("align","ql-align",X6),E7=new sh("align","text-align",X6);class _7 extends sh{value(n){let t=super.value(n);return t.startsWith("rgb(")?(t=t.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${t.split(",").map(i=>`00${parseInt(i,10).toString(16)}`.slice(-2)).join("")}`):t}}const Z$=new Su("color","ql-color",{scope:Wt.INLINE}),Z6=new _7("color","color",{scope:Wt.INLINE}),J$=new Su("background","ql-bg",{scope:Wt.INLINE}),J6=new _7("background","background-color",{scope:Wt.INLINE});class Ap extends Sp{static create(n){const t=super.create(n);return t.setAttribute("spellcheck","false"),t}code(n,t){return this.children.map(r=>r.length()<=1?"":r.domNode.innerText).join(`
`).slice(n,n+t)}html(n,t){return`<pre>
${bv(this.code(n,t))}
</pre>`}}class $s extends bs{static register(){vt.register(Ap)}}nt($s,"TAB","  ");class eA extends Rc{}eA.blotName="code";eA.tagName="CODE";$s.blotName="code-block";$s.className="ql-code-block";$s.tagName="DIV";Ap.blotName="code-block-container";Ap.className="ql-code-block-container";Ap.tagName="DIV";Ap.allowedChildren=[$s];$s.allowedChildren=[vu,Au,J0];$s.requiredContainer=Ap;const tA={scope:Wt.BLOCK,whitelist:["rtl"]},N7=new Lc("direction","dir",tA),j7=new Su("direction","ql-direction",tA),T7=new sh("direction","direction",tA),O7={scope:Wt.INLINE,whitelist:["serif","monospace"]},D7=new Su("font","ql-font",O7);class eU extends sh{value(n){return super.value(n).replace(/["']/g,"")}}const I7=new eU("font","font-family",O7),L7=new Su("size","ql-size",{scope:Wt.INLINE,whitelist:["small","large","huge"]}),R7=new sh("size","font-size",{scope:Wt.INLINE,whitelist:["10px","18px","32px"]}),tU=$d("quill:keyboard"),nU=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class yv extends Cu{static match(n,t){return["altKey","ctrlKey","metaKey","shiftKey"].some(r=>!!t[r]!==n[r]&&t[r]!==null)?!1:t.key===n.key||t.key===n.which}constructor(n,t){super(n,t),this.bindings={},Object.keys(this.options.bindings).forEach(r=>{this.options.bindings[r]&&this.addBinding(this.options.bindings[r])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=iU(n);if(i==null){tU.warn("Attempted to add invalid keyboard binding",i);return}typeof t=="function"&&(t={handler:t}),typeof r=="function"&&(r={handler:r}),(Array.isArray(i.key)?i.key:[i.key]).forEach(s=>{const l={...i,key:s,...t,...r};this.bindings[l.key]=this.bindings[l.key]||[],this.bindings[l.key].push(l)})}listen(){this.quill.root.addEventListener("keydown",n=>{if(n.defaultPrevented||n.isComposing||n.keyCode===229&&(n.key==="Enter"||n.key==="Backspace"))return;const i=(this.bindings[n.key]||[]).concat(this.bindings[n.which]||[]).filter(w=>yv.match(n,w));if(i.length===0)return;const a=vt.find(n.target,!0);if(a&&a.scroll!==this.quill.scroll)return;const s=this.quill.getSelection();if(s==null||!this.quill.hasFocus())return;const[l,u]=this.quill.getLine(s.index),[d,f]=this.quill.getLeaf(s.index),[m,b]=s.length===0?[d,f]:this.quill.getLeaf(s.index+s.length),g=d instanceof Ex?d.value().slice(0,f):"",x=m instanceof Ex?m.value().slice(b):"",y={collapsed:s.length===0,empty:s.length===0&&l.length()<=1,format:this.quill.getFormat(s),line:l,offset:u,prefix:g,suffix:x,event:n};i.some(w=>{if(w.collapsed!=null&&w.collapsed!==y.collapsed||w.empty!=null&&w.empty!==y.empty||w.offset!=null&&w.offset!==y.offset)return!1;if(Array.isArray(w.format)){if(w.format.every(C=>y.format[C]==null))return!1}else if(typeof w.format=="object"&&!Object.keys(w.format).every(C=>w.format[C]===!0?y.format[C]!=null:w.format[C]===!1?y.format[C]==null:Df(w.format[C],y.format[C])))return!1;return w.prefix!=null&&!w.prefix.test(y.prefix)||w.suffix!=null&&!w.suffix.test(y.suffix)?!1:w.handler.call(this,s,y,w)!==!0})&&n.preventDefault()})}handleBackspace(n,t){const r=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;if(n.index===0||this.quill.getLength()<=1)return;let i={};const[a]=this.quill.getLine(n.index);let s=new Ht().retain(n.index-r).delete(r);if(t.offset===0){const[l]=this.quill.getLine(n.index-1);if(l&&!(l.statics.blotName==="block"&&l.length()<=1)){const d=a.formats(),f=this.quill.getFormat(n.index-1,1);if(i=Tl.AttributeMap.diff(d,f)||{},Object.keys(i).length>0){const m=new Ht().retain(n.index+a.length()-2).retain(1,i);s=s.compose(m)}}}this.quill.updateContents(s,vt.sources.USER),this.quill.focus()}handleDelete(n,t){const r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(n.index>=this.quill.getLength()-r)return;let i={};const[a]=this.quill.getLine(n.index);let s=new Ht().retain(n.index).delete(r);if(t.offset>=a.length()-1){const[l]=this.quill.getLine(n.index+1);if(l){const u=a.formats(),d=this.quill.getFormat(n.index,1);i=Tl.AttributeMap.diff(u,d)||{},Object.keys(i).length>0&&(s=s.retain(l.length()-1).retain(1,i))}}this.quill.updateContents(s,vt.sources.USER),this.quill.focus()}handleDeleteRange(n){nA({range:n,quill:this.quill}),this.quill.focus()}handleEnter(n,t){const r=Object.keys(t.format).reduce((a,s)=>(this.quill.scroll.query(s,Wt.BLOCK)&&!Array.isArray(t.format[s])&&(a[s]=t.format[s]),a),{}),i=new Ht().retain(n.index).delete(n.length).insert(`
`,r);this.quill.updateContents(i,vt.sources.USER),this.quill.setSelection(n.index+1,vt.sources.SILENT),this.quill.focus()}}const rU={bindings:{bold:Y5("bold"),italic:Y5("italic"),underline:Y5("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(e,n){return n.collapsed&&n.offset!==0?!0:(this.quill.format("indent","+1",vt.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(e,n){return n.collapsed&&n.offset!==0?!0:(this.quill.format("indent","-1",vt.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(e,n){n.format.indent!=null?this.quill.format("indent","-1",vt.sources.USER):n.format.list!=null&&this.quill.format("list",!1,vt.sources.USER)}},"indent code-block":O4(!0),"outdent code-block":O4(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(e){this.quill.deleteText(e.index-1,1,vt.sources.USER)}},tab:{key:"Tab",handler(e,n){if(n.format.table)return!0;this.quill.history.cutoff();const t=new Ht().retain(e.index).delete(e.length).insert("	");return this.quill.updateContents(t,vt.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index+1,vt.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,vt.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(e,n){const t={list:!1};n.format.indent&&(t.indent=!1),this.quill.formatLine(e.index,e.length,t,vt.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(e){const[n,t]=this.quill.getLine(e.index),r={...n.formats(),list:"checked"},i=new Ht().retain(e.index).insert(`
`,r).retain(n.length()-t-1).retain(1,{list:"unchecked"});this.quill.updateContents(i,vt.sources.USER),this.quill.setSelection(e.index+1,vt.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(e,n){const[t,r]=this.quill.getLine(e.index),i=new Ht().retain(e.index).insert(`
`,n.format).retain(t.length()-r-1).retain(1,{header:null});this.quill.updateContents(i,vt.sources.USER),this.quill.setSelection(e.index+1,vt.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(e){const n=this.quill.getModule("table");if(n){const[t,r,i,a]=n.getTable(e),s=aU(t,r,i,a);if(s==null)return;let l=t.offset();if(s<0){const u=new Ht().retain(l).insert(`
`);this.quill.updateContents(u,vt.sources.USER),this.quill.setSelection(e.index+1,e.length,vt.sources.SILENT)}else if(s>0){l+=t.length();const u=new Ht().retain(l).insert(`
`);this.quill.updateContents(u,vt.sources.USER),this.quill.setSelection(l,vt.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(e,n){const{event:t,line:r}=n,i=r.offset(this.quill.scroll);t.shiftKey?this.quill.setSelection(i-1,vt.sources.USER):this.quill.setSelection(i+r.length(),vt.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(e,n){if(this.quill.scroll.query("list")==null)return!0;const{length:t}=n.prefix,[r,i]=this.quill.getLine(e.index);if(i>t)return!0;let a;switch(n.prefix.trim()){case"[]":case"[ ]":a="unchecked";break;case"[x]":a="checked";break;case"-":case"*":a="bullet";break;default:a="ordered"}this.quill.insertText(e.index," ",vt.sources.USER),this.quill.history.cutoff();const s=new Ht().retain(e.index-i).delete(t+1).retain(r.length()-2-i).retain(1,{list:a});return this.quill.updateContents(s,vt.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index-t,vt.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(e){const[n,t]=this.quill.getLine(e.index);let r=2,i=n;for(;i!=null&&i.length()<=1&&i.formats()["code-block"];)if(i=i.prev,r-=1,r<=0){const a=new Ht().retain(e.index+n.length()-t-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(a,vt.sources.USER),this.quill.setSelection(e.index-1,vt.sources.SILENT),!1}return!0}},"embed left":xy("ArrowLeft",!1),"embed left shift":xy("ArrowLeft",!0),"embed right":xy("ArrowRight",!1),"embed right shift":xy("ArrowRight",!0),"table down":D4(!1),"table up":D4(!0)}};yv.DEFAULTS=rU;function O4(e){return{key:"Tab",shiftKey:!e,format:{"code-block":!0},handler(n,t){let{event:r}=t;const i=this.quill.scroll.query("code-block"),{TAB:a}=i;if(n.length===0&&!r.shiftKey){this.quill.insertText(n.index,a,vt.sources.USER),this.quill.setSelection(n.index+a.length,vt.sources.SILENT);return}const s=n.length===0?this.quill.getLines(n.index,1):this.quill.getLines(n);let{index:l,length:u}=n;s.forEach((d,f)=>{e?(d.insertAt(0,a),f===0?l+=a.length:u+=a.length):d.domNode.textContent.startsWith(a)&&(d.deleteAt(0,a.length),f===0?l-=a.length:u-=a.length)}),this.quill.update(vt.sources.USER),this.quill.setSelection(l,u,vt.sources.SILENT)}}}function xy(e,n){return{key:e,shiftKey:n,altKey:null,[e==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(r){let{index:i}=r;e==="ArrowRight"&&(i+=r.length+1);const[a]=this.quill.getLeaf(i);return a instanceof el?(e==="ArrowLeft"?n?this.quill.setSelection(r.index-1,r.length+1,vt.sources.USER):this.quill.setSelection(r.index-1,vt.sources.USER):n?this.quill.setSelection(r.index,r.length+1,vt.sources.USER):this.quill.setSelection(r.index+r.length+1,vt.sources.USER),!1):!0}}}function Y5(e){return{key:e[0],shortKey:!0,handler(n,t){this.quill.format(e,!t.format[e],vt.sources.USER)}}}function D4(e){return{key:e?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(n,t){const r=e?"prev":"next",i=t.line,a=i.parent[r];if(a!=null){if(a.statics.blotName==="table-row"){let s=a.children.head,l=i;for(;l.prev!=null;)l=l.prev,s=s.next;const u=s.offset(this.quill.scroll)+Math.min(t.offset,s.length()-1);this.quill.setSelection(u,0,vt.sources.USER)}}else{const s=i.table()[r];s!=null&&(e?this.quill.setSelection(s.offset(this.quill.scroll)+s.length()-1,0,vt.sources.USER):this.quill.setSelection(s.offset(this.quill.scroll),0,vt.sources.USER))}return!1}}}function iU(e){if(typeof e=="string"||typeof e=="number")e={key:e};else if(typeof e=="object")e=I0(e);else return null;return e.shortKey&&(e[nU]=e.shortKey,delete e.shortKey),e}function nA(e){let{quill:n,range:t}=e;const r=n.getLines(t);let i={};if(r.length>1){const a=r[0].formats(),s=r[r.length-1].formats();i=Tl.AttributeMap.diff(s,a)||{}}n.deleteText(t,vt.sources.USER),Object.keys(i).length>0&&n.formatLine(t.index,1,i,vt.sources.USER),n.setSelection(t.index,vt.sources.SILENT)}function aU(e,n,t,r){return n.prev==null&&n.next==null?t.prev==null&&t.next==null?r===0?-1:1:t.prev==null?-1:1:n.prev==null?-1:n.next==null?1:null}const sU=/font-weight:\s*normal/,oU=["P","OL","UL"],I4=e=>e&&oU.includes(e.tagName),lU=e=>{Array.from(e.querySelectorAll("br")).filter(n=>I4(n.previousElementSibling)&&I4(n.nextElementSibling)).forEach(n=>{var t;(t=n.parentNode)==null||t.removeChild(n)})},uU=e=>{Array.from(e.querySelectorAll('b[style*="font-weight"]')).filter(n=>{var t;return(t=n.getAttribute("style"))==null?void 0:t.match(sU)}).forEach(n=>{var r;const t=e.createDocumentFragment();t.append(...n.childNodes),(r=n.parentNode)==null||r.replaceChild(t,n)})};function cU(e){e.querySelector('[id^="docs-internal-guid-"]')&&(uU(e),lU(e))}const dU=/\bmso-list:[^;]*ignore/i,fU=/\bmso-list:[^;]*\bl(\d+)/i,hU=/\bmso-list:[^;]*\blevel(\d+)/i,pU=(e,n)=>{const t=e.getAttribute("style"),r=t==null?void 0:t.match(fU);if(!r)return null;const i=Number(r[1]),a=t==null?void 0:t.match(hU),s=a?Number(a[1]):1,l=new RegExp(`@list l${i}:level${s}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),u=n.match(l),d=u&&u[1]==="bullet"?"bullet":"ordered";return{id:i,indent:s,type:d,element:e}},mU=e=>{var s,l;const n=Array.from(e.querySelectorAll("[style*=mso-list]")),t=[],r=[];n.forEach(u=>{(u.getAttribute("style")||"").match(dU)?t.push(u):r.push(u)}),t.forEach(u=>{var d;return(d=u.parentNode)==null?void 0:d.removeChild(u)});const i=e.documentElement.innerHTML,a=r.map(u=>pU(u,i)).filter(u=>u);for(;a.length;){const u=[];let d=a.shift();for(;d;)u.push(d),d=a.length&&((s=a[0])==null?void 0:s.element)===d.element.nextElementSibling&&a[0].id===d.id?a.shift():null;const f=document.createElement("ul");u.forEach(g=>{const x=document.createElement("li");x.setAttribute("data-list",g.type),g.indent>1&&x.setAttribute("class",`ql-indent-${g.indent-1}`),x.innerHTML=g.element.innerHTML,f.appendChild(x)});const m=(l=u[0])==null?void 0:l.element,{parentNode:b}=m??{};m&&(b==null||b.replaceChild(f,m)),u.slice(1).forEach(g=>{let{element:x}=g;b==null||b.removeChild(x)})}};function gU(e){e.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&mU(e)}const bU=[gU,cU],yU=e=>{e.documentElement&&bU.forEach(n=>{n(e)})},xU=$d("quill:clipboard"),vU=[[Node.TEXT_NODE,DU],[Node.TEXT_NODE,R4],["br",kU],[Node.ELEMENT_NODE,R4],[Node.ELEMENT_NODE,CU],[Node.ELEMENT_NODE,AU],[Node.ELEMENT_NODE,TU],["li",NU],["ol, ul",jU],["pre",EU],["tr",OU],["b",G5("bold")],["i",G5("italic")],["strike",G5("strike")],["style",_U]],wU=[X$,N7].reduce((e,n)=>(e[n.keyName]=n,e),{}),L4=[E7,J6,Z6,T7,I7,R7].reduce((e,n)=>(e[n.keyName]=n,e),{});class M7 extends Cu{constructor(n,t){super(n,t),this.quill.root.addEventListener("copy",r=>this.onCaptureCopy(r,!1)),this.quill.root.addEventListener("cut",r=>this.onCaptureCopy(r,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],vU.concat(this.options.matchers??[]).forEach(r=>{let[i,a]=r;this.addMatcher(i,a)})}addMatcher(n,t){this.matchers.push([n,t])}convert(n){let{html:t,text:r}=n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i[$s.blotName])return new Ht().insert(r||"",{[$s.blotName]:i[$s.blotName]});if(!t)return new Ht().insert(r||"",i);const a=this.convertHTML(t);return $g(a,`
`)&&(a.ops[a.ops.length-1].attributes==null||i.table)?a.compose(new Ht().retain(a.length()-1).delete(1)):a}normalizeHTML(n){yU(n)}convertHTML(n){const t=new DOMParser().parseFromString(n,"text/html");this.normalizeHTML(t);const r=t.body,i=new WeakMap,[a,s]=this.prepareMatching(r,i);return rA(this.quill.scroll,r,a,s,i)}dangerouslyPasteHTML(n,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:vt.sources.API;if(typeof n=="string"){const i=this.convert({html:n,text:""});this.quill.setContents(i,t),this.quill.setSelection(0,vt.sources.SILENT)}else{const i=this.convert({html:t,text:""});this.quill.updateContents(new Ht().retain(n).concat(i),r),this.quill.setSelection(n+i.length(),vt.sources.SILENT)}}onCaptureCopy(n){var s,l;let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n.defaultPrevented)return;n.preventDefault();const[r]=this.quill.selection.getRange();if(r==null)return;const{html:i,text:a}=this.onCopy(r,t);(s=n.clipboardData)==null||s.setData("text/plain",a),(l=n.clipboardData)==null||l.setData("text/html",i),t&&nA({range:r,quill:this.quill})}normalizeURIList(n){return n.split(/\r?\n/).filter(t=>t[0]!=="#").join(`
`)}onCapturePaste(n){var s,l,u,d,f;if(n.defaultPrevented||!this.quill.isEnabled())return;n.preventDefault();const t=this.quill.getSelection(!0);if(t==null)return;const r=(s=n.clipboardData)==null?void 0:s.getData("text/html");let i=(l=n.clipboardData)==null?void 0:l.getData("text/plain");if(!r&&!i){const m=(u=n.clipboardData)==null?void 0:u.getData("text/uri-list");m&&(i=this.normalizeURIList(m))}const a=Array.from(((d=n.clipboardData)==null?void 0:d.files)||[]);if(!r&&a.length>0){this.quill.uploader.upload(t,a);return}if(r&&a.length>0){const m=new DOMParser().parseFromString(r,"text/html");if(m.body.childElementCount===1&&((f=m.body.firstElementChild)==null?void 0:f.tagName)==="IMG"){this.quill.uploader.upload(t,a);return}}this.onPaste(t,{html:r,text:i})}onCopy(n){const t=this.quill.getText(n);return{html:this.quill.getSemanticHTML(n),text:t}}onPaste(n,t){let{text:r,html:i}=t;const a=this.quill.getFormat(n.index),s=this.convert({text:r,html:i},a);xU.log("onPaste",s,{text:r,html:i});const l=new Ht().retain(n.index).delete(n.length).concat(s);this.quill.updateContents(l,vt.sources.USER),this.quill.setSelection(l.length()-n.length,vt.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(n,t){const r=[],i=[];return this.matchers.forEach(a=>{const[s,l]=a;switch(s){case Node.TEXT_NODE:i.push(l);break;case Node.ELEMENT_NODE:r.push(l);break;default:Array.from(n.querySelectorAll(s)).forEach(u=>{if(t.has(u)){const d=t.get(u);d==null||d.push(l)}else t.set(u,[l])});break}}),[r,i]}}nt(M7,"DEFAULTS",{matchers:[]});function Cp(e,n,t,r){return r.query(n)?e.reduce((i,a)=>{if(!a.insert)return i;if(a.attributes&&a.attributes[n])return i.push(a);const s=t?{[n]:t}:{};return i.insert(a.insert,{...s,...a.attributes})},new Ht):e}function $g(e,n){let t="";for(let r=e.ops.length-1;r>=0&&t.length<n.length;--r){const i=e.ops[r];if(typeof i.insert!="string")break;t=i.insert+t}return t.slice(-1*n.length)===n}function Rf(e,n){if(!(e instanceof Element))return!1;const t=n.query(e);return t&&t.prototype instanceof el?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(e.tagName.toLowerCase())}function SU(e,n){return e.previousElementSibling&&e.nextElementSibling&&!Rf(e.previousElementSibling,n)&&!Rf(e.nextElementSibling,n)}const vy=new WeakMap;function F7(e){return e==null?!1:(vy.has(e)||(e.tagName==="PRE"?vy.set(e,!0):vy.set(e,F7(e.parentNode))),vy.get(e))}function rA(e,n,t,r,i){return n.nodeType===n.TEXT_NODE?r.reduce((a,s)=>s(n,a,e),new Ht):n.nodeType===n.ELEMENT_NODE?Array.from(n.childNodes||[]).reduce((a,s)=>{let l=rA(e,s,t,r,i);return s.nodeType===n.ELEMENT_NODE&&(l=t.reduce((u,d)=>d(s,u,e),l),l=(i.get(s)||[]).reduce((u,d)=>d(s,u,e),l)),a.concat(l)},new Ht):new Ht}function G5(e){return(n,t,r)=>Cp(t,e,!0,r)}function AU(e,n,t){const r=Lc.keys(e),i=Su.keys(e),a=sh.keys(e),s={};return r.concat(i).concat(a).forEach(l=>{let u=t.query(l,Wt.ATTRIBUTE);u!=null&&(s[u.attrName]=u.value(e),s[u.attrName])||(u=wU[l],u!=null&&(u.attrName===l||u.keyName===l)&&(s[u.attrName]=u.value(e)||void 0),u=L4[l],u!=null&&(u.attrName===l||u.keyName===l)&&(u=L4[l],s[u.attrName]=u.value(e)||void 0))}),Object.entries(s).reduce((l,u)=>{let[d,f]=u;return Cp(l,d,f,t)},n)}function CU(e,n,t){const r=t.query(e);if(r==null)return n;if(r.prototype instanceof el){const i={},a=r.value(e);if(a!=null)return i[r.blotName]=a,new Ht().insert(i,r.formats(e,t))}else if(r.prototype instanceof fg&&!$g(n,`
`)&&n.insert(`
`),"blotName"in r&&"formats"in r&&typeof r.formats=="function")return Cp(n,r.blotName,r.formats(e,t),t);return n}function kU(e,n){return $g(n,`
`)||n.insert(`
`),n}function EU(e,n,t){const r=t.query("code-block"),i=r&&"formats"in r&&typeof r.formats=="function"?r.formats(e,t):!0;return Cp(n,"code-block",i,t)}function _U(){return new Ht}function NU(e,n,t){const r=t.query(e);if(r==null||r.blotName!=="list"||!$g(n,`
`))return n;let i=-1,a=e.parentNode;for(;a!=null;)["OL","UL"].includes(a.tagName)&&(i+=1),a=a.parentNode;return i<=0?n:n.reduce((s,l)=>l.insert?l.attributes&&typeof l.attributes.indent=="number"?s.push(l):s.insert(l.insert,{indent:i,...l.attributes||{}}):s,new Ht)}function jU(e,n,t){const r=e;let i=r.tagName==="OL"?"ordered":"bullet";const a=r.getAttribute("data-checked");return a&&(i=a==="true"?"checked":"unchecked"),Cp(n,"list",i,t)}function R4(e,n,t){if(!$g(n,`
`)){if(Rf(e,t)&&(e.childNodes.length>0||e instanceof HTMLParagraphElement))return n.insert(`
`);if(n.length()>0&&e.nextSibling){let r=e.nextSibling;for(;r!=null;){if(Rf(r,t))return n.insert(`
`);const i=t.query(r);if(i&&i.prototype instanceof jl)return n.insert(`
`);r=r.firstChild}}}return n}function TU(e,n,t){var a;const r={},i=e.style||{};return i.fontStyle==="italic"&&(r.italic=!0),i.textDecoration==="underline"&&(r.underline=!0),i.textDecoration==="line-through"&&(r.strike=!0),((a=i.fontWeight)!=null&&a.startsWith("bold")||parseInt(i.fontWeight,10)>=700)&&(r.bold=!0),n=Object.entries(r).reduce((s,l)=>{let[u,d]=l;return Cp(s,u,d,t)},n),parseFloat(i.textIndent||0)>0?new Ht().insert("	").concat(n):n}function OU(e,n,t){var i,a;const r=((i=e.parentElement)==null?void 0:i.tagName)==="TABLE"?e.parentElement:(a=e.parentElement)==null?void 0:a.parentElement;if(r!=null){const l=Array.from(r.querySelectorAll("tr")).indexOf(e)+1;return Cp(n,"table",l,t)}return n}function DU(e,n,t){var i;let r=e.data;if(((i=e.parentElement)==null?void 0:i.tagName)==="O:P")return n.insert(r.trim());if(!F7(e)){if(r.trim().length===0&&r.includes(`
`)&&!SU(e,t))return n;r=r.replace(/[^\S\u00a0]/g," "),r=r.replace(/ {2,}/g," "),(e.previousSibling==null&&e.parentElement!=null&&Rf(e.parentElement,t)||e.previousSibling instanceof Element&&Rf(e.previousSibling,t))&&(r=r.replace(/^ /,"")),(e.nextSibling==null&&e.parentElement!=null&&Rf(e.parentElement,t)||e.nextSibling instanceof Element&&Rf(e.nextSibling,t))&&(r=r.replace(/ $/,"")),r=r.replaceAll(""," ")}return n.insert(r)}class P7 extends Cu{constructor(t,r){super(t,r);nt(this,"lastRecorded",0);nt(this,"ignoreChange",!1);nt(this,"stack",{undo:[],redo:[]});nt(this,"currentRange",null);this.quill.on(vt.events.EDITOR_CHANGE,(i,a,s,l)=>{i===vt.events.SELECTION_CHANGE?a&&l!==vt.sources.SILENT&&(this.currentRange=a):i===vt.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||l===vt.sources.USER?this.record(a,s):this.transform(a)),this.currentRange=xS(this.currentRange,a))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",i=>{i.inputType==="historyUndo"?(this.undo(),i.preventDefault()):i.inputType==="historyRedo"&&(this.redo(),i.preventDefault())})}change(t,r){if(this.stack[t].length===0)return;const i=this.stack[t].pop();if(!i)return;const a=this.quill.getContents(),s=i.delta.invert(a);this.stack[r].push({delta:s,range:xS(i.range,s)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(i.delta,vt.sources.USER),this.ignoreChange=!1,this.restoreSelection(i)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(t,r){if(t.ops.length===0)return;this.stack.redo=[];let i=t.invert(r),a=this.currentRange;const s=Date.now();if(this.lastRecorded+this.options.delay>s&&this.stack.undo.length>0){const l=this.stack.undo.pop();l&&(i=i.compose(l.delta),a=l.range)}else this.lastRecorded=s;i.length()!==0&&(this.stack.undo.push({delta:i,range:a}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(t){M4(this.stack.undo,t),M4(this.stack.redo,t)}undo(){this.change("undo","redo")}restoreSelection(t){if(t.range)this.quill.setSelection(t.range,vt.sources.USER);else{const r=LU(this.quill.scroll,t.delta);this.quill.setSelection(r,vt.sources.USER)}}}nt(P7,"DEFAULTS",{delay:1e3,maxStack:100,userOnly:!1});function M4(e,n){let t=n;for(let r=e.length-1;r>=0;r-=1){const i=e[r];e[r]={delta:t.transform(i.delta,!0),range:i.range&&xS(i.range,t)},t=i.delta.transform(t),e[r].delta.length()===0&&e.splice(r,1)}}function IU(e,n){const t=n.ops[n.ops.length-1];return t==null?!1:t.insert!=null?typeof t.insert=="string"&&t.insert.endsWith(`
`):t.attributes!=null?Object.keys(t.attributes).some(r=>e.query(r,Wt.BLOCK)!=null):!1}function LU(e,n){const t=n.reduce((i,a)=>i+(a.delete||0),0);let r=n.length()-t;return IU(e,n)&&(r-=1),r}function xS(e,n){if(!e)return e;const t=n.transformPosition(e.index),r=n.transformPosition(e.index+e.length);return{index:t,length:r-t}}class z7 extends Cu{constructor(n,t){super(n,t),n.root.addEventListener("drop",r=>{var s;r.preventDefault();let i=null;if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(r.clientX,r.clientY);else if(document.caretPositionFromPoint){const l=document.caretPositionFromPoint(r.clientX,r.clientY);i=document.createRange(),i.setStart(l.offsetNode,l.offset),i.setEnd(l.offsetNode,l.offset)}const a=i&&n.selection.normalizeNative(i);if(a){const l=n.selection.normalizedToRange(a);(s=r.dataTransfer)!=null&&s.files&&this.upload(l,r.dataTransfer.files)}})}upload(n,t){const r=[];Array.from(t).forEach(i=>{var a;i&&((a=this.options.mimetypes)!=null&&a.includes(i.type))&&r.push(i)}),r.length>0&&this.options.handler.call(this,n,r)}}z7.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(e,n){if(!this.quill.scroll.query("image"))return;const t=n.map(r=>new Promise(i=>{const a=new FileReader;a.onload=()=>{i(a.result)},a.readAsDataURL(r)}));Promise.all(t).then(r=>{const i=r.reduce((a,s)=>a.insert({image:s}),new Ht().retain(e.index).delete(e.length));this.quill.updateContents(i,zt.sources.USER),this.quill.setSelection(e.index+r.length,zt.sources.SILENT)})}};const RU=["insertText","insertReplacementText"];class MU extends Cu{constructor(n,t){super(n,t),n.root.addEventListener("beforeinput",r=>{this.handleBeforeInput(r)}),/Android/i.test(navigator.userAgent)||n.on(vt.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(n){nA({range:n,quill:this.quill})}replaceText(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(n.length===0)return!1;if(t){const r=this.quill.getFormat(n.index,1);this.deleteRange(n),this.quill.updateContents(new Ht().retain(n.index).insert(t,r),vt.sources.USER)}else this.deleteRange(n);return this.quill.setSelection(n.index+t.length,0,vt.sources.SILENT),!0}handleBeforeInput(n){if(this.quill.composition.isComposing||n.defaultPrevented||!RU.includes(n.inputType))return;const t=n.getTargetRanges?n.getTargetRanges()[0]:null;if(!t||t.collapsed===!0)return;const r=FU(n);if(r==null)return;const i=this.quill.selection.normalizeNative(t),a=i?this.quill.selection.normalizedToRange(i):null;a&&this.replaceText(a,r)&&n.preventDefault()}handleCompositionStart(){const n=this.quill.getSelection();n&&this.replaceText(n)}}function FU(e){var n;return typeof e.data=="string"?e.data:(n=e.dataTransfer)!=null&&n.types.includes("text/plain")?e.dataTransfer.getData("text/plain"):null}const PU=/Mac/i.test(navigator.platform),zU=100,qU=e=>!!(e.key==="ArrowLeft"||e.key==="ArrowRight"||e.key==="ArrowUp"||e.key==="ArrowDown"||e.key==="Home"||PU&&e.key==="a"&&e.ctrlKey===!0);class BU extends Cu{constructor(t,r){super(t,r);nt(this,"isListening",!1);nt(this,"selectionChangeDeadline",0);this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(t,r){let{line:i,event:a}=r;if(!(i instanceof yu)||!i.uiNode)return!0;const s=getComputedStyle(i.domNode).direction==="rtl";return s&&a.key!=="ArrowRight"||!s&&a.key!=="ArrowLeft"?!0:(this.quill.setSelection(t.index-1,t.length+(a.shiftKey?1:0),vt.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",t=>{!t.defaultPrevented&&qU(t)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+zU,this.isListening)return;this.isListening=!0;const t=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",t,{once:!0})}handleSelectionChange(){const t=document.getSelection();if(!t)return;const r=t.getRangeAt(0);if(r.collapsed!==!0||r.startOffset!==0)return;const i=this.quill.scroll.find(r.startContainer);if(!(i instanceof yu)||!i.uiNode)return;const a=document.createRange();a.setStartAfter(i.uiNode),a.setEndAfter(i.uiNode),t.removeAllRanges(),t.addRange(a)}}vt.register({"blots/block":bs,"blots/block/embed":jl,"blots/break":Au,"blots/container":Sp,"blots/cursor":J0,"blots/embed":K6,"blots/inline":Rc,"blots/scroll":E0,"blots/text":vu,"modules/clipboard":M7,"modules/history":P7,"modules/keyboard":yv,"modules/uploader":z7,"modules/input":MU,"modules/uiNode":BU});class $U extends Su{add(n,t){let r=0;if(t==="+1"||t==="-1"){const i=this.value(n)||0;r=t==="+1"?i+1:i-1}else typeof t=="number"&&(r=t);return r===0?(this.remove(n),!0):super.add(n,r.toString())}canAdd(n,t){return super.canAdd(n,t)||super.canAdd(n,parseInt(t,10))}value(n){return parseInt(super.value(n),10)||void 0}}const UU=new $U("indent","ql-indent",{scope:Wt.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class vS extends bs{}nt(vS,"blotName","blockquote"),nt(vS,"tagName","blockquote");class wS extends bs{static formats(n){return this.tagName.indexOf(n.tagName)+1}}nt(wS,"blotName","header"),nt(wS,"tagName",["H1","H2","H3","H4","H5","H6"]);class Ug extends Sp{}Ug.blotName="list-container";Ug.tagName="OL";class Hg extends bs{static create(n){const t=super.create();return t.setAttribute("data-list",n),t}static formats(n){return n.getAttribute("data-list")||void 0}static register(){vt.register(Ug)}constructor(n,t){super(n,t);const r=t.ownerDocument.createElement("span"),i=a=>{if(!n.isEnabled())return;const s=this.statics.formats(t,n);s==="checked"?(this.format("list","unchecked"),a.preventDefault()):s==="unchecked"&&(this.format("list","checked"),a.preventDefault())};r.addEventListener("mousedown",i),r.addEventListener("touchstart",i),this.attachUI(r)}format(n,t){n===this.statics.blotName&&t?this.domNode.setAttribute("data-list",t):super.format(n,t)}}Hg.blotName="list";Hg.tagName="LI";Ug.allowedChildren=[Hg];Hg.requiredContainer=Ug;class pg extends Rc{static create(){return super.create()}static formats(){return!0}optimize(n){super.optimize(n),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}nt(pg,"blotName","bold"),nt(pg,"tagName",["STRONG","B"]);class SS extends pg{}nt(SS,"blotName","italic"),nt(SS,"tagName",["EM","I"]);class Mf extends Rc{static create(n){const t=super.create(n);return t.setAttribute("href",this.sanitize(n)),t.setAttribute("rel","noopener noreferrer"),t.setAttribute("target","_blank"),t}static formats(n){return n.getAttribute("href")}static sanitize(n){return q7(n,this.PROTOCOL_WHITELIST)?n:this.SANITIZED_URL}format(n,t){n!==this.statics.blotName||!t?super.format(n,t):this.domNode.setAttribute("href",this.constructor.sanitize(t))}}nt(Mf,"blotName","link"),nt(Mf,"tagName","A"),nt(Mf,"SANITIZED_URL","about:blank"),nt(Mf,"PROTOCOL_WHITELIST",["http","https","mailto","tel","sms"]);function q7(e,n){const t=document.createElement("a");t.href=e;const r=t.href.slice(0,t.href.indexOf(":"));return n.indexOf(r)>-1}class AS extends Rc{static create(n){return n==="super"?document.createElement("sup"):n==="sub"?document.createElement("sub"):super.create(n)}static formats(n){if(n.tagName==="SUB")return"sub";if(n.tagName==="SUP")return"super"}}nt(AS,"blotName","script"),nt(AS,"tagName",["SUB","SUP"]);class CS extends pg{}nt(CS,"blotName","strike"),nt(CS,"tagName",["S","STRIKE"]);class kS extends Rc{}nt(kS,"blotName","underline"),nt(kS,"tagName","U");class Hy extends K6{static create(n){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const t=super.create(n);return typeof n=="string"&&(window.katex.render(n,t,{throwOnError:!1,errorColor:"#f00"}),t.setAttribute("data-value",n)),t}static value(n){return n.getAttribute("data-value")}html(){const{formula:n}=this.value();return`<span>${n}</span>`}}nt(Hy,"blotName","formula"),nt(Hy,"className","ql-formula"),nt(Hy,"tagName","SPAN");const F4=["alt","height","width"];var By;let HU=(By=class extends el{static create(n){const t=super.create(n);return typeof n=="string"&&t.setAttribute("src",this.sanitize(n)),t}static formats(n){return F4.reduce((t,r)=>(n.hasAttribute(r)&&(t[r]=n.getAttribute(r)),t),{})}static match(n){return/\.(jpe?g|gif|png)$/.test(n)||/^data:image\/.+;base64/.test(n)}static sanitize(n){return q7(n,["http","https","data"])?n:"//:0"}static value(n){return n.getAttribute("src")}format(n,t){F4.indexOf(n)>-1?t?this.domNode.setAttribute(n,t):this.domNode.removeAttribute(n):super.format(n,t)}},nt(By,"blotName","image"),nt(By,"tagName","IMG"),By);const P4=["height","width"];class Wy extends jl{static create(n){const t=super.create(n);return t.setAttribute("frameborder","0"),t.setAttribute("allowfullscreen","true"),t.setAttribute("src",this.sanitize(n)),t}static formats(n){return P4.reduce((t,r)=>(n.hasAttribute(r)&&(t[r]=n.getAttribute(r)),t),{})}static sanitize(n){return Mf.sanitize(n)}static value(n){return n.getAttribute("src")}format(n,t){P4.indexOf(n)>-1?t?this.domNode.setAttribute(n,t):this.domNode.removeAttribute(n):super.format(n,t)}html(){const{video:n}=this.value();return`<a href="${n}">${n}</a>`}}nt(Wy,"blotName","video"),nt(Wy,"className","ql-video"),nt(Wy,"tagName","IFRAME");const H1=new Su("code-token","hljs",{scope:Wt.INLINE});class Id extends Rc{static formats(n,t){for(;n!=null&&n!==t.domNode;){if(n.classList&&n.classList.contains($s.className))return super.formats(n,t);n=n.parentNode}}constructor(n,t,r){super(n,t,r),H1.add(this.domNode,r)}format(n,t){n!==Id.blotName?super.format(n,t):t?H1.add(this.domNode,t):(H1.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),H1.value(this.domNode)||this.unwrap()}}Id.blotName="code-token";Id.className="ql-token";class Al extends $s{static create(n){const t=super.create(n);return typeof n=="string"&&t.setAttribute("data-language",n),t}static formats(n){return n.getAttribute("data-language")||"plain"}static register(){}format(n,t){n===this.statics.blotName&&t?this.domNode.setAttribute("data-language",t):super.format(n,t)}replaceWith(n,t){return this.formatAt(0,this.length(),Id.blotName,!1),super.replaceWith(n,t)}}class G1 extends Ap{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(n,t){n===Al.blotName&&(this.forceNext=!0,this.children.forEach(r=>{r.format(n,t)}))}formatAt(n,t,r,i){r===Al.blotName&&(this.forceNext=!0),super.formatAt(n,t,r,i)}highlight(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const i=`${Array.from(this.domNode.childNodes).filter(s=>s!==this.uiNode).map(s=>s.textContent).join(`
`)}
`,a=Al.formats(this.children.head.domNode);if(t||this.forceNext||this.cachedText!==i){if(i.trim().length>0||this.cachedText==null){const s=this.children.reduce((u,d)=>u.concat(A7(d,!1)),new Ht),l=n(i,a);s.diff(l).reduce((u,d)=>{let{retain:f,attributes:m}=d;return f?(m&&Object.keys(m).forEach(b=>{[Al.blotName,Id.blotName].includes(b)&&this.formatAt(u,f,b,m[b])}),u+f):u},0)}this.cachedText=i,this.forceNext=!1}}html(n,t){const[r]=this.children.find(n);return`<pre data-language="${r?Al.formats(r.domNode):"plain"}">
${bv(this.code(n,t))}
</pre>`}optimize(n){if(super.optimize(n),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const t=Al.formats(this.children.head.domNode);t!==this.uiNode.value&&(this.uiNode.value=t)}}}G1.allowedChildren=[Al];Al.requiredContainer=G1;Al.allowedChildren=[Id,J0,vu,Au];const WU=(e,n,t)=>{if(typeof e.versionString=="string"){const r=e.versionString.split(".")[0];if(parseInt(r,10)>=11)return e.highlight(t,{language:n}).value}return e.highlight(n,t).value};class B7 extends Cu{static register(){vt.register(Id,!0),vt.register(Al,!0),vt.register(G1,!0)}constructor(n,t){if(super(n,t),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((r,i)=>{let{key:a}=i;return r[a]=!0,r},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(vt.events.SCROLL_BLOT_MOUNT,n=>{if(!(n instanceof G1))return;const t=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(r=>{let{key:i,label:a}=r;const s=t.ownerDocument.createElement("option");s.textContent=a,s.setAttribute("value",i),t.appendChild(s)}),t.addEventListener("change",()=>{n.format(Al.blotName,t.value),this.quill.root.focus(),this.highlight(n,!0)}),n.uiNode==null&&(n.attachUI(t),n.children.head&&(t.value=Al.formats(n.children.head.domNode)))})}initTimer(){let n=null;this.quill.on(vt.events.SCROLL_OPTIMIZE,()=>{n&&clearTimeout(n),n=setTimeout(()=>{this.highlight(),n=null},this.options.interval)})}highlight(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(vt.sources.USER);const r=this.quill.getSelection();(n==null?this.quill.scroll.descendants(G1):[n]).forEach(a=>{a.highlight(this.highlightBlot,t)}),this.quill.update(vt.sources.SILENT),r!=null&&this.quill.setSelection(r,vt.sources.SILENT)}highlightBlot(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(t=this.languages[t]?t:"plain",t==="plain")return bv(n).split(`
`).reduce((i,a,s)=>(s!==0&&i.insert(`
`,{[$s.blotName]:t}),i.insert(a)),new Ht);const r=this.quill.root.ownerDocument.createElement("div");return r.classList.add($s.className),r.innerHTML=WU(this.options.hljs,t,n),rA(this.quill.scroll,r,[(i,a)=>{const s=H1.value(i);return s?a.compose(new Ht().retain(a.length(),{[Id.blotName]:s})):a}],[(i,a)=>i.data.split(`
`).reduce((s,l,u)=>(u!==0&&s.insert(`
`,{[$s.blotName]:t}),s.insert(l)),a)],new WeakMap)}}B7.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};const ng=class ng extends bs{static create(n){const t=super.create();return n?t.setAttribute("data-row",n):t.setAttribute("data-row",iA()),t}static formats(n){if(n.hasAttribute("data-row"))return n.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(n,t){n===ng.blotName&&t?this.domNode.setAttribute("data-row",t):super.format(n,t)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}};nt(ng,"blotName","table"),nt(ng,"tagName","TD");let gu=ng;class Ld extends Sp{checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const n=this.children.head.formats(),t=this.children.tail.formats(),r=this.next.children.head.formats(),i=this.next.children.tail.formats();return n.table===t.table&&n.table===r.table&&n.table===i.table}return!1}optimize(n){super.optimize(n),this.children.forEach(t=>{if(t.next==null)return;const r=t.formats(),i=t.next.formats();if(r.table!==i.table){const a=this.splitAfter(t);a&&a.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}nt(Ld,"blotName","table-row"),nt(Ld,"tagName","TR");class Ac extends Sp{}nt(Ac,"blotName","table-body"),nt(Ac,"tagName","TBODY");class tm extends Sp{balanceCells(){const n=this.descendants(Ld),t=n.reduce((r,i)=>Math.max(i.children.length,r),0);n.forEach(r=>{new Array(t-r.children.length).fill(0).forEach(()=>{let i;r.children.head!=null&&(i=gu.formats(r.children.head.domNode));const a=this.scroll.create(gu.blotName,i);r.appendChild(a),a.optimize()})})}cells(n){return this.rows().map(t=>t.children.at(n))}deleteColumn(n){const[t]=this.descendant(Ac);t==null||t.children.head==null||t.children.forEach(r=>{const i=r.children.at(n);i!=null&&i.remove()})}insertColumn(n){const[t]=this.descendant(Ac);t==null||t.children.head==null||t.children.forEach(r=>{const i=r.children.at(n),a=gu.formats(r.children.head.domNode),s=this.scroll.create(gu.blotName,a);r.insertBefore(s,i)})}insertRow(n){const[t]=this.descendant(Ac);if(t==null||t.children.head==null)return;const r=iA(),i=this.scroll.create(Ld.blotName);t.children.head.children.forEach(()=>{const s=this.scroll.create(gu.blotName,r);i.appendChild(s)});const a=t.children.at(n);t.insertBefore(i,a)}rows(){const n=this.children.head;return n==null?[]:n.children.map(t=>t)}}nt(tm,"blotName","table-container"),nt(tm,"tagName","TABLE");tm.allowedChildren=[Ac];Ac.requiredContainer=tm;Ac.allowedChildren=[Ld];Ld.requiredContainer=Ac;Ld.allowedChildren=[gu];gu.requiredContainer=Ld;function iA(){return`row-${Math.random().toString(36).slice(2,6)}`}class VU extends Cu{static register(){vt.register(gu),vt.register(Ld),vt.register(Ac),vt.register(tm)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(tm).forEach(n=>{n.balanceCells()})}deleteColumn(){const[n,,t]=this.getTable();t!=null&&(n.deleteColumn(t.cellOffset()),this.quill.update(vt.sources.USER))}deleteRow(){const[,n]=this.getTable();n!=null&&(n.remove(),this.quill.update(vt.sources.USER))}deleteTable(){const[n]=this.getTable();if(n==null)return;const t=n.offset();n.remove(),this.quill.update(vt.sources.USER),this.quill.setSelection(t,vt.sources.SILENT)}getTable(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(n==null)return[null,null,null,-1];const[t,r]=this.quill.getLine(n.index);if(t==null||t.statics.blotName!==gu.blotName)return[null,null,null,-1];const i=t.parent;return[i.parent.parent,i,t,r]}insertColumn(n){const t=this.quill.getSelection();if(!t)return;const[r,i,a]=this.getTable(t);if(a==null)return;const s=a.cellOffset();r.insertColumn(s+n),this.quill.update(vt.sources.USER);let l=i.rowOffset();n===0&&(l+=1),this.quill.setSelection(t.index+l,t.length,vt.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(n){const t=this.quill.getSelection();if(!t)return;const[r,i,a]=this.getTable(t);if(a==null)return;const s=i.rowOffset();r.insertRow(s+n),this.quill.update(vt.sources.USER),n>0?this.quill.setSelection(t,vt.sources.SILENT):this.quill.setSelection(t.index+i.children.length,t.length,vt.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(n,t){const r=this.quill.getSelection();if(r==null)return;const i=new Array(n).fill(0).reduce(a=>{const s=new Array(t).fill(`
`).join("");return a.insert(s,{table:iA()})},new Ht().retain(r.index));this.quill.updateContents(i,vt.sources.USER),this.quill.setSelection(r.index,vt.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(vt.events.SCROLL_OPTIMIZE,n=>{n.some(t=>["TD","TR","TBODY","TABLE"].includes(t.target.tagName)?(this.quill.once(vt.events.TEXT_CHANGE,(r,i,a)=>{a===vt.sources.USER&&this.balanceTables()}),!0):!1)})}}const z4=$d("quill:toolbar");class aA extends Cu{constructor(n,t){var r,i;if(super(n,t),Array.isArray(this.options.container)){const a=document.createElement("div");a.setAttribute("role","toolbar"),YU(a,this.options.container),(i=(r=n.container)==null?void 0:r.parentNode)==null||i.insertBefore(a,n.container),this.container=a}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){z4.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(a=>{var l;const s=(l=this.options.handlers)==null?void 0:l[a];s&&this.addHandler(a,s)}),Array.from(this.container.querySelectorAll("button, select")).forEach(a=>{this.attach(a)}),this.quill.on(vt.events.EDITOR_CHANGE,()=>{const[a]=this.quill.selection.getRange();this.update(a)})}addHandler(n,t){this.handlers[n]=t}attach(n){let t=Array.from(n.classList).find(i=>i.indexOf("ql-")===0);if(!t)return;if(t=t.slice(3),n.tagName==="BUTTON"&&n.setAttribute("type","button"),this.handlers[t]==null&&this.quill.scroll.query(t)==null){z4.warn("ignoring attaching to nonexistent format",t,n);return}const r=n.tagName==="SELECT"?"change":"click";n.addEventListener(r,i=>{let a;if(n.tagName==="SELECT"){if(n.selectedIndex<0)return;const l=n.options[n.selectedIndex];l.hasAttribute("selected")?a=!1:a=l.value||!1}else n.classList.contains("ql-active")?a=!1:a=n.value||!n.hasAttribute("value"),i.preventDefault();this.quill.focus();const[s]=this.quill.selection.getRange();if(this.handlers[t]!=null)this.handlers[t].call(this,a);else if(this.quill.scroll.query(t).prototype instanceof el){if(a=prompt(`Enter ${t}`),!a)return;this.quill.updateContents(new Ht().retain(s.index).delete(s.length).insert({[t]:a}),vt.sources.USER)}else this.quill.format(t,a,vt.sources.USER);this.update(s)}),this.controls.push([t,n])}update(n){const t=n==null?{}:this.quill.getFormat(n);this.controls.forEach(r=>{const[i,a]=r;if(a.tagName==="SELECT"){let s=null;if(n==null)s=null;else if(t[i]==null)s=a.querySelector("option[selected]");else if(!Array.isArray(t[i])){let l=t[i];typeof l=="string"&&(l=l.replace(/"/g,'\\"')),s=a.querySelector(`option[value="${l}"]`)}s==null?(a.value="",a.selectedIndex=-1):s.selected=!0}else if(n==null)a.classList.remove("ql-active"),a.setAttribute("aria-pressed","false");else if(a.hasAttribute("value")){const s=t[i],l=s===a.getAttribute("value")||s!=null&&s.toString()===a.getAttribute("value")||s==null&&!a.getAttribute("value");a.classList.toggle("ql-active",l),a.setAttribute("aria-pressed",l.toString())}else{const s=t[i]!=null;a.classList.toggle("ql-active",s),a.setAttribute("aria-pressed",s.toString())}})}}aA.DEFAULTS={};function q4(e,n,t){const r=document.createElement("button");r.setAttribute("type","button"),r.classList.add(`ql-${n}`),r.setAttribute("aria-pressed","false"),t!=null?(r.value=t,r.setAttribute("aria-label",`${n}: ${t}`)):r.setAttribute("aria-label",n),e.appendChild(r)}function YU(e,n){Array.isArray(n[0])||(n=[n]),n.forEach(t=>{const r=document.createElement("span");r.classList.add("ql-formats"),t.forEach(i=>{if(typeof i=="string")q4(r,i);else{const a=Object.keys(i)[0],s=i[a];Array.isArray(s)?GU(r,a,s):q4(r,a,s)}}),e.appendChild(r)})}function GU(e,n,t){const r=document.createElement("select");r.classList.add(`ql-${n}`),t.forEach(i=>{const a=document.createElement("option");i!==!1?a.setAttribute("value",String(i)):a.setAttribute("selected","selected"),r.appendChild(a)}),e.appendChild(r)}aA.DEFAULTS={container:null,handlers:{clean(){const e=this.quill.getSelection();if(e!=null)if(e.length===0){const n=this.quill.getFormat();Object.keys(n).forEach(t=>{this.quill.scroll.query(t,Wt.INLINE)!=null&&this.quill.format(t,!1,vt.sources.USER)})}else this.quill.removeFormat(e.index,e.length,vt.sources.USER)},direction(e){const{align:n}=this.quill.getFormat();e==="rtl"&&n==null?this.quill.format("align","right",vt.sources.USER):!e&&n==="right"&&this.quill.format("align",!1,vt.sources.USER),this.quill.format("direction",e,vt.sources.USER)},indent(e){const n=this.quill.getSelection(),t=this.quill.getFormat(n),r=parseInt(t.indent||0,10);if(e==="+1"||e==="-1"){let i=e==="+1"?1:-1;t.direction==="rtl"&&(i*=-1),this.quill.format("indent",r+i,vt.sources.USER)}},link(e){e===!0&&(e=prompt("Enter link URL:")),this.quill.format("link",e,vt.sources.USER)},list(e){const n=this.quill.getSelection(),t=this.quill.getFormat(n);e==="check"?t.list==="checked"||t.list==="unchecked"?this.quill.format("list",!1,vt.sources.USER):this.quill.format("list","unchecked",vt.sources.USER):this.quill.format("list",e,vt.sources.USER)}}};const QU='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',KU='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',XU='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',ZU='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',JU='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',eH='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',tH='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',nH='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',B4='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',rH='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',iH='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',aH='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',sH='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',oH='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',lH='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',uH='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',cH='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',dH='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',fH='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',hH='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',pH='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',mH='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',gH='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',bH='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',yH='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',xH='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',vH='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',wH='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',SH='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',AH='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',CH='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',kH='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',EH='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',mg={align:{"":QU,center:KU,right:XU,justify:ZU},background:JU,blockquote:eH,bold:tH,clean:nH,code:B4,"code-block":B4,color:rH,direction:{"":iH,rtl:aH},formula:sH,header:{1:oH,2:lH,3:uH,4:cH,5:dH,6:fH},italic:hH,image:pH,indent:{"+1":mH,"-1":gH},link:bH,list:{bullet:yH,check:xH,ordered:vH},script:{sub:wH,super:SH},strike:AH,table:CH,underline:kH,video:EH},_H='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let $4=0;function U4(e,n){e.setAttribute(n,`${e.getAttribute(n)!=="true"}`)}class xv{constructor(n){this.select=n,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",t=>{switch(t.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),t.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),U4(this.label,"aria-expanded"),U4(this.options,"aria-hidden")}buildItem(n){const t=document.createElement("span");t.tabIndex="0",t.setAttribute("role","button"),t.classList.add("ql-picker-item");const r=n.getAttribute("value");return r&&t.setAttribute("data-value",r),n.textContent&&t.setAttribute("data-label",n.textContent),t.addEventListener("click",()=>{this.selectItem(t,!0)}),t.addEventListener("keydown",i=>{switch(i.key){case"Enter":this.selectItem(t,!0),i.preventDefault();break;case"Escape":this.escape(),i.preventDefault();break}}),t}buildLabel(){const n=document.createElement("span");return n.classList.add("ql-picker-label"),n.innerHTML=_H,n.tabIndex="0",n.setAttribute("role","button"),n.setAttribute("aria-expanded","false"),this.container.appendChild(n),n}buildOptions(){const n=document.createElement("span");n.classList.add("ql-picker-options"),n.setAttribute("aria-hidden","true"),n.tabIndex="-1",n.id=`ql-picker-options-${$4}`,$4+=1,this.label.setAttribute("aria-controls",n.id),this.options=n,Array.from(this.select.options).forEach(t=>{const r=this.buildItem(t);n.appendChild(r),t.selected===!0&&this.selectItem(r)}),this.container.appendChild(n)}buildPicker(){Array.from(this.select.attributes).forEach(n=>{this.container.setAttribute(n.name,n.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=this.container.querySelector(".ql-selected");n!==r&&(r!=null&&r.classList.remove("ql-selected"),n!=null&&(n.classList.add("ql-selected"),this.select.selectedIndex=Array.from(n.parentNode.children).indexOf(n),n.hasAttribute("data-value")?this.label.setAttribute("data-value",n.getAttribute("data-value")):this.label.removeAttribute("data-value"),n.hasAttribute("data-label")?this.label.setAttribute("data-label",n.getAttribute("data-label")):this.label.removeAttribute("data-label"),t&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let n;if(this.select.selectedIndex>-1){const r=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];n=this.select.options[this.select.selectedIndex],this.selectItem(r)}else this.selectItem(null);const t=n!=null&&n!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",t)}}class $7 extends xv{constructor(n,t){super(n),this.label.innerHTML=t,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(r=>{r.classList.add("ql-primary")})}buildItem(n){const t=super.buildItem(n);return t.style.backgroundColor=n.getAttribute("value")||"",t}selectItem(n,t){super.selectItem(n,t);const r=this.label.querySelector(".ql-color-label"),i=n&&n.getAttribute("data-value")||"";r&&(r.tagName==="line"?r.style.stroke=i:r.style.fill=i)}}class U7 extends xv{constructor(n,t){super(n),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(r=>{r.innerHTML=t[r.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(n,t){super.selectItem(n,t);const r=n||this.defaultItem;if(r!=null){if(this.label.innerHTML===r.innerHTML)return;this.label.innerHTML=r.innerHTML}}}const NH=e=>{const{overflowY:n}=getComputedStyle(e,null);return n!=="visible"&&n!=="clip"};class H7{constructor(n,t){this.quill=n,this.boundsContainer=t||document.body,this.root=n.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,NH(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(n){const t=n.left+n.width/2-this.root.offsetWidth/2,r=n.bottom+this.quill.root.scrollTop;this.root.style.left=`${t}px`,this.root.style.top=`${r}px`,this.root.classList.remove("ql-flip");const i=this.boundsContainer.getBoundingClientRect(),a=this.root.getBoundingClientRect();let s=0;if(a.right>i.right&&(s=i.right-a.right,this.root.style.left=`${t+s}px`),a.left<i.left&&(s=i.left-a.left,this.root.style.left=`${t+s}px`),a.bottom>i.bottom){const l=a.bottom-a.top,u=n.bottom-n.top+l;this.root.style.top=`${r-u}px`,this.root.classList.add("ql-flip")}return s}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const jH=[!1,"center","right","justify"],TH=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],OH=[!1,"serif","monospace"],DH=["1","2","3",!1],IH=["small",!1,"large","huge"];class Wg extends em{constructor(n,t){super(n,t);const r=i=>{if(!document.body.contains(n.root)){document.body.removeEventListener("click",r);return}this.tooltip!=null&&!this.tooltip.root.contains(i.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(a=>{a.container.contains(i.target)||a.close()})};n.emitter.listenDOM("click",document.body,r)}addModule(n){const t=super.addModule(n);return n==="toolbar"&&this.extendToolbar(t),t}buildButtons(n,t){Array.from(n).forEach(r=>{(r.getAttribute("class")||"").split(/\s+/).forEach(a=>{if(a.startsWith("ql-")&&(a=a.slice(3),t[a]!=null))if(a==="direction")r.innerHTML=t[a][""]+t[a].rtl;else if(typeof t[a]=="string")r.innerHTML=t[a];else{const s=r.value||"";s!=null&&t[a][s]&&(r.innerHTML=t[a][s])}})})}buildPickers(n,t){this.pickers=Array.from(n).map(i=>{if(i.classList.contains("ql-align")&&(i.querySelector("option")==null&&b1(i,jH),typeof t.align=="object"))return new U7(i,t.align);if(i.classList.contains("ql-background")||i.classList.contains("ql-color")){const a=i.classList.contains("ql-background")?"background":"color";return i.querySelector("option")==null&&b1(i,TH,a==="background"?"#ffffff":"#000000"),new $7(i,t[a])}return i.querySelector("option")==null&&(i.classList.contains("ql-font")?b1(i,OH):i.classList.contains("ql-header")?b1(i,DH):i.classList.contains("ql-size")&&b1(i,IH)),new xv(i)});const r=()=>{this.pickers.forEach(i=>{i.update()})};this.quill.on(zt.events.EDITOR_CHANGE,r)}}Wg.DEFAULTS=Wf({},em.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let e=this.container.querySelector("input.ql-image[type=file]");e==null&&(e=document.createElement("input"),e.setAttribute("type","file"),e.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),e.classList.add("ql-image"),e.addEventListener("change",()=>{const n=this.quill.getSelection(!0);this.quill.uploader.upload(n,e.files),e.value=""}),this.container.appendChild(e)),e.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class W7 extends H7{constructor(n,t){super(n,t),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",n=>{n.key==="Enter"?(this.save(),n.preventDefault()):n.key==="Escape"&&(this.cancel(),n.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;t!=null?this.textbox.value=t:n!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const r=this.quill.getBounds(this.quill.selection.savedRange);r!=null&&this.position(r),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${n}`)||""),this.root.setAttribute("data-mode",n)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:n}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:t}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",n,zt.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",n,zt.sources.USER)),this.quill.root.scrollTop=t;break}case"video":n=LH(n);case"formula":{if(!n)break;const t=this.quill.getSelection(!0);if(t!=null){const r=t.index+t.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),n,zt.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(r+1," ",zt.sources.USER),this.quill.setSelection(r+2,zt.sources.USER)}break}}this.textbox.value="",this.hide()}}function LH(e){let n=e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return n?`${n[1]||"https"}://www.youtube.com/embed/${n[2]}?showinfo=0`:(n=e.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${n[1]||"https"}://player.vimeo.com/video/${n[2]}/`:e}function b1(e,n){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;n.forEach(r=>{const i=document.createElement("option");r===t?i.setAttribute("selected","selected"):i.setAttribute("value",String(r)),e.appendChild(i)})}const RH=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class V7 extends W7{constructor(n,t){super(n,t),this.quill.on(zt.events.EDITOR_CHANGE,(r,i,a,s)=>{if(r===zt.events.SELECTION_CHANGE)if(i!=null&&i.length>0&&s===zt.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const l=this.quill.getLines(i.index,i.length);if(l.length===1){const u=this.quill.getBounds(i);u!=null&&this.position(u)}else{const u=l[l.length-1],d=this.quill.getIndex(u),f=Math.min(u.length()-1,i.index+i.length-d),m=this.quill.getBounds(new lp(d,f));m!=null&&this.position(m)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(zt.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const n=this.quill.getSelection();if(n!=null){const t=this.quill.getBounds(n);t!=null&&this.position(t)}},1)})}cancel(){this.show()}position(n){const t=super.position(n),r=this.root.querySelector(".ql-tooltip-arrow");return r.style.marginLeft="",t!==0&&(r.style.marginLeft=`${-1*t-r.offsetWidth/2}px`),t}}nt(V7,"TEMPLATE",['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""));class Y7 extends Wg{constructor(n,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=RH),super(n,t),this.quill.container.classList.add("ql-bubble")}extendToolbar(n){this.tooltip=new V7(this.quill,this.options.bounds),n.container!=null&&(this.tooltip.root.appendChild(n.container),this.buildButtons(n.container.querySelectorAll("button"),mg),this.buildPickers(n.container.querySelectorAll("select"),mg))}}Y7.DEFAULTS=Wf({},Wg.DEFAULTS,{modules:{toolbar:{handlers:{link(e){e?this.quill.theme.tooltip.edit():this.quill.format("link",!1,vt.sources.USER)}}}}});const MH=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class G7 extends W7{constructor(){super(...arguments);nt(this,"preview",this.root.querySelector("a.ql-preview"))}listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",t=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),t.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",t=>{if(this.linkRange!=null){const r=this.linkRange;this.restoreFocus(),this.quill.formatText(r,"link",!1,zt.sources.USER),delete this.linkRange}t.preventDefault(),this.hide()}),this.quill.on(zt.events.SELECTION_CHANGE,(t,r,i)=>{if(t!=null){if(t.length===0&&i===zt.sources.USER){const[a,s]=this.quill.scroll.descendant(Mf,t.index);if(a!=null){this.linkRange=new lp(t.index-s,a.length());const l=Mf.formats(a.domNode);this.preview.textContent=l,this.preview.setAttribute("href",l),this.show();const u=this.quill.getBounds(this.linkRange);u!=null&&this.position(u);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}nt(G7,"TEMPLATE",['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""));class Q7 extends Wg{constructor(n,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=MH),super(n,t),this.quill.container.classList.add("ql-snow")}extendToolbar(n){n.container!=null&&(n.container.classList.add("ql-snow"),this.buildButtons(n.container.querySelectorAll("button"),mg),this.buildPickers(n.container.querySelectorAll("select"),mg),this.tooltip=new G7(this.quill,this.options.bounds),n.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(t,r)=>{n.handlers.link.call(n,!r.format.link)}))}}Q7.DEFAULTS=Wf({},Wg.DEFAULTS,{modules:{toolbar:{handlers:{link(e){if(e){const n=this.quill.getSelection();if(n==null||n.length===0)return;let t=this.quill.getText(n);/^\S+@\S+\.\S+$/.test(t)&&t.indexOf("mailto:")!==0&&(t=`mailto:${t}`);const{tooltip:r}=this.quill.theme;r.edit("link",t)}else this.quill.format("link",!1,vt.sources.USER)}}}}});vt.register({"attributors/attribute/direction":N7,"attributors/class/align":k7,"attributors/class/background":J$,"attributors/class/color":Z$,"attributors/class/direction":j7,"attributors/class/font":D7,"attributors/class/size":L7,"attributors/style/align":E7,"attributors/style/background":J6,"attributors/style/color":Z6,"attributors/style/direction":T7,"attributors/style/font":I7,"attributors/style/size":R7},!0);vt.register({"formats/align":k7,"formats/direction":j7,"formats/indent":UU,"formats/background":J6,"formats/color":Z6,"formats/font":D7,"formats/size":L7,"formats/blockquote":vS,"formats/code-block":$s,"formats/header":wS,"formats/list":Hg,"formats/bold":pg,"formats/code":eA,"formats/italic":SS,"formats/link":Mf,"formats/script":AS,"formats/strike":CS,"formats/underline":kS,"formats/formula":Hy,"formats/image":HU,"formats/video":Wy,"modules/syntax":B7,"modules/table":VU,"modules/toolbar":aA,"themes/bubble":Y7,"themes/snow":Q7,"ui/icons":mg,"ui/picker":xv,"ui/icon-picker":U7,"ui/color-picker":$7,"ui/tooltip":H7},!0);class vv extends st.Component{constructor(n){super(n),this.editingAreaRef=X.createRef(),this.containerRef=X.createRef(),this.dirtyProps=["modules","formats","bounds","theme","children"],this.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],this.state={generation:0},this.selection=null,this.onEditorChange=(r,i,a,s)=>{var l,u;r==="text-change"?(l=this.onEditorChangeText)==null||l.call(this,this.editor.root.innerHTML,i,s,this.unprivilegedEditor):r==="selection-change"&&((u=this.onEditorChangeSelection)==null||u.call(this,i,s,this.unprivilegedEditor))};const t=this.isControlled()?n.value:n.defaultValue;this.value=t??""}validateProps(n){if(st.Children.count(n.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(st.Children.count(n.children)){const t=st.Children.only(n.children);if((t==null?void 0:t.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&n.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")}shouldComponentUpdate(n,t){if(this.validateProps(n),!this.editor||this.state.generation!==t.generation)return!0;if("value"in n){const r=this.getEditorContents(),i=n.value??"";this.isEqualValue(i,r)||this.setEditorContents(this.editor,i)}return n.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,n.readOnly),[...this.cleanProps,...this.dirtyProps].some(r=>!Df(n[r],this.props[r]))}shouldComponentRegenerate(n){return this.dirtyProps.some(t=>!Df(n[t],this.props[t]))}componentDidMount(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())}componentWillUnmount(){this.destroyEditor()}componentDidUpdate(n,t){if(this.editor&&this.shouldComponentRegenerate(n)){const r=this.editor.getContents(),i=this.editor.getSelection();this.regenerationSnapshot={delta:r,selection:i},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==t.generation){const{delta:r,selection:i}=this.regenerationSnapshot;delete this.regenerationSnapshot,this.instantiateEditor();const a=this.editor;a.setContents(r),H4(()=>this.setEditorSelection(a,i))}}instantiateEditor(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())}destroyEditor(){var r,i;if(!this.editor)return;this.unhookEditor(this.editor);const n=(r=this.props.modules)==null?void 0:r.toolbar;if(!(typeof n=="object"&&n&&"container"in n&&typeof n.container=="string"||typeof n=="string")){const a=(i=this.containerRef.current)==null?void 0:i.querySelector(".ql-toolbar");a&&a.remove()}delete this.editor}isControlled(){return"value"in this.props}getEditorConfig(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,tabIndex:this.props.tabIndex,theme:this.props.theme}}getEditor(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor}createEditor(n,t){const r=new vt(n,t);return t.tabIndex!=null&&this.setEditorTabIndex(r,t.tabIndex),this.hookEditor(r),r}hookEditor(n){this.unprivilegedEditor=this.makeUnprivilegedEditor(n),n.on("editor-change",this.onEditorChange)}unhookEditor(n){n.off("editor-change",this.onEditorChange)}getEditorContents(){return this.value}getEditorSelection(){return this.selection}isDelta(n){return n&&n.ops}isEqualValue(n,t){return this.isDelta(n)&&this.isDelta(t)?Df(n.ops,t.ops):Df(n,t)}setEditorContents(n,t){this.value=t;const r=this.getEditorSelection();typeof t=="string"?n.setContents(n.clipboard.convert({html:t})):n.setContents(t),H4(()=>this.setEditorSelection(n,r))}setEditorSelection(n,t){if(this.selection=t,t){const r=n.getLength();t.index=Math.max(0,Math.min(t.index,r-1)),t.length=Math.max(0,Math.min(t.length,r-1-t.index)),n.setSelection(t)}}setEditorTabIndex(n,t){var r;(r=n==null?void 0:n.scroll)!=null&&r.domNode&&(n.scroll.domNode.tabIndex=t)}setEditorReadOnly(n,t){t?n.disable():n.enable()}makeUnprivilegedEditor(n){const t=n;return{getHTML:()=>t.root.innerHTML,getSemanticHTML:t.getSemanticHTML.bind(t),getLength:t.getLength.bind(t),getText:t.getText.bind(t),getContents:t.getContents.bind(t),getSelection:t.getSelection.bind(t),getBounds:t.getBounds.bind(t)}}getEditingArea(){const n=this.editingAreaRef.current;if(!n)throw new Error("Cannot find element for editing area");if(n.nodeType===3)throw new Error("Editing area cannot be a text node");return n}renderEditingArea(){const{children:n,preserveWhitespace:t}=this.props,{generation:r}=this.state,i={key:r,ref:this.editingAreaRef};return st.Children.count(n)?st.cloneElement(st.Children.only(n),i):t?st.createElement("pre",{...i}):st.createElement("div",{...i})}render(){return st.createElement("div",{ref:this.containerRef,id:this.props.id,style:this.props.style,key:this.state.generation,className:`quill ${this.props.className??""}`,onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())}onEditorChangeText(n,t,r,i){var s,l;if(!this.editor)return;const a=this.isDelta(this.value)?i.getContents():i.getHTML();a!==this.getEditorContents()&&(this.lastDeltaChangeSet=t,this.value=a,(l=(s=this.props).onChange)==null||l.call(s,n,t,r,i))}onEditorChangeSelection(n,t,r){var l,u,d,f,m,b;if(!this.editor)return;const i=this.getEditorSelection(),a=!i&&n,s=i&&!n;Df(n,i)||(this.selection=n,(u=(l=this.props).onChangeSelection)==null||u.call(l,n,t,r),a?(f=(d=this.props).onFocus)==null||f.call(d,n,t,r):s&&((b=(m=this.props).onBlur)==null||b.call(m,i,t,r)))}focus(){this.editor&&this.editor.focus()}blur(){this.editor&&(this.selection=null,this.editor.blur())}}vv.displayName="React Quill";vv.Quill=vt;vv.defaultProps={theme:"snow",modules:{},readOnly:!1};function H4(e){Promise.resolve().then(e)}const FH=({content:e,onChange:n})=>{const t=a=>{n(a)},r={toolbar:[[{header:[1,2,3,!1]}],["bold","italic"],["blockquote",{list:"ordered"},{list:"bullet"}],["link"],["clean"]]},i=["header","bold","italic","blockquote","list","link"];return h.jsx(vv,{value:e,onChange:t,modules:r,formats:i,theme:"snow",placeholder:"Start writing...",style:{backgroundColor:"white",borderRadius:"4px",minHeight:"150px"}})},PH=(e,n={enabled:!0,priority:"low"})=>{const t=X.useCallback(r=>{!n.enabled||r.length===0||r.forEach((i,a)=>{if(!i||i.startsWith("data:"))return;const s=new Image;"loading"in s&&(s.loading="lazy");const l=n.priority==="low"?a*100:0;setTimeout(()=>{s.src=i,s.onload=()=>{console.log(` Preloaded image: ${i.substring(0,50)}...`)},s.onerror=u=>{console.error(` Failed to preload image: ${i}`,u),console.error("Image details:",{url:i,naturalWidth:s.naturalWidth,naturalHeight:s.naturalHeight,complete:s.complete})}},l)})},[n.enabled,n.priority]);return X.useEffect(()=>{t(e)},[e,t]),{preloadImages:t}},K7=(e,n,t=!0)=>{const{preloadImages:r}=PH([],{enabled:t,priority:"low"});X.useEffect(()=>{var s,l;if(!t||!e.length)return;const i=[];if(n>0){const u=e[n-1];u!=null&&u.images&&i.push(...u.images.map(d=>d.url)),(s=u==null?void 0:u.subsections)==null||s.forEach(d=>{var f;d.images&&i.push(...d.images.map(m=>m.url)),(f=d==null?void 0:d.subSubsections)==null||f.forEach(m=>{m.images&&i.push(...m.images.map(b=>b.url))})})}if(n<e.length-1){const u=e[n+1];u!=null&&u.images&&i.push(...u.images.map(d=>d.url)),(l=u==null?void 0:u.subsections)==null||l.forEach(d=>{var f;d.images&&i.push(...d.images.map(m=>m.url)),(f=d==null?void 0:d.subSubsections)==null||f.forEach(m=>{m.images&&i.push(...m.images.map(b=>b.url))})})}const a=Array.from(new Set(i.filter(Boolean)));a.length>0&&(console.log(`Preloading ${a.length} images from adjacent sections`),r(a))},[e,n,t,r])},zH=({value:e,onChange:n,disabled:t=!1})=>{const[r,i]=X.useState([]),[a,s]=X.useState(!0),{userDetails:l}=zi();X.useEffect(()=>{if(console.log("User Details in CourseDropdown:",l),l!=null&&l.classes){const d=Object.entries(l.classes).filter(([f,m])=>m.isCourseAdmin||l.isSuperAdmin).map(([f,m])=>({id:f,number:m.number,title:m.title,isCourseAdmin:m.isCourseAdmin}));console.log("Filtered Courses for Dropdown:",d),i(d)}else i([]);s(!1)},[l]);const u=r.some(d=>d.id===e);return a?h.jsx(de,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:h.jsx(Zr,{})}):h.jsx(cm,{value:u?e:"",onChange:n,courses:r,label:"Select Course",placeholder:"Choose a course",helperText:!u&&e!==""?"Invalid course selected":"",error:!u&&e!=="",disabled:t,loading:a,showNumber:!0,showTitle:!0,showAdminBadge:!1})};function Mt(e){const n=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&n==="[object Date]"?new e.constructor(+e):typeof e=="number"||n==="[object Number]"||typeof e=="string"||n==="[object String]"?new Date(e):new Date(NaN)}function Ir(e,n){return e instanceof Date?new e.constructor(n):new Date(n)}function xu(e,n){const t=Mt(e);return isNaN(n)?Ir(e,NaN):(n&&t.setDate(t.getDate()+n),t)}function wu(e,n){const t=Mt(e);if(isNaN(n))return Ir(e,NaN);if(!n)return t;const r=t.getDate(),i=Ir(e,t.getTime());i.setMonth(t.getMonth()+n+1,0);const a=i.getDate();return r>=a?i:(t.setFullYear(i.getFullYear(),i.getMonth(),r),t)}function sA(e,n){const t=+Mt(e);return Ir(e,t+n)}const X7=6048e5,qH=864e5,wv=6e4,Sv=36e5,BH=1e3;function $H(e,n){return sA(e,n*Sv)}let UH={};function kp(){return UH}function Rd(e,n){var l,u,d,f;const t=kp(),r=(n==null?void 0:n.weekStartsOn)??((u=(l=n==null?void 0:n.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??t.weekStartsOn??((f=(d=t.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,i=Mt(e),a=i.getDay(),s=(a<r?7:0)+a-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function nm(e){return Rd(e,{weekStartsOn:1})}function Z7(e){const n=Mt(e),t=n.getFullYear(),r=Ir(e,0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);const i=nm(r),a=Ir(e,0);a.setFullYear(t,0,4),a.setHours(0,0,0,0);const s=nm(a);return n.getTime()>=i.getTime()?t+1:n.getTime()>=s.getTime()?t:t-1}function up(e){const n=Mt(e);return n.setHours(0,0,0,0),n}function _x(e){const n=Mt(e),t=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return t.setUTCFullYear(n.getFullYear()),+e-+t}function rm(e,n){const t=up(e),r=up(n),i=+t-_x(t),a=+r-_x(r);return Math.round((i-a)/qH)}function HH(e){const n=Z7(e),t=Ir(e,0);return t.setFullYear(n,0,4),t.setHours(0,0,0,0),nm(t)}function ES(e,n){return sA(e,n*wv)}function oA(e,n){const t=n*3;return wu(e,t)}function WH(e,n){return sA(e,n*1e3)}function Nx(e,n){const t=n*7;return xu(e,t)}function kd(e,n){return wu(e,n*12)}function W4(e){let n;return e.forEach(function(t){const r=Mt(t);(n===void 0||n<r||isNaN(Number(r)))&&(n=r)}),n||new Date(NaN)}function V4(e){let n;return e.forEach(t=>{const r=Mt(t);(!n||n>r||isNaN(+r))&&(n=r)}),n||new Date(NaN)}function VH(e,n){const t=up(e),r=up(n);return+t==+r}function Ed(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function jx(e){if(!Ed(e)&&typeof e!="number")return!1;const n=Mt(e);return!isNaN(Number(n))}function Tx(e,n){const t=Mt(e),r=Mt(n),i=t.getFullYear()-r.getFullYear(),a=t.getMonth()-r.getMonth();return i*12+a}function Xh(e){const n=Mt(e);return Math.trunc(n.getMonth()/3)+1}function Ox(e,n){const t=Mt(e),r=Mt(n),i=t.getFullYear()-r.getFullYear(),a=Xh(t)-Xh(r);return i*4+a}function Dx(e,n){const t=Mt(e),r=Mt(n);return t.getFullYear()-r.getFullYear()}function YH(e,n){const t=Mt(e),r=Mt(n),i=Y4(t,r),a=Math.abs(rm(t,r));t.setDate(t.getDate()-i*a);const s=+(Y4(t,r)===-i),l=i*(a-s);return l===0?0:l}function Y4(e,n){const t=e.getFullYear()-n.getFullYear()||e.getMonth()-n.getMonth()||e.getDate()-n.getDate()||e.getHours()-n.getHours()||e.getMinutes()-n.getMinutes()||e.getSeconds()-n.getSeconds()||e.getMilliseconds()-n.getMilliseconds();return t<0?-1:t>0?1:t}function J7(e){const n=Mt(e);return n.setHours(23,59,59,999),n}function eO(e){const n=Mt(e),t=n.getMonth();return n.setFullYear(n.getFullYear(),t+1,0),n.setHours(23,59,59,999),n}function _S(e){const n=Mt(e),t=n.getMonth(),r=t-t%3;return n.setMonth(r,1),n.setHours(0,0,0,0),n}function tO(e){const n=Mt(e);return n.setDate(1),n.setHours(0,0,0,0),n}function nO(e){const n=Mt(e),t=n.getFullYear();return n.setFullYear(t+1,0,0),n.setHours(23,59,59,999),n}function Av(e){const n=Mt(e),t=Ir(e,0);return t.setFullYear(n.getFullYear(),0,1),t.setHours(0,0,0,0),t}function GH(e,n){var l,u;const t=kp(),r=t.weekStartsOn??((u=(l=t.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??0,i=Mt(e),a=i.getDay(),s=(a<r?-7:0)+6-(a-r);return i.setDate(i.getDate()+s),i.setHours(23,59,59,999),i}const QH={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},KH=(e,n,t)=>{let r;const i=QH[e];return typeof i=="string"?r=i:n===1?r=i.one:r=i.other.replace("{{count}}",n.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Q5(e){return(n={})=>{const t=n.width?String(n.width):e.defaultWidth;return e.formats[t]||e.formats[e.defaultWidth]}}const XH={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ZH={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},JH={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},eW={date:Q5({formats:XH,defaultWidth:"full"}),time:Q5({formats:ZH,defaultWidth:"full"}),dateTime:Q5({formats:JH,defaultWidth:"full"})},tW={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},nW=(e,n,t,r)=>tW[e];function y1(e){return(n,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let i;if(r==="formatting"&&e.formattingValues){const s=e.defaultFormattingWidth||e.defaultWidth,l=t!=null&&t.width?String(t.width):s;i=e.formattingValues[l]||e.formattingValues[s]}else{const s=e.defaultWidth,l=t!=null&&t.width?String(t.width):e.defaultWidth;i=e.values[l]||e.values[s]}const a=e.argumentCallback?e.argumentCallback(n):n;return i[a]}}const rW={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},iW={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},aW={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},sW={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},oW={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},lW={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},uW=(e,n)=>{const t=Number(e),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},cW={ordinalNumber:uW,era:y1({values:rW,defaultWidth:"wide"}),quarter:y1({values:iW,defaultWidth:"wide",argumentCallback:e=>e-1}),month:y1({values:aW,defaultWidth:"wide"}),day:y1({values:sW,defaultWidth:"wide"}),dayPeriod:y1({values:oW,defaultWidth:"wide",formattingValues:lW,defaultFormattingWidth:"wide"})};function x1(e){return(n,t={})=>{const r=t.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=n.match(i);if(!a)return null;const s=a[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(l)?fW(l,m=>m.test(s)):dW(l,m=>m.test(s));let d;d=e.valueCallback?e.valueCallback(u):u,d=t.valueCallback?t.valueCallback(d):d;const f=n.slice(s.length);return{value:d,rest:f}}}function dW(e,n){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&n(e[t]))return t}function fW(e,n){for(let t=0;t<e.length;t++)if(n(e[t]))return t}function hW(e){return(n,t={})=>{const r=n.match(e.matchPattern);if(!r)return null;const i=r[0],a=n.match(e.parsePattern);if(!a)return null;let s=e.valueCallback?e.valueCallback(a[0]):a[0];s=t.valueCallback?t.valueCallback(s):s;const l=n.slice(i.length);return{value:s,rest:l}}}const pW=/^(\d+)(th|st|nd|rd)?/i,mW=/\d+/i,gW={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},bW={any:[/^b/i,/^(a|c)/i]},yW={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},xW={any:[/1/i,/2/i,/3/i,/4/i]},vW={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},wW={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},SW={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},AW={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},CW={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},kW={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},EW={ordinalNumber:hW({matchPattern:pW,parsePattern:mW,valueCallback:e=>parseInt(e,10)}),era:x1({matchPatterns:gW,defaultMatchWidth:"wide",parsePatterns:bW,defaultParseWidth:"any"}),quarter:x1({matchPatterns:yW,defaultMatchWidth:"wide",parsePatterns:xW,defaultParseWidth:"any",valueCallback:e=>e+1}),month:x1({matchPatterns:vW,defaultMatchWidth:"wide",parsePatterns:wW,defaultParseWidth:"any"}),day:x1({matchPatterns:SW,defaultMatchWidth:"wide",parsePatterns:AW,defaultParseWidth:"any"}),dayPeriod:x1({matchPatterns:CW,defaultMatchWidth:"any",parsePatterns:kW,defaultParseWidth:"any"})},rO={code:"en-US",formatDistance:KH,formatLong:eW,formatRelative:nW,localize:cW,match:EW,options:{weekStartsOn:0,firstWeekContainsDate:1}};function _W(e){const n=Mt(e);return rm(n,Av(n))+1}function lA(e){const n=Mt(e),t=+nm(n)-+HH(n);return Math.round(t/X7)+1}function uA(e,n){var f,m,b,g;const t=Mt(e),r=t.getFullYear(),i=kp(),a=(n==null?void 0:n.firstWeekContainsDate)??((m=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??i.firstWeekContainsDate??((g=(b=i.locale)==null?void 0:b.options)==null?void 0:g.firstWeekContainsDate)??1,s=Ir(e,0);s.setFullYear(r+1,0,a),s.setHours(0,0,0,0);const l=Rd(s,n),u=Ir(e,0);u.setFullYear(r,0,a),u.setHours(0,0,0,0);const d=Rd(u,n);return t.getTime()>=l.getTime()?r+1:t.getTime()>=d.getTime()?r:r-1}function NW(e,n){var l,u,d,f;const t=kp(),r=(n==null?void 0:n.firstWeekContainsDate)??((u=(l=n==null?void 0:n.locale)==null?void 0:l.options)==null?void 0:u.firstWeekContainsDate)??t.firstWeekContainsDate??((f=(d=t.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,i=uA(e,n),a=Ir(e,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),Rd(a,n)}function iO(e,n){const t=Mt(e),r=+Rd(t,n)-+NW(t,n);return Math.round(r/X7)+1}function Dr(e,n){const t=e<0?"-":"",r=Math.abs(e).toString().padStart(n,"0");return t+r}const _f={y(e,n){const t=e.getFullYear(),r=t>0?t:1-t;return Dr(n==="yy"?r%100:r,n.length)},M(e,n){const t=e.getMonth();return n==="M"?String(t+1):Dr(t+1,2)},d(e,n){return Dr(e.getDate(),n.length)},a(e,n){const t=e.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(e,n){return Dr(e.getHours()%12||12,n.length)},H(e,n){return Dr(e.getHours(),n.length)},m(e,n){return Dr(e.getMinutes(),n.length)},s(e,n){return Dr(e.getSeconds(),n.length)},S(e,n){const t=n.length,r=e.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return Dr(i,n.length)}},s0={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},G4={G:function(e,n,t){const r=e.getFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(e,n,t){if(n==="yo"){const r=e.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return _f.y(e,n)},Y:function(e,n,t,r){const i=uA(e,r),a=i>0?i:1-i;if(n==="YY"){const s=a%100;return Dr(s,2)}return n==="Yo"?t.ordinalNumber(a,{unit:"year"}):Dr(a,n.length)},R:function(e,n){const t=Z7(e);return Dr(t,n.length)},u:function(e,n){const t=e.getFullYear();return Dr(t,n.length)},Q:function(e,n,t){const r=Math.ceil((e.getMonth()+1)/3);switch(n){case"Q":return String(r);case"QQ":return Dr(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,n,t){const r=Math.ceil((e.getMonth()+1)/3);switch(n){case"q":return String(r);case"qq":return Dr(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,n,t){const r=e.getMonth();switch(n){case"M":case"MM":return _f.M(e,n);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(e,n,t){const r=e.getMonth();switch(n){case"L":return String(r+1);case"LL":return Dr(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(e,n,t,r){const i=iO(e,r);return n==="wo"?t.ordinalNumber(i,{unit:"week"}):Dr(i,n.length)},I:function(e,n,t){const r=lA(e);return n==="Io"?t.ordinalNumber(r,{unit:"week"}):Dr(r,n.length)},d:function(e,n,t){return n==="do"?t.ordinalNumber(e.getDate(),{unit:"date"}):_f.d(e,n)},D:function(e,n,t){const r=_W(e);return n==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):Dr(r,n.length)},E:function(e,n,t){const r=e.getDay();switch(n){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(e,n,t,r){const i=e.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(n){case"e":return String(a);case"ee":return Dr(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(e,n,t,r){const i=e.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(n){case"c":return String(a);case"cc":return Dr(a,n.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(e,n,t){const r=e.getDay(),i=r===0?7:r;switch(n){case"i":return String(i);case"ii":return Dr(i,n.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(e,n,t){const i=e.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,n,t){const r=e.getHours();let i;switch(r===12?i=s0.noon:r===0?i=s0.midnight:i=r/12>=1?"pm":"am",n){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,n,t){const r=e.getHours();let i;switch(r>=17?i=s0.evening:r>=12?i=s0.afternoon:r>=4?i=s0.morning:i=s0.night,n){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,n,t){if(n==="ho"){let r=e.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return _f.h(e,n)},H:function(e,n,t){return n==="Ho"?t.ordinalNumber(e.getHours(),{unit:"hour"}):_f.H(e,n)},K:function(e,n,t){const r=e.getHours()%12;return n==="Ko"?t.ordinalNumber(r,{unit:"hour"}):Dr(r,n.length)},k:function(e,n,t){let r=e.getHours();return r===0&&(r=24),n==="ko"?t.ordinalNumber(r,{unit:"hour"}):Dr(r,n.length)},m:function(e,n,t){return n==="mo"?t.ordinalNumber(e.getMinutes(),{unit:"minute"}):_f.m(e,n)},s:function(e,n,t){return n==="so"?t.ordinalNumber(e.getSeconds(),{unit:"second"}):_f.s(e,n)},S:function(e,n){return _f.S(e,n)},X:function(e,n,t){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(n){case"X":return K4(r);case"XXXX":case"XX":return zh(r);case"XXXXX":case"XXX":default:return zh(r,":")}},x:function(e,n,t){const r=e.getTimezoneOffset();switch(n){case"x":return K4(r);case"xxxx":case"xx":return zh(r);case"xxxxx":case"xxx":default:return zh(r,":")}},O:function(e,n,t){const r=e.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Q4(r,":");case"OOOO":default:return"GMT"+zh(r,":")}},z:function(e,n,t){const r=e.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Q4(r,":");case"zzzz":default:return"GMT"+zh(r,":")}},t:function(e,n,t){const r=Math.trunc(e.getTime()/1e3);return Dr(r,n.length)},T:function(e,n,t){const r=e.getTime();return Dr(r,n.length)}};function Q4(e,n=""){const t=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),a=r%60;return a===0?t+String(i):t+String(i)+n+Dr(a,2)}function K4(e,n){return e%60===0?(e>0?"-":"+")+Dr(Math.abs(e)/60,2):zh(e,n)}function zh(e,n=""){const t=e>0?"-":"+",r=Math.abs(e),i=Dr(Math.trunc(r/60),2),a=Dr(r%60,2);return t+i+n+a}const X4=(e,n)=>{switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},aO=(e,n)=>{switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},jW=(e,n)=>{const t=e.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return X4(e,n);let a;switch(r){case"P":a=n.dateTime({width:"short"});break;case"PP":a=n.dateTime({width:"medium"});break;case"PPP":a=n.dateTime({width:"long"});break;case"PPPP":default:a=n.dateTime({width:"full"});break}return a.replace("{{date}}",X4(r,n)).replace("{{time}}",aO(i,n))},Ix={p:aO,P:jW},TW=/^D+$/,OW=/^Y+$/,DW=["D","DD","YY","YYYY"];function sO(e){return TW.test(e)}function oO(e){return OW.test(e)}function NS(e,n,t){const r=IW(e,n,t);if(console.warn(r),DW.includes(e))throw new RangeError(r)}function IW(e,n,t){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${n}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const LW=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,RW=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,MW=/^'([^]*?)'?$/,FW=/''/g,PW=/[a-zA-Z]/;function Z4(e,n,t){var f,m,b,g,x,y,A,w;const r=kp(),i=(t==null?void 0:t.locale)??r.locale??rO,a=(t==null?void 0:t.firstWeekContainsDate)??((m=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(b=r.locale)==null?void 0:b.options)==null?void 0:g.firstWeekContainsDate)??1,s=(t==null?void 0:t.weekStartsOn)??((y=(x=t==null?void 0:t.locale)==null?void 0:x.options)==null?void 0:y.weekStartsOn)??r.weekStartsOn??((w=(A=r.locale)==null?void 0:A.options)==null?void 0:w.weekStartsOn)??0,l=Mt(e);if(!jx(l))throw new RangeError("Invalid time value");let u=n.match(RW).map(C=>{const j=C[0];if(j==="p"||j==="P"){const F=Ix[j];return F(C,i.formatLong)}return C}).join("").match(LW).map(C=>{if(C==="''")return{isToken:!1,value:"'"};const j=C[0];if(j==="'")return{isToken:!1,value:zW(C)};if(G4[j])return{isToken:!0,value:C};if(j.match(PW))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");return{isToken:!1,value:C}});i.localize.preprocessor&&(u=i.localize.preprocessor(l,u));const d={firstWeekContainsDate:a,weekStartsOn:s,locale:i};return u.map(C=>{if(!C.isToken)return C.value;const j=C.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&oO(j)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&sO(j))&&NS(j,n,String(e));const F=G4[j[0]];return F(l,j,i.localize,d)}).join("")}function zW(e){const n=e.match(MW);return n?n[1].replace(FW,"'"):e}function J4(e){return Mt(e).getDate()}function qW(e){return Mt(e).getDay()}function BW(e){const n=Mt(e),t=n.getFullYear(),r=n.getMonth(),i=Ir(e,0);return i.setFullYear(t,r+1,0),i.setHours(0,0,0,0),i.getDate()}function $W(){return Object.assign({},kp())}function Cc(e){return Mt(e).getHours()}function UW(e){let t=Mt(e).getDay();return t===0&&(t=7),t}function kc(e){return Mt(e).getMinutes()}function eo(e){return Mt(e).getMonth()}function _d(e){return Mt(e).getSeconds()}function jS(e){return Mt(e).getTime()}function Fn(e){return Mt(e).getFullYear()}function Kf(e,n){const t=Mt(e),r=Mt(n);return t.getTime()>r.getTime()}function cp(e,n){const t=Mt(e),r=Mt(n);return+t<+r}function HW(e,n){const t=Mt(e),r=Mt(n);return+t==+r}function WW(e,n){const t=n instanceof Date?Ir(n,0):new n(0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),t}const VW=10;class lO{constructor(){nt(this,"subPriority",0)}validate(n,t){return!0}}class YW extends lO{constructor(n,t,r,i,a){super(),this.value=n,this.validateValue=t,this.setValue=r,this.priority=i,a&&(this.subPriority=a)}validate(n,t){return this.validateValue(n,this.value,t)}set(n,t,r){return this.setValue(n,t,this.value,r)}}class GW extends lO{constructor(){super(...arguments);nt(this,"priority",VW);nt(this,"subPriority",-1)}set(t,r){return r.timestampIsSet?t:Ir(t,WW(t,Date))}}let vr=class{run(n,t,r,i){const a=this.parse(n,t,r,i);return a?{setter:new YW(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}validate(n,t,r){return!0}};class QW extends vr{constructor(){super(...arguments);nt(this,"priority",140);nt(this,"incompatibleTokens",["R","u","t","T"])}parse(t,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"});case"GGGGG":return i.era(t,{width:"narrow"});case"GGGG":default:return i.era(t,{width:"wide"})||i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"})}}set(t,r,i){return r.era=i,t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}const fa={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},fc={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function ha(e,n){return e&&{value:n(e.value),rest:e.rest}}function Fi(e,n){const t=n.match(e);return t?{value:parseInt(t[0],10),rest:n.slice(t[0].length)}:null}function hc(e,n){const t=n.match(e);if(!t)return null;if(t[0]==="Z")return{value:0,rest:n.slice(1)};const r=t[1]==="+"?1:-1,i=t[2]?parseInt(t[2],10):0,a=t[3]?parseInt(t[3],10):0,s=t[5]?parseInt(t[5],10):0;return{value:r*(i*Sv+a*wv+s*BH),rest:n.slice(t[0].length)}}function uO(e){return Fi(fa.anyDigitsSigned,e)}function ea(e,n){switch(e){case 1:return Fi(fa.singleDigit,n);case 2:return Fi(fa.twoDigits,n);case 3:return Fi(fa.threeDigits,n);case 4:return Fi(fa.fourDigits,n);default:return Fi(new RegExp("^\\d{1,"+e+"}"),n)}}function Lx(e,n){switch(e){case 1:return Fi(fa.singleDigitSigned,n);case 2:return Fi(fa.twoDigitsSigned,n);case 3:return Fi(fa.threeDigitsSigned,n);case 4:return Fi(fa.fourDigitsSigned,n);default:return Fi(new RegExp("^-?\\d{1,"+e+"}"),n)}}function cA(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function cO(e,n){const t=n>0,r=t?n:1-n;let i;if(r<=50)i=e||100;else{const a=r+50,s=Math.trunc(a/100)*100,l=e>=a%100;i=e+s-(l?100:0)}return t?i:1-i}function dO(e){return e%400===0||e%4===0&&e%100!==0}class KW extends vr{constructor(){super(...arguments);nt(this,"priority",130);nt(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(t,r,i){const a=s=>({year:s,isTwoDigitYear:r==="yy"});switch(r){case"y":return ha(ea(4,t),a);case"yo":return ha(i.ordinalNumber(t,{unit:"year"}),a);default:return ha(ea(r.length,t),a)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,i){const a=t.getFullYear();if(i.isTwoDigitYear){const l=cO(i.year,a);return t.setFullYear(l,0,1),t.setHours(0,0,0,0),t}const s=!("era"in r)||r.era===1?i.year:1-i.year;return t.setFullYear(s,0,1),t.setHours(0,0,0,0),t}}class XW extends vr{constructor(){super(...arguments);nt(this,"priority",130);nt(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(t,r,i){const a=s=>({year:s,isTwoDigitYear:r==="YY"});switch(r){case"Y":return ha(ea(4,t),a);case"Yo":return ha(i.ordinalNumber(t,{unit:"year"}),a);default:return ha(ea(r.length,t),a)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,i,a){const s=uA(t,a);if(i.isTwoDigitYear){const u=cO(i.year,s);return t.setFullYear(u,0,a.firstWeekContainsDate),t.setHours(0,0,0,0),Rd(t,a)}const l=!("era"in r)||r.era===1?i.year:1-i.year;return t.setFullYear(l,0,a.firstWeekContainsDate),t.setHours(0,0,0,0),Rd(t,a)}}class ZW extends vr{constructor(){super(...arguments);nt(this,"priority",130);nt(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(t,r){return Lx(r==="R"?4:r.length,t)}set(t,r,i){const a=Ir(t,0);return a.setFullYear(i,0,4),a.setHours(0,0,0,0),nm(a)}}class JW extends vr{constructor(){super(...arguments);nt(this,"priority",130);nt(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(t,r){return Lx(r==="u"?4:r.length,t)}set(t,r,i){return t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}class eV extends vr{constructor(){super(...arguments);nt(this,"priority",120);nt(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"Q":case"QQ":return ea(r.length,t);case"Qo":return i.ordinalNumber(t,{unit:"quarter"});case"QQQ":return i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(t,{width:"wide",context:"formatting"})||i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=1&&r<=4}set(t,r,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}}class tV extends vr{constructor(){super(...arguments);nt(this,"priority",120);nt(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"q":case"qq":return ea(r.length,t);case"qo":return i.ordinalNumber(t,{unit:"quarter"});case"qqq":return i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(t,{width:"wide",context:"standalone"})||i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=1&&r<=4}set(t,r,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}}class nV extends vr{constructor(){super(...arguments);nt(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);nt(this,"priority",110)}parse(t,r,i){const a=s=>s-1;switch(r){case"M":return ha(Fi(fa.month,t),a);case"MM":return ha(ea(2,t),a);case"Mo":return ha(i.ordinalNumber(t,{unit:"month"}),a);case"MMM":return i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(t,{width:"wide",context:"formatting"})||i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=11}set(t,r,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}}class rV extends vr{constructor(){super(...arguments);nt(this,"priority",110);nt(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(t,r,i){const a=s=>s-1;switch(r){case"L":return ha(Fi(fa.month,t),a);case"LL":return ha(ea(2,t),a);case"Lo":return ha(i.ordinalNumber(t,{unit:"month"}),a);case"LLL":return i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(t,{width:"wide",context:"standalone"})||i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=11}set(t,r,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}}function iV(e,n,t){const r=Mt(e),i=iO(r,t)-n;return r.setDate(r.getDate()-i*7),r}class aV extends vr{constructor(){super(...arguments);nt(this,"priority",100);nt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(t,r,i){switch(r){case"w":return Fi(fa.week,t);case"wo":return i.ordinalNumber(t,{unit:"week"});default:return ea(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,i,a){return Rd(iV(t,i,a),a)}}function sV(e,n){const t=Mt(e),r=lA(t)-n;return t.setDate(t.getDate()-r*7),t}class oV extends vr{constructor(){super(...arguments);nt(this,"priority",100);nt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(t,r,i){switch(r){case"I":return Fi(fa.week,t);case"Io":return i.ordinalNumber(t,{unit:"week"});default:return ea(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,i){return nm(sV(t,i))}}const lV=[31,28,31,30,31,30,31,31,30,31,30,31],uV=[31,29,31,30,31,30,31,31,30,31,30,31];class cV extends vr{constructor(){super(...arguments);nt(this,"priority",90);nt(this,"subPriority",1);nt(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"d":return Fi(fa.date,t);case"do":return i.ordinalNumber(t,{unit:"date"});default:return ea(r.length,t)}}validate(t,r){const i=t.getFullYear(),a=dO(i),s=t.getMonth();return a?r>=1&&r<=uV[s]:r>=1&&r<=lV[s]}set(t,r,i){return t.setDate(i),t.setHours(0,0,0,0),t}}class dV extends vr{constructor(){super(...arguments);nt(this,"priority",90);nt(this,"subpriority",1);nt(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(t,r,i){switch(r){case"D":case"DD":return Fi(fa.dayOfYear,t);case"Do":return i.ordinalNumber(t,{unit:"date"});default:return ea(r.length,t)}}validate(t,r){const i=t.getFullYear();return dO(i)?r>=1&&r<=366:r>=1&&r<=365}set(t,r,i){return t.setMonth(0,i),t.setHours(0,0,0,0),t}}function dA(e,n,t){var m,b,g,x;const r=kp(),i=(t==null?void 0:t.weekStartsOn)??((b=(m=t==null?void 0:t.locale)==null?void 0:m.options)==null?void 0:b.weekStartsOn)??r.weekStartsOn??((x=(g=r.locale)==null?void 0:g.options)==null?void 0:x.weekStartsOn)??0,a=Mt(e),s=a.getDay(),u=(n%7+7)%7,d=7-i,f=n<0||n>6?n-(s+d)%7:(u+d)%7-(s+d)%7;return xu(a,f)}class fV extends vr{constructor(){super(...arguments);nt(this,"priority",90);nt(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,i,a){return t=dA(t,i,a),t.setHours(0,0,0,0),t}}class hV extends vr{constructor(){super(...arguments);nt(this,"priority",90);nt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(t,r,i,a){const s=l=>{const u=Math.floor((l-1)/7)*7;return(l+a.weekStartsOn+6)%7+u};switch(r){case"e":case"ee":return ha(ea(r.length,t),s);case"eo":return ha(i.ordinalNumber(t,{unit:"day"}),s);case"eee":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeeee":return i.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,i,a){return t=dA(t,i,a),t.setHours(0,0,0,0),t}}class pV extends vr{constructor(){super(...arguments);nt(this,"priority",90);nt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(t,r,i,a){const s=l=>{const u=Math.floor((l-1)/7)*7;return(l+a.weekStartsOn+6)%7+u};switch(r){case"c":case"cc":return ha(ea(r.length,t),s);case"co":return ha(i.ordinalNumber(t,{unit:"day"}),s);case"ccc":return i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"ccccc":return i.day(t,{width:"narrow",context:"standalone"});case"cccccc":return i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(t,{width:"wide",context:"standalone"})||i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=6}set(t,r,i,a){return t=dA(t,i,a),t.setHours(0,0,0,0),t}}function mV(e,n){const t=Mt(e),r=UW(t),i=n-r;return xu(t,i)}class gV extends vr{constructor(){super(...arguments);nt(this,"priority",90);nt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(t,r,i){const a=s=>s===0?7:s;switch(r){case"i":case"ii":return ea(r.length,t);case"io":return i.ordinalNumber(t,{unit:"day"});case"iii":return ha(i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),a);case"iiiii":return ha(i.day(t,{width:"narrow",context:"formatting"}),a);case"iiiiii":return ha(i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),a);case"iiii":default:return ha(i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),a)}}validate(t,r){return r>=1&&r<=7}set(t,r,i){return t=mV(t,i),t.setHours(0,0,0,0),t}}class bV extends vr{constructor(){super(...arguments);nt(this,"priority",80);nt(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(t,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,i){return t.setHours(cA(i),0,0,0),t}}class yV extends vr{constructor(){super(...arguments);nt(this,"priority",80);nt(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(t,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,i){return t.setHours(cA(i),0,0,0),t}}class xV extends vr{constructor(){super(...arguments);nt(this,"priority",80);nt(this,"incompatibleTokens",["a","b","t","T"])}parse(t,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,i){return t.setHours(cA(i),0,0,0),t}}class vV extends vr{constructor(){super(...arguments);nt(this,"priority",70);nt(this,"incompatibleTokens",["H","K","k","t","T"])}parse(t,r,i){switch(r){case"h":return Fi(fa.hour12h,t);case"ho":return i.ordinalNumber(t,{unit:"hour"});default:return ea(r.length,t)}}validate(t,r){return r>=1&&r<=12}set(t,r,i){const a=t.getHours()>=12;return a&&i<12?t.setHours(i+12,0,0,0):!a&&i===12?t.setHours(0,0,0,0):t.setHours(i,0,0,0),t}}class wV extends vr{constructor(){super(...arguments);nt(this,"priority",70);nt(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(t,r,i){switch(r){case"H":return Fi(fa.hour23h,t);case"Ho":return i.ordinalNumber(t,{unit:"hour"});default:return ea(r.length,t)}}validate(t,r){return r>=0&&r<=23}set(t,r,i){return t.setHours(i,0,0,0),t}}class SV extends vr{constructor(){super(...arguments);nt(this,"priority",70);nt(this,"incompatibleTokens",["h","H","k","t","T"])}parse(t,r,i){switch(r){case"K":return Fi(fa.hour11h,t);case"Ko":return i.ordinalNumber(t,{unit:"hour"});default:return ea(r.length,t)}}validate(t,r){return r>=0&&r<=11}set(t,r,i){return t.getHours()>=12&&i<12?t.setHours(i+12,0,0,0):t.setHours(i,0,0,0),t}}class AV extends vr{constructor(){super(...arguments);nt(this,"priority",70);nt(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(t,r,i){switch(r){case"k":return Fi(fa.hour24h,t);case"ko":return i.ordinalNumber(t,{unit:"hour"});default:return ea(r.length,t)}}validate(t,r){return r>=1&&r<=24}set(t,r,i){const a=i<=24?i%24:i;return t.setHours(a,0,0,0),t}}class CV extends vr{constructor(){super(...arguments);nt(this,"priority",60);nt(this,"incompatibleTokens",["t","T"])}parse(t,r,i){switch(r){case"m":return Fi(fa.minute,t);case"mo":return i.ordinalNumber(t,{unit:"minute"});default:return ea(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,i){return t.setMinutes(i,0,0),t}}class kV extends vr{constructor(){super(...arguments);nt(this,"priority",50);nt(this,"incompatibleTokens",["t","T"])}parse(t,r,i){switch(r){case"s":return Fi(fa.second,t);case"so":return i.ordinalNumber(t,{unit:"second"});default:return ea(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,i){return t.setSeconds(i,0),t}}class EV extends vr{constructor(){super(...arguments);nt(this,"priority",30);nt(this,"incompatibleTokens",["t","T"])}parse(t,r){const i=a=>Math.trunc(a*Math.pow(10,-r.length+3));return ha(ea(r.length,t),i)}set(t,r,i){return t.setMilliseconds(i),t}}class _V extends vr{constructor(){super(...arguments);nt(this,"priority",10);nt(this,"incompatibleTokens",["t","T","x"])}parse(t,r){switch(r){case"X":return hc(fc.basicOptionalMinutes,t);case"XX":return hc(fc.basic,t);case"XXXX":return hc(fc.basicOptionalSeconds,t);case"XXXXX":return hc(fc.extendedOptionalSeconds,t);case"XXX":default:return hc(fc.extended,t)}}set(t,r,i){return r.timestampIsSet?t:Ir(t,t.getTime()-_x(t)-i)}}class NV extends vr{constructor(){super(...arguments);nt(this,"priority",10);nt(this,"incompatibleTokens",["t","T","X"])}parse(t,r){switch(r){case"x":return hc(fc.basicOptionalMinutes,t);case"xx":return hc(fc.basic,t);case"xxxx":return hc(fc.basicOptionalSeconds,t);case"xxxxx":return hc(fc.extendedOptionalSeconds,t);case"xxx":default:return hc(fc.extended,t)}}set(t,r,i){return r.timestampIsSet?t:Ir(t,t.getTime()-_x(t)-i)}}class jV extends vr{constructor(){super(...arguments);nt(this,"priority",40);nt(this,"incompatibleTokens","*")}parse(t){return uO(t)}set(t,r,i){return[Ir(t,i*1e3),{timestampIsSet:!0}]}}class TV extends vr{constructor(){super(...arguments);nt(this,"priority",20);nt(this,"incompatibleTokens","*")}parse(t){return uO(t)}set(t,r,i){return[Ir(t,i),{timestampIsSet:!0}]}}const OV={G:new QW,y:new KW,Y:new XW,R:new ZW,u:new JW,Q:new eV,q:new tV,M:new nV,L:new rV,w:new aV,I:new oV,d:new cV,D:new dV,E:new fV,e:new hV,c:new pV,i:new gV,a:new bV,b:new yV,B:new xV,h:new vV,H:new wV,K:new SV,k:new AV,m:new CV,s:new kV,S:new EV,X:new _V,x:new NV,t:new jV,T:new TV},DV=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,IV=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,LV=/^'([^]*?)'?$/,RV=/''/g,MV=/\S/,FV=/[a-zA-Z]/;function K5(e,n,t,r){var y,A,w,C,j,F,M,z;const i=$W(),a=(r==null?void 0:r.locale)??i.locale??rO,s=(r==null?void 0:r.firstWeekContainsDate)??((A=(y=r==null?void 0:r.locale)==null?void 0:y.options)==null?void 0:A.firstWeekContainsDate)??i.firstWeekContainsDate??((C=(w=i.locale)==null?void 0:w.options)==null?void 0:C.firstWeekContainsDate)??1,l=(r==null?void 0:r.weekStartsOn)??((F=(j=r==null?void 0:r.locale)==null?void 0:j.options)==null?void 0:F.weekStartsOn)??i.weekStartsOn??((z=(M=i.locale)==null?void 0:M.options)==null?void 0:z.weekStartsOn)??0;if(n==="")return e===""?Mt(t):Ir(t,NaN);const u={firstWeekContainsDate:s,weekStartsOn:l,locale:a},d=[new GW],f=n.match(IV).map(_=>{const L=_[0];if(L in Ix){const $=Ix[L];return $(_,a.formatLong)}return _}).join("").match(DV),m=[];for(let _ of f){!(r!=null&&r.useAdditionalWeekYearTokens)&&oO(_)&&NS(_,n,e),!(r!=null&&r.useAdditionalDayOfYearTokens)&&sO(_)&&NS(_,n,e);const L=_[0],$=OV[L];if($){const{incompatibleTokens:Z}=$;if(Array.isArray(Z)){const T=m.find(R=>Z.includes(R.token)||R.token===L);if(T)throw new RangeError(`The format string mustn't contain \`${T.fullToken}\` and \`${_}\` at the same time`)}else if($.incompatibleTokens==="*"&&m.length>0)throw new RangeError(`The format string mustn't contain \`${_}\` and any other token at the same time`);m.push({token:L,fullToken:_});const O=$.run(e,_,a.match,u);if(!O)return Ir(t,NaN);d.push(O.setter),e=O.rest}else{if(L.match(FV))throw new RangeError("Format string contains an unescaped latin alphabet character `"+L+"`");if(_==="''"?_="'":L==="'"&&(_=PV(_)),e.indexOf(_)===0)e=e.slice(_.length);else return Ir(t,NaN)}}if(e.length>0&&MV.test(e))return Ir(t,NaN);const b=d.map(_=>_.priority).sort((_,L)=>L-_).filter((_,L,$)=>$.indexOf(_)===L).map(_=>d.filter(L=>L.priority===_).sort((L,$)=>$.subPriority-L.subPriority)).map(_=>_[0]);let g=Mt(t);if(isNaN(g.getTime()))return Ir(t,NaN);const x={};for(const _ of b){if(!_.validate(g,u))return Ir(t,NaN);const L=_.set(g,x,u);Array.isArray(L)?(g=L[0],Object.assign(x,L[1])):g=L}return Ir(t,g)}function PV(e){return e.match(LV)[1].replace(RV,"'")}function zV(e,n){const t=Mt(e),r=Mt(n);return t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth()}function qV(e,n){const t=_S(e),r=_S(n);return+t==+r}function BV(e,n){const t=Mt(e),r=Mt(n);return t.getFullYear()===r.getFullYear()}function gg(e,n){const t=+Mt(e),[r,i]=[+Mt(n.start),+Mt(n.end)].sort((a,s)=>a-s);return t>=r&&t<=i}function $V(e,n){return xu(e,-1)}function UV(e,n){const r=YV(e);let i;if(r.date){const u=GV(r.date,2);i=QV(u.restDateString,u.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const a=i.getTime();let s=0,l;if(r.time&&(s=KV(r.time),isNaN(s)))return new Date(NaN);if(r.timezone){if(l=XV(r.timezone),isNaN(l))return new Date(NaN)}else{const u=new Date(a+s),d=new Date(0);return d.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),d.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),d}return new Date(a+s+l)}const wy={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},HV=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,WV=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,VV=/^([+-])(\d{2})(?::?(\d{2}))?$/;function YV(e){const n={},t=e.split(wy.dateTimeDelimiter);let r;if(t.length>2)return n;if(/:/.test(t[0])?r=t[0]:(n.date=t[0],r=t[1],wy.timeZoneDelimiter.test(n.date)&&(n.date=e.split(wy.timeZoneDelimiter)[0],r=e.substr(n.date.length,e.length))),r){const i=wy.timezone.exec(r);i?(n.time=r.replace(i[1],""),n.timezone=i[1]):n.time=r}return n}function GV(e,n){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+n)+"})|(\\d{2}|[+-]\\d{"+(2+n)+"})$)"),r=e.match(t);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:a===null?i:a*100,restDateString:e.slice((r[1]||r[2]).length)}}function QV(e,n){if(n===null)return new Date(NaN);const t=e.match(HV);if(!t)return new Date(NaN);const r=!!t[4],i=v1(t[1]),a=v1(t[2])-1,s=v1(t[3]),l=v1(t[4]),u=v1(t[5])-1;if(r)return nY(n,l,u)?ZV(n,l,u):new Date(NaN);{const d=new Date(0);return!eY(n,a,s)||!tY(n,i)?new Date(NaN):(d.setUTCFullYear(n,a,Math.max(i,s)),d)}}function v1(e){return e?parseInt(e):1}function KV(e){const n=e.match(WV);if(!n)return NaN;const t=X5(n[1]),r=X5(n[2]),i=X5(n[3]);return rY(t,r,i)?t*Sv+r*wv+i*1e3:NaN}function X5(e){return e&&parseFloat(e.replace(",","."))||0}function XV(e){if(e==="Z")return 0;const n=e.match(VV);if(!n)return 0;const t=n[1]==="+"?-1:1,r=parseInt(n[2]),i=n[3]&&parseInt(n[3])||0;return iY(r,i)?t*(r*Sv+i*wv):NaN}function ZV(e,n,t){const r=new Date(0);r.setUTCFullYear(e,0,4);const i=r.getUTCDay()||7,a=(n-1)*7+t+1-i;return r.setUTCDate(r.getUTCDate()+a),r}const JV=[31,null,31,30,31,30,31,31,30,31,30,31];function fO(e){return e%400===0||e%4===0&&e%100!==0}function eY(e,n,t){return n>=0&&n<=11&&t>=1&&t<=(JV[n]||(fO(e)?29:28))}function tY(e,n){return n>=1&&n<=(fO(e)?366:365)}function nY(e,n,t){return n>=1&&n<=53&&t>=0&&t<=6}function rY(e,n,t){return e===24?n===0&&t===0:t>=0&&t<60&&n>=0&&n<60&&e>=0&&e<25}function iY(e,n){return n>=0&&n<=59}function Uo(e,n){const t=Mt(e),r=t.getFullYear(),i=t.getDate(),a=Ir(e,0);a.setFullYear(r,n,15),a.setHours(0,0,0,0);const s=BW(a);return t.setMonth(n,Math.min(i,s)),t}function aY(e,n){let t=Mt(e);return isNaN(+t)?Ir(e,NaN):(n.year!=null&&t.setFullYear(n.year),n.month!=null&&(t=Uo(t,n.month)),n.date!=null&&t.setDate(n.date),n.hours!=null&&t.setHours(n.hours),n.minutes!=null&&t.setMinutes(n.minutes),n.seconds!=null&&t.setSeconds(n.seconds),n.milliseconds!=null&&t.setMilliseconds(n.milliseconds),t)}function Vy(e,n){const t=Mt(e);return t.setHours(n),t}function Yy(e,n){const t=Mt(e);return t.setMinutes(n),t}function _0(e,n){const t=Mt(e),r=Math.trunc(t.getMonth()/3)+1,i=n-r;return Uo(t,t.getMonth()+i*3)}function Gy(e,n){const t=Mt(e);return t.setSeconds(n),t}function oc(e,n){const t=Mt(e);return isNaN(+t)?Ir(e,NaN):(t.setFullYear(n),t)}function Zh(e,n){return wu(e,-n)}function hO(e,n){return oA(e,-1)}function eE(e,n){return Nx(e,-1)}function im(e,n){return kd(e,-n)}function Cv(){return typeof window<"u"}function fm(e){return pO(e)?(e.nodeName||"").toLowerCase():"#document"}function Ko(e){var n;return(e==null||(n=e.ownerDocument)==null?void 0:n.defaultView)||window}function zc(e){var n;return(n=(pO(e)?e.ownerDocument:e.document)||window.document)==null?void 0:n.documentElement}function pO(e){return Cv()?e instanceof Node||e instanceof Ko(e).Node:!1}function to(e){return Cv()?e instanceof Element||e instanceof Ko(e).Element:!1}function Mc(e){return Cv()?e instanceof HTMLElement||e instanceof Ko(e).HTMLElement:!1}function tE(e){return!Cv()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ko(e).ShadowRoot}const sY=new Set(["inline","contents"]);function Vg(e){const{overflow:n,overflowX:t,overflowY:r,display:i}=Dl(e);return/auto|scroll|overlay|hidden|clip/.test(n+r+t)&&!sY.has(i)}const oY=new Set(["table","td","th"]);function lY(e){return oY.has(fm(e))}const uY=[":popover-open",":modal"];function kv(e){return uY.some(n=>{try{return e.matches(n)}catch{return!1}})}const cY=["transform","translate","scale","rotate","perspective"],dY=["transform","translate","scale","rotate","perspective","filter"],fY=["paint","layout","strict","content"];function fA(e){const n=hA(),t=to(e)?Dl(e):e;return cY.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!n&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!n&&(t.filter?t.filter!=="none":!1)||dY.some(r=>(t.willChange||"").includes(r))||fY.some(r=>(t.contain||"").includes(r))}function hY(e){let n=Xf(e);for(;Mc(n)&&!am(n);){if(fA(n))return n;if(kv(n))return null;n=Xf(n)}return null}function hA(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const pY=new Set(["html","body","#document"]);function am(e){return pY.has(fm(e))}function Dl(e){return Ko(e).getComputedStyle(e)}function Ev(e){return to(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Xf(e){if(fm(e)==="html")return e;const n=e.assignedSlot||e.parentNode||tE(e)&&e.host||zc(e);return tE(n)?n.host:n}function mO(e){const n=Xf(e);return am(n)?e.ownerDocument?e.ownerDocument.body:e.body:Mc(n)&&Vg(n)?n:mO(n)}function bg(e,n,t){var r;n===void 0&&(n=[]),t===void 0&&(t=!0);const i=mO(e),a=i===((r=e.ownerDocument)==null?void 0:r.body),s=Ko(i);if(a){const l=TS(s);return n.concat(s,s.visualViewport||[],Vg(i)?i:[],l&&t?bg(l):[])}return n.concat(i,bg(i,[],t))}function TS(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const sm=Math.min,Jh=Math.max,Rx=Math.round,Sy=Math.floor,Ec=e=>({x:e,y:e}),mY={left:"right",right:"left",bottom:"top",top:"bottom"},gY={start:"end",end:"start"};function bY(e,n,t){return Jh(e,sm(n,t))}function _v(e,n){return typeof e=="function"?e(n):e}function om(e){return e.split("-")[0]}function Yg(e){return e.split("-")[1]}function yY(e){return e==="x"?"y":"x"}function pA(e){return e==="y"?"height":"width"}const xY=new Set(["top","bottom"]);function Hh(e){return xY.has(om(e))?"y":"x"}function mA(e){return yY(Hh(e))}function vY(e,n,t){t===void 0&&(t=!1);const r=Yg(e),i=mA(e),a=pA(i);let s=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return n.reference[a]>n.floating[a]&&(s=Mx(s)),[s,Mx(s)]}function wY(e){const n=Mx(e);return[OS(e),n,OS(n)]}function OS(e){return e.replace(/start|end/g,n=>gY[n])}const nE=["left","right"],rE=["right","left"],SY=["top","bottom"],AY=["bottom","top"];function CY(e,n,t){switch(e){case"top":case"bottom":return t?n?rE:nE:n?nE:rE;case"left":case"right":return n?SY:AY;default:return[]}}function kY(e,n,t,r){const i=Yg(e);let a=CY(om(e),t==="start",r);return i&&(a=a.map(s=>s+"-"+i),n&&(a=a.concat(a.map(OS)))),a}function Mx(e){return e.replace(/left|right|bottom|top/g,n=>mY[n])}function EY(e){return{top:0,right:0,bottom:0,left:0,...e}}function gO(e){return typeof e!="number"?EY(e):{top:e,right:e,bottom:e,left:e}}function Fx(e){const{x:n,y:t,width:r,height:i}=e;return{width:r,height:i,top:t,left:n,right:n+r,bottom:t+i,x:n,y:t}}var _Y=typeof document<"u",NY=function(){},Px=_Y?X.useLayoutEffect:NY;const jY={..._6},TY=jY.useInsertionEffect,OY=TY||(e=>e());function DY(e){const n=X.useRef(()=>{});return OY(()=>{n.current=e}),X.useCallback(function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return n.current==null?void 0:n.current(...r)},[])}function iE(e,n,t){let{reference:r,floating:i}=e;const a=Hh(n),s=mA(n),l=pA(s),u=om(n),d=a==="y",f=r.x+r.width/2-i.width/2,m=r.y+r.height/2-i.height/2,b=r[l]/2-i[l]/2;let g;switch(u){case"top":g={x:f,y:r.y-i.height};break;case"bottom":g={x:f,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:m};break;case"left":g={x:r.x-i.width,y:m};break;default:g={x:r.x,y:r.y}}switch(Yg(n)){case"start":g[s]-=b*(t&&d?-1:1);break;case"end":g[s]+=b*(t&&d?-1:1);break}return g}const IY=async(e,n,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:s}=t,l=a.filter(Boolean),u=await(s.isRTL==null?void 0:s.isRTL(n));let d=await s.getElementRects({reference:e,floating:n,strategy:i}),{x:f,y:m}=iE(d,r,u),b=r,g={},x=0;for(let y=0;y<l.length;y++){const{name:A,fn:w}=l[y],{x:C,y:j,data:F,reset:M}=await w({x:f,y:m,initialPlacement:r,placement:b,strategy:i,middlewareData:g,rects:d,platform:s,elements:{reference:e,floating:n}});f=C??f,m=j??m,g={...g,[A]:{...g[A],...F}},M&&x<=50&&(x++,typeof M=="object"&&(M.placement&&(b=M.placement),M.rects&&(d=M.rects===!0?await s.getElementRects({reference:e,floating:n,strategy:i}):M.rects),{x:f,y:m}=iE(d,b,u)),y=-1)}return{x:f,y:m,placement:b,strategy:i,middlewareData:g}};async function LY(e,n){var t;n===void 0&&(n={});const{x:r,y:i,platform:a,rects:s,elements:l,strategy:u}=e,{boundary:d="clippingAncestors",rootBoundary:f="viewport",elementContext:m="floating",altBoundary:b=!1,padding:g=0}=_v(n,e),x=gO(g),A=l[b?m==="floating"?"reference":"floating":m],w=Fx(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(A)))==null||t?A:A.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:d,rootBoundary:f,strategy:u})),C=m==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,j=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),F=await(a.isElement==null?void 0:a.isElement(j))?await(a.getScale==null?void 0:a.getScale(j))||{x:1,y:1}:{x:1,y:1},M=Fx(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:C,offsetParent:j,strategy:u}):C);return{top:(w.top-M.top+x.top)/F.y,bottom:(M.bottom-w.bottom+x.bottom)/F.y,left:(w.left-M.left+x.left)/F.x,right:(M.right-w.right+x.right)/F.x}}const RY=e=>({name:"arrow",options:e,async fn(n){const{x:t,y:r,placement:i,rects:a,platform:s,elements:l,middlewareData:u}=n,{element:d,padding:f=0}=_v(e,n)||{};if(d==null)return{};const m=gO(f),b={x:t,y:r},g=mA(i),x=pA(g),y=await s.getDimensions(d),A=g==="y",w=A?"top":"left",C=A?"bottom":"right",j=A?"clientHeight":"clientWidth",F=a.reference[x]+a.reference[g]-b[g]-a.floating[x],M=b[g]-a.reference[g],z=await(s.getOffsetParent==null?void 0:s.getOffsetParent(d));let _=z?z[j]:0;(!_||!await(s.isElement==null?void 0:s.isElement(z)))&&(_=l.floating[j]||a.floating[x]);const L=F/2-M/2,$=_/2-y[x]/2-1,Z=sm(m[w],$),O=sm(m[C],$),T=Z,R=_-y[x]-O,N=_/2-y[x]/2+L,G=bY(T,N,R),W=!u.arrow&&Yg(i)!=null&&N!==G&&a.reference[x]/2-(N<T?Z:O)-y[x]/2<0,Q=W?N<T?N-T:N-R:0;return{[g]:b[g]+Q,data:{[g]:G,centerOffset:N-G-Q,...W&&{alignmentOffset:Q}},reset:W}}}),MY=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(n){var t,r;const{placement:i,middlewareData:a,rects:s,initialPlacement:l,platform:u,elements:d}=n,{mainAxis:f=!0,crossAxis:m=!0,fallbackPlacements:b,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:y=!0,...A}=_v(e,n);if((t=a.arrow)!=null&&t.alignmentOffset)return{};const w=om(i),C=Hh(l),j=om(l)===l,F=await(u.isRTL==null?void 0:u.isRTL(d.floating)),M=b||(j||!y?[Mx(l)]:wY(l)),z=x!=="none";!b&&z&&M.push(...kY(l,y,x,F));const _=[l,...M],L=await LY(n,A),$=[];let Z=((r=a.flip)==null?void 0:r.overflows)||[];if(f&&$.push(L[w]),m){const N=vY(i,s,F);$.push(L[N[0]],L[N[1]])}if(Z=[...Z,{placement:i,overflows:$}],!$.every(N=>N<=0)){var O,T;const N=(((O=a.flip)==null?void 0:O.index)||0)+1,G=_[N];if(G&&(!(m==="alignment"?C!==Hh(G):!1)||Z.every(J=>J.overflows[0]>0&&Hh(J.placement)===C)))return{data:{index:N,overflows:Z},reset:{placement:G}};let W=(T=Z.filter(Q=>Q.overflows[0]<=0).sort((Q,J)=>Q.overflows[1]-J.overflows[1])[0])==null?void 0:T.placement;if(!W)switch(g){case"bestFit":{var R;const Q=(R=Z.filter(J=>{if(z){const se=Hh(J.placement);return se===C||se==="y"}return!0}).map(J=>[J.placement,J.overflows.filter(se=>se>0).reduce((se,U)=>se+U,0)]).sort((J,se)=>J[1]-se[1])[0])==null?void 0:R[0];Q&&(W=Q);break}case"initialPlacement":W=l;break}if(i!==W)return{reset:{placement:W}}}return{}}}},FY=new Set(["left","top"]);async function PY(e,n){const{placement:t,platform:r,elements:i}=e,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=om(t),l=Yg(t),u=Hh(t)==="y",d=FY.has(s)?-1:1,f=a&&u?-1:1,m=_v(n,e);let{mainAxis:b,crossAxis:g,alignmentAxis:x}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof x=="number"&&(g=l==="end"?x*-1:x),u?{x:g*f,y:b*d}:{x:b*d,y:g*f}}const zY=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(n){var t,r;const{x:i,y:a,placement:s,middlewareData:l}=n,u=await PY(n,e);return s===((t=l.offset)==null?void 0:t.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:a+u.y,data:{...u,placement:s}}}}};function bO(e){const n=Dl(e);let t=parseFloat(n.width)||0,r=parseFloat(n.height)||0;const i=Mc(e),a=i?e.offsetWidth:t,s=i?e.offsetHeight:r,l=Rx(t)!==a||Rx(r)!==s;return l&&(t=a,r=s),{width:t,height:r,$:l}}function gA(e){return to(e)?e:e.contextElement}function M0(e){const n=gA(e);if(!Mc(n))return Ec(1);const t=n.getBoundingClientRect(),{width:r,height:i,$:a}=bO(n);let s=(a?Rx(t.width):t.width)/r,l=(a?Rx(t.height):t.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!l||!Number.isFinite(l))&&(l=1),{x:s,y:l}}const qY=Ec(0);function yO(e){const n=Ko(e);return!hA()||!n.visualViewport?qY:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function BY(e,n,t){return n===void 0&&(n=!1),!t||n&&t!==Ko(e)?!1:n}function dp(e,n,t,r){n===void 0&&(n=!1),t===void 0&&(t=!1);const i=e.getBoundingClientRect(),a=gA(e);let s=Ec(1);n&&(r?to(r)&&(s=M0(r)):s=M0(e));const l=BY(a,t,r)?yO(a):Ec(0);let u=(i.left+l.x)/s.x,d=(i.top+l.y)/s.y,f=i.width/s.x,m=i.height/s.y;if(a){const b=Ko(a),g=r&&to(r)?Ko(r):r;let x=b,y=TS(x);for(;y&&r&&g!==x;){const A=M0(y),w=y.getBoundingClientRect(),C=Dl(y),j=w.left+(y.clientLeft+parseFloat(C.paddingLeft))*A.x,F=w.top+(y.clientTop+parseFloat(C.paddingTop))*A.y;u*=A.x,d*=A.y,f*=A.x,m*=A.y,u+=j,d+=F,x=Ko(y),y=TS(x)}}return Fx({width:f,height:m,x:u,y:d})}function bA(e,n){const t=Ev(e).scrollLeft;return n?n.left+t:dp(zc(e)).left+t}function xO(e,n,t){t===void 0&&(t=!1);const r=e.getBoundingClientRect(),i=r.left+n.scrollLeft-(t?0:bA(e,r)),a=r.top+n.scrollTop;return{x:i,y:a}}function $Y(e){let{elements:n,rect:t,offsetParent:r,strategy:i}=e;const a=i==="fixed",s=zc(r),l=n?kv(n.floating):!1;if(r===s||l&&a)return t;let u={scrollLeft:0,scrollTop:0},d=Ec(1);const f=Ec(0),m=Mc(r);if((m||!m&&!a)&&((fm(r)!=="body"||Vg(s))&&(u=Ev(r)),Mc(r))){const g=dp(r);d=M0(r),f.x=g.x+r.clientLeft,f.y=g.y+r.clientTop}const b=s&&!m&&!a?xO(s,u,!0):Ec(0);return{width:t.width*d.x,height:t.height*d.y,x:t.x*d.x-u.scrollLeft*d.x+f.x+b.x,y:t.y*d.y-u.scrollTop*d.y+f.y+b.y}}function UY(e){return Array.from(e.getClientRects())}function HY(e){const n=zc(e),t=Ev(e),r=e.ownerDocument.body,i=Jh(n.scrollWidth,n.clientWidth,r.scrollWidth,r.clientWidth),a=Jh(n.scrollHeight,n.clientHeight,r.scrollHeight,r.clientHeight);let s=-t.scrollLeft+bA(e);const l=-t.scrollTop;return Dl(r).direction==="rtl"&&(s+=Jh(n.clientWidth,r.clientWidth)-i),{width:i,height:a,x:s,y:l}}function WY(e,n){const t=Ko(e),r=zc(e),i=t.visualViewport;let a=r.clientWidth,s=r.clientHeight,l=0,u=0;if(i){a=i.width,s=i.height;const d=hA();(!d||d&&n==="fixed")&&(l=i.offsetLeft,u=i.offsetTop)}return{width:a,height:s,x:l,y:u}}const VY=new Set(["absolute","fixed"]);function YY(e,n){const t=dp(e,!0,n==="fixed"),r=t.top+e.clientTop,i=t.left+e.clientLeft,a=Mc(e)?M0(e):Ec(1),s=e.clientWidth*a.x,l=e.clientHeight*a.y,u=i*a.x,d=r*a.y;return{width:s,height:l,x:u,y:d}}function aE(e,n,t){let r;if(n==="viewport")r=WY(e,t);else if(n==="document")r=HY(zc(e));else if(to(n))r=YY(n,t);else{const i=yO(e);r={x:n.x-i.x,y:n.y-i.y,width:n.width,height:n.height}}return Fx(r)}function vO(e,n){const t=Xf(e);return t===n||!to(t)||am(t)?!1:Dl(t).position==="fixed"||vO(t,n)}function GY(e,n){const t=n.get(e);if(t)return t;let r=bg(e,[],!1).filter(l=>to(l)&&fm(l)!=="body"),i=null;const a=Dl(e).position==="fixed";let s=a?Xf(e):e;for(;to(s)&&!am(s);){const l=Dl(s),u=fA(s);!u&&l.position==="fixed"&&(i=null),(a?!u&&!i:!u&&l.position==="static"&&!!i&&VY.has(i.position)||Vg(s)&&!u&&vO(e,s))?r=r.filter(f=>f!==s):i=l,s=Xf(s)}return n.set(e,r),r}function QY(e){let{element:n,boundary:t,rootBoundary:r,strategy:i}=e;const s=[...t==="clippingAncestors"?kv(n)?[]:GY(n,this._c):[].concat(t),r],l=s[0],u=s.reduce((d,f)=>{const m=aE(n,f,i);return d.top=Jh(m.top,d.top),d.right=sm(m.right,d.right),d.bottom=sm(m.bottom,d.bottom),d.left=Jh(m.left,d.left),d},aE(n,l,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function KY(e){const{width:n,height:t}=bO(e);return{width:n,height:t}}function XY(e,n,t){const r=Mc(n),i=zc(n),a=t==="fixed",s=dp(e,!0,a,n);let l={scrollLeft:0,scrollTop:0};const u=Ec(0);function d(){u.x=bA(i)}if(r||!r&&!a)if((fm(n)!=="body"||Vg(i))&&(l=Ev(n)),r){const g=dp(n,!0,a,n);u.x=g.x+n.clientLeft,u.y=g.y+n.clientTop}else i&&d();a&&!r&&i&&d();const f=i&&!r&&!a?xO(i,l):Ec(0),m=s.left+l.scrollLeft-u.x-f.x,b=s.top+l.scrollTop-u.y-f.y;return{x:m,y:b,width:s.width,height:s.height}}function Z5(e){return Dl(e).position==="static"}function sE(e,n){if(!Mc(e)||Dl(e).position==="fixed")return null;if(n)return n(e);let t=e.offsetParent;return zc(e)===t&&(t=t.ownerDocument.body),t}function wO(e,n){const t=Ko(e);if(kv(e))return t;if(!Mc(e)){let i=Xf(e);for(;i&&!am(i);){if(to(i)&&!Z5(i))return i;i=Xf(i)}return t}let r=sE(e,n);for(;r&&lY(r)&&Z5(r);)r=sE(r,n);return r&&am(r)&&Z5(r)&&!fA(r)?t:r||hY(e)||t}const ZY=async function(e){const n=this.getOffsetParent||wO,t=this.getDimensions,r=await t(e.floating);return{reference:XY(e.reference,await n(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function JY(e){return Dl(e).direction==="rtl"}const eG={convertOffsetParentRelativeRectToViewportRelativeRect:$Y,getDocumentElement:zc,getClippingRect:QY,getOffsetParent:wO,getElementRects:ZY,getClientRects:UY,getDimensions:KY,getScale:M0,isElement:to,isRTL:JY};function SO(e,n){return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height}function tG(e,n){let t=null,r;const i=zc(e);function a(){var l;clearTimeout(r),(l=t)==null||l.disconnect(),t=null}function s(l,u){l===void 0&&(l=!1),u===void 0&&(u=1),a();const d=e.getBoundingClientRect(),{left:f,top:m,width:b,height:g}=d;if(l||n(),!b||!g)return;const x=Sy(m),y=Sy(i.clientWidth-(f+b)),A=Sy(i.clientHeight-(m+g)),w=Sy(f),j={rootMargin:-x+"px "+-y+"px "+-A+"px "+-w+"px",threshold:Jh(0,sm(1,u))||1};let F=!0;function M(z){const _=z[0].intersectionRatio;if(_!==u){if(!F)return s();_?s(!1,_):r=setTimeout(()=>{s(!1,1e-7)},1e3)}_===1&&!SO(d,e.getBoundingClientRect())&&s(),F=!1}try{t=new IntersectionObserver(M,{...j,root:i.ownerDocument})}catch{t=new IntersectionObserver(M,j)}t.observe(e)}return s(!0),a}function nG(e,n,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,d=gA(e),f=i||a?[...d?bg(d):[],...bg(n)]:[];f.forEach(w=>{i&&w.addEventListener("scroll",t,{passive:!0}),a&&w.addEventListener("resize",t)});const m=d&&l?tG(d,t):null;let b=-1,g=null;s&&(g=new ResizeObserver(w=>{let[C]=w;C&&C.target===d&&g&&(g.unobserve(n),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var j;(j=g)==null||j.observe(n)})),t()}),d&&!u&&g.observe(d),g.observe(n));let x,y=u?dp(e):null;u&&A();function A(){const w=dp(e);y&&!SO(y,w)&&t(),y=w,x=requestAnimationFrame(A)}return t(),()=>{var w;f.forEach(C=>{i&&C.removeEventListener("scroll",t),a&&C.removeEventListener("resize",t)}),m==null||m(),(w=g)==null||w.disconnect(),g=null,u&&cancelAnimationFrame(x)}}const rG=zY,iG=MY,oE=RY,aG=(e,n,t)=>{const r=new Map,i={platform:eG,...t},a={...i.platform,_c:r};return IY(e,n,{...i,platform:a})};var sG=typeof document<"u",oG=function(){},Qy=sG?X.useLayoutEffect:oG;function zx(e,n){if(e===n)return!0;if(typeof e!=typeof n)return!1;if(typeof e=="function"&&e.toString()===n.toString())return!0;let t,r,i;if(e&&n&&typeof e=="object"){if(Array.isArray(e)){if(t=e.length,t!==n.length)return!1;for(r=t;r--!==0;)if(!zx(e[r],n[r]))return!1;return!0}if(i=Object.keys(e),t=i.length,t!==Object.keys(n).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(n,i[r]))return!1;for(r=t;r--!==0;){const a=i[r];if(!(a==="_owner"&&e.$$typeof)&&!zx(e[a],n[a]))return!1}return!0}return e!==e&&n!==n}function AO(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function lE(e,n){const t=AO(e);return Math.round(n*t)/t}function J5(e){const n=X.useRef(e);return Qy(()=>{n.current=e}),n}function lG(e){e===void 0&&(e={});const{placement:n="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:s}={},transform:l=!0,whileElementsMounted:u,open:d}=e,[f,m]=X.useState({x:0,y:0,strategy:t,placement:n,middlewareData:{},isPositioned:!1}),[b,g]=X.useState(r);zx(b,r)||g(r);const[x,y]=X.useState(null),[A,w]=X.useState(null),C=X.useCallback(J=>{J!==z.current&&(z.current=J,y(J))},[]),j=X.useCallback(J=>{J!==_.current&&(_.current=J,w(J))},[]),F=a||x,M=s||A,z=X.useRef(null),_=X.useRef(null),L=X.useRef(f),$=u!=null,Z=J5(u),O=J5(i),T=J5(d),R=X.useCallback(()=>{if(!z.current||!_.current)return;const J={placement:n,strategy:t,middleware:b};O.current&&(J.platform=O.current),aG(z.current,_.current,J).then(se=>{const U={...se,isPositioned:T.current!==!1};N.current&&!zx(L.current,U)&&(L.current=U,n3.flushSync(()=>{m(U)}))})},[b,n,t,O,T]);Qy(()=>{d===!1&&L.current.isPositioned&&(L.current.isPositioned=!1,m(J=>({...J,isPositioned:!1})))},[d]);const N=X.useRef(!1);Qy(()=>(N.current=!0,()=>{N.current=!1}),[]),Qy(()=>{if(F&&(z.current=F),M&&(_.current=M),F&&M){if(Z.current)return Z.current(F,M,R);R()}},[F,M,R,Z,$]);const G=X.useMemo(()=>({reference:z,floating:_,setReference:C,setFloating:j}),[C,j]),W=X.useMemo(()=>({reference:F,floating:M}),[F,M]),Q=X.useMemo(()=>{const J={position:t,left:0,top:0};if(!W.floating)return J;const se=lE(W.floating,f.x),U=lE(W.floating,f.y);return l?{...J,transform:"translate("+se+"px, "+U+"px)",...AO(W.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:se,top:U}},[t,l,W.floating,f.x,f.y]);return X.useMemo(()=>({...f,update:R,refs:G,elements:W,floatingStyles:Q}),[f,R,G,W,Q])}const uG=e=>{function n(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:e,fn(t){const{element:r,padding:i}=typeof e=="function"?e(t):e;return r&&n(r)?r.current!=null?oE({element:r.current,padding:i}).fn(t):{}:r?oE({element:r,padding:i}).fn(t):{}}}},cG=(e,n)=>({...rG(e),options:[e,n]}),dG=(e,n)=>({...iG(e),options:[e,n]}),fG=(e,n)=>({...uG(e),options:[e,n]}),hG={..._6};let uE=!1,pG=0;const cE=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+pG++;function mG(){const[e,n]=X.useState(()=>uE?cE():void 0);return Px(()=>{e==null&&n(cE())},[]),X.useEffect(()=>{uE=!0},[]),e}const gG=hG.useId,CO=gG||mG,bG=X.forwardRef(function(n,t){const{context:{placement:r,elements:{floating:i},middlewareData:{arrow:a,shift:s}},width:l=14,height:u=7,tipRadius:d=0,strokeWidth:f=0,staticOffset:m,stroke:b,d:g,style:{transform:x,...y}={},...A}=n,w=CO(),[C,j]=X.useState(!1);if(Px(()=>{if(!i)return;Dl(i).direction==="rtl"&&j(!0)},[i]),!i)return null;const[F,M]=r.split("-"),z=F==="top"||F==="bottom";let _=m;(z&&s!=null&&s.x||!z&&s!=null&&s.y)&&(_=null);const L=f*2,$=L/2,Z=l/2*(d/-8+1),O=u/2*d/4,T=!!g,R=_&&M==="end"?"bottom":"top";let N=_&&M==="end"?"right":"left";_&&C&&(N=M==="end"?"left":"right");const G=(a==null?void 0:a.x)!=null?_||a.x:"",W=(a==null?void 0:a.y)!=null?_||a.y:"",Q=g||"M0,0"+(" H"+l)+(" L"+(l-Z)+","+(u-O))+(" Q"+l/2+","+u+" "+Z+","+(u-O))+" Z",J={top:T?"rotate(180deg)":"",left:T?"rotate(90deg)":"rotate(-90deg)",bottom:T?"":"rotate(180deg)",right:T?"rotate(-90deg)":"rotate(90deg)"}[F];return h.jsxs("svg",{...A,"aria-hidden":!0,ref:t,width:T?l:l+L,height:l,viewBox:"0 0 "+l+" "+(u>l?u:l),style:{position:"absolute",pointerEvents:"none",[N]:G,[R]:W,[F]:z||T?"100%":"calc(100% - "+L/2+"px)",transform:[J,x].filter(se=>!!se).join(" "),...y},children:[L>0&&h.jsx("path",{clipPath:"url(#"+w+")",fill:"none",stroke:b,strokeWidth:L+(g?0:1),d:Q}),h.jsx("path",{stroke:L&&!g?A.fill:"none",d:Q}),h.jsx("clipPath",{id:w,children:h.jsx("rect",{x:-$,y:$*(T?-1:1),width:l+L,height:l})})]})});function yG(){const e=new Map;return{emit(n,t){var r;(r=e.get(n))==null||r.forEach(i=>i(t))},on(n,t){e.has(n)||e.set(n,new Set),e.get(n).add(t)},off(n,t){var r;(r=e.get(n))==null||r.delete(t)}}}const xG=X.createContext(null),vG=X.createContext(null),wG=()=>{var e;return((e=X.useContext(xG))==null?void 0:e.id)||null},SG=()=>X.useContext(vG);function AG(e){const{open:n=!1,onOpenChange:t,elements:r}=e,i=CO(),a=X.useRef({}),[s]=X.useState(()=>yG()),l=wG()!=null,[u,d]=X.useState(r.reference),f=DY((g,x,y)=>{a.current.openEvent=g?x:void 0,s.emit("openchange",{open:g,event:x,reason:y,nested:l}),t==null||t(g,x,y)}),m=X.useMemo(()=>({setPositionReference:d}),[]),b=X.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return X.useMemo(()=>({dataRef:a,open:n,onOpenChange:f,elements:b,events:s,floatingId:i,refs:m}),[n,f,b,s,i,m])}function CG(e){e===void 0&&(e={});const{nodeId:n}=e,t=AG({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||t,i=r.elements,[a,s]=X.useState(null),[l,u]=X.useState(null),f=(i==null?void 0:i.domReference)||a,m=X.useRef(null),b=SG();Px(()=>{f&&(m.current=f)},[f]);const g=lG({...e,elements:{...i,...l&&{reference:l}}}),x=X.useCallback(j=>{const F=to(j)?{getBoundingClientRect:()=>j.getBoundingClientRect(),getClientRects:()=>j.getClientRects(),contextElement:j}:j;u(F),g.refs.setReference(F)},[g.refs]),y=X.useCallback(j=>{(to(j)||j===null)&&(m.current=j,s(j)),(to(g.refs.reference.current)||g.refs.reference.current===null||j!==null&&!to(j))&&g.refs.setReference(j)},[g.refs]),A=X.useMemo(()=>({...g.refs,setReference:y,setPositionReference:x,domReference:m}),[g.refs,y,x]),w=X.useMemo(()=>({...g.elements,domReference:f}),[g.elements,f]),C=X.useMemo(()=>({...g,...r,refs:A,elements:w,nodeId:n}),[g,A,w,n,r]);return Px(()=>{r.dataRef.current.floatingContext=C;const j=b==null?void 0:b.nodesRef.current.find(F=>F.id===n);j&&(j.context=C)}),X.useMemo(()=>({...g,context:C,refs:A,elements:w}),[g,A,w,C])}/*!
  react-datepicker v7.6.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var DS=function(n,t){return DS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},DS(n,t)};function rs(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");DS(e,n);function t(){this.constructor=e}e.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}var nr=function(){return nr=Object.assign||function(t){for(var r,i=1,a=arguments.length;i<a;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},nr.apply(this,arguments)};function vc(e,n,t){if(t||arguments.length===2)for(var r=0,i=n.length,a;r<i;r++)(a||!(r in n))&&(a||(a=Array.prototype.slice.call(n,0,r)),a[r]=n[r]);return e.concat(a||Array.prototype.slice.call(n))}var kG=function(e){var n=e.showTimeSelectOnly,t=n===void 0?!1:n,r=e.showTime,i=r===void 0?!1:r,a=e.className,s=e.children,l=t?"Choose Time":"Choose Date".concat(i?" and Time":"");return st.createElement("div",{className:a,role:"dialog","aria-label":l,"aria-modal":"true"},s)},EG=function(e,n){var t=X.useRef(null),r=X.useRef(e);r.current=e;var i=X.useCallback(function(a){var s;t.current&&!t.current.contains(a.target)&&(n&&a.target instanceof HTMLElement&&a.target.classList.contains(n)||(s=r.current)===null||s===void 0||s.call(r,a))},[n]);return X.useEffect(function(){return document.addEventListener("mousedown",i),function(){document.removeEventListener("mousedown",i)}},[i]),t},Nv=function(e){var n=e.children,t=e.onClickOutside,r=e.className,i=e.containerRef,a=e.style,s=e.ignoreClass,l=EG(t,s);return st.createElement("div",{className:r,style:a,ref:function(u){l.current=u,i&&(i.current=u)}},n)},It;(function(e){e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.PageUp="PageUp",e.PageDown="PageDown",e.Home="Home",e.End="End",e.Enter="Enter",e.Space=" ",e.Tab="Tab",e.Escape="Escape",e.Backspace="Backspace",e.X="x"})(It||(It={}));function kO(){var e=typeof window<"u"?window:globalThis;return e}var Gg=12,_G=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;function Lr(e){if(e==null)return new Date;var n=typeof e=="string"?UV(e):Mt(e);return gd(n)?n:new Date}function ew(e,n,t,r,i){var a,s=null,l=ep(t)||ep(Q1()),u=!0;if(Array.isArray(n))return n.forEach(function(f){var m=K5(e,f,new Date,{locale:l,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});r&&(u=gd(m,i)&&e===pi(m,f,t)),gd(m,i)&&u&&(s=m)}),s;if(s=K5(e,n,new Date,{locale:l,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0}),r)u=gd(s)&&e===pi(s,n,t);else if(!gd(s)){var d=((a=n.match(_G))!==null&&a!==void 0?a:[]).map(function(f){var m=f[0];if(m==="p"||m==="P"){var b=Ix[m];return l?b(f,l.formatLong):m}return f}).join("");e.length>0&&(s=K5(e,d.slice(0,e.length),new Date,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})),gd(s)||(s=new Date(e))}return gd(s)&&u?s:null}function gd(e,n){return jx(e)&&!cp(e,n??new Date("1/1/1800"))}function pi(e,n,t){if(t==="en")return Z4(e,n,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var r=t?ep(t):void 0;return t&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(t,'"].')),!r&&Q1()&&ep(Q1())&&(r=ep(Q1())),Z4(e,n,{locale:r,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function wl(e,n){var t=n.dateFormat,r=n.locale,i=Array.isArray(t)&&t.length>0?t[0]:t;return e&&pi(e,i,r)||""}function NG(e,n,t){if(!e)return"";var r=wl(e,t),i=n?wl(n,t):"";return"".concat(r," - ").concat(i)}function jG(e,n){if(!(e!=null&&e.length))return"";var t=e[0]?wl(e[0],n):"";if(e.length===1)return t;if(e.length===2&&e[1]){var r=wl(e[1],n);return"".concat(t,", ").concat(r)}var i=e.length-1;return"".concat(t," (+").concat(i,")")}function tw(e,n){var t=n.hour,r=t===void 0?0:t,i=n.minute,a=i===void 0?0:i,s=n.second,l=s===void 0?0:s;return Vy(Yy(Gy(e,l),a),r)}function TG(e){return lA(e)}function OG(e,n){return pi(e,"ddd",n)}function Ky(e){return up(e)}function Vf(e,n,t){var r=ep(n||Q1());return Rd(e,{locale:r,weekStartsOn:t})}function Nd(e){return tO(e)}function W1(e){return Av(e)}function dE(e){return _S(e)}function fE(){return up(Lr())}function hE(e){return J7(e)}function DG(e){return GH(e)}function IG(e){return eO(e)}function lc(e,n){return e&&n?BV(e,n):!e&&!n}function Js(e,n){return e&&n?zV(e,n):!e&&!n}function qx(e,n){return e&&n?qV(e,n):!e&&!n}function Kn(e,n){return e&&n?VH(e,n):!e&&!n}function Wh(e,n){return e&&n?HW(e,n):!e&&!n}function V1(e,n,t){var r,i=up(n),a=J7(t);try{r=gg(e,{start:i,end:a})}catch{r=!1}return r}function Q1(){var e=kO();return e.__localeId__}function ep(e){if(typeof e=="string"){var n=kO();return n.__localeData__?n.__localeData__[e]:void 0}else return e}function LG(e,n,t){return n(pi(e,"EEEE",t))}function RG(e,n){return pi(e,"EEEEEE",n)}function MG(e,n){return pi(e,"EEE",n)}function yA(e,n){return pi(Uo(Lr(),e),"LLLL",n)}function EO(e,n){return pi(Uo(Lr(),e),"LLL",n)}function FG(e,n){return pi(_0(Lr(),e),"QQQ",n)}function Cl(e,n){var t=n===void 0?{}:n,r=t.minDate,i=t.maxDate,a=t.excludeDates,s=t.excludeDateIntervals,l=t.includeDates,u=t.includeDateIntervals,d=t.filterDate;return Qg(e,{minDate:r,maxDate:i})||a&&a.some(function(f){return f instanceof Date?Kn(e,f):Kn(e,f.date)})||s&&s.some(function(f){var m=f.start,b=f.end;return gg(e,{start:m,end:b})})||l&&!l.some(function(f){return Kn(e,f)})||u&&!u.some(function(f){var m=f.start,b=f.end;return gg(e,{start:m,end:b})})||d&&!d(Lr(e))||!1}function xA(e,n){var t=n===void 0?{}:n,r=t.excludeDates,i=t.excludeDateIntervals;return i&&i.length>0?i.some(function(a){var s=a.start,l=a.end;return gg(e,{start:s,end:l})}):r&&r.some(function(a){var s;return a instanceof Date?Kn(e,a):Kn(e,(s=a.date)!==null&&s!==void 0?s:new Date)})||!1}function _O(e,n){var t=n===void 0?{}:n,r=t.minDate,i=t.maxDate,a=t.excludeDates,s=t.includeDates,l=t.filterDate;return Qg(e,{minDate:r?tO(r):void 0,maxDate:i?eO(i):void 0})||(a==null?void 0:a.some(function(u){return Js(e,u instanceof Date?u:u.date)}))||s&&!s.some(function(u){return Js(e,u)})||l&&!l(Lr(e))||!1}function Ay(e,n,t,r){var i=Fn(e),a=eo(e),s=Fn(n),l=eo(n),u=Fn(r);return i===s&&i===u?a<=t&&t<=l:i<s?u===i&&a<=t||u===s&&l>=t||u<s&&u>i:!1}function PG(e,n){var t=n===void 0?{}:n,r=t.minDate,i=t.maxDate,a=t.excludeDates,s=t.includeDates;return Qg(e,{minDate:r,maxDate:i})||a&&a.some(function(l){return Js(l instanceof Date?l:l.date,e)})||s&&!s.some(function(l){return Js(l,e)})||!1}function Cy(e,n){var t=n===void 0?{}:n,r=t.minDate,i=t.maxDate,a=t.excludeDates,s=t.includeDates,l=t.filterDate;return Qg(e,{minDate:r,maxDate:i})||(a==null?void 0:a.some(function(u){return qx(e,u instanceof Date?u:u.date)}))||s&&!s.some(function(u){return qx(e,u)})||l&&!l(Lr(e))||!1}function ky(e,n,t){if(!n||!t||!jx(n)||!jx(t))return!1;var r=Fn(n),i=Fn(t);return r<=e&&i>=e}function Xy(e,n){var t=n===void 0?{}:n,r=t.minDate,i=t.maxDate,a=t.excludeDates,s=t.includeDates,l=t.filterDate,u=new Date(e,0,1);return Qg(u,{minDate:r?Av(r):void 0,maxDate:i?nO(i):void 0})||(a==null?void 0:a.some(function(d){return lc(u,d instanceof Date?d:d.date)}))||s&&!s.some(function(d){return lc(u,d)})||l&&!l(Lr(u))||!1}function Ey(e,n,t,r){var i=Fn(e),a=Xh(e),s=Fn(n),l=Xh(n),u=Fn(r);return i===s&&i===u?a<=t&&t<=l:i<s?u===i&&a<=t||u===s&&l>=t||u<s&&u>i:!1}function Qg(e,n){var t,r=n===void 0?{}:n,i=r.minDate,a=r.maxDate;return(t=i&&rm(e,i)<0||a&&rm(e,a)>0)!==null&&t!==void 0?t:!1}function pE(e,n){return n.some(function(t){return Cc(t)===Cc(e)&&kc(t)===kc(e)&&_d(t)===_d(e)})}function mE(e,n){var t=n===void 0?{}:n,r=t.excludeTimes,i=t.includeTimes,a=t.filterTime;return r&&pE(e,r)||i&&!pE(e,i)||a&&!a(e)||!1}function gE(e,n){var t=n.minTime,r=n.maxTime;if(!t||!r)throw new Error("Both minTime and maxTime props required");var i=Lr();i=Vy(i,Cc(e)),i=Yy(i,kc(e)),i=Gy(i,_d(e));var a=Lr();a=Vy(a,Cc(t)),a=Yy(a,kc(t)),a=Gy(a,_d(t));var s=Lr();s=Vy(s,Cc(r)),s=Yy(s,kc(r)),s=Gy(s,_d(r));var l;try{l=!gg(i,{start:a,end:s})}catch{l=!1}return l}function bE(e,n){var t=n===void 0?{}:n,r=t.minDate,i=t.includeDates,a=Zh(e,1);return r&&Tx(r,a)>0||i&&i.every(function(s){return Tx(s,a)>0})||!1}function yE(e,n){var t=n===void 0?{}:n,r=t.maxDate,i=t.includeDates,a=wu(e,1);return r&&Tx(a,r)>0||i&&i.every(function(s){return Tx(a,s)>0})||!1}function zG(e,n){var t=n===void 0?{}:n,r=t.minDate,i=t.includeDates,a=Av(e),s=hO(a);return r&&Ox(r,s)>0||i&&i.every(function(l){return Ox(l,s)>0})||!1}function qG(e,n){var t=n===void 0?{}:n,r=t.maxDate,i=t.includeDates,a=nO(e),s=oA(a,1);return r&&Ox(s,r)>0||i&&i.every(function(l){return Ox(s,l)>0})||!1}function xE(e,n){var t=n===void 0?{}:n,r=t.minDate,i=t.includeDates,a=im(e,1);return r&&Dx(r,a)>0||i&&i.every(function(s){return Dx(s,a)>0})||!1}function BG(e,n){var t=n===void 0?{}:n,r=t.minDate,i=t.yearItemNumber,a=i===void 0?Gg:i,s=W1(im(e,a)),l=Ff(s,a).endPeriod,u=r&&Fn(r);return u&&u>l||!1}function vE(e,n){var t=n===void 0?{}:n,r=t.maxDate,i=t.includeDates,a=kd(e,1);return r&&Dx(a,r)>0||i&&i.every(function(s){return Dx(a,s)>0})||!1}function $G(e,n){var t=n===void 0?{}:n,r=t.maxDate,i=t.yearItemNumber,a=i===void 0?Gg:i,s=kd(e,a),l=Ff(s,a).startPeriod,u=r&&Fn(r);return u&&u<l||!1}function NO(e){var n=e.minDate,t=e.includeDates;if(t&&n){var r=t.filter(function(i){return rm(i,n)>=0});return V4(r)}else return t?V4(t):n}function jO(e){var n=e.maxDate,t=e.includeDates;if(t&&n){var r=t.filter(function(i){return rm(i,n)<=0});return W4(r)}else return t?W4(t):n}function wE(e,n){var t;e===void 0&&(e=[]),n===void 0&&(n="react-datepicker__day--highlighted");for(var r=new Map,i=0,a=e.length;i<a;i++){var s=e[i];if(Ed(s)){var l=pi(s,"MM.dd.yyyy"),u=r.get(l)||[];u.includes(n)||(u.push(n),r.set(l,u))}else if(typeof s=="object"){var d=Object.keys(s),f=(t=d[0])!==null&&t!==void 0?t:"",m=s[f];if(typeof f=="string"&&Array.isArray(m))for(var b=0,g=m.length;b<g;b++){var x=m[b];if(x){var l=pi(x,"MM.dd.yyyy"),u=r.get(l)||[];u.includes(f)||(u.push(f),r.set(l,u))}}}}return r}function UG(e,n){return e.length!==n.length?!1:e.every(function(t,r){return t===n[r]})}function HG(e,n){e===void 0&&(e=[]),n===void 0&&(n="react-datepicker__day--holidays");var t=new Map;return e.forEach(function(r){var i=r.date,a=r.holidayName;if(Ed(i)){var s=pi(i,"MM.dd.yyyy"),l=t.get(s)||{className:"",holidayNames:[]};if(!("className"in l&&l.className===n&&UG(l.holidayNames,[a]))){l.className=n;var u=l.holidayNames;l.holidayNames=u?vc(vc([],u,!0),[a],!1):[a],t.set(s,l)}}}),t}function WG(e,n,t,r,i){for(var a=i.length,s=[],l=0;l<a;l++){var u=e,d=i[l];d&&(u=$H(u,Cc(d)),u=ES(u,kc(d)),u=WH(u,_d(d)));var f=ES(e,(t+1)*r);Kf(u,n)&&cp(u,f)&&d!=null&&s.push(d)}return s}function SE(e){return e<10?"0".concat(e):"".concat(e)}function Ff(e,n){n===void 0&&(n=Gg);var t=Math.ceil(Fn(e)/n)*n,r=t-(n-1);return{startPeriod:r,endPeriod:t}}function VG(e){var n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),t=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+t-+n)/36e5)}function AE(e){var n=e.getSeconds(),t=e.getMilliseconds();return Mt(e.getTime()-n*1e3-t)}function YG(e,n){return AE(e).getTime()===AE(n).getTime()}function CE(e){if(!Ed(e))throw new Error("Invalid date");var n=new Date(e);return n.setHours(0,0,0,0),n}function kE(e,n){if(!Ed(e)||!Ed(n))throw new Error("Invalid date received");var t=CE(e),r=CE(n);return cp(t,r)}function TO(e){return e.key===It.Space}var GG=function(e){rs(n,e);function n(t){var r=e.call(this,t)||this;return r.inputRef=st.createRef(),r.onTimeChange=function(i){var a,s;r.setState({time:i});var l=r.props.date,u=l instanceof Date&&!isNaN(+l),d=u?l:new Date;if(i!=null&&i.includes(":")){var f=i.split(":"),m=f[0],b=f[1];d.setHours(Number(m)),d.setMinutes(Number(b))}(s=(a=r.props).onChange)===null||s===void 0||s.call(a,d)},r.renderTimeInput=function(){var i=r.state.time,a=r.props,s=a.date,l=a.timeString,u=a.customTimeInput;return u?X.cloneElement(u,{date:s,value:i,onChange:r.onTimeChange}):st.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:r.inputRef,onClick:function(){var d;(d=r.inputRef.current)===null||d===void 0||d.focus()},required:!0,value:i,onChange:function(d){r.onTimeChange(d.target.value||l)}})},r.state={time:r.props.timeString},r}return n.getDerivedStateFromProps=function(t,r){return t.timeString!==r.time?{time:t.timeString}:null},n.prototype.render=function(){return st.createElement("div",{className:"react-datepicker__input-time-container"},st.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),st.createElement("div",{className:"react-datepicker-time__input-container"},st.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},n}(X.Component),QG=function(e){rs(n,e);function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.dayEl=X.createRef(),t.handleClick=function(r){!t.isDisabled()&&t.props.onClick&&t.props.onClick(r)},t.handleMouseEnter=function(r){!t.isDisabled()&&t.props.onMouseEnter&&t.props.onMouseEnter(r)},t.handleOnKeyDown=function(r){var i,a,s=r.key;s===It.Space&&(r.preventDefault(),r.key=It.Enter),(a=(i=t.props).handleOnKeyDown)===null||a===void 0||a.call(i,r)},t.isSameDay=function(r){return Kn(t.props.day,r)},t.isKeyboardSelected=function(){var r;if(t.props.disabledKeyboardNavigation)return!1;var i=t.props.selectsMultiple?(r=t.props.selectedDates)===null||r===void 0?void 0:r.some(function(s){return t.isSameDayOrWeek(s)}):t.isSameDayOrWeek(t.props.selected),a=t.props.preSelection&&t.isDisabled(t.props.preSelection);return!i&&t.isSameDayOrWeek(t.props.preSelection)&&!a},t.isDisabled=function(r){return r===void 0&&(r=t.props.day),Cl(r,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate})},t.isExcluded=function(){return xA(t.props.day,{excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals})},t.isStartOfWeek=function(){return Kn(t.props.day,Vf(t.props.day,t.props.locale,t.props.calendarStartDay))},t.isSameWeek=function(r){return t.props.showWeekPicker&&Kn(r,Vf(t.props.day,t.props.locale,t.props.calendarStartDay))},t.isSameDayOrWeek=function(r){return t.isSameDay(r)||t.isSameWeek(r)},t.getHighLightedClass=function(){var r=t.props,i=r.day,a=r.highlightDates;if(!a)return!1;var s=pi(i,"MM.dd.yyyy");return a.get(s)},t.getHolidaysClass=function(){var r,i=t.props,a=i.day,s=i.holidays;if(!s)return[void 0];var l=pi(a,"MM.dd.yyyy");return s.has(l)?[(r=s.get(l))===null||r===void 0?void 0:r.className]:[void 0]},t.isInRange=function(){var r=t.props,i=r.day,a=r.startDate,s=r.endDate;return!a||!s?!1:V1(i,a,s)},t.isInSelectingRange=function(){var r,i=t.props,a=i.day,s=i.selectsStart,l=i.selectsEnd,u=i.selectsRange,d=i.selectsDisabledDaysInRange,f=i.startDate,m=i.endDate,b=(r=t.props.selectingDate)!==null&&r!==void 0?r:t.props.preSelection;return!(s||l||u)||!b||!d&&t.isDisabled()?!1:s&&m&&(cp(b,m)||Wh(b,m))?V1(a,b,m):l&&f&&(Kf(b,f)||Wh(b,f))||u&&f&&!m&&(Kf(b,f)||Wh(b,f))?V1(a,f,b):!1},t.isSelectingRangeStart=function(){var r;if(!t.isInSelectingRange())return!1;var i=t.props,a=i.day,s=i.startDate,l=i.selectsStart,u=(r=t.props.selectingDate)!==null&&r!==void 0?r:t.props.preSelection;return l?Kn(a,u):Kn(a,s)},t.isSelectingRangeEnd=function(){var r;if(!t.isInSelectingRange())return!1;var i=t.props,a=i.day,s=i.endDate,l=i.selectsEnd,u=i.selectsRange,d=(r=t.props.selectingDate)!==null&&r!==void 0?r:t.props.preSelection;return l||u?Kn(a,d):Kn(a,s)},t.isRangeStart=function(){var r=t.props,i=r.day,a=r.startDate,s=r.endDate;return!a||!s?!1:Kn(a,i)},t.isRangeEnd=function(){var r=t.props,i=r.day,a=r.startDate,s=r.endDate;return!a||!s?!1:Kn(s,i)},t.isWeekend=function(){var r=qW(t.props.day);return r===0||r===6},t.isAfterMonth=function(){return t.props.month!==void 0&&(t.props.month+1)%12===eo(t.props.day)},t.isBeforeMonth=function(){return t.props.month!==void 0&&(eo(t.props.day)+1)%12===t.props.month},t.isCurrentDay=function(){return t.isSameDay(Lr())},t.isSelected=function(){var r;return t.props.selectsMultiple?(r=t.props.selectedDates)===null||r===void 0?void 0:r.some(function(i){return t.isSameDayOrWeek(i)}):t.isSameDayOrWeek(t.props.selected)},t.getClassNames=function(r){var i=t.props.dayClassName?t.props.dayClassName(r):void 0;return gs("react-datepicker__day",i,"react-datepicker__day--"+OG(t.props.day),{"react-datepicker__day--disabled":t.isDisabled(),"react-datepicker__day--excluded":t.isExcluded(),"react-datepicker__day--selected":t.isSelected(),"react-datepicker__day--keyboard-selected":t.isKeyboardSelected(),"react-datepicker__day--range-start":t.isRangeStart(),"react-datepicker__day--range-end":t.isRangeEnd(),"react-datepicker__day--in-range":t.isInRange(),"react-datepicker__day--in-selecting-range":t.isInSelectingRange(),"react-datepicker__day--selecting-range-start":t.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":t.isSelectingRangeEnd(),"react-datepicker__day--today":t.isCurrentDay(),"react-datepicker__day--weekend":t.isWeekend(),"react-datepicker__day--outside-month":t.isAfterMonth()||t.isBeforeMonth()},t.getHighLightedClass(),t.getHolidaysClass())},t.getAriaLabel=function(){var r=t.props,i=r.day,a=r.ariaLabelPrefixWhenEnabled,s=a===void 0?"Choose":a,l=r.ariaLabelPrefixWhenDisabled,u=l===void 0?"Not available":l,d=t.isDisabled()||t.isExcluded()?u:s;return"".concat(d," ").concat(pi(i,"PPPP",t.props.locale))},t.getTitle=function(){var r=t.props,i=r.day,a=r.holidays,s=a===void 0?new Map:a,l=r.excludeDates,u=pi(i,"MM.dd.yyyy"),d=[];return s.has(u)&&d.push.apply(d,s.get(u).holidayNames),t.isExcluded()&&d.push(l==null?void 0:l.filter(function(f){return f instanceof Date?Kn(f,i):Kn(f==null?void 0:f.date,i)}).map(function(f){if(!(f instanceof Date))return f==null?void 0:f.message})),d.join(", ")},t.getTabIndex=function(){var r=t.props.selected,i=t.props.preSelection,a=!(t.props.showWeekPicker&&(t.props.showWeekNumber||!t.isStartOfWeek()))&&(t.isKeyboardSelected()||t.isSameDay(r)&&Kn(i,r))?0:-1;return a},t.handleFocusDay=function(){var r;t.shouldFocusDay()&&((r=t.dayEl.current)===null||r===void 0||r.focus({preventScroll:!0}))},t.renderDayContents=function(){return t.props.monthShowsDuplicateDaysEnd&&t.isAfterMonth()||t.props.monthShowsDuplicateDaysStart&&t.isBeforeMonth()?null:t.props.renderDayContents?t.props.renderDayContents(J4(t.props.day),t.props.day):J4(t.props.day)},t.render=function(){return st.createElement("div",{ref:t.dayEl,className:t.getClassNames(t.props.day),onKeyDown:t.handleOnKeyDown,onClick:t.handleClick,onMouseEnter:t.props.usePointerEvent?void 0:t.handleMouseEnter,onPointerEnter:t.props.usePointerEvent?t.handleMouseEnter:void 0,tabIndex:t.getTabIndex(),"aria-label":t.getAriaLabel(),role:"option",title:t.getTitle(),"aria-disabled":t.isDisabled(),"aria-current":t.isCurrentDay()?"date":void 0,"aria-selected":t.isSelected()||t.isInRange()},t.renderDayContents(),t.getTitle()!==""&&st.createElement("span",{className:"overlay"},t.getTitle()))},t}return n.prototype.componentDidMount=function(){this.handleFocusDay()},n.prototype.componentDidUpdate=function(){this.handleFocusDay()},n.prototype.shouldFocusDay=function(){var t=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(t=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(t=!1),this.isDayActiveElement()&&(t=!0),this.isDuplicateDay()&&(t=!1)),t},n.prototype.isDayActiveElement=function(){var t,r,i;return((r=(t=this.props.containerRef)===null||t===void 0?void 0:t.current)===null||r===void 0?void 0:r.contains(document.activeElement))&&((i=document.activeElement)===null||i===void 0?void 0:i.classList.contains("react-datepicker__day"))},n.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},n}(X.Component),KG=function(e){rs(n,e);function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.weekNumberEl=X.createRef(),t.handleClick=function(r){t.props.onClick&&t.props.onClick(r)},t.handleOnKeyDown=function(r){var i,a,s=r.key;s===It.Space&&(r.preventDefault(),r.key=It.Enter),(a=(i=t.props).handleOnKeyDown)===null||a===void 0||a.call(i,r)},t.isKeyboardSelected=function(){return!t.props.disabledKeyboardNavigation&&!Kn(t.props.date,t.props.selected)&&Kn(t.props.date,t.props.preSelection)},t.getTabIndex=function(){return t.props.showWeekPicker&&t.props.showWeekNumber&&(t.isKeyboardSelected()||Kn(t.props.date,t.props.selected)&&Kn(t.props.preSelection,t.props.selected))?0:-1},t.handleFocusWeekNumber=function(r){var i=!1;t.getTabIndex()===0&&!(r!=null&&r.isInputFocused)&&Kn(t.props.date,t.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(i=!0),t.props.inline&&!t.props.shouldFocusDayInline&&(i=!1),t.props.containerRef&&t.props.containerRef.current&&t.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(i=!0)),i&&t.weekNumberEl.current&&t.weekNumberEl.current.focus({preventScroll:!0})},t}return Object.defineProperty(n,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),n.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},n.prototype.componentDidUpdate=function(t){this.handleFocusWeekNumber(t)},n.prototype.render=function(){var t=this.props,r=t.weekNumber,i=t.isWeekDisabled,a=t.ariaLabelPrefix,s=a===void 0?n.defaultProps.ariaLabelPrefix:a,l=t.onClick,u={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!l&&!i,"react-datepicker__week-number--selected":!!l&&Kn(this.props.date,this.props.selected)};return st.createElement("div",{ref:this.weekNumberEl,className:gs(u),"aria-label":"".concat(s," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},r)},n}(X.Component),XG=function(e){rs(n,e);function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.isDisabled=function(r){return Cl(r,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate})},t.handleDayClick=function(r,i){t.props.onDayClick&&t.props.onDayClick(r,i)},t.handleDayMouseEnter=function(r){t.props.onDayMouseEnter&&t.props.onDayMouseEnter(r)},t.handleWeekClick=function(r,i,a){for(var s,l,u,d=new Date(r),f=0;f<7;f++){var m=new Date(r);m.setDate(m.getDate()+f);var b=!t.isDisabled(m);if(b){d=m;break}}typeof t.props.onWeekSelect=="function"&&t.props.onWeekSelect(d,i,a),t.props.showWeekPicker&&t.handleDayClick(d,a),((s=t.props.shouldCloseOnSelect)!==null&&s!==void 0?s:n.defaultProps.shouldCloseOnSelect)&&((u=(l=t.props).setOpen)===null||u===void 0||u.call(l,!1))},t.formatWeekNumber=function(r){return t.props.formatWeekNumber?t.props.formatWeekNumber(r):TG(r)},t.isWeekDisabled=function(){for(var r=t.startOfWeek(),i=xu(r,6),a=new Date(r);a<=i;){if(!t.isDisabled(a))return!1;a=xu(a,1)}return!0},t.renderDays=function(){var r=t.startOfWeek(),i=[],a=t.formatWeekNumber(r);if(t.props.showWeekNumber){var s=t.props.onWeekSelect||t.props.showWeekPicker?t.handleWeekClick.bind(t,r,a):void 0;i.push(st.createElement(KG,nr({key:"W"},n.defaultProps,t.props,{weekNumber:a,isWeekDisabled:t.isWeekDisabled(),date:r,onClick:s})))}return i.concat([0,1,2,3,4,5,6].map(function(l){var u=xu(r,l);return st.createElement(QG,nr({},n.defaultProps,t.props,{ariaLabelPrefixWhenEnabled:t.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:t.props.disabledDayAriaLabelPrefix,key:u.valueOf(),day:u,onClick:t.handleDayClick.bind(t,u),onMouseEnter:t.handleDayMouseEnter.bind(t,u)}))}))},t.startOfWeek=function(){return Vf(t.props.day,t.props.locale,t.props.calendarStartDay)},t.isKeyboardSelected=function(){return!t.props.disabledKeyboardNavigation&&!Kn(t.startOfWeek(),t.props.selected)&&Kn(t.startOfWeek(),t.props.preSelection)},t}return Object.defineProperty(n,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),n.prototype.render=function(){var t={"react-datepicker__week":!0,"react-datepicker__week--selected":Kn(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return st.createElement("div",{className:gs(t)},this.renderDays())},n}(X.Component),w1,ZG=6,F0={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},nw=(w1={},w1[F0.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},w1[F0.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},w1[F0.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},w1),_y=1;function EE(e,n){return e?F0.FOUR_COLUMNS:n?F0.TWO_COLUMNS:F0.THREE_COLUMNS}var JG=function(e){rs(n,e);function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.MONTH_REFS=vc([],Array(12),!0).map(function(){return X.createRef()}),t.QUARTER_REFS=vc([],Array(4),!0).map(function(){return X.createRef()}),t.isDisabled=function(r){return Cl(r,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate})},t.isExcluded=function(r){return xA(r,{excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals})},t.handleDayClick=function(r,i){var a,s;(s=(a=t.props).onDayClick)===null||s===void 0||s.call(a,r,i,t.props.orderInDisplay)},t.handleDayMouseEnter=function(r){var i,a;(a=(i=t.props).onDayMouseEnter)===null||a===void 0||a.call(i,r)},t.handleMouseLeave=function(){var r,i;(i=(r=t.props).onMouseLeave)===null||i===void 0||i.call(r)},t.isRangeStartMonth=function(r){var i=t.props,a=i.day,s=i.startDate,l=i.endDate;return!s||!l?!1:Js(Uo(a,r),s)},t.isRangeStartQuarter=function(r){var i=t.props,a=i.day,s=i.startDate,l=i.endDate;return!s||!l?!1:qx(_0(a,r),s)},t.isRangeEndMonth=function(r){var i=t.props,a=i.day,s=i.startDate,l=i.endDate;return!s||!l?!1:Js(Uo(a,r),l)},t.isRangeEndQuarter=function(r){var i=t.props,a=i.day,s=i.startDate,l=i.endDate;return!s||!l?!1:qx(_0(a,r),l)},t.isInSelectingRangeMonth=function(r){var i,a=t.props,s=a.day,l=a.selectsStart,u=a.selectsEnd,d=a.selectsRange,f=a.startDate,m=a.endDate,b=(i=t.props.selectingDate)!==null&&i!==void 0?i:t.props.preSelection;return!(l||u||d)||!b?!1:l&&m?Ay(b,m,r,s):u&&f||d&&f&&!m?Ay(f,b,r,s):!1},t.isSelectingMonthRangeStart=function(r){var i;if(!t.isInSelectingRangeMonth(r))return!1;var a=t.props,s=a.day,l=a.startDate,u=a.selectsStart,d=Uo(s,r),f=(i=t.props.selectingDate)!==null&&i!==void 0?i:t.props.preSelection;return u?Js(d,f):Js(d,l)},t.isSelectingMonthRangeEnd=function(r){var i;if(!t.isInSelectingRangeMonth(r))return!1;var a=t.props,s=a.day,l=a.endDate,u=a.selectsEnd,d=a.selectsRange,f=Uo(s,r),m=(i=t.props.selectingDate)!==null&&i!==void 0?i:t.props.preSelection;return u||d?Js(f,m):Js(f,l)},t.isInSelectingRangeQuarter=function(r){var i,a=t.props,s=a.day,l=a.selectsStart,u=a.selectsEnd,d=a.selectsRange,f=a.startDate,m=a.endDate,b=(i=t.props.selectingDate)!==null&&i!==void 0?i:t.props.preSelection;return!(l||u||d)||!b?!1:l&&m?Ey(b,m,r,s):u&&f||d&&f&&!m?Ey(f,b,r,s):!1},t.isWeekInMonth=function(r){var i=t.props.day,a=xu(r,6);return Js(r,i)||Js(a,i)},t.isCurrentMonth=function(r,i){return Fn(r)===Fn(Lr())&&i===eo(Lr())},t.isCurrentQuarter=function(r,i){return Fn(r)===Fn(Lr())&&i===Xh(Lr())},t.isSelectedMonth=function(r,i,a){return eo(a)===i&&Fn(r)===Fn(a)},t.isSelectMonthInList=function(r,i,a){return a.some(function(s){return t.isSelectedMonth(r,i,s)})},t.isSelectedQuarter=function(r,i,a){return Xh(r)===i&&Fn(r)===Fn(a)},t.renderWeeks=function(){for(var r=[],i=t.props.fixedHeight,a=0,s=!1,l=Vf(Nd(t.props.day),t.props.locale,t.props.calendarStartDay),u=function(x){return t.props.showWeekPicker?Vf(x,t.props.locale,t.props.calendarStartDay):t.props.preSelection},d=function(x){return t.props.showWeekPicker?Vf(x,t.props.locale,t.props.calendarStartDay):t.props.selected},f=t.props.selected?d(t.props.selected):void 0,m=t.props.preSelection?u(t.props.preSelection):void 0;r.push(st.createElement(XG,nr({},t.props,{ariaLabelPrefix:t.props.weekAriaLabelPrefix,key:a,day:l,month:eo(t.props.day),onDayClick:t.handleDayClick,onDayMouseEnter:t.handleDayMouseEnter,selected:f,preSelection:m,showWeekNumber:t.props.showWeekNumbers}))),!s;){a++,l=Nx(l,1);var b=i&&a>=ZG,g=!i&&!t.isWeekInMonth(l);if(b||g)if(t.props.peekNextMonth)s=!0;else break}return r},t.onMonthClick=function(r,i){var a=t.isMonthDisabledForLabelDate(i),s=a.isDisabled,l=a.labelDate;s||t.handleDayClick(Nd(l),r)},t.onMonthMouseEnter=function(r){var i=t.isMonthDisabledForLabelDate(r),a=i.isDisabled,s=i.labelDate;a||t.handleDayMouseEnter(Nd(s))},t.handleMonthNavigation=function(r,i){var a,s,l,u;(s=(a=t.props).setPreSelection)===null||s===void 0||s.call(a,i),(u=(l=t.MONTH_REFS[r])===null||l===void 0?void 0:l.current)===null||u===void 0||u.focus()},t.handleKeyboardNavigation=function(r,i,a){var s,l=t.props,u=l.selected,d=l.preSelection,f=l.setPreSelection,m=l.minDate,b=l.maxDate,g=l.showFourColumnMonthYearPicker,x=l.showTwoColumnMonthYearPicker;if(d){var y=EE(g,x),A=t.getVerticalOffset(y),w=(s=nw[y])===null||s===void 0?void 0:s.grid,C=function(_,L,$){var Z,O,T=L,R=$;switch(_){case It.ArrowRight:T=wu(L,_y),R=$===11?0:$+_y;break;case It.ArrowLeft:T=Zh(L,_y),R=$===0?11:$-_y;break;case It.ArrowUp:T=Zh(L,A),R=!((Z=w==null?void 0:w[0])===null||Z===void 0)&&Z.includes($)?$+12-A:$-A;break;case It.ArrowDown:T=wu(L,A),R=!((O=w==null?void 0:w[w.length-1])===null||O===void 0)&&O.includes($)?$-12+A:$+A;break}return{newCalculatedDate:T,newCalculatedMonth:R}},j=function(_,L,$){for(var Z=40,O=_,T=!1,R=0,N=C(O,L,$),G=N.newCalculatedDate,W=N.newCalculatedMonth;!T;){if(R>=Z){G=L,W=$;break}if(m&&G<m){O=It.ArrowRight;var Q=C(O,G,W);G=Q.newCalculatedDate,W=Q.newCalculatedMonth}if(b&&G>b){O=It.ArrowLeft;var Q=C(O,G,W);G=Q.newCalculatedDate,W=Q.newCalculatedMonth}if(PG(G,t.props)){var Q=C(O,G,W);G=Q.newCalculatedDate,W=Q.newCalculatedMonth}else T=!0;R++}return{newCalculatedDate:G,newCalculatedMonth:W}};if(i===It.Enter){t.isMonthDisabled(a)||(t.onMonthClick(r,a),f==null||f(u));return}var F=j(i,d,a),M=F.newCalculatedDate,z=F.newCalculatedMonth;switch(i){case It.ArrowRight:case It.ArrowLeft:case It.ArrowUp:case It.ArrowDown:t.handleMonthNavigation(z,M);break}}},t.getVerticalOffset=function(r){var i,a;return(a=(i=nw[r])===null||i===void 0?void 0:i.verticalNavigationOffset)!==null&&a!==void 0?a:0},t.onMonthKeyDown=function(r,i){var a=t.props,s=a.disabledKeyboardNavigation,l=a.handleOnMonthKeyDown,u=r.key;u!==It.Tab&&r.preventDefault(),s||t.handleKeyboardNavigation(r,u,i),l&&l(r)},t.onQuarterClick=function(r,i){var a=_0(t.props.day,i);Cy(a,t.props)||t.handleDayClick(dE(a),r)},t.onQuarterMouseEnter=function(r){var i=_0(t.props.day,r);Cy(i,t.props)||t.handleDayMouseEnter(dE(i))},t.handleQuarterNavigation=function(r,i){var a,s,l,u;t.isDisabled(i)||t.isExcluded(i)||((s=(a=t.props).setPreSelection)===null||s===void 0||s.call(a,i),(u=(l=t.QUARTER_REFS[r-1])===null||l===void 0?void 0:l.current)===null||u===void 0||u.focus())},t.onQuarterKeyDown=function(r,i){var a,s,l=r.key;if(!t.props.disabledKeyboardNavigation)switch(l){case It.Enter:t.onQuarterClick(r,i),(s=(a=t.props).setPreSelection)===null||s===void 0||s.call(a,t.props.selected);break;case It.ArrowRight:if(!t.props.preSelection)break;t.handleQuarterNavigation(i===4?1:i+1,oA(t.props.preSelection,1));break;case It.ArrowLeft:if(!t.props.preSelection)break;t.handleQuarterNavigation(i===1?4:i-1,hO(t.props.preSelection));break}},t.isMonthDisabledForLabelDate=function(r){var i,a=t.props,s=a.day,l=a.minDate,u=a.maxDate,d=a.excludeDates,f=a.includeDates,m=Uo(s,r);return{isDisabled:(i=(l||u||d||f)&&_O(m,t.props))!==null&&i!==void 0?i:!1,labelDate:m}},t.isMonthDisabled=function(r){var i=t.isMonthDisabledForLabelDate(r).isDisabled;return i},t.getMonthClassNames=function(r){var i=t.props,a=i.day,s=i.startDate,l=i.endDate,u=i.preSelection,d=i.monthClassName,f=d?d(Uo(a,r)):void 0,m=t.getSelection();return gs("react-datepicker__month-text","react-datepicker__month-".concat(r),f,{"react-datepicker__month-text--disabled":t.isMonthDisabled(r),"react-datepicker__month-text--selected":m?t.isSelectMonthInList(a,r,m):void 0,"react-datepicker__month-text--keyboard-selected":!t.props.disabledKeyboardNavigation&&u&&t.isSelectedMonth(a,r,u)&&!t.isMonthDisabled(r),"react-datepicker__month-text--in-selecting-range":t.isInSelectingRangeMonth(r),"react-datepicker__month-text--in-range":s&&l?Ay(s,l,r,a):void 0,"react-datepicker__month-text--range-start":t.isRangeStartMonth(r),"react-datepicker__month-text--range-end":t.isRangeEndMonth(r),"react-datepicker__month-text--selecting-range-start":t.isSelectingMonthRangeStart(r),"react-datepicker__month-text--selecting-range-end":t.isSelectingMonthRangeEnd(r),"react-datepicker__month-text--today":t.isCurrentMonth(a,r)})},t.getTabIndex=function(r){if(t.props.preSelection==null)return"-1";var i=eo(t.props.preSelection),a=t.isMonthDisabledForLabelDate(i).isDisabled,s=r===i&&!(a||t.props.disabledKeyboardNavigation)?"0":"-1";return s},t.getQuarterTabIndex=function(r){if(t.props.preSelection==null)return"-1";var i=Xh(t.props.preSelection),a=Cy(t.props.day,t.props),s=r===i&&!(a||t.props.disabledKeyboardNavigation)?"0":"-1";return s},t.getAriaLabel=function(r){var i=t.props,a=i.chooseDayAriaLabelPrefix,s=a===void 0?"Choose":a,l=i.disabledDayAriaLabelPrefix,u=l===void 0?"Not available":l,d=i.day,f=i.locale,m=Uo(d,r),b=t.isDisabled(m)||t.isExcluded(m)?u:s;return"".concat(b," ").concat(pi(m,"MMMM yyyy",f))},t.getQuarterClassNames=function(r){var i=t.props,a=i.day,s=i.startDate,l=i.endDate,u=i.selected,d=i.minDate,f=i.maxDate,m=i.excludeDates,b=i.includeDates,g=i.filterDate,x=i.preSelection,y=i.disabledKeyboardNavigation,A=(d||f||m||b||g)&&Cy(_0(a,r),t.props);return gs("react-datepicker__quarter-text","react-datepicker__quarter-".concat(r),{"react-datepicker__quarter-text--disabled":A,"react-datepicker__quarter-text--selected":u?t.isSelectedQuarter(a,r,u):void 0,"react-datepicker__quarter-text--keyboard-selected":!y&&x&&t.isSelectedQuarter(a,r,x)&&!A,"react-datepicker__quarter-text--in-selecting-range":t.isInSelectingRangeQuarter(r),"react-datepicker__quarter-text--in-range":s&&l?Ey(s,l,r,a):void 0,"react-datepicker__quarter-text--range-start":t.isRangeStartQuarter(r),"react-datepicker__quarter-text--range-end":t.isRangeEndQuarter(r)})},t.getMonthContent=function(r){var i=t.props,a=i.showFullMonthYearPicker,s=i.renderMonthContent,l=i.locale,u=i.day,d=EO(r,l),f=yA(r,l);return s?s(r,d,f,u):a?f:d},t.getQuarterContent=function(r){var i,a=t.props,s=a.renderQuarterContent,l=a.locale,u=FG(r,l);return(i=s==null?void 0:s(r,u))!==null&&i!==void 0?i:u},t.renderMonths=function(){var r,i=t.props,a=i.showTwoColumnMonthYearPicker,s=i.showFourColumnMonthYearPicker,l=i.day,u=i.selected,d=(r=nw[EE(s,a)])===null||r===void 0?void 0:r.grid;return d==null?void 0:d.map(function(f,m){return st.createElement("div",{className:"react-datepicker__month-wrapper",key:m},f.map(function(b,g){return st.createElement("div",{ref:t.MONTH_REFS[b],key:g,onClick:function(x){t.onMonthClick(x,b)},onKeyDown:function(x){TO(x)&&(x.preventDefault(),x.key=It.Enter),t.onMonthKeyDown(x,b)},onMouseEnter:t.props.usePointerEvent?void 0:function(){return t.onMonthMouseEnter(b)},onPointerEnter:t.props.usePointerEvent?function(){return t.onMonthMouseEnter(b)}:void 0,tabIndex:Number(t.getTabIndex(b)),className:t.getMonthClassNames(b),"aria-disabled":t.isMonthDisabled(b),role:"option","aria-label":t.getAriaLabel(b),"aria-current":t.isCurrentMonth(l,b)?"date":void 0,"aria-selected":u?t.isSelectedMonth(l,b,u):void 0},t.getMonthContent(b))}))})},t.renderQuarters=function(){var r=t.props,i=r.day,a=r.selected,s=[1,2,3,4];return st.createElement("div",{className:"react-datepicker__quarter-wrapper"},s.map(function(l,u){return st.createElement("div",{key:u,ref:t.QUARTER_REFS[u],role:"option",onClick:function(d){t.onQuarterClick(d,l)},onKeyDown:function(d){t.onQuarterKeyDown(d,l)},onMouseEnter:t.props.usePointerEvent?void 0:function(){return t.onQuarterMouseEnter(l)},onPointerEnter:t.props.usePointerEvent?function(){return t.onQuarterMouseEnter(l)}:void 0,className:t.getQuarterClassNames(l),"aria-selected":a?t.isSelectedQuarter(i,l,a):void 0,tabIndex:Number(t.getQuarterTabIndex(l)),"aria-current":t.isCurrentQuarter(i,l)?"date":void 0},t.getQuarterContent(l))}))},t.getClassNames=function(){var r=t.props,i=r.selectingDate,a=r.selectsStart,s=r.selectsEnd,l=r.showMonthYearPicker,u=r.showQuarterYearPicker,d=r.showWeekPicker;return gs("react-datepicker__month",{"react-datepicker__month--selecting-range":i&&(a||s)},{"react-datepicker__monthPicker":l},{"react-datepicker__quarterPicker":u},{"react-datepicker__weekPicker":d})},t}return n.prototype.getSelection=function(){var t=this.props,r=t.selected,i=t.selectedDates,a=t.selectsMultiple;if(a)return i;if(r)return[r]},n.prototype.render=function(){var t=this.props,r=t.showMonthYearPicker,i=t.showQuarterYearPicker,a=t.day,s=t.ariaLabelPrefix,l=s===void 0?"Month ":s,u=l?l.trim()+" ":"";return st.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(u).concat(pi(a,"MMMM, yyyy",this.props.locale)),role:"listbox"},r?this.renderMonths():i?this.renderQuarters():this.renderWeeks())},n}(X.Component),eQ=function(e){rs(n,e);function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.isSelectedMonth=function(r){return t.props.month===r},t.renderOptions=function(){return t.props.monthNames.map(function(r,i){return st.createElement("div",{className:t.isSelectedMonth(i)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:r,onClick:t.onChange.bind(t,i),"aria-selected":t.isSelectedMonth(i)?"true":void 0},t.isSelectedMonth(i)?st.createElement("span",{className:"react-datepicker__month-option--selected"},""):"",r)})},t.onChange=function(r){return t.props.onChange(r)},t.handleClickOutside=function(){return t.props.onCancel()},t}return n.prototype.render=function(){return st.createElement(Nv,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},n}(X.Component),tQ=function(e){rs(n,e);function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(r){return r.map(function(i,a){return st.createElement("option",{key:i,value:a},i)})},t.renderSelectMode=function(r){return st.createElement("select",{value:t.props.month,className:"react-datepicker__month-select",onChange:function(i){return t.onChange(parseInt(i.target.value))}},t.renderSelectOptions(r))},t.renderReadView=function(r,i){return st.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:t.toggleDropdown},st.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),st.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},i[t.props.month]))},t.renderDropdown=function(r){return st.createElement(eQ,nr({key:"dropdown"},t.props,{monthNames:r,onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(r){var i=t.state.dropdownVisible,a=[t.renderReadView(!i,r)];return i&&a.unshift(t.renderDropdown(r)),a},t.onChange=function(r){t.toggleDropdown(),r!==t.props.month&&t.props.onChange(r)},t.toggleDropdown=function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})},t}return n.prototype.render=function(){var t=this,r=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(a){return EO(a,t.props.locale)}:function(a){return yA(a,t.props.locale)}),i;switch(this.props.dropdownMode){case"scroll":i=this.renderScrollMode(r);break;case"select":i=this.renderSelectMode(r);break}return st.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},i)},n}(X.Component);function nQ(e,n){for(var t=[],r=Nd(e),i=Nd(n);!Kf(r,i);)t.push(Lr(r)),r=wu(r,1);return t}var rQ=function(e){rs(n,e);function n(t){var r=e.call(this,t)||this;return r.renderOptions=function(){return r.state.monthYearsList.map(function(i){var a=jS(i),s=lc(r.props.date,i)&&Js(r.props.date,i);return st.createElement("div",{className:s?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:a,onClick:r.onChange.bind(r,a),"aria-selected":s?"true":void 0},s?st.createElement("span",{className:"react-datepicker__month-year-option--selected"},""):"",pi(i,r.props.dateFormat,r.props.locale))})},r.onChange=function(i){return r.props.onChange(i)},r.handleClickOutside=function(){r.props.onCancel()},r.state={monthYearsList:nQ(r.props.minDate,r.props.maxDate)},r}return n.prototype.render=function(){var t=gs({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return st.createElement(Nv,{className:t,onClickOutside:this.handleClickOutside},this.renderOptions())},n}(X.Component),iQ=function(e){rs(n,e);function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(){for(var r=Nd(t.props.minDate),i=Nd(t.props.maxDate),a=[];!Kf(r,i);){var s=jS(r);a.push(st.createElement("option",{key:s,value:s},pi(r,t.props.dateFormat,t.props.locale))),r=wu(r,1)}return a},t.onSelectChange=function(r){t.onChange(parseInt(r.target.value))},t.renderSelectMode=function(){return st.createElement("select",{value:jS(Nd(t.props.date)),className:"react-datepicker__month-year-select",onChange:t.onSelectChange},t.renderSelectOptions())},t.renderReadView=function(r){var i=pi(t.props.date,t.props.dateFormat,t.props.locale);return st.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:t.toggleDropdown},st.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),st.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},i))},t.renderDropdown=function(){return st.createElement(rQ,nr({key:"dropdown"},t.props,{onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(){var r=t.state.dropdownVisible,i=[t.renderReadView(!r)];return r&&i.unshift(t.renderDropdown()),i},t.onChange=function(r){t.toggleDropdown();var i=Lr(r);lc(t.props.date,i)&&Js(t.props.date,i)||t.props.onChange(i)},t.toggleDropdown=function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})},t}return n.prototype.render=function(){var t;switch(this.props.dropdownMode){case"scroll":t=this.renderScrollMode();break;case"select":t=this.renderSelectMode();break}return st.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},t)},n}(X.Component),aQ=function(e){rs(n,e);function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.state={height:null},t.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var r,i,a;t.list&&(t.list.scrollTop=(a=t.centerLi&&n.calcCenterPosition(t.props.monthRef?t.props.monthRef.clientHeight-((i=(r=t.header)===null||r===void 0?void 0:r.clientHeight)!==null&&i!==void 0?i:0):t.list.clientHeight,t.centerLi))!==null&&a!==void 0?a:0)})},t.handleClick=function(r){var i,a;(t.props.minTime||t.props.maxTime)&&gE(r,t.props)||(t.props.excludeTimes||t.props.includeTimes||t.props.filterTime)&&mE(r,t.props)||(a=(i=t.props).onChange)===null||a===void 0||a.call(i,r)},t.isSelectedTime=function(r){return t.props.selected&&YG(t.props.selected,r)},t.isDisabledTime=function(r){return(t.props.minTime||t.props.maxTime)&&gE(r,t.props)||(t.props.excludeTimes||t.props.includeTimes||t.props.filterTime)&&mE(r,t.props)},t.liClasses=function(r){var i,a=["react-datepicker__time-list-item",t.props.timeClassName?t.props.timeClassName(r):void 0];return t.isSelectedTime(r)&&a.push("react-datepicker__time-list-item--selected"),t.isDisabledTime(r)&&a.push("react-datepicker__time-list-item--disabled"),t.props.injectTimes&&(Cc(r)*3600+kc(r)*60+_d(r))%(((i=t.props.intervals)!==null&&i!==void 0?i:n.defaultProps.intervals)*60)!==0&&a.push("react-datepicker__time-list-item--injected"),a.join(" ")},t.handleOnKeyDown=function(r,i){var a,s;r.key===It.Space&&(r.preventDefault(),r.key=It.Enter),(r.key===It.ArrowUp||r.key===It.ArrowLeft)&&r.target instanceof HTMLElement&&r.target.previousSibling&&(r.preventDefault(),r.target.previousSibling instanceof HTMLElement&&r.target.previousSibling.focus()),(r.key===It.ArrowDown||r.key===It.ArrowRight)&&r.target instanceof HTMLElement&&r.target.nextSibling&&(r.preventDefault(),r.target.nextSibling instanceof HTMLElement&&r.target.nextSibling.focus()),r.key===It.Enter&&t.handleClick(i),(s=(a=t.props).handleOnKeyDown)===null||s===void 0||s.call(a,r)},t.renderTimes=function(){for(var r,i=[],a=typeof t.props.format=="string"?t.props.format:"p",s=(r=t.props.intervals)!==null&&r!==void 0?r:n.defaultProps.intervals,l=t.props.selected||t.props.openToDate||Lr(),u=Ky(l),d=t.props.injectTimes&&t.props.injectTimes.sort(function(A,w){return A.getTime()-w.getTime()}),f=60*VG(l),m=f/s,b=0;b<m;b++){var g=ES(u,b*s);if(i.push(g),d){var x=WG(u,g,b,s,d);i=i.concat(x)}}var y=i.reduce(function(A,w){return w.getTime()<=l.getTime()?w:A},i[0]);return i.map(function(A){return st.createElement("li",{key:A.valueOf(),onClick:t.handleClick.bind(t,A),className:t.liClasses(A),ref:function(w){A===y&&(t.centerLi=w)},onKeyDown:function(w){t.handleOnKeyDown(w,A)},tabIndex:A===y?0:-1,role:"option","aria-selected":t.isSelectedTime(A)?"true":void 0,"aria-disabled":t.isDisabledTime(A)?"true":void 0},pi(A,a,t.props.locale))})},t.renderTimeCaption=function(){return t.props.showTimeCaption===!1?st.createElement(st.Fragment,null):st.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(t.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(r){t.header=r}},st.createElement("div",{className:"react-datepicker-time__header"},t.props.timeCaption))},t}return Object.defineProperty(n,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),n.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},n.prototype.render=function(){var t=this,r,i=this.state.height;return st.createElement("div",{className:"react-datepicker__time-container ".concat(((r=this.props.todayButton)!==null&&r!==void 0?r:n.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),st.createElement("div",{className:"react-datepicker__time"},st.createElement("div",{className:"react-datepicker__time-box"},st.createElement("ul",{className:"react-datepicker__time-list",ref:function(a){t.list=a},style:i?{height:i}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},n.calcCenterPosition=function(t,r){return r.offsetTop-(t/2-r.clientHeight/2)},n}(X.Component),_E=3,sQ=function(e){rs(n,e);function n(t){var r=e.call(this,t)||this;return r.YEAR_REFS=vc([],Array(r.props.yearItemNumber),!0).map(function(){return X.createRef()}),r.isDisabled=function(i){return Cl(i,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(i){return xA(i,{excludeDates:r.props.excludeDates})},r.selectingDate=function(){var i;return(i=r.props.selectingDate)!==null&&i!==void 0?i:r.props.preSelection},r.updateFocusOnPaginate=function(i){var a=function(){var s,l;(l=(s=r.YEAR_REFS[i])===null||s===void 0?void 0:s.current)===null||l===void 0||l.focus()};window.requestAnimationFrame(a)},r.handleYearClick=function(i,a){r.props.onDayClick&&r.props.onDayClick(i,a)},r.handleYearNavigation=function(i,a){var s,l,u,d,f=r.props,m=f.date,b=f.yearItemNumber;if(!(m===void 0||b===void 0)){var g=Ff(m,b).startPeriod;r.isDisabled(a)||r.isExcluded(a)||((l=(s=r.props).setPreSelection)===null||l===void 0||l.call(s,a),i-g<0?r.updateFocusOnPaginate(b-(g-i)):i-g>=b?r.updateFocusOnPaginate(Math.abs(b-(i-g))):(d=(u=r.YEAR_REFS[i-g])===null||u===void 0?void 0:u.current)===null||d===void 0||d.focus())}},r.isSameDay=function(i,a){return Kn(i,a)},r.isCurrentYear=function(i){return i===Fn(Lr())},r.isRangeStart=function(i){return r.props.startDate&&r.props.endDate&&lc(oc(Lr(),i),r.props.startDate)},r.isRangeEnd=function(i){return r.props.startDate&&r.props.endDate&&lc(oc(Lr(),i),r.props.endDate)},r.isInRange=function(i){return ky(i,r.props.startDate,r.props.endDate)},r.isInSelectingRange=function(i){var a=r.props,s=a.selectsStart,l=a.selectsEnd,u=a.selectsRange,d=a.startDate,f=a.endDate;return!(s||l||u)||!r.selectingDate()?!1:s&&f?ky(i,r.selectingDate(),f):l&&d||u&&d&&!f?ky(i,d,r.selectingDate()):!1},r.isSelectingRangeStart=function(i){var a;if(!r.isInSelectingRange(i))return!1;var s=r.props,l=s.startDate,u=s.selectsStart,d=oc(Lr(),i);return u?lc(d,(a=r.selectingDate())!==null&&a!==void 0?a:null):lc(d,l??null)},r.isSelectingRangeEnd=function(i){var a;if(!r.isInSelectingRange(i))return!1;var s=r.props,l=s.endDate,u=s.selectsEnd,d=s.selectsRange,f=oc(Lr(),i);return u||d?lc(f,(a=r.selectingDate())!==null&&a!==void 0?a:null):lc(f,l??null)},r.isKeyboardSelected=function(i){if(!(r.props.date===void 0||r.props.selected==null||r.props.preSelection==null)){var a=r.props,s=a.minDate,l=a.maxDate,u=a.excludeDates,d=a.includeDates,f=a.filterDate,m=W1(oc(r.props.date,i)),b=(s||l||u||d||f)&&Xy(i,r.props);return!r.props.disabledKeyboardNavigation&&!r.props.inline&&!Kn(m,W1(r.props.selected))&&Kn(m,W1(r.props.preSelection))&&!b}},r.onYearClick=function(i,a){var s=r.props.date;s!==void 0&&r.handleYearClick(W1(oc(s,a)),i)},r.onYearKeyDown=function(i,a){var s,l,u=i.key,d=r.props,f=d.date,m=d.yearItemNumber,b=d.handleOnKeyDown;if(u!==It.Tab&&i.preventDefault(),!r.props.disabledKeyboardNavigation)switch(u){case It.Enter:if(r.props.selected==null)break;r.onYearClick(i,a),(l=(s=r.props).setPreSelection)===null||l===void 0||l.call(s,r.props.selected);break;case It.ArrowRight:if(r.props.preSelection==null)break;r.handleYearNavigation(a+1,kd(r.props.preSelection,1));break;case It.ArrowLeft:if(r.props.preSelection==null)break;r.handleYearNavigation(a-1,im(r.props.preSelection,1));break;case It.ArrowUp:{if(f===void 0||m===void 0||r.props.preSelection==null)break;var g=Ff(f,m).startPeriod,x=_E,y=a-x;if(y<g){var A=m%x;a>=g&&a<g+A?x=A:x+=A,y=a-x}r.handleYearNavigation(y,im(r.props.preSelection,x));break}case It.ArrowDown:{if(f===void 0||m===void 0||r.props.preSelection==null)break;var w=Ff(f,m).endPeriod,x=_E,y=a+x;if(y>w){var A=m%x;a<=w&&a>w-A?x=A:x+=A,y=a+x}r.handleYearNavigation(y,kd(r.props.preSelection,x));break}}b&&b(i)},r.getYearClassNames=function(i){var a=r.props,s=a.date,l=a.minDate,u=a.maxDate,d=a.selected,f=a.excludeDates,m=a.includeDates,b=a.filterDate,g=a.yearClassName;return gs("react-datepicker__year-text","react-datepicker__year-".concat(i),s?g==null?void 0:g(oc(s,i)):void 0,{"react-datepicker__year-text--selected":d?i===Fn(d):void 0,"react-datepicker__year-text--disabled":(l||u||f||m||b)&&Xy(i,r.props),"react-datepicker__year-text--keyboard-selected":r.isKeyboardSelected(i),"react-datepicker__year-text--range-start":r.isRangeStart(i),"react-datepicker__year-text--range-end":r.isRangeEnd(i),"react-datepicker__year-text--in-range":r.isInRange(i),"react-datepicker__year-text--in-selecting-range":r.isInSelectingRange(i),"react-datepicker__year-text--selecting-range-start":r.isSelectingRangeStart(i),"react-datepicker__year-text--selecting-range-end":r.isSelectingRangeEnd(i),"react-datepicker__year-text--today":r.isCurrentYear(i)})},r.getYearTabIndex=function(i){if(r.props.disabledKeyboardNavigation||r.props.preSelection==null)return"-1";var a=Fn(r.props.preSelection),s=Xy(i,r.props);return i===a&&!s?"0":"-1"},r.getYearContent=function(i){return r.props.renderYearContent?r.props.renderYearContent(i):i},r}return n.prototype.render=function(){var t=this,r=[],i=this.props,a=i.date,s=i.yearItemNumber,l=i.onYearMouseEnter,u=i.onYearMouseLeave;if(a===void 0)return null;for(var d=Ff(a,s),f=d.startPeriod,m=d.endPeriod,b=function(y){r.push(st.createElement("div",{ref:g.YEAR_REFS[y-f],onClick:function(A){t.onYearClick(A,y)},onKeyDown:function(A){TO(A)&&(A.preventDefault(),A.key=It.Enter),t.onYearKeyDown(A,y)},tabIndex:Number(g.getYearTabIndex(y)),className:g.getYearClassNames(y),onMouseEnter:g.props.usePointerEvent?void 0:function(A){return l(A,y)},onPointerEnter:g.props.usePointerEvent?function(A){return l(A,y)}:void 0,onMouseLeave:g.props.usePointerEvent?void 0:function(A){return u(A,y)},onPointerLeave:g.props.usePointerEvent?function(A){return u(A,y)}:void 0,key:y,"aria-current":g.isCurrentYear(y)?"date":void 0},g.getYearContent(y)))},g=this,x=f;x<=m;x++)b(x);return st.createElement("div",{className:"react-datepicker__year"},st.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},r))},n}(X.Component);function oQ(e,n,t,r){for(var i=[],a=0;a<2*n+1;a++){var s=e+n-a,l=!0;t&&(l=Fn(t)<=s),r&&l&&(l=Fn(r)>=s),l&&i.push(s)}return i}var lQ=function(e){rs(n,e);function n(t){var r=e.call(this,t)||this;r.renderOptions=function(){var l=r.props.year,u=r.state.yearsList.map(function(m){return st.createElement("div",{className:l===m?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:m,onClick:r.onChange.bind(r,m),"aria-selected":l===m?"true":void 0},l===m?st.createElement("span",{className:"react-datepicker__year-option--selected"},""):"",m)}),d=r.props.minDate?Fn(r.props.minDate):null,f=r.props.maxDate?Fn(r.props.maxDate):null;return(!f||!r.state.yearsList.find(function(m){return m===f}))&&u.unshift(st.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:r.incrementYears},st.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!d||!r.state.yearsList.find(function(m){return m===d}))&&u.push(st.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:r.decrementYears},st.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),u},r.onChange=function(l){r.props.onChange(l)},r.handleClickOutside=function(){r.props.onCancel()},r.shiftYears=function(l){var u=r.state.yearsList.map(function(d){return d+l});r.setState({yearsList:u})},r.incrementYears=function(){return r.shiftYears(1)},r.decrementYears=function(){return r.shiftYears(-1)};var i=t.yearDropdownItemNumber,a=t.scrollableYearDropdown,s=i||(a?10:5);return r.state={yearsList:oQ(r.props.year,s,r.props.minDate,r.props.maxDate)},r.dropdownRef=X.createRef(),r}return n.prototype.componentDidMount=function(){var t=this.dropdownRef.current;if(t){var r=t.children?Array.from(t.children):null,i=r?r.find(function(a){return a.ariaSelected}):null;t.scrollTop=i&&i instanceof HTMLElement?i.offsetTop+(i.clientHeight-t.clientHeight)/2:(t.scrollHeight-t.clientHeight)/2}},n.prototype.render=function(){var t=gs({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return st.createElement(Nv,{className:t,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},n}(X.Component),uQ=function(e){rs(n,e);function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(){for(var r=t.props.minDate?Fn(t.props.minDate):1900,i=t.props.maxDate?Fn(t.props.maxDate):2100,a=[],s=r;s<=i;s++)a.push(st.createElement("option",{key:s,value:s},s));return a},t.onSelectChange=function(r){t.onChange(parseInt(r.target.value))},t.renderSelectMode=function(){return st.createElement("select",{value:t.props.year,className:"react-datepicker__year-select",onChange:t.onSelectChange},t.renderSelectOptions())},t.renderReadView=function(r){return st.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(i){return t.toggleDropdown(i)}},st.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),st.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},t.props.year))},t.renderDropdown=function(){return st.createElement(lQ,nr({key:"dropdown"},t.props,{onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(){var r=t.state.dropdownVisible,i=[t.renderReadView(!r)];return r&&i.unshift(t.renderDropdown()),i},t.onChange=function(r){t.toggleDropdown(),r!==t.props.year&&t.props.onChange(r)},t.toggleDropdown=function(r){t.setState({dropdownVisible:!t.state.dropdownVisible},function(){t.props.adjustDateOnChange&&t.handleYearChange(t.props.date,r)})},t.handleYearChange=function(r,i){var a;(a=t.onSelect)===null||a===void 0||a.call(t,r,i),t.setOpen()},t.onSelect=function(r,i){var a,s;(s=(a=t.props).onSelect)===null||s===void 0||s.call(a,r,i)},t.setOpen=function(){var r,i;(i=(r=t.props).setOpen)===null||i===void 0||i.call(r,!0)},t}return n.prototype.render=function(){var t;switch(this.props.dropdownMode){case"scroll":t=this.renderScrollMode();break;case"select":t=this.renderSelectMode();break}return st.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},t)},n}(X.Component),cQ=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],dQ=function(e){var n=(e.className||"").split(/\s+/);return cQ.some(function(t){return n.indexOf(t)>=0})},fQ=function(e){rs(n,e);function n(t){var r=e.call(this,t)||this;return r.monthContainer=void 0,r.handleClickOutside=function(i){r.props.onClickOutside(i)},r.setClickOutsideRef=function(){return r.containerRef.current},r.handleDropdownFocus=function(i){var a,s;dQ(i.target)&&((s=(a=r.props).onDropdownFocus)===null||s===void 0||s.call(a,i))},r.getDateInView=function(){var i=r.props,a=i.preSelection,s=i.selected,l=i.openToDate,u=NO(r.props),d=jO(r.props),f=Lr(),m=l||s||a;return m||(u&&cp(f,u)?u:d&&Kf(f,d)?d:f)},r.increaseMonth=function(){r.setState(function(i){var a=i.date;return{date:wu(a,1)}},function(){return r.handleMonthChange(r.state.date)})},r.decreaseMonth=function(){r.setState(function(i){var a=i.date;return{date:Zh(a,1)}},function(){return r.handleMonthChange(r.state.date)})},r.handleDayClick=function(i,a,s){r.props.onSelect(i,a,s),r.props.setPreSelection&&r.props.setPreSelection(i)},r.handleDayMouseEnter=function(i){r.setState({selectingDate:i}),r.props.onDayMouseEnter&&r.props.onDayMouseEnter(i)},r.handleMonthMouseLeave=function(){r.setState({selectingDate:void 0}),r.props.onMonthMouseLeave&&r.props.onMonthMouseLeave()},r.handleYearMouseEnter=function(i,a){r.setState({selectingDate:oc(Lr(),a)}),r.props.onYearMouseEnter&&r.props.onYearMouseEnter(i,a)},r.handleYearMouseLeave=function(i,a){r.props.onYearMouseLeave&&r.props.onYearMouseLeave(i,a)},r.handleYearChange=function(i){var a,s,l,u;(s=(a=r.props).onYearChange)===null||s===void 0||s.call(a,i),r.setState({isRenderAriaLiveMessage:!0}),r.props.adjustDateOnChange&&(r.props.onSelect(i),(u=(l=r.props).setOpen)===null||u===void 0||u.call(l,!0)),r.props.setPreSelection&&r.props.setPreSelection(i)},r.getEnabledPreSelectionDateForMonth=function(i){if(!Cl(i,r.props))return i;for(var a=Nd(i),s=IG(i),l=YH(s,a),u=null,d=0;d<=l;d++){var f=xu(a,d);if(!Cl(f,r.props)){u=f;break}}return u},r.handleMonthChange=function(i){var a,s,l,u=(a=r.getEnabledPreSelectionDateForMonth(i))!==null&&a!==void 0?a:i;r.handleCustomMonthChange(u),r.props.adjustDateOnChange&&(r.props.onSelect(u),(l=(s=r.props).setOpen)===null||l===void 0||l.call(s,!0)),r.props.setPreSelection&&r.props.setPreSelection(u)},r.handleCustomMonthChange=function(i){var a,s;(s=(a=r.props).onMonthChange)===null||s===void 0||s.call(a,i),r.setState({isRenderAriaLiveMessage:!0})},r.handleMonthYearChange=function(i){r.handleYearChange(i),r.handleMonthChange(i)},r.changeYear=function(i){r.setState(function(a){var s=a.date;return{date:oc(s,Number(i))}},function(){return r.handleYearChange(r.state.date)})},r.changeMonth=function(i){r.setState(function(a){var s=a.date;return{date:Uo(s,Number(i))}},function(){return r.handleMonthChange(r.state.date)})},r.changeMonthYear=function(i){r.setState(function(a){var s=a.date;return{date:oc(Uo(s,eo(i)),Fn(i))}},function(){return r.handleMonthYearChange(r.state.date)})},r.header=function(i){i===void 0&&(i=r.state.date);var a=Vf(i,r.props.locale,r.props.calendarStartDay),s=[];return r.props.showWeekNumbers&&s.push(st.createElement("div",{key:"W",className:"react-datepicker__day-name"},r.props.weekLabel||"#")),s.concat([0,1,2,3,4,5,6].map(function(l){var u=xu(a,l),d=r.formatWeekday(u,r.props.locale),f=r.props.weekDayClassName?r.props.weekDayClassName(u):void 0;return st.createElement("div",{key:l,"aria-label":pi(u,"EEEE",r.props.locale),className:gs("react-datepicker__day-name",f)},d)}))},r.formatWeekday=function(i,a){return r.props.formatWeekDay?LG(i,r.props.formatWeekDay,a):r.props.useWeekdaysShort?MG(i,a):RG(i,a)},r.decreaseYear=function(){r.setState(function(i){var a,s=i.date;return{date:im(s,r.props.showYearPicker?(a=r.props.yearItemNumber)!==null&&a!==void 0?a:n.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.clearSelectingDate=function(){r.setState({selectingDate:void 0})},r.renderPreviousButton=function(){var i,a,s;if(!r.props.renderCustomHeader){var l=(i=r.props.monthsShown)!==null&&i!==void 0?i:n.defaultProps.monthsShown,u=r.props.showPreviousMonths?l-1:0,d=(a=r.props.monthSelectedIn)!==null&&a!==void 0?a:u,f=Zh(r.state.date,d),m;switch(!0){case r.props.showMonthYearPicker:m=xE(r.state.date,r.props);break;case r.props.showYearPicker:m=BG(r.state.date,r.props);break;case r.props.showQuarterYearPicker:m=zG(r.state.date,r.props);break;default:m=bE(f,r.props);break}if(!(!((s=r.props.forceShowMonthNavigation)!==null&&s!==void 0?s:n.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&m||r.props.showTimeSelectOnly)){var b=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],g=["react-datepicker__navigation","react-datepicker__navigation--previous"],x=r.decreaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(x=r.decreaseYear),m&&r.props.showDisabledMonthNavigation&&(g.push("react-datepicker__navigation--previous--disabled"),x=void 0);var y=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,A=r.props,w=A.previousMonthButtonLabel,C=w===void 0?n.defaultProps.previousMonthButtonLabel:w,j=A.previousYearButtonLabel,F=j===void 0?n.defaultProps.previousYearButtonLabel:j,M=r.props,z=M.previousMonthAriaLabel,_=z===void 0?typeof C=="string"?C:"Previous Month":z,L=M.previousYearAriaLabel,$=L===void 0?typeof F=="string"?F:"Previous Year":L;return st.createElement("button",{type:"button",className:g.join(" "),onClick:x,onKeyDown:r.props.handleOnKeyDown,"aria-label":y?$:_},st.createElement("span",{className:b.join(" ")},y?F:C))}}},r.increaseYear=function(){r.setState(function(i){var a,s=i.date;return{date:kd(s,r.props.showYearPicker?(a=r.props.yearItemNumber)!==null&&a!==void 0?a:n.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.renderNextButton=function(){var i;if(!r.props.renderCustomHeader){var a;switch(!0){case r.props.showMonthYearPicker:a=vE(r.state.date,r.props);break;case r.props.showYearPicker:a=$G(r.state.date,r.props);break;case r.props.showQuarterYearPicker:a=qG(r.state.date,r.props);break;default:a=yE(r.state.date,r.props);break}if(!(!((i=r.props.forceShowMonthNavigation)!==null&&i!==void 0?i:n.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&a||r.props.showTimeSelectOnly)){var s=["react-datepicker__navigation","react-datepicker__navigation--next"],l=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];r.props.showTimeSelect&&s.push("react-datepicker__navigation--next--with-time"),r.props.todayButton&&s.push("react-datepicker__navigation--next--with-today-button");var u=r.increaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(u=r.increaseYear),a&&r.props.showDisabledMonthNavigation&&(s.push("react-datepicker__navigation--next--disabled"),u=void 0);var d=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,f=r.props,m=f.nextMonthButtonLabel,b=m===void 0?n.defaultProps.nextMonthButtonLabel:m,g=f.nextYearButtonLabel,x=g===void 0?n.defaultProps.nextYearButtonLabel:g,y=r.props,A=y.nextMonthAriaLabel,w=A===void 0?typeof b=="string"?b:"Next Month":A,C=y.nextYearAriaLabel,j=C===void 0?typeof x=="string"?x:"Next Year":C;return st.createElement("button",{type:"button",className:s.join(" "),onClick:u,onKeyDown:r.props.handleOnKeyDown,"aria-label":d?j:w},st.createElement("span",{className:l.join(" ")},d?x:b))}}},r.renderCurrentMonth=function(i){i===void 0&&(i=r.state.date);var a=["react-datepicker__current-month"];return r.props.showYearDropdown&&a.push("react-datepicker__current-month--hasYearDropdown"),r.props.showMonthDropdown&&a.push("react-datepicker__current-month--hasMonthDropdown"),r.props.showMonthYearDropdown&&a.push("react-datepicker__current-month--hasMonthYearDropdown"),st.createElement("h2",{className:a.join(" ")},pi(i,r.props.dateFormat,r.props.locale))},r.renderYearDropdown=function(i){if(i===void 0&&(i=!1),!(!r.props.showYearDropdown||i))return st.createElement(uQ,nr({},n.defaultProps,r.props,{date:r.state.date,onChange:r.changeYear,year:Fn(r.state.date)}))},r.renderMonthDropdown=function(i){if(i===void 0&&(i=!1),!(!r.props.showMonthDropdown||i))return st.createElement(tQ,nr({},n.defaultProps,r.props,{month:eo(r.state.date),onChange:r.changeMonth}))},r.renderMonthYearDropdown=function(i){if(i===void 0&&(i=!1),!(!r.props.showMonthYearDropdown||i))return st.createElement(iQ,nr({},n.defaultProps,r.props,{date:r.state.date,onChange:r.changeMonthYear}))},r.handleTodayButtonClick=function(i){r.props.onSelect(fE(),i),r.props.setPreSelection&&r.props.setPreSelection(fE())},r.renderTodayButton=function(){if(!(!r.props.todayButton||r.props.showTimeSelectOnly))return st.createElement("div",{className:"react-datepicker__today-button",onClick:r.handleTodayButtonClick},r.props.todayButton)},r.renderDefaultHeader=function(i){var a=i.monthDate,s=i.i;return st.createElement("div",{className:"react-datepicker__header ".concat(r.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},r.renderCurrentMonth(a),st.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(r.props.dropdownMode),onFocus:r.handleDropdownFocus},r.renderMonthDropdown(s!==0),r.renderMonthYearDropdown(s!==0),r.renderYearDropdown(s!==0)),st.createElement("div",{className:"react-datepicker__day-names"},r.header(a)))},r.renderCustomHeader=function(i){var a,s,l=i.monthDate,u=i.i;if(r.props.showTimeSelect&&!r.state.monthContainer||r.props.showTimeSelectOnly)return null;var d=bE(r.state.date,r.props),f=yE(r.state.date,r.props),m=xE(r.state.date,r.props),b=vE(r.state.date,r.props),g=!r.props.showMonthYearPicker&&!r.props.showQuarterYearPicker&&!r.props.showYearPicker;return st.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:r.props.onDropdownFocus},(s=(a=r.props).renderCustomHeader)===null||s===void 0?void 0:s.call(a,nr(nr({},r.state),{customHeaderCount:u,monthDate:l,changeMonth:r.changeMonth,changeYear:r.changeYear,decreaseMonth:r.decreaseMonth,increaseMonth:r.increaseMonth,decreaseYear:r.decreaseYear,increaseYear:r.increaseYear,prevMonthButtonDisabled:d,nextMonthButtonDisabled:f,prevYearButtonDisabled:m,nextYearButtonDisabled:b})),g&&st.createElement("div",{className:"react-datepicker__day-names"},r.header(l)))},r.renderYearHeader=function(i){var a=i.monthDate,s=r.props,l=s.showYearPicker,u=s.yearItemNumber,d=u===void 0?n.defaultProps.yearItemNumber:u,f=Ff(a,d),m=f.startPeriod,b=f.endPeriod;return st.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},l?"".concat(m," - ").concat(b):Fn(a))},r.renderHeader=function(i){var a=i.monthDate,s=i.i,l=s===void 0?0:s,u={monthDate:a,i:l};switch(!0){case r.props.renderCustomHeader!==void 0:return r.renderCustomHeader(u);case(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker):return r.renderYearHeader(u);default:return r.renderDefaultHeader(u)}},r.renderMonths=function(){var i,a;if(!(r.props.showTimeSelectOnly||r.props.showYearPicker)){for(var s=[],l=(i=r.props.monthsShown)!==null&&i!==void 0?i:n.defaultProps.monthsShown,u=r.props.showPreviousMonths?l-1:0,d=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?kd(r.state.date,u):Zh(r.state.date,u),f=(a=r.props.monthSelectedIn)!==null&&a!==void 0?a:u,m=0;m<l;++m){var b=m-f+u,g=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?kd(d,b):wu(d,b),x="month-".concat(m),y=m<l-1,A=m>0;s.push(st.createElement("div",{key:x,ref:function(w){r.monthContainer=w??void 0},className:"react-datepicker__month-container"},r.renderHeader({monthDate:g,i:m}),st.createElement(JG,nr({},n.defaultProps,r.props,{ariaLabelPrefix:r.props.monthAriaLabelPrefix,day:g,onDayClick:r.handleDayClick,handleOnKeyDown:r.props.handleOnDayKeyDown,handleOnMonthKeyDown:r.props.handleOnKeyDown,onDayMouseEnter:r.handleDayMouseEnter,onMouseLeave:r.handleMonthMouseLeave,orderInDisplay:m,selectingDate:r.state.selectingDate,monthShowsDuplicateDaysEnd:y,monthShowsDuplicateDaysStart:A}))))}return s}},r.renderYears=function(){if(!r.props.showTimeSelectOnly&&r.props.showYearPicker)return st.createElement("div",{className:"react-datepicker__year--container"},r.renderHeader({monthDate:r.state.date}),st.createElement(sQ,nr({},n.defaultProps,r.props,{selectingDate:r.state.selectingDate,date:r.state.date,onDayClick:r.handleDayClick,clearSelectingDate:r.clearSelectingDate,onYearMouseEnter:r.handleYearMouseEnter,onYearMouseLeave:r.handleYearMouseLeave})))},r.renderTimeSection=function(){if(r.props.showTimeSelect&&(r.state.monthContainer||r.props.showTimeSelectOnly))return st.createElement(aQ,nr({},n.defaultProps,r.props,{onChange:r.props.onTimeChange,format:r.props.timeFormat,intervals:r.props.timeIntervals,monthRef:r.state.monthContainer}))},r.renderInputTimeSection=function(){var i=r.props.selected?new Date(r.props.selected):void 0,a=i&&gd(i)&&!!r.props.selected,s=a?"".concat(SE(i.getHours()),":").concat(SE(i.getMinutes())):"";if(r.props.showTimeInput)return st.createElement(GG,nr({},n.defaultProps,r.props,{date:i,timeString:s,onChange:r.props.onTimeChange}))},r.renderAriaLiveRegion=function(){var i,a=Ff(r.state.date,(i=r.props.yearItemNumber)!==null&&i!==void 0?i:n.defaultProps.yearItemNumber),s=a.startPeriod,l=a.endPeriod,u;return r.props.showYearPicker?u="".concat(s," - ").concat(l):r.props.showMonthYearPicker||r.props.showQuarterYearPicker?u=Fn(r.state.date):u="".concat(yA(eo(r.state.date),r.props.locale)," ").concat(Fn(r.state.date)),st.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},r.state.isRenderAriaLiveMessage&&u)},r.renderChildren=function(){if(r.props.children)return st.createElement("div",{className:"react-datepicker__children-container"},r.props.children)},r.containerRef=X.createRef(),r.state={date:r.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},r}return Object.defineProperty(n,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:Gg}},enumerable:!1,configurable:!0}),n.prototype.componentDidMount=function(){var t=this;this.props.showTimeSelect&&(this.assignMonthContainer=function(){t.setState({monthContainer:t.monthContainer})}())},n.prototype.componentDidUpdate=function(t){var r=this;if(this.props.preSelection&&(!Kn(this.props.preSelection,t.preSelection)||this.props.monthSelectedIn!==t.monthSelectedIn)){var i=!Js(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return i&&r.handleCustomMonthChange(r.state.date)})}else this.props.openToDate&&!Kn(this.props.openToDate,t.openToDate)&&this.setState({date:this.props.openToDate})},n.prototype.render=function(){var t=this.props.container||kG;return st.createElement(Nv,{onClickOutside:this.handleClickOutside,style:{display:"contents"},containerRef:this.containerRef,ignoreClass:this.props.outsideClickIgnoreClass},st.createElement(t,{className:gs("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren()))},n}(X.Component),hQ=function(e){var n=e.icon,t=e.className,r=t===void 0?"":t,i=e.onClick,a="react-datepicker__calendar-icon";return typeof n=="string"?st.createElement("i",{className:"".concat(a," ").concat(n," ").concat(r),"aria-hidden":"true",onClick:i}):st.isValidElement(n)?st.cloneElement(n,{className:"".concat(n.props.className||""," ").concat(a," ").concat(r),onClick:function(s){typeof n.props.onClick=="function"&&n.props.onClick(s),typeof i=="function"&&i(s)}}):st.createElement("svg",{className:"".concat(a," ").concat(r),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:i},st.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},OO=function(e){rs(n,e);function n(t){var r=e.call(this,t)||this;return r.portalRoot=null,r.el=document.createElement("div"),r}return n.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},n.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},n.prototype.render=function(){return r3.createPortal(this.props.children,this.el)},n}(X.Component),pQ="[tabindex], a, button, input, select, textarea",mQ=function(e){return(e instanceof HTMLAnchorElement||!e.disabled)&&e.tabIndex!==-1},DO=function(e){rs(n,e);function n(t){var r=e.call(this,t)||this;return r.getTabChildren=function(){var i;return Array.prototype.slice.call((i=r.tabLoopRef.current)===null||i===void 0?void 0:i.querySelectorAll(pQ),1,-1).filter(mQ)},r.handleFocusStart=function(){var i=r.getTabChildren();i&&i.length>1&&i[i.length-1].focus()},r.handleFocusEnd=function(){var i=r.getTabChildren();i&&i.length>1&&i[0].focus()},r.tabLoopRef=X.createRef(),r}return n.prototype.render=function(){var t;return((t=this.props.enableTabLoop)!==null&&t!==void 0?t:n.defaultProps.enableTabLoop)?st.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},st.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,st.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},n.defaultProps={enableTabLoop:!0},n}(X.Component);function gQ(e){var n=function(t){var r,i=typeof t.hidePopper=="boolean"?t.hidePopper:!0,a=X.useRef(null),s=CG(nr({open:!i,whileElementsMounted:nG,placement:t.popperPlacement,middleware:vc([dG({padding:15}),cG(10),fG({element:a})],(r=t.popperModifiers)!==null&&r!==void 0?r:[],!0)},t.popperProps)),l=nr(nr({},t),{hidePopper:i,popperProps:nr(nr({},s),{arrowRef:a})});return st.createElement(e,nr({},l))};return n}var bQ=function(e){rs(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(n,"defaultProps",{get:function(){return{hidePopper:!0}},enumerable:!1,configurable:!0}),n.prototype.render=function(){var t=this.props,r=t.className,i=t.wrapperClassName,a=t.hidePopper,s=a===void 0?n.defaultProps.hidePopper:a,l=t.popperComponent,u=t.targetComponent,d=t.enableTabLoop,f=t.popperOnKeyDown,m=t.portalId,b=t.portalHost,g=t.popperProps,x=t.showArrow,y=void 0;if(!s){var A=gs("react-datepicker-popper",r);y=st.createElement(DO,{enableTabLoop:d},st.createElement("div",{ref:g.refs.setFloating,style:g.floatingStyles,className:A,"data-placement":g.placement,onKeyDown:f},l,x&&st.createElement(bG,{ref:g.arrowRef,context:g.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(y=X.createElement(this.props.popperContainer,{},y)),m&&!s&&(y=st.createElement(OO,{portalId:m,portalHost:b},y));var w=gs("react-datepicker-wrapper",i);return st.createElement(st.Fragment,null,st.createElement("div",{ref:g.refs.setReference,className:w},u),y)},n}(X.Component),yQ=gQ(bQ),NE="react-datepicker-ignore-onclickoutside";function xQ(e,n){return e&&n?eo(e)!==eo(n)||Fn(e)!==Fn(n):e!==n}var rw="Date input not valid.",vQ=function(e){rs(n,e);function n(t){var r=e.call(this,t)||this;return r.calendar=null,r.input=null,r.getPreSelection=function(){return r.props.openToDate?r.props.openToDate:r.props.selectsEnd&&r.props.startDate?r.props.startDate:r.props.selectsStart&&r.props.endDate?r.props.endDate:Lr()},r.modifyHolidays=function(){var i;return(i=r.props.holidays)===null||i===void 0?void 0:i.reduce(function(a,s){var l=new Date(s.date);return gd(l)?vc(vc([],a,!0),[nr(nr({},s),{date:l})],!1):a},[])},r.calcInitialState=function(){var i,a=r.getPreSelection(),s=NO(r.props),l=jO(r.props),u=s&&cp(a,Ky(s))?s:l&&Kf(a,hE(l))?l:a;return{open:r.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(i=r.props.selectsRange?r.props.startDate:r.props.selected)!==null&&i!==void 0?i:u,highlightDates:wE(r.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},r.resetHiddenStatus=function(){r.setState(nr(nr({},r.state),{wasHidden:!1}))},r.setHiddenStatus=function(){r.setState(nr(nr({},r.state),{wasHidden:!0}))},r.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&r.setHiddenStatus()},r.clearPreventFocusTimeout=function(){r.preventFocusTimeout&&clearTimeout(r.preventFocusTimeout)},r.safeFocus=function(){setTimeout(function(){var i,a;(a=(i=r.input)===null||i===void 0?void 0:i.focus)===null||a===void 0||a.call(i,{preventScroll:!0})},0)},r.safeBlur=function(){setTimeout(function(){var i,a;(a=(i=r.input)===null||i===void 0?void 0:i.blur)===null||a===void 0||a.call(i)},0)},r.setFocus=function(){r.safeFocus()},r.setBlur=function(){r.safeBlur(),r.cancelFocusInput()},r.setOpen=function(i,a){a===void 0&&(a=!1),r.setState({open:i,preSelection:i&&r.state.open?r.state.preSelection:r.calcInitialState().preSelection,lastPreSelectChange:iw},function(){i||r.setState(function(s){return{focused:a?s.focused:!1}},function(){!a&&r.setBlur(),r.setState({inputValue:null})})})},r.inputOk=function(){return Ed(r.state.preSelection)},r.isCalendarOpen=function(){return r.props.open===void 0?r.state.open&&!r.props.disabled&&!r.props.readOnly:r.props.open},r.handleFocus=function(i){var a,s,l=r.state.wasHidden,u=l?r.state.open:!0;l&&r.resetHiddenStatus(),!r.state.preventFocus&&u&&((s=(a=r.props).onFocus)===null||s===void 0||s.call(a,i),!r.props.preventOpenOnFocus&&!r.props.readOnly&&r.setOpen(!0)),r.setState({focused:!0})},r.sendFocusBackToInput=function(){r.preventFocusTimeout&&r.clearPreventFocusTimeout(),r.setState({preventFocus:!0},function(){r.preventFocusTimeout=setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})})},r.cancelFocusInput=function(){clearTimeout(r.inputFocusTimeout),r.inputFocusTimeout=void 0},r.deferFocusInput=function(){r.cancelFocusInput(),r.inputFocusTimeout=setTimeout(function(){return r.setFocus()},1)},r.handleDropdownFocus=function(){r.cancelFocusInput()},r.handleBlur=function(i){var a,s;(!r.state.open||r.props.withPortal||r.props.showTimeInput)&&((s=(a=r.props).onBlur)===null||s===void 0||s.call(a,i)),r.setState({focused:!1})},r.handleCalendarClickOutside=function(i){var a,s;r.props.inline||r.setOpen(!1),(s=(a=r.props).onClickOutside)===null||s===void 0||s.call(a,i),r.props.withPortal&&i.preventDefault()},r.handleChange=function(){for(var i,a,s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];var u=s[0];if(!(r.props.onChangeRaw&&(r.props.onChangeRaw.apply(r,s),!u||typeof u.isDefaultPrevented!="function"||u.isDefaultPrevented()))){r.setState({inputValue:(u==null?void 0:u.target)instanceof HTMLInputElement?u.target.value:null,lastPreSelectChange:wQ});var d=r.props,f=d.dateFormat,m=f===void 0?n.defaultProps.dateFormat:f,b=d.strictParsing,g=b===void 0?n.defaultProps.strictParsing:b,x=d.selectsRange,y=d.startDate,A=d.endDate,w=(u==null?void 0:u.target)instanceof HTMLInputElement?u.target.value:"";if(x){var C=w.split("-",2).map(function(Z){return Z.trim()}),j=C[0],F=C[1],M=ew(j??"",m,r.props.locale,g),z=ew(F??"",m,r.props.locale,g),_=(y==null?void 0:y.getTime())!==(M==null?void 0:M.getTime()),L=(A==null?void 0:A.getTime())!==(z==null?void 0:z.getTime());if(!_&&!L||M&&Cl(M,r.props)||z&&Cl(z,r.props))return;(a=(i=r.props).onChange)===null||a===void 0||a.call(i,[M,z],u)}else{var $=ew(w,m,r.props.locale,g,r.props.minDate);r.props.showTimeSelectOnly&&r.props.selected&&$&&!Kn($,r.props.selected)&&($=aY(r.props.selected,{hours:Cc($),minutes:kc($),seconds:_d($)})),($||!w)&&r.setSelected($,u,!0)}}},r.handleSelect=function(i,a,s){if(r.props.shouldCloseOnSelect&&!r.props.showTimeSelect&&r.sendFocusBackToInput(),r.props.onChangeRaw&&r.props.onChangeRaw(a),r.setSelected(i,a,!1,s),r.props.showDateSelect&&r.setState({isRenderAriaLiveMessage:!0}),!r.props.shouldCloseOnSelect||r.props.showTimeSelect)r.setPreSelection(i);else if(!r.props.inline){r.props.selectsRange||r.setOpen(!1);var l=r.props,u=l.startDate,d=l.endDate;u&&!d&&(r.props.swapRange||!kE(i,u))&&r.setOpen(!1)}},r.setSelected=function(i,a,s,l){var u,d,f=i;if(r.props.showYearPicker){if(f!==null&&Xy(Fn(f),r.props))return}else if(r.props.showMonthYearPicker){if(f!==null&&_O(f,r.props))return}else if(f!==null&&Cl(f,r.props))return;var m=r.props,b=m.onChange,g=m.selectsRange,x=m.startDate,y=m.endDate,A=m.selectsMultiple,w=m.selectedDates,C=m.minTime,j=m.swapRange;if(!Wh(r.props.selected,f)||r.props.allowSameDay||g||A)if(f!==null&&(r.props.selected&&(!s||!r.props.showTimeSelect&&!r.props.showTimeSelectOnly&&!r.props.showTimeInput)&&(f=tw(f,{hour:Cc(r.props.selected),minute:kc(r.props.selected),second:_d(r.props.selected)})),!s&&(r.props.showTimeSelect||r.props.showTimeSelectOnly)&&C&&(f=tw(f,{hour:C.getHours(),minute:C.getMinutes(),second:C.getSeconds()})),r.props.inline||r.setState({preSelection:f}),r.props.focusSelectedMonth||r.setState({monthSelectedIn:l})),g){var F=!x&&!y,M=x&&!y,z=x&&y;F?b==null||b([f,null],a):M&&(f===null?b==null||b([null,null],a):kE(f,x)?j?b==null||b([f,x],a):b==null||b([f,null],a):b==null||b([x,f],a)),z&&(b==null||b([f,null],a))}else if(A){if(f!==null)if(!(w!=null&&w.length))b==null||b([f],a);else{var _=w.some(function($){return Kn($,f)});if(_){var L=w.filter(function($){return!Kn($,f)});b==null||b(L,a)}else b==null||b(vc(vc([],w,!0),[f],!1),a)}}else b==null||b(f,a);s||((d=(u=r.props).onSelect)===null||d===void 0||d.call(u,f,a),r.setState({inputValue:null}))},r.setPreSelection=function(i){var a=Ed(r.props.minDate),s=Ed(r.props.maxDate),l=!0;if(i){var u=Ky(i);if(a&&s)l=V1(i,r.props.minDate,r.props.maxDate);else if(a){var d=Ky(r.props.minDate);l=Kf(i,d)||Wh(u,d)}else if(s){var f=hE(r.props.maxDate);l=cp(i,f)||Wh(u,f)}}l&&r.setState({preSelection:i})},r.toggleCalendar=function(){r.setOpen(!r.state.open)},r.handleTimeChange=function(i){var a,s;if(!(r.props.selectsRange||r.props.selectsMultiple)){var l=r.props.selected?r.props.selected:r.getPreSelection(),u=r.props.selected?i:tw(l,{hour:Cc(i),minute:kc(i)});r.setState({preSelection:u}),(s=(a=r.props).onChange)===null||s===void 0||s.call(a,u),r.props.shouldCloseOnSelect&&!r.props.showTimeInput&&(r.sendFocusBackToInput(),r.setOpen(!1)),r.props.showTimeInput&&r.setOpen(!0),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),r.setState({inputValue:null})}},r.onInputClick=function(){var i,a;!r.props.disabled&&!r.props.readOnly&&r.setOpen(!0),(a=(i=r.props).onInputClick)===null||a===void 0||a.call(i)},r.onInputKeyDown=function(i){var a,s,l,u,d,f;(s=(a=r.props).onKeyDown)===null||s===void 0||s.call(a,i);var m=i.key;if(!r.state.open&&!r.props.inline&&!r.props.preventOpenOnFocus){(m===It.ArrowDown||m===It.ArrowUp||m===It.Enter)&&((l=r.onInputClick)===null||l===void 0||l.call(r));return}if(r.state.open){if(m===It.ArrowDown||m===It.ArrowUp){i.preventDefault();var b=r.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":r.props.showWeekPicker&&r.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':r.props.showFullMonthYearPicker||r.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',g=((u=r.calendar)===null||u===void 0?void 0:u.containerRef.current)instanceof Element&&r.calendar.containerRef.current.querySelector(b);g instanceof HTMLElement&&g.focus({preventScroll:!0});return}var x=Lr(r.state.preSelection);m===It.Enter?(i.preventDefault(),i.target.blur(),r.inputOk()&&r.state.lastPreSelectChange===iw?(r.handleSelect(x,i),!r.props.shouldCloseOnSelect&&r.setPreSelection(x)):r.setOpen(!1)):m===It.Escape?(i.preventDefault(),i.target.blur(),r.sendFocusBackToInput(),r.setOpen(!1)):m===It.Tab&&r.setOpen(!1),r.inputOk()||(f=(d=r.props).onInputError)===null||f===void 0||f.call(d,{code:1,msg:rw})}},r.onPortalKeyDown=function(i){var a=i.key;a===It.Escape&&(i.preventDefault(),r.setState({preventFocus:!0},function(){r.setOpen(!1),setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})}))},r.onDayKeyDown=function(i){var a,s,l,u,d,f,m=r.props,b=m.minDate,g=m.maxDate,x=m.disabledKeyboardNavigation,y=m.showWeekPicker,A=m.shouldCloseOnSelect,w=m.locale,C=m.calendarStartDay,j=m.adjustDateOnChange,F=m.inline;if((s=(a=r.props).onKeyDown)===null||s===void 0||s.call(a,i),!x){var M=i.key,z=i.shiftKey,_=Lr(r.state.preSelection),L=function(G,W){var Q=W;switch(G){case It.ArrowRight:Q=y?Nx(W,1):xu(W,1);break;case It.ArrowLeft:Q=y?eE(W):$V(W);break;case It.ArrowUp:Q=eE(W);break;case It.ArrowDown:Q=Nx(W,1);break;case It.PageUp:Q=z?im(W,1):Zh(W,1);break;case It.PageDown:Q=z?kd(W,1):wu(W,1);break;case It.Home:Q=Vf(W,w,C);break;case It.End:Q=DG(W);break}return Q},$=function(G,W){for(var Q=40,J=G,se=!1,U=0,le=L(G,W);!se;){if(U>=Q){le=W;break}b&&le<b&&(J=It.ArrowRight,le=Cl(b,r.props)?L(J,le):b),g&&le>g&&(J=It.ArrowLeft,le=Cl(g,r.props)?L(J,le):g),Cl(le,r.props)?((J===It.PageUp||J===It.Home)&&(J=It.ArrowRight),(J===It.PageDown||J===It.End)&&(J=It.ArrowLeft),le=L(J,le)):se=!0,U++}return le};if(M===It.Enter){i.preventDefault(),r.handleSelect(_,i),!A&&r.setPreSelection(_);return}else if(M===It.Escape){i.preventDefault(),r.setOpen(!1),r.inputOk()||(u=(l=r.props).onInputError)===null||u===void 0||u.call(l,{code:1,msg:rw});return}var Z=null;switch(M){case It.ArrowLeft:case It.ArrowRight:case It.ArrowUp:case It.ArrowDown:case It.PageUp:case It.PageDown:case It.Home:case It.End:Z=$(M,_);break}if(!Z){(f=(d=r.props).onInputError)===null||f===void 0||f.call(d,{code:1,msg:rw});return}if(i.preventDefault(),r.setState({lastPreSelectChange:iw}),j&&r.setSelected(Z),r.setPreSelection(Z),F){var O=eo(_),T=eo(Z),R=Fn(_),N=Fn(Z);O!==T||R!==N?r.setState({shouldFocusDayInline:!0}):r.setState({shouldFocusDayInline:!1})}}},r.onPopperKeyDown=function(i){var a=i.key;a===It.Escape&&(i.preventDefault(),r.sendFocusBackToInput())},r.onClearClick=function(i){i&&i.preventDefault&&i.preventDefault(),r.sendFocusBackToInput();var a=r.props,s=a.selectsRange,l=a.onChange;s?l==null||l([null,null],i):l==null||l(null,i),r.setState({inputValue:null})},r.clear=function(){r.onClearClick()},r.onScroll=function(i){typeof r.props.closeOnScroll=="boolean"&&r.props.closeOnScroll?(i.target===document||i.target===document.documentElement||i.target===document.body)&&r.setOpen(!1):typeof r.props.closeOnScroll=="function"&&r.props.closeOnScroll(i)&&r.setOpen(!1)},r.renderCalendar=function(){var i,a;return!r.props.inline&&!r.isCalendarOpen()?null:st.createElement(fQ,nr({showMonthYearDropdown:void 0,ref:function(s){r.calendar=s}},r.props,r.state,{setOpen:r.setOpen,dateFormat:(i=r.props.dateFormatCalendar)!==null&&i!==void 0?i:n.defaultProps.dateFormatCalendar,onSelect:r.handleSelect,onClickOutside:r.handleCalendarClickOutside,holidays:HG(r.modifyHolidays()),outsideClickIgnoreClass:NE,onDropdownFocus:r.handleDropdownFocus,onTimeChange:r.handleTimeChange,className:r.props.calendarClassName,container:r.props.calendarContainer,handleOnKeyDown:r.props.onKeyDown,handleOnDayKeyDown:r.onDayKeyDown,setPreSelection:r.setPreSelection,dropdownMode:(a=r.props.dropdownMode)!==null&&a!==void 0?a:n.defaultProps.dropdownMode}),r.props.children)},r.renderAriaLiveRegion=function(){var i=r.props,a=i.dateFormat,s=a===void 0?n.defaultProps.dateFormat:a,l=i.locale,u=r.props.showTimeInput||r.props.showTimeSelect,d=u?"PPPPp":"PPPP",f;return r.props.selectsRange?f="Selected start date: ".concat(wl(r.props.startDate,{dateFormat:d,locale:l}),". ").concat(r.props.endDate?"End date: "+wl(r.props.endDate,{dateFormat:d,locale:l}):""):r.props.showTimeSelectOnly?f="Selected time: ".concat(wl(r.props.selected,{dateFormat:s,locale:l})):r.props.showYearPicker?f="Selected year: ".concat(wl(r.props.selected,{dateFormat:"yyyy",locale:l})):r.props.showMonthYearPicker?f="Selected month: ".concat(wl(r.props.selected,{dateFormat:"MMMM yyyy",locale:l})):r.props.showQuarterYearPicker?f="Selected quarter: ".concat(wl(r.props.selected,{dateFormat:"yyyy, QQQ",locale:l})):f="Selected date: ".concat(wl(r.props.selected,{dateFormat:d,locale:l})),st.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},f)},r.renderDateInput=function(){var i,a,s,l=gs(r.props.className,(i={},i[NE]=r.state.open,i)),u=r.props.customInput||st.createElement("input",{type:"text"}),d=r.props.customInputRef||"ref",f=r.props,m=f.dateFormat,b=m===void 0?n.defaultProps.dateFormat:m,g=f.locale,x=typeof r.props.value=="string"?r.props.value:typeof r.state.inputValue=="string"?r.state.inputValue:r.props.selectsRange?NG(r.props.startDate,r.props.endDate,{dateFormat:b,locale:g}):r.props.selectsMultiple?jG((s=r.props.selectedDates)!==null&&s!==void 0?s:[],{dateFormat:b,locale:g}):wl(r.props.selected,{dateFormat:b,locale:g});return X.cloneElement(u,(a={},a[d]=function(y){r.input=y},a.value=x,a.onBlur=r.handleBlur,a.onChange=r.handleChange,a.onClick=r.onInputClick,a.onFocus=r.handleFocus,a.onKeyDown=r.onInputKeyDown,a.id=r.props.id,a.name=r.props.name,a.form=r.props.form,a.autoFocus=r.props.autoFocus,a.placeholder=r.props.placeholderText,a.disabled=r.props.disabled,a.autoComplete=r.props.autoComplete,a.className=gs(u.props.className,l),a.title=r.props.title,a.readOnly=r.props.readOnly,a.required=r.props.required,a.tabIndex=r.props.tabIndex,a["aria-describedby"]=r.props.ariaDescribedBy,a["aria-invalid"]=r.props.ariaInvalid,a["aria-labelledby"]=r.props.ariaLabelledBy,a["aria-required"]=r.props.ariaRequired,a))},r.renderClearButton=function(){var i=r.props,a=i.isClearable,s=i.disabled,l=i.selected,u=i.startDate,d=i.endDate,f=i.clearButtonTitle,m=i.clearButtonClassName,b=m===void 0?"":m,g=i.ariaLabelClose,x=g===void 0?"Close":g,y=i.selectedDates;return a&&(l!=null||u!=null||d!=null||y!=null&&y.length)?st.createElement("button",{type:"button",className:gs("react-datepicker__close-icon",b,{"react-datepicker__close-icon--disabled":s}),disabled:s,"aria-label":x,onClick:r.onClearClick,title:f,tabIndex:-1}):null},r.state=r.calcInitialState(),r.preventFocusTimeout=void 0,r}return Object.defineProperty(n,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:Gg,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),n.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},n.prototype.componentDidUpdate=function(t,r){var i,a,s,l;t.inline&&xQ(t.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&t.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),t.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:wE(this.props.highlightDates)}),!r.focused&&!Wh(t.selected,this.props.selected)&&this.setState({inputValue:null}),r.open!==this.state.open&&(r.open===!1&&this.state.open===!0&&((a=(i=this.props).onCalendarOpen)===null||a===void 0||a.call(i)),r.open===!0&&this.state.open===!1&&((l=(s=this.props).onCalendarClose)===null||l===void 0||l.call(s)))},n.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},n.prototype.renderInputContainer=function(){var t=this.props,r=t.showIcon,i=t.icon,a=t.calendarIconClassname,s=t.calendarIconClassName,l=t.toggleCalendarOnIconClick,u=this.state.open;return a&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),st.createElement("div",{className:"react-datepicker__input-container".concat(r?" react-datepicker__view-calendar-icon":"")},r&&st.createElement(hQ,nr({icon:i,className:gs(s,!s&&a,u&&"react-datepicker-ignore-onclickoutside")},l?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},n.prototype.render=function(){var t=this.renderCalendar();if(this.props.inline)return t;if(this.props.withPortal){var r=this.state.open?st.createElement(DO,{enableTabLoop:this.props.enableTabLoop},st.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},t)):null;return this.state.open&&this.props.portalId&&(r=st.createElement(OO,nr({portalId:this.props.portalId},this.props),r)),st.createElement("div",null,this.renderInputContainer(),r)}return st.createElement(yQ,nr({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:t,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},n}(X.Component),wQ="input",iw="navigate";const SQ=e=>h.jsx(Jt,{...e,sx:{width:"100%","& .MuiOutlinedInput-root":{borderRadius:kt.xl,backgroundColor:ht.palette.background.paper,"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:ht.palette.primary.main},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:ht.palette.primary.main,borderWidth:2}},"& .MuiInputBase-input":{color:ht.palette.text.primary,fontSize:"1rem",padding:"12px 14px"},"& .MuiInputLabel-root":{color:ht.palette.text.secondary,"&.Mui-focused":{color:ht.palette.primary.main}}}}),IO=st.forwardRef((e,n)=>h.jsx(SQ,{...e,inputRef:n,fullWidth:!0}));IO.displayName="CustomInput";const AQ=({value:e,onChange:n})=>{const t=r=>r?r.toLocaleString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"";return h.jsxs(gn,{elevation:2,sx:{p:3,mb:3,backgroundColor:ht.palette.background.paper,borderRadius:kt.xl,border:`1px solid ${ht.palette.divider}`},children:[h.jsxs(de,{sx:{display:"flex",alignItems:"center",mb:2},children:[h.jsx(G0,{sx:{mr:1,color:ht.palette.primary.main}}),h.jsx(he,{variant:"h6",sx:{fontWeight:600,color:ht.palette.text.primary},children:"Schedule Publish"})]}),h.jsx(he,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Choose when you want this material to be automatically published."}),h.jsx(vQ,{selected:e,onChange:r=>n(r),showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,dateFormat:"MMM d, yyyy h:mm aa",minDate:new Date,customInput:h.jsx(IO,{label:"Select Date & Time"}),placeholderText:"Click to select date and time"}),e&&h.jsx(de,{sx:{mt:2},children:h.jsx(cr,{icon:h.jsx(G0,{}),label:`Scheduled for ${t(e)}`,color:"primary",variant:"outlined",sx:{backgroundColor:ht.palette.primary.light,color:ht.palette.primary.main,borderColor:ht.palette.primary.main}})})]})},CQ=X.lazy(()=>wi(()=>import("./MaterialImportWrapper-C8s3KCLq.js"),__vite__mapDeps([3,4,1,5]))),LO=({materialData:e})=>{var rt;const n=ya(),{userDetails:t}=zi(),r=Xn(),{uploadedFile:i,uploadOriginalFile:a,originalFileUrl:s,originalFileUploadProgress:l}=Cd(),[u]=Pg(),d=u.get("course"),f=u.get("mode")||"manual",[m,b]=X.useState((e==null?void 0:e.course)||d||""),[g,x]=X.useState((e==null?void 0:e.id)||null),[y,A]=X.useState((e==null?void 0:e.title)||""),[w,C]=X.useState((e==null?void 0:e.header)||{title:"Header",content:""}),[j,F]=X.useState((e==null?void 0:e.footer)||{title:"Footer",content:""}),[M,z]=X.useState((e==null?void 0:e.sections)||[{id:Mi(),title:"Section 1",content:"",subsections:[],images:[],links:[]}]),[_,L]=X.useState({sectionIndex:0}),[$,Z]=X.useState(!1),[O,T]=X.useState(""),[R,N]=X.useState("success"),[G,W]=X.useState(!1),[Q,J]=X.useState(((rt=e==null?void 0:e.scheduledTimestamp)==null?void 0:rt.toDate())||null),[se,U]=X.useState(!1),[le,q]=X.useState(f),[B,ee]=X.useState(!1),[re,oe]=X.useState(null),[Ce,ye]=X.useState(!1),[Se,Te]=X.useState(null),[Le,He]=X.useState(!1);K7(M,_.sectionIndex||0,M.length>1),X.useEffect(()=>{const Pe=ve=>{ve.key==="ArrowLeft"||ve.key};return window.addEventListener("keydown",Pe),()=>window.removeEventListener("keydown",Pe)},[_,M]);const Ye=async(Pe,ve=!1,Ne)=>{Pe.preventDefault();try{const De=M.some(ft=>{var et,Pt;return((et=ft.images)==null?void 0:et.some(Nt=>Nt.url.startsWith("blob:")))||((Pt=ft.subsections)==null?void 0:Pt.some(Nt=>{var Vt;return(Vt=Nt.images)==null?void 0:Vt.some(Rt=>Rt.url.startsWith("blob:"))}))});if(B&&De){console.log(" Starting AI material creation with image upload...");const ft=await Ai(ln(r,"materials"),{course:m,title:y,header:w,footer:j,sections:[],author:(t==null?void 0:t.uid)||"",timestamp:Bf(),published:!1,scheduledTimestamp:Ne?Si.fromDate(Ne):null});console.log(" Material created with ID:",ft.id),x(ft.id),console.log(" Starting image upload process...");const et=await rS(m,(t==null?void 0:t.uid)||"",ft.id,(Vt,Rt)=>{console.log(` Image upload progress: ${Vt}/${Rt}`),oe({completed:Vt,total:Rt})});console.log(" Image upload complete, updating material..."),await Hr(ft,{sections:et,published:ve,scheduledTimestamp:Ne?Si.fromDate(Ne):null}),oe(null),ee(!1);const{resetImport:Pt}=Cd.getState();Pt(),T(ve?"Material published successfully!":Ne?"Material scheduled successfully!":"Material saved successfully!"),N("success"),Z(!0),(ve||Ne)&&n(`/supplemental-materials?course=${m}`)}else{const ft={course:m,title:y,header:w,footer:j,sections:M,author:(t==null?void 0:t.uid)||"",timestamp:Bf(),published:ve,scheduledTimestamp:Ne?Si.fromDate(Ne):null,...s&&{originalFile:{url:s}}};if(g)await Hr(un(r,"materials",g),ft),T(ve?"Material updated and published!":Ne?"Material updated and scheduled!":"Material updated successfully!");else{const et=await Ai(ln(r,"materials"),ft);x(et.id),T(ve?"Material created and published!":Ne?"Material created and scheduled!":"Material created successfully!")}N("success"),Z(!0),(ve||Ne)&&n(`/supplemental-materials?course=${m}`)}}catch(De){console.error("Error saving material:",De),T("Error saving material. Please try again."),N("error"),Z(!0)}},V=(Pe,ve,Ne)=>{L({sectionIndex:typeof Pe=="number"?Pe:void 0,subsectionIndex:ve,subSubsectionIndex:Ne,type:typeof Pe=="string"?Pe:void 0})},Ae=()=>{var Pe,ve,Ne;if(_.type==="header")return w.content;if(_.type==="footer")return j.content;if(_.sectionIndex!==void 0){const De=M[_.sectionIndex];return _.subSubsectionIndex!==void 0?((ve=(Pe=De==null?void 0:De.subsections[_.subsectionIndex])==null?void 0:Pe.subSubsections[_.subSubsectionIndex])==null?void 0:ve.content)||"":_.subsectionIndex!==void 0?((Ne=De==null?void 0:De.subsections[_.subsectionIndex])==null?void 0:Ne.content)||"":(De==null?void 0:De.content)||""}return""},ne=()=>{var Pe,ve,Ne;if(_.type==="header")return w.title;if(_.type==="footer")return j.title;if(_.sectionIndex!==void 0){const De=M[_.sectionIndex];return _.subSubsectionIndex!==void 0?((ve=(Pe=De==null?void 0:De.subsections[_.subsectionIndex])==null?void 0:Pe.subSubsections[_.subSubsectionIndex])==null?void 0:ve.title)||"":_.subsectionIndex!==void 0?((Ne=De==null?void 0:De.subsections[_.subsectionIndex])==null?void 0:Ne.title)||"":(De==null?void 0:De.title)||""}return""},be=Pe=>{_.type==="header"?C(ve=>({...ve,content:Pe})):_.type==="footer"?F(ve=>({...ve,content:Pe})):_.sectionIndex!==void 0&&z(ve=>{const Ne=[...ve],De=Ne[_.sectionIndex];return _.subSubsectionIndex!==void 0?De.subsections[_.subsectionIndex].subSubsections[_.subSubsectionIndex].content=Pe:_.subsectionIndex!==void 0?De.subsections[_.subsectionIndex].content=Pe:De.content=Pe,Ne})},fe=Pe=>{se&&Q?Ye(Pe,!1,Q):U(!0)},ke=Pe=>{_.type==="header"?C(ve=>({...ve,title:Pe})):_.type==="footer"?F(ve=>({...ve,title:Pe})):_.sectionIndex!==void 0&&z(ve=>{const Ne=[...ve],De=Ne[_.sectionIndex];return _.subSubsectionIndex!==void 0?De.subsections[_.subsectionIndex].subSubsections[_.subSubsectionIndex].title=Pe:_.subsectionIndex!==void 0?De.subsections[_.subsectionIndex].title=Pe:De.title=Pe,Ne})},Re=()=>{var Pe,ve,Ne;if(_.type==="header"||_.type==="footer")return[];if(_.sectionIndex!==void 0){const De=M[_.sectionIndex];return _.subSubsectionIndex!==void 0?((ve=(Pe=De==null?void 0:De.subsections[_.subsectionIndex])==null?void 0:Pe.subSubsections[_.subSubsectionIndex])==null?void 0:ve.images)||[]:_.subsectionIndex!==void 0?((Ne=De==null?void 0:De.subsections[_.subsectionIndex])==null?void 0:Ne.images)||[]:(De==null?void 0:De.images)||[]}return[]},qe=()=>{var Pe,ve,Ne;if(_.type==="header"||_.type==="footer")return[];if(_.sectionIndex!==void 0){const De=M[_.sectionIndex];return _.subSubsectionIndex!==void 0?((ve=(Pe=De==null?void 0:De.subsections[_.subsectionIndex])==null?void 0:Pe.subSubsections[_.subSubsectionIndex])==null?void 0:ve.links)||[]:_.subsectionIndex!==void 0?((Ne=De==null?void 0:De.subsections[_.subsectionIndex])==null?void 0:Ne.links)||[]:(De==null?void 0:De.links)||[]}return[]},je=Pe=>{_.type==="header"||_.type==="footer"||_.sectionIndex!==void 0&&z(ve=>{const Ne=[...ve],De=Ne[_.sectionIndex];return _.subSubsectionIndex!==void 0?De.subsections[_.subsectionIndex].subSubsections[_.subSubsectionIndex].images=Pe:_.subsectionIndex!==void 0?De.subsections[_.subsectionIndex].images=Pe:De.images=Pe,Ne})},Ze=Pe=>{_.type==="header"||_.type==="footer"||_.sectionIndex!==void 0&&z(ve=>{const Ne=[...ve],De=Ne[_.sectionIndex];return _.subSubsectionIndex!==void 0?De.subsections[_.subsectionIndex].subSubsections[_.subSubsectionIndex].links=Pe:_.subsectionIndex!==void 0?De.subsections[_.subsectionIndex].links=Pe:De.links=Pe,Ne})},ut=()=>_.type==="header"?"header":_.type==="footer"?"footer":_.sectionIndex!==void 0?_.subSubsectionIndex!==void 0?`section-${_.sectionIndex}-subsection-${_.subsectionIndex}-subsubsection-${_.subSubsectionIndex}`:_.subsectionIndex!==void 0?`section-${_.sectionIndex}-subsection-${_.subsectionIndex}`:`section-${_.sectionIndex}`:"unknown";return h.jsxs(de,{sx:{display:"flex",flexGrow:1,flexDirection:"column",minHeight:"100vh"},children:[h.jsxs(gn,{elevation:1,sx:{p:3,mb:2,backgroundColor:ht.palette.background.paper,borderRadius:0},children:[h.jsxs(de,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},justifyContent:"space-between",alignItems:{xs:"stretch",md:"center"},mb:3,gap:2},children:[h.jsx(UT,{courseId:(e==null?void 0:e.course)||m}),h.jsx(de,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2,alignItems:"center",width:{xs:"100%",md:"auto"}},children:h.jsxs(O6,{value:le,exclusive:!0,onChange:(Pe,ve)=>ve&&q(ve),size:"small",sx:{backgroundColor:ht.palette.background.paper,borderRadius:kt.xl,width:{xs:"100%",sm:"auto"},"& .MuiToggleButton-root":{borderRadius:kt.xl,textTransform:"none",fontWeight:600,flex:{xs:1,sm:"none"},"&.Mui-selected":{backgroundColor:ht.palette.primary.main,color:ht.palette.primary.contrastText}}},children:[h.jsxs(Q0,{value:"manual",children:[h.jsx(bu,{sx:{mr:1}}),"Manual"]}),h.jsxs(Q0,{value:"ai",children:[h.jsx(i3,{sx:{mr:1}}),"AI Import"]})]})})]}),h.jsx(de,{sx:{mb:3},children:h.jsx(zH,{value:m,onChange:b,disabled:!!g})}),h.jsx(Jt,{fullWidth:!0,label:"Material Title",value:y,onChange:Pe=>A(Pe.target.value),variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:kt.xl}}})]}),h.jsxs(de,{sx:{display:"flex",flexGrow:1,minHeight:0},children:[h.jsx(uv,{children:h.jsx($T,{sections:M,selected:_,onAddSection:()=>{const Pe={id:Mi(),title:`Section ${M.length+1}`,content:"",subsections:[],images:[],links:[]};z(ve=>[...ve,Pe]),L({sectionIndex:M.length})},onAddSubsection:Pe=>{z(ve=>{const Ne=[...ve],De=Ne[Pe].subsections,ft={id:Mi(),title:`Subsection ${De.length+1}`,content:"",subSubsections:[],images:[],links:[]};return Ne[Pe].subsections=[...De,ft],Ne})},onAddSubSubsection:(Pe,ve)=>{z(Ne=>{const De=[...Ne],ft=De[Pe].subsections[ve].subSubsections,et={id:Mi(),title:`Sub-subsection ${ft.length+1}`,content:"",images:[],links:[]};return De[Pe].subsections[ve].subSubsections=[...ft,et],De})},onSelectSection:V,onUpdateSectionTitle:(Pe,ve)=>{z(Ne=>{const De=[...Ne];return De[Pe].title=ve,De})},onUpdateSubsectionTitle:(Pe,ve,Ne)=>{z(De=>{const ft=[...De];return ft[Pe].subsections[ve].title=Ne,ft})},onUpdateSubSubsectionTitle:(Pe,ve,Ne,De)=>{z(ft=>{const et=[...ft];return et[Pe].subsections[ve].subSubsections[Ne].title=De,et})},onDeleteSection:Pe=>{z(ve=>ve.filter((Ne,De)=>De!==Pe)),L({sectionIndex:0})},onDeleteSubsection:(Pe,ve)=>{z(Ne=>{const De=[...Ne];return De[Pe].subsections=De[Pe].subsections.filter((ft,et)=>et!==ve),De})},onDeleteSubSubsection:(Pe,ve,Ne)=>{z(De=>{const ft=[...De];return ft[Pe].subsections[ve].subSubsections=ft[Pe].subsections[ve].subSubsections.filter((et,Pt)=>Pt!==Ne),ft})},isViewMode:!1})}),h.jsx(de,{sx:{flexGrow:1,p:4,overflow:"auto"},children:le==="ai"?h.jsx(X.Suspense,{fallback:h.jsx(Zr,{}),children:h.jsx(CQ,{courseId:m,authorId:(t==null?void 0:t.uid)||"",imageUploadProgress:re,isSaving:Ce,onMaterialReady:async Pe=>{console.log(" AI Material ready callback triggered:",Pe);try{ye(!0),oe({completed:0,total:1});const ve=Mi(),Ne=await rS(m,(t==null?void 0:t.uid)||"",ve,(et,Pt)=>{console.log(` Image upload progress: ${et}/${Pt}`),oe({completed:et,total:Pt})});console.log(" Material with images converted:",Ne);const De={...Ne,sections:Array.isArray(Ne.sections)?Ne.sections:[]},ft=await Ai(ln(r,"materials"),{...De,timestamp:Bf(),scheduledTimestamp:null});console.log(" Material saved to Firestore with ID:",ft.id),await Hr(ft,{id:ft.id}),console.log(" Material updated with correct ID:",ft.id),T("AI-imported material saved successfully!"),N("success"),Z(!0),ee(!1),Cd.getState().resetImport(),q("manual"),ye(!1),oe(null),n(`/edit-material/${ft.id}`)}catch(ve){console.error(" Failed to save AI material:",ve),T("Failed to save AI-imported material. Please try again."),N("error"),Z(!0),ye(!1),oe(null)}},onCancel:()=>q("manual"),onError:(Pe,ve)=>{console.error("Material Import Error:",Pe,ve),T(`Import error: ${Pe.message}`),N("error"),Z(!0)}})}):h.jsxs(de,{children:[h.jsx(Jt,{fullWidth:!0,label:"Section Title",value:ne(),onChange:Pe=>ke(Pe.target.value),variant:"outlined",sx:{mb:3}}),h.jsx(gn,{elevation:0,sx:{p:3,mb:3,backgroundColor:ht.palette.background.paper,borderRadius:kt.xl,border:`1px solid ${ht.palette.divider}`},children:h.jsx(FH,{content:Ae(),onChange:be})}),_.sectionIndex!==void 0&&h.jsxs(de,{sx:{mb:3},children:[h.jsx(gn,{elevation:0,sx:{p:3,mb:2,backgroundColor:ht.palette.background.paper,borderRadius:kt.xl,border:`1px solid ${ht.palette.divider}`},children:h.jsx(VF,{sectionId:ut(),images:Re(),onImagesChange:je})}),h.jsx(gn,{elevation:0,sx:{p:3,backgroundColor:ht.palette.background.paper,borderRadius:kt.xl,border:`1px solid ${ht.palette.divider}`},children:h.jsx(YF,{links:qe(),onLinksChange:Ze})})]}),se&&h.jsx(de,{sx:{mb:3},children:h.jsx(AQ,{value:Q,onChange:J})}),re&&h.jsx(de,{sx:{mb:3},children:h.jsxs(gn,{elevation:1,sx:{p:2,backgroundColor:ht.palette.background.paper,borderRadius:kt.xl,border:`1px solid ${ht.palette.divider}`},children:[h.jsxs(he,{variant:"body2",sx:{mb:1,color:ht.palette.text.secondary},children:["Uploading images... (",re.completed," of ",re.total,")"]}),h.jsx(Qo,{variant:"determinate",value:re.completed/re.total*100,sx:{borderRadius:kt.xl,height:8,backgroundColor:ht.palette.grey[200],"& .MuiLinearProgress-bar":{borderRadius:kt.xl,backgroundColor:ht.palette.primary.main}}})]})}),h.jsxs(de,{sx:{display:"flex",gap:2,justifyContent:"flex-end",flexWrap:"wrap"},children:[h.jsx(Ct,{variant:"outlined",onClick:Pe=>Ye(Pe,!1),startIcon:h.jsx(O0,{}),sx:{textTransform:"none"},children:"Save Draft"}),h.jsx(Ct,{variant:"contained",onClick:Pe=>Ye(Pe,!0),startIcon:h.jsx(a3,{}),sx:{textTransform:"none"},children:"Publish"}),h.jsx(Ct,{variant:"outlined",onClick:fe,startIcon:h.jsx(G0,{}),sx:{textTransform:"none",borderColor:ht.palette.primary.main,color:ht.palette.primary.main,"&:hover":{backgroundColor:ht.palette.primary.main,color:ht.palette.primary.contrastText}},children:"Schedule Publish"})]})]})})]}),h.jsx(Ll,{open:$,autoHideDuration:6e3,onClose:()=>Z(!1),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:h.jsx(rr,{onClose:()=>Z(!1),severity:R,sx:{width:"100%"},children:O})})]})},kQ=()=>{const{id:e}=F6(),n=Xn(),{userDetails:t}=zi(),[r,i]=X.useState(null),a=X.useMemo(()=>t!=null&&t.classes?Object.entries(t.classes).filter(([l,u])=>u.isCourseAdmin).map(([l])=>l):[],[t==null?void 0:t.classes]);X.useEffect(()=>{e&&(async()=>{try{const u=un(n,"materials",e),d=await ga(u);if(d.exists()){const f={id:d.id,...d.data()};console.log("Material data from Firestore:",f),console.log("Sections type:",typeof f.sections),console.log("Sections value:",f.sections),Array.isArray(f.sections)||(console.warn("Sections is not an array, initializing as empty array. Original value:",f.sections),f.sections=[]),f.sections=f.sections.map(m=>({id:m.id||Mi(),title:m.title||"Untitled Section",content:m.content||"",images:Array.isArray(m.images)?m.images.map(g=>({...g,title:g.title||""})):[],links:Array.isArray(m.links)?m.links:[],subsections:Array.isArray(m.subsections)?m.subsections.map(g=>({id:g.id||Mi(),title:g.title||"Untitled Subsection",content:g.content||"",images:Array.isArray(g.images)?g.images.map(x=>({...x,title:x.title||""})):[],links:Array.isArray(g.links)?g.links:[],subSubsections:Array.isArray(g.subSubsections)?g.subSubsections.map(x=>({id:x.id||Mi(),title:x.title||"Untitled Sub-subsection",content:x.content||"",images:Array.isArray(x.images)?x.images.map(y=>({...y,title:y.title||""})):[],links:Array.isArray(x.links)?x.links:[]})):[]})):[]})),f.course=a.includes(f.course)?f.course:a[0]||"",i(f)}}catch(u){console.error("Error fetching material:",u)}})()},[e,n,t,a]);const s=async l=>{try{if(e){const u=un(n,"materials",e);await Hr(u,{...l})}}catch(u){console.error("Error updating material:",u)}};return r?h.jsx(LO,{materialData:r,onSubmit:s}):h.jsx(de,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:h.jsx(Zr,{})})},jE=({children:e,...n})=>h.jsx(de,{...n,sx:{marginBottom:4,textAlign:"center",position:"relative"},children:e}),EQ=({src:e,alt:n,...t})=>h.jsx("img",{src:e,alt:n,...t,style:{maxWidth:"100%",maxHeight:"500px",marginBottom:8,borderRadius:8,boxShadow:"0 4px 12px rgba(0,0,0,0.1)",transition:"all 0.3s ease-in-out",...t.style},onMouseEnter:r=>{r.currentTarget.style.transform="scale(1.02)",r.currentTarget.style.boxShadow="0 8px 24px rgba(0,0,0,0.15)"},onMouseLeave:r=>{r.currentTarget.style.transform="scale(1)",r.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.1)"}}),_Q=e=>h.jsx(s3,{...e,sx:{borderRadius:1,marginBottom:1}}),NQ=({src:e,alt:n,title:t})=>{const[r,i]=X.useState(!1),[a,s]=X.useState(!1),[l]=X.useState(0);return X.useEffect(()=>{i(!1),s(!1);const u=new Image;return u.src=e,u.onload=()=>{console.log(` SmartImage loaded: ${e.substring(0,50)}...`),i(!0)},u.onerror=d=>{console.error(` SmartImage failed to load: ${e}`,d),console.error("Image details:",{src:e,naturalWidth:u.naturalWidth,naturalHeight:u.naturalHeight,complete:u.complete}),console.error("Image load failed. URL accessible via curl but blocked in browser."),console.error("This is likely a Firebase Storage CORS configuration issue."),console.error(`Fix: Configure CORS to allow ${window.location.origin}`),s(!0)},()=>{u.onload=null,u.onerror=null}},[e,l]),a?h.jsxs(jE,{children:[h.jsxs(de,{sx:{width:"100%",maxWidth:400,height:200,bgcolor:"#ffebee",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:1,border:"1px dashed #f44336",p:2},children:[h.jsx(he,{variant:"body2",color:"error",gutterBottom:!0,children:"Image failed to load"}),h.jsx(he,{variant:"caption",color:"text.secondary",sx:{textAlign:"center",wordBreak:"break-all"},children:t}),h.jsxs(he,{variant:"caption",color:"text.secondary",sx:{mt:1,fontSize:"0.7rem"},children:["URL: ",e.substring(0,60),"..."]})]}),h.jsx(he,{variant:"body2",sx:{fontStyle:"italic",mt:1},children:t})]}):h.jsxs(jE,{children:[!r&&h.jsx(_Q,{variant:"rectangular",width:"100%",height:300,sx:{maxWidth:400}}),h.jsx(Gw,{in:r,timeout:500,children:h.jsx(de,{sx:{display:r?"block":"none"},children:h.jsx(EQ,{src:e,alt:n,loading:"lazy"})})}),r&&h.jsx(Gw,{in:r,timeout:700,children:h.jsx(he,{variant:"body2",sx:{fontStyle:"italic",color:"text.secondary"},children:t})})]})},aw=({images:e})=>h.jsx(de,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mt:2},children:e.map((n,t)=>h.jsx(NQ,{src:n.url,alt:`Image ${t+1}`,title:n.title,index:t},`${n.url}-${t}`))}),jQ=e=>!e.startsWith("http://")&&!e.startsWith("https://")?`https://${e}`:e,TQ=({links:e})=>e.length===0?null:h.jsxs(de,{sx:{mt:2,width:"50%"},children:[h.jsx(he,{variant:"h6",sx:{fontWeight:"bold",mb:2},children:"Links"}),h.jsxs(de,{sx:{display:"flex",mb:1,borderBottom:"1px solid gray"},children:[h.jsx(he,{sx:{flexBasis:"30%",fontWeight:"bold"},children:"Title"}),h.jsx(he,{sx:{flexBasis:"30%",fontWeight:"bold"},children:"URL"}),h.jsx(he,{sx:{flexBasis:"40%",fontWeight:"bold"},children:"Description"})]}),e.map((n,t)=>h.jsx(de,{children:h.jsxs(de,{sx:{display:"flex",alignItems:"center",mb:1,flexWrap:"wrap",borderBottom:"1px solid lightgray"},children:[h.jsx(he,{sx:{flexBasis:"30%",fontStyle:"italic",wordWrap:"break-word",paddingRight:"8px"},children:n.title}),h.jsx(Og,{sx:{flexBasis:"30%",wordWrap:"break-word",paddingRight:"8px"},href:jQ(n.url),target:"_blank",rel:"noopener",children:n.url}),h.jsx(he,{sx:{flexBasis:"40%",wordWrap:"break-word"},children:n.description})]})},t))]});var Fs=Uint8Array,Yo=Uint16Array,vA=Int32Array,jv=new Fs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Tv=new Fs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),IS=new Fs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),RO=function(e,n){for(var t=new Yo(31),r=0;r<31;++r)t[r]=n+=1<<e[r-1];for(var i=new vA(t[30]),r=1;r<30;++r)for(var a=t[r];a<t[r+1];++a)i[a]=a-t[r]<<5|r;return{b:t,r:i}},MO=RO(jv,2),FO=MO.b,LS=MO.r;FO[28]=258,LS[258]=28;var PO=RO(Tv,0),OQ=PO.b,TE=PO.r,RS=new Yo(32768);for(var hi=0;hi<32768;++hi){var Nf=(hi&43690)>>1|(hi&21845)<<1;Nf=(Nf&52428)>>2|(Nf&13107)<<2,Nf=(Nf&61680)>>4|(Nf&3855)<<4,RS[hi]=((Nf&65280)>>8|(Nf&255)<<8)>>1}var _c=function(e,n,t){for(var r=e.length,i=0,a=new Yo(n);i<r;++i)e[i]&&++a[e[i]-1];var s=new Yo(n);for(i=1;i<n;++i)s[i]=s[i-1]+a[i-1]<<1;var l;if(t){l=new Yo(1<<n);var u=15-n;for(i=0;i<r;++i)if(e[i])for(var d=i<<4|e[i],f=n-e[i],m=s[e[i]-1]++<<f,b=m|(1<<f)-1;m<=b;++m)l[RS[m]>>u]=d}else for(l=new Yo(r),i=0;i<r;++i)e[i]&&(l[i]=RS[s[e[i]-1]++]>>15-e[i]);return l},Zf=new Fs(288);for(var hi=0;hi<144;++hi)Zf[hi]=8;for(var hi=144;hi<256;++hi)Zf[hi]=9;for(var hi=256;hi<280;++hi)Zf[hi]=7;for(var hi=280;hi<288;++hi)Zf[hi]=8;var yg=new Fs(32);for(var hi=0;hi<32;++hi)yg[hi]=5;var DQ=_c(Zf,9,0),IQ=_c(Zf,9,1),LQ=_c(yg,5,0),RQ=_c(yg,5,1),sw=function(e){for(var n=e[0],t=1;t<e.length;++t)e[t]>n&&(n=e[t]);return n},lu=function(e,n,t){var r=n/8|0;return(e[r]|e[r+1]<<8)>>(n&7)&t},ow=function(e,n){var t=n/8|0;return(e[t]|e[t+1]<<8|e[t+2]<<16)>>(n&7)},wA=function(e){return(e+7)/8|0},zO=function(e,n,t){return(t==null||t>e.length)&&(t=e.length),new Fs(e.subarray(n,t))},MQ=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],du=function(e,n,t){var r=new Error(n||MQ[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,du),!t)throw r;return r},FQ=function(e,n,t,r){var i=e.length,a=0;if(!i||n.f&&!n.l)return t||new Fs(0);var s=!t,l=s||n.i!=2,u=n.i;s&&(t=new Fs(i*3));var d=function(Le){var He=t.length;if(Le>He){var Ye=new Fs(Math.max(He*2,Le));Ye.set(t),t=Ye}},f=n.f||0,m=n.p||0,b=n.b||0,g=n.l,x=n.d,y=n.m,A=n.n,w=i*8;do{if(!g){f=lu(e,m,1);var C=lu(e,m+1,3);if(m+=3,C)if(C==1)g=IQ,x=RQ,y=9,A=5;else if(C==2){var z=lu(e,m,31)+257,_=lu(e,m+10,15)+4,L=z+lu(e,m+5,31)+1;m+=14;for(var $=new Fs(L),Z=new Fs(19),O=0;O<_;++O)Z[IS[O]]=lu(e,m+O*3,7);m+=_*3;for(var T=sw(Z),R=(1<<T)-1,N=_c(Z,T,1),O=0;O<L;){var G=N[lu(e,m,R)];m+=G&15;var j=G>>4;if(j<16)$[O++]=j;else{var W=0,Q=0;for(j==16?(Q=3+lu(e,m,3),m+=2,W=$[O-1]):j==17?(Q=3+lu(e,m,7),m+=3):j==18&&(Q=11+lu(e,m,127),m+=7);Q--;)$[O++]=W}}var J=$.subarray(0,z),se=$.subarray(z);y=sw(J),A=sw(se),g=_c(J,y,1),x=_c(se,A,1)}else du(1);else{var j=wA(m)+4,F=e[j-4]|e[j-3]<<8,M=j+F;if(M>i){u&&du(0);break}l&&d(b+F),t.set(e.subarray(j,M),b),n.b=b+=F,n.p=m=M*8,n.f=f;continue}if(m>w){u&&du(0);break}}l&&d(b+131072);for(var U=(1<<y)-1,le=(1<<A)-1,q=m;;q=m){var W=g[ow(e,m)&U],B=W>>4;if(m+=W&15,m>w){u&&du(0);break}if(W||du(2),B<256)t[b++]=B;else if(B==256){q=m,g=null;break}else{var ee=B-254;if(B>264){var O=B-257,re=jv[O];ee=lu(e,m,(1<<re)-1)+FO[O],m+=re}var oe=x[ow(e,m)&le],Ce=oe>>4;oe||du(3),m+=oe&15;var se=OQ[Ce];if(Ce>3){var re=Tv[Ce];se+=ow(e,m)&(1<<re)-1,m+=re}if(m>w){u&&du(0);break}l&&d(b+131072);var ye=b+ee;if(b<se){var Se=a-se,Te=Math.min(se,ye);for(Se+b<0&&du(3);b<Te;++b)t[b]=r[Se+b]}for(;b<ye;++b)t[b]=t[b-se]}}n.l=g,n.p=q,n.b=b,n.f=f,g&&(f=1,n.m=y,n.d=x,n.n=A)}while(!f);return b!=t.length&&s?zO(t,0,b):t.subarray(0,b)},pd=function(e,n,t){t<<=n&7;var r=n/8|0;e[r]|=t,e[r+1]|=t>>8},S1=function(e,n,t){t<<=n&7;var r=n/8|0;e[r]|=t,e[r+1]|=t>>8,e[r+2]|=t>>16},lw=function(e,n){for(var t=[],r=0;r<e.length;++r)e[r]&&t.push({s:r,f:e[r]});var i=t.length,a=t.slice();if(!i)return{t:BO,l:0};if(i==1){var s=new Fs(t[0].s+1);return s[t[0].s]=1,{t:s,l:1}}t.sort(function(M,z){return M.f-z.f}),t.push({s:-1,f:25001});var l=t[0],u=t[1],d=0,f=1,m=2;for(t[0]={s:-1,f:l.f+u.f,l,r:u};f!=i-1;)l=t[t[d].f<t[m].f?d++:m++],u=t[d!=f&&t[d].f<t[m].f?d++:m++],t[f++]={s:-1,f:l.f+u.f,l,r:u};for(var b=a[0].s,r=1;r<i;++r)a[r].s>b&&(b=a[r].s);var g=new Yo(b+1),x=MS(t[f-1],g,0);if(x>n){var r=0,y=0,A=x-n,w=1<<A;for(a.sort(function(z,_){return g[_.s]-g[z.s]||z.f-_.f});r<i;++r){var C=a[r].s;if(g[C]>n)y+=w-(1<<x-g[C]),g[C]=n;else break}for(y>>=A;y>0;){var j=a[r].s;g[j]<n?y-=1<<n-g[j]++-1:++r}for(;r>=0&&y;--r){var F=a[r].s;g[F]==n&&(--g[F],++y)}x=n}return{t:new Fs(g),l:x}},MS=function(e,n,t){return e.s==-1?Math.max(MS(e.l,n,t+1),MS(e.r,n,t+1)):n[e.s]=t},OE=function(e){for(var n=e.length;n&&!e[--n];);for(var t=new Yo(++n),r=0,i=e[0],a=1,s=function(u){t[r++]=u},l=1;l<=n;++l)if(e[l]==i&&l!=n)++a;else{if(!i&&a>2){for(;a>138;a-=138)s(32754);a>2&&(s(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(s(i),--a;a>6;a-=6)s(8304);a>2&&(s(a-3<<5|8208),a=0)}for(;a--;)s(i);a=1,i=e[l]}return{c:t.subarray(0,r),n}},A1=function(e,n){for(var t=0,r=0;r<n.length;++r)t+=e[r]*n[r];return t},qO=function(e,n,t){var r=t.length,i=wA(n+2);e[i]=r&255,e[i+1]=r>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var a=0;a<r;++a)e[i+a+4]=t[a];return(i+4+r)*8},DE=function(e,n,t,r,i,a,s,l,u,d,f){pd(n,f++,t),++i[256];for(var m=lw(i,15),b=m.t,g=m.l,x=lw(a,15),y=x.t,A=x.l,w=OE(b),C=w.c,j=w.n,F=OE(y),M=F.c,z=F.n,_=new Yo(19),L=0;L<C.length;++L)++_[C[L]&31];for(var L=0;L<M.length;++L)++_[M[L]&31];for(var $=lw(_,7),Z=$.t,O=$.l,T=19;T>4&&!Z[IS[T-1]];--T);var R=d+5<<3,N=A1(i,Zf)+A1(a,yg)+s,G=A1(i,b)+A1(a,y)+s+14+3*T+A1(_,Z)+2*_[16]+3*_[17]+7*_[18];if(u>=0&&R<=N&&R<=G)return qO(n,f,e.subarray(u,u+d));var W,Q,J,se;if(pd(n,f,1+(G<N)),f+=2,G<N){W=_c(b,g,0),Q=b,J=_c(y,A,0),se=y;var U=_c(Z,O,0);pd(n,f,j-257),pd(n,f+5,z-1),pd(n,f+10,T-4),f+=14;for(var L=0;L<T;++L)pd(n,f+3*L,Z[IS[L]]);f+=3*T;for(var le=[C,M],q=0;q<2;++q)for(var B=le[q],L=0;L<B.length;++L){var ee=B[L]&31;pd(n,f,U[ee]),f+=Z[ee],ee>15&&(pd(n,f,B[L]>>5&127),f+=B[L]>>12)}}else W=DQ,Q=Zf,J=LQ,se=yg;for(var L=0;L<l;++L){var re=r[L];if(re>255){var ee=re>>18&31;S1(n,f,W[ee+257]),f+=Q[ee+257],ee>7&&(pd(n,f,re>>23&31),f+=jv[ee]);var oe=re&31;S1(n,f,J[oe]),f+=se[oe],oe>3&&(S1(n,f,re>>5&8191),f+=Tv[oe])}else S1(n,f,W[re]),f+=Q[re]}return S1(n,f,W[256]),f+Q[256]},PQ=new vA([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),BO=new Fs(0),zQ=function(e,n,t,r,i,a){var s=a.z||e.length,l=new Fs(r+s+5*(1+Math.ceil(s/7e3))+i),u=l.subarray(r,l.length-i),d=a.l,f=(a.r||0)&7;if(n){f&&(u[0]=a.r>>3);for(var m=PQ[n-1],b=m>>13,g=m&8191,x=(1<<t)-1,y=a.p||new Yo(32768),A=a.h||new Yo(x+1),w=Math.ceil(t/3),C=2*w,j=function(V){return(e[V]^e[V+1]<<w^e[V+2]<<C)&x},F=new vA(25e3),M=new Yo(288),z=new Yo(32),_=0,L=0,$=a.i||0,Z=0,O=a.w||0,T=0;$+2<s;++$){var R=j($),N=$&32767,G=A[R];if(y[N]=G,A[R]=N,O<=$){var W=s-$;if((_>7e3||Z>24576)&&(W>423||!d)){f=DE(e,u,0,F,M,z,L,Z,T,$-T,f),Z=_=L=0,T=$;for(var Q=0;Q<286;++Q)M[Q]=0;for(var Q=0;Q<30;++Q)z[Q]=0}var J=2,se=0,U=g,le=N-G&32767;if(W>2&&R==j($-le))for(var q=Math.min(b,W)-1,B=Math.min(32767,$),ee=Math.min(258,W);le<=B&&--U&&N!=G;){if(e[$+J]==e[$+J-le]){for(var re=0;re<ee&&e[$+re]==e[$+re-le];++re);if(re>J){if(J=re,se=le,re>q)break;for(var oe=Math.min(le,re-2),Ce=0,Q=0;Q<oe;++Q){var ye=$-le+Q&32767,Se=y[ye],Te=ye-Se&32767;Te>Ce&&(Ce=Te,G=ye)}}}N=G,G=y[N],le+=N-G&32767}if(se){F[Z++]=268435456|LS[J]<<18|TE[se];var Le=LS[J]&31,He=TE[se]&31;L+=jv[Le]+Tv[He],++M[257+Le],++z[He],O=$+J,++_}else F[Z++]=e[$],++M[e[$]]}}for($=Math.max($,O);$<s;++$)F[Z++]=e[$],++M[e[$]];f=DE(e,u,d,F,M,z,L,Z,T,$-T,f),d||(a.r=f&7|u[f/8|0]<<3,f-=7,a.h=A,a.p=y,a.i=$,a.w=O)}else{for(var $=a.w||0;$<s+d;$+=65535){var Ye=$+65535;Ye>=s&&(u[f/8|0]=d,Ye=s),f=qO(u,f+1,e.subarray($,Ye))}a.i=s}return zO(l,0,r+wA(f)+i)},$O=function(){var e=1,n=0;return{p:function(t){for(var r=e,i=n,a=t.length|0,s=0;s!=a;){for(var l=Math.min(s+2655,a);s<l;++s)i+=r+=t[s];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}e=r,n=i},d:function(){return e%=65521,n%=65521,(e&255)<<24|(e&65280)<<8|(n&255)<<8|n>>8}}},qQ=function(e,n,t,r,i){if(!i&&(i={l:1},n.dictionary)){var a=n.dictionary.subarray(-32768),s=new Fs(a.length+e.length);s.set(a),s.set(e,a.length),e=s,i.w=a.length}return zQ(e,n.level==null?6:n.level,n.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+n.mem,t,r,i)},UO=function(e,n,t){for(;t;++n)e[n]=t,t>>>=8},BQ=function(e,n){var t=n.level,r=t==0?0:t<6?1:t==9?3:2;if(e[0]=120,e[1]=r<<6|(n.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,n.dictionary){var i=$O();i.p(n.dictionary),UO(e,2,i.d())}},$Q=function(e,n){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&du(6,"invalid zlib data"),(e[1]>>5&1)==1&&du(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function FS(e,n){n||(n={});var t=$O();t.p(e);var r=qQ(e,n,n.dictionary?6:2,4);return BQ(r,n),UO(r,r.length-4,t.d()),r}function UQ(e,n){return FQ(e.subarray($Q(e),-4),{i:2},n,n)}var HQ=typeof TextDecoder<"u"&&new TextDecoder,WQ=0;try{HQ.decode(BO,{stream:!0}),WQ=1}catch{}var fn=function(){return typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:this}();function uw(){fn.console&&typeof fn.console.log=="function"&&fn.console.log.apply(fn.console,arguments)}var Kr={log:uw,warn:function(e){fn.console&&(typeof fn.console.warn=="function"?fn.console.warn.apply(fn.console,arguments):uw.call(null,arguments))},error:function(e){fn.console&&(typeof fn.console.error=="function"?fn.console.error.apply(fn.console,arguments):uw(e))}};function cw(e,n,t){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){qh(r.response,n,t)},r.onerror=function(){Kr.error("could not download file")},r.send()}function IE(e){var n=new XMLHttpRequest;n.open("HEAD",e,!1);try{n.send()}catch{}return n.status>=200&&n.status<=299}function Ny(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}}var K1,PS,qh=fn.saveAs||((typeof window>"u"?"undefined":Xr(window))!=="object"||window!==fn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,n,t){var r=fn.URL||fn.webkitURL,i=document.createElement("a");n=n||e.name||"download",i.download=n,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?IE(i.href)?cw(e,n,t):Ny(i,i.target="_blank"):Ny(i)):(i.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Ny(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,n,t){if(n=n||e.name||"download",typeof e=="string")if(IE(e))cw(e,n,t);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){Ny(r)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:Xr(a)!=="object"&&(Kr.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(e,t),n)}:function(e,n,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return cw(e,n,t);var i=e.type==="application/octet-stream",a=/constructor/i.test(fn.HTMLElement)||fn.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&a)&&(typeof FileReader>"u"?"undefined":Xr(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var f=l.result;f=s?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=f:location=f,r=null},l.readAsDataURL(e)}else{var u=fn.URL||fn.webkitURL,d=u.createObjectURL(e);r?r.location=d:location.href=d,r=null,setTimeout(function(){u.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function HO(e){var n;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,a=t[r].process,s=i.exec(e);s&&(n=a(s),this.r=n[0],this.g=n[1],this.b=n[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),u=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),d.length==1&&(d="0"+d),"#"+l+u+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function dw(e,n){var t=e[0],r=e[1],i=e[2],a=e[3];t=Ts(t,r,i,a,n[0],7,-680876936),a=Ts(a,t,r,i,n[1],12,-389564586),i=Ts(i,a,t,r,n[2],17,606105819),r=Ts(r,i,a,t,n[3],22,-1044525330),t=Ts(t,r,i,a,n[4],7,-176418897),a=Ts(a,t,r,i,n[5],12,1200080426),i=Ts(i,a,t,r,n[6],17,-1473231341),r=Ts(r,i,a,t,n[7],22,-45705983),t=Ts(t,r,i,a,n[8],7,1770035416),a=Ts(a,t,r,i,n[9],12,-1958414417),i=Ts(i,a,t,r,n[10],17,-42063),r=Ts(r,i,a,t,n[11],22,-1990404162),t=Ts(t,r,i,a,n[12],7,1804603682),a=Ts(a,t,r,i,n[13],12,-40341101),i=Ts(i,a,t,r,n[14],17,-1502002290),t=Os(t,r=Ts(r,i,a,t,n[15],22,1236535329),i,a,n[1],5,-165796510),a=Os(a,t,r,i,n[6],9,-1069501632),i=Os(i,a,t,r,n[11],14,643717713),r=Os(r,i,a,t,n[0],20,-373897302),t=Os(t,r,i,a,n[5],5,-701558691),a=Os(a,t,r,i,n[10],9,38016083),i=Os(i,a,t,r,n[15],14,-660478335),r=Os(r,i,a,t,n[4],20,-405537848),t=Os(t,r,i,a,n[9],5,568446438),a=Os(a,t,r,i,n[14],9,-1019803690),i=Os(i,a,t,r,n[3],14,-187363961),r=Os(r,i,a,t,n[8],20,1163531501),t=Os(t,r,i,a,n[13],5,-1444681467),a=Os(a,t,r,i,n[2],9,-51403784),i=Os(i,a,t,r,n[7],14,1735328473),t=Ds(t,r=Os(r,i,a,t,n[12],20,-1926607734),i,a,n[5],4,-378558),a=Ds(a,t,r,i,n[8],11,-2022574463),i=Ds(i,a,t,r,n[11],16,1839030562),r=Ds(r,i,a,t,n[14],23,-35309556),t=Ds(t,r,i,a,n[1],4,-1530992060),a=Ds(a,t,r,i,n[4],11,1272893353),i=Ds(i,a,t,r,n[7],16,-155497632),r=Ds(r,i,a,t,n[10],23,-1094730640),t=Ds(t,r,i,a,n[13],4,681279174),a=Ds(a,t,r,i,n[0],11,-358537222),i=Ds(i,a,t,r,n[3],16,-722521979),r=Ds(r,i,a,t,n[6],23,76029189),t=Ds(t,r,i,a,n[9],4,-640364487),a=Ds(a,t,r,i,n[12],11,-421815835),i=Ds(i,a,t,r,n[15],16,530742520),t=Is(t,r=Ds(r,i,a,t,n[2],23,-995338651),i,a,n[0],6,-198630844),a=Is(a,t,r,i,n[7],10,1126891415),i=Is(i,a,t,r,n[14],15,-1416354905),r=Is(r,i,a,t,n[5],21,-57434055),t=Is(t,r,i,a,n[12],6,1700485571),a=Is(a,t,r,i,n[3],10,-1894986606),i=Is(i,a,t,r,n[10],15,-1051523),r=Is(r,i,a,t,n[1],21,-2054922799),t=Is(t,r,i,a,n[8],6,1873313359),a=Is(a,t,r,i,n[15],10,-30611744),i=Is(i,a,t,r,n[6],15,-1560198380),r=Is(r,i,a,t,n[13],21,1309151649),t=Is(t,r,i,a,n[4],6,-145523070),a=Is(a,t,r,i,n[11],10,-1120210379),i=Is(i,a,t,r,n[2],15,718787259),r=Is(r,i,a,t,n[9],21,-343485551),e[0]=Pf(t,e[0]),e[1]=Pf(r,e[1]),e[2]=Pf(i,e[2]),e[3]=Pf(a,e[3])}function Ov(e,n,t,r,i,a){return n=Pf(Pf(n,e),Pf(r,a)),Pf(n<<i|n>>>32-i,t)}function Ts(e,n,t,r,i,a,s){return Ov(n&t|~n&r,e,n,i,a,s)}function Os(e,n,t,r,i,a,s){return Ov(n&r|t&~r,e,n,i,a,s)}function Ds(e,n,t,r,i,a,s){return Ov(n^t^r,e,n,i,a,s)}function Is(e,n,t,r,i,a,s){return Ov(t^(n|~r),e,n,i,a,s)}function WO(e){var n,t=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=e.length;n+=64)dw(r,VQ(e.substring(n-64,n)));e=e.substring(n-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<e.length;n++)i[n>>2]|=e.charCodeAt(n)<<(n%4<<3);if(i[n>>2]|=128<<(n%4<<3),n>55)for(dw(r,i),n=0;n<16;n++)i[n]=0;return i[14]=8*t,dw(r,i),r}function VQ(e){var n,t=[];for(n=0;n<64;n+=4)t[n>>2]=e.charCodeAt(n)+(e.charCodeAt(n+1)<<8)+(e.charCodeAt(n+2)<<16)+(e.charCodeAt(n+3)<<24);return t}K1=fn.atob.bind(fn),PS=fn.btoa.bind(fn);var LE="0123456789abcdef".split("");function YQ(e){for(var n="",t=0;t<4;t++)n+=LE[e>>8*t+4&15]+LE[e>>8*t&15];return n}function GQ(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function zS(e){return WO(e).map(GQ).join("")}var QQ=function(e){for(var n=0;n<e.length;n++)e[n]=YQ(e[n]);return e.join("")}(WO("hello"))!="5d41402abc4b2a76b9719d911017c592";function Pf(e,n){if(QQ){var t=(65535&e)+(65535&n);return(e>>16)+(n>>16)+(t>>16)<<16|65535&t}return e+n&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function qS(e,n){var t,r,i,a;if(e!==t){for(var s=(i=e,a=1+(256/e.length>>0),new Array(a+1).join(i)),l=[],u=0;u<256;u++)l[u]=u;var d=0;for(u=0;u<256;u++){var f=l[u];d=(d+f+s.charCodeAt(u))%256,l[u]=l[d],l[d]=f}t=e,r=l}else l=r;var m=n.length,b=0,g=0,x="";for(u=0;u<m;u++)g=(g+(f=l[b=(b+1)%256]))%256,l[b]=l[g],l[g]=f,s=l[(l[b]+l[g])%256],x+=String.fromCharCode(n.charCodeAt(u)^s);return x}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var RE={print:4,modify:8,copy:16,"annot-forms":32};function N0(e,n,t,r){this.v=1,this.r=2;var i=192;e.forEach(function(l){if(RE.perm!==void 0)throw new Error("Invalid permission: "+l);i+=RE[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(n+this.padding).substr(0,32),s=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,s),this.P=-(1+(255^i)),this.encryptionKey=zS(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=qS(this.encryptionKey,this.padding)}function j0(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var n="",t=e.length,r=0;r<t;r++){var i=e.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?n+="#"+("0"+i.toString(16)).slice(-2):n+=e[r]}return n}function ME(e){if(Xr(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var n={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");n.hasOwnProperty(t)||(n[t]={});var a=Math.random().toString(35);return n[t][a]=[r,!!i],a},this.unsubscribe=function(t){for(var r in n)if(n[r][t])return delete n[r][t],Object.keys(n[r]).length===0&&delete n[r],!0;return!1},this.publish=function(t){if(n.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var a in n[t]){var s=n[t][a];try{s[0].apply(e,r)}catch(l){fn.console&&Kr.error("jsPDF PubSub Error",l.message,l)}s[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return n}}function Bx(e){if(!(this instanceof Bx))return new Bx(e);var n="opacity,stroke-opacity".split(",");for(var t in e)e.hasOwnProperty(t)&&n.indexOf(t)>=0&&(this[t]=e[t]);this.id="",this.objectNumber=-1}function VO(e,n){this.gState=e,this.matrix=n,this.id="",this.objectNumber=-1}function Bh(e,n,t,r,i){if(!(this instanceof Bh))return new Bh(e,n,t,r,i);this.type=e==="axial"?2:3,this.coords=n,this.colors=t,VO.call(this,r,i)}function T0(e,n,t,r,i){if(!(this instanceof T0))return new T0(e,n,t,r,i);this.boundingBox=e,this.xStep=n,this.yStep=t,this.stream="",this.cloneIndex=0,VO.call(this,r,i)}function on(e){var n,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],a=arguments[3],s=[],l=1,u=16,d="S",f=null;Xr(e=e||{})==="object"&&(t=e.orientation,r=e.unit||r,i=e.format||i,a=e.compress||e.compressPdf||a,(f=e.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(n=e.precision),e.floatPrecision!==void 0&&(u=e.floatPrecision),d=e.defaultPathOperation||"S"),s=e.filters||(a===!0?["FlateEncode"]:s),r=r||"mm",t=(""+(t||"P")).toLowerCase();var m=e.putOnlyUsedFonts||!1,b={},g={internal:{},__private__:{}};g.__private__.PubSub=ME;var x="1.3",y=g.__private__.getPdfVersion=function(){return x};g.__private__.setPdfVersion=function(I){x=I};var A={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return A};var w=g.__private__.getPageFormat=function(I){return A[I]};i=i||"a4";var C={COMPAT:"compat",ADVANCED:"advanced"},j=C.COMPAT;function F(){this.saveGraphicsState(),ne(new Lt(et,0,0,-et,0,Du()*et).toString()+" cm"),this.setFontSize(this.getFontSize()/et),d="n",j=C.ADVANCED}function M(){this.restoreGraphicsState(),d="S",j=C.COMPAT}var z=g.__private__.combineFontStyleAndFontWeight=function(I,ae){if(I=="bold"&&ae=="normal"||I=="bold"&&ae==400||I=="normal"&&ae=="italic"||I=="bold"&&ae=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ae&&(I=ae==400||ae==="normal"?I==="italic"?"italic":"normal":ae!=700&&ae!=="bold"||I!=="normal"?(ae==700?"bold":ae)+""+I:"bold"),I};g.advancedAPI=function(I){var ae=j===C.COMPAT;return ae&&F.call(this),typeof I!="function"||(I(this),ae&&M.call(this)),this},g.compatAPI=function(I){var ae=j===C.ADVANCED;return ae&&M.call(this),typeof I!="function"||(I(this),ae&&F.call(this)),this},g.isAdvancedAPI=function(){return j===C.ADVANCED};var _,L=function(I){if(j!==C.ADVANCED)throw new Error(I+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},$=g.roundToPrecision=g.__private__.roundToPrecision=function(I,ae){var _e=n||ae;if(isNaN(I)||isNaN(_e))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return I.toFixed(_e).replace(/0+$/,"")};_=g.hpf=g.__private__.hpf=typeof u=="number"?function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.hpf");return $(I,u)}:u==="smart"?function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.hpf");return $(I,I>-1&&I<1?16:5)}:function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.hpf");return $(I,16)};var Z=g.f2=g.__private__.f2=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.f2");return $(I,2)},O=g.__private__.f3=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.f3");return $(I,3)},T=g.scale=g.__private__.scale=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.scale");return j===C.COMPAT?I*et:j===C.ADVANCED?I:void 0},R=function(I){return j===C.COMPAT?Du()-I:j===C.ADVANCED?I:void 0},N=function(I){return T(R(I))};g.__private__.setPrecision=g.setPrecision=function(I){typeof parseInt(I,10)=="number"&&(n=parseInt(I,10))};var G,W="00000000000000000000000000000000",Q=g.__private__.getFileId=function(){return W},J=g.__private__.setFileId=function(I){return W=I!==void 0&&/^[a-fA-F0-9]{32}$/.test(I)?I.toUpperCase():W.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(li=new N0(f.userPermissions,f.userPassword,f.ownerPassword,W)),W};g.setFileId=function(I){return J(I),this},g.getFileId=function(){return Q()};var se=g.__private__.convertDateToPDFDate=function(I){var ae=I.getTimezoneOffset(),_e=ae<0?"+":"-",Me=Math.floor(Math.abs(ae/60)),Ge=Math.abs(ae%60),dt=[_e,ee(Me),"'",ee(Ge),"'"].join("");return["D:",I.getFullYear(),ee(I.getMonth()+1),ee(I.getDate()),ee(I.getHours()),ee(I.getMinutes()),ee(I.getSeconds()),dt].join("")},U=g.__private__.convertPDFDateToDate=function(I){var ae=parseInt(I.substr(2,4),10),_e=parseInt(I.substr(6,2),10)-1,Me=parseInt(I.substr(8,2),10),Ge=parseInt(I.substr(10,2),10),dt=parseInt(I.substr(12,2),10),At=parseInt(I.substr(14,2),10);return new Date(ae,_e,Me,Ge,dt,At,0)},le=g.__private__.setCreationDate=function(I){var ae;if(I===void 0&&(I=new Date),I instanceof Date)ae=se(I);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(I))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ae=I}return G=ae},q=g.__private__.getCreationDate=function(I){var ae=G;return I==="jsDate"&&(ae=U(G)),ae};g.setCreationDate=function(I){return le(I),this},g.getCreationDate=function(I){return q(I)};var B,ee=g.__private__.padd2=function(I){return("0"+parseInt(I)).slice(-2)},re=g.__private__.padd2Hex=function(I){return("00"+(I=I.toString())).substr(I.length)},oe=0,Ce=[],ye=[],Se=0,Te=[],Le=[],He=!1,Ye=ye,V=function(){oe=0,Se=0,ye=[],Ce=[],Te=[],_r=fr(),Ia=fr()};g.__private__.setCustomOutputDestination=function(I){He=!0,Ye=I};var Ae=function(I){He||(Ye=I)};g.__private__.resetCustomOutputDestination=function(){He=!1,Ye=ye};var ne=g.__private__.out=function(I){return I=I.toString(),Se+=I.length+1,Ye.push(I),Ye},be=g.__private__.write=function(I){return ne(arguments.length===1?I.toString():Array.prototype.join.call(arguments," "))},fe=g.__private__.getArrayBuffer=function(I){for(var ae=I.length,_e=new ArrayBuffer(ae),Me=new Uint8Array(_e);ae--;)Me[ae]=I.charCodeAt(ae);return _e},ke=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return ke};var Re=e.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(I){return Re=j===C.ADVANCED?I/et:I,this};var qe,je=g.__private__.getFontSize=g.getFontSize=function(){return j===C.COMPAT?Re:Re*et},Ze=e.R2L||!1;g.__private__.setR2L=g.setR2L=function(I){return Ze=I,this},g.__private__.getR2L=g.getR2L=function(){return Ze};var ut,rt=g.__private__.setZoomMode=function(I){var ae=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(I))qe=I;else if(isNaN(I)){if(ae.indexOf(I)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+I+'" is not recognized.');qe=I}else qe=parseInt(I,10)};g.__private__.getZoomMode=function(){return qe};var Pe,ve=g.__private__.setPageMode=function(I){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(I)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+I+'" is not recognized.');ut=I};g.__private__.getPageMode=function(){return ut};var Ne=g.__private__.setLayoutMode=function(I){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(I)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+I+'" is not recognized.');Pe=I};g.__private__.getLayoutMode=function(){return Pe},g.__private__.setDisplayMode=g.setDisplayMode=function(I,ae,_e){return rt(I),Ne(ae),ve(_e),this};var De={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(I){if(Object.keys(De).indexOf(I)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return De[I]},g.__private__.getDocumentProperties=function(){return De},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(I){for(var ae in De)De.hasOwnProperty(ae)&&I[ae]&&(De[ae]=I[ae]);return this},g.__private__.setDocumentProperty=function(I,ae){if(Object.keys(De).indexOf(I)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return De[I]=ae};var ft,et,Pt,Nt,Vt,Rt={},Xt={},nn=[],cn={},Pn={},zn={},Yr={},ir=null,Rn=0,Yt=[],An=new ME(g),wa=e.hotfixes||[],wr={},oi={},Sa=[],Lt=function I(ae,_e,Me,Ge,dt,At){if(!(this instanceof I))return new I(ae,_e,Me,Ge,dt,At);isNaN(ae)&&(ae=1),isNaN(_e)&&(_e=0),isNaN(Me)&&(Me=0),isNaN(Ge)&&(Ge=1),isNaN(dt)&&(dt=0),isNaN(At)&&(At=0),this._matrix=[ae,_e,Me,Ge,dt,At]};Object.defineProperty(Lt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(I){this._matrix[0]=I}}),Object.defineProperty(Lt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(I){this._matrix[1]=I}}),Object.defineProperty(Lt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(I){this._matrix[2]=I}}),Object.defineProperty(Lt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(I){this._matrix[3]=I}}),Object.defineProperty(Lt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(I){this._matrix[4]=I}}),Object.defineProperty(Lt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(I){this._matrix[5]=I}}),Object.defineProperty(Lt.prototype,"a",{get:function(){return this._matrix[0]},set:function(I){this._matrix[0]=I}}),Object.defineProperty(Lt.prototype,"b",{get:function(){return this._matrix[1]},set:function(I){this._matrix[1]=I}}),Object.defineProperty(Lt.prototype,"c",{get:function(){return this._matrix[2]},set:function(I){this._matrix[2]=I}}),Object.defineProperty(Lt.prototype,"d",{get:function(){return this._matrix[3]},set:function(I){this._matrix[3]=I}}),Object.defineProperty(Lt.prototype,"e",{get:function(){return this._matrix[4]},set:function(I){this._matrix[4]=I}}),Object.defineProperty(Lt.prototype,"f",{get:function(){return this._matrix[5]},set:function(I){this._matrix[5]=I}}),Object.defineProperty(Lt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Lt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Lt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Lt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Lt.prototype.join=function(I){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(_).join(I)},Lt.prototype.multiply=function(I){var ae=I.sx*this.sx+I.shy*this.shx,_e=I.sx*this.shy+I.shy*this.sy,Me=I.shx*this.sx+I.sy*this.shx,Ge=I.shx*this.shy+I.sy*this.sy,dt=I.tx*this.sx+I.ty*this.shx+this.tx,At=I.tx*this.shy+I.ty*this.sy+this.ty;return new Lt(ae,_e,Me,Ge,dt,At)},Lt.prototype.decompose=function(){var I=this.sx,ae=this.shy,_e=this.shx,Me=this.sy,Ge=this.tx,dt=this.ty,At=Math.sqrt(I*I+ae*ae),Ot=(I/=At)*_e+(ae/=At)*Me;_e-=I*Ot,Me-=ae*Ot;var Ut=Math.sqrt(_e*_e+Me*Me);return Ot/=Ut,I*(Me/=Ut)<ae*(_e/=Ut)&&(I=-I,ae=-ae,Ot=-Ot,At=-At),{scale:new Lt(At,0,0,Ut,0,0),translate:new Lt(1,0,0,1,Ge,dt),rotate:new Lt(I,ae,-ae,I,0,0),skew:new Lt(1,0,Ot,1,0,0)}},Lt.prototype.toString=function(I){return this.join(" ")},Lt.prototype.inversed=function(){var I=this.sx,ae=this.shy,_e=this.shx,Me=this.sy,Ge=this.tx,dt=this.ty,At=1/(I*Me-ae*_e),Ot=Me*At,Ut=-ae*At,vn=-_e*At,pn=I*At;return new Lt(Ot,Ut,vn,pn,-Ot*Ge-vn*dt,-Ut*Ge-pn*dt)},Lt.prototype.applyToPoint=function(I){var ae=I.x*this.sx+I.y*this.shx+this.tx,_e=I.x*this.shy+I.y*this.sy+this.ty;return new Vd(ae,_e)},Lt.prototype.applyToRectangle=function(I){var ae=this.applyToPoint(I),_e=this.applyToPoint(new Vd(I.x+I.w,I.y+I.h));return new ch(ae.x,ae.y,_e.x-ae.x,_e.y-ae.y)},Lt.prototype.clone=function(){var I=this.sx,ae=this.shy,_e=this.shx,Me=this.sy,Ge=this.tx,dt=this.ty;return new Lt(I,ae,_e,Me,Ge,dt)},g.Matrix=Lt;var Hn=g.matrixMult=function(I,ae){return ae.multiply(I)},ar=new Lt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=ar;var Rr=function(I,ae){if(!Pn[I]){var _e=(ae instanceof Bh?"Sh":"P")+(Object.keys(cn).length+1).toString(10);ae.id=_e,Pn[I]=_e,cn[_e]=ae,An.publish("addPattern",ae)}};g.ShadingPattern=Bh,g.TilingPattern=T0,g.addShadingPattern=function(I,ae){return L("addShadingPattern()"),Rr(I,ae),this},g.beginTilingPattern=function(I){L("beginTilingPattern()"),Yd(I.boundingBox[0],I.boundingBox[1],I.boundingBox[2]-I.boundingBox[0],I.boundingBox[3]-I.boundingBox[1],I.matrix)},g.endTilingPattern=function(I,ae){L("endTilingPattern()"),ae.stream=Le[B].join(`
`),Rr(I,ae),An.publish("endTilingPattern",ae),Sa.pop().restore()};var dr=g.__private__.newObject=function(){var I=fr();return Un(I,!0),I},fr=g.__private__.newObjectDeferred=function(){return oe++,Ce[oe]=function(){return Se},oe},Un=function(I,ae){return ae=typeof ae=="boolean"&&ae,Ce[I]=Se,ae&&ne(I+" 0 obj"),I},ys=g.__private__.newAdditionalObject=function(){var I={objId:fr(),content:""};return Te.push(I),I},_r=fr(),Ia=fr(),qi=g.__private__.decodeColorString=function(I){var ae=I.split(" ");if(ae.length!==2||ae[1]!=="g"&&ae[1]!=="G")ae.length===5&&(ae[4]==="k"||ae[4]==="K")&&(ae=[(1-ae[0])*(1-ae[3]),(1-ae[1])*(1-ae[3]),(1-ae[2])*(1-ae[3]),"r"]);else{var _e=parseFloat(ae[0]);ae=[_e,_e,_e,"r"]}for(var Me="#",Ge=0;Ge<3;Ge++)Me+=("0"+Math.floor(255*parseFloat(ae[Ge])).toString(16)).slice(-2);return Me},Bi=g.__private__.encodeColorString=function(I){var ae;typeof I=="string"&&(I={ch1:I});var _e=I.ch1,Me=I.ch2,Ge=I.ch3,dt=I.ch4,At=I.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof _e=="string"&&_e.charAt(0)!=="#"){var Ot=new HO(_e);if(Ot.ok)_e=Ot.toHex();else if(!/^\d*\.?\d*$/.test(_e))throw new Error('Invalid color "'+_e+'" passed to jsPDF.encodeColorString.')}if(typeof _e=="string"&&/^#[0-9A-Fa-f]{3}$/.test(_e)&&(_e="#"+_e[1]+_e[1]+_e[2]+_e[2]+_e[3]+_e[3]),typeof _e=="string"&&/^#[0-9A-Fa-f]{6}$/.test(_e)){var Ut=parseInt(_e.substr(1),16);_e=Ut>>16&255,Me=Ut>>8&255,Ge=255&Ut}if(Me===void 0||dt===void 0&&_e===Me&&Me===Ge)if(typeof _e=="string")ae=_e+" "+At[0];else switch(I.precision){case 2:ae=Z(_e/255)+" "+At[0];break;case 3:default:ae=O(_e/255)+" "+At[0]}else if(dt===void 0||Xr(dt)==="object"){if(dt&&!isNaN(dt.a)&&dt.a===0)return ae=["1.","1.","1.",At[1]].join(" ");if(typeof _e=="string")ae=[_e,Me,Ge,At[1]].join(" ");else switch(I.precision){case 2:ae=[Z(_e/255),Z(Me/255),Z(Ge/255),At[1]].join(" ");break;default:case 3:ae=[O(_e/255),O(Me/255),O(Ge/255),At[1]].join(" ")}}else if(typeof _e=="string")ae=[_e,Me,Ge,dt,At[2]].join(" ");else switch(I.precision){case 2:ae=[Z(_e),Z(Me),Z(Ge),Z(dt),At[2]].join(" ");break;case 3:default:ae=[O(_e),O(Me),O(Ge),O(dt),At[2]].join(" ")}return ae},Zn=g.__private__.getFilters=function(){return s},ki=g.__private__.putStream=function(I){var ae=(I=I||{}).data||"",_e=I.filters||Zn(),Me=I.alreadyAppliedFilters||[],Ge=I.addLength1||!1,dt=ae.length,At=I.objectId,Ot=function(Ni){return Ni};if(f!==null&&At===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(Ot=li.encryptor(At,0));var Ut={};_e===!0&&(_e=["FlateEncode"]);var vn=I.additionalKeyValues||[],pn=(Ut=on.API.processDataByFilters!==void 0?on.API.processDataByFilters(ae,_e):{data:ae,reverseChain:[]}).reverseChain+(Array.isArray(Me)?Me.join(" "):Me.toString());if(Ut.data.length!==0&&(vn.push({key:"Length",value:Ut.data.length}),Ge===!0&&vn.push({key:"Length1",value:dt})),pn.length!=0)if(pn.split("/").length-1==1)vn.push({key:"Filter",value:pn});else{vn.push({key:"Filter",value:"["+pn+"]"});for(var qn=0;qn<vn.length;qn+=1)if(vn[qn].key==="DecodeParms"){for(var ei=[],ui=0;ui<Ut.reverseChain.split("/").length-1;ui+=1)ei.push("null");ei.push(vn[qn].value),vn[qn].value="["+ei.join(" ")+"]"}}ne("<<");for(var _i=0;_i<vn.length;_i++)ne("/"+vn[_i].key+" "+vn[_i].value);ne(">>"),Ut.data.length!==0&&(ne("stream"),ne(Ot(Ut.data)),ne("endstream"))},Jn=g.__private__.putPage=function(I){var ae=I.number,_e=I.data,Me=I.objId,Ge=I.contentsObjId;Un(Me,!0),ne("<</Type /Page"),ne("/Parent "+I.rootDictionaryObjId+" 0 R"),ne("/Resources "+I.resourceDictionaryObjId+" 0 R"),ne("/MediaBox ["+parseFloat(_(I.mediaBox.bottomLeftX))+" "+parseFloat(_(I.mediaBox.bottomLeftY))+" "+_(I.mediaBox.topRightX)+" "+_(I.mediaBox.topRightY)+"]"),I.cropBox!==null&&ne("/CropBox ["+_(I.cropBox.bottomLeftX)+" "+_(I.cropBox.bottomLeftY)+" "+_(I.cropBox.topRightX)+" "+_(I.cropBox.topRightY)+"]"),I.bleedBox!==null&&ne("/BleedBox ["+_(I.bleedBox.bottomLeftX)+" "+_(I.bleedBox.bottomLeftY)+" "+_(I.bleedBox.topRightX)+" "+_(I.bleedBox.topRightY)+"]"),I.trimBox!==null&&ne("/TrimBox ["+_(I.trimBox.bottomLeftX)+" "+_(I.trimBox.bottomLeftY)+" "+_(I.trimBox.topRightX)+" "+_(I.trimBox.topRightY)+"]"),I.artBox!==null&&ne("/ArtBox ["+_(I.artBox.bottomLeftX)+" "+_(I.artBox.bottomLeftY)+" "+_(I.artBox.topRightX)+" "+_(I.artBox.topRightY)+"]"),typeof I.userUnit=="number"&&I.userUnit!==1&&ne("/UserUnit "+I.userUnit),An.publish("putPage",{objId:Me,pageContext:Yt[ae],pageNumber:ae,page:_e}),ne("/Contents "+Ge+" 0 R"),ne(">>"),ne("endobj");var dt=_e.join(`
`);return j===C.ADVANCED&&(dt+=`
Q`),Un(Ge,!0),ki({data:dt,filters:Zn(),objectId:Ge}),ne("endobj"),Me},no=g.__private__.putPages=function(){var I,ae,_e=[];for(I=1;I<=Rn;I++)Yt[I].objId=fr(),Yt[I].contentsObjId=fr();for(I=1;I<=Rn;I++)_e.push(Jn({number:I,data:Le[I],objId:Yt[I].objId,contentsObjId:Yt[I].contentsObjId,mediaBox:Yt[I].mediaBox,cropBox:Yt[I].cropBox,bleedBox:Yt[I].bleedBox,trimBox:Yt[I].trimBox,artBox:Yt[I].artBox,userUnit:Yt[I].userUnit,rootDictionaryObjId:_r,resourceDictionaryObjId:Ia}));Un(_r,!0),ne("<</Type /Pages");var Me="/Kids [";for(ae=0;ae<Rn;ae++)Me+=_e[ae]+" 0 R ";ne(Me+"]"),ne("/Count "+Rn),ne(">>"),ne("endobj"),An.publish("postPutPages")},Co=function(I){An.publish("putFont",{font:I,out:ne,newObject:dr,putStream:ki}),I.isAlreadyPutted!==!0&&(I.objectNumber=dr(),ne("<<"),ne("/Type /Font"),ne("/BaseFont /"+j0(I.postScriptName)),ne("/Subtype /Type1"),typeof I.encoding=="string"&&ne("/Encoding /"+I.encoding),ne("/FirstChar 32"),ne("/LastChar 255"),ne(">>"),ne("endobj"))},Fa=function(){for(var I in Rt)Rt.hasOwnProperty(I)&&(m===!1||m===!0&&b.hasOwnProperty(I))&&Co(Rt[I])},Mr=function(I){I.objectNumber=dr();var ae=[];ae.push({key:"Type",value:"/XObject"}),ae.push({key:"Subtype",value:"/Form"}),ae.push({key:"BBox",value:"["+[_(I.x),_(I.y),_(I.x+I.width),_(I.y+I.height)].join(" ")+"]"}),ae.push({key:"Matrix",value:"["+I.matrix.toString()+"]"});var _e=I.pages[1].join(`
`);ki({data:_e,additionalKeyValues:ae,objectId:I.objectNumber}),ne("endobj")},tl=function(){for(var I in wr)wr.hasOwnProperty(I)&&Mr(wr[I])},zl=function(I,ae){var _e,Me=[],Ge=1/(ae-1);for(_e=0;_e<1;_e+=Ge)Me.push(_e);if(Me.push(1),I[0].offset!=0){var dt={offset:0,color:I[0].color};I.unshift(dt)}if(I[I.length-1].offset!=1){var At={offset:1,color:I[I.length-1].color};I.push(At)}for(var Ot="",Ut=0,vn=0;vn<Me.length;vn++){for(_e=Me[vn];_e>I[Ut+1].offset;)Ut++;var pn=I[Ut].offset,qn=(_e-pn)/(I[Ut+1].offset-pn),ei=I[Ut].color,ui=I[Ut+1].color;Ot+=re(Math.round((1-qn)*ei[0]+qn*ui[0]).toString(16))+re(Math.round((1-qn)*ei[1]+qn*ui[1]).toString(16))+re(Math.round((1-qn)*ei[2]+qn*ui[2]).toString(16))}return Ot.trim()},ju=function(I,ae){ae||(ae=21);var _e=dr(),Me=zl(I.colors,ae),Ge=[];Ge.push({key:"FunctionType",value:"0"}),Ge.push({key:"Domain",value:"[0.0 1.0]"}),Ge.push({key:"Size",value:"["+ae+"]"}),Ge.push({key:"BitsPerSample",value:"8"}),Ge.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ge.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ki({data:Me,additionalKeyValues:Ge,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:_e}),ne("endobj"),I.objectNumber=dr(),ne("<< /ShadingType "+I.type),ne("/ColorSpace /DeviceRGB");var dt="/Coords ["+_(parseFloat(I.coords[0]))+" "+_(parseFloat(I.coords[1]))+" ";I.type===2?dt+=_(parseFloat(I.coords[2]))+" "+_(parseFloat(I.coords[3])):dt+=_(parseFloat(I.coords[2]))+" "+_(parseFloat(I.coords[3]))+" "+_(parseFloat(I.coords[4]))+" "+_(parseFloat(I.coords[5])),ne(dt+="]"),I.matrix&&ne("/Matrix ["+I.matrix.toString()+"]"),ne("/Function "+_e+" 0 R"),ne("/Extend [true true]"),ne(">>"),ne("endobj")},Bc=function(I,ae){var _e=fr(),Me=dr();ae.push({resourcesOid:_e,objectOid:Me}),I.objectNumber=Me;var Ge=[];Ge.push({key:"Type",value:"/Pattern"}),Ge.push({key:"PatternType",value:"1"}),Ge.push({key:"PaintType",value:"1"}),Ge.push({key:"TilingType",value:"1"}),Ge.push({key:"BBox",value:"["+I.boundingBox.map(_).join(" ")+"]"}),Ge.push({key:"XStep",value:_(I.xStep)}),Ge.push({key:"YStep",value:_(I.yStep)}),Ge.push({key:"Resources",value:_e+" 0 R"}),I.matrix&&Ge.push({key:"Matrix",value:"["+I.matrix.toString()+"]"}),ki({data:I.stream,additionalKeyValues:Ge,objectId:I.objectNumber}),ne("endobj")},Us=function(I){var ae;for(ae in cn)cn.hasOwnProperty(ae)&&(cn[ae]instanceof Bh?ju(cn[ae]):cn[ae]instanceof T0&&Bc(cn[ae],I))},xs=function(I){for(var ae in I.objectNumber=dr(),ne("<<"),I)switch(ae){case"opacity":ne("/ca "+Z(I[ae]));break;case"stroke-opacity":ne("/CA "+Z(I[ae]))}ne(">>"),ne("endobj")},Pa=function(){var I;for(I in zn)zn.hasOwnProperty(I)&&xs(zn[I])},vs=function(){for(var I in ne("/XObject <<"),wr)wr.hasOwnProperty(I)&&wr[I].objectNumber>=0&&ne("/"+I+" "+wr[I].objectNumber+" 0 R");An.publish("putXobjectDict"),ne(">>")},is=function(){li.oid=dr(),ne("<<"),ne("/Filter /Standard"),ne("/V "+li.v),ne("/R "+li.r),ne("/U <"+li.toHexString(li.U)+">"),ne("/O <"+li.toHexString(li.O)+">"),ne("/P "+li.P),ne(">>"),ne("endobj")},as=function(){for(var I in ne("/Font <<"),Rt)Rt.hasOwnProperty(I)&&(m===!1||m===!0&&b.hasOwnProperty(I))&&ne("/"+I+" "+Rt[I].objectNumber+" 0 R");ne(">>")},ql=function(){if(Object.keys(cn).length>0){for(var I in ne("/Shading <<"),cn)cn.hasOwnProperty(I)&&cn[I]instanceof Bh&&cn[I].objectNumber>=0&&ne("/"+I+" "+cn[I].objectNumber+" 0 R");An.publish("putShadingPatternDict"),ne(">>")}},ro=function(I){if(Object.keys(cn).length>0){for(var ae in ne("/Pattern <<"),cn)cn.hasOwnProperty(ae)&&cn[ae]instanceof g.TilingPattern&&cn[ae].objectNumber>=0&&cn[ae].objectNumber<I&&ne("/"+ae+" "+cn[ae].objectNumber+" 0 R");An.publish("putTilingPatternDict"),ne(">>")}},$c=function(){if(Object.keys(zn).length>0){var I;for(I in ne("/ExtGState <<"),zn)zn.hasOwnProperty(I)&&zn[I].objectNumber>=0&&ne("/"+I+" "+zn[I].objectNumber+" 0 R");An.publish("putGStateDict"),ne(">>")}},Fr=function(I){Un(I.resourcesOid,!0),ne("<<"),ne("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),as(),ql(),ro(I.objectOid),$c(),vs(),ne(">>"),ne("endobj")},ta=function(){var I=[];Fa(),Pa(),tl(),Us(I),An.publish("putResources"),I.forEach(Fr),Fr({resourcesOid:Ia,objectOid:Number.MAX_SAFE_INTEGER}),An.publish("postPutResources")},io=function(){An.publish("putAdditionalObjects");for(var I=0;I<Te.length;I++){var ae=Te[I];Un(ae.objId,!0),ne(ae.content),ne("endobj")}An.publish("postPutAdditionalObjects")},nl=function(I){Xt[I.fontName]=Xt[I.fontName]||{},Xt[I.fontName][I.fontStyle]=I.id},za=function(I,ae,_e,Me,Ge){var dt={id:"F"+(Object.keys(Rt).length+1).toString(10),postScriptName:I,fontName:ae,fontStyle:_e,encoding:Me,isStandardFont:Ge||!1,metadata:{}};return An.publish("addFont",{font:dt,instance:this}),Rt[dt.id]=dt,nl(dt),dt.id},Bl=function(I){for(var ae=0,_e=ke.length;ae<_e;ae++){var Me=za.call(this,I[ae][0],I[ae][1],I[ae][2],ke[ae][3],!0);m===!1&&(b[Me]=!0);var Ge=I[ae][0].split("-");nl({id:Me,fontName:Ge[0],fontStyle:Ge[1]||""})}An.publish("addFonts",{fonts:Rt,dictionary:Xt})},na=function(I){return I.foo=function(){try{return I.apply(this,arguments)}catch(Me){var ae=Me.stack||"";~ae.indexOf(" at ")&&(ae=ae.split(" at ")[1]);var _e="Error in function "+ae.split(`
`)[0].split("<")[0]+": "+Me.message;if(!fn.console)throw new Error(_e);fn.console.error(_e,Me),fn.alert&&alert(_e)}},I.foo.bar=I,I.foo},rl=function(I,ae){var _e,Me,Ge,dt,At,Ot,Ut,vn,pn;if(Ge=(ae=ae||{}).sourceEncoding||"Unicode",At=ae.outputEncoding,(ae.autoencode||At)&&Rt[ft].metadata&&Rt[ft].metadata[Ge]&&Rt[ft].metadata[Ge].encoding&&(dt=Rt[ft].metadata[Ge].encoding,!At&&Rt[ft].encoding&&(At=Rt[ft].encoding),!At&&dt.codePages&&(At=dt.codePages[0]),typeof At=="string"&&(At=dt[At]),At)){for(Ut=!1,Ot=[],_e=0,Me=I.length;_e<Me;_e++)(vn=At[I.charCodeAt(_e)])?Ot.push(String.fromCharCode(vn)):Ot.push(I[_e]),Ot[_e].charCodeAt(0)>>8&&(Ut=!0);I=Ot.join("")}for(_e=I.length;Ut===void 0&&_e!==0;)I.charCodeAt(_e-1)>>8&&(Ut=!0),_e--;if(!Ut)return I;for(Ot=ae.noBOM?[]:[254,255],_e=0,Me=I.length;_e<Me;_e++){if((pn=(vn=I.charCodeAt(_e))>>8)>>8)throw new Error("Character at position "+_e+" of string '"+I+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ot.push(pn),Ot.push(vn-(pn<<8))}return String.fromCharCode.apply(void 0,Ot)},hr=g.__private__.pdfEscape=g.pdfEscape=function(I,ae){return rl(I,ae).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ko=g.__private__.beginPage=function(I){Le[++Rn]=[],Yt[Rn]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(I[0]),topRightY:Number(I[1])}},Hs(Rn),Ae(Le[B])},$l=function(I,ae){var _e,Me,Ge;switch(t=ae||t,typeof I=="string"&&(_e=w(I.toLowerCase()),Array.isArray(_e)&&(Me=_e[0],Ge=_e[1])),Array.isArray(I)&&(Me=I[0]*et,Ge=I[1]*et),isNaN(Me)&&(Me=i[0],Ge=i[1]),(Me>14400||Ge>14400)&&(Kr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Me=Math.min(14400,Me),Ge=Math.min(14400,Ge)),i=[Me,Ge],t.substr(0,1)){case"l":Ge>Me&&(i=[Ge,Me]);break;case"p":Me>Ge&&(i=[Ge,Me])}ko(i),$t(lt),ne(Ar),ll!==0&&ne(ll+" J"),jo!==0&&ne(jo+" j"),An.publish("addPage",{pageNumber:Rn})},Eo=function(I){I>0&&I<=Rn&&(Le.splice(I,1),Yt.splice(I,1),Rn--,B>Rn&&(B=Rn),this.setPage(B))},Hs=function(I){I>0&&I<=Rn&&(B=I)},Tu=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return Le.length-1},Ws=function(I,ae,_e){var Me,Ge=void 0;return _e=_e||{},I=I!==void 0?I:Rt[ft].fontName,ae=ae!==void 0?ae:Rt[ft].fontStyle,Me=I.toLowerCase(),Xt[Me]!==void 0&&Xt[Me][ae]!==void 0?Ge=Xt[Me][ae]:Xt[I]!==void 0&&Xt[I][ae]!==void 0?Ge=Xt[I][ae]:_e.disableWarning===!1&&Kr.warn("Unable to look up font label for font '"+I+"', '"+ae+"'. Refer to getFontList() for available fonts."),Ge||_e.noFallback||(Ge=Xt.times[ae])==null&&(Ge=Xt.times.normal),Ge},$i=g.__private__.putInfo=function(){var I=dr(),ae=function(Me){return Me};for(var _e in f!==null&&(ae=li.encryptor(I,0)),ne("<<"),ne("/Producer ("+hr(ae("jsPDF "+on.version))+")"),De)De.hasOwnProperty(_e)&&De[_e]&&ne("/"+_e.substr(0,1).toUpperCase()+_e.substr(1)+" ("+hr(ae(De[_e]))+")");ne("/CreationDate ("+hr(ae(G))+")"),ne(">>"),ne("endobj")},ss=g.__private__.putCatalog=function(I){var ae=(I=I||{}).rootDictionaryObjId||_r;switch(dr(),ne("<<"),ne("/Type /Catalog"),ne("/Pages "+ae+" 0 R"),qe||(qe="fullwidth"),qe){case"fullwidth":ne("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ne("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ne("/OpenAction [3 0 R /Fit]");break;case"original":ne("/OpenAction [3 0 R /XYZ null null 1]");break;default:var _e=""+qe;_e.substr(_e.length-1)==="%"&&(qe=parseInt(qe)/100),typeof qe=="number"&&ne("/OpenAction [3 0 R /XYZ null null "+Z(qe)+"]")}switch(Pe||(Pe="continuous"),Pe){case"continuous":ne("/PageLayout /OneColumn");break;case"single":ne("/PageLayout /SinglePage");break;case"two":case"twoleft":ne("/PageLayout /TwoColumnLeft");break;case"tworight":ne("/PageLayout /TwoColumnRight")}ut&&ne("/PageMode /"+ut),An.publish("putCatalog"),ne(">>"),ne("endobj")},ws=g.__private__.putTrailer=function(){ne("trailer"),ne("<<"),ne("/Size "+(oe+1)),ne("/Root "+oe+" 0 R"),ne("/Info "+(oe-1)+" 0 R"),f!==null&&ne("/Encrypt "+li.oid+" 0 R"),ne("/ID [ <"+W+"> <"+W+"> ]"),ne(">>")},Ou=g.__private__.putHeader=function(){ne("%PDF-"+x),ne("%")},qa=g.__private__.putXRef=function(){var I="0000000000";ne("xref"),ne("0 "+(oe+1)),ne("0000000000 65535 f ");for(var ae=1;ae<=oe;ae++)typeof Ce[ae]=="function"?ne((I+Ce[ae]()).slice(-10)+" 00000 n "):Ce[ae]!==void 0?ne((I+Ce[ae]).slice(-10)+" 00000 n "):ne("0000000000 00000 n ")},Vs=g.__private__.buildDocument=function(){V(),Ae(ye),An.publish("buildDocument"),Ou(),no(),io(),ta(),f!==null&&is(),$i(),ss();var I=Se;return qa(),ws(),ne("startxref"),ne(""+I),ne("%%EOF"),Ae(Le[B]),ye.join(`
`)},il=g.__private__.getBlob=function(I){return new Blob([fe(I)],{type:"application/pdf"})},Ys=g.output=g.__private__.output=na(function(I,ae){switch(typeof(ae=ae||{})=="string"?ae={filename:ae}:ae.filename=ae.filename||"generated.pdf",I){case void 0:return Vs();case"save":g.save(ae.filename);break;case"arraybuffer":return fe(Vs());case"blob":return il(Vs());case"bloburi":case"bloburl":if(fn.URL!==void 0&&typeof fn.URL.createObjectURL=="function")return fn.URL&&fn.URL.createObjectURL(il(Vs()))||void 0;Kr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var _e="",Me=Vs();try{_e=PS(Me)}catch{_e=PS(unescape(encodeURIComponent(Me)))}return"data:application/pdf;filename="+ae.filename+";base64,"+_e;case"pdfobjectnewwindow":if(Object.prototype.toString.call(fn)==="[object Window]"){var Ge="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",dt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ae.pdfObjectUrl&&(Ge=ae.pdfObjectUrl,dt="");var At='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ge+'"'+dt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ae)+");<\/script></body></html>",Ot=fn.open();return Ot!==null&&Ot.document.write(At),Ot}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(fn)==="[object Window]"){var Ut='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ae.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ae.filename+'" width="500px" height="400px" /></body></html>',vn=fn.open();if(vn!==null){vn.document.write(Ut);var pn=this;vn.document.documentElement.querySelector("#pdfViewer").onload=function(){vn.document.title=ae.filename,vn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(pn.output("bloburl"))}}return vn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(fn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var qn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ae)+'"></iframe></body></html>',ei=fn.open();if(ei!==null&&(ei.document.write(qn),ei.document.title=ae.filename),ei||typeof safari>"u")return ei;break;case"datauri":case"dataurl":return fn.document.location.href=this.output("datauristring",ae);default:return null}}),al=function(I){return Array.isArray(wa)===!0&&wa.indexOf(I)>-1};switch(r){case"pt":et=1;break;case"mm":et=72/25.4;break;case"cm":et=72/2.54;break;case"in":et=72;break;case"px":et=al("px_scaling")==1?.75:96/72;break;case"pc":case"em":et=12;break;case"ex":et=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);et=r}var li=null;le(),J();var Jr=function(I){return f!==null?li.encryptor(I,0):function(ae){return ae}},Ss=g.__private__.getPageInfo=g.getPageInfo=function(I){if(isNaN(I)||I%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Yt[I].objId,pageNumber:I,pageContext:Yt[I]}},tn=g.__private__.getPageInfoByObjId=function(I){if(isNaN(I)||I%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ae in Yt)if(Yt[ae].objId===I)break;return Ss(ae)},ao=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:Yt[B].objId,pageNumber:B,pageContext:Yt[B]}};g.addPage=function(){return $l.apply(this,arguments),this},g.setPage=function(){return Hs.apply(this,arguments),Ae.call(this,Le[B]),this},g.insertPage=function(I){return this.addPage(),this.movePage(B,I),this},g.movePage=function(I,ae){var _e,Me;if(I>ae){_e=Le[I],Me=Yt[I];for(var Ge=I;Ge>ae;Ge--)Le[Ge]=Le[Ge-1],Yt[Ge]=Yt[Ge-1];Le[ae]=_e,Yt[ae]=Me,this.setPage(ae)}else if(I<ae){_e=Le[I],Me=Yt[I];for(var dt=I;dt<ae;dt++)Le[dt]=Le[dt+1],Yt[dt]=Yt[dt+1];Le[ae]=_e,Yt[ae]=Me,this.setPage(ae)}return this},g.deletePage=function(){return Eo.apply(this,arguments),this},g.__private__.text=g.text=function(I,ae,_e,Me,Ge){var dt,At,Ot,Ut,vn,pn,qn,ei,ui,_i=(Me=Me||{}).scope||this;if(typeof I=="number"&&typeof ae=="number"&&(typeof _e=="string"||Array.isArray(_e))){var Ni=_e;_e=ae,ae=I,I=Ni}if(arguments[3]instanceof Lt?(L("The transform parameter of text() with a Matrix value"),ui=Ge):(Ot=arguments[4],Ut=arguments[5],Xr(qn=arguments[3])==="object"&&qn!==null||(typeof Ot=="string"&&(Ut=Ot,Ot=null),typeof qn=="string"&&(Ut=qn,qn=null),typeof qn=="number"&&(Ot=qn,qn=null),Me={flags:qn,angle:Ot,align:Ut})),isNaN(ae)||isNaN(_e)||I==null)throw new Error("Invalid arguments passed to jsPDF.text");if(I.length===0)return _i;var Ca="",To=!1,Qs=typeof Me.lineHeightFactor=="number"?Me.lineHeightFactor:Ie,Oo=_i.internal.scaleFactor;function hh(In){return In=In.split("	").join(Array(Me.TabLen||9).join(" ")),hr(In,qn)}function Ul(In){for(var Ln,Pr=In.concat(),ji=[],lo=Pr.length;lo--;)typeof(Ln=Pr.shift())=="string"?ji.push(Ln):Array.isArray(In)&&(Ln.length===1||Ln[1]===void 0&&Ln[2]===void 0)?ji.push(Ln[0]):ji.push([Ln[0],Ln[1],Ln[2]]);return ji}function Hl(In,Ln){var Pr;if(typeof In=="string")Pr=Ln(In)[0];else if(Array.isArray(In)){for(var ji,lo,$u=In.concat(),Uu=[],Yl=$u.length;Yl--;)typeof(ji=$u.shift())=="string"?Uu.push(Ln(ji)[0]):Array.isArray(ji)&&typeof ji[0]=="string"&&(lo=Ln(ji[0],ji[1],ji[2]),Uu.push([lo[0],lo[1],lo[2]]));Pr=Uu}return Pr}var Kd=!1,Iu=!0;if(typeof I=="string")Kd=!0;else if(Array.isArray(I)){var Xd=I.concat();At=[];for(var Hc,ra=Xd.length;ra--;)(typeof(Hc=Xd.shift())!="string"||Array.isArray(Hc)&&typeof Hc[0]!="string")&&(Iu=!1);Kd=Iu}if(Kd===!1)throw new Error('Type of text must be string or Array. "'+I+'" is not recognized.');typeof I=="string"&&(I=I.match(/[\r?\n]/)?I.split(/\r\n|\r|\n/g):[I]);var Lu=Re/_i.internal.scaleFactor,Wc=Lu*(Qs-1);switch(Me.baseline){case"bottom":_e-=Wc;break;case"top":_e+=Lu-Wc;break;case"hanging":_e+=Lu-2*Wc;break;case"middle":_e+=Lu/2-Wc}if((pn=Me.maxWidth||0)>0&&(typeof I=="string"?I=_i.splitTextToSize(I,pn):Object.prototype.toString.call(I)==="[object Array]"&&(I=I.reduce(function(In,Ln){return In.concat(_i.splitTextToSize(Ln,pn))},[]))),dt={text:I,x:ae,y:_e,options:Me,mutex:{pdfEscape:hr,activeFontKey:ft,fonts:Rt,activeFontSize:Re}},An.publish("preProcessText",dt),I=dt.text,Ot=(Me=dt.options).angle,!(ui instanceof Lt)&&Ot&&typeof Ot=="number"){Ot*=Math.PI/180,Me.rotationDirection===0&&(Ot=-Ot),j===C.ADVANCED&&(Ot=-Ot);var Vc=Math.cos(Ot),Zd=Math.sin(Ot);ui=new Lt(Vc,Zd,-Zd,Vc,0,0)}else Ot&&Ot instanceof Lt&&(ui=Ot);j!==C.ADVANCED||ui||(ui=ar),(vn=Me.charSpace||Cs)!==void 0&&(Ca+=_(T(vn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ei=Me.horizontalScale)!==void 0&&(Ca+=_(100*ei)+` Tz
`),Me.lang;var ks=-1,Am=Me.renderingMode!==void 0?Me.renderingMode:Me.stroke,ph=_i.internal.getCurrentPageInfo().pageContext;switch(Am){case 0:case!1:case"fill":ks=0;break;case 1:case!0:case"stroke":ks=1;break;case 2:case"fillThenStroke":ks=2;break;case 3:case"invisible":ks=3;break;case 4:case"fillAndAddForClipping":ks=4;break;case 5:case"strokeAndAddPathForClipping":ks=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ks=6;break;case 7:case"addToPathForClipping":ks=7}var Tp=ph.usedRenderingMode!==void 0?ph.usedRenderingMode:-1;ks!==-1?Ca+=ks+` Tr
`:Tp!==-1&&(Ca+=`0 Tr
`),ks!==-1&&(ph.usedRenderingMode=ks),Ut=Me.align||"left";var oo,ka=Re*Qs,Ru=_i.internal.pageSize.getWidth(),mh=Rt[ft];vn=Me.charSpace||Cs,pn=Me.maxWidth||0,qn=Object.assign({autoencode:!0,noBOM:!0},Me.flags);var Wl=[],Mu=function(In){return _i.getStringUnitWidth(In,{font:mh,charSpace:vn,fontSize:Re,doKerning:!1})*Re/Oo};if(Object.prototype.toString.call(I)==="[object Array]"){var os;At=Ul(I),Ut!=="left"&&(oo=At.map(Mu));var Ra,Fu=0;if(Ut==="right"){ae-=oo[0],I=[],ra=At.length;for(var Es=0;Es<ra;Es++)Es===0?(Ra=bn(ae),os=Nr(_e)):(Ra=T(Fu-oo[Es]),os=-ka),I.push([At[Es],Ra,os]),Fu=oo[Es]}else if(Ut==="center"){ae-=oo[0]/2,I=[],ra=At.length;for(var Do=0;Do<ra;Do++)Do===0?(Ra=bn(ae),os=Nr(_e)):(Ra=T((Fu-oo[Do])/2),os=-ka),I.push([At[Do],Ra,os]),Fu=oo[Do]}else if(Ut==="left"){I=[],ra=At.length;for(var ul=0;ul<ra;ul++)I.push(At[ul])}else if(Ut==="justify"&&mh.encoding==="Identity-H"){I=[],ra=At.length,pn=pn!==0?pn:Ru;for(var Io=0,mi=0;mi<ra;mi++)if(os=mi===0?Nr(_e):-ka,Ra=mi===0?bn(ae):Io,mi<ra-1){var Lo=T((pn-oo[mi])/(At[mi].split(" ").length-1)),Ui=At[mi].split(" ");I.push([Ui[0]+" ",Ra,os]),Io=0;for(var _s=1;_s<Ui.length;_s++){var Yc=(Mu(Ui[_s-1]+" "+Ui[_s])-Mu(Ui[_s]))*Oo+Lo;_s==Ui.length-1?I.push([Ui[_s],Yc,0]):I.push([Ui[_s]+" ",Yc,0]),Io-=Yc}}else I.push([At[mi],Ra,os]);I.push(["",Io,0])}else{if(Ut!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(I=[],ra=At.length,pn=pn!==0?pn:Ru,mi=0;mi<ra;mi++)os=mi===0?Nr(_e):-ka,Ra=mi===0?bn(ae):0,mi<ra-1?Wl.push(_(T((pn-oo[mi])/(At[mi].split(" ").length-1)))):Wl.push(0),I.push([At[mi],Ra,os])}}var cl=typeof Me.R2L=="boolean"?Me.R2L:Ze;cl===!0&&(I=Hl(I,function(In,Ln,Pr){return[In.split("").reverse().join(""),Ln,Pr]})),dt={text:I,x:ae,y:_e,options:Me,mutex:{pdfEscape:hr,activeFontKey:ft,fonts:Rt,activeFontSize:Re}},An.publish("postProcessText",dt),I=dt.text,To=dt.mutex.isHex||!1;var Jd=Rt[ft].encoding;Jd!=="WinAnsiEncoding"&&Jd!=="StandardEncoding"||(I=Hl(I,function(In,Ln,Pr){return[hh(In),Ln,Pr]})),At=Ul(I),I=[];for(var Pu,zu,qu,Gc=0,ef=1,Bu=Array.isArray(At[0])?ef:Gc,Vl="",Qc=function(In,Ln,Pr){var ji="";return Pr instanceof Lt?(Pr=typeof Me.angle=="number"?Hn(Pr,new Lt(1,0,0,1,In,Ln)):Hn(new Lt(1,0,0,1,In,Ln),Pr),j===C.ADVANCED&&(Pr=Hn(new Lt(1,0,0,-1,0,0),Pr)),ji=Pr.join(" ")+` Tm
`):ji=_(In)+" "+_(Ln)+` Td
`,ji},gi=0;gi<At.length;gi++){switch(Vl="",Bu){case ef:qu=(To?"<":"(")+At[gi][0]+(To?">":")"),Pu=parseFloat(At[gi][1]),zu=parseFloat(At[gi][2]);break;case Gc:qu=(To?"<":"(")+At[gi]+(To?">":")"),Pu=bn(ae),zu=Nr(_e)}Wl!==void 0&&Wl[gi]!==void 0&&(Vl=Wl[gi]+` Tw
`),gi===0?I.push(Vl+Qc(Pu,zu,ui)+qu):Bu===Gc?I.push(Vl+qu):Bu===ef&&I.push(Vl+Qc(Pu,zu,ui)+qu)}I=Bu===Gc?I.join(` Tj
T* `):I.join(` Tj
`),I+=` Tj
`;var Ks=`BT
/`;return Ks+=ft+" "+Re+` Tf
`,Ks+=_(Re*Qs)+` TL
`,Ks+=Ha+`
`,Ks+=Ca,Ks+=I,ne(Ks+="ET"),b[ft]=!0,_i};var sl=g.__private__.clip=g.clip=function(I){return ne(I==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return sl("evenodd")},g.__private__.discardPath=g.discardPath=function(){return ne("n"),this};var Ei=g.__private__.isValidStyle=function(I){var ae=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(I)!==-1&&(ae=!0),ae};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(I){return Ei(I)&&(d=I),this};var Ba=g.__private__.getStyle=g.getStyle=function(I){var ae=d;switch(I){case"D":case"S":ae="S";break;case"F":ae="f";break;case"FD":case"DF":ae="B";break;case"f":case"f*":case"B":case"B*":ae=I}return ae},_o=g.close=function(){return ne("h"),this};g.stroke=function(){return ne("S"),this},g.fill=function(I){return $a("f",I),this},g.fillEvenOdd=function(I){return $a("f*",I),this},g.fillStroke=function(I){return $a("B",I),this},g.fillStrokeEvenOdd=function(I){return $a("B*",I),this};var $a=function(I,ae){Xr(ae)==="object"?No(ae,I):ne(I)},La=function(I){I===null||j===C.ADVANCED&&I===void 0||(I=Ba(I),ne(I))};function Ua(I,ae,_e,Me,Ge){var dt=new T0(ae||this.boundingBox,_e||this.xStep,Me||this.yStep,this.gState,Ge||this.matrix);dt.stream=this.stream;var At=I+"$$"+this.cloneIndex+++"$$";return Rr(At,dt),dt}var No=function(I,ae){var _e=Pn[I.key],Me=cn[_e];if(Me instanceof Bh)ne("q"),ne(ol(ae)),Me.gState&&g.setGState(Me.gState),ne(I.matrix.toString()+" cm"),ne("/"+_e+" sh"),ne("Q");else if(Me instanceof T0){var Ge=new Lt(1,0,0,-1,0,Du());I.matrix&&(Ge=Ge.multiply(I.matrix||ar),_e=Ua.call(Me,I.key,I.boundingBox,I.xStep,I.yStep,Ge).id),ne("q"),ne("/Pattern cs"),ne("/"+_e+" scn"),Me.gState&&g.setGState(Me.gState),ne(ae),ne("Q")}},ol=function(I){switch(I){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},so=g.moveTo=function(I,ae){return ne(_(T(I))+" "+_(N(ae))+" m"),this},As=g.lineTo=function(I,ae){return ne(_(T(I))+" "+_(N(ae))+" l"),this},H=g.curveTo=function(I,ae,_e,Me,Ge,dt){return ne([_(T(I)),_(N(ae)),_(T(_e)),_(N(Me)),_(T(Ge)),_(N(dt)),"c"].join(" ")),this};g.__private__.line=g.line=function(I,ae,_e,Me,Ge){if(isNaN(I)||isNaN(ae)||isNaN(_e)||isNaN(Me)||!Ei(Ge))throw new Error("Invalid arguments passed to jsPDF.line");return j===C.COMPAT?this.lines([[_e-I,Me-ae]],I,ae,[1,1],Ge||"S"):this.lines([[_e-I,Me-ae]],I,ae,[1,1]).stroke()},g.__private__.lines=g.lines=function(I,ae,_e,Me,Ge,dt){var At,Ot,Ut,vn,pn,qn,ei,ui,_i,Ni,Ca,To;if(typeof I=="number"&&(To=_e,_e=ae,ae=I,I=To),Me=Me||[1,1],dt=dt||!1,isNaN(ae)||isNaN(_e)||!Array.isArray(I)||!Array.isArray(Me)||!Ei(Ge)||typeof dt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(so(ae,_e),At=Me[0],Ot=Me[1],vn=I.length,Ni=ae,Ca=_e,Ut=0;Ut<vn;Ut++)(pn=I[Ut]).length===2?(Ni=pn[0]*At+Ni,Ca=pn[1]*Ot+Ca,As(Ni,Ca)):(qn=pn[0]*At+Ni,ei=pn[1]*Ot+Ca,ui=pn[2]*At+Ni,_i=pn[3]*Ot+Ca,Ni=pn[4]*At+Ni,Ca=pn[5]*Ot+Ca,H(qn,ei,ui,_i,Ni,Ca));return dt&&_o(),La(Ge),this},g.path=function(I){for(var ae=0;ae<I.length;ae++){var _e=I[ae],Me=_e.c;switch(_e.op){case"m":so(Me[0],Me[1]);break;case"l":As(Me[0],Me[1]);break;case"c":H.apply(this,Me);break;case"h":_o()}}return this},g.__private__.rect=g.rect=function(I,ae,_e,Me,Ge){if(isNaN(I)||isNaN(ae)||isNaN(_e)||isNaN(Me)||!Ei(Ge))throw new Error("Invalid arguments passed to jsPDF.rect");return j===C.COMPAT&&(Me=-Me),ne([_(T(I)),_(N(ae)),_(T(_e)),_(T(Me)),"re"].join(" ")),La(Ge),this},g.__private__.triangle=g.triangle=function(I,ae,_e,Me,Ge,dt,At){if(isNaN(I)||isNaN(ae)||isNaN(_e)||isNaN(Me)||isNaN(Ge)||isNaN(dt)||!Ei(At))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[_e-I,Me-ae],[Ge-_e,dt-Me],[I-Ge,ae-dt]],I,ae,[1,1],At,!0),this},g.__private__.roundedRect=g.roundedRect=function(I,ae,_e,Me,Ge,dt,At){if(isNaN(I)||isNaN(ae)||isNaN(_e)||isNaN(Me)||isNaN(Ge)||isNaN(dt)||!Ei(At))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ot=4/3*(Math.SQRT2-1);return Ge=Math.min(Ge,.5*_e),dt=Math.min(dt,.5*Me),this.lines([[_e-2*Ge,0],[Ge*Ot,0,Ge,dt-dt*Ot,Ge,dt],[0,Me-2*dt],[0,dt*Ot,-Ge*Ot,dt,-Ge,dt],[2*Ge-_e,0],[-Ge*Ot,0,-Ge,-dt*Ot,-Ge,-dt],[0,2*dt-Me],[0,-dt*Ot,Ge*Ot,-dt,Ge,-dt]],I+Ge,ae,[1,1],At,!0),this},g.__private__.ellipse=g.ellipse=function(I,ae,_e,Me,Ge){if(isNaN(I)||isNaN(ae)||isNaN(_e)||isNaN(Me)||!Ei(Ge))throw new Error("Invalid arguments passed to jsPDF.ellipse");var dt=4/3*(Math.SQRT2-1)*_e,At=4/3*(Math.SQRT2-1)*Me;return so(I+_e,ae),H(I+_e,ae-At,I+dt,ae-Me,I,ae-Me),H(I-dt,ae-Me,I-_e,ae-At,I-_e,ae),H(I-_e,ae+At,I-dt,ae+Me,I,ae+Me),H(I+dt,ae+Me,I+_e,ae+At,I+_e,ae),La(Ge),this},g.__private__.circle=g.circle=function(I,ae,_e,Me){if(isNaN(I)||isNaN(ae)||isNaN(_e)||!Ei(Me))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(I,ae,_e,_e,Me)},g.setFont=function(I,ae,_e){return _e&&(ae=z(ae,_e)),ft=Ws(I,ae,{disableWarning:!1}),this};var ge=g.__private__.getFont=g.getFont=function(){return Rt[Ws.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var I,ae,_e={};for(I in Xt)if(Xt.hasOwnProperty(I))for(ae in _e[I]=[],Xt[I])Xt[I].hasOwnProperty(ae)&&_e[I].push(ae);return _e},g.addFont=function(I,ae,_e,Me,Ge){var dt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&dt.indexOf(arguments[3])!==-1?Ge=arguments[3]:arguments[3]&&dt.indexOf(arguments[3])==-1&&(_e=z(_e,Me)),Ge=Ge||"Identity-H",za.call(this,I,ae,_e,Ge)};var Ie,lt=e.lineWidth||.200025,Zt=g.__private__.getLineWidth=g.getLineWidth=function(){return lt},$t=g.__private__.setLineWidth=g.setLineWidth=function(I){return lt=I,ne(_(T(I))+" w"),this};g.__private__.setLineDash=on.API.setLineDash=on.API.setLineDashPattern=function(I,ae){if(I=I||[],ae=ae||0,isNaN(ae)||!Array.isArray(I))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return I=I.map(function(_e){return _(T(_e))}).join(" "),ae=_(T(ae)),ne("["+I+"] "+ae+" d"),this};var Tn=g.__private__.getLineHeight=g.getLineHeight=function(){return Re*Ie};g.__private__.getLineHeight=g.getLineHeight=function(){return Re*Ie};var Cn=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(I){return typeof(I=I||1.15)=="number"&&(Ie=I),this},pr=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return Ie};Cn(e.lineHeight);var bn=g.__private__.getHorizontalCoordinate=function(I){return T(I)},Nr=g.__private__.getVerticalCoordinate=function(I){return j===C.ADVANCED?I:Yt[B].mediaBox.topRightY-Yt[B].mediaBox.bottomLeftY-T(I)},Aa=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(I){return _(bn(I))},Sr=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(I){return _(Nr(I))},Ar=e.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return qi(Ar)},g.__private__.setStrokeColor=g.setDrawColor=function(I,ae,_e,Me){return Ar=Bi({ch1:I,ch2:ae,ch3:_e,ch4:Me,pdfColorType:"draw",precision:2}),ne(Ar),this};var Gr=e.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return qi(Gr)},g.__private__.setFillColor=g.setFillColor=function(I,ae,_e,Me){return Gr=Bi({ch1:I,ch2:ae,ch3:_e,ch4:Me,pdfColorType:"fill",precision:2}),ne(Gr),this};var Ha=e.textColor||"0 g",Gs=g.__private__.getTextColor=g.getTextColor=function(){return qi(Ha)};g.__private__.setTextColor=g.setTextColor=function(I,ae,_e,Me){return Ha=Bi({ch1:I,ch2:ae,ch3:_e,ch4:Me,pdfColorType:"text",precision:3}),this};var Cs=e.charSpace,Wd=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(Cs||0)};g.__private__.setCharSpace=g.setCharSpace=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Cs=I,this};var ll=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(I){var ae=g.CapJoinStyles[I];if(ae===void 0)throw new Error("Line cap style of '"+I+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ll=ae,ne(ae+" J"),this};var jo=0;g.__private__.setLineJoin=g.setLineJoin=function(I){var ae=g.CapJoinStyles[I];if(ae===void 0)throw new Error("Line join style of '"+I+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return jo=ae,ne(ae+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(I){if(I=I||0,isNaN(I))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ne(_(T(I))+" M"),this},g.GState=Bx,g.setGState=function(I){(I=typeof I=="string"?zn[Yr[I]]:jp(null,I)).equals(ir)||(ne("/"+I.id+" gs"),ir=I)};var jp=function(I,ae){if(!I||!Yr[I]){var _e=!1;for(var Me in zn)if(zn.hasOwnProperty(Me)&&zn[Me].equals(ae)){_e=!0;break}if(_e)ae=zn[Me];else{var Ge="GS"+(Object.keys(zn).length+1).toString(10);zn[Ge]=ae,ae.id=Ge}return I&&(Yr[I]=ae.id),An.publish("addGState",ae),ae}};g.addGState=function(I,ae){return jp(I,ae),this},g.saveGraphicsState=function(){return ne("q"),nn.push({key:ft,size:Re,color:Ha}),this},g.restoreGraphicsState=function(){ne("Q");var I=nn.pop();return ft=I.key,Re=I.size,Ha=I.color,ir=null,this},g.setCurrentTransformationMatrix=function(I){return ne(I.toString()+" cm"),this},g.comment=function(I){return ne("#"+I),this};var Vd=function(I,ae){var _e=I||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return _e},set:function(dt){isNaN(dt)||(_e=parseFloat(dt))}});var Me=ae||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Me},set:function(dt){isNaN(dt)||(Me=parseFloat(dt))}});var Ge="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ge},set:function(dt){Ge=dt.toString()}}),this},ch=function(I,ae,_e,Me){Vd.call(this,I,ae),this.type="rect";var Ge=_e||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ge},set:function(At){isNaN(At)||(Ge=parseFloat(At))}});var dt=Me||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return dt},set:function(At){isNaN(At)||(dt=parseFloat(At))}}),this},dh=function(){this.page=Rn,this.currentPage=B,this.pages=Le.slice(0),this.pagesContext=Yt.slice(0),this.x=Pt,this.y=Nt,this.matrix=Vt,this.width=Uc(B),this.height=Du(B),this.outputDestination=Ye,this.id="",this.objectNumber=-1};dh.prototype.restore=function(){Rn=this.page,B=this.currentPage,Yt=this.pagesContext,Le=this.pages,Pt=this.x,Nt=this.y,Vt=this.matrix,Qd(B,this.width),fh(B,this.height),Ye=this.outputDestination};var Yd=function(I,ae,_e,Me,Ge){Sa.push(new dh),Rn=B=0,Le=[],Pt=I,Nt=ae,Vt=Ge,ko([_e,Me])},Sm=function(I){if(oi[I])Sa.pop().restore();else{var ae=new dh,_e="Xo"+(Object.keys(wr).length+1).toString(10);ae.id=_e,oi[I]=_e,wr[_e]=ae,An.publish("addFormObject",ae),Sa.pop().restore()}};for(var Gd in g.beginFormObject=function(I,ae,_e,Me,Ge){return Yd(I,ae,_e,Me,Ge),this},g.endFormObject=function(I){return Sm(I),this},g.doFormObject=function(I,ae){var _e=wr[oi[I]];return ne("q"),ne(ae.toString()+" cm"),ne("/"+_e.id+" Do"),ne("Q"),this},g.getFormObject=function(I){var ae=wr[oi[I]];return{x:ae.x,y:ae.y,width:ae.width,height:ae.height,matrix:ae.matrix}},g.save=function(I,ae){return I=I||"generated.pdf",(ae=ae||{}).returnPromise=ae.returnPromise||!1,ae.returnPromise===!1?(qh(il(Vs()),I),typeof qh.unload=="function"&&fn.setTimeout&&setTimeout(qh.unload,911),this):new Promise(function(_e,Me){try{var Ge=qh(il(Vs()),I);typeof qh.unload=="function"&&fn.setTimeout&&setTimeout(qh.unload,911),_e(Ge)}catch(dt){Me(dt.message)}})},on.API)on.API.hasOwnProperty(Gd)&&(Gd==="events"&&on.API.events.length?function(I,ae){var _e,Me,Ge;for(Ge=ae.length-1;Ge!==-1;Ge--)_e=ae[Ge][0],Me=ae[Ge][1],I.subscribe.apply(I,[_e].concat(typeof Me=="function"?[Me]:Me))}(An,on.API.events):g[Gd]=on.API[Gd]);var Uc=g.getPageWidth=function(I){return(Yt[I=I||B].mediaBox.topRightX-Yt[I].mediaBox.bottomLeftX)/et},Qd=g.setPageWidth=function(I,ae){Yt[I].mediaBox.topRightX=ae*et+Yt[I].mediaBox.bottomLeftX},Du=g.getPageHeight=function(I){return(Yt[I=I||B].mediaBox.topRightY-Yt[I].mediaBox.bottomLeftY)/et},fh=g.setPageHeight=function(I,ae){Yt[I].mediaBox.topRightY=ae*et+Yt[I].mediaBox.bottomLeftY};return g.internal={pdfEscape:hr,getStyle:Ba,getFont:ge,getFontSize:je,getCharSpace:Wd,getTextColor:Gs,getLineHeight:Tn,getLineHeightFactor:pr,getLineWidth:Zt,write:be,getHorizontalCoordinate:bn,getVerticalCoordinate:Nr,getCoordinateString:Aa,getVerticalCoordinateString:Sr,collections:{},newObject:dr,newAdditionalObject:ys,newObjectDeferred:fr,newObjectDeferredBegin:Un,getFilters:Zn,putStream:ki,events:An,scaleFactor:et,pageSize:{getWidth:function(){return Uc(B)},setWidth:function(I){Qd(B,I)},getHeight:function(){return Du(B)},setHeight:function(I){fh(B,I)}},encryptionOptions:f,encryption:li,getEncryptor:Jr,output:Ys,getNumberOfPages:Tu,pages:Le,out:ne,f2:Z,f3:O,getPageInfo:Ss,getPageInfoByObjId:tn,getCurrentPageInfo:ao,getPDFVersion:y,Point:Vd,Rectangle:ch,Matrix:Lt,hasHotfix:al},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return Uc(B)},set:function(I){Qd(B,I)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return Du(B)},set:function(I){fh(B,I)},enumerable:!0,configurable:!0}),Bl.call(g,ke),ft="F1",$l(i,t),An.publish("initialized"),g}N0.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},N0.prototype.toHexString=function(e){return e.split("").map(function(n){return("0"+(255&n.charCodeAt(0)).toString(16)).slice(-2)}).join("")},N0.prototype.hexToBytes=function(e){for(var n=[],t=0;t<e.length;t+=2)n.push(String.fromCharCode(parseInt(e.substr(t,2),16)));return n.join("")},N0.prototype.processOwnerPassword=function(e,n){return qS(zS(n).substr(0,5),e)},N0.prototype.encryptor=function(e,n){var t=zS(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&n,n>>8&255)).substr(0,10);return function(r){return qS(t,r)}},Bx.prototype.equals=function(e){var n,t="id,objectNumber,equals";if(!e||Xr(e)!==Xr(this))return!1;var r=0;for(n in this)if(!(t.indexOf(n)>=0)){if(this.hasOwnProperty(n)&&!e.hasOwnProperty(n)||this[n]!==e[n])return!1;r++}for(n in e)e.hasOwnProperty(n)&&t.indexOf(n)<0&&r--;return r===0},on.API={events:[]},on.version="3.0.1";var Xi=on.API,SA=1,Ep=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},o0=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Sn=function(e){return e.toFixed(2)},jf=function(e){return e.toFixed(5)};Xi.__acroform__={};var Ao=function(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e},FE=function(e){return e*SA},ic=function(e){var n=new GO,t=Bt.internal.getHeight(e)||0,r=Bt.internal.getWidth(e)||0;return n.BBox=[0,0,Number(Sn(r)),Number(Sn(t))],n},KQ=Xi.__acroform__.setBit=function(e,n){if(e=e||0,n=n||0,isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<n},XQ=Xi.__acroform__.clearBit=function(e,n){if(e=e||0,n=n||0,isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<n)},ZQ=Xi.__acroform__.getBit=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<n)==0?0:1},ua=Xi.__acroform__.getBitForPdf=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return ZQ(e,n-1)},ca=Xi.__acroform__.setBitForPdf=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return KQ(e,n-1)},da=Xi.__acroform__.clearBitForPdf=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return XQ(e,n-1)},JQ=Xi.__acroform__.calculateCoordinates=function(e,n){var t=n.internal.getHorizontalCoordinate,r=n.internal.getVerticalCoordinate,i=e[0],a=e[1],s=e[2],l=e[3],u={};return u.lowerLeft_X=t(i)||0,u.lowerLeft_Y=r(a+l)||0,u.upperRight_X=t(i+s)||0,u.upperRight_Y=r(a)||0,[Number(Sn(u.lowerLeft_X)),Number(Sn(u.lowerLeft_Y)),Number(Sn(u.upperRight_X)),Number(Sn(u.upperRight_Y))]},eK=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var n=[],t=e._V||e.DV,r=BS(e,t),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;n.push("/Tx BMC"),n.push("q"),n.push("BT"),n.push(e.scope.__private__.encodeColorString(e.color)),n.push("/"+i+" "+Sn(r.fontSize)+" Tf"),n.push("1 0 0 1 0 0 Tm"),n.push(r.text),n.push("ET"),n.push("Q"),n.push("EMC");var a=ic(e);return a.scope=e.scope,a.stream=n.join(`
`),a}},BS=function(e,n){var t=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},i=(n=(n=n.substr(0,1)=="("?n.substr(1):n).substr(n.length-1)==")"?n.substr(0,n.length-1):n).split(" ");i=e.multiline?i.map(function(O){return O.split(`
`)}):i.map(function(O){return[O]});var a=t,s=Bt.internal.getHeight(e)||0;s=s<0?-s:s;var l=Bt.internal.getWidth(e)||0;l=l<0?-l:l;var u=function(O,T,R){if(O+1<i.length){var N=T+" "+i[O+1][0];return jy(N,e,R).width<=l-4}return!1};a++;e:for(;a>0;){n="",a--;var d,f,m=jy("3",e,a).height,b=e.multiline?s-a:(s-m)/2,g=b+=2,x=0,y=0,A=0;if(a<=0){n=`(...) Tj
`,n+="% Width of Text: "+jy(n,e,a=12).width+", FieldWidth:"+l+`
`;break}for(var w="",C=0,j=0;j<i.length;j++)if(i.hasOwnProperty(j)){var F=!1;if(i[j].length!==1&&A!==i[j].length-1){if((m+2)*(C+2)+2>s)continue e;w+=i[j][A],F=!0,y=j,j--}else{w=(w+=i[j][A]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var M=parseInt(j),z=u(M,w,a),_=j>=i.length-1;if(z&&!_){w+=" ",A=0;continue}if(z||_){if(_)y=M;else if(e.multiline&&(m+2)*(C+2)+2>s)continue e}else{if(!e.multiline||(m+2)*(C+2)+2>s)continue e;y=M}}for(var L="",$=x;$<=y;$++){var Z=i[$];if(e.multiline){if($===y){L+=Z[A]+" ",A=(A+1)%Z.length;continue}if($===x){L+=Z[Z.length-1]+" ";continue}}L+=Z[0]+" "}switch(L=L.substr(L.length-1)==" "?L.substr(0,L.length-1):L,f=jy(L,e,a).width,e.textAlign){case"right":d=l-f-2;break;case"center":d=(l-f)/2;break;case"left":default:d=2}n+=Sn(d)+" "+Sn(g)+` Td
`,n+="("+Ep(L)+`) Tj
`,n+=-Sn(d)+` 0 Td
`,g=-(a+2),f=0,x=F?y:y+1,C++,w=""}break}return r.text=n,r.fontSize=a,r},jy=function(e,n,t){var r=n.scope.internal.getFont(n.fontName,n.fontStyle),i=n.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:n.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},tK={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},nK=function(e,n){var t={type:"reference",object:e};n.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&n.internal.getPageInfo(e.page).pageContext.annotations.push(t)},rK=function(e,n){for(var t in e)if(e.hasOwnProperty(t)){var r=t,i=e[t];n.internal.newObjectDeferredBegin(i.objId,!0),Xr(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete e[r]}},iK=function(e,n){if(n.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(ku.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(tK)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");SA=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new QO,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var a=r[i];a.objId=void 0,a.hasAnnotation&&nK(a,t)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(t){(function(r,i){var a=!r;for(var s in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(s)){var l=r[s],u=[],d=l.Rect;if(l.Rect&&(l.Rect=JQ(l.Rect,i)),i.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Bt.createDefaultAppearanceStream(l),Xr(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(u=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var f=eK(l);u.push({key:"AP",value:"<</N "+f+">>"}),i.internal.acroformPlugin.xForms.push(f)}if(l.appearanceStreamContent){var m="";for(var b in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(b)){var g=l.appearanceStreamContent[b];if(m+="/"+b+" ",m+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var s in g)if(g.hasOwnProperty(s)){var x=g[s];typeof x=="function"&&(x=x.call(i,l)),m+="/"+s+" "+x+" ",i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x)}}else typeof(x=g)=="function"&&(x=x.call(i,l)),m+="/"+s+" "+x,i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x);m+=">>"}u.push({key:"AP",value:`<<
`+m+">>"})}i.internal.putStream({additionalKeyValues:u,objectId:l.objId}),i.internal.out("endobj")}a&&rK(i.internal.acroformPlugin.xForms,i)})(t,e)}),e.internal.acroformPlugin.isInitialized=!0}},YO=Xi.__acroform__.arrayToPdfArray=function(e,n,t){var r=function(s){return s};if(Array.isArray(e)){for(var i="[",a=0;a<e.length;a++)switch(a!==0&&(i+=" "),Xr(e[a])){case"boolean":case"number":case"object":i+=e[a].toString();break;case"string":e[a].substr(0,1)!=="/"?(n!==void 0&&t&&(r=t.internal.getEncryptor(n)),i+="("+Ep(r(e[a].toString()))+")"):i+=e[a].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},fw=function(e,n,t){var r=function(i){return i};return n!==void 0&&t&&(r=t.internal.getEncryptor(n)),(e=e||"").toString(),e="("+Ep(r(e))+")"},wc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};wc.prototype.toString=function(){return this.objId+" 0 R"},wc.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},wc.prototype.getKeyValueListForStream=function(){var e=[],n=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var t in n)if(Object.getOwnPropertyDescriptor(this,n[t]).configurable===!1){var r=n[t],i=this[r];i&&(Array.isArray(i)?e.push({key:r,value:YO(i,this.objId,this.scope)}):i instanceof wc?(i.scope=this.scope,e.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:r,value:i}))}return e};var GO=function(){wc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,n=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};Ao(GO,wc);var QO=function(){wc.call(this);var e,n=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return n.length>0?n:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return n}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Ep(t(e))+")"}},set:function(t){e=t}})};Ao(QO,wc);var ku=function e(){wc.call(this);var n=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return n},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');n=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ua(n,3)},set:function(w){w?this.F=ca(n,3):this.F=da(n,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');t=w}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(w){r=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(w){r[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(w){r[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(w){r[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(w){r[3]=w}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof $x)return;a="FieldObject"+e.FieldNum++}var w=function(C){return C};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+Ep(w(a))+")"},set:function(w){a=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(w){a=w}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(w){s=w}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(w){l=w}});var u=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return u},set:function(w){u=w}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/SA:d},set:function(w){d=w}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(w){f=w}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof $x||this instanceof tp))return fw(m,this.objId,this.scope)},set:function(w){w=w.toString(),m=w}});var b=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof Xa?b:fw(b,this.objId,this.scope)},set:function(w){w=w.toString(),b=this instanceof Xa?w:w.substr(0,1)==="("?o0(w.substr(1,w.length-2)):o0(w)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Xa?o0(b.substr(1,b.length-1)):b},set:function(w){w=w.toString(),b=this instanceof Xa?"/"+w:w}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Xa?g:fw(g,this.objId,this.scope)},set:function(w){w=w.toString(),g=this instanceof Xa?w:w.substr(0,1)==="("?o0(w.substr(1,w.length-2)):o0(w)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Xa?o0(g.substr(1,g.length-1)):g},set:function(w){w=w.toString(),g=this instanceof Xa?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(w){w=!!w,y=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(w){x=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ua(this.Ff,1)},set:function(w){w?this.Ff=ca(this.Ff,1):this.Ff=da(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ua(this.Ff,2)},set:function(w){w?this.Ff=ca(this.Ff,2):this.Ff=da(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ua(this.Ff,3)},set:function(w){w?this.Ff=ca(this.Ff,3):this.Ff=da(this.Ff,3)}});var A=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(A!==null)return A},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');A=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(A){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:A=2;break;case"center":case 1:A=1;break;case"left":case 0:default:A=0}}})};Ao(ku,wc);var P0=function(){ku.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var n=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return YO(n,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=function(a,s,l){l||(l=1);for(var u,d=[];u=s.exec(a);)d.push(u[l]);return d}(r,/\((.*?)\)/g)),n=i}}),this.getOptions=function(){return n},this.setOptions=function(t){n=t,this.sort&&n.sort()},this.addOption=function(t){t=(t=t||"").toString(),n.push(t),this.sort&&n.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();n.indexOf(t)!==-1&&(n.splice(n.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ua(this.Ff,18)},set:function(t){t?this.Ff=ca(this.Ff,18):this.Ff=da(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ua(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=ca(this.Ff,19):this.Ff=da(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ua(this.Ff,20)},set:function(t){t?(this.Ff=ca(this.Ff,20),n.sort()):this.Ff=da(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ua(this.Ff,22)},set:function(t){t?this.Ff=ca(this.Ff,22):this.Ff=da(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ua(this.Ff,23)},set:function(t){t?this.Ff=ca(this.Ff,23):this.Ff=da(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ua(this.Ff,27)},set:function(t){t?this.Ff=ca(this.Ff,27):this.Ff=da(this.Ff,27)}}),this.hasAppearanceStream=!1};Ao(P0,ku);var z0=function(){P0.call(this),this.fontName="helvetica",this.combo=!1};Ao(z0,P0);var q0=function(){z0.call(this),this.combo=!0};Ao(q0,z0);var Zy=function(){q0.call(this),this.edit=!0};Ao(Zy,q0);var Xa=function(){ku.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ua(this.Ff,15)},set:function(t){t?this.Ff=ca(this.Ff,15):this.Ff=da(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ua(this.Ff,16)},set:function(t){t?this.Ff=ca(this.Ff,16):this.Ff=da(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ua(this.Ff,17)},set:function(t){t?this.Ff=ca(this.Ff,17):this.Ff=da(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ua(this.Ff,26)},set:function(t){t?this.Ff=ca(this.Ff,26):this.Ff=da(this.Ff,26)}});var e,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(a){return a};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(n).length!==0){var r,i=[];for(r in i.push("<<"),n)i.push("/"+r+" ("+Ep(t(n[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Xr(t)==="object"&&(n=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(t){typeof t=="string"&&(n.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};Ao(Xa,ku);var Jy=function(){Xa.call(this),this.pushButton=!0};Ao(Jy,Xa);var B0=function(){Xa.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n!==void 0?n:[]}})};Ao(B0,Xa);var $x=function(){var e,n;ku.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return n},set:function(i){n=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(l){return l};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,s=[];for(a in s.push("<<"),r)s.push("/"+a+" ("+Ep(i(r[a]))+")");return s.push(">>"),s.join(`
`)},set:function(i){Xr(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Bt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ao($x,ku),B0.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var n in this.Kids)if(this.Kids.hasOwnProperty(n)){var t=this.Kids[n];t.appearanceStreamContent=e.createAppearanceStream(t.optionName),t.caption=e.getCA()}},B0.prototype.createOption=function(e){var n=new $x;return n.Parent=this,n.optionName=e,this.Kids.push(n),aK.call(this.scope,n),n};var ex=function(){Xa.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Bt.CheckBox.createAppearanceStream()};Ao(ex,Xa);var tp=function(){ku.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ua(this.Ff,13)},set:function(n){n?this.Ff=ca(this.Ff,13):this.Ff=da(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ua(this.Ff,21)},set:function(n){n?this.Ff=ca(this.Ff,21):this.Ff=da(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ua(this.Ff,23)},set:function(n){n?this.Ff=ca(this.Ff,23):this.Ff=da(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ua(this.Ff,24)},set:function(n){n?this.Ff=ca(this.Ff,24):this.Ff=da(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ua(this.Ff,25)},set:function(n){n?this.Ff=ca(this.Ff,25):this.Ff=da(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ua(this.Ff,26)},set:function(n){n?this.Ff=ca(this.Ff,26):this.Ff=da(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){Number.isInteger(n)&&(e=n)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ao(tp,ku);var tx=function(){tp.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ua(this.Ff,14)},set:function(e){e?this.Ff=ca(this.Ff,14):this.Ff=da(this.Ff,14)}}),this.password=!0};Ao(tx,tp);var Bt={CheckBox:{createAppearanceStream:function(){return{N:{On:Bt.CheckBox.YesNormal},D:{On:Bt.CheckBox.YesPushDown,Off:Bt.CheckBox.OffPushDown}}},YesPushDown:function(e){var n=ic(e);n.scope=e.scope;var t=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),a=BS(e,e.caption);return t.push("0.749023 g"),t.push("0 0 "+Sn(Bt.internal.getWidth(e))+" "+Sn(Bt.internal.getHeight(e))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+Sn(a.fontSize)+" Tf "+i),t.push("BT"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC"),n.stream=t.join(`
`),n},YesNormal:function(e){var n=ic(e);n.scope=e.scope;var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),i=[],a=Bt.internal.getHeight(e),s=Bt.internal.getWidth(e),l=BS(e,e.caption);return i.push("1 g"),i.push("0 0 "+Sn(s)+" "+Sn(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Sn(s-1)+" "+Sn(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+Sn(l.fontSize)+" Tf "+r),i.push(l.text),i.push("ET"),i.push("Q"),n.stream=i.join(`
`),n},OffPushDown:function(e){var n=ic(e);n.scope=e.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Sn(Bt.internal.getWidth(e))+" "+Sn(Bt.internal.getHeight(e))+" re"),t.push("f"),n.stream=t.join(`
`),n}},RadioButton:{Circle:{createAppearanceStream:function(e){var n={D:{Off:Bt.RadioButton.Circle.OffPushDown},N:{}};return n.N[e]=Bt.RadioButton.Circle.YesNormal,n.D[e]=Bt.RadioButton.Circle.YesPushDown,n},getCA:function(){return"l"},YesNormal:function(e){var n=ic(e);n.scope=e.scope;var t=[],r=Bt.internal.getWidth(e)<=Bt.internal.getHeight(e)?Bt.internal.getWidth(e)/4:Bt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Bt.internal.Bezier_C,a=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+jf(Bt.internal.getWidth(e)/2)+" "+jf(Bt.internal.getHeight(e)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),t.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),t.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),t.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),t.push("f"),t.push("Q"),n.stream=t.join(`
`),n},YesPushDown:function(e){var n=ic(e);n.scope=e.scope;var t=[],r=Bt.internal.getWidth(e)<=Bt.internal.getHeight(e)?Bt.internal.getWidth(e)/4:Bt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*Bt.internal.Bezier_C).toFixed(5)),s=Number((r*Bt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+jf(Bt.internal.getWidth(e)/2)+" "+jf(Bt.internal.getHeight(e)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),t.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),t.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),t.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+jf(Bt.internal.getWidth(e)/2)+" "+jf(Bt.internal.getHeight(e)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),n.stream=t.join(`
`),n},OffPushDown:function(e){var n=ic(e);n.scope=e.scope;var t=[],r=Bt.internal.getWidth(e)<=Bt.internal.getHeight(e)?Bt.internal.getWidth(e)/4:Bt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*Bt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+jf(Bt.internal.getWidth(e)/2)+" "+jf(Bt.internal.getHeight(e)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),t.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),t.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),t.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),t.push("f"),t.push("Q"),n.stream=t.join(`
`),n}},Cross:{createAppearanceStream:function(e){var n={D:{Off:Bt.RadioButton.Cross.OffPushDown},N:{}};return n.N[e]=Bt.RadioButton.Cross.YesNormal,n.D[e]=Bt.RadioButton.Cross.YesPushDown,n},getCA:function(){return"8"},YesNormal:function(e){var n=ic(e);n.scope=e.scope;var t=[],r=Bt.internal.calculateCross(e);return t.push("q"),t.push("1 1 "+Sn(Bt.internal.getWidth(e)-2)+" "+Sn(Bt.internal.getHeight(e)-2)+" re"),t.push("W"),t.push("n"),t.push(Sn(r.x1.x)+" "+Sn(r.x1.y)+" m"),t.push(Sn(r.x2.x)+" "+Sn(r.x2.y)+" l"),t.push(Sn(r.x4.x)+" "+Sn(r.x4.y)+" m"),t.push(Sn(r.x3.x)+" "+Sn(r.x3.y)+" l"),t.push("s"),t.push("Q"),n.stream=t.join(`
`),n},YesPushDown:function(e){var n=ic(e);n.scope=e.scope;var t=Bt.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+Sn(Bt.internal.getWidth(e))+" "+Sn(Bt.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Sn(Bt.internal.getWidth(e)-2)+" "+Sn(Bt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Sn(t.x1.x)+" "+Sn(t.x1.y)+" m"),r.push(Sn(t.x2.x)+" "+Sn(t.x2.y)+" l"),r.push(Sn(t.x4.x)+" "+Sn(t.x4.y)+" m"),r.push(Sn(t.x3.x)+" "+Sn(t.x3.y)+" l"),r.push("s"),r.push("Q"),n.stream=r.join(`
`),n},OffPushDown:function(e){var n=ic(e);n.scope=e.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Sn(Bt.internal.getWidth(e))+" "+Sn(Bt.internal.getHeight(e))+" re"),t.push("f"),n.stream=t.join(`
`),n}}},createDefaultAppearanceStream:function(e){var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,t=e.scope.__private__.encodeColorString(e.color);return"/"+n+" "+e.fontSize+" Tf "+t}};Bt.internal={Bezier_C:.551915024494,calculateCross:function(e){var n=Bt.internal.getWidth(e),t=Bt.internal.getHeight(e),r=Math.min(n,t);return{x1:{x:(n-r)/2,y:(t-r)/2+r},x2:{x:(n-r)/2+r,y:(t-r)/2},x3:{x:(n-r)/2,y:(t-r)/2},x4:{x:(n-r)/2+r,y:(t-r)/2+r}}}},Bt.internal.getWidth=function(e){var n=0;return Xr(e)==="object"&&(n=FE(e.Rect[2])),n},Bt.internal.getHeight=function(e){var n=0;return Xr(e)==="object"&&(n=FE(e.Rect[3])),n};var aK=Xi.addField=function(e){if(iK(this,e),!(e instanceof ku))throw new Error("Invalid argument passed to jsPDF.addField.");var n;return(n=e).scope.internal.acroformPlugin.printedOut&&(n.scope.internal.acroformPlugin.printedOut=!1,n.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),n.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(n),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Xi.AcroFormChoiceField=P0,Xi.AcroFormListBox=z0,Xi.AcroFormComboBox=q0,Xi.AcroFormEditBox=Zy,Xi.AcroFormButton=Xa,Xi.AcroFormPushButton=Jy,Xi.AcroFormRadioButton=B0,Xi.AcroFormCheckBox=ex,Xi.AcroFormTextField=tp,Xi.AcroFormPasswordField=tx,Xi.AcroFormAppearance=Bt,Xi.AcroForm={ChoiceField:P0,ListBox:z0,ComboBox:q0,EditBox:Zy,Button:Xa,PushButton:Jy,RadioButton:B0,CheckBox:ex,TextField:tp,PasswordField:tx,Appearance:Bt},on.AcroForm={ChoiceField:P0,ListBox:z0,ComboBox:q0,EditBox:Zy,Button:Xa,PushButton:Jy,RadioButton:B0,CheckBox:ex,TextField:tp,PasswordField:tx,Appearance:Bt};on.AcroForm;function KO(e){return e.reduce(function(n,t,r){return n[t]=r,n},{})}(function(e){e.__addimage__={};var n="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(O,T){var R,N,G,W,Q,J=n;if((T=T||n)==="RGBA"||O.data!==void 0&&O.data instanceof Uint8ClampedArray&&"height"in O&&"width"in O)return"RGBA";if(z(O))for(Q in t)for(G=t[Q],R=0;R<G.length;R+=1){for(W=!0,N=0;N<G[R].length;N+=1)if(G[R][N]!==void 0&&G[R][N]!==O[N]){W=!1;break}if(W===!0){J=Q;break}}else for(Q in t)for(G=t[Q],R=0;R<G.length;R+=1){for(W=!0,N=0;N<G[R].length;N+=1)if(G[R][N]!==void 0&&G[R][N]!==O.charCodeAt(N)){W=!1;break}if(W===!0){J=Q;break}}return J===n&&T!==n&&(J=T),J},i=function O(T){for(var R=this.internal.write,N=this.internal.putStream,G=(0,this.internal.getFilters)();G.indexOf("FlateEncode")!==-1;)G.splice(G.indexOf("FlateEncode"),1);T.objectId=this.internal.newObject();var W=[];if(W.push({key:"Type",value:"/XObject"}),W.push({key:"Subtype",value:"/Image"}),W.push({key:"Width",value:T.width}),W.push({key:"Height",value:T.height}),T.colorSpace===A.INDEXED?W.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(T.palette.length/3-1)+" "+("sMask"in T&&T.sMask!==void 0?T.objectId+2:T.objectId+1)+" 0 R]"}):(W.push({key:"ColorSpace",value:"/"+T.colorSpace}),T.colorSpace===A.DEVICE_CMYK&&W.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),W.push({key:"BitsPerComponent",value:T.bitsPerComponent}),"decodeParameters"in T&&T.decodeParameters!==void 0&&W.push({key:"DecodeParms",value:"<<"+T.decodeParameters+">>"}),"transparency"in T&&Array.isArray(T.transparency)){for(var Q="",J=0,se=T.transparency.length;J<se;J++)Q+=T.transparency[J]+" "+T.transparency[J]+" ";W.push({key:"Mask",value:"["+Q+"]"})}T.sMask!==void 0&&W.push({key:"SMask",value:T.objectId+1+" 0 R"});var U=T.filter!==void 0?["/"+T.filter]:void 0;if(N({data:T.data,additionalKeyValues:W,alreadyAppliedFilters:U,objectId:T.objectId}),R("endobj"),"sMask"in T&&T.sMask!==void 0){var le="/Predictor "+T.predictor+" /Colors 1 /BitsPerComponent "+T.bitsPerComponent+" /Columns "+T.width,q={width:T.width,height:T.height,colorSpace:"DeviceGray",bitsPerComponent:T.bitsPerComponent,decodeParameters:le,data:T.sMask};"filter"in T&&(q.filter=T.filter),O.call(this,q)}if(T.colorSpace===A.INDEXED){var B=this.internal.newObject();N({data:L(new Uint8Array(T.palette)),objectId:B}),R("endobj")}},a=function(){var O=this.internal.collections.addImage_images;for(var T in O)i.call(this,O[T])},s=function(){var O,T=this.internal.collections.addImage_images,R=this.internal.write;for(var N in T)R("/I"+(O=T[N]).index,O.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",s))},u=function(){var O=this.internal.collections.addImage_images;return l.call(this),O},d=function(){return Object.keys(this.internal.collections.addImage_images).length},f=function(O){return typeof e["process"+O.toUpperCase()]=="function"},m=function(O){return Xr(O)==="object"&&O.nodeType===1},b=function(O,T){if(O.nodeName==="IMG"&&O.hasAttribute("src")){var R=""+O.getAttribute("src");if(R.indexOf("data:image/")===0)return K1(unescape(R).split("base64,").pop());var N=e.loadFile(R,!0);if(N!==void 0)return N}if(O.nodeName==="CANVAS"){if(O.width===0||O.height===0)throw new Error("Given canvas must have data. Canvas width: "+O.width+", height: "+O.height);var G;switch(T){case"PNG":G="image/png";break;case"WEBP":G="image/webp";break;case"JPEG":case"JPG":default:G="image/jpeg"}return K1(O.toDataURL(G,1).split("base64,").pop())}},g=function(O){var T=this.internal.collections.addImage_images;if(T){for(var R in T)if(O===T[R].alias)return T[R]}},x=function(O,T,R){return O||T||(O=-96,T=-96),O<0&&(O=-1*R.width*72/O/this.internal.scaleFactor),T<0&&(T=-1*R.height*72/T/this.internal.scaleFactor),O===0&&(O=T*R.width/R.height),T===0&&(T=O*R.height/R.width),[O,T]},y=function(O,T,R,N,G,W){var Q=x.call(this,R,N,G),J=this.internal.getCoordinateString,se=this.internal.getVerticalCoordinateString,U=u.call(this);if(R=Q[0],N=Q[1],U[G.index]=G,W){W*=Math.PI/180;var le=Math.cos(W),q=Math.sin(W),B=function(re){return re.toFixed(4)},ee=[B(le),B(q),B(-1*q),B(le),0,0,"cm"]}this.internal.write("q"),W?(this.internal.write([1,"0","0",1,J(O),se(T+N),"cm"].join(" ")),this.internal.write(ee.join(" ")),this.internal.write([J(R),"0","0",J(N),"0","0","cm"].join(" "))):this.internal.write([J(R),"0","0",J(N),J(O),se(T+N),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+G.index+" Do"),this.internal.write("Q")},A=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},C=e.__addimage__.sHashCode=function(O){var T,R,N=0;if(typeof O=="string")for(R=O.length,T=0;T<R;T++)N=(N<<5)-N+O.charCodeAt(T),N|=0;else if(z(O))for(R=O.byteLength/2,T=0;T<R;T++)N=(N<<5)-N+O[T],N|=0;return N},j=e.__addimage__.validateStringAsBase64=function(O){(O=O||"").toString().trim();var T=!0;return O.length===0&&(T=!1),O.length%4!=0&&(T=!1),/^[A-Za-z0-9+/]+$/.test(O.substr(0,O.length-2))===!1&&(T=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(O.substr(-2))===!1&&(T=!1),T},F=e.__addimage__.extractImageFromDataUrl=function(O){if(O==null||!(O=O.trim()).startsWith("data:"))return null;var T=O.indexOf(",");return T<0?null:O.substring(0,T).trim().endsWith("base64")?O.substring(T+1):null},M=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(O){return M()&&O instanceof ArrayBuffer};var z=e.__addimage__.isArrayBufferView=function(O){return M()&&typeof Uint32Array<"u"&&(O instanceof Int8Array||O instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&O instanceof Uint8ClampedArray||O instanceof Int16Array||O instanceof Uint16Array||O instanceof Int32Array||O instanceof Uint32Array||O instanceof Float32Array||O instanceof Float64Array)},_=e.__addimage__.binaryStringToUint8Array=function(O){for(var T=O.length,R=new Uint8Array(T),N=0;N<T;N++)R[N]=O.charCodeAt(N);return R},L=e.__addimage__.arrayBufferToBinaryString=function(O){for(var T="",R=z(O)?O:new Uint8Array(O),N=0;N<R.length;N+=8192)T+=String.fromCharCode.apply(null,R.subarray(N,N+8192));return T};e.addImage=function(){var O,T,R,N,G,W,Q,J,se;if(typeof arguments[1]=="number"?(T=n,R=arguments[1],N=arguments[2],G=arguments[3],W=arguments[4],Q=arguments[5],J=arguments[6],se=arguments[7]):(T=arguments[1],R=arguments[2],N=arguments[3],G=arguments[4],W=arguments[5],Q=arguments[6],J=arguments[7],se=arguments[8]),Xr(O=arguments[0])==="object"&&!m(O)&&"imageData"in O){var U=O;O=U.imageData,T=U.format||T||n,R=U.x||R||0,N=U.y||N||0,G=U.w||U.width||G,W=U.h||U.height||W,Q=U.alias||Q,J=U.compression||J,se=U.rotation||U.angle||se}var le=this.internal.getFilters();if(J===void 0&&le.indexOf("FlateEncode")!==-1&&(J="SLOW"),isNaN(R)||isNaN(N))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var q=$.call(this,O,T,Q,J);return y.call(this,R,N,G,W,q,se),this};var $=function(O,T,R,N){var G,W,Q;if(typeof O=="string"&&r(O)===n){O=unescape(O);var J=Z(O,!1);(J!==""||(J=e.loadFile(O,!0))!==void 0)&&(O=J)}if(m(O)&&(O=b(O,T)),T=r(O,T),!f(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(((Q=R)==null||Q.length===0)&&(R=function(se){return typeof se=="string"||z(se)?C(se):z(se.data)?C(se.data):null}(O)),(G=g.call(this,R))||(M()&&(O instanceof Uint8Array||T==="RGBA"||(W=O,O=_(O))),G=this["process"+T.toUpperCase()](O,d.call(this),R,function(se){return se&&typeof se=="string"&&(se=se.toUpperCase()),se in e.image_compression?se:w.NONE}(N),W)),!G)throw new Error("An unknown error occurred whilst processing the image.");return G},Z=e.__addimage__.convertBase64ToBinaryString=function(O,T){T=typeof T!="boolean"||T;var R,N="";if(typeof O=="string"){var G;R=(G=F(O))!==null&&G!==void 0?G:O;try{N=K1(R)}catch(W){if(T)throw j(R)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+W.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return N};e.getImageProperties=function(O){var T,R,N="";if(m(O)&&(O=b(O)),typeof O=="string"&&r(O)===n&&((N=Z(O,!1))===""&&(N=e.loadFile(O)||""),O=N),R=r(O),!f(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(!M()||O instanceof Uint8Array||(O=_(O)),!(T=this["process"+R.toUpperCase()](O)))throw new Error("An unknown error occurred whilst processing the image");return T.fileType=R,T}})(on.API),function(e){var n=function(t){if(t!==void 0&&t!="")return!0};on.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(t){for(var r,i,a,s=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,u=this.internal.getPageInfoByObjId(t.objId),d=t.pageContext.annotations,f=!1,m=0;m<d.length&&!f;m++)switch((r=d[m]).type){case"link":(n(r.options.url)||n(r.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var b=0;b<d.length;b++){r=d[b];var g=this.internal.pdfEscape,x=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),A=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(y.objId),C=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(r.bounds.x)+" "+l(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y)+"] ")+"/Contents ("+g(w(r.contents))+")",a+=" /Popup "+A.objId+" 0 R",a+=" /P "+u.objId+" 0 R",a+=" /T ("+g(w(C))+") >>",y.content=a;var j=y.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(r.bounds.x+30)+" "+l(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w+30)+" "+l(r.bounds.y)+"] ")+" /Parent "+j,r.open&&(a+=" /Open true"),a+=" >>",A.content=a,this.internal.write(y.objId,"0 R",A.objId,"0 R");break;case"freetext":i="/Rect ["+s(r.bounds.x)+" "+l(r.bounds.y)+" "+s(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y+r.bounds.h)+"] ";var F=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+g(x(r.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+F+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(r.options.name){var M=this.annotations._nameMap[r.options.name];r.options.pageNumber=M.page,r.options.top=M.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+g(x(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var z=l(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+z+" "+r.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),e.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},e.link=function(t,r,i,a,s){var l=this.internal.getCurrentPageInfo(),u=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:u(t),y:d(r),w:u(t+i),h:d(r+a)},options:s,type:"link"})},e.textWithLink=function(t,r,i,a){var s,l,u=this.getTextWidth(t),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){l=a.maxWidth;var f=this.splitTextToSize(t,l).length;s=Math.ceil(d*f)}else l=u,s=d;return this.text(t,r,i,a),i+=.2*d,a.align==="center"&&(r-=u/2),a.align==="right"&&(r-=u),this.link(r,i-d,l,s,a),u},e.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(on.API),function(e){var n={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var a=e.__arabicParser__.isInArabicSubstitutionA=function(y){return n[y.charCodeAt(0)]!==void 0},s=e.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},l=e.__arabicParser__.isArabicEndLetter=function(y){return s(y)&&a(y)&&n[y.charCodeAt(0)].length<=2},u=e.__arabicParser__.isArabicAlfLetter=function(y){return s(y)&&i.indexOf(y.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return s(y)&&a(y)&&n[y.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(y){return s(y)&&a(y)&&n[y.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(y){return s(y)&&a(y)&&n[y.charCodeAt(0)].length>=3};var f=e.__arabicParser__.arabicLetterHasMedialForm=function(y){return s(y)&&a(y)&&n[y.charCodeAt(0)].length==4},m=e.__arabicParser__.resolveLigatures=function(y){var A=0,w=t,C="",j=0;for(A=0;A<y.length;A+=1)w[y.charCodeAt(A)]!==void 0?(j++,typeof(w=w[y.charCodeAt(A)])=="number"&&(C+=String.fromCharCode(w),w=t,j=0),A===y.length-1&&(w=t,C+=y.charAt(A-(j-1)),A-=j-1,j=0)):(w=t,C+=y.charAt(A-j),A-=j,j=0);return C};e.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&r[y.charCodeAt(0)]!==void 0};var b=e.__arabicParser__.getCorrectForm=function(y,A,w){return s(y)?a(y)===!1?-1:!d(y)||!s(A)&&!s(w)||!s(w)&&l(A)||l(y)&&!s(A)||l(y)&&u(A)||l(y)&&l(A)?0:f(y)&&s(A)&&!l(A)&&s(w)&&d(w)?3:l(y)||!s(w)?1:2:-1},g=function(y){var A=0,w=0,C=0,j="",F="",M="",z=(y=y||"").split("\\s+"),_=[];for(A=0;A<z.length;A+=1){for(_.push(""),w=0;w<z[A].length;w+=1)j=z[A][w],F=z[A][w-1],M=z[A][w+1],s(j)?(C=b(j,F,M),_[A]+=C!==-1?String.fromCharCode(n[j.charCodeAt(0)][C]):j):_[A]+=j;_[A]=m(_[A])}return _.join(" ")},x=e.__arabicParser__.processArabic=e.processArabic=function(){var y,A=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(A)){var C=0;for(w=[],C=0;C<A.length;C+=1)Array.isArray(A[C])?w.push([g(A[C][0]),A[C][1],A[C][2]]):w.push([g(A[C])]);y=w}else y=g(A);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};e.events.push(["preProcessText",x])}(on.API),on.API.autoPrint=function(e){var n;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){n=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+n+" 0 R")})}return this},function(e){var n=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(l){t=l}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(l){r=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(l){i=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(l){a=l}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(l){s=l}}),Object.defineProperty(this,"parentNode",{})};n.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},n.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new n,this.canvas.pdf=this}])}(on.API),function(e){var n={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},n),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var u=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return u},set:function(y){u=y}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(y){d=y}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(y){f=y}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(y){m=y}});var b=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return b},set:function(y){b=y}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(y){g=y}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(y){x=y}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(u){return r.call(this),this.internal.__cell__.headerFunction=typeof u=="function"?u:void 0,this},e.getTextDimensions=function(u,d){r.call(this);var f=(d=d||{}).fontSize||this.getFontSize(),m=d.font||this.getFont(),b=d.scaleFactor||this.internal.scaleFactor,g=0,x=0,y=0,A=this;if(!Array.isArray(u)&&typeof u!="string"){if(typeof u!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");u=String(u)}var w=d.maxWidth;w>0?typeof u=="string"?u=this.splitTextToSize(u,w):Object.prototype.toString.call(u)==="[object Array]"&&(u=u.reduce(function(j,F){return j.concat(A.splitTextToSize(F,w))},[])):u=Array.isArray(u)?u:[u];for(var C=0;C<u.length;C++)g<(y=this.getStringUnitWidth(u[C],{font:m})*f)&&(g=y);return g!==0&&(x=u.length),{w:g/=b,h:Math.max((x*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/b,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var u=this.internal.__cell__.margins||n;return this.internal.__cell__.lastCell=new a(u.left,u.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=e.cell=function(){var u;u=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var d=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,m=this.internal.__cell__.margins||n,b=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===u.lineNumber?(u.x=(d.x||0)+(d.width||0),u.y=d.y||0):d.y+d.height+u.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),u.y=m.top,g&&b&&(this.printHeaderRow(u.lineNumber,!0),u.y+=b[0].height)):u.y=d.y+d.height||u.y),u.text[0]!==void 0&&(this.rect(u.x,u.y,u.width,u.height,t===!0?"FD":void 0),u.align==="right"?this.text(u.text,u.x+u.width-f,u.y+f,{align:"right",baseline:"top"}):u.align==="center"?this.text(u.text,u.x+u.width/2,u.y+f,{align:"center",baseline:"top",maxWidth:u.width-f-f}):this.text(u.text,u.x+f,u.y+f,{align:"left",baseline:"top",maxWidth:u.width-f-f})),this.internal.__cell__.lastCell=u,this};e.table=function(u,d,f,m,b){if(r.call(this),!f)throw new Error("No data for PDF table.");var g,x,y,A,w=[],C=[],j=[],F={},M={},z=[],_=[],L=(b=b||{}).autoSize||!1,$=b.printHeaders!==!1,Z=b.css&&b.css["font-size"]!==void 0?16*b.css["font-size"]:b.fontSize||12,O=b.margins||Object.assign({width:this.getPageWidth()},n),T=typeof b.padding=="number"?b.padding:3,R=b.headerBackgroundColor||"#c8c8c8",N=b.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=$,this.internal.__cell__.margins=O,this.internal.__cell__.table_font_size=Z,this.internal.__cell__.padding=T,this.internal.__cell__.headerBackgroundColor=R,this.internal.__cell__.headerTextColor=N,this.setFontSize(Z),m==null)C=w=Object.keys(f[0]),j=w.map(function(){return"left"});else if(Array.isArray(m)&&Xr(m[0])==="object")for(w=m.map(function(U){return U.name}),C=m.map(function(U){return U.prompt||U.name||""}),j=m.map(function(U){return U.align||"left"}),g=0;g<m.length;g+=1)M[m[g].name]=m[g].width*(19.049976/25.4);else Array.isArray(m)&&typeof m[0]=="string"&&(C=w=m,j=w.map(function(){return"left"}));if(L||Array.isArray(m)&&typeof m[0]=="string")for(g=0;g<w.length;g+=1){for(F[A=w[g]]=f.map(function(U){return U[A]}),this.setFont(void 0,"bold"),z.push(this.getTextDimensions(C[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=F[A],this.setFont(void 0,"normal"),y=0;y<x.length;y+=1)z.push(this.getTextDimensions(x[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);M[A]=Math.max.apply(null,z)+T+T,z=[]}if($){var G={};for(g=0;g<w.length;g+=1)G[w[g]]={},G[w[g]].text=C[g],G[w[g]].align=j[g];var W=l.call(this,G,M);_=w.map(function(U){return new a(u,d,M[U],W,G[U].text,void 0,G[U].align)}),this.setTableHeaderRow(_),this.printHeaderRow(1,!1)}var Q=m.reduce(function(U,le){return U[le.name]=le.align,U},{});for(g=0;g<f.length;g+=1){"rowStart"in b&&b.rowStart instanceof Function&&b.rowStart({row:g,data:f[g]},this);var J=l.call(this,f[g],M);for(y=0;y<w.length;y+=1){var se=f[g][w[y]];"cellStart"in b&&b.cellStart instanceof Function&&b.cellStart({row:g,col:y,data:se},this),s.call(this,new a(u,d,M[w[y]],J,se,g+2,Q[w[y]]))}}return this.internal.__cell__.table_x=u,this.internal.__cell__.table_y=d,this};var l=function(u,d){var f=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,b=this.internal.scaleFactor;return Object.keys(u).map(function(g){var x=u[g];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,d[g]-f-f)},this).map(function(g){return this.getLineHeightFactor()*g.length*m/b+f+f},this).reduce(function(g,x){return Math.max(g,x)},0)};e.setTableHeaderRow=function(u){r.call(this),this.internal.__cell__.tableHeaderRow=u},e.printHeaderRow=function(u,d){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var b=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){f=this.internal.__cell__.tableHeaderRow[g].clone(),d&&(f.y=this.internal.__cell__.margins.top||0,b.push(f)),f.lineNumber=u;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,f),this.setTextColor(x)}b.length>0&&this.setTableHeaderRow(b),this.setFont(void 0,"normal"),t=!1}}(on.API);var XO={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},ZO=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],$S=KO(ZO),JO=[100,200,300,400,500,600,700,800,900],sK=KO(JO);function US(e){var n=e.family.replace(/"|'/g,"").toLowerCase(),t=function(a){return XO[a=a||"normal"]?a:"normal"}(e.style),r=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(e.weight),i=function(a){return typeof $S[a=a||"normal"]=="number"?a:"normal"}(e.stretch);return{family:n,style:t,weight:r,stretch:i,src:e.src||[],ref:e.ref||{name:n,style:[i,t,r].join(" ")}}}function PE(e,n,t,r){var i;for(i=t;i>=0&&i<n.length;i+=r)if(e[n[i]])return e[n[i]];for(i=t;i>=0&&i<n.length;i-=r)if(e[n[i]])return e[n[i]]}var oK={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},zE={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function qE(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function lK(e,n,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},oK,t.genericFontFamilies||{}),a=null,s=null,l=0;l<n.length;++l)if(i[(a=US(n[l])).family]&&(a.family=i[a.family]),e.hasOwnProperty(a.family)){s=e[a.family];break}if(!(s=s||e[r]))throw new Error("Could not find a font-family for the rule '"+qE(a)+"' and default family '"+r+"'.");if(s=function(u,d){if(d[u])return d[u];var f=$S[u],m=f<=$S.normal?-1:1,b=PE(d,ZO,f,m);if(!b)throw new Error("Could not find a matching font-stretch value for "+u);return b}(a.stretch,s),s=function(u,d){if(d[u])return d[u];for(var f=XO[u],m=0;m<f.length;++m)if(d[f[m]])return d[f[m]];throw new Error("Could not find a matching font-style for "+u)}(a.style,s),!(s=function(u,d){if(d[u])return d[u];if(u===400&&d[500])return d[500];if(u===500&&d[400])return d[400];var f=sK[u],m=PE(d,JO,f,u<400?-1:1);if(!m)throw new Error("Could not find a matching font-weight for value "+u);return m}(a.weight,s)))throw new Error("Failed to resolve a font for the rule '"+qE(a)+"'.");return s}function BE(e){return e.trimLeft()}function uK(e,n){for(var t=0;t<e.length;){if(e.charAt(t)===n)return[e.substring(0,t),e.substring(t+1)];t+=1}return null}function cK(e){var n=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return n===null?null:[n[0],e.substring(n[0].length)]}var Ty,$E,UE,hw=["times"];(function(e){var n,t,r,i,a,s,l,u,d,f=function(q){return q=q||{},this.isStrokeTransparent=q.isStrokeTransparent||!1,this.strokeOpacity=q.strokeOpacity||1,this.strokeStyle=q.strokeStyle||"#000000",this.fillStyle=q.fillStyle||"#000000",this.isFillTransparent=q.isFillTransparent||!1,this.fillOpacity=q.fillOpacity||1,this.font=q.font||"10px sans-serif",this.textBaseline=q.textBaseline||"alphabetic",this.textAlign=q.textAlign||"left",this.lineWidth=q.lineWidth||1,this.lineJoin=q.lineJoin||"miter",this.lineCap=q.lineCap||"butt",this.path=q.path||[],this.transform=q.transform!==void 0?q.transform.clone():new u,this.globalCompositeOperation=q.globalCompositeOperation||"normal",this.globalAlpha=q.globalAlpha||1,this.clip_path=q.clip_path||[],this.currentPoint=q.currentPoint||new s,this.miterLimit=q.miterLimit||10,this.lastPoint=q.lastPoint||new s,this.lineDashOffset=q.lineDashOffset||0,this.lineDash=q.lineDash||[],this.margin=q.margin||[0,0,0,0],this.prevPageLastElemOffset=q.prevPageLastElemOffset||0,this.ignoreClearRect=typeof q.ignoreClearRect!="boolean"||q.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new m(this),n=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,s=this.internal.Point,l=this.internal.Rectangle,u=this.internal.Matrix,d=new f}]);var m=function(q){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var B=q;Object.defineProperty(this,"pdf",{get:function(){return B}});var ee=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ee},set:function(Ae){ee=!!Ae}});var re=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return re},set:function(Ae){re=!!Ae}});var oe=0;Object.defineProperty(this,"posX",{get:function(){return oe},set:function(Ae){isNaN(Ae)||(oe=Ae)}});var Ce=0;Object.defineProperty(this,"posY",{get:function(){return Ce},set:function(Ae){isNaN(Ae)||(Ce=Ae)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(Ae){var ne;typeof Ae=="number"?ne=[Ae,Ae,Ae,Ae]:((ne=new Array(4))[0]=Ae[0],ne[1]=Ae.length>=2?Ae[1]:ne[0],ne[2]=Ae.length>=3?Ae[2]:ne[0],ne[3]=Ae.length>=4?Ae[3]:ne[1]),d.margin=ne}});var ye=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ye},set:function(Ae){ye=Ae}});var Se=0;Object.defineProperty(this,"lastBreak",{get:function(){return Se},set:function(Ae){Se=Ae}});var Te=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Te},set:function(Ae){Te=Ae}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(Ae){Ae instanceof f&&(d=Ae)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(Ae){d.path=Ae}});var Le=[];Object.defineProperty(this,"ctxStack",{get:function(){return Le},set:function(Ae){Le=Ae}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ae){var ne;ne=b(Ae),this.ctx.fillStyle=ne.style,this.ctx.isFillTransparent=ne.a===0,this.ctx.fillOpacity=ne.a,this.pdf.setFillColor(ne.r,ne.g,ne.b,{a:ne.a}),this.pdf.setTextColor(ne.r,ne.g,ne.b,{a:ne.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ae){var ne=b(Ae);this.ctx.strokeStyle=ne.style,this.ctx.isStrokeTransparent=ne.a===0,this.ctx.strokeOpacity=ne.a,ne.a===0?this.pdf.setDrawColor(255,255,255):(ne.a,this.pdf.setDrawColor(ne.r,ne.g,ne.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ae){["butt","round","square"].indexOf(Ae)!==-1&&(this.ctx.lineCap=Ae,this.pdf.setLineCap(Ae))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ae){isNaN(Ae)||(this.ctx.lineWidth=Ae,this.pdf.setLineWidth(Ae))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ae){["bevel","round","miter"].indexOf(Ae)!==-1&&(this.ctx.lineJoin=Ae,this.pdf.setLineJoin(Ae))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ae){isNaN(Ae)||(this.ctx.miterLimit=Ae,this.pdf.setMiterLimit(Ae))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ae){this.ctx.textBaseline=Ae}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ae){["right","end","center","left","start"].indexOf(Ae)!==-1&&(this.ctx.textAlign=Ae)}});var He=null;function Ye(Ae,ne){if(He===null){var be=function(fe){var ke=[];return Object.keys(fe).forEach(function(Re){fe[Re].forEach(function(qe){var je=null;switch(qe){case"bold":je={family:Re,weight:"bold"};break;case"italic":je={family:Re,style:"italic"};break;case"bolditalic":je={family:Re,weight:"bold",style:"italic"};break;case"":case"normal":je={family:Re}}je!==null&&(je.ref={name:Re,style:qe},ke.push(je))})}),ke}(Ae.getFontList());He=function(fe){for(var ke={},Re=0;Re<fe.length;++Re){var qe=US(fe[Re]),je=qe.family,Ze=qe.stretch,ut=qe.style,rt=qe.weight;ke[je]=ke[je]||{},ke[je][Ze]=ke[je][Ze]||{},ke[je][Ze][ut]=ke[je][Ze][ut]||{},ke[je][Ze][ut][rt]=qe}return ke}(be.concat(ne))}return He}var V=null;Object.defineProperty(this,"fontFaces",{get:function(){return V},set:function(Ae){He=null,V=Ae}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ae){var ne;if(this.ctx.font=Ae,(ne=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ae))!==null){var be=ne[1];ne[2];var fe=ne[3],ke=ne[4];ne[5];var Re=ne[6],qe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ke)[2];ke=Math.floor(qe==="px"?parseFloat(ke)*this.pdf.internal.scaleFactor:qe==="em"?parseFloat(ke)*this.pdf.getFontSize():parseFloat(ke)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ke);var je=function(De){var ft,et,Pt=[],Nt=De.trim();if(Nt==="")return hw;if(Nt in zE)return[zE[Nt]];for(;Nt!=="";){switch(et=null,ft=(Nt=BE(Nt)).charAt(0)){case'"':case"'":et=uK(Nt.substring(1),ft);break;default:et=cK(Nt)}if(et===null||(Pt.push(et[0]),(Nt=BE(et[1]))!==""&&Nt.charAt(0)!==","))return hw;Nt=Nt.replace(/^,/,"")}return Pt}(Re);if(this.fontFaces){var Ze=lK(Ye(this.pdf,this.fontFaces),je.map(function(De){return{family:De,stretch:"normal",weight:fe,style:be}}));this.pdf.setFont(Ze.ref.name,Ze.ref.style)}else{var ut="";(fe==="bold"||parseInt(fe,10)>=700||be==="bold")&&(ut="bold"),be==="italic"&&(ut+="italic"),ut.length===0&&(ut="normal");for(var rt="",Pe={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ve=0;ve<je.length;ve++){if(this.pdf.internal.getFont(je[ve],ut,{noFallback:!0,disableWarning:!0})!==void 0){rt=je[ve];break}if(ut==="bolditalic"&&this.pdf.internal.getFont(je[ve],"bold",{noFallback:!0,disableWarning:!0})!==void 0)rt=je[ve],ut="bold";else if(this.pdf.internal.getFont(je[ve],"normal",{noFallback:!0,disableWarning:!0})!==void 0){rt=je[ve],ut="normal";break}}if(rt===""){for(var Ne=0;Ne<je.length;Ne++)if(Pe[je[Ne]]){rt=Pe[je[Ne]];break}}rt=rt===""?"Times":rt,this.pdf.setFont(rt,ut)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ae){this.ctx.globalCompositeOperation=Ae}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ae){this.ctx.globalAlpha=Ae}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ae){this.ctx.lineDashOffset=Ae,le.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ae){this.ctx.lineDash=Ae,le.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ae){this.ctx.ignoreClearRect=!!Ae}})};m.prototype.setLineDash=function(q){this.lineDash=q},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){F.call(this,"fill",!1)},m.prototype.stroke=function(){F.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(q,B){if(isNaN(q)||isNaN(B))throw Kr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ee=this.ctx.transform.applyToPoint(new s(q,B));this.path.push({type:"mt",x:ee.x,y:ee.y}),this.ctx.lastPoint=new s(q,B)},m.prototype.closePath=function(){var q=new s(0,0),B=0;for(B=this.path.length-1;B!==-1;B--)if(this.path[B].type==="begin"&&Xr(this.path[B+1])==="object"&&typeof this.path[B+1].x=="number"){q=new s(this.path[B+1].x,this.path[B+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(q.x,q.y)},m.prototype.lineTo=function(q,B){if(isNaN(q)||isNaN(B))throw Kr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ee=this.ctx.transform.applyToPoint(new s(q,B));this.path.push({type:"lt",x:ee.x,y:ee.y}),this.ctx.lastPoint=new s(ee.x,ee.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),F.call(this,null,!0)},m.prototype.quadraticCurveTo=function(q,B,ee,re){if(isNaN(ee)||isNaN(re)||isNaN(q)||isNaN(B))throw Kr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var oe=this.ctx.transform.applyToPoint(new s(ee,re)),Ce=this.ctx.transform.applyToPoint(new s(q,B));this.path.push({type:"qct",x1:Ce.x,y1:Ce.y,x:oe.x,y:oe.y}),this.ctx.lastPoint=new s(oe.x,oe.y)},m.prototype.bezierCurveTo=function(q,B,ee,re,oe,Ce){if(isNaN(oe)||isNaN(Ce)||isNaN(q)||isNaN(B)||isNaN(ee)||isNaN(re))throw Kr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ye=this.ctx.transform.applyToPoint(new s(oe,Ce)),Se=this.ctx.transform.applyToPoint(new s(q,B)),Te=this.ctx.transform.applyToPoint(new s(ee,re));this.path.push({type:"bct",x1:Se.x,y1:Se.y,x2:Te.x,y2:Te.y,x:ye.x,y:ye.y}),this.ctx.lastPoint=new s(ye.x,ye.y)},m.prototype.arc=function(q,B,ee,re,oe,Ce){if(isNaN(q)||isNaN(B)||isNaN(ee)||isNaN(re)||isNaN(oe))throw Kr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ce=!!Ce,!this.ctx.transform.isIdentity){var ye=this.ctx.transform.applyToPoint(new s(q,B));q=ye.x,B=ye.y;var Se=this.ctx.transform.applyToPoint(new s(0,ee)),Te=this.ctx.transform.applyToPoint(new s(0,0));ee=Math.sqrt(Math.pow(Se.x-Te.x,2)+Math.pow(Se.y-Te.y,2))}Math.abs(oe-re)>=2*Math.PI&&(re=0,oe=2*Math.PI),this.path.push({type:"arc",x:q,y:B,radius:ee,startAngle:re,endAngle:oe,counterclockwise:Ce})},m.prototype.arcTo=function(q,B,ee,re,oe){throw new Error("arcTo not implemented.")},m.prototype.rect=function(q,B,ee,re){if(isNaN(q)||isNaN(B)||isNaN(ee)||isNaN(re))throw Kr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(q,B),this.lineTo(q+ee,B),this.lineTo(q+ee,B+re),this.lineTo(q,B+re),this.lineTo(q,B),this.lineTo(q+ee,B),this.lineTo(q,B)},m.prototype.fillRect=function(q,B,ee,re){if(isNaN(q)||isNaN(B)||isNaN(ee)||isNaN(re))throw Kr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var oe={};this.lineCap!=="butt"&&(oe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(oe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(q,B,ee,re),this.fill(),oe.hasOwnProperty("lineCap")&&(this.lineCap=oe.lineCap),oe.hasOwnProperty("lineJoin")&&(this.lineJoin=oe.lineJoin)}},m.prototype.strokeRect=function(q,B,ee,re){if(isNaN(q)||isNaN(B)||isNaN(ee)||isNaN(re))throw Kr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(q,B,ee,re),this.stroke())},m.prototype.clearRect=function(q,B,ee,re){if(isNaN(q)||isNaN(B)||isNaN(ee)||isNaN(re))throw Kr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(q,B,ee,re))},m.prototype.save=function(q){q=typeof q!="boolean"||q;for(var B=this.pdf.internal.getCurrentPageInfo().pageNumber,ee=0;ee<this.pdf.internal.getNumberOfPages();ee++)this.pdf.setPage(ee+1),this.pdf.internal.out("q");if(this.pdf.setPage(B),q){this.ctx.fontSize=this.pdf.internal.getFontSize();var re=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=re}},m.prototype.restore=function(q){q=typeof q!="boolean"||q;for(var B=this.pdf.internal.getCurrentPageInfo().pageNumber,ee=0;ee<this.pdf.internal.getNumberOfPages();ee++)this.pdf.setPage(ee+1),this.pdf.internal.out("Q");this.pdf.setPage(B),q&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var b=function(q){var B,ee,re,oe;if(q.isCanvasGradient===!0&&(q=q.getColor()),!q)return{r:0,g:0,b:0,a:0,style:q};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(q))B=0,ee=0,re=0,oe=0;else{var Ce=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(q);if(Ce!==null)B=parseInt(Ce[1]),ee=parseInt(Ce[2]),re=parseInt(Ce[3]),oe=1;else if((Ce=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(q))!==null)B=parseInt(Ce[1]),ee=parseInt(Ce[2]),re=parseInt(Ce[3]),oe=parseFloat(Ce[4]);else{if(oe=1,typeof q=="string"&&q.charAt(0)!=="#"){var ye=new HO(q);q=ye.ok?ye.toHex():"#000000"}q.length===4?(B=q.substring(1,2),B+=B,ee=q.substring(2,3),ee+=ee,re=q.substring(3,4),re+=re):(B=q.substring(1,3),ee=q.substring(3,5),re=q.substring(5,7)),B=parseInt(B,16),ee=parseInt(ee,16),re=parseInt(re,16)}}return{r:B,g:ee,b:re,a:oe,style:q}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(q,B,ee,re){if(isNaN(B)||isNaN(ee)||typeof q!="string")throw Kr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(re=isNaN(re)?void 0:re,!g.call(this)){var oe=J(this.ctx.transform.rotation),Ce=this.ctx.transform.scaleX;T.call(this,{text:q,x:B,y:ee,scale:Ce,angle:oe,align:this.textAlign,maxWidth:re})}},m.prototype.strokeText=function(q,B,ee,re){if(isNaN(B)||isNaN(ee)||typeof q!="string")throw Kr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){re=isNaN(re)?void 0:re;var oe=J(this.ctx.transform.rotation),Ce=this.ctx.transform.scaleX;T.call(this,{text:q,x:B,y:ee,scale:Ce,renderingMode:"stroke",angle:oe,align:this.textAlign,maxWidth:re})}},m.prototype.measureText=function(q){if(typeof q!="string")throw Kr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var B=this.pdf,ee=this.pdf.internal.scaleFactor,re=B.internal.getFontSize(),oe=B.getStringUnitWidth(q)*re/B.internal.scaleFactor,Ce=function(ye){var Se=(ye=ye||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Se}}),this};return new Ce({width:oe*=Math.round(96*ee/72*1e4)/1e4})},m.prototype.scale=function(q,B){if(isNaN(q)||isNaN(B))throw Kr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ee=new u(q,0,0,B,0,0);this.ctx.transform=this.ctx.transform.multiply(ee)},m.prototype.rotate=function(q){if(isNaN(q))throw Kr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var B=new u(Math.cos(q),Math.sin(q),-Math.sin(q),Math.cos(q),0,0);this.ctx.transform=this.ctx.transform.multiply(B)},m.prototype.translate=function(q,B){if(isNaN(q)||isNaN(B))throw Kr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ee=new u(1,0,0,1,q,B);this.ctx.transform=this.ctx.transform.multiply(ee)},m.prototype.transform=function(q,B,ee,re,oe,Ce){if(isNaN(q)||isNaN(B)||isNaN(ee)||isNaN(re)||isNaN(oe)||isNaN(Ce))throw Kr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ye=new u(q,B,ee,re,oe,Ce);this.ctx.transform=this.ctx.transform.multiply(ye)},m.prototype.setTransform=function(q,B,ee,re,oe,Ce){q=isNaN(q)?1:q,B=isNaN(B)?0:B,ee=isNaN(ee)?0:ee,re=isNaN(re)?1:re,oe=isNaN(oe)?0:oe,Ce=isNaN(Ce)?0:Ce,this.ctx.transform=new u(q,B,ee,re,oe,Ce)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(q,B,ee,re,oe,Ce,ye,Se,Te){var Le=this.pdf.getImageProperties(q),He=1,Ye=1,V=1,Ae=1;re!==void 0&&Se!==void 0&&(V=Se/re,Ae=Te/oe,He=Le.width/re*Se/re,Ye=Le.height/oe*Te/oe),Ce===void 0&&(Ce=B,ye=ee,B=0,ee=0),re!==void 0&&Se===void 0&&(Se=re,Te=oe),re===void 0&&Se===void 0&&(Se=Le.width,Te=Le.height);for(var ne,be=this.ctx.transform.decompose(),fe=J(be.rotate.shx),ke=new u,Re=(ke=(ke=(ke=ke.multiply(be.translate)).multiply(be.skew)).multiply(be.scale)).applyToRectangle(new l(Ce-B*V,ye-ee*Ae,re*He,oe*Ye)),qe=A.call(this,Re),je=[],Ze=0;Ze<qe.length;Ze+=1)je.indexOf(qe[Ze])===-1&&je.push(qe[Ze]);if(j(je),this.autoPaging)for(var ut=je[0],rt=je[je.length-1],Pe=ut;Pe<rt+1;Pe++){this.pdf.setPage(Pe);var ve=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ne=Pe===1?this.posY+this.margin[0]:this.margin[0],De=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ft=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],et=Pe===1?0:De+(Pe-2)*ft;if(this.ctx.clip_path.length!==0){var Pt=this.path;ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(ne,this.posX+this.margin[3],-et+Ne+this.ctx.prevPageLastElemOffset),M.call(this,"fill",!0),this.path=Pt}var Nt=JSON.parse(JSON.stringify(Re));Nt=C([Nt],this.posX+this.margin[3],-et+Ne+this.ctx.prevPageLastElemOffset)[0];var Vt=(Pe>ut||Pe<rt)&&y.call(this);Vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ve,ft,null).clip().discardPath()),this.pdf.addImage(q,"JPEG",Nt.x,Nt.y,Nt.w,Nt.h,null,null,fe),Vt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(q,"JPEG",Re.x,Re.y,Re.w,Re.h,null,null,fe)};var A=function(q,B,ee){var re=[];B=B||this.pdf.internal.pageSize.width,ee=ee||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var oe=this.posY+this.ctx.prevPageLastElemOffset;switch(q.type){default:case"mt":case"lt":re.push(Math.floor((q.y+oe)/ee)+1);break;case"arc":re.push(Math.floor((q.y+oe-q.radius)/ee)+1),re.push(Math.floor((q.y+oe+q.radius)/ee)+1);break;case"qct":var Ce=se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,q.x1,q.y1,q.x,q.y);re.push(Math.floor((Ce.y+oe)/ee)+1),re.push(Math.floor((Ce.y+Ce.h+oe)/ee)+1);break;case"bct":var ye=U(this.ctx.lastPoint.x,this.ctx.lastPoint.y,q.x1,q.y1,q.x2,q.y2,q.x,q.y);re.push(Math.floor((ye.y+oe)/ee)+1),re.push(Math.floor((ye.y+ye.h+oe)/ee)+1);break;case"rect":re.push(Math.floor((q.y+oe)/ee)+1),re.push(Math.floor((q.y+q.h+oe)/ee)+1)}for(var Se=0;Se<re.length;Se+=1)for(;this.pdf.internal.getNumberOfPages()<re[Se];)w.call(this);return re},w=function(){var q=this.fillStyle,B=this.strokeStyle,ee=this.font,re=this.lineCap,oe=this.lineWidth,Ce=this.lineJoin;this.pdf.addPage(),this.fillStyle=q,this.strokeStyle=B,this.font=ee,this.lineCap=re,this.lineWidth=oe,this.lineJoin=Ce},C=function(q,B,ee){for(var re=0;re<q.length;re++)switch(q[re].type){case"bct":q[re].x2+=B,q[re].y2+=ee;case"qct":q[re].x1+=B,q[re].y1+=ee;case"mt":case"lt":case"arc":default:q[re].x+=B,q[re].y+=ee}return q},j=function(q){return q.sort(function(B,ee){return B-ee})},F=function(q,B){for(var ee,re,oe=this.fillStyle,Ce=this.strokeStyle,ye=this.lineCap,Se=this.lineWidth,Te=Math.abs(Se*this.ctx.transform.scaleX),Le=this.lineJoin,He=JSON.parse(JSON.stringify(this.path)),Ye=JSON.parse(JSON.stringify(this.path)),V=[],Ae=0;Ae<Ye.length;Ae++)if(Ye[Ae].x!==void 0)for(var ne=A.call(this,Ye[Ae]),be=0;be<ne.length;be+=1)V.indexOf(ne[be])===-1&&V.push(ne[be]);for(var fe=0;fe<V.length;fe++)for(;this.pdf.internal.getNumberOfPages()<V[fe];)w.call(this);if(j(V),this.autoPaging)for(var ke=V[0],Re=V[V.length-1],qe=ke;qe<Re+1;qe++){this.pdf.setPage(qe),this.fillStyle=oe,this.strokeStyle=Ce,this.lineCap=ye,this.lineWidth=Te,this.lineJoin=Le;var je=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ze=qe===1?this.posY+this.margin[0]:this.margin[0],ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],rt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Pe=qe===1?0:ut+(qe-2)*rt;if(this.ctx.clip_path.length!==0){var ve=this.path;ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(ee,this.posX+this.margin[3],-Pe+Ze+this.ctx.prevPageLastElemOffset),M.call(this,q,!0),this.path=ve}if(re=JSON.parse(JSON.stringify(He)),this.path=C(re,this.posX+this.margin[3],-Pe+Ze+this.ctx.prevPageLastElemOffset),B===!1||qe===0){var Ne=(qe>ke||qe<Re)&&y.call(this);Ne&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],je,rt,null).clip().discardPath()),M.call(this,q,B),Ne&&this.pdf.restoreGraphicsState()}this.lineWidth=Se}else this.lineWidth=Te,M.call(this,q,B),this.lineWidth=Se;this.path=He},M=function(q,B){if((q!=="stroke"||B||!x.call(this))&&(q==="stroke"||B||!g.call(this))){for(var ee,re,oe=[],Ce=this.path,ye=0;ye<Ce.length;ye++){var Se=Ce[ye];switch(Se.type){case"begin":oe.push({begin:!0});break;case"close":oe.push({close:!0});break;case"mt":oe.push({start:Se,deltas:[],abs:[]});break;case"lt":var Te=oe.length;if(Ce[ye-1]&&!isNaN(Ce[ye-1].x)&&(ee=[Se.x-Ce[ye-1].x,Se.y-Ce[ye-1].y],Te>0)){for(;Te>=0;Te--)if(oe[Te-1].close!==!0&&oe[Te-1].begin!==!0){oe[Te-1].deltas.push(ee),oe[Te-1].abs.push(Se);break}}break;case"bct":ee=[Se.x1-Ce[ye-1].x,Se.y1-Ce[ye-1].y,Se.x2-Ce[ye-1].x,Se.y2-Ce[ye-1].y,Se.x-Ce[ye-1].x,Se.y-Ce[ye-1].y],oe[oe.length-1].deltas.push(ee);break;case"qct":var Le=Ce[ye-1].x+2/3*(Se.x1-Ce[ye-1].x),He=Ce[ye-1].y+2/3*(Se.y1-Ce[ye-1].y),Ye=Se.x+2/3*(Se.x1-Se.x),V=Se.y+2/3*(Se.y1-Se.y),Ae=Se.x,ne=Se.y;ee=[Le-Ce[ye-1].x,He-Ce[ye-1].y,Ye-Ce[ye-1].x,V-Ce[ye-1].y,Ae-Ce[ye-1].x,ne-Ce[ye-1].y],oe[oe.length-1].deltas.push(ee);break;case"arc":oe.push({deltas:[],abs:[],arc:!0}),Array.isArray(oe[oe.length-1].abs)&&oe[oe.length-1].abs.push(Se)}}re=B?null:q==="stroke"?"stroke":"fill";for(var be=!1,fe=0;fe<oe.length;fe++)if(oe[fe].arc)for(var ke=oe[fe].abs,Re=0;Re<ke.length;Re++){var qe=ke[Re];qe.type==="arc"?L.call(this,qe.x,qe.y,qe.radius,qe.startAngle,qe.endAngle,qe.counterclockwise,void 0,B,!be):R.call(this,qe.x,qe.y),be=!0}else if(oe[fe].close===!0)this.pdf.internal.out("h"),be=!1;else if(oe[fe].begin!==!0){var je=oe[fe].start.x,Ze=oe[fe].start.y;N.call(this,oe[fe].deltas,je,Ze),be=!0}re&&$.call(this,re),B&&Z.call(this)}},z=function(q){var B=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ee=B*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return q-ee;case"top":return q+B-ee;case"hanging":return q+B-2*ee;case"middle":return q+B/2-ee;case"ideographic":return q;case"alphabetic":default:return q}},_=function(q){return q+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var q=function(){};return q.colorStops=[],q.addColorStop=function(B,ee){this.colorStops.push([B,ee])},q.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},q.isCanvasGradient=!0,q},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var L=function(q,B,ee,re,oe,Ce,ye,Se,Te){for(var Le=W.call(this,ee,re,oe,Ce),He=0;He<Le.length;He++){var Ye=Le[He];He===0&&(Te?O.call(this,Ye.x1+q,Ye.y1+B):R.call(this,Ye.x1+q,Ye.y1+B)),G.call(this,q,B,Ye.x2,Ye.y2,Ye.x3,Ye.y3,Ye.x4,Ye.y4)}Se?Z.call(this):$.call(this,ye)},$=function(q){switch(q){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Z=function(){this.pdf.clip(),this.pdf.discardPath()},O=function(q,B){this.pdf.internal.out(t(q)+" "+r(B)+" m")},T=function(q){var B;switch(q.align){case"right":case"end":B="right";break;case"center":B="center";break;case"left":case"start":default:B="left"}var ee=this.pdf.getTextDimensions(q.text),re=z.call(this,q.y),oe=_.call(this,re)-ee.h,Ce=this.ctx.transform.applyToPoint(new s(q.x,re)),ye=this.ctx.transform.decompose(),Se=new u;Se=(Se=(Se=Se.multiply(ye.translate)).multiply(ye.skew)).multiply(ye.scale);for(var Te,Le,He,Ye=this.ctx.transform.applyToRectangle(new l(q.x,re,ee.w,ee.h)),V=Se.applyToRectangle(new l(q.x,oe,ee.w,ee.h)),Ae=A.call(this,V),ne=[],be=0;be<Ae.length;be+=1)ne.indexOf(Ae[be])===-1&&ne.push(Ae[be]);if(j(ne),this.autoPaging)for(var fe=ne[0],ke=ne[ne.length-1],Re=fe;Re<ke+1;Re++){this.pdf.setPage(Re);var qe=Re===1?this.posY+this.margin[0]:this.margin[0],je=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ze=this.pdf.internal.pageSize.height-this.margin[2],ut=Ze-this.margin[0],rt=this.pdf.internal.pageSize.width-this.margin[1],Pe=rt-this.margin[3],ve=Re===1?0:je+(Re-2)*ut;if(this.ctx.clip_path.length!==0){var Ne=this.path;Te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(Te,this.posX+this.margin[3],-1*ve+qe),M.call(this,"fill",!0),this.path=Ne}var De=C([JSON.parse(JSON.stringify(V))],this.posX+this.margin[3],-ve+qe+this.ctx.prevPageLastElemOffset)[0];q.scale>=.01&&(Le=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Le*q.scale),He=this.lineWidth,this.lineWidth=He*q.scale);var ft=this.autoPaging!=="text";if(ft||De.y+De.h<=Ze){if(ft||De.y>=qe&&De.x<=rt){var et=ft?q.text:this.pdf.splitTextToSize(q.text,q.maxWidth||rt-De.x)[0],Pt=C([JSON.parse(JSON.stringify(Ye))],this.posX+this.margin[3],-ve+qe+this.ctx.prevPageLastElemOffset)[0],Nt=ft&&(Re>fe||Re<ke)&&y.call(this);Nt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pe,ut,null).clip().discardPath()),this.pdf.text(et,Pt.x,Pt.y,{angle:q.angle,align:B,renderingMode:q.renderingMode}),Nt&&this.pdf.restoreGraphicsState()}}else De.y<Ze&&(this.ctx.prevPageLastElemOffset+=Ze-De.y);q.scale>=.01&&(this.pdf.setFontSize(Le),this.lineWidth=He)}else q.scale>=.01&&(Le=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Le*q.scale),He=this.lineWidth,this.lineWidth=He*q.scale),this.pdf.text(q.text,Ce.x+this.posX,Ce.y+this.posY,{angle:q.angle,align:B,renderingMode:q.renderingMode,maxWidth:q.maxWidth}),q.scale>=.01&&(this.pdf.setFontSize(Le),this.lineWidth=He)},R=function(q,B,ee,re){ee=ee||0,re=re||0,this.pdf.internal.out(t(q+ee)+" "+r(B+re)+" l")},N=function(q,B,ee){return this.pdf.lines(q,B,ee,null,null)},G=function(q,B,ee,re,oe,Ce,ye,Se){this.pdf.internal.out([n(i(ee+q)),n(a(re+B)),n(i(oe+q)),n(a(Ce+B)),n(i(ye+q)),n(a(Se+B)),"c"].join(" "))},W=function(q,B,ee,re){for(var oe=2*Math.PI,Ce=Math.PI/2;B>ee;)B-=oe;var ye=Math.abs(ee-B);ye<oe&&re&&(ye=oe-ye);for(var Se=[],Te=re?-1:1,Le=B;ye>1e-5;){var He=Le+Te*Math.min(ye,Ce);Se.push(Q.call(this,q,Le,He)),ye-=Math.abs(He-Le),Le=He}return Se},Q=function(q,B,ee){var re=(ee-B)/2,oe=q*Math.cos(re),Ce=q*Math.sin(re),ye=oe,Se=-Ce,Te=ye*ye+Se*Se,Le=Te+ye*oe+Se*Ce,He=4/3*(Math.sqrt(2*Te*Le)-Le)/(ye*Ce-Se*oe),Ye=ye-He*Se,V=Se+He*ye,Ae=Ye,ne=-V,be=re+B,fe=Math.cos(be),ke=Math.sin(be);return{x1:q*Math.cos(B),y1:q*Math.sin(B),x2:Ye*fe-V*ke,y2:Ye*ke+V*fe,x3:Ae*fe-ne*ke,y3:Ae*ke+ne*fe,x4:q*Math.cos(ee),y4:q*Math.sin(ee)}},J=function(q){return 180*q/Math.PI},se=function(q,B,ee,re,oe,Ce){var ye=q+.5*(ee-q),Se=B+.5*(re-B),Te=oe+.5*(ee-oe),Le=Ce+.5*(re-Ce),He=Math.min(q,oe,ye,Te),Ye=Math.max(q,oe,ye,Te),V=Math.min(B,Ce,Se,Le),Ae=Math.max(B,Ce,Se,Le);return new l(He,V,Ye-He,Ae-V)},U=function(q,B,ee,re,oe,Ce,ye,Se){var Te,Le,He,Ye,V,Ae,ne,be,fe,ke,Re,qe,je,Ze,ut=ee-q,rt=re-B,Pe=oe-ee,ve=Ce-re,Ne=ye-oe,De=Se-Ce;for(Le=0;Le<41;Le++)fe=(ne=(He=q+(Te=Le/40)*ut)+Te*((V=ee+Te*Pe)-He))+Te*(V+Te*(oe+Te*Ne-V)-ne),ke=(be=(Ye=B+Te*rt)+Te*((Ae=re+Te*ve)-Ye))+Te*(Ae+Te*(Ce+Te*De-Ae)-be),Le==0?(Re=fe,qe=ke,je=fe,Ze=ke):(Re=Math.min(Re,fe),qe=Math.min(qe,ke),je=Math.max(je,fe),Ze=Math.max(Ze,ke));return new l(Math.round(Re),Math.round(qe),Math.round(je-Re),Math.round(Ze-qe))},le=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var q,B,ee=(q=this.ctx.lineDash,B=this.ctx.lineDashOffset,JSON.stringify({lineDash:q,lineDashOffset:B}));this.prevLineDash!==ee&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ee)}}})(on.API),function(e){var n=function(a){var s,l,u,d,f,m,b,g,x,y;for(l=[],u=0,d=(a+=s="\0\0\0\0".slice(a.length%4||4)).length;d>u;u+=4)(f=(a.charCodeAt(u)<<24)+(a.charCodeAt(u+1)<<16)+(a.charCodeAt(u+2)<<8)+a.charCodeAt(u+3))!==0?(m=(f=((f=((f=((f=(f-(y=f%85))/85)-(x=f%85))/85)-(g=f%85))/85)-(b=f%85))/85)%85,l.push(m+33,b+33,g+33,x+33,y+33)):l.push(122);return function(A,w){for(var C=w;C>0;C--)A.pop()}(l,s.length),String.fromCharCode.apply(String,l)+"~>"},t=function(a){var s,l,u,d,f,m=String,b="length",g=255,x="charCodeAt",y="slice",A="replace";for(a[y](-2),a=a[y](0,-2)[A](/\s/g,"")[A]("z","!!!!!"),u=[],d=0,f=(a+=s="uuuuu"[y](a[b]%5||5))[b];f>d;d+=5)l=52200625*(a[x](d)-33)+614125*(a[x](d+1)-33)+7225*(a[x](d+2)-33)+85*(a[x](d+3)-33)+(a[x](d+4)-33),u.push(g&l>>24,g&l>>16,g&l>>8,g&l);return function(w,C){for(var j=C;j>0;j--)w.pop()}(u,s[b]),m.fromCharCode.apply(m,u)},r=function(a){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),s.test(a)===!1)return"";for(var l="",u=0;u<a.length;u+=2)l+=String.fromCharCode("0x"+(a[u]+a[u+1]));return l},i=function(a){for(var s=new Uint8Array(a.length),l=a.length;l--;)s[l]=a.charCodeAt(l);return a=(s=FS(s)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};e.processDataByFilters=function(a,s){var l=0,u=a||"",d=[];for(typeof(s=s||[])=="string"&&(s=[s]),l=0;l<s.length;l+=1)switch(s[l]){case"ASCII85Decode":case"/ASCII85Decode":u=t(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=n(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=r(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=u.split("").map(function(f){return("0"+f.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=i(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[l]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}(on.API),function(e){e.loadFile=function(n,t,r){return function(i,a,s){a=a!==!1,s=typeof s=="function"?s:function(){};var l=void 0;try{l=function(u,d,f){var m=new XMLHttpRequest,b=0,g=function(x){var y=x.length,A=[],w=String.fromCharCode;for(b=0;b<y;b+=1)A.push(w(255&x.charCodeAt(b)));return A.join("")};if(m.open("GET",u,!d),m.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(m.onload=function(){m.status===200?f(g(this.responseText)):f(void 0)}),m.send(null),d&&m.status===200)return g(m.responseText)}(i,a,s)}catch{}return l}(n,t,r)},e.loadImageFile=e.loadFile}(on.API),function(e){function n(){return(fn.html2canvas?Promise.resolve(fn.html2canvas):wi(()=>import("./html2canvas.esm-DadlvMMh.js"),[])).catch(function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))}).then(function(s){return s.default?s.default:s})}function t(){return(fn.DOMPurify?Promise.resolve(fn.DOMPurify):wi(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(s){return Promise.reject(new Error("Could not load dompurify: "+s))}).then(function(s){return s.default?s.default:s})}var r=function(s){var l=Xr(s);return l==="undefined"?"undefined":l==="string"||s instanceof String?"string":l==="number"||s instanceof Number?"number":l==="function"||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&s.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(s,l){var u=document.createElement(s);for(var d in l.className&&(u.className=l.className),l.innerHTML&&l.dompurify&&(u.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)u.style[d]=l.style[d];return u},a=function s(l){var u=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),d=s.convert(Promise.resolve(),u);return d=(d=d.setProgress(1,s,1,[s])).set(l)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(s,l){return s.__proto__=l||a.prototype,s},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(s,l){return this.then(function(){switch(l=l||function(u){switch(r(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(s)){case"string":return this.then(t).then(function(u){return this.set({src:i("div",{innerHTML:s,dompurify:u})})});case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}})},a.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var s={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function u(d,f){for(var m=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),b=d.firstChild;b;b=b.nextSibling)f!==!0&&b.nodeType===1&&b.nodeName==="SCRIPT"||m.appendChild(u(b,f));return d.nodeType===1&&(d.nodeName==="CANVAS"?(m.width=d.width,m.height=d.height,m.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(m.value=d.value),m.addEventListener("load",function(){m.scrollTop=d.scrollTop,m.scrollLeft=d.scrollLeft},!0)),m}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(n).then(function(l){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,l(this.prop.container,u)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(n).then(function(l){var u=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var b=0;b<d.length;++b){var g=d[b],x=g.src.find(function(y){return y.format==="truetype"});x&&u.addFont(x.url,g.ref.name,g.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,u.context2d.save(!0),l(this.prop.container,m)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(s,l,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(s,l):this.outputPdf(s,l)},a.prototype.outputPdf=function(s,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(s,l)})},a.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}})},a.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(s){if(r(s)!=="object")return this;var l=Object.keys(s||{}).map(function(u){if(u in a.template.prop)return function(){this.prop[u]=s[u]};switch(u){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[u]=s[u]}}},this);return this.then(function(){return this.thenList(l)})},a.prototype.get=function(s,l){return this.then(function(){var u=s in a.template.prop?this.prop[s]:this.opt[s];return l?l(u):u})},a.prototype.setMargin=function(s){return this.then(function(){switch(r(s)){case"number":s=[s,s,s,s];case"array":if(s.length===2&&(s=[s[0],s[1],s[0],s[1]]),s.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=s}).then(this.setPageSize)},a.prototype.setPageSize=function(s){function l(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(s=s||on.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:l(s.inner.width,s.k),height:l(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s})},a.prototype.setProgress=function(s,l,u,d){return s!=null&&(this.progress.val=s),l!=null&&(this.progress.state=l),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(s,l,u,d){return this.setProgress(s?this.progress.val+s:null,l||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},a.prototype.then=function(s,l){var u=this;return this.thenCore(s,l,function(d,f){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(m){return u.updateProgress(null,d),m}).then(d,f).then(function(m){return u.updateProgress(1),m})})},a.prototype.thenCore=function(s,l,u){u=u||Promise.prototype.then,s&&(s=s.bind(this)),l&&(l=l.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),f=u.call(d,s,l);return a.convert(f,this.__proto__)},a.prototype.thenExternal=function(s,l){return Promise.prototype.then.call(this,s,l)},a.prototype.thenList=function(s){var l=this;return s.forEach(function(u){l=l.thenCore(u)}),l},a.prototype.catch=function(s){s&&(s=s.bind(this));var l=Promise.prototype.catch.call(this,s);return a.convert(l,this)},a.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},a.prototype.error=function(s){return this.then(function(){throw new Error(s)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,on.getPageSize=function(s,l,u){if(Xr(s)==="object"){var d=s;s=d.orientation,l=d.unit||l,u=d.format||u}l=l||"mm",u=u||"a4",s=(""+(s||"P")).toLowerCase();var f,m=(""+u).toLowerCase(),b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+l}var g,x=0,y=0;if(b.hasOwnProperty(m))x=b[m][1]/f,y=b[m][0]/f;else try{x=u[1],y=u[0]}catch{throw new Error("Invalid format: "+u)}if(s==="p"||s==="portrait")s="p",y>x&&(g=y,y=x,x=g);else{if(s!=="l"&&s!=="landscape")throw"Invalid orientation: "+s;s="l",x>y&&(g=y,y=x,x=g)}return{width:y,height:x,unit:l,k:f,orientation:s}},e.html=function(s,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(US):null;var u=new a(l);return l.worker?u:u.from(s).doCallback()}}(on.API),on.API.addJS=function(e){return UE=e,this.internal.events.subscribe("postPutResources",function(){Ty=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ty+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),$E=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+UE+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ty!==void 0&&$E!==void 0&&this.internal.out("/Names <</JavaScript "+Ty+" 0 R>>")}),this},function(e){var n;e.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),a=0;a<i.length;a++){var s=i[a],l=r.exec(s);if(l!=null){var u=l[1];t.internal.newObjectDeferredBegin(u,!1)}t.internal.write(s)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,f=[];for(a=0;a<d;a++){var m=t.internal.newObject();f.push(m);var b=t.internal.getPageInfo(a+1);t.internal.write("<< /D["+b.objId+" 0 R /XYZ null null null]>> endobj")}var g=t.internal.newObject();for(t.internal.write("<< /Names [ "),a=0;a<f.length;a++)t.internal.write("(page_"+(a+1)+")"+f[a]+" 0 R");t.internal.write(" ] >>","endobj"),n=t.internal.newObject(),t.internal.write("<< /Dests "+g+" 0 R"),t.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+n+" 0 R"))}]),e.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,a){var s={title:i,options:a,children:[]};return r==null&&(r=this.root),r.children.push(s),s},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<r.children.length;a++){var s=r.children[a];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(r)),a>0&&this.line("/Prev "+this.makeRef(r.children[a-1])),a<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[a+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var l=this.count=this.count_r({count:0},s);if(l>0&&this.line("/Count "+l),s.options&&s.options.pageNumber){var u=t.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+u.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var d=0;d<r.children.length;d++)this.renderItems(r.children[d])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var a=0;a<i.children.length;a++)r.count++,this.count_r(r,i.children[a]);return r.count}}])}(on.API),function(e){var n=[192,193,194,195,196,197,198,199];e.processJPEG=function(t,r,i,a,s,l){var u,d=this.decode.DCT_DECODE,f=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=s||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(u=function(m){for(var b,g=256*m.charCodeAt(4)+m.charCodeAt(5),x=m.length,y={width:0,height:0,numcomponents:1},A=4;A<x;A+=2){if(A+=g,n.indexOf(m.charCodeAt(A+1))!==-1){b=256*m.charCodeAt(A+5)+m.charCodeAt(A+6),y={width:256*m.charCodeAt(A+7)+m.charCodeAt(A+8),height:b,numcomponents:m.charCodeAt(A+9)};break}g=256*m.charCodeAt(A+2)+m.charCodeAt(A+3)}return y}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}f={data:t,width:u.width,height:u.height,colorSpace:l,bitsPerComponent:8,filter:d,index:r,alias:i}}return f}}(on.API);var l0,Oy,HE,WE,VE,dK=function(){var e,n,t;function r(a){var s,l,u,d,f,m,b,g,x,y,A,w,C,j;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},m=null;;){switch(s=this.readUInt32(),x=(function(){var F,M;for(M=[],F=0;F<4;++F)M.push(String.fromCharCode(this.data[this.pos++]));return M}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(s);break;case"fcTL":m&&this.animation.frames.push(m),this.pos+=4,m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),d=this.readUInt16()||100,m.delay=1e3*f/d,m.disposeOp=this.data[this.pos++],m.blendOp=this.data[this.pos++],m.data=[];break;case"IDAT":case"fdAT":for(x==="fdAT"&&(this.pos+=4,s-=4),a=(m!=null?m.data:void 0)||this.imgData,w=0;0<=s?w<s:w>s;0<=s?++w:--w)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(u=this.palette.length/3,this.transparency.indexed=this.read(s),this.transparency.indexed.length>u)throw new Error("More transparent colors than palette size");if((y=u-this.transparency.indexed.length)>0)for(C=0;0<=y?C<y:C>y;0<=y?++C:--C)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(s)[0];break;case 2:this.transparency.rgb=this.read(s)}break;case"tEXt":b=(A=this.read(s)).indexOf(0),g=String.fromCharCode.apply(String,A.slice(0,b)),this.text[g]=String.fromCharCode.apply(String,A.slice(b+1));break;case"IEND":return m&&this.animation.frames.push(m),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(j=this.colorType)===4||j===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=s}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(a){var s,l;for(l=[],s=0;0<=a?s<a:s>a;0<=a?++s:--s)l.push(this.data[this.pos++]);return l},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(a){var s=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*s),u=0,d=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function f(m,b,g,x){var y,A,w,C,j,F,M,z,_,L,$,Z,O,T,R,N,G,W,Q,J,se,U=Math.ceil((d.width-m)/g),le=Math.ceil((d.height-b)/x),q=d.width==U&&d.height==le;for(T=s*U,Z=q?l:new Uint8Array(T*le),F=a.length,O=0,A=0;O<le&&u<F;){switch(a[u++]){case 0:for(C=G=0;G<T;C=G+=1)Z[A++]=a[u++];break;case 1:for(C=W=0;W<T;C=W+=1)y=a[u++],j=C<s?0:Z[A-s],Z[A++]=(y+j)%256;break;case 2:for(C=Q=0;Q<T;C=Q+=1)y=a[u++],w=(C-C%s)/s,R=O&&Z[(O-1)*T+w*s+C%s],Z[A++]=(R+y)%256;break;case 3:for(C=J=0;J<T;C=J+=1)y=a[u++],w=(C-C%s)/s,j=C<s?0:Z[A-s],R=O&&Z[(O-1)*T+w*s+C%s],Z[A++]=(y+Math.floor((j+R)/2))%256;break;case 4:for(C=se=0;se<T;C=se+=1)y=a[u++],w=(C-C%s)/s,j=C<s?0:Z[A-s],O===0?R=N=0:(R=Z[(O-1)*T+w*s+C%s],N=w&&Z[(O-1)*T+(w-1)*s+C%s]),M=j+R-N,z=Math.abs(M-j),L=Math.abs(M-R),$=Math.abs(M-N),_=z<=L&&z<=$?j:L<=$?R:N,Z[A++]=(y+_)%256;break;default:throw new Error("Invalid filter algorithm: "+a[u-1])}if(!q){var B=((b+O*x)*d.width+m)*s,ee=O*T;for(C=0;C<U;C+=1){for(var re=0;re<s;re+=1)l[B++]=Z[ee++];B+=(g-1)*s}}O++}}return a=UQ(a),d.interlaceMethod==1?(f(0,0,8,8),f(4,0,8,8),f(0,4,4,8),f(2,0,4,4),f(0,2,2,4),f(1,0,2,2),f(0,1,1,2)):f(0,0,1,1),l},r.prototype.decodePalette=function(){var a,s,l,u,d,f,m,b,g;for(l=this.palette,f=this.transparency.indexed||[],d=new Uint8Array((f.length||0)+l.length),u=0,a=0,s=m=0,b=l.length;m<b;s=m+=3)d[u++]=l[s],d[u++]=l[s+1],d[u++]=l[s+2],d[u++]=(g=f[a++])!=null?g:255;return d},r.prototype.copyToImageData=function(a,s){var l,u,d,f,m,b,g,x,y,A,w;if(u=this.colors,y=null,l=this.hasAlphaChannel,this.palette.length&&(y=(w=this._decodedPalette)!=null?w:this._decodedPalette=this.decodePalette(),u=4,l=!0),x=(d=a.data||a).length,m=y||s,f=b=0,u===1)for(;f<x;)g=y?4*s[f/4]:b,A=m[g++],d[f++]=A,d[f++]=A,d[f++]=A,d[f++]=l?m[g++]:255,b=g;else for(;f<x;)g=y?4*s[f/4]:b,d[f++]=m[g++],d[f++]=m[g++],d[f++]=m[g++],d[f++]=l?m[g++]:255,b=g},r.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var i=function(){if(Object.prototype.toString.call(fn)==="[object Window]"){try{n=fn.document.createElement("canvas"),t=n.getContext("2d")}catch{return!1}return!0}return!1};return i(),e=function(a){var s;if(i()===!0)return t.width=a.width,t.height=a.height,t.clearRect(0,0,a.width,a.height),t.putImageData(a,0,0),(s=new Image).src=n.toDataURL(),s;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(a){var s,l,u,d,f,m,b,g;if(this.animation){for(g=[],l=f=0,m=(b=this.animation.frames).length;f<m;l=++f)s=b[l],u=a.createImageData(s.width,s.height),d=this.decodePixels(new Uint8Array(s.data)),this.copyToImageData(u,d),s.imageData=u,g.push(s.image=e(u));return g}},r.prototype.renderFrame=function(a,s){var l,u,d;return l=(u=this.animation.frames)[s],d=u[s-1],s===0&&a.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?a.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&a.putImageData(d.imageData,d.xOffset,d.yOffset),l.blendOp===0&&a.clearRect(l.xOffset,l.yOffset,l.width,l.height),a.drawImage(l.image,l.xOffset,l.yOffset)},r.prototype.animate=function(a){var s,l,u,d,f,m,b=this;return l=0,m=this.animation,d=m.numFrames,u=m.frames,f=m.numPlays,(s=function(){var g,x;if(g=l++%d,x=u[g],b.renderFrame(a,g),d>1&&l/d<f)return b.animation._timeout=setTimeout(s,x.delay)})()},r.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},r.prototype.render=function(a){var s,l;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,s=a.getContext("2d"),this.animation?(this.decodeFrames(s),this.animate(s)):(l=s.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),s.putImageData(l,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function fK(e){var n=0;if(e[n++]!==71||e[n++]!==73||e[n++]!==70||e[n++]!==56||(e[n++]+1&253)!=56||e[n++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=e[n++]|e[n++]<<8,r=e[n++]|e[n++]<<8,i=e[n++],a=i>>7,s=1<<(7&i)+1;e[n++],e[n++];var l=null,u=null;a&&(l=n,u=s,n+=3*s);var d=!0,f=[],m=0,b=null,g=0,x=null;for(this.width=t,this.height=r;d&&n<e.length;)switch(e[n++]){case 33:switch(e[n++]){case 255:if(e[n]!==11||e[n+1]==78&&e[n+2]==69&&e[n+3]==84&&e[n+4]==83&&e[n+5]==67&&e[n+6]==65&&e[n+7]==80&&e[n+8]==69&&e[n+9]==50&&e[n+10]==46&&e[n+11]==48&&e[n+12]==3&&e[n+13]==1&&e[n+16]==0)n+=14,x=e[n++]|e[n++]<<8,n++;else for(n+=12;;){if(!((O=e[n++])>=0))throw Error("Invalid block size");if(O===0)break;n+=O}break;case 249:if(e[n++]!==4||e[n+4]!==0)throw new Error("Invalid graphics extension block.");var y=e[n++];m=e[n++]|e[n++]<<8,b=e[n++],(1&y)==0&&(b=null),g=y>>2&7,n++;break;case 254:for(;;){if(!((O=e[n++])>=0))throw Error("Invalid block size");if(O===0)break;n+=O}break;default:throw new Error("Unknown graphic control label: 0x"+e[n-1].toString(16))}break;case 44:var A=e[n++]|e[n++]<<8,w=e[n++]|e[n++]<<8,C=e[n++]|e[n++]<<8,j=e[n++]|e[n++]<<8,F=e[n++],M=F>>6&1,z=1<<(7&F)+1,_=l,L=u,$=!1;F>>7&&($=!0,_=n,L=z,n+=3*z);var Z=n;for(n++;;){var O;if(!((O=e[n++])>=0))throw Error("Invalid block size");if(O===0)break;n+=O}f.push({x:A,y:w,width:C,height:j,has_local_palette:$,palette_offset:_,palette_size:L,data_offset:Z,data_length:n-Z,transparent_index:b,interlaced:!!M,delay:m,disposal:g});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[n-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return x},this.frameInfo=function(T){if(T<0||T>=f.length)throw new Error("Frame index out of range.");return f[T]},this.decodeAndBlitFrameBGRA=function(T,R){var N=this.frameInfo(T),G=N.width*N.height,W=new Uint8Array(G);YE(e,N.data_offset,W,G);var Q=N.palette_offset,J=N.transparent_index;J===null&&(J=256);var se=N.width,U=t-se,le=se,q=4*(N.y*t+N.x),B=4*((N.y+N.height)*t+N.x),ee=q,re=4*U;N.interlaced===!0&&(re+=4*t*7);for(var oe=8,Ce=0,ye=W.length;Ce<ye;++Ce){var Se=W[Ce];if(le===0&&(le=se,(ee+=re)>=B&&(re=4*U+4*t*(oe-1),ee=q+(se+U)*(oe<<1),oe>>=1)),Se===J)ee+=4;else{var Te=e[Q+3*Se],Le=e[Q+3*Se+1],He=e[Q+3*Se+2];R[ee++]=He,R[ee++]=Le,R[ee++]=Te,R[ee++]=255}--le}},this.decodeAndBlitFrameRGBA=function(T,R){var N=this.frameInfo(T),G=N.width*N.height,W=new Uint8Array(G);YE(e,N.data_offset,W,G);var Q=N.palette_offset,J=N.transparent_index;J===null&&(J=256);var se=N.width,U=t-se,le=se,q=4*(N.y*t+N.x),B=4*((N.y+N.height)*t+N.x),ee=q,re=4*U;N.interlaced===!0&&(re+=4*t*7);for(var oe=8,Ce=0,ye=W.length;Ce<ye;++Ce){var Se=W[Ce];if(le===0&&(le=se,(ee+=re)>=B&&(re=4*U+4*t*(oe-1),ee=q+(se+U)*(oe<<1),oe>>=1)),Se===J)ee+=4;else{var Te=e[Q+3*Se],Le=e[Q+3*Se+1],He=e[Q+3*Se+2];R[ee++]=Te,R[ee++]=Le,R[ee++]=He,R[ee++]=255}--le}}}function YE(e,n,t,r){for(var i=e[n++],a=1<<i,s=a+1,l=s+1,u=i+1,d=(1<<u)-1,f=0,m=0,b=0,g=e[n++],x=new Int32Array(4096),y=null;;){for(;f<16&&g!==0;)m|=e[n++]<<f,f+=8,g===1?g=e[n++]:--g;if(f<u)break;var A=m&d;if(m>>=u,f-=u,A!==a){if(A===s)break;for(var w=A<l?A:y,C=0,j=w;j>a;)j=x[j]>>8,++C;var F=j;if(b+C+(w!==A?1:0)>r)return void Kr.log("Warning, gif stream longer than expected.");t[b++]=F;var M=b+=C;for(w!==A&&(t[b++]=F),j=w;C--;)j=x[j],t[--M]=255&j,j>>=8;y!==null&&l<4096&&(x[l++]=y<<8|F,l>=d+1&&u<12&&(++u,d=d<<1|1)),y=A}else l=s+1,d=(1<<(u=i+1))-1,y=null}return b!==r&&Kr.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function pw(e){var n,t,r,i,a,s=Math.floor,l=new Array(64),u=new Array(64),d=new Array(64),f=new Array(64),m=new Array(65535),b=new Array(65535),g=new Array(64),x=new Array(64),y=[],A=0,w=7,C=new Array(64),j=new Array(64),F=new Array(64),M=new Array(256),z=new Array(2048),_=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],L=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],$=[0,1,2,3,4,5,6,7,8,9,10,11],Z=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],O=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],T=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],N=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],G=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function W(q,B){for(var ee=0,re=0,oe=new Array,Ce=1;Ce<=16;Ce++){for(var ye=1;ye<=q[Ce];ye++)oe[B[re]]=[],oe[B[re]][0]=ee,oe[B[re]][1]=Ce,re++,ee++;ee*=2}return oe}function Q(q){for(var B=q[0],ee=q[1]-1;ee>=0;)B&1<<ee&&(A|=1<<w),ee--,--w<0&&(A==255?(J(255),J(0)):J(A),w=7,A=0)}function J(q){y.push(q)}function se(q){J(q>>8&255),J(255&q)}function U(q,B,ee,re,oe){for(var Ce,ye=oe[0],Se=oe[240],Te=function(ke,Re){var qe,je,Ze,ut,rt,Pe,ve,Ne,De,ft,et=0;for(De=0;De<8;++De){qe=ke[et],je=ke[et+1],Ze=ke[et+2],ut=ke[et+3],rt=ke[et+4],Pe=ke[et+5],ve=ke[et+6];var Pt=qe+(Ne=ke[et+7]),Nt=qe-Ne,Vt=je+ve,Rt=je-ve,Xt=Ze+Pe,nn=Ze-Pe,cn=ut+rt,Pn=ut-rt,zn=Pt+cn,Yr=Pt-cn,ir=Vt+Xt,Rn=Vt-Xt;ke[et]=zn+ir,ke[et+4]=zn-ir;var Yt=.707106781*(Rn+Yr);ke[et+2]=Yr+Yt,ke[et+6]=Yr-Yt;var An=.382683433*((zn=Pn+nn)-(Rn=Rt+Nt)),wa=.5411961*zn+An,wr=1.306562965*Rn+An,oi=.707106781*(ir=nn+Rt),Sa=Nt+oi,Lt=Nt-oi;ke[et+5]=Lt+wa,ke[et+3]=Lt-wa,ke[et+1]=Sa+wr,ke[et+7]=Sa-wr,et+=8}for(et=0,De=0;De<8;++De){qe=ke[et],je=ke[et+8],Ze=ke[et+16],ut=ke[et+24],rt=ke[et+32],Pe=ke[et+40],ve=ke[et+48];var Hn=qe+(Ne=ke[et+56]),ar=qe-Ne,Rr=je+ve,dr=je-ve,fr=Ze+Pe,Un=Ze-Pe,ys=ut+rt,_r=ut-rt,Ia=Hn+ys,qi=Hn-ys,Bi=Rr+fr,Zn=Rr-fr;ke[et]=Ia+Bi,ke[et+32]=Ia-Bi;var ki=.707106781*(Zn+qi);ke[et+16]=qi+ki,ke[et+48]=qi-ki;var Jn=.382683433*((Ia=_r+Un)-(Zn=dr+ar)),no=.5411961*Ia+Jn,Co=1.306562965*Zn+Jn,Fa=.707106781*(Bi=Un+dr),Mr=ar+Fa,tl=ar-Fa;ke[et+40]=tl+no,ke[et+24]=tl-no,ke[et+8]=Mr+Co,ke[et+56]=Mr-Co,et++}for(De=0;De<64;++De)ft=ke[De]*Re[De],g[De]=ft>0?ft+.5|0:ft-.5|0;return g}(q,B),Le=0;Le<64;++Le)x[_[Le]]=Te[Le];var He=x[0]-ee;ee=x[0],He==0?Q(re[0]):(Q(re[b[Ce=32767+He]]),Q(m[Ce]));for(var Ye=63;Ye>0&&x[Ye]==0;)Ye--;if(Ye==0)return Q(ye),ee;for(var V,Ae=1;Ae<=Ye;){for(var ne=Ae;x[Ae]==0&&Ae<=Ye;)++Ae;var be=Ae-ne;if(be>=16){V=be>>4;for(var fe=1;fe<=V;++fe)Q(Se);be&=15}Ce=32767+x[Ae],Q(oe[(be<<4)+b[Ce]]),Q(m[Ce]),Ae++}return Ye!=63&&Q(ye),ee}function le(q){q=Math.min(Math.max(q,1),100),a!=q&&(function(B){for(var ee=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],re=0;re<64;re++){var oe=s((ee[re]*B+50)/100);oe=Math.min(Math.max(oe,1),255),l[_[re]]=oe}for(var Ce=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ye=0;ye<64;ye++){var Se=s((Ce[ye]*B+50)/100);Se=Math.min(Math.max(Se,1),255),u[_[ye]]=Se}for(var Te=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Le=0,He=0;He<8;He++)for(var Ye=0;Ye<8;Ye++)d[Le]=1/(l[_[Le]]*Te[He]*Te[Ye]*8),f[Le]=1/(u[_[Le]]*Te[He]*Te[Ye]*8),Le++}(q<50?Math.floor(5e3/q):Math.floor(200-2*q)),a=q)}this.encode=function(q,B){B&&le(B),y=new Array,A=0,w=7,se(65496),se(65504),se(16),J(74),J(70),J(73),J(70),J(0),J(1),J(1),J(0),se(1),se(1),J(0),J(0),function(){se(65499),se(132),J(0);for(var je=0;je<64;je++)J(l[je]);J(1);for(var Ze=0;Ze<64;Ze++)J(u[Ze])}(),function(je,Ze){se(65472),se(17),J(8),se(Ze),se(je),J(3),J(1),J(17),J(0),J(2),J(17),J(1),J(3),J(17),J(1)}(q.width,q.height),function(){se(65476),se(418),J(0);for(var je=0;je<16;je++)J(L[je+1]);for(var Ze=0;Ze<=11;Ze++)J($[Ze]);J(16);for(var ut=0;ut<16;ut++)J(Z[ut+1]);for(var rt=0;rt<=161;rt++)J(O[rt]);J(1);for(var Pe=0;Pe<16;Pe++)J(T[Pe+1]);for(var ve=0;ve<=11;ve++)J(R[ve]);J(17);for(var Ne=0;Ne<16;Ne++)J(N[Ne+1]);for(var De=0;De<=161;De++)J(G[De])}(),se(65498),se(12),J(3),J(1),J(0),J(2),J(17),J(3),J(17),J(0),J(63),J(0);var ee=0,re=0,oe=0;A=0,w=7,this.encode.displayName="_encode_";for(var Ce,ye,Se,Te,Le,He,Ye,V,Ae,ne=q.data,be=q.width,fe=q.height,ke=4*be,Re=0;Re<fe;){for(Ce=0;Ce<ke;){for(Le=ke*Re+Ce,Ye=-1,V=0,Ae=0;Ae<64;Ae++)He=Le+(V=Ae>>3)*ke+(Ye=4*(7&Ae)),Re+V>=fe&&(He-=ke*(Re+1+V-fe)),Ce+Ye>=ke&&(He-=Ce+Ye-ke+4),ye=ne[He++],Se=ne[He++],Te=ne[He++],C[Ae]=(z[ye]+z[Se+256>>0]+z[Te+512>>0]>>16)-128,j[Ae]=(z[ye+768>>0]+z[Se+1024>>0]+z[Te+1280>>0]>>16)-128,F[Ae]=(z[ye+1280>>0]+z[Se+1536>>0]+z[Te+1792>>0]>>16)-128;ee=U(C,d,ee,n,r),re=U(j,f,re,t,i),oe=U(F,f,oe,t,i),Ce+=32}Re+=8}if(w>=0){var qe=[];qe[1]=w+1,qe[0]=(1<<w+1)-1,Q(qe)}return se(65497),new Uint8Array(y)},e=e||50,function(){for(var q=String.fromCharCode,B=0;B<256;B++)M[B]=q(B)}(),n=W(L,$),t=W(T,R),r=W(Z,O),i=W(N,G),function(){for(var q=1,B=2,ee=1;ee<=15;ee++){for(var re=q;re<B;re++)b[32767+re]=ee,m[32767+re]=[],m[32767+re][1]=ee,m[32767+re][0]=re;for(var oe=-(B-1);oe<=-q;oe++)b[32767+oe]=ee,m[32767+oe]=[],m[32767+oe][1]=ee,m[32767+oe][0]=B-1+oe;q<<=1,B<<=1}}(),function(){for(var q=0;q<256;q++)z[q]=19595*q,z[q+256>>0]=38470*q,z[q+512>>0]=7471*q+32768,z[q+768>>0]=-11059*q,z[q+1024>>0]=-21709*q,z[q+1280>>0]=32768*q+8421375,z[q+1536>>0]=-27439*q,z[q+1792>>0]=-5329*q}(),le(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function uu(e,n){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!n,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function GE(e){function n(L){if(!L)throw Error("assert :P")}function t(L,$,Z){for(var O=0;4>O;O++)if(L[$+O]!=Z.charCodeAt(O))return!0;return!1}function r(L,$,Z,O,T){for(var R=0;R<T;R++)L[$+R]=Z[O+R]}function i(L,$,Z,O){for(var T=0;T<O;T++)L[$+T]=Z}function a(L){return new Int32Array(L)}function s(L,$){for(var Z=[],O=0;O<L;O++)Z.push(new $);return Z}function l(L,$){var Z=[];return function O(T,R,N){for(var G=N[R],W=0;W<G&&(T.push(N.length>R+1?[]:new $),!(N.length<R+1));W++)O(T[W],R+1,N)}(Z,0,L),Z}var u=function(){var L=this;function $(S,E){for(var P=1<<E-1>>>0;S&P;)P>>>=1;return P?(S&P-1)+P:S}function Z(S,E,P,Y,ie){n(!(Y%P));do S[E+(Y-=P)]=ie;while(0<Y)}function O(S,E,P,Y,ie){if(n(2328>=ie),512>=ie)var ue=a(512);else if((ue=a(ie))==null)return 0;return function(ce,pe,xe,Ee,Fe,Xe){var Qe,We,yt=pe,at=1<<xe,ze=a(16),Ue=a(16);for(n(Fe!=0),n(Ee!=null),n(ce!=null),n(0<xe),We=0;We<Fe;++We){if(15<Ee[We])return 0;++ze[Ee[We]]}if(ze[0]==Fe)return 0;for(Ue[1]=0,Qe=1;15>Qe;++Qe){if(ze[Qe]>1<<Qe)return 0;Ue[Qe+1]=Ue[Qe]+ze[Qe]}for(We=0;We<Fe;++We)Qe=Ee[We],0<Ee[We]&&(Xe[Ue[Qe]++]=We);if(Ue[15]==1)return(Ee=new T).g=0,Ee.value=Xe[0],Z(ce,yt,1,at,Ee),at;var pt,xt=-1,gt=at-1,Dt=0,jt=1,Gt=1,Tt=1<<xe;for(We=0,Qe=1,Fe=2;Qe<=xe;++Qe,Fe<<=1){if(jt+=Gt<<=1,0>(Gt-=ze[Qe]))return 0;for(;0<ze[Qe];--ze[Qe])(Ee=new T).g=Qe,Ee.value=Xe[We++],Z(ce,yt+Dt,Fe,Tt,Ee),Dt=$(Dt,Qe)}for(Qe=xe+1,Fe=2;15>=Qe;++Qe,Fe<<=1){if(jt+=Gt<<=1,0>(Gt-=ze[Qe]))return 0;for(;0<ze[Qe];--ze[Qe]){if(Ee=new T,(Dt&gt)!=xt){for(yt+=Tt,pt=1<<(xt=Qe)-xe;15>xt&&!(0>=(pt-=ze[xt]));)++xt,pt<<=1;at+=Tt=1<<(pt=xt-xe),ce[pe+(xt=Dt&gt)].g=pt+xe,ce[pe+xt].value=yt-pe-xt}Ee.g=Qe-xe,Ee.value=Xe[We++],Z(ce,yt+(Dt>>xe),Fe,Tt,Ee),Dt=$(Dt,Qe)}}return jt!=2*Ue[15]-1?0:at}(S,E,P,Y,ie,ue)}function T(){this.value=this.g=0}function R(){this.value=this.g=0}function N(){this.G=s(5,T),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(ra,R)}function G(S,E,P,Y){n(S!=null),n(E!=null),n(2147483648>Y),S.Ca=254,S.I=0,S.b=-8,S.Ka=0,S.oa=E,S.pa=P,S.Jd=E,S.Yc=P+Y,S.Zc=4<=Y?P+Y-4+1:P,Ce(S)}function W(S,E){for(var P=0;0<E--;)P|=Se(S,128)<<E;return P}function Q(S,E){var P=W(S,E);return ye(S)?-P:P}function J(S,E,P,Y){var ie,ue=0;for(n(S!=null),n(E!=null),n(4294967288>Y),S.Sb=Y,S.Ra=0,S.u=0,S.h=0,4<Y&&(Y=4),ie=0;ie<Y;++ie)ue+=E[P+ie]<<8*ie;S.Ra=ue,S.bb=Y,S.oa=E,S.pa=P}function se(S){for(;8<=S.u&&S.bb<S.Sb;)S.Ra>>>=8,S.Ra+=S.oa[S.pa+S.bb]<<Vc-8>>>0,++S.bb,S.u-=8;ee(S)&&(S.h=1,S.u=0)}function U(S,E){if(n(0<=E),!S.h&&E<=Wc){var P=B(S)&Lu[E];return S.u+=E,se(S),P}return S.h=1,S.u=0}function le(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function q(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function B(S){return S.Ra>>>(S.u&Vc-1)>>>0}function ee(S){return n(S.bb<=S.Sb),S.h||S.bb==S.Sb&&S.u>Vc}function re(S,E){S.u=E,S.h=ee(S)}function oe(S){S.u>=Zd&&(n(S.u>=Zd),se(S))}function Ce(S){n(S!=null&&S.oa!=null),S.pa<S.Zc?(S.I=(S.oa[S.pa++]|S.I<<8)>>>0,S.b+=8):(n(S!=null&&S.oa!=null),S.pa<S.Yc?(S.b+=8,S.I=S.oa[S.pa++]|S.I<<8):S.Ka?S.b=0:(S.I<<=8,S.b+=8,S.Ka=1))}function ye(S){return W(S,1)}function Se(S,E){var P=S.Ca;0>S.b&&Ce(S);var Y=S.b,ie=P*E>>>8,ue=(S.I>>>Y>ie)+0;for(ue?(P-=ie,S.I-=ie+1<<Y>>>0):P=ie+1,Y=P,ie=0;256<=Y;)ie+=8,Y>>=8;return Y=7^ie+ks[Y],S.b-=Y,S.Ca=(P<<Y)-1,ue}function Te(S,E,P){S[E+0]=P>>24&255,S[E+1]=P>>16&255,S[E+2]=P>>8&255,S[E+3]=P>>0&255}function Le(S,E){return S[E+0]<<0|S[E+1]<<8}function He(S,E){return Le(S,E)|S[E+2]<<16}function Ye(S,E){return Le(S,E)|Le(S,E+2)<<16}function V(S,E){var P=1<<E;return n(S!=null),n(0<E),S.X=a(P),S.X==null?0:(S.Mb=32-E,S.Xa=E,1)}function Ae(S,E){n(S!=null),n(E!=null),n(S.Xa==E.Xa),r(E.X,0,S.X,0,1<<E.Xa)}function ne(){this.X=[],this.Xa=this.Mb=0}function be(S,E,P,Y){n(P!=null),n(Y!=null);var ie=P[0],ue=Y[0];return ie==0&&(ie=(S*ue+E/2)/E),ue==0&&(ue=(E*ie+S/2)/S),0>=ie||0>=ue?0:(P[0]=ie,Y[0]=ue,1)}function fe(S,E){return S+(1<<E)-1>>>E}function ke(S,E){return((4278255360&S)+(4278255360&E)>>>0&4278255360)+((16711935&S)+(16711935&E)>>>0&16711935)>>>0}function Re(S,E){L[E]=function(P,Y,ie,ue,ce,pe,xe){var Ee;for(Ee=0;Ee<ce;++Ee){var Fe=L[S](pe[xe+Ee-1],ie,ue+Ee);pe[xe+Ee]=ke(P[Y+Ee],Fe)}}}function qe(){this.ud=this.hd=this.jd=0}function je(S,E){return((4278124286&(S^E))>>>1)+(S&E)>>>0}function Ze(S){return 0<=S&&256>S?S:0>S?0:255<S?255:void 0}function ut(S,E){return Ze(S+(S-E+.5>>1))}function rt(S,E,P){return Math.abs(E-P)-Math.abs(S-P)}function Pe(S,E,P,Y,ie,ue,ce){for(Y=ue[ce-1],P=0;P<ie;++P)ue[ce+P]=Y=ke(S[E+P],Y)}function ve(S,E,P,Y,ie){var ue;for(ue=0;ue<P;++ue){var ce=S[E+ue],pe=ce>>8&255,xe=16711935&(xe=(xe=16711935&ce)+((pe<<16)+pe));Y[ie+ue]=(4278255360&ce)+xe>>>0}}function Ne(S,E){E.jd=S>>0&255,E.hd=S>>8&255,E.ud=S>>16&255}function De(S,E,P,Y,ie,ue){var ce;for(ce=0;ce<Y;++ce){var pe=E[P+ce],xe=pe>>>8,Ee=pe,Fe=255&(Fe=(Fe=pe>>>16)+((S.jd<<24>>24)*(xe<<24>>24)>>>5));Ee=255&(Ee=(Ee=Ee+((S.hd<<24>>24)*(xe<<24>>24)>>>5))+((S.ud<<24>>24)*(Fe<<24>>24)>>>5)),ie[ue+ce]=(4278255360&pe)+(Fe<<16)+Ee}}function ft(S,E,P,Y,ie){L[E]=function(ue,ce,pe,xe,Ee,Fe,Xe,Qe,We){for(xe=Xe;xe<Qe;++xe)for(Xe=0;Xe<We;++Xe)Ee[Fe++]=ie(pe[Y(ue[ce++])])},L[S]=function(ue,ce,pe,xe,Ee,Fe,Xe){var Qe=8>>ue.b,We=ue.Ea,yt=ue.K[0],at=ue.w;if(8>Qe)for(ue=(1<<ue.b)-1,at=(1<<Qe)-1;ce<pe;++ce){var ze,Ue=0;for(ze=0;ze<We;++ze)ze&ue||(Ue=Y(xe[Ee++])),Fe[Xe++]=ie(yt[Ue&at]),Ue>>=Qe}else L["VP8LMapColor"+P](xe,Ee,yt,at,Fe,Xe,ce,pe,We)}}function et(S,E,P,Y,ie){for(P=E+P;E<P;){var ue=S[E++];Y[ie++]=ue>>16&255,Y[ie++]=ue>>8&255,Y[ie++]=ue>>0&255}}function Pt(S,E,P,Y,ie){for(P=E+P;E<P;){var ue=S[E++];Y[ie++]=ue>>16&255,Y[ie++]=ue>>8&255,Y[ie++]=ue>>0&255,Y[ie++]=ue>>24&255}}function Nt(S,E,P,Y,ie){for(P=E+P;E<P;){var ue=(ce=S[E++])>>16&240|ce>>12&15,ce=ce>>0&240|ce>>28&15;Y[ie++]=ue,Y[ie++]=ce}}function Vt(S,E,P,Y,ie){for(P=E+P;E<P;){var ue=(ce=S[E++])>>16&248|ce>>13&7,ce=ce>>5&224|ce>>3&31;Y[ie++]=ue,Y[ie++]=ce}}function Rt(S,E,P,Y,ie){for(P=E+P;E<P;){var ue=S[E++];Y[ie++]=ue>>0&255,Y[ie++]=ue>>8&255,Y[ie++]=ue>>16&255}}function Xt(S,E,P,Y,ie,ue){if(ue==0)for(P=E+P;E<P;)Te(Y,((ue=S[E++])[0]>>24|ue[1]>>8&65280|ue[2]<<8&16711680|ue[3]<<24)>>>0),ie+=32;else r(Y,ie,S,E,P)}function nn(S,E){L[E][0]=L[S+"0"],L[E][1]=L[S+"1"],L[E][2]=L[S+"2"],L[E][3]=L[S+"3"],L[E][4]=L[S+"4"],L[E][5]=L[S+"5"],L[E][6]=L[S+"6"],L[E][7]=L[S+"7"],L[E][8]=L[S+"8"],L[E][9]=L[S+"9"],L[E][10]=L[S+"10"],L[E][11]=L[S+"11"],L[E][12]=L[S+"12"],L[E][13]=L[S+"13"],L[E][14]=L[S+"0"],L[E][15]=L[S+"0"]}function cn(S){return S==bh||S==Hu||S==Ql||S==nf}function Pn(){this.eb=[],this.size=this.A=this.fb=0}function zn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Yr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Pn,this.f.kb=new zn,this.sd=null}function ir(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Rn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Yt(S){return alert("todo:WebPSamplerProcessPlane"),S.T}function An(S,E){var P=S.T,Y=E.ba.f.RGBA,ie=Y.eb,ue=Y.fb+S.ka*Y.A,ce=_a[E.ba.S],pe=S.y,xe=S.O,Ee=S.f,Fe=S.N,Xe=S.ea,Qe=S.W,We=E.cc,yt=E.dc,at=E.Mc,ze=E.Nc,Ue=S.ka,pt=S.ka+S.T,xt=S.U,gt=xt+1>>1;for(Ue==0?ce(pe,xe,null,null,Ee,Fe,Xe,Qe,Ee,Fe,Xe,Qe,ie,ue,null,null,xt):(ce(E.ec,E.fc,pe,xe,We,yt,at,ze,Ee,Fe,Xe,Qe,ie,ue-Y.A,ie,ue,xt),++P);Ue+2<pt;Ue+=2)We=Ee,yt=Fe,at=Xe,ze=Qe,Fe+=S.Rc,Qe+=S.Rc,ue+=2*Y.A,ce(pe,(xe+=2*S.fa)-S.fa,pe,xe,We,yt,at,ze,Ee,Fe,Xe,Qe,ie,ue-Y.A,ie,ue,xt);return xe+=S.fa,S.j+pt<S.o?(r(E.ec,E.fc,pe,xe,xt),r(E.cc,E.dc,Ee,Fe,gt),r(E.Mc,E.Nc,Xe,Qe,gt),P--):1&pt||ce(pe,xe,null,null,Ee,Fe,Xe,Qe,Ee,Fe,Xe,Qe,ie,ue+Y.A,null,null,xt),P}function wa(S,E,P){var Y=S.F,ie=[S.J];if(Y!=null){var ue=S.U,ce=E.ba.S,pe=ce==Xc||ce==Ql;E=E.ba.f.RGBA;var xe=[0],Ee=S.ka;xe[0]=S.T,S.Kb&&(Ee==0?--xe[0]:(--Ee,ie[0]-=S.width),S.j+S.ka+S.T==S.o&&(xe[0]=S.o-S.j-Ee));var Fe=E.eb;Ee=E.fb+Ee*E.A,S=Ln(Y,ie[0],S.width,ue,xe,Fe,Ee+(pe?0:3),E.A),n(P==xe),S&&cn(ce)&&Ks(Fe,Ee,pe,ue,xe,E.A)}return 0}function wr(S){var E=S.ma,P=E.ba.S,Y=11>P,ie=P==tf||P==gh||P==Xc||P==Gl||P==12||cn(P);if(E.memory=null,E.Ib=null,E.Jb=null,E.Nd=null,!Iu(E.Oa,S,ie?11:12))return 0;if(ie&&cn(P)&&At(),S.da)alert("todo:use_scaling");else{if(Y){if(E.Ib=Yt,S.Kb){if(P=S.U+1>>1,E.memory=a(S.U+2*P),E.memory==null)return 0;E.ec=E.memory,E.fc=0,E.cc=E.ec,E.dc=E.fc+S.U,E.Mc=E.cc,E.Nc=E.dc+P,E.Ib=An,At()}}else alert("todo:EmitYUV");ie&&(E.Jb=wa,Y&&Ge())}if(Y&&!mb){for(S=0;256>S;++S)y2[S]=89858*(S-128)+aa>>ml,vh[S]=-22014*(S-128)+aa,km[S]=-45773*(S-128),sa[S]=113618*(S-128)+aa>>ml;for(S=Yu;S<Fp;++S)E=76283*(S-16)+aa>>ml,wh[S-Yu]=Qs(E,255),Em[S-Yu]=Qs(E+8>>4,15);mb=1}return 1}function oi(S){var E=S.ma,P=S.U,Y=S.T;return n(!(1&S.ka)),0>=P||0>=Y?0:(P=E.Ib(S,E),E.Jb!=null&&E.Jb(S,E,P),E.Dc+=P,1)}function Sa(S){S.ma.memory=null}function Lt(S,E,P,Y){return U(S,8)!=47?0:(E[0]=U(S,14)+1,P[0]=U(S,14)+1,Y[0]=U(S,1),U(S,3)!=0?0:!S.h)}function Hn(S,E){if(4>S)return S+1;var P=S-2>>1;return(2+(1&S)<<P)+U(E,P)+1}function ar(S,E){return 120<E?E-120:1<=(P=((P=Xl[E-1])>>4)*S+(8-(15&P)))?P:1;var P}function Rr(S,E,P){var Y=B(P),ie=S[E+=255&Y].g-8;return 0<ie&&(re(P,P.u+8),Y=B(P),E+=S[E].value,E+=Y&(1<<ie)-1),re(P,P.u+S[E].g),S[E].value}function dr(S,E,P){return P.g+=S.g,P.value+=S.value<<E>>>0,n(8>=P.g),S.g}function fr(S,E,P){var Y=S.xc;return n((E=Y==0?0:S.vc[S.md*(P>>Y)+(E>>Y)])<S.Wb),S.Ya[E]}function Un(S,E,P,Y){var ie=S.ab,ue=S.c*E,ce=S.C;E=ce+E;var pe=P,xe=Y;for(Y=S.Ta,P=S.Ua;0<ie--;){var Ee=S.gc[ie],Fe=ce,Xe=E,Qe=pe,We=xe,yt=(xe=Y,pe=P,Ee.Ea);switch(n(Fe<Xe),n(Xe<=Ee.nc),Ee.hc){case 2:Tp(Qe,We,(Xe-Fe)*yt,xe,pe);break;case 0:var at=Fe,ze=Xe,Ue=xe,pt=pe,xt=(Tt=Ee).Ea;at==0&&(Am(Qe,We,null,null,1,Ue,pt),Pe(Qe,We+1,0,0,xt-1,Ue,pt+1),We+=xt,pt+=xt,++at);for(var gt=1<<Tt.b,Dt=gt-1,jt=fe(xt,Tt.b),Gt=Tt.K,Tt=Tt.w+(at>>Tt.b)*jt;at<ze;){var Vn=Gt,sr=Tt,Dn=1;for(ph(Qe,We,Ue,pt-xt,1,Ue,pt);Dn<xt;){var On=(Dn&~Dt)+gt;On>xt&&(On=xt),(0,Wl[Vn[sr++]>>8&15])(Qe,We+ +Dn,Ue,pt+Dn-xt,On-Dn,Ue,pt+Dn),Dn=On}We+=xt,pt+=xt,++at&Dt||(Tt+=jt)}Xe!=Ee.nc&&r(xe,pe-yt,xe,pe+(Xe-Fe-1)*yt,yt);break;case 1:for(yt=Qe,ze=We,xt=(Qe=Ee.Ea)-(pt=Qe&~(Ue=(We=1<<Ee.b)-1)),at=fe(Qe,Ee.b),gt=Ee.K,Ee=Ee.w+(Fe>>Ee.b)*at;Fe<Xe;){for(Dt=gt,jt=Ee,Gt=new qe,Tt=ze+pt,Vn=ze+Qe;ze<Tt;)Ne(Dt[jt++],Gt),Mu(Gt,yt,ze,We,xe,pe),ze+=We,pe+=We;ze<Vn&&(Ne(Dt[jt++],Gt),Mu(Gt,yt,ze,xt,xe,pe),ze+=xt,pe+=xt),++Fe&Ue||(Ee+=at)}break;case 3:if(Qe==xe&&We==pe&&0<Ee.b){for(ze=xe,Qe=yt=pe+(Xe-Fe)*yt-(pt=(Xe-Fe)*fe(Ee.Ea,Ee.b)),We=xe,Ue=pe,at=[],pt=(xt=pt)-1;0<=pt;--pt)at[pt]=We[Ue+pt];for(pt=xt-1;0<=pt;--pt)ze[Qe+pt]=at[pt];oo(Ee,Fe,Xe,xe,yt,xe,pe)}else oo(Ee,Fe,Xe,Qe,We,xe,pe)}pe=Y,xe=P}xe!=P&&r(Y,P,pe,xe,ue)}function ys(S,E){var P=S.V,Y=S.Ba+S.c*S.C,ie=E-S.C;if(n(E<=S.l.o),n(16>=ie),0<ie){var ue=S.l,ce=S.Ta,pe=S.Ua,xe=ue.width;if(Un(S,ie,P,Y),ie=pe=[pe],n((P=S.C)<(Y=E)),n(ue.v<ue.va),Y>ue.o&&(Y=ue.o),P<ue.j){var Ee=ue.j-P;P=ue.j,ie[0]+=Ee*xe}if(P>=Y?P=0:(ie[0]+=4*ue.v,ue.ka=P-ue.j,ue.U=ue.va-ue.v,ue.T=Y-P,P=1),P){if(pe=pe[0],11>(P=S.ca).S){var Fe=P.f.RGBA,Xe=(Y=P.S,ie=ue.U,ue=ue.T,Ee=Fe.eb,Fe.A),Qe=ue;for(Fe=Fe.fb+S.Ma*Fe.A;0<Qe--;){var We=ce,yt=pe,at=ie,ze=Ee,Ue=Fe;switch(Y){case Wa:os(We,yt,at,ze,Ue);break;case tf:Ra(We,yt,at,ze,Ue);break;case bh:Ra(We,yt,at,ze,Ue),Ks(ze,Ue,0,at,1,0);break;case dl:Do(We,yt,at,ze,Ue);break;case gh:Xt(We,yt,at,ze,Ue,1);break;case Hu:Xt(We,yt,at,ze,Ue,1),Ks(ze,Ue,0,at,1,0);break;case Xc:Xt(We,yt,at,ze,Ue,0);break;case Ql:Xt(We,yt,at,ze,Ue,0),Ks(ze,Ue,1,at,1,0);break;case Gl:Fu(We,yt,at,ze,Ue);break;case nf:Fu(We,yt,at,ze,Ue),In(ze,Ue,at,1,0);break;case Dp:Es(We,yt,at,ze,Ue);break;default:n(0)}pe+=xe,Fe+=Xe}S.Ma+=ue}else alert("todo:EmitRescaledRowsYUVA");n(S.Ma<=P.height)}}S.C=E,n(S.C<=S.i)}function _r(S){var E;if(0<S.ua)return 0;for(E=0;E<S.Wb;++E){var P=S.Ya[E].G,Y=S.Ya[E].H;if(0<P[1][Y[1]+0].g||0<P[2][Y[2]+0].g||0<P[3][Y[3]+0].g)return 0}return 1}function Ia(S,E,P,Y,ie,ue){if(S.Z!=0){var ce=S.qd,pe=S.rd;for(n(hl[S.Z]!=null);E<P;++E)hl[S.Z](ce,pe,Y,ie,Y,ie,ue),ce=Y,pe=ie,ie+=ue;S.qd=ce,S.rd=pe}}function qi(S,E){var P=S.l.ma,Y=P.Z==0||P.Z==1?S.l.j:S.C;if(Y=S.C<Y?Y:S.C,n(E<=S.l.o),E>Y){var ie=S.l.width,ue=P.ca,ce=P.tb+ie*Y,pe=S.V,xe=S.Ba+S.c*Y,Ee=S.gc;n(S.ab==1),n(Ee[0].hc==3),Ru(Ee[0],Y,E,pe,xe,ue,ce),Ia(P,Y,E,ue,ce,ie)}S.C=S.Ma=E}function Bi(S,E,P,Y,ie,ue,ce){var pe=S.$/Y,xe=S.$%Y,Ee=S.m,Fe=S.s,Xe=P+S.$,Qe=Xe;ie=P+Y*ie;var We=P+Y*ue,yt=280+Fe.ua,at=S.Pb?pe:16777216,ze=0<Fe.ua?Fe.Wa:null,Ue=Fe.wc,pt=Xe<We?fr(Fe,xe,pe):null;n(S.C<ue),n(We<=ie);var xt=!1;e:for(;;){for(;xt||Xe<We;){var gt=0;if(pe>=at){var Dt=Xe-P;n((at=S).Pb),at.wd=at.m,at.xd=Dt,0<at.s.ua&&Ae(at.s.Wa,at.s.vb),at=pe+fb}if(xe&Ue||(pt=fr(Fe,xe,pe)),n(pt!=null),pt.Qb&&(E[Xe]=pt.qb,xt=!0),!xt)if(oe(Ee),pt.jc){gt=Ee,Dt=E;var jt=Xe,Gt=pt.pd[B(gt)&ra-1];n(pt.jc),256>Gt.g?(re(gt,gt.u+Gt.g),Dt[jt]=Gt.value,gt=0):(re(gt,gt.u+Gt.g-256),n(256<=Gt.value),gt=Gt.value),gt==0&&(xt=!0)}else gt=Rr(pt.G[0],pt.H[0],Ee);if(Ee.h)break;if(xt||256>gt){if(!xt)if(pt.nd)E[Xe]=(pt.qb|gt<<8)>>>0;else{if(oe(Ee),xt=Rr(pt.G[1],pt.H[1],Ee),oe(Ee),Dt=Rr(pt.G[2],pt.H[2],Ee),jt=Rr(pt.G[3],pt.H[3],Ee),Ee.h)break;E[Xe]=(jt<<24|xt<<16|gt<<8|Dt)>>>0}if(xt=!1,++Xe,++xe>=Y&&(xe=0,++pe,ce!=null&&pe<=ue&&!(pe%16)&&ce(S,pe),ze!=null))for(;Qe<Xe;)gt=E[Qe++],ze.X[(506832829*gt&4294967295)>>>ze.Mb]=gt}else if(280>gt){if(gt=Hn(gt-256,Ee),Dt=Rr(pt.G[4],pt.H[4],Ee),oe(Ee),Dt=ar(Y,Dt=Hn(Dt,Ee)),Ee.h)break;if(Xe-P<Dt||ie-Xe<gt)break e;for(jt=0;jt<gt;++jt)E[Xe+jt]=E[Xe+jt-Dt];for(Xe+=gt,xe+=gt;xe>=Y;)xe-=Y,++pe,ce!=null&&pe<=ue&&!(pe%16)&&ce(S,pe);if(n(Xe<=ie),xe&Ue&&(pt=fr(Fe,xe,pe)),ze!=null)for(;Qe<Xe;)gt=E[Qe++],ze.X[(506832829*gt&4294967295)>>>ze.Mb]=gt}else{if(!(gt<yt))break e;for(xt=gt-280,n(ze!=null);Qe<Xe;)gt=E[Qe++],ze.X[(506832829*gt&4294967295)>>>ze.Mb]=gt;gt=Xe,n(!(xt>>>(Dt=ze).Xa)),E[gt]=Dt.X[xt],xt=!0}xt||n(Ee.h==ee(Ee))}if(S.Pb&&Ee.h&&Xe<ie)n(S.m.h),S.a=5,S.m=S.wd,S.$=S.xd,0<S.s.ua&&Ae(S.s.vb,S.s.Wa);else{if(Ee.h)break e;ce!=null&&ce(S,pe>ue?ue:pe),S.a=0,S.$=Xe-P}return 1}return S.a=3,0}function Zn(S){n(S!=null),S.vc=null,S.yc=null,S.Ya=null;var E=S.Wa;E!=null&&(E.X=null),S.vb=null,n(S!=null)}function ki(){var S=new Sm;return S==null?null:(S.a=0,S.xb=rf,nn("Predictor","VP8LPredictors"),nn("Predictor","VP8LPredictors_C"),nn("PredictorAdd","VP8LPredictorsAdd"),nn("PredictorAdd","VP8LPredictorsAdd_C"),Tp=ve,Mu=De,os=et,Ra=Pt,Fu=Nt,Es=Vt,Do=Rt,L.VP8LMapColor32b=ka,L.VP8LMapColor8b=mh,S)}function Jn(S,E,P,Y,ie){var ue=1,ce=[S],pe=[E],xe=Y.m,Ee=Y.s,Fe=null,Xe=0;e:for(;;){if(P)for(;ue&&U(xe,1);){var Qe=ce,We=pe,yt=Y,at=1,ze=yt.m,Ue=yt.gc[yt.ab],pt=U(ze,2);if(yt.Oc&1<<pt)ue=0;else{switch(yt.Oc|=1<<pt,Ue.hc=pt,Ue.Ea=Qe[0],Ue.nc=We[0],Ue.K=[null],++yt.ab,n(4>=yt.ab),pt){case 0:case 1:Ue.b=U(ze,3)+2,at=Jn(fe(Ue.Ea,Ue.b),fe(Ue.nc,Ue.b),0,yt,Ue.K),Ue.K=Ue.K[0];break;case 3:var xt,gt=U(ze,8)+1,Dt=16<gt?0:4<gt?1:2<gt?2:3;if(Qe[0]=fe(Ue.Ea,Dt),Ue.b=Dt,xt=at=Jn(gt,1,0,yt,Ue.K)){var jt,Gt=gt,Tt=Ue,Vn=1<<(8>>Tt.b),sr=a(Vn);if(sr==null)xt=0;else{var Dn=Tt.K[0],On=Tt.w;for(sr[0]=Tt.K[0][0],jt=1;jt<1*Gt;++jt)sr[jt]=ke(Dn[On+jt],sr[jt-1]);for(;jt<4*Vn;++jt)sr[jt]=0;Tt.K[0]=null,Tt.K[0]=sr,xt=1}}at=xt;break;case 2:break;default:n(0)}ue=at}}if(ce=ce[0],pe=pe[0],ue&&U(xe,1)&&!(ue=1<=(Xe=U(xe,4))&&11>=Xe)){Y.a=3;break e}var Cr;if(Cr=ue)t:{var or,yn,jr,en=Y,dn=ce,Wn=pe,Yn=Xe,Na=P,oa=en.m,Ti=en.s,Oi=[null],Hi=1,fo=0,lr=Jc[Yn];n:for(;;){if(Na&&U(oa,1)){var Wi=U(oa,3)+2,Ro=fe(dn,Wi),Gu=fe(Wn,Wi),nd=Ro*Gu;if(!Jn(Ro,Gu,0,en,Oi))break n;for(Oi=Oi[0],Ti.xc=Wi,or=0;or<nd;++or){var Qu=Oi[or]>>8&65535;Oi[or]=Qu,Qu>=Hi&&(Hi=Qu+1)}}if(oa.h)break n;for(yn=0;5>yn;++yn){var ti=Xs[yn];!yn&&0<Yn&&(ti+=1<<Yn),fo<ti&&(fo=ti)}var Sh=s(Hi*lr,T),Pp=Hi,us=s(Pp,N);if(us==null)var ci=null;else n(65536>=Pp),ci=us;var rd=a(fo);if(ci==null||rd==null||Sh==null){en.a=1;break n}var Ku=Sh;for(or=jr=0;or<Hi;++or){var Ns=ci[or],Xu=Ns.G,js=Ns.H,Ah=0,sf=1,zp=0;for(yn=0;5>yn;++yn){ti=Xs[yn],Xu[yn]=Ku,js[yn]=jr,!yn&&0<Yn&&(ti+=1<<Yn);i:{var Ch,qp=ti,kh=en,of=rd,yb=Ku,xb=jr,Eh=0,tu=kh.m,v2=U(tu,1);if(i(of,0,0,qp),v2){var vb=U(tu,1)+1,wb=U(tu,1),_m=U(tu,wb==0?1:8);of[_m]=1,vb==2&&(of[_m=U(tu,8)]=1);var lf=1}else{var Nm=a(19),jm=U(tu,4)+4;if(19<jm){kh.a=3;var _h=0;break i}for(Ch=0;Ch<jm;++Ch)Nm[Kl[Ch]]=U(tu,3);var Bp=void 0,uf=void 0,Sb=kh,Ab=Nm,nu=qp,Nh=of,$p=0,Mo=Sb.m,cf=8,Tm=s(128,T);r:for(;O(Tm,0,7,Ab,19);){if(U(Mo,1)){var Cb=2+2*U(Mo,3);if((Bp=2+U(Mo,Cb))>nu)break r}else Bp=nu;for(uf=0;uf<nu&&Bp--;){oe(Mo);var Om=Tm[0+(127&B(Mo))];re(Mo,Mo.u+Om.g);var id=Om.value;if(16>id)Nh[uf++]=id,id!=0&&(cf=id);else{var kb=id==16,Dm=id-16,Im=co[Dm],Lm=U(Mo,Ip[Dm])+Im;if(uf+Lm>nu)break r;for(var Eb=kb?cf:0;0<Lm--;)Nh[uf++]=Eb}}$p=1;break r}$p||(Sb.a=3),lf=$p}(lf=lf&&!tu.h)&&(Eh=O(yb,xb,8,of,qp)),lf&&Eh!=0?_h=Eh:(kh.a=3,_h=0)}if(_h==0)break n;if(sf&&Zc[yn]==1&&(sf=Ku[jr].g==0),Ah+=Ku[jr].g,jr+=_h,3>=yn){var ad,Up=rd[0];for(ad=1;ad<ti;++ad)rd[ad]>Up&&(Up=rd[ad]);zp+=Up}}if(Ns.nd=sf,Ns.Qb=0,sf&&(Ns.qb=(Xu[3][js[3]+0].value<<24|Xu[1][js[1]+0].value<<16|Xu[2][js[2]+0].value)>>>0,Ah==0&&256>Xu[0][js[0]+0].value&&(Ns.Qb=1,Ns.qb+=Xu[0][js[0]+0].value<<8)),Ns.jc=!Ns.Qb&&6>zp,Ns.jc){var jh,ru=Ns;for(jh=0;jh<ra;++jh){var gl=jh,iu=ru.pd[gl],Th=ru.G[0][ru.H[0]+gl];256<=Th.value?(iu.g=Th.g+256,iu.value=Th.value):(iu.g=0,iu.value=0,gl>>=dr(Th,8,iu),gl>>=dr(ru.G[1][ru.H[1]+gl],16,iu),gl>>=dr(ru.G[2][ru.H[2]+gl],0,iu),dr(ru.G[3][ru.H[3]+gl],24,iu))}}}Ti.vc=Oi,Ti.Wb=Hi,Ti.Ya=ci,Ti.yc=Sh,Cr=1;break t}Cr=0}if(!(ue=Cr)){Y.a=3;break e}if(0<Xe){if(Ee.ua=1<<Xe,!V(Ee.Wa,Xe)){Y.a=1,ue=0;break e}}else Ee.ua=0;var Oh=Y,Rm=ce,_b=pe,Mm=Oh.s,Fm=Mm.xc;if(Oh.c=Rm,Oh.i=_b,Mm.md=fe(Rm,Fm),Mm.wc=Fm==0?-1:(1<<Fm)-1,P){Y.xb=pb;break e}if((Fe=a(ce*pe))==null){Y.a=1,ue=0;break e}ue=(ue=Bi(Y,Fe,0,ce,pe,pe,null))&&!xe.h;break e}return ue?(ie!=null?ie[0]=Fe:(n(Fe==null),n(P)),Y.$=0,P||Zn(Ee)):Zn(Ee),ue}function no(S,E){var P=S.c*S.i,Y=P+E+16*E;return n(S.c<=E),S.V=a(Y),S.V==null?(S.Ta=null,S.Ua=0,S.a=1,0):(S.Ta=S.V,S.Ua=S.Ba+P+E,1)}function Co(S,E){var P=S.C,Y=E-P,ie=S.V,ue=S.Ba+S.c*P;for(n(E<=S.l.o);0<Y;){var ce=16<Y?16:Y,pe=S.l.ma,xe=S.l.width,Ee=xe*ce,Fe=pe.ca,Xe=pe.tb+xe*P,Qe=S.Ta,We=S.Ua;Un(S,ce,ie,ue),Pr(Qe,We,Fe,Xe,Ee),Ia(pe,P,P+ce,Fe,Xe,xe),Y-=ce,ie+=ce*S.c,P+=ce}n(P==E),S.C=S.Ma=E}function Fa(){this.ub=this.yd=this.td=this.Rb=0}function Mr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function tl(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function zl(){this.Yb=function(){var S=[];return function E(P,Y,ie){for(var ue=ie[Y],ce=0;ce<ue&&(P.push(ie.length>Y+1?[]:0),!(ie.length<Y+1));ce++)E(P[ce],Y+1,ie)}(S,0,[3,11]),S}()}function ju(){this.jb=a(3),this.Wc=l([4,8],zl),this.Xc=l([4,17],zl)}function Bc(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Us(){this.ld=this.La=this.dd=this.tc=0}function xs(){this.Na=this.la=0}function Pa(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function vs(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function is(){this.uc=this.M=this.Nb=0,this.wa=Array(new Us),this.Y=0,this.ya=Array(new vs),this.aa=0,this.l=new ro}function as(){this.y=a(16),this.f=a(8),this.ea=a(8)}function ql(){this.cb=this.a=0,this.sc="",this.m=new le,this.Od=new Fa,this.Kc=new Mr,this.ed=new Bc,this.Qa=new tl,this.Ic=this.$c=this.Aa=0,this.D=new is,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,le),this.ia=0,this.pb=s(4,Pa),this.Pa=new ju,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new as),this.Hd=0,this.rb=Array(new xs),this.sb=0,this.wa=Array(new Us),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new vs),this.L=this.aa=0,this.gd=l([4,2],Us),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ro(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function $c(){var S=new ql;return S!=null&&(S.a=0,S.sc="OK",S.cb=0,S.Xb=0,ia||(ia=nl)),S}function Fr(S,E,P){return S.a==0&&(S.a=E,S.sc=P,S.cb=0),0}function ta(S,E,P){return 3<=P&&S[E+0]==157&&S[E+1]==1&&S[E+2]==42}function io(S,E){if(S==null)return 0;if(S.a=0,S.sc="OK",E==null)return Fr(S,2,"null VP8Io passed to VP8GetHeaders()");var P=E.data,Y=E.w,ie=E.ha;if(4>ie)return Fr(S,7,"Truncated header.");var ue=P[Y+0]|P[Y+1]<<8|P[Y+2]<<16,ce=S.Od;if(ce.Rb=!(1&ue),ce.td=ue>>1&7,ce.yd=ue>>4&1,ce.ub=ue>>5,3<ce.td)return Fr(S,3,"Incorrect keyframe parameters.");if(!ce.yd)return Fr(S,4,"Frame not displayable.");Y+=3,ie-=3;var pe=S.Kc;if(ce.Rb){if(7>ie)return Fr(S,7,"cannot parse picture header");if(!ta(P,Y,ie))return Fr(S,3,"Bad code word");pe.c=16383&(P[Y+4]<<8|P[Y+3]),pe.Td=P[Y+4]>>6,pe.i=16383&(P[Y+6]<<8|P[Y+5]),pe.Ud=P[Y+6]>>6,Y+=7,ie-=7,S.za=pe.c+15>>4,S.Ub=pe.i+15>>4,E.width=pe.c,E.height=pe.i,E.Da=0,E.j=0,E.v=0,E.va=E.width,E.o=E.height,E.da=0,E.ib=E.width,E.hb=E.height,E.U=E.width,E.T=E.height,i((ue=S.Pa).jb,0,255,ue.jb.length),n((ue=S.Qa)!=null),ue.Cb=0,ue.Bb=0,ue.Fb=1,i(ue.Zb,0,0,ue.Zb.length),i(ue.Lb,0,0,ue.Lb)}if(ce.ub>ie)return Fr(S,7,"bad partition length");G(ue=S.m,P,Y,ce.ub),Y+=ce.ub,ie-=ce.ub,ce.Rb&&(pe.Ld=ye(ue),pe.Kd=ye(ue)),pe=S.Qa;var xe,Ee=S.Pa;if(n(ue!=null),n(pe!=null),pe.Cb=ye(ue),pe.Cb){if(pe.Bb=ye(ue),ye(ue)){for(pe.Fb=ye(ue),xe=0;4>xe;++xe)pe.Zb[xe]=ye(ue)?Q(ue,7):0;for(xe=0;4>xe;++xe)pe.Lb[xe]=ye(ue)?Q(ue,6):0}if(pe.Bb)for(xe=0;3>xe;++xe)Ee.jb[xe]=ye(ue)?W(ue,8):255}else pe.Bb=0;if(ue.Ka)return Fr(S,3,"cannot parse segment header");if((pe=S.ed).zd=ye(ue),pe.Tb=W(ue,6),pe.wb=W(ue,3),pe.Pc=ye(ue),pe.Pc&&ye(ue)){for(Ee=0;4>Ee;++Ee)ye(ue)&&(pe.vd[Ee]=Q(ue,6));for(Ee=0;4>Ee;++Ee)ye(ue)&&(pe.od[Ee]=Q(ue,6))}if(S.L=pe.Tb==0?0:pe.zd?1:2,ue.Ka)return Fr(S,3,"cannot parse filter header");var Fe=ie;if(ie=xe=Y,Y=xe+Fe,pe=Fe,S.Xb=(1<<W(S.m,2))-1,Fe<3*(Ee=S.Xb))P=7;else{for(xe+=3*Ee,pe-=3*Ee,Fe=0;Fe<Ee;++Fe){var Xe=P[ie+0]|P[ie+1]<<8|P[ie+2]<<16;Xe>pe&&(Xe=pe),G(S.Jc[+Fe],P,xe,Xe),xe+=Xe,pe-=Xe,ie+=3}G(S.Jc[+Ee],P,xe,pe),P=xe<Y?0:5}if(P!=0)return Fr(S,P,"cannot parse partitions");for(P=W(xe=S.m,7),ie=ye(xe)?Q(xe,4):0,Y=ye(xe)?Q(xe,4):0,pe=ye(xe)?Q(xe,4):0,Ee=ye(xe)?Q(xe,4):0,xe=ye(xe)?Q(xe,4):0,Fe=S.Qa,Xe=0;4>Xe;++Xe){if(Fe.Cb){var Qe=Fe.Zb[Xe];Fe.Fb||(Qe+=P)}else{if(0<Xe){S.pb[Xe]=S.pb[0];continue}Qe=P}var We=S.pb[Xe];We.Sc[0]=yh[Qs(Qe+ie,127)],We.Sc[1]=xh[Qs(Qe+0,127)],We.Eb[0]=2*yh[Qs(Qe+Y,127)],We.Eb[1]=101581*xh[Qs(Qe+pe,127)]>>16,8>We.Eb[1]&&(We.Eb[1]=8),We.Qc[0]=yh[Qs(Qe+Ee,117)],We.Qc[1]=xh[Qs(Qe+xe,127)],We.lc=Qe+xe}if(!ce.Rb)return Fr(S,4,"Not a key frame.");for(ye(ue),ce=S.Pa,P=0;4>P;++P){for(ie=0;8>ie;++ie)for(Y=0;3>Y;++Y)for(pe=0;11>pe;++pe)Ee=Se(ue,ed[P][ie][Y][pe])?W(ue,8):fl[P][ie][Y][pe],ce.Wc[P][ie].Yb[Y][pe]=Ee;for(ie=0;17>ie;++ie)ce.Xc[P][ie]=ce.Wc[P][hb[ie]]}return S.kc=ye(ue),S.kc&&(S.Bd=W(ue,8)),S.cb=1}function nl(S,E,P,Y,ie,ue,ce){var pe=E[ie].Yb[P];for(P=0;16>ie;++ie){if(!Se(S,pe[P+0]))return ie;for(;!Se(S,pe[P+1]);)if(pe=E[++ie].Yb[0],P=0,ie==16)return 16;var xe=E[ie+1].Yb;if(Se(S,pe[P+2])){var Ee=S,Fe=0;if(Se(Ee,(Qe=pe)[(Xe=P)+3]))if(Se(Ee,Qe[Xe+6])){for(pe=0,Xe=2*(Fe=Se(Ee,Qe[Xe+8]))+(Qe=Se(Ee,Qe[Xe+9+Fe])),Fe=0,Qe=bi[Xe];Qe[pe];++pe)Fe+=Fe+Se(Ee,Qe[pe]);Fe+=3+(8<<Xe)}else Se(Ee,Qe[Xe+7])?(Fe=7+2*Se(Ee,165),Fe+=Se(Ee,145)):Fe=5+Se(Ee,159);else Fe=Se(Ee,Qe[Xe+4])?3+Se(Ee,Qe[Xe+5]):2;pe=xe[2]}else Fe=1,pe=xe[1];xe=ce+er[ie],0>(Ee=S).b&&Ce(Ee);var Xe,Qe=Ee.b,We=(Xe=Ee.Ca>>1)-(Ee.I>>Qe)>>31;--Ee.b,Ee.Ca+=We,Ee.Ca|=1,Ee.I-=(Xe+1&We)<<Qe,ue[xe]=((Fe^We)-We)*Y[(0<ie)+0]}return 16}function za(S){var E=S.rb[S.sb-1];E.la=0,E.Na=0,i(S.zc,0,0,S.zc.length),S.ja=0}function Bl(S,E){if(S==null)return 0;if(E==null)return Fr(S,2,"NULL VP8Io parameter in VP8Decode().");if(!S.cb&&!io(S,E))return 0;if(n(S.cb),E.ac==null||E.ac(E)){E.ob&&(S.L=0);var P=eu[S.L];if(S.L==2?(S.yb=0,S.zb=0):(S.yb=E.v-P>>4,S.zb=E.j-P>>4,0>S.yb&&(S.yb=0),0>S.zb&&(S.zb=0)),S.Va=E.o+15+P>>4,S.Hb=E.va+15+P>>4,S.Hb>S.za&&(S.Hb=S.za),S.Va>S.Ub&&(S.Va=S.Ub),0<S.L){var Y=S.ed;for(P=0;4>P;++P){var ie;if(S.Qa.Cb){var ue=S.Qa.Lb[P];S.Qa.Fb||(ue+=Y.Tb)}else ue=Y.Tb;for(ie=0;1>=ie;++ie){var ce=S.gd[P][ie],pe=ue;if(Y.Pc&&(pe+=Y.vd[0],ie&&(pe+=Y.od[0])),0<(pe=0>pe?0:63<pe?63:pe)){var xe=pe;0<Y.wb&&(xe=4<Y.wb?xe>>2:xe>>1)>9-Y.wb&&(xe=9-Y.wb),1>xe&&(xe=1),ce.dd=xe,ce.tc=2*pe+xe,ce.ld=40<=pe?2:15<=pe?1:0}else ce.tc=0;ce.La=ie}}}P=0}else Fr(S,6,"Frame setup failed"),P=S.a;if(P=P==0){if(P){S.$c=0,0<S.Aa||(S.Ic=gb);e:{P=S.Ic,Y=4*(xe=S.za);var Ee=32*xe,Fe=xe+1,Xe=0<S.L?xe*(0<S.Aa?2:1):0,Qe=(S.Aa==2?2:1)*xe;if((ce=Y+832+(ie=3*(16*P+eu[S.L])/2*Ee)+(ue=S.Fa!=null&&0<S.Fa.length?S.Kc.c*S.Kc.i:0))!=ce)P=0;else{if(ce>S.Vb){if(S.Vb=0,S.Ec=a(ce),S.Fc=0,S.Ec==null){P=Fr(S,1,"no memory during frame initialization.");break e}S.Vb=ce}ce=S.Ec,pe=S.Fc,S.Ac=ce,S.Bc=pe,pe+=Y,S.Gd=s(Ee,as),S.Hd=0,S.rb=s(Fe+1,xs),S.sb=1,S.wa=Xe?s(Xe,Us):null,S.Y=0,S.D.Nb=0,S.D.wa=S.wa,S.D.Y=S.Y,0<S.Aa&&(S.D.Y+=xe),n(!0),S.oc=ce,S.pc=pe,pe+=832,S.ya=s(Qe,vs),S.aa=0,S.D.ya=S.ya,S.D.aa=S.aa,S.Aa==2&&(S.D.aa+=xe),S.R=16*xe,S.B=8*xe,xe=(Ee=eu[S.L])*S.R,Ee=Ee/2*S.B,S.sa=ce,S.ta=pe+xe,S.qa=S.sa,S.ra=S.ta+16*P*S.R+Ee,S.Ha=S.qa,S.Ia=S.ra+8*P*S.B+Ee,S.$c=0,pe+=ie,S.mb=ue?ce:null,S.nb=ue?pe:null,n(pe+ue<=S.Fc+S.Vb),za(S),i(S.Ac,S.Bc,0,Y),P=1}}if(P){if(E.ka=0,E.y=S.sa,E.O=S.ta,E.f=S.qa,E.N=S.ra,E.ea=S.Ha,E.Vd=S.Ia,E.fa=S.R,E.Rc=S.B,E.F=null,E.J=0,!Yl){for(P=-255;255>=P;++P)ji[255+P]=0>P?-P:P;for(P=-1020;1020>=P;++P)lo[1020+P]=-128>P?-128:127<P?127:P;for(P=-112;112>=P;++P)$u[112+P]=-16>P?-16:15<P?15:P;for(P=-255;510>=P;++P)Uu[255+P]=0>P?0:255<P?255:P;Yl=1}ul=$i,Io=Eo,Lo=Hs,Ui=Tu,_s=Ws,mi=$l,Yc=Gr,cl=Ha,Jd=Wd,Pu=ll,zu=Gs,qu=Cs,Gc=jo,ef=jp,Bu=pr,Vl=bn,Qc=Nr,gi=Aa,ls[0]=Ei,ls[1]=ws,ls[2]=ao,ls[3]=sl,ls[4]=Ba,ls[5]=$a,ls[6]=_o,ls[7]=La,ls[8]=No,ls[9]=Ua,Zl[0]=al,Zl[1]=qa,Zl[2]=Vs,Zl[3]=il,Zl[4]=li,Zl[5]=Jr,Zl[6]=Ss,Zs[0]=H,Zs[1]=Ou,Zs[2]=ol,Zs[3]=so,Zs[4]=Ie,Zs[5]=ge,Zs[6]=lt,P=1}else P=0}P&&(P=function(We,yt){for(We.M=0;We.M<We.Va;++We.M){var at,ze=We.Jc[We.M&We.Xb],Ue=We.m,pt=We;for(at=0;at<pt.za;++at){var xt=Ue,gt=pt,Dt=gt.Ac,jt=gt.Bc+4*at,Gt=gt.zc,Tt=gt.ya[gt.aa+at];if(gt.Qa.Bb?Tt.$b=Se(xt,gt.Pa.jb[0])?2+Se(xt,gt.Pa.jb[2]):Se(xt,gt.Pa.jb[1]):Tt.$b=0,gt.kc&&(Tt.Ad=Se(xt,gt.Bd)),Tt.Za=!Se(xt,145)+0,Tt.Za){var Vn=Tt.Ob,sr=0;for(gt=0;4>gt;++gt){var Dn,On=Gt[0+gt];for(Dn=0;4>Dn;++Dn){On=Cm[Dt[jt+Dn]][On];for(var Cr=Wu[Se(xt,On[0])];0<Cr;)Cr=Wu[2*Cr+Se(xt,On[Cr])];On=-Cr,Dt[jt+Dn]=On}r(Vn,sr,Dt,jt,4),sr+=4,Gt[0+gt]=On}}else On=Se(xt,156)?Se(xt,128)?1:3:Se(xt,163)?2:0,Tt.Ob[0]=On,i(Dt,jt,On,4),i(Gt,0,On,4);Tt.Dd=Se(xt,142)?Se(xt,114)?Se(xt,183)?1:3:2:0}if(pt.m.Ka)return Fr(We,7,"Premature end-of-partition0 encountered.");for(;We.ja<We.za;++We.ja){if(pt=ze,xt=(Ue=We).rb[Ue.sb-1],Dt=Ue.rb[Ue.sb+Ue.ja],at=Ue.ya[Ue.aa+Ue.ja],jt=Ue.kc?at.Ad:0)xt.la=Dt.la=0,at.Za||(xt.Na=Dt.Na=0),at.Hc=0,at.Gc=0,at.ia=0;else{var or,yn;if(xt=Dt,Dt=pt,jt=Ue.Pa.Xc,Gt=Ue.ya[Ue.aa+Ue.ja],Tt=Ue.pb[Gt.$b],gt=Gt.ad,Vn=0,sr=Ue.rb[Ue.sb-1],On=Dn=0,i(gt,Vn,0,384),Gt.Za)var jr=0,en=jt[3];else{Cr=a(16);var dn=xt.Na+sr.Na;if(dn=ia(Dt,jt[1],dn,Tt.Eb,0,Cr,0),xt.Na=sr.Na=(0<dn)+0,1<dn)ul(Cr,0,gt,Vn);else{var Wn=Cr[0]+3>>3;for(Cr=0;256>Cr;Cr+=16)gt[Vn+Cr]=Wn}jr=1,en=jt[0]}var Yn=15&xt.la,Na=15&sr.la;for(Cr=0;4>Cr;++Cr){var oa=1&Na;for(Wn=yn=0;4>Wn;++Wn)Yn=Yn>>1|(oa=(dn=ia(Dt,en,dn=oa+(1&Yn),Tt.Sc,jr,gt,Vn))>jr)<<7,yn=yn<<2|(3<dn?3:1<dn?2:gt[Vn+0]!=0),Vn+=16;Yn>>=4,Na=Na>>1|oa<<7,Dn=(Dn<<8|yn)>>>0}for(en=Yn,jr=Na>>4,or=0;4>or;or+=2){for(yn=0,Yn=xt.la>>4+or,Na=sr.la>>4+or,Cr=0;2>Cr;++Cr){for(oa=1&Na,Wn=0;2>Wn;++Wn)dn=oa+(1&Yn),Yn=Yn>>1|(oa=0<(dn=ia(Dt,jt[2],dn,Tt.Qc,0,gt,Vn)))<<3,yn=yn<<2|(3<dn?3:1<dn?2:gt[Vn+0]!=0),Vn+=16;Yn>>=2,Na=Na>>1|oa<<5}On|=yn<<4*or,en|=Yn<<4<<or,jr|=(240&Na)<<or}xt.la=en,sr.la=jr,Gt.Hc=Dn,Gt.Gc=On,Gt.ia=43690&On?0:Tt.ia,jt=!(Dn|On)}if(0<Ue.L&&(Ue.wa[Ue.Y+Ue.ja]=Ue.gd[at.$b][at.Za],Ue.wa[Ue.Y+Ue.ja].La|=!jt),pt.Ka)return Fr(We,7,"Premature end-of-file encountered.")}if(za(We),Ue=yt,pt=1,at=(ze=We).D,xt=0<ze.L&&ze.M>=ze.zb&&ze.M<=ze.Va,ze.Aa==0)e:{if(at.M=ze.M,at.uc=xt,Hl(ze,at),pt=1,at=(yn=ze.D).Nb,xt=(On=eu[ze.L])*ze.R,Dt=On/2*ze.B,Cr=16*at*ze.R,Wn=8*at*ze.B,jt=ze.sa,Gt=ze.ta-xt+Cr,Tt=ze.qa,gt=ze.ra-Dt+Wn,Vn=ze.Ha,sr=ze.Ia-Dt+Wn,Na=(Yn=yn.M)==0,Dn=Yn>=ze.Va-1,ze.Aa==2&&Hl(ze,yn),yn.uc)for(oa=(dn=ze).D.M,n(dn.D.uc),yn=dn.yb;yn<dn.Hb;++yn){jr=yn,en=oa;var Ti=(Oi=(ti=dn).D).Nb;or=ti.R;var Oi=Oi.wa[Oi.Y+jr],Hi=ti.sa,fo=ti.ta+16*Ti*or+16*jr,lr=Oi.dd,Wi=Oi.tc;if(Wi!=0)if(n(3<=Wi),ti.L==1)0<jr&&Vl(Hi,fo,or,Wi+4),Oi.La&&gi(Hi,fo,or,Wi),0<en&&Bu(Hi,fo,or,Wi+4),Oi.La&&Qc(Hi,fo,or,Wi);else{var Ro=ti.B,Gu=ti.qa,nd=ti.ra+8*Ti*Ro+8*jr,Qu=ti.Ha,ti=ti.Ia+8*Ti*Ro+8*jr;Ti=Oi.ld,0<jr&&(cl(Hi,fo,or,Wi+4,lr,Ti),Pu(Gu,nd,Qu,ti,Ro,Wi+4,lr,Ti)),Oi.La&&(qu(Hi,fo,or,Wi,lr,Ti),ef(Gu,nd,Qu,ti,Ro,Wi,lr,Ti)),0<en&&(Yc(Hi,fo,or,Wi+4,lr,Ti),Jd(Gu,nd,Qu,ti,Ro,Wi+4,lr,Ti)),Oi.La&&(zu(Hi,fo,or,Wi,lr,Ti),Gc(Gu,nd,Qu,ti,Ro,Wi,lr,Ti))}}if(ze.ia&&alert("todo:DitherRow"),Ue.put!=null){if(yn=16*Yn,Yn=16*(Yn+1),Na?(Ue.y=ze.sa,Ue.O=ze.ta+Cr,Ue.f=ze.qa,Ue.N=ze.ra+Wn,Ue.ea=ze.Ha,Ue.W=ze.Ia+Wn):(yn-=On,Ue.y=jt,Ue.O=Gt,Ue.f=Tt,Ue.N=gt,Ue.ea=Vn,Ue.W=sr),Dn||(Yn-=On),Yn>Ue.o&&(Yn=Ue.o),Ue.F=null,Ue.J=null,ze.Fa!=null&&0<ze.Fa.length&&yn<Yn&&(Ue.J=fh(ze,Ue,yn,Yn-yn),Ue.F=ze.mb,Ue.F==null&&Ue.F.length==0)){pt=Fr(ze,3,"Could not decode alpha data.");break e}yn<Ue.j&&(On=Ue.j-yn,yn=Ue.j,n(!(1&On)),Ue.O+=ze.R*On,Ue.N+=ze.B*(On>>1),Ue.W+=ze.B*(On>>1),Ue.F!=null&&(Ue.J+=Ue.width*On)),yn<Yn&&(Ue.O+=Ue.v,Ue.N+=Ue.v>>1,Ue.W+=Ue.v>>1,Ue.F!=null&&(Ue.J+=Ue.v),Ue.ka=yn-Ue.j,Ue.U=Ue.va-Ue.v,Ue.T=Yn-yn,pt=Ue.put(Ue))}at+1!=ze.Ic||Dn||(r(ze.sa,ze.ta-xt,jt,Gt+16*ze.R,xt),r(ze.qa,ze.ra-Dt,Tt,gt+8*ze.B,Dt),r(ze.Ha,ze.Ia-Dt,Vn,sr+8*ze.B,Dt))}if(!pt)return Fr(We,6,"Output aborted.")}return 1}(S,E)),E.bc!=null&&E.bc(E),P&=1}return P?(S.cb=0,P):0}function na(S,E,P,Y,ie){ie=S[E+P+32*Y]+(ie>>3),S[E+P+32*Y]=-256&ie?0>ie?0:255:ie}function rl(S,E,P,Y,ie,ue){na(S,E,0,P,Y+ie),na(S,E,1,P,Y+ue),na(S,E,2,P,Y-ue),na(S,E,3,P,Y-ie)}function hr(S){return(20091*S>>16)+S}function ko(S,E,P,Y){var ie,ue=0,ce=a(16);for(ie=0;4>ie;++ie){var pe=S[E+0]+S[E+8],xe=S[E+0]-S[E+8],Ee=(35468*S[E+4]>>16)-hr(S[E+12]),Fe=hr(S[E+4])+(35468*S[E+12]>>16);ce[ue+0]=pe+Fe,ce[ue+1]=xe+Ee,ce[ue+2]=xe-Ee,ce[ue+3]=pe-Fe,ue+=4,E++}for(ie=ue=0;4>ie;++ie)pe=(S=ce[ue+0]+4)+ce[ue+8],xe=S-ce[ue+8],Ee=(35468*ce[ue+4]>>16)-hr(ce[ue+12]),na(P,Y,0,0,pe+(Fe=hr(ce[ue+4])+(35468*ce[ue+12]>>16))),na(P,Y,1,0,xe+Ee),na(P,Y,2,0,xe-Ee),na(P,Y,3,0,pe-Fe),ue++,Y+=32}function $l(S,E,P,Y){var ie=S[E+0]+4,ue=35468*S[E+4]>>16,ce=hr(S[E+4]),pe=35468*S[E+1]>>16;rl(P,Y,0,ie+ce,S=hr(S[E+1]),pe),rl(P,Y,1,ie+ue,S,pe),rl(P,Y,2,ie-ue,S,pe),rl(P,Y,3,ie-ce,S,pe)}function Eo(S,E,P,Y,ie){ko(S,E,P,Y),ie&&ko(S,E+16,P,Y+4)}function Hs(S,E,P,Y){Io(S,E+0,P,Y,1),Io(S,E+32,P,Y+128,1)}function Tu(S,E,P,Y){var ie;for(S=S[E+0]+4,ie=0;4>ie;++ie)for(E=0;4>E;++E)na(P,Y,E,ie,S)}function Ws(S,E,P,Y){S[E+0]&&Ui(S,E+0,P,Y),S[E+16]&&Ui(S,E+16,P,Y+4),S[E+32]&&Ui(S,E+32,P,Y+128),S[E+48]&&Ui(S,E+48,P,Y+128+4)}function $i(S,E,P,Y){var ie,ue=a(16);for(ie=0;4>ie;++ie){var ce=S[E+0+ie]+S[E+12+ie],pe=S[E+4+ie]+S[E+8+ie],xe=S[E+4+ie]-S[E+8+ie],Ee=S[E+0+ie]-S[E+12+ie];ue[0+ie]=ce+pe,ue[8+ie]=ce-pe,ue[4+ie]=Ee+xe,ue[12+ie]=Ee-xe}for(ie=0;4>ie;++ie)ce=(S=ue[0+4*ie]+3)+ue[3+4*ie],pe=ue[1+4*ie]+ue[2+4*ie],xe=ue[1+4*ie]-ue[2+4*ie],Ee=S-ue[3+4*ie],P[Y+0]=ce+pe>>3,P[Y+16]=Ee+xe>>3,P[Y+32]=ce-pe>>3,P[Y+48]=Ee-xe>>3,Y+=64}function ss(S,E,P){var Y,ie=E-32,ue=Ea,ce=255-S[ie-1];for(Y=0;Y<P;++Y){var pe,xe=ue,Ee=ce+S[E-1];for(pe=0;pe<P;++pe)S[E+pe]=xe[Ee+S[ie+pe]];E+=32}}function ws(S,E){ss(S,E,4)}function Ou(S,E){ss(S,E,8)}function qa(S,E){ss(S,E,16)}function Vs(S,E){var P;for(P=0;16>P;++P)r(S,E+32*P,S,E-32,16)}function il(S,E){var P;for(P=16;0<P;--P)i(S,E,S[E-1],16),E+=32}function Ys(S,E,P){var Y;for(Y=0;16>Y;++Y)i(E,P+32*Y,S,16)}function al(S,E){var P,Y=16;for(P=0;16>P;++P)Y+=S[E-1+32*P]+S[E+P-32];Ys(Y>>5,S,E)}function li(S,E){var P,Y=8;for(P=0;16>P;++P)Y+=S[E-1+32*P];Ys(Y>>4,S,E)}function Jr(S,E){var P,Y=8;for(P=0;16>P;++P)Y+=S[E+P-32];Ys(Y>>4,S,E)}function Ss(S,E){Ys(128,S,E)}function tn(S,E,P){return S+2*E+P+2>>2}function ao(S,E){var P,Y=E-32;for(Y=new Uint8Array([tn(S[Y-1],S[Y+0],S[Y+1]),tn(S[Y+0],S[Y+1],S[Y+2]),tn(S[Y+1],S[Y+2],S[Y+3]),tn(S[Y+2],S[Y+3],S[Y+4])]),P=0;4>P;++P)r(S,E+32*P,Y,0,Y.length)}function sl(S,E){var P=S[E-1],Y=S[E-1+32],ie=S[E-1+64],ue=S[E-1+96];Te(S,E+0,16843009*tn(S[E-1-32],P,Y)),Te(S,E+32,16843009*tn(P,Y,ie)),Te(S,E+64,16843009*tn(Y,ie,ue)),Te(S,E+96,16843009*tn(ie,ue,ue))}function Ei(S,E){var P,Y=4;for(P=0;4>P;++P)Y+=S[E+P-32]+S[E-1+32*P];for(Y>>=3,P=0;4>P;++P)i(S,E+32*P,Y,4)}function Ba(S,E){var P=S[E-1+0],Y=S[E-1+32],ie=S[E-1+64],ue=S[E-1-32],ce=S[E+0-32],pe=S[E+1-32],xe=S[E+2-32],Ee=S[E+3-32];S[E+0+96]=tn(Y,ie,S[E-1+96]),S[E+1+96]=S[E+0+64]=tn(P,Y,ie),S[E+2+96]=S[E+1+64]=S[E+0+32]=tn(ue,P,Y),S[E+3+96]=S[E+2+64]=S[E+1+32]=S[E+0+0]=tn(ce,ue,P),S[E+3+64]=S[E+2+32]=S[E+1+0]=tn(pe,ce,ue),S[E+3+32]=S[E+2+0]=tn(xe,pe,ce),S[E+3+0]=tn(Ee,xe,pe)}function _o(S,E){var P=S[E+1-32],Y=S[E+2-32],ie=S[E+3-32],ue=S[E+4-32],ce=S[E+5-32],pe=S[E+6-32],xe=S[E+7-32];S[E+0+0]=tn(S[E+0-32],P,Y),S[E+1+0]=S[E+0+32]=tn(P,Y,ie),S[E+2+0]=S[E+1+32]=S[E+0+64]=tn(Y,ie,ue),S[E+3+0]=S[E+2+32]=S[E+1+64]=S[E+0+96]=tn(ie,ue,ce),S[E+3+32]=S[E+2+64]=S[E+1+96]=tn(ue,ce,pe),S[E+3+64]=S[E+2+96]=tn(ce,pe,xe),S[E+3+96]=tn(pe,xe,xe)}function $a(S,E){var P=S[E-1+0],Y=S[E-1+32],ie=S[E-1+64],ue=S[E-1-32],ce=S[E+0-32],pe=S[E+1-32],xe=S[E+2-32],Ee=S[E+3-32];S[E+0+0]=S[E+1+64]=ue+ce+1>>1,S[E+1+0]=S[E+2+64]=ce+pe+1>>1,S[E+2+0]=S[E+3+64]=pe+xe+1>>1,S[E+3+0]=xe+Ee+1>>1,S[E+0+96]=tn(ie,Y,P),S[E+0+64]=tn(Y,P,ue),S[E+0+32]=S[E+1+96]=tn(P,ue,ce),S[E+1+32]=S[E+2+96]=tn(ue,ce,pe),S[E+2+32]=S[E+3+96]=tn(ce,pe,xe),S[E+3+32]=tn(pe,xe,Ee)}function La(S,E){var P=S[E+0-32],Y=S[E+1-32],ie=S[E+2-32],ue=S[E+3-32],ce=S[E+4-32],pe=S[E+5-32],xe=S[E+6-32],Ee=S[E+7-32];S[E+0+0]=P+Y+1>>1,S[E+1+0]=S[E+0+64]=Y+ie+1>>1,S[E+2+0]=S[E+1+64]=ie+ue+1>>1,S[E+3+0]=S[E+2+64]=ue+ce+1>>1,S[E+0+32]=tn(P,Y,ie),S[E+1+32]=S[E+0+96]=tn(Y,ie,ue),S[E+2+32]=S[E+1+96]=tn(ie,ue,ce),S[E+3+32]=S[E+2+96]=tn(ue,ce,pe),S[E+3+64]=tn(ce,pe,xe),S[E+3+96]=tn(pe,xe,Ee)}function Ua(S,E){var P=S[E-1+0],Y=S[E-1+32],ie=S[E-1+64],ue=S[E-1+96];S[E+0+0]=P+Y+1>>1,S[E+2+0]=S[E+0+32]=Y+ie+1>>1,S[E+2+32]=S[E+0+64]=ie+ue+1>>1,S[E+1+0]=tn(P,Y,ie),S[E+3+0]=S[E+1+32]=tn(Y,ie,ue),S[E+3+32]=S[E+1+64]=tn(ie,ue,ue),S[E+3+64]=S[E+2+64]=S[E+0+96]=S[E+1+96]=S[E+2+96]=S[E+3+96]=ue}function No(S,E){var P=S[E-1+0],Y=S[E-1+32],ie=S[E-1+64],ue=S[E-1+96],ce=S[E-1-32],pe=S[E+0-32],xe=S[E+1-32],Ee=S[E+2-32];S[E+0+0]=S[E+2+32]=P+ce+1>>1,S[E+0+32]=S[E+2+64]=Y+P+1>>1,S[E+0+64]=S[E+2+96]=ie+Y+1>>1,S[E+0+96]=ue+ie+1>>1,S[E+3+0]=tn(pe,xe,Ee),S[E+2+0]=tn(ce,pe,xe),S[E+1+0]=S[E+3+32]=tn(P,ce,pe),S[E+1+32]=S[E+3+64]=tn(Y,P,ce),S[E+1+64]=S[E+3+96]=tn(ie,Y,P),S[E+1+96]=tn(ue,ie,Y)}function ol(S,E){var P;for(P=0;8>P;++P)r(S,E+32*P,S,E-32,8)}function so(S,E){var P;for(P=0;8>P;++P)i(S,E,S[E-1],8),E+=32}function As(S,E,P){var Y;for(Y=0;8>Y;++Y)i(E,P+32*Y,S,8)}function H(S,E){var P,Y=8;for(P=0;8>P;++P)Y+=S[E+P-32]+S[E-1+32*P];As(Y>>4,S,E)}function ge(S,E){var P,Y=4;for(P=0;8>P;++P)Y+=S[E+P-32];As(Y>>3,S,E)}function Ie(S,E){var P,Y=4;for(P=0;8>P;++P)Y+=S[E-1+32*P];As(Y>>3,S,E)}function lt(S,E){As(128,S,E)}function Zt(S,E,P){var Y=S[E-P],ie=S[E+0],ue=3*(ie-Y)+Op[1020+S[E-2*P]-S[E+P]],ce=Kc[112+(ue+4>>3)];S[E-P]=Ea[255+Y+Kc[112+(ue+3>>3)]],S[E+0]=Ea[255+ie-ce]}function $t(S,E,P,Y){var ie=S[E+0],ue=S[E+P];return uo[255+S[E-2*P]-S[E-P]]>Y||uo[255+ue-ie]>Y}function Tn(S,E,P,Y){return 4*uo[255+S[E-P]-S[E+0]]+uo[255+S[E-2*P]-S[E+P]]<=Y}function Cn(S,E,P,Y,ie){var ue=S[E-3*P],ce=S[E-2*P],pe=S[E-P],xe=S[E+0],Ee=S[E+P],Fe=S[E+2*P],Xe=S[E+3*P];return 4*uo[255+pe-xe]+uo[255+ce-Ee]>Y?0:uo[255+S[E-4*P]-ue]<=ie&&uo[255+ue-ce]<=ie&&uo[255+ce-pe]<=ie&&uo[255+Xe-Fe]<=ie&&uo[255+Fe-Ee]<=ie&&uo[255+Ee-xe]<=ie}function pr(S,E,P,Y){var ie=2*Y+1;for(Y=0;16>Y;++Y)Tn(S,E+Y,P,ie)&&Zt(S,E+Y,P)}function bn(S,E,P,Y){var ie=2*Y+1;for(Y=0;16>Y;++Y)Tn(S,E+Y*P,1,ie)&&Zt(S,E+Y*P,1)}function Nr(S,E,P,Y){var ie;for(ie=3;0<ie;--ie)pr(S,E+=4*P,P,Y)}function Aa(S,E,P,Y){var ie;for(ie=3;0<ie;--ie)bn(S,E+=4,P,Y)}function Sr(S,E,P,Y,ie,ue,ce,pe){for(ue=2*ue+1;0<ie--;){if(Cn(S,E,P,ue,ce))if($t(S,E,P,pe))Zt(S,E,P);else{var xe=S,Ee=E,Fe=P,Xe=xe[Ee-2*Fe],Qe=xe[Ee-Fe],We=xe[Ee+0],yt=xe[Ee+Fe],at=xe[Ee+2*Fe],ze=27*(pt=Op[1020+3*(We-Qe)+Op[1020+Xe-yt]])+63>>7,Ue=18*pt+63>>7,pt=9*pt+63>>7;xe[Ee-3*Fe]=Ea[255+xe[Ee-3*Fe]+pt],xe[Ee-2*Fe]=Ea[255+Xe+Ue],xe[Ee-Fe]=Ea[255+Qe+ze],xe[Ee+0]=Ea[255+We-ze],xe[Ee+Fe]=Ea[255+yt-Ue],xe[Ee+2*Fe]=Ea[255+at-pt]}E+=Y}}function Ar(S,E,P,Y,ie,ue,ce,pe){for(ue=2*ue+1;0<ie--;){if(Cn(S,E,P,ue,ce))if($t(S,E,P,pe))Zt(S,E,P);else{var xe=S,Ee=E,Fe=P,Xe=xe[Ee-Fe],Qe=xe[Ee+0],We=xe[Ee+Fe],yt=Kc[112+((at=3*(Qe-Xe))+4>>3)],at=Kc[112+(at+3>>3)],ze=yt+1>>1;xe[Ee-2*Fe]=Ea[255+xe[Ee-2*Fe]+ze],xe[Ee-Fe]=Ea[255+Xe+at],xe[Ee+0]=Ea[255+Qe-yt],xe[Ee+Fe]=Ea[255+We-ze]}E+=Y}}function Gr(S,E,P,Y,ie,ue){Sr(S,E,P,1,16,Y,ie,ue)}function Ha(S,E,P,Y,ie,ue){Sr(S,E,1,P,16,Y,ie,ue)}function Gs(S,E,P,Y,ie,ue){var ce;for(ce=3;0<ce;--ce)Ar(S,E+=4*P,P,1,16,Y,ie,ue)}function Cs(S,E,P,Y,ie,ue){var ce;for(ce=3;0<ce;--ce)Ar(S,E+=4,1,P,16,Y,ie,ue)}function Wd(S,E,P,Y,ie,ue,ce,pe){Sr(S,E,ie,1,8,ue,ce,pe),Sr(P,Y,ie,1,8,ue,ce,pe)}function ll(S,E,P,Y,ie,ue,ce,pe){Sr(S,E,1,ie,8,ue,ce,pe),Sr(P,Y,1,ie,8,ue,ce,pe)}function jo(S,E,P,Y,ie,ue,ce,pe){Ar(S,E+4*ie,ie,1,8,ue,ce,pe),Ar(P,Y+4*ie,ie,1,8,ue,ce,pe)}function jp(S,E,P,Y,ie,ue,ce,pe){Ar(S,E+4,1,ie,8,ue,ce,pe),Ar(P,Y+4,1,ie,8,ue,ce,pe)}function Vd(){this.ba=new Yr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Rn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ch(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function dh(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Yd(){this.ua=0,this.Wa=new ne,this.vb=new ne,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new N,this.yc=new T}function Sm(){this.xb=this.a=0,this.l=new ro,this.ca=new Yr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new q,this.Pb=0,this.wd=new q,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Yd,this.ab=0,this.gc=s(4,dh),this.Oc=0}function Gd(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ro,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Uc(S,E,P,Y,ie,ue,ce){for(S=S==null?0:S[E+0],E=0;E<ce;++E)ie[ue+E]=S+P[Y+E]&255,S=ie[ue+E]}function Qd(S,E,P,Y,ie,ue,ce){var pe;if(S==null)Uc(null,null,P,Y,ie,ue,ce);else for(pe=0;pe<ce;++pe)ie[ue+pe]=S[E+pe]+P[Y+pe]&255}function Du(S,E,P,Y,ie,ue,ce){if(S==null)Uc(null,null,P,Y,ie,ue,ce);else{var pe,xe=S[E+0],Ee=xe,Fe=xe;for(pe=0;pe<ce;++pe)Ee=Fe+(xe=S[E+pe])-Ee,Fe=P[Y+pe]+(-256&Ee?0>Ee?0:255:Ee)&255,Ee=xe,ie[ue+pe]=Fe}}function fh(S,E,P,Y){var ie=E.width,ue=E.o;if(n(S!=null&&E!=null),0>P||0>=Y||P+Y>ue)return null;if(!S.Cc){if(S.ga==null){var ce;if(S.ga=new Gd,(ce=S.ga==null)||(ce=E.width*E.o,n(S.Gb.length==0),S.Gb=a(ce),S.Uc=0,S.Gb==null?ce=0:(S.mb=S.Gb,S.nb=S.Uc,S.rc=null,ce=1),ce=!ce),!ce){ce=S.ga;var pe=S.Fa,xe=S.P,Ee=S.qc,Fe=S.mb,Xe=S.nb,Qe=xe+1,We=Ee-1,yt=ce.l;if(n(pe!=null&&Fe!=null&&E!=null),hl[0]=null,hl[1]=Uc,hl[2]=Qd,hl[3]=Du,ce.ca=Fe,ce.tb=Xe,ce.c=E.width,ce.i=E.height,n(0<ce.c&&0<ce.i),1>=Ee)E=0;else if(ce.$a=pe[xe+0]>>0&3,ce.Z=pe[xe+0]>>2&3,ce.Lc=pe[xe+0]>>4&3,xe=pe[xe+0]>>6&3,0>ce.$a||1<ce.$a||4<=ce.Z||1<ce.Lc||xe)E=0;else if(yt.put=oi,yt.ac=wr,yt.bc=Sa,yt.ma=ce,yt.width=E.width,yt.height=E.height,yt.Da=E.Da,yt.v=E.v,yt.va=E.va,yt.j=E.j,yt.o=E.o,ce.$a)e:{n(ce.$a==1),E=ki();t:for(;;){if(E==null){E=0;break e}if(n(ce!=null),ce.mc=E,E.c=ce.c,E.i=ce.i,E.l=ce.l,E.l.ma=ce,E.l.width=ce.c,E.l.height=ce.i,E.a=0,J(E.m,pe,Qe,We),!Jn(ce.c,ce.i,1,E,null)||(E.ab==1&&E.gc[0].hc==3&&_r(E.s)?(ce.ic=1,pe=E.c*E.i,E.Ta=null,E.Ua=0,E.V=a(pe),E.Ba=0,E.V==null?(E.a=1,E=0):E=1):(ce.ic=0,E=no(E,ce.c)),!E))break t;E=1;break e}ce.mc=null,E=0}else E=We>=ce.c*ce.i;ce=!E}if(ce)return null;S.ga.Lc!=1?S.Ga=0:Y=ue-P}n(S.ga!=null),n(P+Y<=ue);e:{if(E=(pe=S.ga).c,ue=pe.l.o,pe.$a==0){if(Qe=S.rc,We=S.Vc,yt=S.Fa,xe=S.P+1+P*E,Ee=S.mb,Fe=S.nb+P*E,n(xe<=S.P+S.qc),pe.Z!=0)for(n(hl[pe.Z]!=null),ce=0;ce<Y;++ce)hl[pe.Z](Qe,We,yt,xe,Ee,Fe,E),Qe=Ee,We=Fe,Fe+=E,xe+=E;else for(ce=0;ce<Y;++ce)r(Ee,Fe,yt,xe,E),Qe=Ee,We=Fe,Fe+=E,xe+=E;S.rc=Qe,S.Vc=We}else{if(n(pe.mc!=null),E=P+Y,n((ce=pe.mc)!=null),n(E<=ce.i),ce.C>=E)E=1;else if(pe.ic||Ge(),pe.ic){pe=ce.V,Qe=ce.Ba,We=ce.c;var at=ce.i,ze=(yt=1,xe=ce.$/We,Ee=ce.$%We,Fe=ce.m,Xe=ce.s,ce.$),Ue=We*at,pt=We*E,xt=Xe.wc,gt=ze<pt?fr(Xe,Ee,xe):null;n(ze<=Ue),n(E<=at),n(_r(Xe));t:for(;;){for(;!Fe.h&&ze<pt;){if(Ee&xt||(gt=fr(Xe,Ee,xe)),n(gt!=null),oe(Fe),256>(at=Rr(gt.G[0],gt.H[0],Fe)))pe[Qe+ze]=at,++ze,++Ee>=We&&(Ee=0,++xe<=E&&!(xe%16)&&qi(ce,xe));else{if(!(280>at)){yt=0;break t}at=Hn(at-256,Fe);var Dt,jt=Rr(gt.G[4],gt.H[4],Fe);if(oe(Fe),!(ze>=(jt=ar(We,jt=Hn(jt,Fe)))&&Ue-ze>=at)){yt=0;break t}for(Dt=0;Dt<at;++Dt)pe[Qe+ze+Dt]=pe[Qe+ze+Dt-jt];for(ze+=at,Ee+=at;Ee>=We;)Ee-=We,++xe<=E&&!(xe%16)&&qi(ce,xe);ze<pt&&Ee&xt&&(gt=fr(Xe,Ee,xe))}n(Fe.h==ee(Fe))}qi(ce,xe>E?E:xe);break t}!yt||Fe.h&&ze<Ue?(yt=0,ce.a=Fe.h?5:3):ce.$=ze,E=yt}else E=Bi(ce,ce.V,ce.Ba,ce.c,ce.i,E,Co);if(!E){Y=0;break e}}P+Y>=ue&&(S.Cc=1),Y=1}if(!Y)return null;if(S.Cc&&((Y=S.ga)!=null&&(Y.mc=null),S.ga=null,0<S.Ga))return alert("todo:WebPDequantizeLevels"),null}return S.nb+P*ie}function I(S,E,P,Y,ie,ue){for(;0<ie--;){var ce,pe=S,xe=E+(P?1:0),Ee=S,Fe=E+(P?0:3);for(ce=0;ce<Y;++ce){var Xe=Ee[Fe+4*ce];Xe!=255&&(Xe*=32897,pe[xe+4*ce+0]=pe[xe+4*ce+0]*Xe>>23,pe[xe+4*ce+1]=pe[xe+4*ce+1]*Xe>>23,pe[xe+4*ce+2]=pe[xe+4*ce+2]*Xe>>23)}E+=ue}}function ae(S,E,P,Y,ie){for(;0<Y--;){var ue;for(ue=0;ue<P;++ue){var ce=S[E+2*ue+0],pe=15&(Ee=S[E+2*ue+1]),xe=4369*pe,Ee=(240&Ee|Ee>>4)*xe>>16;S[E+2*ue+0]=(240&ce|ce>>4)*xe>>16&240|(15&ce|ce<<4)*xe>>16>>4&15,S[E+2*ue+1]=240&Ee|pe}E+=ie}}function _e(S,E,P,Y,ie,ue,ce,pe){var xe,Ee,Fe=255;for(Ee=0;Ee<ie;++Ee){for(xe=0;xe<Y;++xe){var Xe=S[E+xe];ue[ce+4*xe]=Xe,Fe&=Xe}E+=P,ce+=pe}return Fe!=255}function Me(S,E,P,Y,ie){var ue;for(ue=0;ue<ie;++ue)P[Y+ue]=S[E+ue]>>8}function Ge(){Ks=I,In=ae,Ln=_e,Pr=Me}function dt(S,E,P){L[S]=function(Y,ie,ue,ce,pe,xe,Ee,Fe,Xe,Qe,We,yt,at,ze,Ue,pt,xt){var gt,Dt=xt-1>>1,jt=pe[xe+0]|Ee[Fe+0]<<16,Gt=Xe[Qe+0]|We[yt+0]<<16;n(Y!=null);var Tt=3*jt+Gt+131074>>2;for(E(Y[ie+0],255&Tt,Tt>>16,at,ze),ue!=null&&(Tt=3*Gt+jt+131074>>2,E(ue[ce+0],255&Tt,Tt>>16,Ue,pt)),gt=1;gt<=Dt;++gt){var Vn=pe[xe+gt]|Ee[Fe+gt]<<16,sr=Xe[Qe+gt]|We[yt+gt]<<16,Dn=jt+Vn+Gt+sr+524296,On=Dn+2*(Vn+Gt)>>3;Tt=On+jt>>1,jt=(Dn=Dn+2*(jt+sr)>>3)+Vn>>1,E(Y[ie+2*gt-1],255&Tt,Tt>>16,at,ze+(2*gt-1)*P),E(Y[ie+2*gt-0],255&jt,jt>>16,at,ze+(2*gt-0)*P),ue!=null&&(Tt=Dn+Gt>>1,jt=On+sr>>1,E(ue[ce+2*gt-1],255&Tt,Tt>>16,Ue,pt+(2*gt-1)*P),E(ue[ce+2*gt+0],255&jt,jt>>16,Ue,pt+(2*gt+0)*P)),jt=Vn,Gt=sr}1&xt||(Tt=3*jt+Gt+131074>>2,E(Y[ie+xt-1],255&Tt,Tt>>16,at,ze+(xt-1)*P),ue!=null&&(Tt=3*Gt+jt+131074>>2,E(ue[ce+xt-1],255&Tt,Tt>>16,Ue,pt+(xt-1)*P)))}}function At(){_a[Wa]=Jl,_a[tf]=pl,_a[dl]=Vu,_a[gh]=Lp,_a[Xc]=Rp,_a[Gl]=af,_a[Dp]=Mp,_a[bh]=pl,_a[Hu]=Lp,_a[Ql]=Rp,_a[nf]=af}function Ot(S){return S&-16384?0>S?0:255:S>>b2}function Ut(S,E){return Ot((19077*S>>8)+(26149*E>>8)-14234)}function vn(S,E,P){return Ot((19077*S>>8)-(6419*E>>8)-(13320*P>>8)+8708)}function pn(S,E){return Ot((19077*S>>8)+(33050*E>>8)-17685)}function qn(S,E,P,Y,ie){Y[ie+0]=Ut(S,P),Y[ie+1]=vn(S,E,P),Y[ie+2]=pn(S,E)}function ei(S,E,P,Y,ie){Y[ie+0]=pn(S,E),Y[ie+1]=vn(S,E,P),Y[ie+2]=Ut(S,P)}function ui(S,E,P,Y,ie){var ue=vn(S,E,P);E=ue<<3&224|pn(S,E)>>3,Y[ie+0]=248&Ut(S,P)|ue>>5,Y[ie+1]=E}function _i(S,E,P,Y,ie){var ue=240&pn(S,E)|15;Y[ie+0]=240&Ut(S,P)|vn(S,E,P)>>4,Y[ie+1]=ue}function Ni(S,E,P,Y,ie){Y[ie+0]=255,qn(S,E,P,Y,ie+1)}function Ca(S,E,P,Y,ie){ei(S,E,P,Y,ie),Y[ie+3]=255}function To(S,E,P,Y,ie){qn(S,E,P,Y,ie),Y[ie+3]=255}function Qs(S,E){return 0>S?0:S>E?E:S}function Oo(S,E,P){L[S]=function(Y,ie,ue,ce,pe,xe,Ee,Fe,Xe){for(var Qe=Fe+(-2&Xe)*P;Fe!=Qe;)E(Y[ie+0],ue[ce+0],pe[xe+0],Ee,Fe),E(Y[ie+1],ue[ce+0],pe[xe+0],Ee,Fe+P),ie+=2,++ce,++xe,Fe+=2*P;1&Xe&&E(Y[ie+0],ue[ce+0],pe[xe+0],Ee,Fe)}}function hh(S,E,P){return P==0?S==0?E==0?6:5:E==0?4:0:P}function Ul(S,E,P,Y,ie){switch(S>>>30){case 3:Io(E,P,Y,ie,0);break;case 2:mi(E,P,Y,ie);break;case 1:Ui(E,P,Y,ie)}}function Hl(S,E){var P,Y,ie=E.M,ue=E.Nb,ce=S.oc,pe=S.pc+40,xe=S.oc,Ee=S.pc+584,Fe=S.oc,Xe=S.pc+600;for(P=0;16>P;++P)ce[pe+32*P-1]=129;for(P=0;8>P;++P)xe[Ee+32*P-1]=129,Fe[Xe+32*P-1]=129;for(0<ie?ce[pe-1-32]=xe[Ee-1-32]=Fe[Xe-1-32]=129:(i(ce,pe-32-1,127,21),i(xe,Ee-32-1,127,9),i(Fe,Xe-32-1,127,9)),Y=0;Y<S.za;++Y){var Qe=E.ya[E.aa+Y];if(0<Y){for(P=-1;16>P;++P)r(ce,pe+32*P-4,ce,pe+32*P+12,4);for(P=-1;8>P;++P)r(xe,Ee+32*P-4,xe,Ee+32*P+4,4),r(Fe,Xe+32*P-4,Fe,Xe+32*P+4,4)}var We=S.Gd,yt=S.Hd+Y,at=Qe.ad,ze=Qe.Hc;if(0<ie&&(r(ce,pe-32,We[yt].y,0,16),r(xe,Ee-32,We[yt].f,0,8),r(Fe,Xe-32,We[yt].ea,0,8)),Qe.Za){var Ue=ce,pt=pe-32+16;for(0<ie&&(Y>=S.za-1?i(Ue,pt,We[yt].y[15],4):r(Ue,pt,We[yt+1].y,0,4)),P=0;4>P;P++)Ue[pt+128+P]=Ue[pt+256+P]=Ue[pt+384+P]=Ue[pt+0+P];for(P=0;16>P;++P,ze<<=2)Ue=ce,pt=pe+td[P],ls[Qe.Ob[P]](Ue,pt),Ul(ze,at,16*+P,Ue,pt)}else if(Ue=hh(Y,ie,Qe.Ob[0]),Zl[Ue](ce,pe),ze!=0)for(P=0;16>P;++P,ze<<=2)Ul(ze,at,16*+P,ce,pe+td[P]);for(P=Qe.Gc,Ue=hh(Y,ie,Qe.Dd),Zs[Ue](xe,Ee),Zs[Ue](Fe,Xe),ze=at,Ue=xe,pt=Ee,255&(Qe=P>>0)&&(170&Qe?Lo(ze,256,Ue,pt):_s(ze,256,Ue,pt)),Qe=Fe,ze=Xe,255&(P>>=8)&&(170&P?Lo(at,320,Qe,ze):_s(at,320,Qe,ze)),ie<S.Ub-1&&(r(We[yt].y,0,ce,pe+480,16),r(We[yt].f,0,xe,Ee+224,8),r(We[yt].ea,0,Fe,Xe+224,8)),P=8*ue*S.B,We=S.sa,yt=S.ta+16*Y+16*ue*S.R,at=S.qa,Qe=S.ra+8*Y+P,ze=S.Ha,Ue=S.Ia+8*Y+P,P=0;16>P;++P)r(We,yt+P*S.R,ce,pe+32*P,16);for(P=0;8>P;++P)r(at,Qe+P*S.B,xe,Ee+32*P,8),r(ze,Ue+P*S.B,Fe,Xe+32*P,8)}}function Kd(S,E,P,Y,ie,ue,ce,pe,xe){var Ee=[0],Fe=[0],Xe=0,Qe=xe!=null?xe.kd:0,We=xe??new ch;if(S==null||12>P)return 7;We.data=S,We.w=E,We.ha=P,E=[E],P=[P],We.gb=[We.gb];e:{var yt=E,at=P,ze=We.gb;if(n(S!=null),n(at!=null),n(ze!=null),ze[0]=0,12<=at[0]&&!t(S,yt[0],"RIFF")){if(t(S,yt[0]+8,"WEBP")){ze=3;break e}var Ue=Ye(S,yt[0]+4);if(12>Ue||4294967286<Ue){ze=3;break e}if(Qe&&Ue>at[0]-8){ze=7;break e}ze[0]=Ue,yt[0]+=12,at[0]-=12}ze=0}if(ze!=0)return ze;for(Ue=0<We.gb[0],P=P[0];;){e:{var pt=S;at=E,ze=P;var xt=Ee,gt=Fe,Dt=yt=[0];if((Tt=Xe=[Xe])[0]=0,8>ze[0])ze=7;else{if(!t(pt,at[0],"VP8X")){if(Ye(pt,at[0]+4)!=10){ze=3;break e}if(18>ze[0]){ze=7;break e}var jt=Ye(pt,at[0]+8),Gt=1+He(pt,at[0]+12);if(2147483648<=Gt*(pt=1+He(pt,at[0]+15))){ze=3;break e}Dt!=null&&(Dt[0]=jt),xt!=null&&(xt[0]=Gt),gt!=null&&(gt[0]=pt),at[0]+=18,ze[0]-=18,Tt[0]=1}ze=0}}if(Xe=Xe[0],yt=yt[0],ze!=0)return ze;if(at=!!(2&yt),!Ue&&Xe)return 3;if(ue!=null&&(ue[0]=!!(16&yt)),ce!=null&&(ce[0]=at),pe!=null&&(pe[0]=0),ce=Ee[0],yt=Fe[0],Xe&&at&&xe==null){ze=0;break}if(4>P){ze=7;break}if(Ue&&Xe||!Ue&&!Xe&&!t(S,E[0],"ALPH")){P=[P],We.na=[We.na],We.P=[We.P],We.Sa=[We.Sa];e:{jt=S,ze=E,Ue=P;var Tt=We.gb;xt=We.na,gt=We.P,Dt=We.Sa,Gt=22,n(jt!=null),n(Ue!=null),pt=ze[0];var Vn=Ue[0];for(n(xt!=null),n(Dt!=null),xt[0]=null,gt[0]=null,Dt[0]=0;;){if(ze[0]=pt,Ue[0]=Vn,8>Vn){ze=7;break e}var sr=Ye(jt,pt+4);if(4294967286<sr){ze=3;break e}var Dn=8+sr+1&-2;if(Gt+=Dn,0<Tt&&Gt>Tt){ze=3;break e}if(!t(jt,pt,"VP8 ")||!t(jt,pt,"VP8L")){ze=0;break e}if(Vn[0]<Dn){ze=7;break e}t(jt,pt,"ALPH")||(xt[0]=jt,gt[0]=pt+8,Dt[0]=sr),pt+=Dn,Vn-=Dn}}if(P=P[0],We.na=We.na[0],We.P=We.P[0],We.Sa=We.Sa[0],ze!=0)break}P=[P],We.Ja=[We.Ja],We.xa=[We.xa];e:if(Tt=S,ze=E,Ue=P,xt=We.gb[0],gt=We.Ja,Dt=We.xa,jt=ze[0],pt=!t(Tt,jt,"VP8 "),Gt=!t(Tt,jt,"VP8L"),n(Tt!=null),n(Ue!=null),n(gt!=null),n(Dt!=null),8>Ue[0])ze=7;else{if(pt||Gt){if(Tt=Ye(Tt,jt+4),12<=xt&&Tt>xt-12){ze=3;break e}if(Qe&&Tt>Ue[0]-8){ze=7;break e}gt[0]=Tt,ze[0]+=8,Ue[0]-=8,Dt[0]=Gt}else Dt[0]=5<=Ue[0]&&Tt[jt+0]==47&&!(Tt[jt+4]>>5),gt[0]=Ue[0];ze=0}if(P=P[0],We.Ja=We.Ja[0],We.xa=We.xa[0],E=E[0],ze!=0)break;if(4294967286<We.Ja)return 3;if(pe==null||at||(pe[0]=We.xa?2:1),ce=[ce],yt=[yt],We.xa){if(5>P){ze=7;break}pe=ce,Qe=yt,at=ue,S==null||5>P?S=0:5<=P&&S[E+0]==47&&!(S[E+4]>>5)?(Ue=[0],Tt=[0],xt=[0],J(gt=new q,S,E,P),Lt(gt,Ue,Tt,xt)?(pe!=null&&(pe[0]=Ue[0]),Qe!=null&&(Qe[0]=Tt[0]),at!=null&&(at[0]=xt[0]),S=1):S=0):S=0}else{if(10>P){ze=7;break}pe=yt,S==null||10>P||!ta(S,E+3,P-3)?S=0:(Qe=S[E+0]|S[E+1]<<8|S[E+2]<<16,at=16383&(S[E+7]<<8|S[E+6]),S=16383&(S[E+9]<<8|S[E+8]),1&Qe||3<(Qe>>1&7)||!(Qe>>4&1)||Qe>>5>=We.Ja||!at||!S?S=0:(ce&&(ce[0]=at),pe&&(pe[0]=S),S=1))}if(!S||(ce=ce[0],yt=yt[0],Xe&&(Ee[0]!=ce||Fe[0]!=yt)))return 3;xe!=null&&(xe[0]=We,xe.offset=E-xe.w,n(4294967286>E-xe.w),n(xe.offset==xe.ha-P));break}return ze==0||ze==7&&Xe&&xe==null?(ue!=null&&(ue[0]|=We.na!=null&&0<We.na.length),Y!=null&&(Y[0]=ce),ie!=null&&(ie[0]=yt),0):ze}function Iu(S,E,P){var Y=E.width,ie=E.height,ue=0,ce=0,pe=Y,xe=ie;if(E.Da=S!=null&&0<S.Da,E.Da&&(pe=S.cd,xe=S.bd,ue=S.v,ce=S.j,11>P||(ue&=-2,ce&=-2),0>ue||0>ce||0>=pe||0>=xe||ue+pe>Y||ce+xe>ie))return 0;if(E.v=ue,E.j=ce,E.va=ue+pe,E.o=ce+xe,E.U=pe,E.T=xe,E.da=S!=null&&0<S.da,E.da){if(!be(pe,xe,P=[S.ib],ue=[S.hb]))return 0;E.ib=P[0],E.hb=ue[0]}return E.ob=S!=null&&S.ob,E.Kb=S==null||!S.Sd,E.da&&(E.ob=E.ib<3*Y/4&&E.hb<3*ie/4,E.Kb=0),1}function Xd(S){if(S==null)return 2;if(11>S.S){var E=S.f.RGBA;E.fb+=(S.height-1)*E.A,E.A=-E.A}else E=S.f.kb,S=S.height,E.O+=(S-1)*E.fa,E.fa=-E.fa,E.N+=(S-1>>1)*E.Ab,E.Ab=-E.Ab,E.W+=(S-1>>1)*E.Db,E.Db=-E.Db,E.F!=null&&(E.J+=(S-1)*E.lb,E.lb=-E.lb);return 0}function Hc(S,E,P,Y){if(Y==null||0>=S||0>=E)return 2;if(P!=null){if(P.Da){var ie=P.cd,ue=P.bd,ce=-2&P.v,pe=-2&P.j;if(0>ce||0>pe||0>=ie||0>=ue||ce+ie>S||pe+ue>E)return 2;S=ie,E=ue}if(P.da){if(!be(S,E,ie=[P.ib],ue=[P.hb]))return 2;S=ie[0],E=ue[0]}}Y.width=S,Y.height=E;e:{var xe=Y.width,Ee=Y.height;if(S=Y.S,0>=xe||0>=Ee||!(S>=Wa&&13>S))S=2;else{if(0>=Y.Rd&&Y.sd==null){ce=ue=ie=E=0;var Fe=(pe=xe*bb[S])*Ee;if(11>S||(ue=(Ee+1)/2*(E=(xe+1)/2),S==12&&(ce=(ie=xe)*Ee)),(Ee=a(Fe+2*ue+ce))==null){S=1;break e}Y.sd=Ee,11>S?((xe=Y.f.RGBA).eb=Ee,xe.fb=0,xe.A=pe,xe.size=Fe):((xe=Y.f.kb).y=Ee,xe.O=0,xe.fa=pe,xe.Fd=Fe,xe.f=Ee,xe.N=0+Fe,xe.Ab=E,xe.Cd=ue,xe.ea=Ee,xe.W=0+Fe+ue,xe.Db=E,xe.Ed=ue,S==12&&(xe.F=Ee,xe.J=0+Fe+2*ue),xe.Tc=ce,xe.lb=ie)}if(E=1,ie=Y.S,ue=Y.width,ce=Y.height,ie>=Wa&&13>ie)if(11>ie)S=Y.f.RGBA,E&=(pe=Math.abs(S.A))*(ce-1)+ue<=S.size,E&=pe>=ue*bb[ie],E&=S.eb!=null;else{S=Y.f.kb,pe=(ue+1)/2,Fe=(ce+1)/2,xe=Math.abs(S.fa),Ee=Math.abs(S.Ab);var Xe=Math.abs(S.Db),Qe=Math.abs(S.lb),We=Qe*(ce-1)+ue;E&=xe*(ce-1)+ue<=S.Fd,E&=Ee*(Fe-1)+pe<=S.Cd,E=(E&=Xe*(Fe-1)+pe<=S.Ed)&xe>=ue&Ee>=pe&Xe>=pe,E&=S.y!=null,E&=S.f!=null,E&=S.ea!=null,ie==12&&(E&=Qe>=ue,E&=We<=S.Tc,E&=S.F!=null)}else E=0;S=E?0:2}}return S!=0||P!=null&&P.fd&&(S=Xd(Y)),S}var ra=64,Lu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Wc=24,Vc=32,Zd=8,ks=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Re("Predictor0","PredictorAdd0"),L.Predictor0=function(){return 4278190080},L.Predictor1=function(S){return S},L.Predictor2=function(S,E,P){return E[P+0]},L.Predictor3=function(S,E,P){return E[P+1]},L.Predictor4=function(S,E,P){return E[P-1]},L.Predictor5=function(S,E,P){return je(je(S,E[P+1]),E[P+0])},L.Predictor6=function(S,E,P){return je(S,E[P-1])},L.Predictor7=function(S,E,P){return je(S,E[P+0])},L.Predictor8=function(S,E,P){return je(E[P-1],E[P+0])},L.Predictor9=function(S,E,P){return je(E[P+0],E[P+1])},L.Predictor10=function(S,E,P){return je(je(S,E[P-1]),je(E[P+0],E[P+1]))},L.Predictor11=function(S,E,P){var Y=E[P+0];return 0>=rt(Y>>24&255,S>>24&255,(E=E[P-1])>>24&255)+rt(Y>>16&255,S>>16&255,E>>16&255)+rt(Y>>8&255,S>>8&255,E>>8&255)+rt(255&Y,255&S,255&E)?Y:S},L.Predictor12=function(S,E,P){var Y=E[P+0];return(Ze((S>>24&255)+(Y>>24&255)-((E=E[P-1])>>24&255))<<24|Ze((S>>16&255)+(Y>>16&255)-(E>>16&255))<<16|Ze((S>>8&255)+(Y>>8&255)-(E>>8&255))<<8|Ze((255&S)+(255&Y)-(255&E)))>>>0},L.Predictor13=function(S,E,P){var Y=E[P-1];return(ut((S=je(S,E[P+0]))>>24&255,Y>>24&255)<<24|ut(S>>16&255,Y>>16&255)<<16|ut(S>>8&255,Y>>8&255)<<8|ut(S>>0&255,Y>>0&255))>>>0};var Am=L.PredictorAdd0;L.PredictorAdd1=Pe,Re("Predictor2","PredictorAdd2"),Re("Predictor3","PredictorAdd3"),Re("Predictor4","PredictorAdd4"),Re("Predictor5","PredictorAdd5"),Re("Predictor6","PredictorAdd6"),Re("Predictor7","PredictorAdd7"),Re("Predictor8","PredictorAdd8"),Re("Predictor9","PredictorAdd9"),Re("Predictor10","PredictorAdd10"),Re("Predictor11","PredictorAdd11"),Re("Predictor12","PredictorAdd12"),Re("Predictor13","PredictorAdd13");var ph=L.PredictorAdd2;ft("ColorIndexInverseTransform","MapARGB","32b",function(S){return S>>8&255},function(S){return S}),ft("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(S){return S},function(S){return S>>8&255});var Tp,oo=L.ColorIndexInverseTransform,ka=L.MapARGB,Ru=L.VP8LColorIndexInverseTransformAlpha,mh=L.MapAlpha,Wl=L.VP8LPredictorsAdd=[];Wl.length=16,(L.VP8LPredictors=[]).length=16,(L.VP8LPredictorsAdd_C=[]).length=16,(L.VP8LPredictors_C=[]).length=16;var Mu,os,Ra,Fu,Es,Do,ul,Io,mi,Lo,Ui,_s,Yc,cl,Jd,Pu,zu,qu,Gc,ef,Bu,Vl,Qc,gi,Ks,In,Ln,Pr,ji=a(511),lo=a(2041),$u=a(225),Uu=a(767),Yl=0,Op=lo,Kc=$u,Ea=Uu,uo=ji,Wa=0,tf=1,dl=2,gh=3,Xc=4,Gl=5,Dp=6,bh=7,Hu=8,Ql=9,nf=10,Ip=[2,3,7],co=[3,3,11],Xs=[280,256,256,256,40],Zc=[0,1,1,1,0],Kl=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Xl=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Jc=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],fb=8,yh=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],xh=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ia=null,bi=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],er=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Wu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],fl=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Cm=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ed=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],hb=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Zl=[],ls=[],Zs=[],pb=1,rf=2,hl=[],_a=[];dt("UpsampleRgbLinePair",qn,3),dt("UpsampleBgrLinePair",ei,3),dt("UpsampleRgbaLinePair",To,4),dt("UpsampleBgraLinePair",Ca,4),dt("UpsampleArgbLinePair",Ni,4),dt("UpsampleRgba4444LinePair",_i,2),dt("UpsampleRgb565LinePair",ui,2);var Jl=L.UpsampleRgbLinePair,Vu=L.UpsampleBgrLinePair,pl=L.UpsampleRgbaLinePair,Lp=L.UpsampleBgraLinePair,Rp=L.UpsampleArgbLinePair,af=L.UpsampleRgba4444LinePair,Mp=L.UpsampleRgb565LinePair,ml=16,aa=1<<ml-1,Yu=-227,Fp=482,b2=6,mb=0,y2=a(256),sa=a(256),km=a(256),vh=a(256),wh=a(Fp-Yu),Em=a(Fp-Yu);Oo("YuvToRgbRow",qn,3),Oo("YuvToBgrRow",ei,3),Oo("YuvToRgbaRow",To,4),Oo("YuvToBgraRow",Ca,4),Oo("YuvToArgbRow",Ni,4),Oo("YuvToRgba4444Row",_i,2),Oo("YuvToRgb565Row",ui,2);var td=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],eu=[0,2,8],x2=[8,7,6,4,4,2,2,2,1,1,1,1],gb=1;this.WebPDecodeRGBA=function(S,E,P,Y,ie){var ue=tf,ce=new Vd,pe=new Yr;ce.ba=pe,pe.S=ue,pe.width=[pe.width],pe.height=[pe.height];var xe=pe.width,Ee=pe.height,Fe=new ir;if(Fe==null||S==null)var Xe=2;else n(Fe!=null),Xe=Kd(S,E,P,Fe.width,Fe.height,Fe.Pd,Fe.Qd,Fe.format,null);if(Xe!=0?xe=0:(xe!=null&&(xe[0]=Fe.width[0]),Ee!=null&&(Ee[0]=Fe.height[0]),xe=1),xe){pe.width=pe.width[0],pe.height=pe.height[0],Y!=null&&(Y[0]=pe.width),ie!=null&&(ie[0]=pe.height);e:{if(Y=new ro,(ie=new ch).data=S,ie.w=E,ie.ha=P,ie.kd=1,E=[0],n(ie!=null),((S=Kd(ie.data,ie.w,ie.ha,null,null,null,E,null,ie))==0||S==7)&&E[0]&&(S=4),(E=S)==0){if(n(ce!=null),Y.data=ie.data,Y.w=ie.w+ie.offset,Y.ha=ie.ha-ie.offset,Y.put=oi,Y.ac=wr,Y.bc=Sa,Y.ma=ce,ie.xa){if((S=ki())==null){ce=1;break e}if(function(Qe,We){var yt=[0],at=[0],ze=[0];t:for(;;){if(Qe==null)return 0;if(We==null)return Qe.a=2,0;if(Qe.l=We,Qe.a=0,J(Qe.m,We.data,We.w,We.ha),!Lt(Qe.m,yt,at,ze)){Qe.a=3;break t}if(Qe.xb=rf,We.width=yt[0],We.height=at[0],!Jn(yt[0],at[0],1,Qe,null))break t;return 1}return n(Qe.a!=0),0}(S,Y)){if(Y=(E=Hc(Y.width,Y.height,ce.Oa,ce.ba))==0){t:{Y=S;n:for(;;){if(Y==null){Y=0;break t}if(n(Y.s.yc!=null),n(Y.s.Ya!=null),n(0<Y.s.Wb),n((P=Y.l)!=null),n((ie=P.ma)!=null),Y.xb!=0){if(Y.ca=ie.ba,Y.tb=ie.tb,n(Y.ca!=null),!Iu(ie.Oa,P,gh)){Y.a=2;break n}if(!no(Y,P.width)||P.da)break n;if((P.da||cn(Y.ca.S))&&Ge(),11>Y.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Y.ca.f.kb.F!=null&&Ge()),Y.Pb&&0<Y.s.ua&&Y.s.vb.X==null&&!V(Y.s.vb,Y.s.Wa.Xa)){Y.a=1;break n}Y.xb=0}if(!Bi(Y,Y.V,Y.Ba,Y.c,Y.i,P.o,ys))break n;ie.Dc=Y.Ma,Y=1;break t}n(Y.a!=0),Y=0}Y=!Y}Y&&(E=S.a)}else E=S.a}else{if((S=new $c)==null){ce=1;break e}if(S.Fa=ie.na,S.P=ie.P,S.qc=ie.Sa,io(S,Y)){if((E=Hc(Y.width,Y.height,ce.Oa,ce.ba))==0){if(S.Aa=0,P=ce.Oa,n((ie=S)!=null),P!=null){if(0<(xe=0>(xe=P.Md)?0:100<xe?255:255*xe/100)){for(Ee=Fe=0;4>Ee;++Ee)12>(Xe=ie.pb[Ee]).lc&&(Xe.ia=xe*x2[0>Xe.lc?0:Xe.lc]>>3),Fe|=Xe.ia;Fe&&(alert("todo:VP8InitRandom"),ie.ia=1)}ie.Ga=P.Id,100<ie.Ga?ie.Ga=100:0>ie.Ga&&(ie.Ga=0)}Bl(S,Y)||(E=S.a)}}else E=S.a}E==0&&ce.Oa!=null&&ce.Oa.fd&&(E=Xd(ce.ba))}ce=E}ue=ce!=0?null:11>ue?pe.f.RGBA.eb:pe.f.kb.y}else ue=null;return ue};var bb=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(L,$){for(var Z="",O=0;O<4;O++)Z+=String.fromCharCode(L[$++]);return Z}function f(L,$){return(L[$+0]<<0|L[$+1]<<8|L[$+2]<<16)>>>0}function m(L,$){return(L[$+0]<<0|L[$+1]<<8|L[$+2]<<16|L[$+3]<<24)>>>0}new u;var b=[0],g=[0],x=[],y=new u,A=e,w=function(L,$){var Z={},O=0,T=!1,R=0,N=0;if(Z.frames=[],!function(B,ee,re,oe){for(var Ce=0;Ce<oe;Ce++)if(B[ee+Ce]!=re.charCodeAt(Ce))return!0;return!1}(L,$,"RIFF",4)){for(m(L,$+=4),$+=8;$<L.length;){var G=d(L,$),W=m(L,$+=4);$+=4;var Q=W+(1&W);switch(G){case"VP8 ":case"VP8L":Z.frames[O]===void 0&&(Z.frames[O]={}),(U=Z.frames[O]).src_off=T?N:$-8,U.src_size=R+W+8,O++,T&&(T=!1,R=0,N=0);break;case"VP8X":(U=Z.header={}).feature_flags=L[$];var J=$+4;U.canvas_width=1+f(L,J),J+=3,U.canvas_height=1+f(L,J),J+=3;break;case"ALPH":T=!0,R=Q+8,N=$-8;break;case"ANIM":(U=Z.header).bgcolor=m(L,$),J=$+4,U.loop_count=(le=L)[(q=J)+0]<<0|le[q+1]<<8,J+=2;break;case"ANMF":var se,U;(U=Z.frames[O]={}).offset_x=2*f(L,$),$+=3,U.offset_y=2*f(L,$),$+=3,U.width=1+f(L,$),$+=3,U.height=1+f(L,$),$+=3,U.duration=f(L,$),$+=3,se=L[$++],U.dispose=1&se,U.blend=se>>1&1}G!="ANMF"&&($+=Q)}var le,q;return Z}}(A,0);w.response=A,w.rgbaoutput=!0,w.dataurl=!1;var C=w.header?w.header:null,j=w.frames?w.frames:null;if(C){C.loop_counter=C.loop_count,b=[C.canvas_height],g=[C.canvas_width];for(var F=0;F<j.length&&j[F].blend!=0;F++);}var M=j[0],z=y.WebPDecodeRGBA(A,M.src_off,M.src_size,g,b);M.rgba=z,M.imgwidth=g[0],M.imgheight=b[0];for(var _=0;_<g[0]*b[0]*4;_++)x[_]=z[_];return this.width=g,this.height=b,this.data=x,this}(function(e){var n=function(){return typeof FS=="function"},t=function(b,g,x,y){var A=4,w=s;switch(y){case e.image_compression.FAST:A=1,w=a;break;case e.image_compression.MEDIUM:A=6,w=l;break;case e.image_compression.SLOW:A=9,w=u}b=r(b,g,x,w);var C=FS(b,{level:A});return e.__addimage__.arrayBufferToBinaryString(C)},r=function(b,g,x,y){for(var A,w,C,j=b.length/g,F=new Uint8Array(b.length+j),M=f(),z=0;z<j;z+=1){if(C=z*g,A=b.subarray(C,C+g),y)F.set(y(A,x,w),C+z);else{for(var _,L=M.length,$=[];_<L;_+=1)$[_]=M[_](A,x,w);var Z=m($.concat());F.set($[Z],C+z)}w=A}return F},i=function(b){var g=Array.apply([],b);return g.unshift(0),g},a=function(b,g){var x,y=[],A=b.length;y[0]=1;for(var w=0;w<A;w+=1)x=b[w-g]||0,y[w+1]=b[w]-x+256&255;return y},s=function(b,g,x){var y,A=[],w=b.length;A[0]=2;for(var C=0;C<w;C+=1)y=x&&x[C]||0,A[C+1]=b[C]-y+256&255;return A},l=function(b,g,x){var y,A,w=[],C=b.length;w[0]=3;for(var j=0;j<C;j+=1)y=b[j-g]||0,A=x&&x[j]||0,w[j+1]=b[j]+256-(y+A>>>1)&255;return w},u=function(b,g,x){var y,A,w,C,j=[],F=b.length;j[0]=4;for(var M=0;M<F;M+=1)y=b[M-g]||0,A=x&&x[M]||0,w=x&&x[M-g]||0,C=d(y,A,w),j[M+1]=b[M]-C+256&255;return j},d=function(b,g,x){if(b===g&&g===x)return b;var y=Math.abs(g-x),A=Math.abs(b-x),w=Math.abs(b+g-x-x);return y<=A&&y<=w?b:A<=w?g:x},f=function(){return[i,a,s,l,u]},m=function(b){var g=b.map(function(x){return x.reduce(function(y,A){return y+Math.abs(A)},0)});return g.indexOf(Math.min.apply(null,g))};e.processPNG=function(b,g,x,y){var A,w,C,j,F,M,z,_,L,$,Z,O,T,R,N,G=this.decode.FLATE_DECODE,W="";if(this.__addimage__.isArrayBuffer(b)&&(b=new Uint8Array(b)),this.__addimage__.isArrayBufferView(b)){if(b=(C=new dK(b)).imgData,w=C.bits,A=C.colorSpace,F=C.colors,[4,6].indexOf(C.colorType)!==-1){if(C.bits===8){L=(_=C.pixelBitlength==32?new Uint32Array(C.decodePixels().buffer):C.pixelBitlength==16?new Uint16Array(C.decodePixels().buffer):new Uint8Array(C.decodePixels().buffer)).length,Z=new Uint8Array(L*C.colors),$=new Uint8Array(L);var Q,J=C.pixelBitlength-C.bits;for(R=0,N=0;R<L;R++){for(T=_[R],Q=0;Q<J;)Z[N++]=T>>>Q&255,Q+=C.bits;$[R]=T>>>Q&255}}if(C.bits===16){L=(_=new Uint32Array(C.decodePixels().buffer)).length,Z=new Uint8Array(L*(32/C.pixelBitlength)*C.colors),$=new Uint8Array(L*(32/C.pixelBitlength)),O=C.colors>1,R=0,N=0;for(var se=0;R<L;)T=_[R++],Z[N++]=T>>>0&255,O&&(Z[N++]=T>>>16&255,T=_[R++],Z[N++]=T>>>0&255),$[se++]=T>>>16&255;w=8}y!==e.image_compression.NONE&&n()?(b=t(Z,C.width*C.colors,C.colors,y),z=t($,C.width,1,y)):(b=Z,z=$,G=void 0)}if(C.colorType===3&&(A=this.color_spaces.INDEXED,M=C.palette,C.transparency.indexed)){var U=C.transparency.indexed,le=0;for(R=0,L=U.length;R<L;++R)le+=U[R];if((le/=255)===L-1&&U.indexOf(0)!==-1)j=[U.indexOf(0)];else if(le!==L){for(_=C.decodePixels(),$=new Uint8Array(_.length),R=0,L=_.length;R<L;R++)$[R]=U[_[R]];z=t($,C.width,1)}}var q=function(B){var ee;switch(B){case e.image_compression.FAST:ee=11;break;case e.image_compression.MEDIUM:ee=13;break;case e.image_compression.SLOW:ee=14;break;default:ee=12}return ee}(y);return G===this.decode.FLATE_DECODE&&(W="/Predictor "+q+" "),W+="/Colors "+F+" /BitsPerComponent "+w+" /Columns "+C.width,(this.__addimage__.isArrayBuffer(b)||this.__addimage__.isArrayBufferView(b))&&(b=this.__addimage__.arrayBufferToBinaryString(b)),(z&&this.__addimage__.isArrayBuffer(z)||this.__addimage__.isArrayBufferView(z))&&(z=this.__addimage__.arrayBufferToBinaryString(z)),{alias:x,data:b,index:g,filter:G,decodeParameters:W,transparency:j,palette:M,sMask:z,predictor:q,width:C.width,height:C.height,bitsPerComponent:w,colorSpace:A}}}})(on.API),function(e){e.processGIF89A=function(n,t,r,i){var a=new fK(n),s=a.width,l=a.height,u=[];a.decodeAndBlitFrameRGBA(0,u);var d={data:u,width:s,height:l},f=new pw(100).encode(d,100);return e.processJPEG.call(this,f,t,r,i)},e.processGIF87A=e.processGIF89A}(on.API),uu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var n=0;n<e;n++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[n]={red:i,green:r,blue:t,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},uu.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,n=this.width*this.height*4;this.data=new Uint8Array(n),this[e]()}catch(t){Kr.log("bit decode error:"+t)}},uu.prototype.bit1=function(){var e,n=Math.ceil(this.width/8),t=n%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<n;i++)for(var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+8*i*4,l=0;l<8&&8*i+l<this.width;l++){var u=this.palette[a>>7-l&1];this.data[s+4*l]=u.blue,this.data[s+4*l+1]=u.green,this.data[s+4*l+2]=u.red,this.data[s+4*l+3]=255}t!==0&&(this.pos+=4-t)}},uu.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),n=e%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+2*i*4,l=a>>4,u=15&a,d=this.palette[l];if(this.data[s]=d.blue,this.data[s+1]=d.green,this.data[s+2]=d.red,this.data[s+3]=255,2*i+1>=this.width)break;d=this.palette[u],this.data[s+4]=d.blue,this.data[s+4+1]=d.green,this.data[s+4+2]=d.red,this.data[s+4+3]=255}n!==0&&(this.pos+=4-n)}},uu.prototype.bit8=function(){for(var e=this.width%4,n=this.height-1;n>=0;n--){for(var t=this.bottom_up?n:this.height-1-n,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*r;if(i<this.palette.length){var s=this.palette[i];this.data[a]=s.red,this.data[a+1]=s.green,this.data[a+2]=s.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}e!==0&&(this.pos+=4-e)}},uu.prototype.bit15=function(){for(var e=this.width%3,n=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(a&n)/n*255|0,l=(a>>5&n)/n*255|0,u=(a>>10&n)/n*255|0,d=a>>15?255:0,f=r*this.width*4+4*i;this.data[f]=u,this.data[f+1]=l,this.data[f+2]=s,this.data[f+3]=d}this.pos+=e}},uu.prototype.bit16=function(){for(var e=this.width%3,n=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(s&n)/n*255|0,u=(s>>5&t)/t*255|0,d=(s>>11)/n*255|0,f=i*this.width*4+4*a;this.data[f]=d,this.data[f+1]=u,this.data[f+2]=l,this.data[f+3]=255}this.pos+=e}},uu.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*t;this.data[s]=a,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=255}this.pos+=this.width%4}},uu.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var n=this.bottom_up?e:this.height-1-e,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+4*t;this.data[l]=a,this.data[l+1]=i,this.data[l+2]=r,this.data[l+3]=s}},uu.prototype.getData=function(){return this.data},function(e){e.processBMP=function(n,t,r,i){var a=new uu(n,!1),s=a.width,l=a.height,u={data:a.getData(),width:s,height:l},d=new pw(100).encode(u,100);return e.processJPEG.call(this,d,t,r,i)}}(on.API),GE.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(n,t,r,i){var a=new GE(n),s=a.width,l=a.height,u={data:a.getData(),width:s,height:l},d=new pw(100).encode(u,100);return e.processJPEG.call(this,d,t,r,i)}}(on.API),on.API.processRGBA=function(e,n,t){for(var r=e.data,i=r.length,a=new Uint8Array(i/4*3),s=new Uint8Array(i/4),l=0,u=0,d=0;d<i;d+=4){var f=r[d],m=r[d+1],b=r[d+2],g=r[d+3];a[l++]=f,a[l++]=m,a[l++]=b,s[u++]=g}var x=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:x,index:n,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},on.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},l0=on.API,Oy=l0.getCharWidthsArray=function(e,n){var t,r,i=(n=n||{}).font||this.internal.getFont(),a=n.fontSize||this.internal.getFontSize(),s=n.charSpace||this.internal.getCharSpace(),l=n.widths?n.widths:i.metadata.Unicode.widths,u=l.fof?l.fof:1,d=n.kerning?n.kerning:i.metadata.Unicode.kerning,f=d.fof?d.fof:1,m=n.doKerning!==!1,b=0,g=e.length,x=0,y=l[0]||u,A=[];for(t=0;t<g;t++)r=e.charCodeAt(t),typeof i.metadata.widthOfString=="function"?A.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+s*(1e3/a)||0)/1e3):(b=m&&Xr(d[r])==="object"&&!isNaN(parseInt(d[r][x],10))?d[r][x]/f:0,A.push((l[r]||y)/u+b)),x=r;return A},HE=l0.getStringUnitWidth=function(e,n){var t=(n=n||{}).fontSize||this.internal.getFontSize(),r=n.font||this.internal.getFont(),i=n.charSpace||this.internal.getCharSpace();return l0.processArabic&&(e=l0.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,t,i)/t:Oy.apply(this,arguments).reduce(function(a,s){return a+s},0)},WE=function(e,n,t,r){for(var i=[],a=0,s=e.length,l=0;a!==s&&l+n[a]<t;)l+=n[a],a++;i.push(e.slice(0,a));var u=a;for(l=0;a!==s;)l+n[a]>r&&(i.push(e.slice(u,a)),l=0,u=a),l+=n[a],a++;return u!==a&&i.push(e.slice(u,a)),i},VE=function(e,n,t){t||(t={});var r,i,a,s,l,u,d,f=[],m=[f],b=t.textIndent||0,g=0,x=0,y=e.split(" "),A=Oy.apply(this,[" ",t])[0];if(u=t.lineIndent===-1?y[0].length+2:t.lineIndent||0){var w=Array(u).join(" "),C=[];y.map(function(F){(F=F.split(/\s*\n/)).length>1?C=C.concat(F.map(function(M,z){return(z&&M.length?`
`:"")+M})):C.push(F[0])}),y=C,u=HE.apply(this,[w,t])}for(a=0,s=y.length;a<s;a++){var j=0;if(r=y[a],u&&r[0]==`
`&&(r=r.substr(1),j=1),b+g+(x=(i=Oy.apply(this,[r,t])).reduce(function(F,M){return F+M},0))>n||j){if(x>n){for(l=WE.apply(this,[r,i,n-(b+g),n]),f.push(l.shift()),f=[l.pop()];l.length;)m.push([l.shift()]);x=i.slice(r.length-(f[0]?f[0].length:0)).reduce(function(F,M){return F+M},0)}else f=[r];m.push(f),b=x+u,g=A}else f.push(r),b+=g+x,g=A}return d=u?function(F,M){return(M?w:"")+F.join(" ")}:function(F){return F.join(" ")},m.map(d)},l0.splitTextToSize=function(e,n,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),a=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var m=this.internal.getFont(f.fontName,f.fontStyle);return m.metadata.Unicode?{widths:m.metadata.Unicode.widths||{0:1},kerning:m.metadata.Unicode.kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var s=1*this.internal.scaleFactor*n/i;a.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=t.lineIndent;var l,u,d=[];for(l=0,u=r.length;l<u;l++)d=d.concat(VE.apply(this,[r[l],s,a]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var n="klmnopqrstuvwxyz",t={},r={},i=0;i<n.length;i++)t[n[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=n[i];var a=function(m){return"0x"+parseInt(m,10).toString(16)},s=e.__fontmetrics__.compress=function(m){var b,g,x,y,A=["{"];for(var w in m){if(b=m[w],isNaN(parseInt(w,10))?g="'"+w+"'":(w=parseInt(w,10),g=(g=a(w).slice(2)).slice(0,-1)+r[g.slice(-1)]),typeof b=="number")b<0?(x=a(b).slice(3),y="-"):(x=a(b).slice(2),y=""),x=y+x.slice(0,-1)+r[x.slice(-1)];else{if(Xr(b)!=="object")throw new Error("Don't know what to do with value type "+Xr(b)+".");x=s(b)}A.push(g+x)}return A.push("}"),A.join("")},l=e.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var b,g,x,y,A={},w=1,C=A,j=[],F="",M="",z=m.length-1,_=1;_<z;_+=1)(y=m[_])=="'"?b?(x=b.join(""),b=void 0):b=[]:b?b.push(y):y=="{"?(j.push([C,x]),C={},x=void 0):y=="}"?((g=j.pop())[0][g[1]]=C,x=void 0,C=g[0]):y=="-"?w=-1:x===void 0?t.hasOwnProperty(y)?(F+=t[y],x=parseInt(F,16)*w,w=1,F=""):F+=y:t.hasOwnProperty(y)?(M+=t[y],C[x]=parseInt(M,16)*w,w=1,x=void 0,M=""):M+=y;return A},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(m){var b=m.font,g=f.Unicode[b.postScriptName];g&&(b.metadata.Unicode={},b.metadata.Unicode.widths=g.widths,b.metadata.Unicode.kerning=g.kerning);var x=d.Unicode[b.postScriptName];x&&(b.metadata.Unicode.encoding=x,b.encoding=x.codePages[0])}])}(on.API),function(e){var n=function(t){for(var r=t.length,i=new Uint8Array(r),a=0;a<r;a++)i[a]=t.charCodeAt(a);return i};e.API.events.push(["addFont",function(t){var r=void 0,i=t.font,a=t.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(s,l){l=/^\x00\x01\x00\x00/.test(l)?n(l):n(K1(l)),s.metadata=e.API.TTFFont.open(l),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(i,r)}}])}(on),function(e){function n(){return(fn.canvg?Promise.resolve(fn.canvg):wi(()=>import("./index.es-CNx6xYqH.js"),__vite__mapDeps([6,4,1]))).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}on.API.addSvgAsImage=function(t,r,i,a,s,l,u,d){if(isNaN(r)||isNaN(i))throw Kr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(s))throw Kr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=a,f.height=s;var m=f.getContext("2d");m.fillStyle="#fff",m.fillRect(0,0,f.width,f.height);var b={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return n().then(function(x){return x.fromString(m,t,b)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(b)}).then(function(){g.addImage(f.toDataURL("image/jpeg",1),r,i,a,s,u,d)})}}(),on.API.putTotalPages=function(e){var n,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(n=new RegExp(e,"g"),t=this.internal.getNumberOfPages()):(n=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(n,t);return this},on.API.viewerPreferences=function(e,n){var t;e=e||{},n=n||!1;var r,i,a,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(s),u=[],d=0,f=0,m=0;function b(x,y){var A,w=!1;for(A=0;A<x.length;A+=1)x[A]===y&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,e==="reset"||n===!0){var g=l.length;for(m=0;m<g;m+=1)t[l[m]].value=t[l[m]].defaultValue,t[l[m]].explicitSet=!1}if(Xr(e)==="object"){for(i in e)if(a=e[i],b(l,i)&&a!==void 0){if(t[i].type==="boolean"&&typeof a=="boolean")t[i].value=a;else if(t[i].type==="name"&&b(t[i].valueSet,a))t[i].value=a;else if(t[i].type==="integer"&&Number.isInteger(a))t[i].value=a;else if(t[i].type==="array"){for(d=0;d<a.length;d+=1)if(r=!0,a[d].length===1&&typeof a[d][0]=="number")u.push(String(a[d]-1));else if(a[d].length>1){for(f=0;f<a[d].length;f+=1)typeof a[d][f]!="number"&&(r=!1);r===!0&&u.push([a[d][0]-1,a[d][1]-1].join(" "))}t[i].value="["+u.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,y=[];for(x in t)t[x].explicitSet===!0&&(t[x].type==="name"?y.push("/"+x+" /"+t[x].value):y.push("/"+x+" "+t[x].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(e){var n=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(r)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),u=unescape(encodeURIComponent("</x:xmpmeta>")),d=a.length+s.length+l.length+i.length+u.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(i+a+s+l+u),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",n)),this}}(on.API),function(e){var n=e.API,t=n.pdfEscape16=function(a,s){for(var l,u=s.metadata.Unicode.widths,d=["","0","00","000","0000"],f=[""],m=0,b=a.length;m<b;++m){if(l=s.metadata.characterToGlyph(a.charCodeAt(m)),s.metadata.glyIdsUsed.push(l),s.metadata.toUnicode[l]=a.charCodeAt(m),u.indexOf(l)==-1&&(u.push(l),u.push([parseInt(s.metadata.widthOfGlyph(l),10)])),l=="0")return f.join("");l=l.toString(16),f.push(d[4-l.length],l)}return f.join("")},r=function(a){var s,l,u,d,f,m,b;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,u=[],m=0,b=(l=Object.keys(a).sort(function(g,x){return g-x})).length;m<b;m++)s=l[m],u.length>=100&&(f+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar`,u=[]),a[s]!==void 0&&a[s]!==null&&typeof a[s].toString=="function"&&(d=("0000"+a[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),u.push("<"+s+"><"+d+">"));return u.length&&(f+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar
`),f+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};n.events.push(["putFont",function(a){(function(s){var l=s.font,u=s.out,d=s.newObject,f=s.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var m=l.metadata.Unicode.widths,b=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),g="",x=0;x<b.length;x++)g+=String.fromCharCode(b[x]);var y=d();f({data:g,addLength1:!0,objectId:y}),u("endobj");var A=d();f({data:r(l.metadata.toUnicode),addLength1:!0,objectId:A}),u("endobj");var w=d();u("<<"),u("/Type /FontDescriptor"),u("/FontName /"+j0(l.fontName)),u("/FontFile2 "+y+" 0 R"),u("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),u("/Flags "+l.metadata.flags),u("/StemV "+l.metadata.stemV),u("/ItalicAngle "+l.metadata.italicAngle),u("/Ascent "+l.metadata.ascender),u("/Descent "+l.metadata.decender),u("/CapHeight "+l.metadata.capHeight),u(">>"),u("endobj");var C=d();u("<<"),u("/Type /Font"),u("/BaseFont /"+j0(l.fontName)),u("/FontDescriptor "+w+" 0 R"),u("/W "+e.API.PDFObject.convert(m)),u("/CIDToGIDMap /Identity"),u("/DW 1000"),u("/Subtype /CIDFontType2"),u("/CIDSystemInfo"),u("<<"),u("/Supplement 0"),u("/Registry (Adobe)"),u("/Ordering ("+l.encoding+")"),u(">>"),u(">>"),u("endobj"),l.objectNumber=d(),u("<<"),u("/Type /Font"),u("/Subtype /Type0"),u("/ToUnicode "+A+" 0 R"),u("/BaseFont /"+j0(l.fontName)),u("/Encoding /"+l.encoding),u("/DescendantFonts ["+C+" 0 R]"),u(">>"),u("endobj"),l.isAlreadyPutted=!0}})(a)}]),n.events.push(["putFont",function(a){(function(s){var l=s.font,u=s.out,d=s.newObject,f=s.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var m=l.metadata.rawData,b="",g=0;g<m.length;g++)b+=String.fromCharCode(m[g]);var x=d();f({data:b,addLength1:!0,objectId:x}),u("endobj");var y=d();f({data:r(l.metadata.toUnicode),addLength1:!0,objectId:y}),u("endobj");var A=d();u("<<"),u("/Descent "+l.metadata.decender),u("/CapHeight "+l.metadata.capHeight),u("/StemV "+l.metadata.stemV),u("/Type /FontDescriptor"),u("/FontFile2 "+x+" 0 R"),u("/Flags 96"),u("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),u("/FontName /"+j0(l.fontName)),u("/ItalicAngle "+l.metadata.italicAngle),u("/Ascent "+l.metadata.ascender),u(">>"),u("endobj"),l.objectNumber=d();for(var w=0;w<l.metadata.hmtx.widths.length;w++)l.metadata.hmtx.widths[w]=parseInt(l.metadata.hmtx.widths[w]*(1e3/l.metadata.head.unitsPerEm));u("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+j0(l.fontName)+"/FontDescriptor "+A+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),u("endobj"),l.isAlreadyPutted=!0}})(a)}]);var i=function(a){var s,l=a.text||"",u=a.x,d=a.y,f=a.options||{},m=a.mutex||{},b=m.pdfEscape,g=m.activeFontKey,x=m.fonts,y=g,A="",w=0,C="",j=x[y].encoding;if(x[y].encoding!=="Identity-H")return{text:l,x:u,y:d,options:f,mutex:m};for(C=l,y=g,Array.isArray(l)&&(C=l[0]),w=0;w<C.length;w+=1)x[y].metadata.hasOwnProperty("cmap")&&(s=x[y].metadata.cmap.unicode.codeMap[C[w].charCodeAt(0)]),s||C[w].charCodeAt(0)<256&&x[y].metadata.hasOwnProperty("Unicode")?A+=C[w]:A+="";var F="";return parseInt(y.slice(1))<14||j==="WinAnsiEncoding"?F=b(A,y).split("").map(function(M){return M.charCodeAt(0).toString(16)}).join(""):j==="Identity-H"&&(F=t(A,x[y])),m.isHex=!0,{text:F,x:u,y:d,options:f,mutex:m}};n.events.push(["postProcessText",function(a){var s=a.text||"",l=[],u={text:s,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(s)){var d=0;for(d=0;d<s.length;d+=1)Array.isArray(s[d])&&s[d].length===3?l.push([i(Object.assign({},u,{text:s[d][0]})).text,s[d][1],s[d][2]]):l.push(i(Object.assign({},u,{text:s[d]})).text);a.text=l}else a.text=i(Object.assign({},u,{text:s})).text}])}(on),function(e){var n=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(t){return n.call(this),this.internal.vFS[t]!==void 0},e.addFileToVFS=function(t,r){return n.call(this),this.internal.vFS[t]=r,this},e.getFileFromVFS=function(t){return n.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(on.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var i,a,s,l,u,d,f,m=n,b=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},A=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),C=!1,j=0;this.__bidiEngine__={};var F=function(O){var T=O.charCodeAt(),R=T>>8,N=y[R];return N!==void 0?m[256*N+(255&T)]:R===252||R===253?"AL":w.test(R)?"L":R===8?"R":"N"},M=function(O){for(var T,R=0;R<O.length;R++){if((T=F(O.charAt(R)))==="L")return!1;if(T==="R")return!0}return!1},z=function(O,T,R,N){var G,W,Q,J,se=T[N];switch(se){case"L":case"R":C=!1;break;case"N":case"AN":break;case"EN":C&&(se="AN");break;case"AL":C=!0,se="R";break;case"WS":se="N";break;case"CS":N<1||N+1>=T.length||(G=R[N-1])!=="EN"&&G!=="AN"||(W=T[N+1])!=="EN"&&W!=="AN"?se="N":C&&(W="AN"),se=W===G?W:"N";break;case"ES":se=(G=N>0?R[N-1]:"B")==="EN"&&N+1<T.length&&T[N+1]==="EN"?"EN":"N";break;case"ET":if(N>0&&R[N-1]==="EN"){se="EN";break}if(C){se="N";break}for(Q=N+1,J=T.length;Q<J&&T[Q]==="ET";)Q++;se=Q<J&&T[Q]==="EN"?"EN":"N";break;case"NSM":if(s&&!l){for(J=T.length,Q=N+1;Q<J&&T[Q]==="NSM";)Q++;if(Q<J){var U=O[N],le=U>=1425&&U<=2303||U===64286;if(G=T[Q],le&&(G==="R"||G==="AL")){se="R";break}}}se=N<1||(G=T[N-1])==="B"?"N":R[N-1];break;case"B":C=!1,i=!0,se=j;break;case"S":a=!0,se="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":C=!1;break;case"BN":se="N"}return se},_=function(O,T,R){var N=O.split("");return R&&L(N,R,{hiLevel:j}),N.reverse(),T&&T.reverse(),N.join("")},L=function(O,T,R){var N,G,W,Q,J,se=-1,U=O.length,le=0,q=[],B=j?g:b,ee=[];for(C=!1,i=!1,a=!1,G=0;G<U;G++)ee[G]=F(O[G]);for(W=0;W<U;W++){if(J=le,q[W]=z(O,ee,q,W),N=240&(le=B[J][x[q[W]]]),le&=15,T[W]=Q=B[le][5],N>0)if(N===16){for(G=se;G<W;G++)T[G]=1;se=-1}else se=-1;if(B[le][6])se===-1&&(se=W);else if(se>-1){for(G=se;G<W;G++)T[G]=Q;se=-1}ee[W]==="B"&&(T[W]=0),R.hiLevel|=Q}a&&function(re,oe,Ce){for(var ye=0;ye<Ce;ye++)if(re[ye]==="S"){oe[ye]=j;for(var Se=ye-1;Se>=0&&re[Se]==="WS";Se--)oe[Se]=j}}(ee,T,U)},$=function(O,T,R,N,G){if(!(G.hiLevel<O)){if(O===1&&j===1&&!i)return T.reverse(),void(R&&R.reverse());for(var W,Q,J,se,U=T.length,le=0;le<U;){if(N[le]>=O){for(J=le+1;J<U&&N[J]>=O;)J++;for(se=le,Q=J-1;se<Q;se++,Q--)W=T[se],T[se]=T[Q],T[Q]=W,R&&(W=R[se],R[se]=R[Q],R[Q]=W);le=J}le++}}},Z=function(O,T,R){var N=O.split(""),G={hiLevel:j};return R||(R=[]),L(N,R,G),function(W,Q,J){if(J.hiLevel!==0&&f)for(var se,U=0;U<W.length;U++)Q[U]===1&&(se=A.indexOf(W[U]))>=0&&(W[U]=A[se+1])}(N,R,G),$(2,N,T,R,G),$(1,N,T,R,G),N.join("")};return this.__bidiEngine__.doBidiReorder=function(O,T,R){if(function(G,W){if(W)for(var Q=0;Q<G.length;Q++)W[Q]=Q;l===void 0&&(l=M(G)),d===void 0&&(d=M(G))}(O,T),s||!u||d)if(s&&u&&l^d)j=l?1:0,O=_(O,T,R);else if(!s&&u&&d)j=l?1:0,O=Z(O,T,R),O=_(O,T);else if(!s||l||u||d){if(s&&!u&&l^d)O=_(O,T),l?(j=0,O=Z(O,T,R)):(j=1,O=Z(O,T,R),O=_(O,T));else if(s&&l&&!u&&d)j=1,O=Z(O,T,R),O=_(O,T);else if(!s&&!u&&l^d){var N=f;l?(j=1,O=Z(O,T,R),j=0,f=!1,O=Z(O,T,R),f=N):(j=0,O=Z(O,T,R),O=_(O,T),j=1,f=!1,O=Z(O,T,R),f=N,O=_(O,T))}}else j=0,O=Z(O,T,R);else j=l?1:0,O=Z(O,T,R);return O},this.__bidiEngine__.setOptions=function(O){O&&(s=O.isInputVisual,u=O.isOutputVisual,l=O.isInputRtl,d=O.isOutputRtl,f=O.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var n=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var a=r.options||{};r.mutex,a.lang;var s=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,t.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var l=0;for(s=[],l=0;l<i.length;l+=1)Object.prototype.toString.call(i[l])==="[object Array]"?s.push([t.doBidiReorder(i[l][0]),i[l][1],i[l][2]]):s.push([t.doBidiReorder(i[l])]);r.text=s}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(on),on.API.TTFFont=function(){function e(n){var t;if(this.rawData=n,t=this.contents=new Jf(n),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new _K(this),this.registerTTF()}return e.open=function(n){return new e(n)},e.prototype.parse=function(){return this.directory=new hK(this.contents),this.head=new mK(this),this.name=new vK(this),this.cmap=new eD(this),this.toUnicode={},this.hhea=new gK(this),this.maxp=new wK(this),this.hmtx=new SK(this),this.post=new yK(this),this.os2=new bK(this),this.loca=new EK(this),this.glyf=new AK(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var n,t,r,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,l,u,d;for(d=[],s=0,l=(u=this.bbox).length;s<l;s++)n=u[s],d.push(Math.round(n*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),(32768&(t=i>>16))!=0&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(n){var t;return((t=this.cmap.unicode)!=null?t.codeMap[n]:void 0)||0},e.prototype.widthOfGlyph=function(n){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(n).advance*t},e.prototype.widthOfString=function(n,t,r){var i,a,s,l;for(s=0,a=0,l=(n=""+n).length;0<=l?a<l:a>l;a=0<=l?++a:--a)i=n.charCodeAt(a),s+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return s*(t/1e3)},e.prototype.lineHeight=function(n,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*n},e}();var Eu,Jf=function(){function e(n){this.data=n??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(n){return this.data[this.pos++]=n},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(n){return this.writeByte(n>>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt32=function(){var n;return(n=this.readUInt32())>=2147483648?n-4294967296:n},e.prototype.writeInt32=function(n){return n<0&&(n+=4294967296),this.writeUInt32(n)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(n){return this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt16=function(){var n;return(n=this.readUInt16())>=32768?n-65536:n},e.prototype.writeInt16=function(n){return n<0&&(n+=65536),this.writeUInt16(n)},e.prototype.readString=function(n){var t,r;for(r=[],t=0;0<=n?t<n:t>n;t=0<=n?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(n){var t,r,i;for(i=[],t=0,r=n.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(n.charCodeAt(t)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(n){return this.writeInt16(n)},e.prototype.readLongLong=function(){var n,t,r,i,a,s,l,u;return n=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),a=this.readByte(),s=this.readByte(),l=this.readByte(),u=this.readByte(),128&n?-1*(72057594037927940*(255^n)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^a)+65536*(255^s)+256*(255^l)+(255^u)+1):72057594037927940*n+281474976710656*t+1099511627776*r+4294967296*i+16777216*a+65536*s+256*l+u},e.prototype.writeLongLong=function(n){var t,r;return t=Math.floor(n/4294967296),r=4294967295&n,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(n){return this.writeInt32(n)},e.prototype.read=function(n){var t,r;for(t=[],r=0;0<=n?r<n:r>n;r=0<=n?++r:--r)t.push(this.readByte());return t},e.prototype.write=function(n){var t,r,i,a;for(a=[],r=0,i=n.length;r<i;r++)t=n[r],a.push(this.writeByte(t));return a},e}(),hK=function(){var e;function n(t){var r,i,a;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return n.prototype.encode=function(t){var r,i,a,s,l,u,d,f,m,b,g,x,y;for(y in g=Object.keys(t).length,u=Math.log(2),m=16*Math.floor(Math.log(g)/u),s=Math.floor(m/u),f=16*g-m,(i=new Jf).writeInt(this.scalarType),i.writeShort(g),i.writeShort(m),i.writeShort(s),i.writeShort(f),a=16*g,d=i.pos+a,l=null,x=[],t)for(b=t[y],i.writeString(y),i.writeInt(e(b)),i.writeInt(d),i.writeInt(b.length),x=x.concat(b),y==="head"&&(l=d),d+=b.length;d%4;)x.push(0),d++;return i.write(x),r=2981146554-e(i.data),i.pos=l+8,i.writeUInt32(r),i.data},e=function(t){var r,i,a,s;for(t=tD.call(t);t.length%4;)t.push(0);for(a=new Jf(t),i=0,r=0,s=t.length;r<s;r=r+=4)i+=a.readUInt32();return 4294967295&i},n}(),pK={}.hasOwnProperty,qc=function(e,n){for(var t in n)pK.call(n,t)&&(e[t]=n[t]);function r(){this.constructor=e}return r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype,e};Eu=function(){function e(n){var t;this.file=n,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var mK=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return qc(n,Eu),n.prototype.tag="head",n.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},n.prototype.encode=function(t){var r;return(r=new Jf).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},n}(),QE=function(){function e(n,t){var r,i,a,s,l,u,d,f,m,b,g,x,y,A,w,C,j;switch(this.platformID=n.readUInt16(),this.encodingID=n.readShort(),this.offset=t+n.readInt(),m=n.pos,n.pos=this.offset,this.format=n.readUInt16(),this.length=n.readUInt16(),this.language=n.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(u=0;u<256;++u)this.codeMap[u]=n.readByte();break;case 4:for(g=n.readUInt16(),b=g/2,n.pos+=6,a=function(){var F,M;for(M=[],u=F=0;0<=b?F<b:F>b;u=0<=b?++F:--F)M.push(n.readUInt16());return M}(),n.pos+=2,y=function(){var F,M;for(M=[],u=F=0;0<=b?F<b:F>b;u=0<=b?++F:--F)M.push(n.readUInt16());return M}(),d=function(){var F,M;for(M=[],u=F=0;0<=b?F<b:F>b;u=0<=b?++F:--F)M.push(n.readUInt16());return M}(),f=function(){var F,M;for(M=[],u=F=0;0<=b?F<b:F>b;u=0<=b?++F:--F)M.push(n.readUInt16());return M}(),i=(this.length-n.pos+this.offset)/2,l=function(){var F,M;for(M=[],u=F=0;0<=i?F<i:F>i;u=0<=i?++F:--F)M.push(n.readUInt16());return M}(),u=w=0,j=a.length;w<j;u=++w)for(A=a[u],r=C=x=y[u];x<=A?C<=A:C>=A;r=x<=A?++C:--C)f[u]===0?s=r+d[u]:(s=l[f[u]/2+(r-x)-(b-u)]||0)!==0&&(s+=d[u]),this.codeMap[r]=65535&s}n.pos=m}return e.encode=function(n,t){var r,i,a,s,l,u,d,f,m,b,g,x,y,A,w,C,j,F,M,z,_,L,$,Z,O,T,R,N,G,W,Q,J,se,U,le,q,B,ee,re,oe,Ce,ye,Se,Te,Le,He;switch(N=new Jf,s=Object.keys(n).sort(function(Ye,V){return Ye-V}),t){case"macroman":for(y=0,A=function(){var Ye=[];for(x=0;x<256;++x)Ye.push(0);return Ye}(),C={0:0},a={},G=0,se=s.length;G<se;G++)C[Se=n[i=s[G]]]==null&&(C[Se]=++y),a[i]={old:n[i],new:C[n[i]]},A[i]=C[n[i]];return N.writeUInt16(1),N.writeUInt16(0),N.writeUInt32(12),N.writeUInt16(0),N.writeUInt16(262),N.writeUInt16(0),N.write(A),{charMap:a,subtable:N.data,maxGlyphID:y+1};case"unicode":for(T=[],m=[],j=0,C={},r={},w=d=null,W=0,U=s.length;W<U;W++)C[M=n[i=s[W]]]==null&&(C[M]=++j),r[i]={old:M,new:C[M]},l=C[M]-i,w!=null&&l===d||(w&&m.push(w),T.push(i),d=l),w=i;for(w&&m.push(w),m.push(65535),T.push(65535),Z=2*($=T.length),L=2*Math.pow(Math.log($)/Math.LN2,2),b=Math.log(L/2)/Math.LN2,_=2*$-L,u=[],z=[],g=[],x=Q=0,le=T.length;Q<le;x=++Q){if(O=T[x],f=m[x],O===65535){u.push(0),z.push(0);break}if(O-(R=r[O].new)>=32768)for(u.push(0),z.push(2*(g.length+$-x)),i=J=O;O<=f?J<=f:J>=f;i=O<=f?++J:--J)g.push(r[i].new);else u.push(R-O),z.push(0)}for(N.writeUInt16(3),N.writeUInt16(1),N.writeUInt32(12),N.writeUInt16(4),N.writeUInt16(16+8*$+2*g.length),N.writeUInt16(0),N.writeUInt16(Z),N.writeUInt16(L),N.writeUInt16(b),N.writeUInt16(_),Ce=0,q=m.length;Ce<q;Ce++)i=m[Ce],N.writeUInt16(i);for(N.writeUInt16(0),ye=0,B=T.length;ye<B;ye++)i=T[ye],N.writeUInt16(i);for(Te=0,ee=u.length;Te<ee;Te++)l=u[Te],N.writeUInt16(l);for(Le=0,re=z.length;Le<re;Le++)F=z[Le],N.writeUInt16(F);for(He=0,oe=g.length;He<oe;He++)y=g[He],N.writeUInt16(y);return{charMap:r,subtable:N.data,maxGlyphID:j+1}}},e}(),eD=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return qc(n,Eu),n.prototype.tag="cmap",n.prototype.parse=function(t){var r,i,a;for(t.pos=this.offset,this.version=t.readUInt16(),a=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)r=new QE(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},n.encode=function(t,r){var i,a;return r==null&&(r="macroman"),i=QE.encode(t,r),(a=new Jf).writeUInt16(0),a.writeUInt16(1),i.table=a.data.concat(i.subtable),i},n}(),gK=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return qc(n,Eu),n.prototype.tag="hhea",n.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},n}(),bK=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return qc(n,Eu),n.prototype.tag="OS/2",n.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},n}(),yK=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return qc(n,Eu),n.prototype.tag="post",n.prototype.parse=function(t){var r,i,a;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var s;for(i=t.readUInt16(),this.glyphNameIndex=[],s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],a=[];t.pos<this.offset+this.length;)r=t.readByte(),a.push(this.names.push(t.readString(r)));return a;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=(function(){var l,u,d;for(d=[],s=l=0,u=this.file.maxp.numGlyphs;0<=u?l<u:l>u;s=0<=u?++l:--l)d.push(t.readUInt32());return d}).call(this)}},n}(),xK=function(e,n){this.raw=e,this.length=e.length,this.platformID=n.platformID,this.encodingID=n.encodingID,this.languageID=n.languageID},vK=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return qc(n,Eu),n.prototype.tag="name",n.prototype.parse=function(t){var r,i,a,s,l,u,d,f,m,b,g;for(t.pos=this.offset,t.readShort(),r=t.readShort(),u=t.readShort(),i=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+u+t.readShort()});for(d={},s=m=0,b=i.length;m<b;s=++m)a=i[s],t.pos=a.offset,f=t.readString(a.length),l=new xK(f,a),d[g=a.nameID]==null&&(d[g]=[]),d[a.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},n}(),wK=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return qc(n,Eu),n.prototype.tag="maxp",n.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},n}(),SK=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return qc(n,Eu),n.prototype.tag="hmtx",n.prototype.parse=function(t){var r,i,a,s,l,u,d;for(t.pos=this.offset,this.metrics=[],r=0,u=this.file.hhea.numberOfMetrics;0<=u?r<u:r>u;r=0<=u?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var f,m;for(m=[],r=f=0;0<=a?f<a:f>a;r=0<=a?++f:--f)m.push(t.readInt16());return m}(),this.widths=(function(){var f,m,b,g;for(g=[],f=0,m=(b=this.metrics).length;f<m;f++)s=b[f],g.push(s.advance);return g}).call(this),i=this.widths[this.widths.length-1],d=[],r=l=0;0<=a?l<a:l>a;r=0<=a?++l:--l)d.push(this.widths.push(i));return d},n.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},n}(),tD=[].slice,AK=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return qc(n,Eu),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(t){var r,i,a,s,l,u,d,f,m,b;return t in this.cache?this.cache[t]:(s=this.file.loca,r=this.file.contents,i=s.indexOf(t),(a=s.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,l=(u=new Jf(r.read(a))).readShort(),f=u.readShort(),b=u.readShort(),d=u.readShort(),m=u.readShort(),this.cache[t]=l===-1?new kK(u,f,b,d,m):new CK(u,l,f,b,d,m),this.cache[t]))},n.prototype.encode=function(t,r,i){var a,s,l,u,d;for(l=[],s=[],u=0,d=r.length;u<d;u++)a=t[r[u]],s.push(l.length),a&&(l=l.concat(a.encode(i)));return s.push(l.length),{table:l,offsets:s}},n}(),CK=function(){function e(n,t,r,i,a,s){this.raw=n,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=a,this.yMax=s,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),kK=function(){function e(n,t,r,i,a){var s,l;for(this.raw=n,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;l=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&l;)s.pos+=1&l?4:2,128&l?s.pos+=8:64&l?s.pos+=4:8&l&&(s.pos+=2)}return e.prototype.encode=function(){var n,t,r;for(t=new Jf(tD.call(this.raw.data)),n=0,r=this.glyphIDs.length;n<r;++n)t.pos=this.glyphOffsets[n];return t.data},e}(),EK=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return qc(n,Eu),n.prototype.tag="loca",n.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,s;for(s=[],i=0,a=this.length;i<a;i+=2)s.push(2*t.readUInt16());return s}).call(this):(function(){var a,s;for(s=[],i=0,a=this.length;i<a;i+=4)s.push(t.readUInt32());return s}).call(this)},n.prototype.indexOf=function(t){return this.offsets[t]},n.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},n.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),a=0,s=0,l=0;l<i.length;++l)if(i[l]=a,s<r.length&&r[s]==l){++s,i[l]=a;var u=this.offsets[l],d=this.offsets[l+1]-u;d>0&&(a+=d)}for(var f=new Array(4*i.length),m=0;m<i.length;++m)f[4*m+3]=255&i[m],f[4*m+2]=(65280&i[m])>>8,f[4*m+1]=(16711680&i[m])>>16,f[4*m]=(4278190080&i[m])>>24;return f},n}(),_K=function(){function e(n){this.font=n,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var n,t,r,i,a;for(t in i=this.font.cmap.tables[0].codeMap,n={},a=this.subset)r=a[t],n[t]=i[r];return n},e.prototype.glyphsFor=function(n){var t,r,i,a,s,l,u;for(i={},s=0,l=n.length;s<l;s++)i[a=n[s]]=this.font.glyf.glyphFor(a);for(a in t=[],i)(r=i[a])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(a in u=this.glyphsFor(t))r=u[a],i[a]=r;return i},e.prototype.encode=function(n,t){var r,i,a,s,l,u,d,f,m,b,g,x,y,A,w;for(i in r=eD.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(n),g={0:0},w=r.charMap)g[(u=w[i]).old]=u.new;for(x in b=r.maxGlyphID,s)x in g||(g[x]=b++);return f=function(C){var j,F;for(j in F={},C)F[C[j]]=j;return F}(g),m=Object.keys(f).sort(function(C,j){return C-j}),y=function(){var C,j,F;for(F=[],C=0,j=m.length;C<j;C++)l=m[C],F.push(f[l]);return F}(),a=this.font.glyf.encode(s,y,g),d=this.font.loca.encode(a.offsets,y),A={cmap:this.font.cmap.raw(),glyf:a.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(A["OS/2"]=this.font.os2.raw()),this.font.directory.encode(A)},e}();on.API.PDFObject=function(){var e;function n(){}return e=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},n.convert=function(t){var r,i,a,s;if(Array.isArray(t))return"["+function(){var l,u,d;for(d=[],l=0,u=t.length;l<u;l++)r=t[l],d.push(n.convert(r));return d}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+e(t.getUTCFullYear(),4)+e(t.getUTCMonth(),2)+e(t.getUTCDate(),2)+e(t.getUTCHours(),2)+e(t.getUTCMinutes(),2)+e(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in a=["<<"],t)s=t[i],a.push("/"+i+" "+n.convert(s));return a.push(">>"),a.join(`
`)}return""+t},n}();const NK=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),jK=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var mw;const TK=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),KE=(mw=String.fromCodePoint)!==null&&mw!==void 0?mw:function(e){let n="";return e>65535&&(e-=65536,n+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),n+=String.fromCharCode(e),n};function OK(e){var n;return e>=55296&&e<=57343||e>1114111?65533:(n=TK.get(e))!==null&&n!==void 0?n:e}var ts;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(ts||(ts={}));const DK=32;var zf;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(zf||(zf={}));function HS(e){return e>=ts.ZERO&&e<=ts.NINE}function IK(e){return e>=ts.UPPER_A&&e<=ts.UPPER_F||e>=ts.LOWER_A&&e<=ts.LOWER_F}function LK(e){return e>=ts.UPPER_A&&e<=ts.UPPER_Z||e>=ts.LOWER_A&&e<=ts.LOWER_Z||HS(e)}function RK(e){return e===ts.EQUALS||LK(e)}var Ka;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ka||(Ka={}));var pc;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(pc||(pc={}));class MK{constructor(n,t,r){this.decodeTree=n,this.emitCodePoint=t,this.errors=r,this.state=Ka.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=pc.Strict}startEntity(n){this.decodeMode=n,this.state=Ka.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(n,t){switch(this.state){case Ka.EntityStart:return n.charCodeAt(t)===ts.NUM?(this.state=Ka.NumericStart,this.consumed+=1,this.stateNumericStart(n,t+1)):(this.state=Ka.NamedEntity,this.stateNamedEntity(n,t));case Ka.NumericStart:return this.stateNumericStart(n,t);case Ka.NumericDecimal:return this.stateNumericDecimal(n,t);case Ka.NumericHex:return this.stateNumericHex(n,t);case Ka.NamedEntity:return this.stateNamedEntity(n,t)}}stateNumericStart(n,t){return t>=n.length?-1:(n.charCodeAt(t)|DK)===ts.LOWER_X?(this.state=Ka.NumericHex,this.consumed+=1,this.stateNumericHex(n,t+1)):(this.state=Ka.NumericDecimal,this.stateNumericDecimal(n,t))}addToNumericResult(n,t,r,i){if(t!==r){const a=r-t;this.result=this.result*Math.pow(i,a)+Number.parseInt(n.substr(t,a),i),this.consumed+=a}}stateNumericHex(n,t){const r=t;for(;t<n.length;){const i=n.charCodeAt(t);if(HS(i)||IK(i))t+=1;else return this.addToNumericResult(n,r,t,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(n,r,t,16),-1}stateNumericDecimal(n,t){const r=t;for(;t<n.length;){const i=n.charCodeAt(t);if(HS(i))t+=1;else return this.addToNumericResult(n,r,t,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(n,r,t,10),-1}emitNumericEntity(n,t){var r;if(this.consumed<=t)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(n===ts.SEMI)this.consumed+=1;else if(this.decodeMode===pc.Strict)return 0;return this.emitCodePoint(OK(this.result),this.consumed),this.errors&&(n!==ts.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(n,t){const{decodeTree:r}=this;let i=r[this.treeIndex],a=(i&zf.VALUE_LENGTH)>>14;for(;t<n.length;t++,this.excess++){const s=n.charCodeAt(t);if(this.treeIndex=FK(r,i,this.treeIndex+Math.max(1,a),s),this.treeIndex<0)return this.result===0||this.decodeMode===pc.Attribute&&(a===0||RK(s))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],a=(i&zf.VALUE_LENGTH)>>14,a!==0){if(s===ts.SEMI)return this.emitNamedEntityData(this.treeIndex,a,this.consumed+this.excess);this.decodeMode!==pc.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var n;const{result:t,decodeTree:r}=this,i=(r[t]&zf.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,i,this.consumed),(n=this.errors)===null||n===void 0||n.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(n,t,r){const{decodeTree:i}=this;return this.emitCodePoint(t===1?i[n]&~zf.VALUE_LENGTH:i[n+1],r),t===3&&this.emitCodePoint(i[n+2],r),r}end(){var n;switch(this.state){case Ka.NamedEntity:return this.result!==0&&(this.decodeMode!==pc.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ka.NumericDecimal:return this.emitNumericEntity(0,2);case Ka.NumericHex:return this.emitNumericEntity(0,3);case Ka.NumericStart:return(n=this.errors)===null||n===void 0||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ka.EntityStart:return 0}}}function FK(e,n,t,r){const i=(n&zf.BRANCH_LENGTH)>>7,a=n&zf.JUMP_TABLE;if(i===0)return a!==0&&r===a?t:-1;if(a){const u=r-a;return u<0||u>=i?-1:e[t+u]-1}let s=t,l=s+i-1;for(;s<=l;){const u=s+l>>>1,d=e[u];if(d<r)s=u+1;else if(d>r)l=u-1;else return e[u+i]}return-1}var an;(function(e){e[e.Tab=9]="Tab",e[e.NewLine=10]="NewLine",e[e.FormFeed=12]="FormFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationMark=33]="ExclamationMark",e[e.Number=35]="Number",e[e.Amp=38]="Amp",e[e.SingleQuote=39]="SingleQuote",e[e.DoubleQuote=34]="DoubleQuote",e[e.Dash=45]="Dash",e[e.Slash=47]="Slash",e[e.Zero=48]="Zero",e[e.Nine=57]="Nine",e[e.Semi=59]="Semi",e[e.Lt=60]="Lt",e[e.Eq=61]="Eq",e[e.Gt=62]="Gt",e[e.Questionmark=63]="Questionmark",e[e.UpperA=65]="UpperA",e[e.LowerA=97]="LowerA",e[e.UpperF=70]="UpperF",e[e.LowerF=102]="LowerF",e[e.UpperZ=90]="UpperZ",e[e.LowerZ=122]="LowerZ",e[e.LowerX=120]="LowerX",e[e.OpeningSquareBracket=91]="OpeningSquareBracket"})(an||(an={}));var Et;(function(e){e[e.Text=1]="Text",e[e.BeforeTagName=2]="BeforeTagName",e[e.InTagName=3]="InTagName",e[e.InSelfClosingTag=4]="InSelfClosingTag",e[e.BeforeClosingTagName=5]="BeforeClosingTagName",e[e.InClosingTagName=6]="InClosingTagName",e[e.AfterClosingTagName=7]="AfterClosingTagName",e[e.BeforeAttributeName=8]="BeforeAttributeName",e[e.InAttributeName=9]="InAttributeName",e[e.AfterAttributeName=10]="AfterAttributeName",e[e.BeforeAttributeValue=11]="BeforeAttributeValue",e[e.InAttributeValueDq=12]="InAttributeValueDq",e[e.InAttributeValueSq=13]="InAttributeValueSq",e[e.InAttributeValueNq=14]="InAttributeValueNq",e[e.BeforeDeclaration=15]="BeforeDeclaration",e[e.InDeclaration=16]="InDeclaration",e[e.InProcessingInstruction=17]="InProcessingInstruction",e[e.BeforeComment=18]="BeforeComment",e[e.CDATASequence=19]="CDATASequence",e[e.InSpecialComment=20]="InSpecialComment",e[e.InCommentLike=21]="InCommentLike",e[e.BeforeSpecialS=22]="BeforeSpecialS",e[e.BeforeSpecialT=23]="BeforeSpecialT",e[e.SpecialStartSequence=24]="SpecialStartSequence",e[e.InSpecialTag=25]="InSpecialTag",e[e.InEntity=26]="InEntity"})(Et||(Et={}));function md(e){return e===an.Space||e===an.NewLine||e===an.Tab||e===an.FormFeed||e===an.CarriageReturn}function Dy(e){return e===an.Slash||e===an.Gt||md(e)}function PK(e){return e>=an.LowerA&&e<=an.LowerZ||e>=an.UpperA&&e<=an.UpperZ}var mc;(function(e){e[e.NoValue=0]="NoValue",e[e.Unquoted=1]="Unquoted",e[e.Single=2]="Single",e[e.Double=3]="Double"})(mc||(mc={}));const ja={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97]),XmpEnd:new Uint8Array([60,47,120,109,112])};class zK{constructor({xmlMode:n=!1,decodeEntities:t=!0},r){this.cbs=r,this.state=Et.Text,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=Et.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.xmlMode=n,this.decodeEntities=t,this.entityDecoder=new MK(n?jK:NK,(i,a)=>this.emitCodePoint(i,a))}reset(){this.state=Et.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=Et.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(n){this.offset+=this.buffer.length,this.buffer=n,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}stateText(n){n===an.Lt||!this.decodeEntities&&this.fastForwardTo(an.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=Et.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&n===an.Amp&&this.startEntity()}stateSpecialStartSequence(n){const t=this.sequenceIndex===this.currentSequence.length;if(!(t?Dy(n):(n|32)===this.currentSequence[this.sequenceIndex]))this.isSpecial=!1;else if(!t){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=Et.InTagName,this.stateInTagName(n)}stateInSpecialTag(n){if(this.sequenceIndex===this.currentSequence.length){if(n===an.Gt||md(n)){const t=this.index-this.currentSequence.length;if(this.sectionStart<t){const r=this.index;this.index=t,this.cbs.ontext(this.sectionStart,t),this.index=r}this.isSpecial=!1,this.sectionStart=t+2,this.stateInClosingTagName(n);return}this.sequenceIndex=0}(n|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===ja.TitleEnd?this.decodeEntities&&n===an.Amp&&this.startEntity():this.fastForwardTo(an.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(n===an.Lt)}stateCDATASequence(n){n===ja.Cdata[this.sequenceIndex]?++this.sequenceIndex===ja.Cdata.length&&(this.state=Et.InCommentLike,this.currentSequence=ja.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=Et.InDeclaration,this.stateInDeclaration(n))}fastForwardTo(n){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===n)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(n){n===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===ja.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=Et.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):n!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(n){return this.xmlMode?!Dy(n):PK(n)}startSpecial(n,t){this.isSpecial=!0,this.currentSequence=n,this.sequenceIndex=t,this.state=Et.SpecialStartSequence}stateBeforeTagName(n){if(n===an.ExclamationMark)this.state=Et.BeforeDeclaration,this.sectionStart=this.index+1;else if(n===an.Questionmark)this.state=Et.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(n)){const t=n|32;this.sectionStart=this.index,this.xmlMode?this.state=Et.InTagName:t===ja.ScriptEnd[2]?this.state=Et.BeforeSpecialS:t===ja.TitleEnd[2]||t===ja.XmpEnd[2]?this.state=Et.BeforeSpecialT:this.state=Et.InTagName}else n===an.Slash?this.state=Et.BeforeClosingTagName:(this.state=Et.Text,this.stateText(n))}stateInTagName(n){Dy(n)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=Et.BeforeAttributeName,this.stateBeforeAttributeName(n))}stateBeforeClosingTagName(n){md(n)||(n===an.Gt?this.state=Et.Text:(this.state=this.isTagStartChar(n)?Et.InClosingTagName:Et.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(n){(n===an.Gt||md(n))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=Et.AfterClosingTagName,this.stateAfterClosingTagName(n))}stateAfterClosingTagName(n){(n===an.Gt||this.fastForwardTo(an.Gt))&&(this.state=Et.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(n){n===an.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=Et.InSpecialTag,this.sequenceIndex=0):this.state=Et.Text,this.sectionStart=this.index+1):n===an.Slash?this.state=Et.InSelfClosingTag:md(n)||(this.state=Et.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(n){n===an.Gt?(this.cbs.onselfclosingtag(this.index),this.state=Et.Text,this.sectionStart=this.index+1,this.isSpecial=!1):md(n)||(this.state=Et.BeforeAttributeName,this.stateBeforeAttributeName(n))}stateInAttributeName(n){(n===an.Eq||Dy(n))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=this.index,this.state=Et.AfterAttributeName,this.stateAfterAttributeName(n))}stateAfterAttributeName(n){n===an.Eq?this.state=Et.BeforeAttributeValue:n===an.Slash||n===an.Gt?(this.cbs.onattribend(mc.NoValue,this.sectionStart),this.sectionStart=-1,this.state=Et.BeforeAttributeName,this.stateBeforeAttributeName(n)):md(n)||(this.cbs.onattribend(mc.NoValue,this.sectionStart),this.state=Et.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(n){n===an.DoubleQuote?(this.state=Et.InAttributeValueDq,this.sectionStart=this.index+1):n===an.SingleQuote?(this.state=Et.InAttributeValueSq,this.sectionStart=this.index+1):md(n)||(this.sectionStart=this.index,this.state=Et.InAttributeValueNq,this.stateInAttributeValueNoQuotes(n))}handleInAttributeValue(n,t){n===t||!this.decodeEntities&&this.fastForwardTo(t)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(t===an.DoubleQuote?mc.Double:mc.Single,this.index+1),this.state=Et.BeforeAttributeName):this.decodeEntities&&n===an.Amp&&this.startEntity()}stateInAttributeValueDoubleQuotes(n){this.handleInAttributeValue(n,an.DoubleQuote)}stateInAttributeValueSingleQuotes(n){this.handleInAttributeValue(n,an.SingleQuote)}stateInAttributeValueNoQuotes(n){md(n)||n===an.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(mc.Unquoted,this.index),this.state=Et.BeforeAttributeName,this.stateBeforeAttributeName(n)):this.decodeEntities&&n===an.Amp&&this.startEntity()}stateBeforeDeclaration(n){n===an.OpeningSquareBracket?(this.state=Et.CDATASequence,this.sequenceIndex=0):this.state=n===an.Dash?Et.BeforeComment:Et.InDeclaration}stateInDeclaration(n){(n===an.Gt||this.fastForwardTo(an.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=Et.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(n){(n===an.Gt||this.fastForwardTo(an.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=Et.Text,this.sectionStart=this.index+1)}stateBeforeComment(n){n===an.Dash?(this.state=Et.InCommentLike,this.currentSequence=ja.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=Et.InDeclaration}stateInSpecialComment(n){(n===an.Gt||this.fastForwardTo(an.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=Et.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(n){const t=n|32;t===ja.ScriptEnd[3]?this.startSpecial(ja.ScriptEnd,4):t===ja.StyleEnd[3]?this.startSpecial(ja.StyleEnd,4):(this.state=Et.InTagName,this.stateInTagName(n))}stateBeforeSpecialT(n){switch(n|32){case ja.TitleEnd[3]:{this.startSpecial(ja.TitleEnd,4);break}case ja.TextareaEnd[3]:{this.startSpecial(ja.TextareaEnd,4);break}case ja.XmpEnd[3]:{this.startSpecial(ja.XmpEnd,4);break}default:this.state=Et.InTagName,this.stateInTagName(n)}}startEntity(){this.baseState=this.state,this.state=Et.InEntity,this.entityStart=this.index,this.entityDecoder.startEntity(this.xmlMode?pc.Strict:this.baseState===Et.Text||this.baseState===Et.InSpecialTag?pc.Legacy:pc.Attribute)}stateInEntity(){const n=this.entityDecoder.write(this.buffer,this.index-this.offset);n>=0?(this.state=this.baseState,n===0&&(this.index=this.entityStart)):this.index=this.offset+this.buffer.length-1}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===Et.Text||this.state===Et.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===Et.InAttributeValueDq||this.state===Et.InAttributeValueSq||this.state===Et.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){for(;this.shouldContinue();){const n=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case Et.Text:{this.stateText(n);break}case Et.SpecialStartSequence:{this.stateSpecialStartSequence(n);break}case Et.InSpecialTag:{this.stateInSpecialTag(n);break}case Et.CDATASequence:{this.stateCDATASequence(n);break}case Et.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(n);break}case Et.InAttributeName:{this.stateInAttributeName(n);break}case Et.InCommentLike:{this.stateInCommentLike(n);break}case Et.InSpecialComment:{this.stateInSpecialComment(n);break}case Et.BeforeAttributeName:{this.stateBeforeAttributeName(n);break}case Et.InTagName:{this.stateInTagName(n);break}case Et.InClosingTagName:{this.stateInClosingTagName(n);break}case Et.BeforeTagName:{this.stateBeforeTagName(n);break}case Et.AfterAttributeName:{this.stateAfterAttributeName(n);break}case Et.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(n);break}case Et.BeforeAttributeValue:{this.stateBeforeAttributeValue(n);break}case Et.BeforeClosingTagName:{this.stateBeforeClosingTagName(n);break}case Et.AfterClosingTagName:{this.stateAfterClosingTagName(n);break}case Et.BeforeSpecialS:{this.stateBeforeSpecialS(n);break}case Et.BeforeSpecialT:{this.stateBeforeSpecialT(n);break}case Et.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(n);break}case Et.InSelfClosingTag:{this.stateInSelfClosingTag(n);break}case Et.InDeclaration:{this.stateInDeclaration(n);break}case Et.BeforeDeclaration:{this.stateBeforeDeclaration(n);break}case Et.BeforeComment:{this.stateBeforeComment(n);break}case Et.InProcessingInstruction:{this.stateInProcessingInstruction(n);break}case Et.InEntity:{this.stateInEntity();break}}this.index++}this.cleanup()}finish(){this.state===Et.InEntity&&(this.entityDecoder.end(),this.state=this.baseState),this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const n=this.buffer.length+this.offset;this.sectionStart>=n||(this.state===Et.InCommentLike?this.currentSequence===ja.CdataEnd?this.cbs.oncdata(this.sectionStart,n,0):this.cbs.oncomment(this.sectionStart,n,0):this.state===Et.InTagName||this.state===Et.BeforeAttributeName||this.state===Et.BeforeAttributeValue||this.state===Et.AfterAttributeName||this.state===Et.InAttributeName||this.state===Et.InAttributeValueSq||this.state===Et.InAttributeValueDq||this.state===Et.InAttributeValueNq||this.state===Et.InClosingTagName||this.cbs.ontext(this.sectionStart,n))}emitCodePoint(n,t){this.baseState!==Et.Text&&this.baseState!==Et.InSpecialTag?(this.sectionStart<this.entityStart&&this.cbs.onattribdata(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+t,this.index=this.sectionStart-1,this.cbs.onattribentity(n)):(this.sectionStart<this.entityStart&&this.cbs.ontext(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+t,this.index=this.sectionStart-1,this.cbs.ontextentity(n,this.sectionStart))}}const u0=new Set(["input","option","optgroup","select","button","datalist","textarea"]),Br=new Set(["p"]),XE=new Set(["thead","tbody"]),ZE=new Set(["dd","dt"]),JE=new Set(["rt","rp"]),qK=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",Br],["h1",Br],["h2",Br],["h3",Br],["h4",Br],["h5",Br],["h6",Br],["select",u0],["input",u0],["output",u0],["button",u0],["datalist",u0],["textarea",u0],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",ZE],["dt",ZE],["address",Br],["article",Br],["aside",Br],["blockquote",Br],["details",Br],["div",Br],["dl",Br],["fieldset",Br],["figcaption",Br],["figure",Br],["footer",Br],["form",Br],["header",Br],["hr",Br],["main",Br],["nav",Br],["ol",Br],["pre",Br],["section",Br],["table",Br],["ul",Br],["rt",JE],["rp",JE],["tbody",XE],["tfoot",XE]]),BK=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),e_=new Set(["math","svg"]),t_=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),$K=/\s|\//;class UK{constructor(n,t={}){var r,i,a,s,l,u;this.options=t,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=n??{},this.htmlMode=!this.options.xmlMode,this.lowerCaseTagNames=(r=t.lowerCaseTags)!==null&&r!==void 0?r:this.htmlMode,this.lowerCaseAttributeNames=(i=t.lowerCaseAttributeNames)!==null&&i!==void 0?i:this.htmlMode,this.recognizeSelfClosing=(a=t.recognizeSelfClosing)!==null&&a!==void 0?a:!this.htmlMode,this.tokenizer=new((s=t.Tokenizer)!==null&&s!==void 0?s:zK)(this.options,this),this.foreignContext=[!this.htmlMode],(u=(l=this.cbs).onparserinit)===null||u===void 0||u.call(l,this)}ontext(n,t){var r,i;const a=this.getSlice(n,t);this.endIndex=t-1,(i=(r=this.cbs).ontext)===null||i===void 0||i.call(r,a),this.startIndex=t}ontextentity(n,t){var r,i;this.endIndex=t-1,(i=(r=this.cbs).ontext)===null||i===void 0||i.call(r,KE(n)),this.startIndex=t}isVoidElement(n){return this.htmlMode&&BK.has(n)}onopentagname(n,t){this.endIndex=t;let r=this.getSlice(n,t);this.lowerCaseTagNames&&(r=r.toLowerCase()),this.emitOpenTag(r)}emitOpenTag(n){var t,r,i,a;this.openTagStart=this.startIndex,this.tagname=n;const s=this.htmlMode&&qK.get(n);if(s)for(;this.stack.length>0&&s.has(this.stack[0]);){const l=this.stack.shift();(r=(t=this.cbs).onclosetag)===null||r===void 0||r.call(t,l,!0)}this.isVoidElement(n)||(this.stack.unshift(n),this.htmlMode&&(e_.has(n)?this.foreignContext.unshift(!0):t_.has(n)&&this.foreignContext.unshift(!1))),(a=(i=this.cbs).onopentagname)===null||a===void 0||a.call(i,n),this.cbs.onopentag&&(this.attribs={})}endOpenTag(n){var t,r;this.startIndex=this.openTagStart,this.attribs&&((r=(t=this.cbs).onopentag)===null||r===void 0||r.call(t,this.tagname,this.attribs,n),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(n){this.endIndex=n,this.endOpenTag(!1),this.startIndex=n+1}onclosetag(n,t){var r,i,a,s,l,u,d,f;this.endIndex=t;let m=this.getSlice(n,t);if(this.lowerCaseTagNames&&(m=m.toLowerCase()),this.htmlMode&&(e_.has(m)||t_.has(m))&&this.foreignContext.shift(),this.isVoidElement(m))this.htmlMode&&m==="br"&&((s=(a=this.cbs).onopentagname)===null||s===void 0||s.call(a,"br"),(u=(l=this.cbs).onopentag)===null||u===void 0||u.call(l,"br",{},!0),(f=(d=this.cbs).onclosetag)===null||f===void 0||f.call(d,"br",!1));else{const b=this.stack.indexOf(m);if(b!==-1)for(let g=0;g<=b;g++){const x=this.stack.shift();(i=(r=this.cbs).onclosetag)===null||i===void 0||i.call(r,x,g!==b)}else this.htmlMode&&m==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=t+1}onselfclosingtag(n){this.endIndex=n,this.recognizeSelfClosing||this.foreignContext[0]?(this.closeCurrentTag(!1),this.startIndex=n+1):this.onopentagend(n)}closeCurrentTag(n){var t,r;const i=this.tagname;this.endOpenTag(n),this.stack[0]===i&&((r=(t=this.cbs).onclosetag)===null||r===void 0||r.call(t,i,!n),this.stack.shift())}onattribname(n,t){this.startIndex=n;const r=this.getSlice(n,t);this.attribname=this.lowerCaseAttributeNames?r.toLowerCase():r}onattribdata(n,t){this.attribvalue+=this.getSlice(n,t)}onattribentity(n){this.attribvalue+=KE(n)}onattribend(n,t){var r,i;this.endIndex=t,(i=(r=this.cbs).onattribute)===null||i===void 0||i.call(r,this.attribname,this.attribvalue,n===mc.Double?'"':n===mc.Single?"'":n===mc.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(n){const t=n.search($K);let r=t<0?n:n.substr(0,t);return this.lowerCaseTagNames&&(r=r.toLowerCase()),r}ondeclaration(n,t){this.endIndex=t;const r=this.getSlice(n,t);if(this.cbs.onprocessinginstruction){const i=this.getInstructionName(r);this.cbs.onprocessinginstruction(`!${i}`,`!${r}`)}this.startIndex=t+1}onprocessinginstruction(n,t){this.endIndex=t;const r=this.getSlice(n,t);if(this.cbs.onprocessinginstruction){const i=this.getInstructionName(r);this.cbs.onprocessinginstruction(`?${i}`,`?${r}`)}this.startIndex=t+1}oncomment(n,t,r){var i,a,s,l;this.endIndex=t,(a=(i=this.cbs).oncomment)===null||a===void 0||a.call(i,this.getSlice(n,t-r)),(l=(s=this.cbs).oncommentend)===null||l===void 0||l.call(s),this.startIndex=t+1}oncdata(n,t,r){var i,a,s,l,u,d,f,m,b,g;this.endIndex=t;const x=this.getSlice(n,t-r);!this.htmlMode||this.options.recognizeCDATA?((a=(i=this.cbs).oncdatastart)===null||a===void 0||a.call(i),(l=(s=this.cbs).ontext)===null||l===void 0||l.call(s,x),(d=(u=this.cbs).oncdataend)===null||d===void 0||d.call(u)):((m=(f=this.cbs).oncomment)===null||m===void 0||m.call(f,`[CDATA[${x}]]`),(g=(b=this.cbs).oncommentend)===null||g===void 0||g.call(b)),this.startIndex=t+1}onend(){var n,t;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let r=0;r<this.stack.length;r++)this.cbs.onclosetag(this.stack[r],!0)}(t=(n=this.cbs).onend)===null||t===void 0||t.call(n)}reset(){var n,t,r,i;(t=(n=this.cbs).onreset)===null||t===void 0||t.call(n),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(i=(r=this.cbs).onparserinit)===null||i===void 0||i.call(r,this),this.buffers.length=0,this.foreignContext.length=0,this.foreignContext.unshift(!this.htmlMode),this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(n){this.reset(),this.end(n)}getSlice(n,t){for(;n-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();let r=this.buffers[0].slice(n-this.bufferOffset,t-this.bufferOffset);for(;t-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),r+=this.buffers[0].slice(0,t-this.bufferOffset);return r}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(n){var t,r;if(this.ended){(r=(t=this.cbs).onerror)===null||r===void 0||r.call(t,new Error(".write() after done!"));return}this.buffers.push(n),this.tokenizer.running&&(this.tokenizer.write(n),this.writeIndex++)}end(n){var t,r;if(this.ended){(r=(t=this.cbs).onerror)===null||r===void 0||r.call(t,new Error(".end() after done!"));return}n&&this.write(n),this.ended=!0,this.tokenizer.end()}pause(){this.tokenizer.pause()}resume(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(n){this.write(n)}done(n){this.end(n)}}var Er;(function(e){e.Root="root",e.Text="text",e.Directive="directive",e.Comment="comment",e.Script="script",e.Style="style",e.Tag="tag",e.CDATA="cdata",e.Doctype="doctype"})(Er||(Er={}));function nx(e){return e.type===Er.Tag||e.type===Er.Script||e.type===Er.Style}Er.Root;Er.Text;Er.Directive;Er.Comment;Er.Script;Er.Style;Er.Tag;Er.CDATA;Er.Doctype;let nD=class{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(n){this.parent=n}get previousSibling(){return this.prev}set previousSibling(n){this.prev=n}get nextSibling(){return this.next}set nextSibling(n){this.next=n}cloneNode(n=!1){return cD(this,n)}};class AA extends nD{constructor(n){super(),this.data=n}get nodeValue(){return this.data}set nodeValue(n){this.data=n}}let WS=class extends AA{constructor(){super(...arguments),this.type=Er.Text}get nodeType(){return 3}};class rD extends AA{constructor(){super(...arguments),this.type=Er.Comment}get nodeType(){return 8}}class iD extends AA{constructor(n,t){super(t),this.name=n,this.type=Er.Directive}get nodeType(){return 1}}class CA extends nD{constructor(n){super(),this.children=n}get firstChild(){var n;return(n=this.children[0])!==null&&n!==void 0?n:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(n){this.children=n}}class aD extends CA{constructor(){super(...arguments),this.type=Er.CDATA}get nodeType(){return 4}}class VS extends CA{constructor(){super(...arguments),this.type=Er.Root}get nodeType(){return 9}}let sD=class extends CA{constructor(n,t,r=[],i=n==="script"?Er.Script:n==="style"?Er.Style:Er.Tag){super(r),this.name=n,this.attribs=t,this.type=i}get nodeType(){return 1}get tagName(){return this.name}set tagName(n){this.name=n}get attributes(){return Object.keys(this.attribs).map(n=>{var t,r;return{name:n,value:this.attribs[n],namespace:(t=this["x-attribsNamespace"])===null||t===void 0?void 0:t[n],prefix:(r=this["x-attribsPrefix"])===null||r===void 0?void 0:r[n]}})}};function oD(e){return nx(e)}function lD(e){return e.type===Er.CDATA}function uD(e){return e.type===Er.Text}function HK(e){return e.type===Er.Comment}function WK(e){return e.type===Er.Directive}function VK(e){return e.type===Er.Root}function cD(e,n=!1){let t;if(uD(e))t=new WS(e.data);else if(HK(e))t=new rD(e.data);else if(oD(e)){const r=n?gw(e.children):[],i=new sD(e.name,{...e.attribs},r);r.forEach(a=>a.parent=i),e.namespace!=null&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]={...e["x-attribsNamespace"]}),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]={...e["x-attribsPrefix"]}),t=i}else if(lD(e)){const r=n?gw(e.children):[],i=new aD(r);r.forEach(a=>a.parent=i),t=i}else if(VK(e)){const r=n?gw(e.children):[],i=new VS(r);r.forEach(a=>a.parent=i),e["x-mode"]&&(i["x-mode"]=e["x-mode"]),t=i}else if(WK(e)){const r=new iD(e.name,e.data);e["x-name"]!=null&&(r["x-name"]=e["x-name"],r["x-publicId"]=e["x-publicId"],r["x-systemId"]=e["x-systemId"]),t=r}else throw new Error(`Not implemented yet: ${e.type}`);return t.startIndex=e.startIndex,t.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(t.sourceCodeLocation=e.sourceCodeLocation),t}function gw(e){const n=e.map(t=>cD(t,!0));for(let t=1;t<n.length;t++)n[t].prev=n[t-1],n[t-1].next=n[t];return n}const n_={withStartIndices:!1,withEndIndices:!1,xmlMode:!1};class YK{constructor(n,t,r){this.dom=[],this.root=new VS(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof t=="function"&&(r=t,t=n_),typeof n=="object"&&(t=n,n=void 0),this.callback=n??null,this.options=t??n_,this.elementCB=r??null}onparserinit(n){this.parser=n}onreset(){this.dom=[],this.root=new VS(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null}onend(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))}onerror(n){this.handleCallback(n)}onclosetag(){this.lastNode=null;const n=this.tagStack.pop();this.options.withEndIndices&&(n.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(n)}onopentag(n,t){const r=this.options.xmlMode?Er.Tag:void 0,i=new sD(n,t,void 0,r);this.addNode(i),this.tagStack.push(i)}ontext(n){const{lastNode:t}=this;if(t&&t.type===Er.Text)t.data+=n,this.options.withEndIndices&&(t.endIndex=this.parser.endIndex);else{const r=new WS(n);this.addNode(r),this.lastNode=r}}oncomment(n){if(this.lastNode&&this.lastNode.type===Er.Comment){this.lastNode.data+=n;return}const t=new rD(n);this.addNode(t),this.lastNode=t}oncommentend(){this.lastNode=null}oncdatastart(){const n=new WS(""),t=new aD([n]);this.addNode(t),n.parent=t,this.lastNode=n}oncdataend(){this.lastNode=null}onprocessinginstruction(n,t){const r=new iD(n,t);this.addNode(r)}handleCallback(n){if(typeof this.callback=="function")this.callback(n,this.dom);else if(n)throw n}addNode(n){const t=this.tagStack[this.tagStack.length-1],r=t.children[t.children.length-1];this.options.withStartIndices&&(n.startIndex=this.parser.startIndex),this.options.withEndIndices&&(n.endIndex=this.parser.endIndex),t.children.push(n),r&&(n.prev=r,r.next=n),n.parent=t,this.lastNode=null}}function bd(e){return Array.isArray(e)?e.map(bd).join(""):oD(e)?e.name==="br"?`
`:bd(e.children):lD(e)?bd(e.children):uD(e)?e.data:""}function GK(e,n){const t=new YK(void 0,n);return new UK(t,n).end(e),t.root}const QK=async(e,n)=>{var g,x,y,A,w,C,j,F;if(!e)return;const t=new on("p","mm","a4",!0);let r=10;const i=297,a=M=>{r+M*6>i-20&&(t.addPage(),r=10)},s=e.sections.length+e.sections.reduce((M,z)=>M+z.subsections.length,0)+e.sections.reduce((M,z)=>M+z.subsections.reduce((_,L)=>_+L.subSubsections.length,0),0)+e.sections.reduce((M,z)=>{var _;return M+(((_=z.images)==null?void 0:_.length)||0)+z.subsections.reduce((L,$)=>{var Z;return L+(((Z=$.images)==null?void 0:Z.length)||0)+$.subSubsections.reduce((O,T)=>{var R;return O+(((R=T.images)==null?void 0:R.length)||0)},0)},0)},0);let l=0;const u=()=>{l+=1,n(Math.round(l/s*100))},d=async(M,z=150,_=150)=>new Promise(L=>{const $=new Image;$.crossOrigin="anonymous",$.src=M.url,$.onload=()=>{const Z=$.width/$.height;let O=z,T=_;Z>1?T=z/Z:O=_*Z,a(T+15);const R=(210-O)/2;if(t.addImage($,"JPEG",R,r,O,T),r+=T+5,M.title){t.setFont("helvetica","italic"),t.setFontSize(10);const G=(210-t.getTextWidth(M.title))/2;t.text(M.title,G,r),t.setFont("helvetica","normal"),r+=6}u(),L()},$.onerror=()=>{console.warn(`Image failed to load: ${M.url}`),u(),L()}}),f=(M,z=10,_=12)=>{var Z;const L=GK(M),$=(O,T=0,R=!1)=>{var N,G,W,Q,J,se,U;if(O){if(nx(O)){const le=O,q=le.name.toLowerCase();switch(q){case"p":r+=6,(N=le.children)==null||N.forEach(B=>$(B,T)),r+=6;break;case"br":r+=6;break;case"strong":case"b":case"i":case"em":t.setFont("helvetica",q==="strong"||q==="b"?"bold":"italic"),(G=le.children)==null||G.forEach(B=>$(B,T)),t.setFont("helvetica","normal");break;case"ul":case"ol":r+=4,(W=le.children)==null||W.forEach(B=>$(B,T+1,!0));break;case"li":{const B=T===1?"-":"--";let ee="";(Q=le.children)==null||Q.forEach(re=>{if(nx(re)){const oe=re;oe.name==="strong"||oe.name==="b"?(t.setFont("helvetica","bold"),ee+=` ${bd(oe)}`,t.setFont("helvetica","normal")):oe.name!=="ul"&&oe.name!=="ol"&&(ee+=` ${bd(oe)}`)}else re.type==="text"&&"data"in re&&(ee+=` ${re.data.trim()}`)}),ee=ee.trim(),ee&&(T===0?m(`${B} ${ee}`,z,_+2,!0):m(`${B} ${ee}`,z+T*8,_),r+=6),(J=le.children)==null||J.forEach(re=>{if(nx(re)){const oe=re;["ul","ol"].includes(oe.name)&&$(oe,T+1,!0)}});break}case"a":(se=le.attribs)!=null&&se.href&&b(bd(le),le.attribs.href);break;case"h1":m(bd(le),z,20,!0),r+=8;break;case"h2":m(bd(le),z,18,!0),r+=8;break;case"h3":m(bd(le),z,16,!0),r+=6;break;default:(U=le.children)==null||U.forEach(B=>$(B,T))}}else if(O.type==="text"&&"data"in O){const le=O.data.trim();le&&m(le,z+T*8,_)}}};(Z=L.children)==null||Z.forEach(O=>$(O))},m=(M,z,_=12,L=!1,$=[0,0,0],Z=!1,O=200)=>{if(!M)return;t.setFontSize(_),t.setTextColor($[0],$[1],$[2]),t.setFont("helvetica",L?Z?"bolditalic":"bold":Z?"italic":"normal"),t.splitTextToSize(M,O-z).forEach(R=>{a(1),t.text(R,z,r),r+=6})},b=(M,z)=>{a(1),t.setTextColor(10,104,71),t.textWithLink(M,10,r,{url:z}),r+=6};(g=e.header)!=null&&g.content&&(m("Header:",10,12,!0),f(e.header.content),r+=5),e.title&&(m(e.title,10,18,!0,[10,104,71]),r+=5);for(const M of e.sections){if(m(M.title,10,16,!0),f(M.content),(x=M.images)!=null&&x.length)for(const z of M.images)await d(z);u();for(const z of M.subsections){if(m(z.title,12,14,!0),f(z.content,12),(y=z.images)!=null&&y.length)for(const _ of z.images)await d(_);u();for(const _ of z.subSubsections){if(m(_.title,14,12,!0),f(_.content,14),(A=_.images)!=null&&A.length)for(const L of _.images)await d(L);u(),(w=_.links)!=null&&w.length&&(m("Links:",14,12,!0),_.links.forEach(L=>b(L.title,L.url)))}(C=z.links)!=null&&C.length&&(m("Links:",12,12,!0),z.links.forEach(_=>b(_.title,_.url)))}(j=M.links)!=null&&j.length&&(m("Links:",10,12,!0),M.links.forEach(z=>b(z.title,z.url))),r+=5}(F=e.footer)!=null&&F.content&&(m("Footer:",10,12,!0),f(e.footer.content)),t.save(`${e.title||"Material"}.pdf`),n(100)},KK=()=>{var F,M,z,_,L,$,Z,O,T,R,N,G,W,Q,J,se,U,le,q,B,ee,re,oe,Ce,ye,Se,Te,Le,He,Ye,V,Ae,ne,be,fe,ke,Re,qe,je,Ze,ut,rt;const{id:e}=F6(),[n,t]=Pg(),r=Xn(),[i,a]=X.useState(null),[s,l]=X.useState({sectionIndex:0}),[u,d]=X.useState(null),[f,m]=X.useState(0),[b,g]=X.useState(!0);K7((i==null?void 0:i.sections)||[],s.sectionIndex||0,!!i),X.useEffect(()=>{m(Pe=>Pe+1)},[s]);const x=async()=>{if(i!=null&&i.originalFile)try{console.log(" Starting original file download:",i.originalFile.name);const Pe=document.createElement("a");Pe.href=i.originalFile.url,Pe.download=i.originalFile.name,Pe.target="_blank",document.body.appendChild(Pe),Pe.click(),document.body.removeChild(Pe),console.log(" Original file download initiated")}catch(Pe){console.error(" Original file download failed:",Pe)}};X.useEffect(()=>{e&&(async()=>{var ve,Ne;try{g(!0);const De=un(r,"materials",e),ft=await ga(De);if(ft.exists()){const et={id:ft.id,...ft.data()};console.log("Material data from Firestore:",et),console.log("Sections type:",typeof et.sections),console.log("Sections value:",et.sections),Array.isArray(et.sections)||(console.warn("Sections is not an array, initializing as empty array. Original value:",et.sections),et.sections=[]),et.sections=et.sections.map(Pt=>({id:Pt.id||Mi(),title:Pt.title||"Untitled Section",content:Pt.content||"",images:Array.isArray(Pt.images)?Pt.images.map(Vt=>({...Vt,title:Vt.title||""})):[],links:Array.isArray(Pt.links)?Pt.links:[],subsections:Array.isArray(Pt.subsections)?Pt.subsections.map(Vt=>({id:Vt.id||Mi(),title:Vt.title||"Untitled Subsection",content:Vt.content||"",images:Array.isArray(Vt.images)?Vt.images.map(Rt=>({...Rt,title:Rt.title||""})):[],links:Array.isArray(Vt.links)?Vt.links:[],subSubsections:Array.isArray(Vt.subSubsections)?Vt.subSubsections.map(Rt=>({id:Rt.id||Mi(),title:Rt.title||"Untitled Sub-subsection",content:Rt.content||"",images:Array.isArray(Rt.images)?Rt.images.map(Xt=>({...Xt,title:Xt.title||""})):[],links:Array.isArray(Rt.links)?Rt.links:[]})):[]})):[]})),console.log("Loaded material from database:",{title:et.title,sectionsCount:((ve=et.sections)==null?void 0:ve.length)||0,sectionsWithImages:((Ne=et.sections)==null?void 0:Ne.filter(Pt=>{var Nt;return((Nt=Pt.images)==null?void 0:Nt.length)>0}).length)||0}),a(et)}}catch(De){console.error("Error fetching material:",De)}finally{g(!1)}})()},[e,r]),X.useEffect(()=>{e&&n.get("material")!==e&&(console.log(" Updating URL: Adding material ID to query parameters:",e),t(Pe=>{const ve=new URLSearchParams(Pe);return ve.set("material",e),ve},{replace:!0}))},[e,n,t]);const y=(Pe,ve,Ne)=>{l({sectionIndex:typeof Pe=="number"?Pe:void 0,subsectionIndex:ve,subSubsectionIndex:Ne,type:typeof Pe=="string"?Pe:void 0})},A=Pe=>{var et,Pt,Nt,Vt,Rt,Xt,nn,cn,Pn,zn,Yr,ir,Rn,Yt,An,wa,wr,oi,Sa,Lt,Hn,ar,Rr,dr,fr,Un,ys;const{sectionIndex:ve,subsectionIndex:Ne,subSubsectionIndex:De,type:ft}=s;if(Pe==="prev")if(De!==void 0&&De>0)l({sectionIndex:ve,subsectionIndex:Ne,subSubsectionIndex:De-1});else if(De!==void 0&&De===0)l({sectionIndex:ve,subsectionIndex:Ne});else if(Ne!==void 0&&Ne>0)l({sectionIndex:ve,subsectionIndex:Ne-1});else if(Ne!==void 0&&Ne===0)l({sectionIndex:ve});else if(ve>0){const _r=i==null?void 0:i.sections[ve-1];l({sectionIndex:ve-1,subsectionIndex:(et=_r==null?void 0:_r.subsections)!=null&&et.length?_r.subsections.length-1:void 0,subSubsectionIndex:(Pt=_r==null?void 0:_r.subsections)!=null&&Pt.length?((Vt=(Nt=_r.subsections[_r.subsections.length-1])==null?void 0:Nt.subSubsections)==null?void 0:Vt.length)-1:void 0})}else ft==="footer"?l({sectionIndex:((i==null?void 0:i.sections.length)??1)-1,type:"footer"}):ve===void 0&&ft==="header"&&l({sectionIndex:((i==null?void 0:i.sections.length)??1)-1});else Pe==="next"&&(De===void 0&&Ne!==void 0&&((cn=(nn=(Xt=(Rt=i==null?void 0:i.sections[ve??0])==null?void 0:Rt.subsections)==null?void 0:Xt[Ne])==null?void 0:nn.subSubsections)!=null&&cn.length)?l({sectionIndex:ve,subsectionIndex:Ne,subSubsectionIndex:0}):De!==void 0&&De<(((ir=(Yr=(zn=(Pn=i==null?void 0:i.sections[ve??0])==null?void 0:Pn.subsections)==null?void 0:zn[Ne??0])==null?void 0:Yr.subSubsections)==null?void 0:ir.length)??1)-1?l({sectionIndex:ve,subsectionIndex:Ne,subSubsectionIndex:De+1}):De!==void 0&&De===(((wa=(An=(Yt=(Rn=i==null?void 0:i.sections[ve??0])==null?void 0:Rn.subsections)==null?void 0:Yt[Ne??0])==null?void 0:An.subSubsections)==null?void 0:wa.length)??1)-1&&(Ne??0)<(((oi=(wr=i==null?void 0:i.sections[ve??0])==null?void 0:wr.subsections)==null?void 0:oi.length)??1)-1?l({sectionIndex:ve,subsectionIndex:(Ne??0)+1}):Ne===void 0&&((Lt=(Sa=i==null?void 0:i.sections[ve??0])==null?void 0:Sa.subsections)!=null&&Lt.length)?l({sectionIndex:ve,subsectionIndex:0}):Ne!==void 0&&Ne<(((ar=(Hn=i==null?void 0:i.sections[ve??0])==null?void 0:Hn.subsections)==null?void 0:ar.length)??1)-1?l({sectionIndex:ve,subsectionIndex:Ne+1}):Ne!==void 0&&Ne===(((dr=(Rr=i==null?void 0:i.sections[ve??0])==null?void 0:Rr.subsections)==null?void 0:dr.length)??1)-1&&(ve??0)<(((fr=i==null?void 0:i.sections)==null?void 0:fr.length)??1)-1?l({sectionIndex:(ve??0)+1}):(ve??0)<(((Un=i==null?void 0:i.sections)==null?void 0:Un.length)??1)-1?l({sectionIndex:(ve??0)+1}):ve===(((ys=i==null?void 0:i.sections)==null?void 0:ys.length)??1)-1&&Ne===void 0&&l({sectionIndex:void 0,type:"footer"}))};if(b)return h.jsx(de,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh"},children:h.jsx(Zr,{size:60,sx:{color:ht.palette.primary.main}})});if(!i)return h.jsx(D6,{maxWidth:"md",children:h.jsxs(de,{sx:{textAlign:"center",py:8,px:4,backgroundColor:ht.palette.background.paper,borderRadius:kt["2xl"],border:`1px solid ${ht.palette.divider}`},children:[h.jsx(he,{variant:"h5",sx:{fontFamily:ht.typography.h5.fontFamily,fontWeight:ht.typography.h5.fontWeight,color:ht.palette.text.secondary,mb:2},children:"Material Not Found"}),h.jsx(he,{variant:"body1",sx:{color:ht.palette.text.secondary},children:"The requested material could not be found or you don't have permission to view it."})]})});const w=s.type==="header"||s.type==="footer"?"":s.sectionIndex!==void 0?s.subSubsectionIndex!==void 0?((z=(M=(F=i.sections[s.sectionIndex])==null?void 0:F.subsections[s.subsectionIndex])==null?void 0:M.subSubsections[s.subSubsectionIndex])==null?void 0:z.content)||"":s.subsectionIndex!==void 0?((L=(_=i.sections[s.sectionIndex])==null?void 0:_.subsections[s.subsectionIndex])==null?void 0:L.content)||"":(($=i.sections[s.sectionIndex])==null?void 0:$.content)||"":"",C=s.type==="header"||s.type==="footer"?"":s.sectionIndex!==void 0?s.subSubsectionIndex!==void 0?((T=(O=(Z=i.sections[s.sectionIndex])==null?void 0:Z.subsections[s.subsectionIndex])==null?void 0:O.subSubsections[s.subSubsectionIndex])==null?void 0:T.title)||"":s.subsectionIndex!==void 0?((N=(R=i.sections[s.sectionIndex])==null?void 0:R.subsections[s.subsectionIndex])==null?void 0:N.title)||"":((G=i.sections[s.sectionIndex])==null?void 0:G.title)||"":"",j=s.sectionIndex!==void 0?s.subSubsectionIndex!==void 0?((J=(Q=(W=i.sections[s.sectionIndex])==null?void 0:W.subsections[s.subsectionIndex])==null?void 0:Q.subSubsections[s.subSubsectionIndex])==null?void 0:J.links)||[]:s.subsectionIndex!==void 0?((U=(se=i.sections[s.sectionIndex])==null?void 0:se.subsections[s.subsectionIndex])==null?void 0:U.links)||[]:((le=i.sections[s.sectionIndex])==null?void 0:le.links)||[]:[];return h.jsxs(de,{sx:{display:"flex",flexGrow:1,flexDirection:"column",minHeight:"100vh"},children:[h.jsxs(gn,{elevation:1,sx:{p:3,mb:2,backgroundColor:ht.palette.background.paper,borderRadius:0},children:[h.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[h.jsx(UT,{courseId:i==null?void 0:i.course}),h.jsxs(de,{sx:{display:"flex",gap:2,alignItems:"center"},children:[h.jsx(cr,{label:i.published?"Published":i.scheduledTimestamp?"Scheduled":"Draft",color:i.published?"success":i.scheduledTimestamp?"info":"warning",variant:"outlined",sx:{fontWeight:600}}),h.jsxs(de,{sx:{display:"flex",gap:1},children:[(i==null?void 0:i.originalFile)&&h.jsx(fi,{title:`Download original file: ${i.originalFile.name}`,arrow:!0,children:h.jsx(Ct,{variant:"outlined",startIcon:h.jsx(o3,{}),endIcon:h.jsx(Jk,{}),onClick:x,sx:{borderRadius:"12px",textTransform:"none",fontWeight:600},children:"PPTX"})}),h.jsx(Ct,{variant:"outlined",startIcon:h.jsx(yx,{}),endIcon:h.jsx(Jk,{}),onClick:async()=>{i&&(d(0),await QK(i,d),d(null))},disabled:u!==null,sx:{borderRadius:"12px",textTransform:"none",fontWeight:600},children:u!==null?"Generating...":"PDF"})]})]})]}),u!==null&&h.jsx(de,{sx:{width:"100%",mt:2},children:h.jsx(Qo,{variant:"determinate",value:u,sx:{borderRadius:kt.xl,height:8}})})]}),h.jsxs(de,{sx:{display:"flex",flexGrow:1,minHeight:0},children:[h.jsx(uv,{children:h.jsx($T,{sections:i.sections,selected:s,onAddSection:()=>{},onAddSubsection:()=>{},onAddSubSubsection:()=>{},onSelectSection:y,onUpdateSectionTitle:()=>{},onUpdateSubsectionTitle:()=>{},onUpdateSubSubsectionTitle:()=>{},onDeleteSection:()=>{},onDeleteSubsection:()=>{},onDeleteSubSubsection:()=>{},isViewMode:!0})}),h.jsxs(de,{sx:{flexGrow:1,p:4,overflow:"auto"},children:[h.jsx(gn,{elevation:0,sx:{p:3,mb:3,backgroundColor:ht.palette.background.paper,borderRadius:kt.xl,border:`1px solid ${ht.palette.divider}`},children:h.jsx(he,{dangerouslySetInnerHTML:{__html:i.header.content.replace(/\n/g,"<br />")},sx:{fontFamily:ht.typography.body1.fontFamily,color:ht.palette.text.secondary,lineHeight:1.6}})}),h.jsx(he,{variant:"h3",align:"center",sx:{fontFamily:ht.typography.h3.fontFamily,fontWeight:ht.typography.h3.fontWeight,color:ht.palette.text.primary,mb:4},children:i.title}),C&&h.jsx(he,{variant:"h4",align:"center",sx:{fontFamily:ht.typography.h4.fontFamily,fontWeight:ht.typography.h4.fontWeight,color:ht.palette.text.primary,mb:4},children:C}),s.type!=="header"&&s.type!=="footer"&&h.jsx(Gw,{in:!0,timeout:400,children:h.jsxs(de,{children:[h.jsxs(gn,{elevation:0,sx:{p:4,mb:3,backgroundColor:ht.palette.background.paper,borderRadius:kt.xl,border:`1px solid ${ht.palette.divider}`},children:[h.jsx(he,{dangerouslySetInnerHTML:{__html:w.replace(/\n/g,"<br />")},sx:{fontFamily:ht.typography.body1.fontFamily,color:ht.palette.text.primary,lineHeight:1.7,"& p":{mb:2}}}),h.jsx(de,{sx:{mt:3},children:s.sectionIndex!==void 0&&h.jsx(h.Fragment,{children:s.subSubsectionIndex!==void 0?(((Ce=(oe=(re=(ee=(B=(q=i.sections[s.sectionIndex])==null?void 0:q.subsections)==null?void 0:B[s.subsectionIndex])==null?void 0:ee.subSubsections)==null?void 0:re[s.subSubsectionIndex])==null?void 0:oe.images)==null?void 0:Ce.length)||0)>0&&h.jsx(aw,{images:((He=(Le=(Te=(Se=(ye=i.sections[s.sectionIndex])==null?void 0:ye.subsections)==null?void 0:Se[s.subsectionIndex])==null?void 0:Te.subSubsections)==null?void 0:Le[s.subSubsectionIndex])==null?void 0:He.images)||[]}):s.subsectionIndex!==void 0?(((ne=(Ae=(V=(Ye=i.sections[s.sectionIndex])==null?void 0:Ye.subsections)==null?void 0:V[s.subsectionIndex])==null?void 0:Ae.images)==null?void 0:ne.length)||0)>0&&h.jsx(aw,{images:((ke=(fe=(be=i.sections[s.sectionIndex])==null?void 0:be.subsections)==null?void 0:fe[s.subsectionIndex])==null?void 0:ke.images)||[]}):(((qe=(Re=i.sections[s.sectionIndex])==null?void 0:Re.images)==null?void 0:qe.length)||0)>0&&h.jsx(aw,{images:((je=i.sections[s.sectionIndex])==null?void 0:je.images)||[]})})})]}),j.length>0&&h.jsx(TQ,{links:j})]})},f),h.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[h.jsx(fi,{title:"Previous Section/Subsection (Left Arrow)",arrow:!0,children:h.jsx("span",{children:h.jsx(_n,{onClick:()=>A("prev"),disabled:s.sectionIndex===0&&s.subsectionIndex===void 0&&s.type==="header",sx:{backgroundColor:ht.palette.primary.main,color:ht.palette.primary.contrastText,"&:hover":{backgroundColor:ht.palette.primary.dark},"&:disabled":{backgroundColor:ht.palette.action.disabled,color:ht.palette.action.disabled}},children:h.jsx(l3,{})})})}),h.jsx(fi,{title:"Next Section/Subsection (Right Arrow)",arrow:!0,children:h.jsx("span",{children:h.jsx(_n,{onClick:()=>A("next"),disabled:s.sectionIndex===(((Ze=i.sections)==null?void 0:Ze.length)??1)-1&&(s.subsectionIndex===void 0||s.subsectionIndex===(((rt=(ut=i.sections[s.sectionIndex])==null?void 0:ut.subsections)==null?void 0:rt.length)??1)-1)&&s.type==="footer",sx:{backgroundColor:ht.palette.primary.main,color:ht.palette.primary.contrastText,"&:hover":{backgroundColor:ht.palette.primary.dark},"&:disabled":{backgroundColor:ht.palette.action.disabled,color:ht.palette.action.disabled}},children:h.jsx(u3,{})})})})]}),h.jsx(gn,{elevation:0,sx:{p:3,mt:4,backgroundColor:ht.palette.background.paper,borderRadius:kt.xl,border:`1px solid ${ht.palette.divider}`},children:h.jsx(he,{dangerouslySetInnerHTML:{__html:i.footer.content.replace(/\n/g,"<br />")},sx:{fontFamily:ht.typography.body1.fontFamily,color:ht.palette.text.secondary,lineHeight:1.6}})})]})]})]})},dD=({value:e,onChange:n})=>{const[t,r]=X.useState([]),{userDetails:i}=zi();return X.useEffect(()=>{if(i!=null&&i.classes){const a=Object.entries(i.classes).filter(([s,l])=>l.isCourseAdmin||i.isSuperAdmin).map(([s,l])=>({id:s,number:l.number,title:l.title,isCourseAdmin:l.isCourseAdmin}));r(a)}else r([])},[i]),h.jsxs(h.Fragment,{children:[h.jsx(cm,{value:e,onChange:n,courses:t,label:"Course",placeholder:"Select a course",helperText:"",showNumber:!0,showTitle:!0,showAdminBadge:!1}),!e&&h.jsx(N6,{children:"Please select a course"})]})},fD=({links:e,onLinkChange:n,onAddLink:t,onRemoveLink:r})=>h.jsxs(de,{sx:{mt:$e[5]},children:[h.jsxs(he,{variant:"h6",sx:{mb:$e[3],fontFamily:we.fontFamily.secondary,fontSize:we.fontSize.lg,fontWeight:we.fontWeight.semibold,color:K.primary[700],display:"flex",alignItems:"center",gap:$e[2]},children:[h.jsx(de,{sx:{width:24,height:24,borderRadius:kt.sm,backgroundColor:K.primary[100],display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px"},children:""}),"Links & Resources"]}),e.map((i,a)=>h.jsxs(gn,{elevation:0,sx:{p:$e[3],mb:$e[3],backgroundColor:K.neutral[50],borderRadius:kt.lg,border:`1px solid ${K.neutral[200]}`,position:"relative","&:hover":{borderColor:K.primary[300],backgroundColor:K.primary[25],"& .remove-button":{opacity:1,visibility:"visible"}},transition:"all 0.2s ease-in-out"},children:[h.jsx(fi,{title:"Remove this link",arrow:!0,placement:"top",children:h.jsx(_n,{className:"remove-button",onClick:()=>r(a),sx:{position:"absolute",top:$e[2],right:$e[2],width:32,height:32,backgroundColor:K.error[50],border:`1px solid ${K.error[200]}`,borderRadius:kt.sm,opacity:0,visibility:"hidden",transition:"all 0.2s ease-in-out","&:hover":{backgroundColor:K.error[100],borderColor:K.error[300],transform:"scale(1.05)"},"& .MuiSvgIcon-root":{fontSize:"16px",color:K.error[600]}},children:h.jsx(c3,{})})}),h.jsx(de,{sx:{display:"flex",alignItems:"center",mb:$e[2]},children:h.jsxs(he,{variant:"body2",sx:{fontFamily:we.fontFamily.secondary,fontSize:we.fontSize.sm,fontWeight:we.fontWeight.medium,color:K.text.secondary},children:["Link ",a+1]})}),h.jsxs(de,{sx:{display:"flex",gap:$e[3],alignItems:"flex-start"},children:[h.jsx(Jt,{label:"Link Title",fullWidth:!0,value:i.title,onChange:s=>n(a,"title",s.target.value),placeholder:"Enter a descriptive title for this link",sx:{flex:"0 0 65%","& .MuiOutlinedInput-root":{borderRadius:kt.lg,backgroundColor:K.surface.primary}}}),h.jsx(Jt,{label:"URL",fullWidth:!0,value:i.url,onChange:s=>n(a,"url",s.target.value),placeholder:"https://example.com",sx:{flex:"0 0 35%","& .MuiOutlinedInput-root":{borderRadius:kt.lg,backgroundColor:K.surface.primary}}})]})]},i.id)),h.jsx(Ct,{variant:"outlined",onClick:t,startIcon:h.jsx(de,{sx:{width:20,height:20,borderRadius:kt.sm,backgroundColor:K.primary[100],display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:we.fontWeight.semibold,color:K.primary[700]},children:"+"}),sx:{fontFamily:we.fontFamily.secondary,fontSize:we.fontSize.base,fontWeight:we.fontWeight.medium,color:K.primary[600],borderColor:K.primary[300],borderRadius:kt.lg,padding:`${$e[2]} ${$e[4]}`,textTransform:"none","&:hover":{backgroundColor:K.primary[50],borderColor:K.primary[400],color:K.primary[700]},transition:"all 0.2s ease-in-out"},children:"Add Link"})]}),XK=()=>{const[e,n]=X.useState(""),[t,r]=X.useState(""),[i,a]=X.useState([{id:crypto.randomUUID(),title:"",url:""}]),[s,l]=X.useState(""),u=ya(),d=Xn(),f=async()=>{if(!s){alert("Please select a course to post the message.");return}try{await Ai(ln(d,"messages"),{title:e,description:t,links:i,course:s,postedOn:Bf(),isPinned:!1}),u("/messages")}catch(y){console.error("Error adding message: ",y)}},m=()=>u("/messages"),b=(y,A,w)=>{const C=[...i];C[y][A]=w,a(C)},g=()=>a([...i,{id:crypto.randomUUID(),title:"",url:""}]),x=y=>{const A=i.filter((w,C)=>C!==y);a(A)};return h.jsxs(D6,{maxWidth:"md",sx:{mt:6,fontFamily:we.fontFamily.primary},children:[h.jsx(So,{title:"Add Message",subtitle:"Share important announcements and updates with your course participants"}),h.jsx(gn,{elevation:3,sx:{p:$e[6],borderRadius:kt["2xl"],backgroundColor:K.background.elevated,border:`1px solid ${K.neutral[200]}`,boxShadow:Ft.lg},children:h.jsxs(de,{sx:{mt:$e[4]},children:[h.jsx(dD,{value:s,onChange:l}),h.jsx(Jt,{label:"Subject",fullWidth:!0,value:e,onChange:y=>n(y.target.value),sx:{mb:3,backgroundColor:"#FFFFFF",borderRadius:1,boxShadow:"0 1px 4px rgba(0, 0, 0, 0.1)"}}),h.jsx(Jt,{label:"Description",fullWidth:!0,multiline:!0,rows:4,value:t,onChange:y=>r(y.target.value),sx:{mb:3,backgroundColor:"#FFFFFF",borderRadius:1,boxShadow:"0 1px 4px rgba(0, 0, 0, 0.1)"}}),h.jsx(fD,{links:i,onLinkChange:b,onAddLink:g,onRemoveLink:x}),h.jsx(qs,{sx:{width:"100%",my:2,backgroundColor:"#DADADA"}}),h.jsxs(de,{sx:{display:"flex",justifyContent:"space-between"},children:[h.jsx(Ct,{variant:"outlined",onClick:m,className:"cancel-button",children:"Cancel"}),h.jsx(Ct,{variant:"outlined",onClick:f,className:"save-button",children:"Save"})]})]})})]})},ZK=()=>{const{id:e}=F6(),[n,t]=X.useState(""),[r,i]=X.useState(""),[a,s]=X.useState([{id:crypto.randomUUID(),title:"",url:""}]),[l,u]=X.useState(""),d=ya(),f=Xn();X.useEffect(()=>{(async()=>{try{const w=un(f,"messages",e),C=await ga(w);if(C.exists()){const j=C.data();t(j.title),i(j.description);const F=j.links||[];s(F.length>0?F.map(M=>({id:M.id||crypto.randomUUID(),title:M.title||"",url:M.url||""})):[{id:crypto.randomUUID(),title:"",url:""}]),u(j.course||"")}}catch(w){console.error("Error fetching message: ",w)}})()},[f,e]);const m=async()=>{try{if(!l){alert("Please select a valid course to update the message.");return}const A=un(f,"messages",e);await Hr(A,{title:n,description:r,links:a,course:l,lastUpdatedOn:Bf()}),d("/messages")}catch(A){console.error("Error editing message: ",A)}},b=()=>d("/messages"),g=(A,w,C)=>{const j=[...a];j[A][w]=C,s(j)},x=()=>s([...a,{id:crypto.randomUUID(),title:"",url:""}]),y=A=>{const w=a.filter((C,j)=>j!==A);s(w)};return h.jsxs(D6,{maxWidth:"md",sx:{mt:6,fontFamily:we.fontFamily.primary},children:[h.jsx(So,{title:"Edit Message",subtitle:"Update your message content and course assignment"}),h.jsx(gn,{elevation:3,sx:{p:$e[6],borderRadius:kt["2xl"],backgroundColor:K.background.elevated,border:`1px solid ${K.neutral[200]}`,boxShadow:Ft.lg},children:h.jsxs(de,{sx:{mt:$e[4]},children:[h.jsx(dD,{value:l,onChange:u}),h.jsx(Jt,{label:"Subject",fullWidth:!0,value:n,onChange:A=>t(A.target.value),sx:{mb:3,backgroundColor:"#FFFFFF",borderRadius:1,boxShadow:"0 1px 4px rgba(0, 0, 0, 0.1)"}}),h.jsx(Jt,{label:"Description",fullWidth:!0,multiline:!0,rows:4,value:r,onChange:A=>i(A.target.value),sx:{mb:3,backgroundColor:"#FFFFFF",borderRadius:1,boxShadow:"0 1px 4px rgba(0, 0, 0, 0.1)"}}),h.jsx(fD,{links:a,onLinkChange:g,onAddLink:x,onRemoveLink:y}),h.jsx(qs,{sx:{width:"100%",my:2,backgroundColor:"#DADADA"}}),h.jsxs(de,{sx:{display:"flex",justifyContent:"space-between"},children:[h.jsx(Ct,{variant:"outlined",onClick:b,className:"cancel-button",children:"Cancel"}),h.jsx(Ct,{variant:"outlined",onClick:m,className:"save-button",children:"Save"})]})]})})]})},JK=({users:e,loading:n=!1})=>{const t=a=>a.isSuperAdmin?"superAdmin":a.isAdmin?"educator":"student",r=a=>{if(!a||Object.keys(a).length===0)return h.jsx(de,{sx:{fontStyle:"italic",color:K.text.disabled},children:"None"});const s=Object.entries(a);return h.jsx(de,{sx:{display:"flex",flexDirection:"column",gap:$e[1]},children:s.map(([l,u])=>h.jsx(bp,{courseId:l,courseNumber:u.number,courseTitle:u.title,variant:"link",maxTitleLength:999},l))})},i=[{id:"id",label:"User ID",width:"25%",render:(a,s)=>h.jsx(ih,{userId:a,userType:t(s)})},{id:"isAdmin",label:"Status",width:"15%",render:(a,s)=>h.jsx(DT,{status:t(s)})},{id:"lastLogin",label:"Last Login",width:"20%",render:a=>h.jsx(yp,{date:a,format:"full"})},{id:"classes",label:"Courses",width:"40%",render:a=>r(a)}];return h.jsx(rh,{data:e,columns:i,loading:n,emptyMessage:"No users found.",showRowNumbers:!0})},eX=({userId:e,onUserDeleted:n})=>{const[t,r]=X.useState(!1),[i,a]=X.useState(!1),s=Xn(),l=()=>{r(!0)},u=()=>{r(!1)},d=async()=>{a(!0);try{const f=un(s,"users",e);await Ig(f),n(!0)}catch(f){console.error("Error deleting user:",f),n(!1)}a(!1),r(!1)};return h.jsxs(h.Fragment,{children:[h.jsx(Ct,{variant:"text",color:"error",onClick:l,children:"Delete User Account"}),h.jsxs(Zi,{open:t,onClose:u,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[h.jsx(pa,{id:"alert-dialog-title",children:"Confirm Deletion"}),h.jsx(Ji,{children:h.jsx(Il,{id:"alert-dialog-description",children:"Are you sure you want to delete this user account? This action cannot be undone."})}),h.jsxs(ma,{children:[h.jsx(Ct,{onClick:u,color:"primary",disabled:i,children:"Cancel"}),h.jsx(Ct,{onClick:d,color:"error",autoFocus:!0,disabled:i,children:i?h.jsx(Zr,{size:24}):"Delete"})]})]})]})},tX=({userId:e,userClasses:n,courses:t,onCourseAssigned:r})=>{const[i,a]=X.useState(""),[s,l]=X.useState(!1),[u,d]=X.useState(!1),[f,m]=X.useState(""),[b,g]=X.useState(!1),[x,y]=X.useState(!1),[A,w]=X.useState(!1),[C,j]=X.useState(!1),F=Xn(),M=async()=>{if(!e||!i){m("Please enter a User ID and select a course."),w(!1),g(!0);return}d(!0);try{const $=un(F,"users",e),Z=t.find(O=>O.id===i);if(Z){const O=un(F,"courses",i),T=await ga(O),R=T.exists()?T.data():null,N=(R==null?void 0:R.courseCreatedAt)||(R==null?void 0:R.createdAt)||(R==null?void 0:R.timestamp)||new Date;await Hr($,{[`classes.${i}`]:{number:Z.number,title:Z.title,isCourseAdmin:s,courseCreatedAt:N,enrolledAt:new Date}}),m(`Course ${Z.title} assigned successfully to user ${e}${s?" as Course Admin.":"."}`),r(i,{number:Z.number,title:Z.title,isCourseAdmin:s}),j(!0),setTimeout(()=>j(!1),1e3),y(!1),a(""),l(!1),w(!0)}else m("Selected course not found."),w(!1)}catch($){console.error("Error assigning course:",$),m("Error assigning course."),w(!1)}d(!1),g(!0)},z=()=>{g(!1)},_=()=>y(!0),L=()=>y(!1);return h.jsxs(h.Fragment,{children:[h.jsxs(de,{sx:{display:"flex",alignItems:"center",mt:2,p:2,borderRadius:2,transition:"background-color 0.3s ease",backgroundColor:C?"#e8f5e8":"transparent",border:C?"2px solid #4caf50":"2px solid transparent"},children:[h.jsx(he,{variant:"h6",component:"h2",sx:{mr:2},children:"Current Courses:"}),h.jsx(de,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:n&&Object.keys(n).length>0?Object.values(n).map(($,Z)=>h.jsx(cr,{label:`${$.isCourseAdmin?"[Course Admin] ":""}${$.number} - ${$.title}`,style:{backgroundColor:$.isCourseAdmin?"#ffcccb":"#d4edda",color:$.isCourseAdmin?"#b71c1c":"#155724",margin:"4px"}},Z)):h.jsx(he,{children:"No courses assigned."})}),h.jsx(cm,{value:i,onChange:a,courses:t.map($=>({id:$.id,number:$.number,title:$.title,isCourseAdmin:!1})),label:"Course",placeholder:"Select a course to assign",helperText:"Choose a course to assign to the user",size:"small",sx:{minWidth:200,mr:2}}),h.jsxs(Td,{sx:{mr:2},children:[h.jsx(ap,{children:"Role"}),h.jsxs(Dc,{value:s?"admin":"student",onChange:$=>l($.target.value==="admin"),children:[h.jsx(ai,{value:"admin",children:"Course Admin"}),h.jsx(ai,{value:"student",children:"Student"})]})]}),h.jsx(Ct,{variant:"contained",color:"primary",onClick:_,disabled:u||!i,children:u?h.jsx(Zr,{size:24}):"Assign Course"})]}),h.jsx(Ll,{open:b,autoHideDuration:6e3,onClose:z,children:h.jsx(rr,{onClose:z,severity:A?"success":"error",children:f})}),h.jsxs(Zi,{open:x,onClose:L,"aria-labelledby":"assign-dialog-title",children:[h.jsx(pa,{id:"assign-dialog-title",children:"Assign Course"}),h.jsx(Ji,{children:h.jsxs(Il,{children:["Are you sure you want to assign the course ",i," to this user",s?" as a Course Admin?":"?"]})}),h.jsxs(ma,{children:[h.jsx(Ct,{onClick:L,color:"primary",children:"Cancel"}),h.jsx(Ct,{onClick:M,color:"primary",autoFocus:!0,children:"Confirm"})]})]})]})},nX=()=>{const[e,n]=X.useState(""),[t,r]=X.useState(!1),[i,a]=X.useState(!1),[s,l]=X.useState(void 0),[u,d]=X.useState(!1),[f,m]=X.useState(""),[b,g]=X.useState(!1),[x,y]=X.useState(!1),[A,w]=X.useState(!1),[C,j]=X.useState([]),[F,M]=X.useState(""),[z,_]=X.useState([]),L=Xn(),[$,Z]=X.useState("");ya(),X.useEffect(()=>{(async()=>{try{const B=ln(L,"courses"),re=(await Ci(B)).docs.map(oe=>({id:oe.id,number:oe.data().number,title:oe.data().title}));_(re)}catch(B){console.error("Error fetching courses:",B)}})()},[L]);const O=async()=>{if(e){d(!0),a(!1);try{const q=un(L,"users",e),B=await ga(q);if(B.exists()){const ee=B.data();r(ee.isAdmin),l(ee.classes),a(!0)}else m("User not found."),g(!0)}catch(q){console.error("Error fetching user:",q),m("Error fetching user."),g(!0)}d(!1)}},T=X.useCallback(async()=>{d(!0);try{const q=ln(L,"users"),ee=(await Ci(q)).docs.map(re=>({id:re.id,...re.data()}));j(ee)}catch(q){console.error("Error fetching users:",q),m("Error fetching users."),g(!0)}d(!1)},[L]);X.useEffect(()=>{T()},[T]);const R=async()=>{try{const q=un(L,"users",e);await Hr(q,{isAdmin:A}),m(`User ${A?"granted":"revoked"} admin privileges successfully.`),r(A);const B=C.map(ee=>ee.id===e?{...ee,isAdmin:A}:ee);j(B)}catch(q){console.error("Error updating user:",q),m("Error updating user.")}g(!0),y(!1)},N=q=>{q.preventDefault(),i?(w(!t),y(!0)):(m("User not found."),g(!0))},G=()=>{g(!1)},W=()=>{y(!1)},Q=q=>F?q.classes&&F in q.classes:!0,J=q=>$==="superAdmin"?q.isSuperAdmin:$==="educator"?q.isAdmin&&!q.isSuperAdmin:$==="student"?!q.isAdmin&&!q.isSuperAdmin:!0,se=q=>q.filter(B=>Q(B)&&J(B)),U=q=>{q?(m("User account deleted successfully."),a(!1),n(""),T()):m("Error deleting user account."),g(!0)},le=(q,B)=>{l(ee=>({...ee,[q]:B}))};return h.jsxs(de,{sx:{padding:3},children:[h.jsx(So,{title:"User Management"}),h.jsx(he,{variant:"body1",gutterBottom:!0,children:"Use this page to view and manage user permissions. Enter the User ID to grant or revoke admin privileges, or delete user account."}),h.jsx(de,{sx:{display:"flex",justifyContent:"flex-start"},children:h.jsxs("form",{onSubmit:N,children:[h.jsx(Jt,{label:"User ID",value:e,onChange:q=>n(q.target.value),fullWidth:!0,required:!0,margin:"normal",onKeyPress:q=>{q.key==="Enter"&&(O(),q.preventDefault())},sx:{minWidth:"300px"}}),u?h.jsx(Zr,{}):i&&h.jsxs(gn,{variant:"outlined",sx:{padding:2,borderRadius:"15px",mb:1},children:[h.jsxs(de,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",border:"1px solid #e0e0e0",padding:"16px",borderRadius:"8px",backgroundColor:"#f9f9f9",mb:2},children:[h.jsxs(de,{sx:{display:"flex",alignItems:"center"},children:[h.jsx(he,{variant:"h6",component:"h2",sx:{mr:2},children:"Current Status:"}),h.jsx(cr,{label:t?"Educator (Admin)":"Student (Non-Admin)",color:t?"primary":"default",sx:{fontSize:"0.9rem",fontWeight:"bold",padding:"6px 12px",borderRadius:"16px",backgroundColor:t?"#1976d2":"#e0e0e0",color:t?"#fff":"#000"}})]}),h.jsx(Ct,{type:"submit",variant:"contained",color:t?"secondary":"primary",sx:{padding:"8px 16px",textTransform:"none",fontSize:"0.9rem",borderRadius:"8px",fontWeight:"bold",boxShadow:"none","&:hover":{boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.2)"}},children:t?"Revoke Educator Access":"Grant Educator Access"})]}),h.jsx(tX,{userId:e,userClasses:s,courses:z,onCourseAssigned:le}),h.jsx(eX,{userId:e,onUserDeleted:U})]})]})}),h.jsx(he,{variant:"h5",component:"h2",gutterBottom:!0,children:"Current Users"}),h.jsx(cm,{value:F,onChange:M,courses:[{id:"",number:"All",title:"Courses"},...z.map(q=>({id:q.id,number:q.number,title:q.title,isCourseAdmin:!1}))],label:"Filter by Course",placeholder:"All courses",helperText:"",size:"small",sx:{mb:3,width:"25%"}}),h.jsxs(Td,{fullWidth:!0,sx:{mb:3,width:"25%"},children:[h.jsx(ap,{children:"User Status"}),h.jsxs(Dc,{value:$,onChange:q=>Z(q.target.value),children:[h.jsx(ai,{value:"",children:"All Statuses"}),h.jsx(ai,{value:"superAdmin",children:"Super Admin"}),h.jsx(ai,{value:"educator",children:"Educator"}),h.jsx(ai,{value:"student",children:"Student"})]})]}),h.jsx(JK,{users:se(C)}),h.jsxs(Zi,{open:x,onClose:W,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[h.jsx(pa,{id:"alert-dialog-title",children:t?"Revoke Admin Privileges":"Grant Admin Privileges"}),h.jsx(Ji,{children:h.jsxs(Il,{id:"alert-dialog-description",children:["Are you sure you want to ",t?"revoke":"grant"," admin privileges for this user?"]})}),h.jsxs(ma,{children:[h.jsx(Ct,{onClick:W,color:"primary",children:"Cancel"}),h.jsx(Ct,{onClick:R,color:"primary",autoFocus:!0,children:"Confirm"})]})]}),h.jsx(Ll,{open:b,autoHideDuration:6e3,onClose:G,children:h.jsx(rr,{onClose:G,severity:"info",children:f})})]})},rX=({onCourseAdded:e})=>{const[n,t]=X.useState(""),{userDetails:r,setUserDetails:i}=zi(),a=Xn(),s=u=>{t(u.target.value)},l=async()=>{try{const f=(await Ci(ln(a,"courses"))).docs.map(m=>({id:m.id,passcode:m.data().passcode,number:m.data().number,title:m.data().title})).find(m=>m.passcode===n);if(f){if(r)if((r.classes||{})[f.id])e(`Course access for ${f.number} is already added to your account!`,"info");else{const b=un(a,"users",r.uid),g=un(a,"courses",f.id),x=await ga(g),y=x.exists()?x.data():null,A=(y==null?void 0:y.courseCreatedAt)||(y==null?void 0:y.createdAt)||(y==null?void 0:y.timestamp)||new Date;await Hr(b,{[`classes.${f.id}`]:{number:f.number,title:f.title,isCourseAdmin:!1,courseCreatedAt:A,enrolledAt:new Date}});const w=await ga(b);if(w.exists()){const C=w.data();i({...C,uid:r.uid})}e(`Course access for ${f.number} added to your account successfully!`,"success"),t("")}}else e("Invalid passcode. Course not found.","error")}catch(u){console.error("Error updating document: ",u),e("Error adding course access to your account.","error")}};return h.jsxs(de,{sx:{p:$e[4],backgroundColor:K.background.primary,borderRadius:kt.lg,border:`1px solid ${K.neutral[200]}`,boxShadow:Ft.sm,maxWidth:"600px"},children:[h.jsx(he,{variant:"h6",sx:{mb:$e[3],fontFamily:we.fontFamily.secondary,fontWeight:we.fontWeight.semibold,color:K.text.primary},children:"Enter Course Passcode"}),h.jsxs(wt,{container:!0,spacing:$e[3],alignItems:"center",children:[h.jsx(wt,{item:!0,xs:12,md:8,children:h.jsx(Jt,{label:"Course Passcode",value:n,onChange:s,fullWidth:!0,variant:"outlined",placeholder:"Enter the passcode provided by your instructor",sx:{"& .MuiOutlinedInput-root":{fontFamily:we.fontFamily.primary,"& fieldset":{borderColor:K.neutral[300]},"&:hover fieldset":{borderColor:K.primary[400]},"&.Mui-focused fieldset":{borderColor:K.primary[500]}},"& .MuiInputLabel-root":{fontFamily:we.fontFamily.secondary,color:K.text.secondary,"&.Mui-focused":{color:K.primary[500]}}}})}),h.jsx(wt,{item:!0,xs:12,md:4,children:h.jsx(Ct,{variant:"contained",onClick:l,fullWidth:!0,sx:{fontFamily:we.fontFamily.secondary,fontWeight:we.fontWeight.medium,backgroundColor:K.primary[500],color:K.text.inverse,borderRadius:kt.md,textTransform:"none",py:$e[2],"&:hover":{backgroundColor:K.primary[600]},"&:disabled":{backgroundColor:K.neutral[300],color:K.text.disabled}},children:"Add Course"})})]})]})};var C1={},r_;function iX(){if(r_)return C1;r_=1;var e=Pd();Object.defineProperty(C1,"__esModule",{value:!0}),C1.default=void 0;var n=e(qd()),t=zd();return C1.default=(0,n.default)((0,t.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6m0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20"}),"AccountCircle"),C1}var aX=iX();const sX=ns(aX),oX=({userDetails:e})=>{const n=()=>e.isSuperAdmin?"superAdmin":e.isAdmin?"educator":"student",t=()=>n(),r=()=>e!=null&&e.classes?h.jsx(de,{sx:{border:`1px solid ${K.neutral[200]}`,borderRadius:kt.md,overflow:"hidden"},children:Object.entries(e.classes).map(([i,a],s)=>h.jsxs(de,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:$e[3],backgroundColor:s%2===0?K.background.primary:K.neutral[50],borderBottom:s<Object.keys(e.classes).length-1?`1px solid ${K.neutral[200]}`:"none","&:hover":{backgroundColor:K.primary[50]}},children:[h.jsx(de,{sx:{flex:1},children:h.jsx(bp,{courseId:i,courseNumber:a.number,courseTitle:a.title,variant:"link",maxTitleLength:30})}),a.isCourseAdmin&&h.jsx(de,{sx:{ml:$e[2],px:$e[2],py:$e[1],backgroundColor:K.success[100],color:K.success[700],borderRadius:kt.sm,fontSize:we.fontSize.xs,fontWeight:we.fontWeight.semibold,fontFamily:we.fontFamily.secondary},children:"Admin"})]},i))}):h.jsx(de,{sx:{p:$e[3],textAlign:"center",backgroundColor:K.neutral[50],borderRadius:kt.md,border:`1px solid ${K.neutral[200]}`},children:h.jsx(he,{variant:"body2",sx:{color:K.text.secondary,fontStyle:"italic",fontFamily:we.fontFamily.secondary},children:"No courses enrolled"})});return h.jsxs(gn,{elevation:0,sx:{padding:$e[6],borderRadius:kt.xl,backgroundColor:K.background.primary,border:`1px solid ${K.neutral[200]}`,boxShadow:Ft.lg,maxWidth:"600px",margin:"auto",transition:"all 0.2s ease","&:hover":{boxShadow:Ft.xl,transform:"translateY(-2px)"}},children:[h.jsx(de,{sx:{display:"flex",justifyContent:"center",mb:$e[4]},children:h.jsx(d3,{sx:{width:80,height:80,bgcolor:K.primary[500],border:`3px solid ${K.primary[100]}`,boxShadow:Ft.md},children:h.jsx(sX,{sx:{fontSize:48,color:K.text.inverse}})})}),h.jsxs(de,{sx:{display:"flex",flexDirection:"column",gap:$e[4]},children:[h.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:$e[3]},children:[h.jsx(he,{sx:{fontWeight:we.fontWeight.semibold,fontFamily:we.fontFamily.secondary,color:K.text.primary,minWidth:"100px"},children:"User ID:"}),h.jsx(ih,{userId:e.uid,userType:n(),maxLength:999})]}),h.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:$e[3]},children:[h.jsx(he,{sx:{fontWeight:we.fontWeight.semibold,fontFamily:we.fontFamily.secondary,color:K.text.primary,minWidth:"100px"},children:"Status:"}),h.jsx(DT,{status:t(),size:"medium"})]}),h.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:$e[3]},children:[h.jsx(he,{sx:{fontWeight:we.fontWeight.semibold,fontFamily:we.fontFamily.secondary,color:K.text.primary,minWidth:"100px"},children:"Last Login:"}),h.jsx(he,{variant:"body2",sx:{fontFamily:"monospace",fontSize:we.fontSize.sm,color:K.text.secondary,backgroundColor:K.neutral[100],padding:`${$e[2]} ${$e[3]}`,borderRadius:kt.md,border:`1px solid ${K.neutral[300]}`},children:MT(e.lastLogin)})]})]}),h.jsx(qs,{sx:{my:$e[4],borderColor:K.neutral[200]}}),h.jsxs(de,{children:[h.jsx(he,{sx:{fontWeight:we.fontWeight.semibold,fontFamily:we.fontFamily.secondary,color:K.text.primary,mb:$e[3],fontSize:we.fontSize.lg},children:"Enrolled Courses:"}),r()]})]})},lX=()=>{const{userDetails:e,setUserDetails:n}=zi(),[t,r]=X.useState(!1),[i,a]=X.useState(!1),[s,l]=X.useState(!1),[u,d]=X.useState(""),[f,m]=X.useState("success"),b=ya(),g=Xn(),x=()=>{e!=null&&e.isAdmin||b("/request-educator-permissions")},y=(j,F)=>{l(!0),d(j),m(F),F==="success"&&e&&(async()=>{const z=un(g,"users",e.uid),_=await ga(z);if(_.exists()){const L=_.data();n({...L,uid:e.uid})}})()},A=()=>{r(!t)},w=()=>{a(!i)},C=()=>{l(!1)};return h.jsxs(de,{sx:{minHeight:"100vh",backgroundColor:K.background.secondary,padding:$e[4]},children:[h.jsx(So,{title:"My Account",subtitle:"Manage your account settings, course enrollments, and permissions"}),e&&h.jsx(de,{sx:{mb:$e[6]},children:h.jsx(oX,{userDetails:e})}),h.jsxs(de,{sx:{display:"flex",gap:$e[4],mb:$e[4],alignItems:"flex-start"},children:[!(e!=null&&e.isAdmin)&&h.jsxs(de,{sx:{flex:1,p:$e[4],backgroundColor:K.background.primary,borderRadius:kt.lg,border:`1px solid ${K.neutral[200]}`,boxShadow:Ft.sm},children:[h.jsx(Sd,{control:h.jsx(Ad,{checked:t,onChange:A,sx:{"& .MuiSwitch-thumb":{backgroundColor:K.primary[500]},"& .MuiSwitch-track":{backgroundColor:K.primary[100]},"&.Mui-checked .MuiSwitch-track":{backgroundColor:K.primary[500]}}}),label:h.jsx(he,{sx:{fontFamily:we.fontFamily.display,fontWeight:we.fontWeight.semibold,color:K.text.primary,fontSize:we.fontSize.xl},children:"Enroll in a Course"})}),t&&h.jsx(de,{sx:{mt:$e[3]},children:h.jsx(rX,{onCourseAdded:y})})]}),h.jsxs(de,{sx:{flex:1,p:$e[4],backgroundColor:K.background.primary,borderRadius:kt.lg,border:`1px solid ${K.neutral[200]}`,boxShadow:Ft.sm},children:[h.jsx(Sd,{control:h.jsx(Ad,{checked:i,onChange:w,sx:{"& .MuiSwitch-thumb":{backgroundColor:K.primary[500]},"& .MuiSwitch-track":{backgroundColor:K.primary[100]},"&.Mui-checked .MuiSwitch-track":{backgroundColor:K.primary[500]}}}),label:h.jsx(he,{sx:{fontFamily:we.fontFamily.display,fontWeight:we.fontWeight.semibold,color:K.text.primary,fontSize:we.fontSize.xl},children:"Advanced"})}),i&&h.jsx(de,{sx:{mt:$e[3]},children:h.jsx(Ct,{variant:e!=null&&e.isAdmin?"outlined":"contained",onClick:x,disabled:e==null?void 0:e.isAdmin,sx:{fontFamily:we.fontFamily.secondary,fontWeight:we.fontWeight.medium,borderRadius:kt.md,textTransform:"none",px:$e[4],py:$e[2],...e!=null&&e.isAdmin?{borderColor:K.success[500],color:K.success[700],backgroundColor:K.success[50],"&:hover":{backgroundColor:K.success[100]}}:{backgroundColor:K.primary[600],color:K.text.inverse,"&:hover":{backgroundColor:K.primary[700]}}},children:e!=null&&e.isAdmin?h.jsxs(he,{sx:{fontFamily:we.fontFamily.secondary,fontWeight:we.fontWeight.medium,display:"flex",alignItems:"center",gap:$e[2]},children:[h.jsx("span",{children:""}),"Educator Account Approved"]}):"Request Educator Permissions"})})]})]}),h.jsx(Ll,{open:s,autoHideDuration:6e3,onClose:C,children:h.jsx(rr,{onClose:C,severity:f,sx:{width:"100%",fontFamily:we.fontFamily.secondary},children:u})})]})},uX=({selectedCourse:e,selectedCourseDetails:n,onStudentChange:t})=>{const[r,i]=X.useState(""),[a,s]=X.useState(!1),[l,u]=X.useState(""),[d,f]=X.useState(!1),[m,b]=X.useState(!1),g=Xn(),x=async()=>{if(!r||!e){u("Please enter a Student ID and select a course."),f(!0);return}s(!0);try{const C=un(g,"users",r),j=await ga(C);if(j.exists()){const M=j.data().classes||{};e in M?b(!0):(u(`Student ${r} is not enrolled in course ${(n==null?void 0:n.number)||e}, cannot remove.`),f(!0))}else u(`Student ${r} does not exist.`),f(!0)}catch(C){console.error("Error checking student course:",C),u("Error checking student course."),f(!0)}s(!1)},y=async()=>{s(!0);try{const C=un(g,"users",r);await Hr(C,{[`classes.${e}`]:aR()}),u(`Student ${r} removed from course ${(n==null?void 0:n.number)||e}.`),i(""),t()}catch(C){console.error("Error updating student course:",C),u("Error updating student course.")}s(!1),f(!0),b(!1)},A=()=>{f(!1)},w=()=>{b(!1)};return h.jsxs(de,{sx:{mt:4},children:[h.jsxs(de,{sx:{display:"flex",alignItems:"center",mt:2},children:[h.jsx(Jt,{label:"Student ID",value:r,onChange:C=>i(C.target.value),fullWidth:!0,required:!0,margin:"normal",sx:{mr:2}}),h.jsx(Ct,{variant:"contained",color:"primary",onClick:x,disabled:a,children:a?h.jsx(Zr,{size:24}):"Remove"})]}),h.jsx(Ll,{open:d,autoHideDuration:6e3,onClose:A,children:h.jsx(rr,{onClose:A,severity:"info",children:l})}),h.jsxs(Zi,{open:m,onClose:w,"aria-labelledby":"confirm-dialog-title","aria-describedby":"confirm-dialog-description",children:[h.jsx(pa,{id:"confirm-dialog-title",children:"Confirm Removal"}),h.jsx(Ji,{children:h.jsx(Il,{id:"confirm-dialog-description",children:"Are you sure you want to remove the student from the course? This action cannot be undone."})}),h.jsxs(ma,{children:[h.jsx(Ct,{onClick:w,color:"primary",children:"Cancel"}),h.jsx(Ct,{onClick:y,color:"secondary",autoFocus:!0,children:"Confirm"})]})]})]})},cX=e=>e?typeof e=="object"&&"toDate"in e?e.toDate().toLocaleString():typeof e=="object"&&"seconds"in e?new Date(e.seconds*1e3).toLocaleString():"N/A":"No data available",Ehe=e=>e?typeof e=="object"&&"toDate"in e?e.toDate():typeof e=="object"&&"seconds"in e?new Date(e.seconds*1e3):null:null,dX=({students:e,selectedCourse:n})=>{const t=()=>{if(e.length>0){const r=["User ID","Courses","Last Login"],i=e.map(d=>[`"${d.id||d.uid}"`,`"${d.classes?Object.values(d.classes).map(f=>`${f.number} - ${f.title}`).join(", "):"None"}"`,`"${cX(d.lastLogin)}"`]),a=[r.join(","),...i.map(d=>d.join(","))].join(`
`),s=new Blob([a],{type:"text/csv;charset=utf-8;"}),l=URL.createObjectURL(s),u=document.createElement("a");u.href=l,u.setAttribute("download",`${n}_students.csv`),document.body.appendChild(u),u.click(),document.body.removeChild(u)}};return h.jsx(de,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:h.jsx(Ct,{variant:"contained",color:"primary",onClick:t,disabled:e.length===0,sx:{background:"linear-gradient(45deg, #3f51b5 30%, #1e88e5 90%)",borderRadius:3,boxShadow:"0 3px 5px 2px rgba(33, 203, 243, .3)",color:"white",padding:"0 30px",fontSize:"16px",fontWeight:"bold",textTransform:"none","&:hover":{background:"linear-gradient(45deg, #1e88e5 30%, #3f51b5 90%)",boxShadow:"0 3px 5px 2px rgba(33, 203, 243, .3)"}},children:"Export as CSV"})})},fX=({students:e,loading:n=!1})=>{const t=[{id:"uid",label:"Student ID",width:"60%",render:r=>h.jsx(ih,{userId:r,userType:"student"})},{id:"lastLogin",label:"Last Login",width:"40%",render:r=>h.jsx(yp,{date:r,format:"full"})}];return h.jsx(rh,{data:e,columns:t,loading:n,emptyMessage:"No students are currently enrolled in this course.",showRowNumbers:!0})},hX=({selectedCourse:e,selectedCourseDetails:n,onCourseUpdate:t})=>{const[r,i]=X.useState(!1),[a,s]=X.useState(""),[l,u]=X.useState(""),d=Xn(),{userDetails:f,refreshUserDetails:m}=zi(),b=()=>{n&&(s(n.number||""),u(n.title||"")),i(!0)},g=()=>{i(!1),x()},x=()=>{s(""),u("")},y=async()=>{if(!e||!(f!=null&&f.uid)){console.error("Selected course or user details are missing.");return}try{const A=un(d,"courses",e);await Hr(A,{number:a,title:l});const w=un(d,"users",f.uid),C=await ga(w);if(C.exists()){const j=C.data();if(j.classes&&j.classes[e]){const F=j.classes[e],M={...j.classes,[e]:{...F,number:a,title:l}};await Hr(w,{classes:M})}}await m(),t(),g()}catch(A){console.error("Error updating course:",A)}};return h.jsxs(de,{sx:{mt:2},children:[h.jsx(Ct,{variant:"outlined",onClick:b,sx:{fontFamily:"Staatliches, sans-serif",fontSize:"1rem",backgroundColor:"#4CAF50",color:"#FFFFFF",borderRadius:1,textTransform:"none",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",transition:"background-color 0.3s ease, transform 0.3s ease","&:hover":{backgroundColor:"#388E3C",transform:"scale(1.03)"}},children:"Edit Course Details"}),h.jsxs(Zi,{open:r,onClose:g,children:[h.jsx(pa,{children:"Edit Course Details"}),h.jsxs(Ji,{children:[h.jsx(Jt,{label:"Course Number",value:a,onChange:A=>s(A.target.value),fullWidth:!0,sx:{mb:2}}),h.jsx(Jt,{label:"Course Title",value:l,onChange:A=>u(A.target.value),fullWidth:!0})]}),h.jsxs(ma,{children:[h.jsx(Ct,{onClick:g,children:"Cancel"}),h.jsx(Ct,{onClick:y,variant:"contained",color:"primary",disabled:!a||!l,children:"Save"})]})]})]})},pX=({selectedCourse:e,onInfoUpdate:n})=>{var R,N,G,W,Q,J,se,U,le,q,B,ee,re;const[t,r]=X.useState(!1),[i,a]=X.useState(!1),[s,l]=X.useState(null),[u,d]=X.useState({}),[f,m]=X.useState("contact"),b=Xn();X.useEffect(()=>{t&&e&&g()},[t,e]);const g=async()=>{try{a(!0);const oe=un(b,"courses",e),Ce=await ga(oe);if(Ce.exists()){const ye=Ce.data();d(ye.additionalInfo||{})}}catch(oe){console.error("Error fetching course info:",oe),l("Failed to load course information")}finally{a(!1)}},x=()=>{r(!0),l(null)},y=()=>{r(!1),l(null)},A=async()=>{try{a(!0);const oe=un(b,"courses",e);await Hr(oe,{additionalInfo:{...u,lastUpdated:new Date}}),n(),y()}catch(oe){console.error("Error updating course info:",oe),l("Failed to save course information")}finally{a(!1)}},w=(oe,Ce)=>{d(ye=>({...ye,contactInfo:{...ye.contactInfo,[oe]:Ce}}))},C=(oe,Ce)=>{d(ye=>({...ye,policies:{...ye.policies,[oe]:Ce}}))},j=()=>{d(oe=>({...oe,textbooks:[...oe.textbooks||[],{title:"",author:"",edition:"",isbn:"",required:!0}]}))},F=(oe,Ce,ye)=>{d(Se=>{var Te;return{...Se,textbooks:(Te=Se.textbooks)==null?void 0:Te.map((Le,He)=>He===oe?{...Le,[Ce]:ye}:Le)}})},M=oe=>{d(Ce=>{var ye;return{...Ce,textbooks:(ye=Ce.textbooks)==null?void 0:ye.filter((Se,Te)=>Te!==oe)}})},z=()=>{d(oe=>({...oe,gradingPolicy:[...oe.gradingPolicy||[],{component:"",percentage:0,description:""}]}))},_=(oe,Ce,ye)=>{d(Se=>{var Te;return{...Se,gradingPolicy:(Te=Se.gradingPolicy)==null?void 0:Te.map((Le,He)=>He===oe?{...Le,[Ce]:ye}:Le)}})},L=oe=>{d(Ce=>{var ye;return{...Ce,gradingPolicy:(ye=Ce.gradingPolicy)==null?void 0:ye.filter((Se,Te)=>Te!==oe)}})},$=(oe,Ce)=>{d(ye=>{var Se;return{...ye,[oe]:{...ye[oe],[Ce]:[...((Se=ye[oe])==null?void 0:Se[Ce])||[],""]}}})},Z=(oe,Ce,ye,Se)=>{d(Te=>{var Le;return{...Te,[oe]:{...Te[oe],[Ce]:(((Le=Te[oe])==null?void 0:Le[Ce])||[]).map((He,Ye)=>Ye===ye?Se:He)}}})},O=(oe,Ce,ye)=>{d(Se=>{var Te;return{...Se,[oe]:{...Se[oe],[Ce]:(((Te=Se[oe])==null?void 0:Te[Ce])||[]).filter((Le,He)=>He!==ye)}}})},T=oe=>(Ce,ye)=>{m(ye?oe:!1)};return h.jsxs(de,{sx:{mt:2},children:[h.jsx(Ct,{variant:"outlined",onClick:x,startIcon:h.jsx(bu,{}),sx:{fontFamily:"Staatliches, sans-serif",fontSize:"1rem",backgroundColor:"#2196F3",color:"#FFFFFF",borderRadius:1,textTransform:"none",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",transition:"background-color 0.3s ease, transform 0.3s ease","&:hover":{backgroundColor:"#1976D2",transform:"scale(1.03)"}},children:"Edit Additional Info"}),h.jsxs(Zi,{open:t,onClose:y,maxWidth:"md",fullWidth:!0,children:[h.jsx(pa,{children:h.jsx(he,{variant:"h5",children:"Edit Additional Course Information"})}),h.jsxs(Ji,{sx:{minHeight:"500px"},children:[s&&h.jsx(rr,{severity:"error",sx:{mb:2},children:s}),h.jsxs(xd,{expanded:f==="contact",onChange:T("contact"),children:[h.jsx(vd,{expandIcon:h.jsx(Nl,{}),children:h.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:1},children:[h.jsx(f3,{color:"primary"}),h.jsx(he,{variant:"h6",children:"Contact Information"})]})}),h.jsx(wd,{children:h.jsxs(wt,{container:!0,spacing:2,children:[h.jsx(wt,{item:!0,xs:12,md:6,children:h.jsx(Jt,{label:"Email",fullWidth:!0,value:((R=u.contactInfo)==null?void 0:R.email)||"",onChange:oe=>w("email",oe.target.value)})}),h.jsx(wt,{item:!0,xs:12,md:6,children:h.jsx(Jt,{label:"Phone",fullWidth:!0,value:((N=u.contactInfo)==null?void 0:N.phone)||"",onChange:oe=>w("phone",oe.target.value)})}),h.jsx(wt,{item:!0,xs:12,md:6,children:h.jsx(Jt,{label:"Office",fullWidth:!0,value:((G=u.contactInfo)==null?void 0:G.office)||"",onChange:oe=>w("office",oe.target.value)})}),h.jsx(wt,{item:!0,xs:12,md:6,children:h.jsx(Jt,{label:"Office Hours",fullWidth:!0,value:((W=u.contactInfo)==null?void 0:W.officeHours)||"",onChange:oe=>w("officeHours",oe.target.value)})}),h.jsx(wt,{item:!0,xs:12,children:h.jsx(Jt,{label:"Website",fullWidth:!0,value:((Q=u.contactInfo)==null?void 0:Q.website)||"",onChange:oe=>w("website",oe.target.value)})})]})})]}),h.jsxs(xd,{expanded:f==="textbooks",onChange:T("textbooks"),children:[h.jsx(vd,{expandIcon:h.jsx(Nl,{}),children:h.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:1},children:[h.jsx(h3,{color:"primary"}),h.jsx(he,{variant:"h6",children:"Textbooks & Resources"})]})}),h.jsxs(wd,{children:[h.jsx(de,{sx:{mb:2},children:h.jsx(Ct,{startIcon:h.jsx(pu,{}),onClick:j,variant:"outlined",children:"Add Textbook"})}),(J=u.textbooks)==null?void 0:J.map((oe,Ce)=>h.jsx(de,{sx:{mb:3,p:2,border:"1px solid #ddd",borderRadius:1},children:h.jsxs(wt,{container:!0,spacing:2,children:[h.jsx(wt,{item:!0,xs:12,children:h.jsx(Jt,{label:"Title",fullWidth:!0,value:oe.title,onChange:ye=>F(Ce,"title",ye.target.value)})}),h.jsx(wt,{item:!0,xs:12,md:4,children:h.jsx(Jt,{label:"Author",fullWidth:!0,value:oe.author||"",onChange:ye=>F(Ce,"author",ye.target.value)})}),h.jsx(wt,{item:!0,xs:12,md:4,children:h.jsx(Jt,{label:"Edition",fullWidth:!0,value:oe.edition||"",onChange:ye=>F(Ce,"edition",ye.target.value)})}),h.jsx(wt,{item:!0,xs:12,md:4,children:h.jsx(Jt,{label:"ISBN",fullWidth:!0,value:oe.isbn||"",onChange:ye=>F(Ce,"isbn",ye.target.value)})}),h.jsx(wt,{item:!0,xs:12,children:h.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[h.jsx(Sd,{control:h.jsx(Ad,{checked:oe.required,onChange:ye=>F(Ce,"required",ye.target.checked)}),label:"Required"}),h.jsx(_n,{onClick:()=>M(Ce),color:"error",children:h.jsx(mu,{})})]})})]})},Ce))]})]}),h.jsxs(xd,{expanded:f==="grading",onChange:T("grading"),children:[h.jsx(vd,{expandIcon:h.jsx(Nl,{}),children:h.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:1},children:[h.jsx(p3,{color:"primary"}),h.jsx(he,{variant:"h6",children:"Grading Policy"})]})}),h.jsxs(wd,{children:[h.jsx(de,{sx:{mb:2},children:h.jsx(Ct,{startIcon:h.jsx(pu,{}),onClick:z,variant:"outlined",children:"Add Grading Component"})}),(se=u.gradingPolicy)==null?void 0:se.map((oe,Ce)=>h.jsx(de,{sx:{mb:2,p:2,border:"1px solid #ddd",borderRadius:1},children:h.jsxs(wt,{container:!0,spacing:2,children:[h.jsx(wt,{item:!0,xs:12,md:4,children:h.jsx(Jt,{label:"Component",fullWidth:!0,value:oe.component,onChange:ye=>_(Ce,"component",ye.target.value)})}),h.jsx(wt,{item:!0,xs:12,md:3,children:h.jsx(Jt,{label:"Percentage",type:"number",fullWidth:!0,value:oe.percentage,onChange:ye=>_(Ce,"percentage",parseInt(ye.target.value)||0),inputProps:{min:0,max:100}})}),h.jsx(wt,{item:!0,xs:12,md:4,children:h.jsx(Jt,{label:"Description",fullWidth:!0,value:oe.description||"",onChange:ye=>_(Ce,"description",ye.target.value)})}),h.jsx(wt,{item:!0,xs:12,md:1,children:h.jsx(_n,{onClick:()=>L(Ce),color:"error",children:h.jsx(mu,{})})})]})},Ce))]})]}),h.jsxs(xd,{expanded:f==="policies",onChange:T("policies"),children:[h.jsx(vd,{expandIcon:h.jsx(Nl,{}),children:h.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:1},children:[h.jsx(m3,{color:"primary"}),h.jsx(he,{variant:"h6",children:"Course Policies"})]})}),h.jsx(wd,{children:h.jsx(wt,{container:!0,spacing:2,children:[{key:"attendance",label:"Attendance Policy"},{key:"lateWork",label:"Late Work Policy"},{key:"academicIntegrity",label:"Academic Integrity"},{key:"accommodations",label:"Accommodations"},{key:"communication",label:"Communication Policy"},{key:"safety",label:"Safety Policy"},{key:"groupWork",label:"Group Work Policy"},{key:"makeupPolicy",label:"Make-up Policy"}].map(({key:oe,label:Ce})=>{var ye;return h.jsx(wt,{item:!0,xs:12,children:h.jsx(Jt,{label:Ce,multiline:!0,rows:3,fullWidth:!0,value:((ye=u.policies)==null?void 0:ye[oe])||"",onChange:Se=>C(oe,Se.target.value)})},oe)})})})]}),h.jsxs(xd,{expanded:f==="lab",onChange:T("lab"),children:[h.jsx(vd,{expandIcon:h.jsx(Nl,{}),children:h.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:1},children:[h.jsx(j6,{color:"primary"}),h.jsx(he,{variant:"h6",children:"Laboratory Information"})]})}),h.jsx(wd,{children:h.jsxs(wt,{container:!0,spacing:3,children:[h.jsxs(wt,{item:!0,xs:12,children:[h.jsx(he,{variant:"subtitle2",sx:{mb:1},children:"Safety Requirements"}),h.jsx(de,{sx:{mb:2},children:h.jsx(Ct,{startIcon:h.jsx(pu,{}),onClick:()=>$("labSpecific","safetyRequirements"),size:"small",variant:"outlined",children:"Add Safety Requirement"})}),(le=(U=u.labSpecific)==null?void 0:U.safetyRequirements)==null?void 0:le.map((oe,Ce)=>h.jsxs(de,{sx:{display:"flex",gap:1,mb:1},children:[h.jsx(Jt,{fullWidth:!0,size:"small",value:oe,onChange:ye=>Z("labSpecific","safetyRequirements",Ce,ye.target.value),placeholder:"Safety requirement"}),h.jsx(_n,{onClick:()=>O("labSpecific","safetyRequirements",Ce),color:"error",size:"small",children:h.jsx(mu,{})})]},Ce))]}),h.jsxs(wt,{item:!0,xs:12,md:6,children:[h.jsx(he,{variant:"subtitle2",sx:{mb:1},children:"Required Equipment"}),h.jsx(de,{sx:{mb:2},children:h.jsx(Ct,{startIcon:h.jsx(pu,{}),onClick:()=>$("labSpecific","requiredEquipment"),size:"small",variant:"outlined",children:"Add Equipment"})}),(B=(q=u.labSpecific)==null?void 0:q.requiredEquipment)==null?void 0:B.map((oe,Ce)=>h.jsxs(de,{sx:{display:"flex",gap:1,mb:1},children:[h.jsx(Jt,{fullWidth:!0,size:"small",value:oe,onChange:ye=>Z("labSpecific","requiredEquipment",Ce,ye.target.value),placeholder:"Equipment item"}),h.jsx(_n,{onClick:()=>O("labSpecific","requiredEquipment",Ce),color:"error",size:"small",children:h.jsx(mu,{})})]},Ce))]}),h.jsxs(wt,{item:!0,xs:12,md:6,children:[h.jsx(he,{variant:"subtitle2",sx:{mb:1},children:"Dress Code"}),h.jsx(de,{sx:{mb:2},children:h.jsx(Ct,{startIcon:h.jsx(pu,{}),onClick:()=>$("labSpecific","dresscode"),size:"small",variant:"outlined",children:"Add Dress Code Item"})}),(re=(ee=u.labSpecific)==null?void 0:ee.dresscode)==null?void 0:re.map((oe,Ce)=>h.jsxs(de,{sx:{display:"flex",gap:1,mb:1},children:[h.jsx(Jt,{fullWidth:!0,size:"small",value:oe,onChange:ye=>Z("labSpecific","dresscode",Ce,ye.target.value),placeholder:"Dress code requirement"}),h.jsx(_n,{onClick:()=>O("labSpecific","dresscode",Ce),color:"error",size:"small",children:h.jsx(mu,{})})]},Ce))]})]})})]})]}),h.jsxs(ma,{children:[h.jsx(Ct,{onClick:y,children:"Cancel"}),h.jsx(Ct,{onClick:A,variant:"contained",disabled:i,children:i?"Saving...":"Save Changes"})]})]})]})},mX=async(e,n,t)=>{const r=mp(),i=e.name.split(".").pop()||"txt",a=`${e.name.replace(/\.[^/.]+$/,"")}_${Mi()}.${i}`,s=`syllabi/${n}/${a}`,l=yc(r,s);try{const u=await $f(l,e),d=await Uf(u.ref),f={originalFilename:e.name,fileSize:e.size,fileType:e.type||"application/octet-stream",uploadedAt:new Date,uploadedBy:n,courseId:t};return console.log(`Successfully uploaded syllabus file: ${a}`,{size:e.size,type:e.type,url:d}),{url:d,path:u.ref.fullPath,metadata:f}}catch(u){throw console.error("Failed to upload syllabus file:",u),new Error(`Failed to upload syllabus file: ${u instanceof Error?u.message:"Unknown error"}`)}},i_=e=>{switch(e.toLowerCase()){case"application/pdf":return"PDF Document";case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return"Word Document";case"application/vnd.openxmlformats-officedocument.presentationml.presentation":return"PowerPoint Presentation";case"text/plain":return"Text File";default:return"Document"}},a_=e=>{if(e===0)return"0 Bytes";const n=1024,t=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,r)).toFixed(2))+" "+t[r]},gX=({courseId:e})=>{const[n,t]=X.useState(null),[r,i]=X.useState(!0),[a,s]=X.useState(null),[l,u]=X.useState(!1),d=Xn();X.useEffect(()=>{e&&(async()=>{try{i(!0);const g=un(d,"courses",e),x=await ga(g);if(x.exists()){const y=x.data();t(y.syllabusFile||null)}else s("Course not found")}catch(g){console.error("Error fetching syllabus file:",g),s("Failed to load syllabus file information")}finally{i(!1)}})()},[e,d]);const f=()=>{n!=null&&n.url&&window.open(n.url,"_blank")},m=()=>{u(!0)};return r?h.jsx(de,{sx:{display:"flex",justifyContent:"center",p:2},children:h.jsx(Zr,{size:24})}):a?h.jsx(rr,{severity:"error",sx:{mb:2},children:a}):n?h.jsxs(gn,{sx:{p:3,mb:3,backgroundColor:"info.50"},children:[h.jsxs(he,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[h.jsx(yx,{color:"primary"}),"Original Syllabus Document"]}),h.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[h.jsx(he,{variant:"body1",sx:{flexGrow:1},children:h.jsx("strong",{children:n.metadata.originalFilename})}),h.jsxs(he,{variant:"body2",color:"text.secondary",children:[i_(n.metadata.fileType),"  ",a_(n.metadata.fileSize)]})]}),h.jsxs(he,{variant:"body2",color:"text.secondary",sx:{mb:2},children:["Uploaded: ",new Date(n.metadata.uploadedAt).toLocaleDateString()]}),h.jsxs(de,{sx:{display:"flex",gap:2},children:[h.jsx(Ct,{variant:"outlined",startIcon:h.jsx(I6,{}),onClick:m,size:"small",children:"View Details"}),h.jsx(Ct,{variant:"contained",startIcon:h.jsx(rg,{}),onClick:f,size:"small",children:"Download"})]}),h.jsxs(Zi,{open:l,onClose:()=>u(!1),maxWidth:"sm",fullWidth:!0,children:[h.jsxs(pa,{sx:{display:"flex",alignItems:"center",gap:1},children:[h.jsx(yx,{}),"Syllabus File Details"]}),h.jsx(Ji,{children:h.jsxs(de,{sx:{mb:2},children:[h.jsx(he,{variant:"body2",color:"text.secondary",children:h.jsx("strong",{children:"Filename:"})}),h.jsx(he,{variant:"body1",sx:{mb:2},children:n.metadata.originalFilename}),h.jsx(he,{variant:"body2",color:"text.secondary",children:h.jsx("strong",{children:"File Type:"})}),h.jsx(he,{variant:"body1",sx:{mb:2},children:i_(n.metadata.fileType)}),h.jsx(he,{variant:"body2",color:"text.secondary",children:h.jsx("strong",{children:"File Size:"})}),h.jsx(he,{variant:"body1",sx:{mb:2},children:a_(n.metadata.fileSize)}),h.jsx(he,{variant:"body2",color:"text.secondary",children:h.jsx("strong",{children:"Uploaded:"})}),h.jsx(he,{variant:"body1",sx:{mb:2},children:new Date(n.metadata.uploadedAt).toLocaleString()}),h.jsx(he,{variant:"body2",color:"text.secondary",children:h.jsx("strong",{children:"Storage Path:"})}),h.jsx(he,{variant:"body2",sx:{fontFamily:"monospace",backgroundColor:"grey.100",p:1,borderRadius:1},children:n.path})]})}),h.jsxs(ma,{children:[h.jsx(Ct,{onClick:()=>u(!1),children:"Close"}),h.jsx(Ct,{onClick:f,variant:"contained",startIcon:h.jsx(rg,{}),children:"Download File"})]})]})]}):null},bX=({selectedCourse:e,onCourseDelete:n})=>{const[t,r]=X.useState(!1),i=Xn(),{refreshUserDetails:a}=zi(),s=()=>r(!0),l=()=>r(!1),u=async()=>{if(e)try{const d=av(i),f=un(i,"courses",e);d.delete(f);const m=ln(i,"users");(await Ci(m)).forEach(g=>{const x=un(i,"users",g.id),y=g.data().classes||{};y&&y[e]&&(delete y[e],d.update(x,{classes:y}))}),await d.commit(),await a(),n(),l()}catch(d){console.error("Error deleting course:",d)}};return h.jsxs(de,{sx:{mt:2},children:[h.jsx(Ct,{variant:"contained",onClick:s,sx:{fontFamily:"Staatliches, sans-serif",fontSize:"1rem",backgroundColor:"#F44336",color:"#FFFFFF",borderRadius:1,textTransform:"none",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",transition:"background-color 0.3s ease, transform 0.3s ease","&:hover":{backgroundColor:"#D32F2F",transform:"scale(1.03)"}},children:"Delete Course"}),h.jsxs(Zi,{open:t,onClose:l,children:[h.jsx(pa,{children:"Confirm Delete"}),h.jsx(Ji,{children:h.jsx(Il,{children:"Are you sure you want to delete this course? This action cannot be undone."})}),h.jsxs(ma,{children:[h.jsx(Ct,{onClick:l,children:"Cancel"}),h.jsx(Ct,{onClick:u,variant:"contained",color:"error",children:"Delete"})]})]})]})},yX=()=>{const[e,n]=X.useState({passcode:null,loading:!1,error:null}),t=X.useRef(new Map),r=Xn(),i=X.useCallback(async l=>{if(!l){n(d=>({...d,error:"Course ID is required"}));return}const u=t.current.get(l);if(u){n(d=>({...d,loading:!1,error:null,passcode:u}));return}n(d=>({...d,loading:!0,error:null}));try{const d=await ga(un(r,"courses",l));if(!d.exists()){n(b=>({...b,loading:!1,error:"Course not found",passcode:null}));return}const f=d.data(),m=f==null?void 0:f.passcode;if(!m){n(b=>({...b,loading:!1,error:"No passcode found for this course",passcode:null}));return}t.current.set(l,m),n(b=>({...b,loading:!1,error:null,passcode:m}))}catch(d){console.error("Error fetching course passcode:",d),n(f=>({...f,loading:!1,error:"Failed to fetch passcode. Please try again.",passcode:null}))}},[r]),a=X.useCallback(()=>{n(l=>({...l,passcode:null,error:null}))},[]),s=X.useCallback(()=>{t.current.clear()},[]);return{...e,fetchPasscode:i,clearPasscode:a,clearCache:s}},xX=({text:e,tooltipText:n="Click to Copy",successText:t="Copied!"})=>{const[r,i]=X.useState(!1),a=()=>{navigator.clipboard.writeText(e).then(()=>{i(!0),setTimeout(()=>i(!1),2e3)}).catch(s=>console.error("Could not copy text: ",s))};return h.jsx(fi,{title:r?t:n,enterDelay:300,leaveDelay:200,children:h.jsx(cr,{label:e,variant:"outlined",onClick:a,sx:{borderRadius:"15px",fontSize:"16px",fontWeight:"bold",background:"#e0f2f1",color:"#00695c",cursor:"pointer",transition:"background-color 0.3s",fontFamily:"Gabarito, sans-serif"}})})},vX=({selectedCourse:e,courseDetails:n})=>{const{passcode:t,loading:r,error:i,fetchPasscode:a,clearPasscode:s,clearCache:l}=yX(),u=X.useCallback(()=>{e?a(e):(s(),l())},[e,a,s,l]);return X.useEffect(()=>{u()},[u]),e?h.jsxs(de,{sx:{mt:2},children:[r&&h.jsx(de,{sx:{display:"flex",justifyContent:"center",py:3},children:h.jsx(Zr,{size:28})}),i&&h.jsx(rr,{severity:"error",sx:{mb:2},children:i}),t&&!r&&h.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:2},children:[h.jsx(he,{variant:"body1",sx:{fontWeight:"medium"},children:"Passcode:"}),h.jsx(xX,{text:t,tooltipText:"Click to copy passcode",successText:"Passcode copied!"})]}),!t&&!r&&!i&&h.jsx(rr,{severity:"warning",children:"No passcode available for this course."})]}):h.jsx(de,{sx:{mt:2},children:h.jsx(rr,{severity:"info",children:"Please select a course to retrieve its passcode."})})},wX=()=>{const{userDetails:e}=zi(),[n,t]=X.useState([]),[r,i]=X.useState(""),[a,s]=X.useState(!1),[l,u]=X.useState(!1),[d,f]=X.useState(!1),m=Xn(),b=ya(),x=e!=null&&e.classes?Object.entries(e.classes).filter(([F,M])=>M.isCourseAdmin).reduce((F,[M,z])=>({...F,[M]:z}),{}):{},y=Object.entries(x).map(([F,M])=>({id:F,number:M.number,title:M.title,isCourseAdmin:M.isCourseAdmin}));X.useEffect(()=>{x[r]||i(Object.keys(x)[0]||"")},[x,r]),X.useEffect(()=>{(async()=>{if(r)try{const M=Ol(ln(m,"users"),Ri("isAdmin","==",!1)),L=(await Ci(M)).docs.map($=>({uid:$.id,...$.data()})).filter($=>$.classes&&$.classes[r]);t(L)}catch(M){console.error("Error fetching students:",M)}})()},[r,m]);const A=F=>{i(F)},w=()=>{b("/request-new-course")},C=x[r];C&&`${C.number}${C.title}`;const j=!!(r&&C);return h.jsxs(de,{className:"profile-container",sx:{p:4},children:[h.jsx(So,{title:"Course Management"}),h.jsxs(de,{sx:{mb:4,p:3,backgroundColor:"#FFFFFF",borderRadius:2,boxShadow:"0 1px 4px rgba(0, 0, 0, 0.1)"},children:[h.jsx(he,{variant:"h6",sx:{fontFamily:"Staatliches, sans-serif",mb:2,color:"#0B53C0",fontSize:"1.25rem"},children:"Select a Course"}),y.length>0?h.jsx(cm,{value:r,onChange:A,courses:y,label:"",placeholder:"",helperText:"",showNumber:!0,showTitle:!0,showAdminBadge:!1}):h.jsx(he,{variant:"body1",sx:{color:"#9E9E9E"},children:"No courses available for selection."})]}),h.jsx(de,{children:j&&h.jsxs(h.Fragment,{children:[h.jsx(gX,{courseId:r}),h.jsxs(de,{sx:{flex:2,display:"flex",justifyContent:"flex-end",gap:2},children:[h.jsx(hX,{selectedCourse:r,selectedCourseDetails:C,onCourseUpdate:()=>{}}),h.jsx(pX,{selectedCourse:r,onInfoUpdate:()=>{}}),h.jsx(bX,{selectedCourse:r,onCourseDelete:()=>i("")})]})]})}),j&&h.jsxs(gn,{elevation:0,sx:{p:$e[6],mb:$e[6],borderRadius:kt.xl,backgroundColor:K.background.secondary,border:`1px solid ${K.neutral[200]}`},children:[h.jsx(he,{variant:"h5",component:"h2",sx:{fontFamily:we.fontFamily.display,fontWeight:we.fontWeight.bold,mb:$e[4],color:K.primary[500]},children:"Students Enrolled in Course"}),h.jsx(de,{sx:{mb:$e[4]},children:h.jsx(fX,{students:n,loading:!1})}),n.length>0&&h.jsx(dX,{students:n,selectedCourse:r}),n.length>0&&h.jsxs(gn,{sx:{mt:4,p:3,borderRadius:2,boxShadow:"0 1px 4px rgba(0, 0, 0, 0.1)"},children:[h.jsx(he,{variant:"h6",sx:{fontFamily:"Staatliches, sans-serif",mb:2,color:"#0B53C0",fontSize:"1.25rem"},children:"Remove Student(s) from the Course"}),h.jsx(Sd,{control:h.jsx(Ad,{checked:d,onChange:()=>f(F=>!F),sx:{"& .MuiSwitch-thumb":{backgroundColor:"#0B53C0"},"& .MuiSwitch-track":{backgroundColor:"#E0ECFF"},"&.Mui-checked .MuiSwitch-track":{backgroundColor:"#0B53C0"}}}),label:"",sx:{mb:2}}),d&&h.jsx(uX,{selectedCourse:r,selectedCourseDetails:C,onStudentChange:()=>{}})]})]}),h.jsxs(de,{sx:{display:"flex",gap:4,mb:4},children:[h.jsxs(de,{sx:{p:3,flex:1,backgroundColor:"#FFFFFF",borderRadius:2,boxShadow:"0 1px 4px rgba(0, 0, 0, 0.1)"},children:[h.jsx(Sd,{control:h.jsx(Ad,{checked:l,onChange:()=>u(F=>!F),sx:{"& .MuiSwitch-thumb":{backgroundColor:"#0B53C0"},"& .MuiSwitch-track":{backgroundColor:"#E0ECFF"},"&.Mui-checked .MuiSwitch-track":{backgroundColor:"#0B53C0"}}}),label:"Retrieve Course Passcode",sx:{mb:2,"& .MuiFormControlLabel-label":{fontFamily:"Staatliches, sans-serif",color:"#0B53C0",fontSize:"1.25rem"}}}),l&&h.jsx(de,{sx:{mt:2},children:h.jsx(vX,{selectedCourse:r,courseDetails:C?{number:C.number,title:C.title}:void 0})})]}),h.jsxs(de,{sx:{p:3,flex:1,backgroundColor:"#FFFFFF",borderRadius:2,boxShadow:"0 1px 4px rgba(0, 0, 0, 0.1)"},children:[h.jsx(Sd,{control:h.jsx(Ad,{checked:a,onChange:()=>s(F=>!F),sx:{"& .MuiSwitch-thumb":{backgroundColor:"#0B53C0"},"& .MuiSwitch-track":{backgroundColor:"#E0ECFF"},"&.Mui-checked .MuiSwitch-track":{backgroundColor:"#0B53C0"}}}),label:"Request Creating a New Course",sx:{mb:2,"& .MuiFormControlLabel-label":{fontFamily:"Staatliches, sans-serif",color:"#0B53C0",fontSize:"1.25rem"}}}),a&&h.jsx(de,{sx:{mt:2},children:h.jsx(Ct,{variant:"contained",onClick:w,sx:{backgroundColor:"#4CAF50",color:"#FFFFFF",fontFamily:"Staatliches, sans-serif",textTransform:"none","&:hover":{backgroundColor:"#388E3C"}},children:"Request New Course"})})]})]})]})};class SX{constructor(){console.log("GeminiService initialized with secure proxy mode")}async processSyllabusText(n,t,r){return n.length>3e4?(console.log("Large document detected, using chunked processing"),this.processLargeDocument(n,t,r)):this.processSingleDocument(n,t,r)}async processSingleDocument(n,t,r){const i=this.buildSyllabusAnalysisPrompt(n,t);try{const a=await j5(i,{thinkingLevel:"high",maxTokens:(r==null?void 0:r.maxOutputTokens)||16384});if(!a||a.trim().length===0)throw new Error("Empty response from AI service");const s=a.replace(/```json\n?/g,"").replace(/```\n?/g,"").trim();let l;try{l=JSON.parse(s)}catch(u){throw console.error("JSON parsing failed:",u),console.error("Raw response text:",a),console.error("Cleaned text:",s),new Error("AI response format invalid - unable to parse JSON")}if(!l||typeof l!="object")throw new Error("AI response is not a valid object");return l.courseInfo||(console.warn("Missing courseInfo in AI response, using defaults"),l.courseInfo={}),this.validateAndSanitizeResponse(l)}catch(a){throw console.error("Gemini API Error:",a),a instanceof Error&&(a.message.includes("AI processing failed")||a.message.includes("signed in")||a.message.includes("rate limit")||a.message.includes("API key configuration")||a.message.includes("AI response")||a.message.includes("JSON parsing"))?a:new Error(`Failed to process syllabus with AI: ${a instanceof Error?a.message:"Unknown error"}`)}}async processLargeDocument(n,t,r){const a=this.chunkText(n,35e3);console.log(`Processing ${a.length} chunks for large document`);const s=await this.processSingleDocument(a[0],t,r),l=await Promise.allSettled(a.slice(1).map(u=>this.processChunkForDetails(u,t)));return this.mergeChunkedResults(s,l)}chunkText(n,t){const r=[],i=n.split(`
`);let a="";const s=["schedule","session","unit","week","topic","assignment","objective","learning outcome","reading","textbook","prerequisite"];for(let l=0;l<i.length;l++){const u=i[l],d=i[l+1]||"",f=s.some(m=>u.toLowerCase().includes(m)||d.toLowerCase().includes(m));a.length+u.length>t&&a.length>0&&(f||a.length>t*.8)?(r.push(a.trim()),a=u):a+=`
`+u}return a.trim()&&r.push(a.trim()),r}async processChunkForDetails(n,t){const r=`
Extract additional course details from this syllabus section. Focus heavily on:
- ALL schedule items, sessions, units, weeks, and topics
- Session numbers, titles, and descriptions
- Learning outcomes for each session
- Reading assignments and resources
- Assignment details and due dates
- Any additional objectives or policies

IMPORTANT: Extract ALL schedule/session information - do not limit the number of items.
Convert session numbers to week numbers (Session 1 = Week 1, etc.).

Return JSON with only the fields you can extract from this section:
${n}
`;try{const a=(await j5(r,{thinkingLevel:"high",maxTokens:8192})).replace(/```json\n?/g,"").replace(/```\n?/g,"").trim();return JSON.parse(a)}catch(i){return console.warn("Failed to process chunk:",i),{}}}mergeChunkedResults(n,t){const r={...n};return t.forEach(i=>{if(i.status==="fulfilled"&&i.value){const a=i.value;if(a.learningObjectives&&(r.learningObjectives=[...r.learningObjectives,...a.learningObjectives]),a.schedule){const s=new Set(r.schedule.map(u=>`${u.week}-${u.topic}`)),l=a.schedule.filter(u=>!s.has(`${u.week}-${u.topic}`));r.schedule=[...r.schedule,...l]}a.assignments&&(r.assignments=[...r.assignments,...a.assignments]),a.prerequisites&&(r.prerequisites=[...r.prerequisites,...a.prerequisites]),a.contactInfo&&(r.contactInfo={...r.contactInfo,...a.contactInfo}),a.policies&&(r.policies={...r.policies,...a.policies}),a.additionalResources&&(r.additionalResources={...r.additionalResources,...a.additionalResources})}}),r.learningObjectives=[...new Set(r.learningObjectives)],r.prerequisites=[...new Set(r.prerequisites)],r.schedule=r.schedule.sort((i,a)=>i.week-a.week),r}buildSyllabusAnalysisPrompt(n,t){return`
You are an expert educational content analyzer. Analyze the following course syllabus and extract structured information in JSON format.

IMPORTANT INSTRUCTIONS:
1. Return ONLY valid JSON - no markdown, no explanations, no additional text
2. If information is not available, use null or empty arrays/objects
3. Be thorough but accurate - don't invent information
4. For percentages in grading, ensure they are numbers (not strings)
5. For week numbers, ensure they are integers
6. Extract all learning objectives, even if they're not numbered
7. Look for course schedules in various formats (weekly, by date, by topic, by session/unit)
8. IMPORTANT: Extract ALL schedule items, sessions, units, and topics - do not limit to just a few weeks
9. For session-based schedules, convert sessions to week numbers (e.g., Session 1 = Week 1)
10. LABORATORY COURSES: Pay special attention to safety requirements, lab equipment, dress codes, group work policies, and experiment-based schedules
11. Identify course type: determine if this is a lecture, lab, seminar, or hybrid course based on content

Required JSON structure:
{
  "courseInfo": {
    "title": "string",
    "number": "string (e.g., CS 350, BIOL 301, CHEM 315)",
    "description": "string",
    "instructor": "string or null",
    "department": "string or null",
    "institution": "string or null",
    "credits": "number or null",
    "meetingTimes": "string or null (include lab times if applicable)",
    "semester": "string or null",
    "year": "string or null",
    "courseType": "lecture|lab|seminar|hybrid",
    "location": "string or null (lab room, classroom, etc.)"
  },
  "learningObjectives": [
    "string (each objective as separate item)"
  ],
  "schedule": [
    {
      "week": "number",
      "topic": "string",
      "description": "string or null",
      "readings": ["string"] or null,
      "assignments": ["string"] or null,
      "dueDate": "string or null",
      "notes": "string or null",
      "experimentType": "string or null (for lab courses)",
      "equipmentNeeded": ["string"] or null
    }
  ],
  "prerequisites": [
    "string (each prerequisite course/requirement)"
  ],
  "textbooks": [
    {
      "title": "string",
      "author": "string or null",
      "edition": "string or null",
      "isbn": "string or null",
      "required": "boolean"
    }
  ],
  "gradingPolicy": [
    {
      "component": "string (e.g., Exams, Homework, Projects)",
      "percentage": "number (e.g., 40, not '40%')",
      "description": "string or null"
    }
  ],
  "assignments": [
    {
      "name": "string",
      "description": "string",
      "type": "string (exam|project|homework|quiz|presentation|lab_report|lab_practical)",
      "dueDate": "string or null",
      "points": "number or null",
      "weight": "number or null (for weighted assignments)"
    }
  ],
  "policies": {
    "attendance": "string or null",
    "lateWork": "string or null",
    "academicIntegrity": "string or null",
    "accommodations": "string or null",
    "communication": "string or null",
    "safety": "string or null (lab safety requirements)",
    "groupWork": "string or null (partner/group work policies)",
    "makeupPolicy": "string or null (make-up lab/exam policies)"
  },
  "contactInfo": {
    "email": "string or null",
    "phone": "string or null",
    "office": "string or null",
    "officeHours": "string or null",
    "website": "string or null"
  },
  "additionalResources": {
    "software": ["string"] or null,
    "equipment": ["string"] or null,
    "websites": ["string"] or null,
    "tutoring": "string or null",
    "learningPlatform": "string or null (Moodle, Blackboard, etc.)"
  },
  "labSpecific": {
    "safetyRequirements": ["string"] or null,
    "requiredEquipment": ["string"] or null,
    "dresscode": ["string"] or null,
    "notebookRequirements": "string or null",
    "groupWorkStructure": "string or null",
    "makeupPolicy": "string or null"
  }
}

${t?`File name: ${t}`:""}

Syllabus content to analyze:
${n}
`}validateAndSanitizeResponse(n){var r,i,a,s,l,u,d,f,m,b,g,x,y,A;const t={courseInfo:{title:"Course Title",number:"COURSE 101",description:"Course description not available"},learningObjectives:[],schedule:[],prerequisites:[],textbooks:[],gradingPolicy:[],assignments:[],policies:{},contactInfo:{},additionalResources:{}};try{return{courseInfo:{...t.courseInfo,...n.courseInfo},learningObjectives:Array.isArray(n.learningObjectives)?n.learningObjectives:[],schedule:Array.isArray(n.schedule)?n.schedule.map((C,j)=>({week:typeof C.week=="number"?C.week:j+1,topic:C.topic||`Week ${j+1} Topic`,description:C.description||null,readings:Array.isArray(C.readings)?C.readings:null,assignments:Array.isArray(C.assignments)?C.assignments:null,dueDate:C.dueDate||null,notes:C.notes||null})):[],prerequisites:Array.isArray(n.prerequisites)?n.prerequisites:[],textbooks:Array.isArray(n.textbooks)?n.textbooks.map(C=>({title:C.title||"Unknown Textbook",author:C.author||null,edition:C.edition||null,isbn:C.isbn||null,required:typeof C.required=="boolean"?C.required:!0})):[],gradingPolicy:Array.isArray(n.gradingPolicy)?n.gradingPolicy.map(C=>({component:C.component||"Unknown Component",percentage:typeof C.percentage=="number"?C.percentage:0,description:C.description||null})):[],assignments:Array.isArray(n.assignments)?n.assignments.map(C=>({name:C.name||"Assignment",description:C.description||"",type:C.type||"homework",dueDate:C.dueDate||null,points:typeof C.points=="number"?C.points:null})):[],policies:{attendance:((r=n.policies)==null?void 0:r.attendance)||null,lateWork:((i=n.policies)==null?void 0:i.lateWork)||null,academicIntegrity:((a=n.policies)==null?void 0:a.academicIntegrity)||null,accommodations:((s=n.policies)==null?void 0:s.accommodations)||null,communication:((l=n.policies)==null?void 0:l.communication)||null},contactInfo:{email:((u=n.contactInfo)==null?void 0:u.email)||null,phone:((d=n.contactInfo)==null?void 0:d.phone)||null,office:((f=n.contactInfo)==null?void 0:f.office)||null,officeHours:((m=n.contactInfo)==null?void 0:m.officeHours)||null,website:((b=n.contactInfo)==null?void 0:b.website)||null},additionalResources:{software:Array.isArray((g=n.additionalResources)==null?void 0:g.software)?n.additionalResources.software:null,equipment:Array.isArray((x=n.additionalResources)==null?void 0:x.equipment)?n.additionalResources.equipment:null,websites:Array.isArray((y=n.additionalResources)==null?void 0:y.websites)?n.additionalResources.websites:null,tutoring:((A=n.additionalResources)==null?void 0:A.tutoring)||null}}}catch(w){return console.error("Error validating AI response:",w),t}}async generateCourseMaterials(n,t){const r=`
Based on the following course information, generate detailed course materials in JSON format.

CRITICAL REQUIREMENTS:
1. Return ONLY valid JSON - absolutely NO explanatory text, comments, or additional content
2. Do not add any text before or after the JSON array
3. Do not include comments like "// ..." in the JSON
4. Generate materials for ALL available weeks/sessions from the course information

Create materials for:
1. Course Overview (with detailed description, objectives, and policies)  
2. Weekly/session materials for ALL weeks found in the schedule
3. Assignment descriptions where applicable

Course Information:
${JSON.stringify(n,null,2)}

Generate materials for ${(t==null?void 0:t.includeWeeks)||n.schedule.length} weeks/sessions.

Return ONLY a JSON array of materials with this structure:
[
  {
    "id": "unique-id",
    "title": "Material Title",
    "type": "overview|weekly|assignment|resource",
    "header": {"title": "string", "content": "string"},
    "sections": [
      {
        "id": "section-id",
        "title": "Section Title",
        "content": "HTML formatted content",
        "subsections": [
          {
            "id": "subsection-id",
            "title": "Subsection Title",
            "content": "HTML formatted content"
          }
        ]
      }
    ],
    "footer": {"title": "string", "content": "string"},
    "published": false,
    "scheduledTimestamp": "ISO date string or null"
  }
]
`;try{const i=await j5(r,{thinkingLevel:"high",maxTokens:16384});if(!i||i.trim().length===0)return console.warn("Empty response from AI service for material generation"),[];let a=i.replace(/```json\n?/g,"").replace(/```\n?/g,"").trim();const s=a.lastIndexOf("]");s!==-1&&(a=a.substring(0,s+1));let l;try{l=JSON.parse(a)}catch(u){return console.error("JSON parsing failed for material generation:",u),console.error("Raw response text:",i),console.error("Cleaned text:",a),console.warn("Falling back to empty materials array"),[]}return Array.isArray(l)?l:(console.warn("AI response is not an array, wrapping in array:",l),l?[l]:[])}catch(i){return console.error("Error generating materials:",i),[]}}}let bw=null;const s_=()=>(bw||(bw=new SX),bw),Mh=()=>Math.random().toString(36).substr(2,9),AX=e=>e.length?`<ul>${e.map(t=>`<li>${t}</li>`).join("")}</ul>`:"<p>No objectives specified</p>",CX=e=>e.length?`<ul>${e.map(t=>`<li>${t}</li>`).join("")}</ul>`:"<p>No readings assigned</p>",_p=gp()(qg(dv((e,n)=>({uploadedFile:null,uploadProgress:0,extractedText:"",extractionMetadata:null,storedSyllabusFile:null,aiExtractedInfo:null,useAIProcessing:!0,parsedCourseInfo:null,generatedMaterials:[],currentStep:"upload",isProcessing:!1,error:null,processingProgress:null,setUploadedFile:t=>e({uploadedFile:t}),setUploadProgress:t=>e({uploadProgress:t}),setExtractedText:t=>e({extractedText:t}),setStoredSyllabusFile:t=>e({storedSyllabusFile:t}),setAIExtractedInfo:t=>e({aiExtractedInfo:t}),setUseAIProcessing:t=>e({useAIProcessing:t}),setParsedCourseInfo:t=>e({parsedCourseInfo:t}),setGeneratedMaterials:t=>e({generatedMaterials:t}),setCurrentStep:t=>e({currentStep:t}),setIsProcessing:t=>e({isProcessing:t}),setError:t=>e({error:t}),setProcessingProgress:t=>e({processingProgress:t}),uploadSyllabus:async(t,r)=>{const i=qT(t);if(!i.isValid){e({error:i.error,currentStep:"upload"});return}const a=zF(t);e({uploadedFile:t,uploadProgress:0,error:null,extractionMetadata:{fileName:t.name,fileSize:t.size,fileType:BT(t),estimatedProcessingTime:a},processingProgress:{stage:"uploading",percentage:0,currentOperation:"Preparing file for processing..."}});try{for(let s=0;s<=100;s+=20)e({uploadProgress:s,processingProgress:{stage:"uploading",percentage:s,currentOperation:s===100?"Upload complete, starting text extraction...":`Uploading file... ${s}%`}}),await new Promise(l=>setTimeout(l,100));if(e({currentStep:"processing",isProcessing:!0,processingProgress:{stage:"extracting",percentage:0,currentOperation:"Extracting text from document..."}}),await n().extractTextFromFile(),r)try{e({processingProgress:{stage:"uploading",percentage:90,currentOperation:"Storing syllabus file..."}});const s=await mX(t,r);e({storedSyllabusFile:s}),console.log("Syllabus file stored successfully:",s.url)}catch(s){console.warn("Failed to store syllabus file, continuing with processing:",s)}e({processingProgress:{stage:"analyzing",percentage:0,currentOperation:n().useAIProcessing?"Analyzing syllabus with AI...":"Parsing syllabus content..."}}),await n().parseSyllabus()}catch(s){e({error:s instanceof Error?s.message:"Failed to upload file",currentStep:"upload"})}},extractTextFromFile:async()=>{const{uploadedFile:t}=n();if(!t){e({error:"No file uploaded"});return}e({isProcessing:!0,error:null});try{const r=await zT(t);e({extractedText:r.text,extractionMetadata:{...n().extractionMetadata,...r.metadata},isProcessing:!1})}catch(r){e({error:r.message||"Failed to extract text from file",isProcessing:!1})}},parseSyllabus:async()=>{const{extractedText:t,uploadedFile:r,useAIProcessing:i}=n();if(!t){e({error:"No text to parse"});return}e({isProcessing:!0,error:null});try{let a;if(i)try{e({processingProgress:{stage:"analyzing",percentage:25,currentOperation:"Sending syllabus to AI for analysis..."}});const l=await s_().processSyllabusText(t,r==null?void 0:r.name);e({processingProgress:{stage:"analyzing",percentage:75,currentOperation:"Processing AI analysis results..."}}),e({aiExtractedInfo:l}),a={suggestedTitle:l.courseInfo.title||"Course Title",suggestedNumber:l.courseInfo.number||"COURSE 101",suggestedDescription:l.courseInfo.description||"Course description not available",objectives:l.learningObjectives.length>0?l.learningObjectives:["Students will understand key concepts","Students will develop practical skills","Students will apply knowledge to real-world scenarios"],schedule:l.schedule.map(u=>({week:u.week,topic:u.topic,description:u.description,readings:u.readings||[],assignments:u.assignments||[],date:u.dueDate?new Date(u.dueDate):void 0})),prerequisites:l.prerequisites,textbook:l.textbooks.length>0?l.textbooks[0].title:"",grading:l.gradingPolicy.map(u=>`${u.component}: ${u.percentage}%`).join(", "),instructor:l.courseInfo.instructor,department:l.courseInfo.department,institution:l.courseInfo.institution,credits:l.courseInfo.credits,semester:l.courseInfo.semester,year:l.courseInfo.year,contactInfo:l.contactInfo,policies:l.policies,textbooks:l.textbooks,gradingComponents:l.gradingPolicy,assignments:l.assignments}}catch(s){console.warn("AI processing failed, falling back to pattern-based parsing:",s),e({error:`AI analysis failed: ${s instanceof Error?s.message:"Unknown error"}. Using pattern-based parsing instead.`,processingProgress:{stage:"analyzing",percentage:50,currentOperation:"AI failed, using pattern-based parsing..."}}),a=await n().fallbackParsing(t)}else a=await n().fallbackParsing(t);e({parsedCourseInfo:a}),e({processingProgress:{stage:"generating",percentage:0,currentOperation:"Generating course materials..."}}),await n().generateMaterials()}catch(a){e({error:a instanceof Error?a.message:"Failed to parse syllabus",isProcessing:!1})}},fallbackParsing:async t=>{var m,b;const r=t.split(`
`).filter(g=>g.trim()),i=r.find(g=>{const x=g.toLowerCase();return(x.includes("course")||x.includes("class"))&&(x.includes("title")||x.includes("name")||g.includes(":"))}),a=r.find(g=>{const x=g.toLowerCase();return x.includes("description")||x.includes("overview")||x.includes("about this course")}),s=r.find(g=>/[A-Z]{2,4}\s*\d{3,4}/.test(g)||g.toLowerCase().includes("course number")),l=r.findIndex(g=>{const x=g.toLowerCase();return x.includes("objective")||x.includes("learning outcome")||x.includes("goals")||x.includes("by the end of this course")}),u=[];if(l!==-1)for(let g=l+1;g<r.length&&g<l+15;g++){const x=r[g].trim();x&&(x.startsWith("-")||x.startsWith("")||x.match(/^\d+\./)||x.startsWith("*"))?u.push(x.replace(/^[-\d.*]\s*/,"")):x&&u.length===0&&u.push(x)}const d=[];for(let g=1;g<=16;g++){const x=new RegExp(`week\\s*${g}|${g}\\s*week`,"i"),y=r.find(A=>x.test(A));if(y){const A=y.replace(/week\s*\d+:?\s*/i,"").trim()||`Week ${g} Topic`;d.push({week:g,topic:A,description:`Content and activities for week ${g}`,readings:[],assignments:[]})}else d.push({week:g,topic:`Week ${g} Topic`,description:`Content for week ${g}`,readings:[],assignments:[]})}let f="COURSE 101";if(s){const g=s.match(/[A-Z]{2,4}\s*\d{3,4}/);g&&(f=g[0])}return{suggestedTitle:i&&((m=i.split(":").slice(-1)[0])==null?void 0:m.trim())||"Course Title",suggestedNumber:f,suggestedDescription:a&&((b=a.split(":").slice(-1)[0])==null?void 0:b.trim())||t.substring(0,300)+"...",objectives:u.length>0?u:["Students will understand key concepts","Students will develop practical skills","Students will apply knowledge to real-world scenarios"],schedule:d.slice(0,15),prerequisites:[],textbook:"",grading:""}},generateMaterials:async()=>{const{parsedCourseInfo:t,aiExtractedInfo:r,useAIProcessing:i}=n();if(!t){e({error:"No parsed course info available"});return}e({isProcessing:!0,error:null});try{let a=[];if(i&&r)try{e({processingProgress:{stage:"generating",percentage:10,currentOperation:"Preparing course materials structure..."}});const s=s_();e({processingProgress:{stage:"generating",percentage:30,currentOperation:`Generating materials for ${r.schedule.length} weeks with AI...`}});const l=setInterval(()=>{const u=n().processingProgress;u&&u.percentage<75&&e({processingProgress:{...u,percentage:Math.min(u.percentage+5,75)}})},2e3);try{const u=await s.generateCourseMaterials(r,{includeWeeks:r.schedule.length,materialTypes:["overview","weekly","assignment"]});clearInterval(l),e({processingProgress:{stage:"generating",percentage:80,currentOperation:"Processing AI-generated materials..."}}),u&&u.length>0?a=u.map(d=>({id:d.id||Mh(),title:d.title||"Generated Material",header:d.header||{title:"Header",content:`<p>${d.title||"Material"}</p>`},footer:d.footer||{title:"Footer",content:"<p>Contact instructor for questions</p>"},sections:d.sections||[],published:d.published||!1,scheduledTimestamp:d.scheduledTimestamp?new Date(d.scheduledTimestamp):void 0})):(console.warn("AI material generation returned empty results, using fallback"),e({processingProgress:{stage:"generating",percentage:60,currentOperation:"AI returned empty results, using pattern-based generation..."}}),a=n().generateFallbackMaterials(t))}catch(u){throw clearInterval(l),u}}catch(s){console.warn("AI material generation failed, using fallback:",s),e({error:`AI material generation failed: ${s instanceof Error?s.message:"Unknown error"}. Using fallback material generation instead.`,processingProgress:{stage:"generating",percentage:50,currentOperation:"AI failed, switching to pattern-based generation..."}}),a=n().generateFallbackMaterials(t)}else e({processingProgress:{stage:"generating",percentage:40,currentOperation:"Generating materials using pattern-based approach..."}}),a=n().generateFallbackMaterials(t);e({generatedMaterials:a,isProcessing:!1,currentStep:"review",processingProgress:{stage:"complete",percentage:100,currentOperation:"Processing complete! Review your course materials below."}})}catch(a){e({error:a instanceof Error?a.message:"Failed to generate materials",isProcessing:!1})}},generateFallbackMaterials:t=>{const r=[];return r.push({id:Mh(),title:`${t.suggestedNumber} - Course Overview`,header:{title:"Course Overview",content:`<p>${t.suggestedTitle}</p>`},footer:{title:"Footer",content:"<p>Contact instructor for questions</p>"},sections:[{id:Mh(),title:"Course Description",content:`<p>${t.suggestedDescription}</p>`,subsections:[],images:[],links:[]},{id:Mh(),title:"Learning Objectives",content:AX(t.objectives),subsections:[],images:[],links:[]}],published:!1}),t.schedule.slice(0,6).forEach(i=>{r.push({id:Mh(),title:`Week ${i.week}: ${i.topic}`,header:{title:`Week ${i.week}`,content:`<p>${i.topic}</p>`},footer:{title:"Footer",content:"<p>Review materials before next class</p>"},sections:[{id:Mh(),title:"Overview",content:`<p>${i.description||`Topics and activities for week ${i.week}`}</p>`,subsections:i.readings&&i.readings.length>0?[{id:Mh(),title:"Required Readings",content:CX(i.readings),subSubsections:[],images:[],links:[]}]:[],images:[],links:[]}],published:!1,scheduledTimestamp:i.date})}),r},editMaterial:(t,r)=>{const{generatedMaterials:i}=n(),a=[...i];a[t]={...a[t],...r},e({generatedMaterials:a})},editCourseInfo:t=>{const{parsedCourseInfo:r}=n();r&&e({parsedCourseInfo:{...r,...t}})},reset:()=>e({uploadedFile:null,uploadProgress:0,extractedText:"",extractionMetadata:null,storedSyllabusFile:null,aiExtractedInfo:null,useAIProcessing:!0,parsedCourseInfo:null,generatedMaterials:[],currentStep:"upload",isProcessing:!1,error:null,processingProgress:null})}),{name:"syllabus-store",version:1,partialize:e=>({storedSyllabusFile:e.storedSyllabusFile,aiExtractedInfo:e.aiExtractedInfo,parsedCourseInfo:e.parsedCourseInfo,generatedMaterials:e.generatedMaterials}),migrate:(e,n)=>n===0?{storedSyllabusFile:(e==null?void 0:e.storedSyllabusFile)||null,aiExtractedInfo:(e==null?void 0:e.aiExtractedInfo)||null,parsedCourseInfo:(e==null?void 0:e.parsedCourseInfo)||null,generatedMaterials:(e==null?void 0:e.generatedMaterials)||[]}:e}))),Iy={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_KEY:"AIzaSyD3b8ezNVNI376HM1OsVumOLuyMJP2AG7w",VITE_APP_ID:"1:922352392986:web:6c4d6e16b5e615bd4daaa3",VITE_AUTH_DOMAIN:"nexlab-prod.firebaseapp.com",VITE_CHATBOT_DEFAULT_ID:"ce5f7921-a3a0-4ea7-b95f-10fe41becda5",VITE_DEPLOY_ENV:"github",VITE_GOOGLE_ANALYTICS_ID:"G-X2SBY2YQ4V",VITE_MESSAGING_SENDER_ID:"922352392986",VITE_PROJECT_ID:"nexlab-prod",VITE_PUBLIC_COURSE_ID:"rqoyheM9Lf8jGftIoZyT",VITE_STORAGE_BUCKET:"nexlab-prod.firebasestorage.app"},Ly={ENABLE_AI_PROCESSING:"VITE_ENABLE_AI_PROCESSING",MAX_RETRIES:"VITE_AI_MAX_RETRIES",TIMEOUT:"VITE_AI_TIMEOUT",FALLBACK_TO_PATTERN:"VITE_AI_FALLBACK_TO_PATTERN"},kX=()=>({enableAIProcessing:Iy[Ly.ENABLE_AI_PROCESSING]!=="false",maxRetries:parseInt(Iy[Ly.MAX_RETRIES]||"3",10),timeout:parseInt(Iy[Ly.TIMEOUT]||"30000",10),fallbackToPatternParsing:Iy[Ly.FALLBACK_TO_PATTERN]!=="false"}),hD=e=>{const n=[];return(e.maxRetries<0||e.maxRetries>10)&&n.push("Max retries must be between 0 and 10"),(e.timeout<1e3||e.timeout>12e4)&&n.push("Timeout must be between 1 second and 2 minutes"),{isValid:n.length===0,errors:n}},pD=()=>{const e=kX(),n=hD(e);return{config:e,...n}},o_=({onUploadComplete:e,apiKey:n,educatorUid:t})=>{const{uploadedFile:r,uploadProgress:i,error:a,isProcessing:s,useAIProcessing:l,processingProgress:u,uploadSyllabus:d,setUploadedFile:f,setError:m}=_p(),[b,g]=X.useState(!1),x=X.useMemo(()=>["text/plain","application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],[]),y=X.useMemo(()=>[".txt",".pdf",".docx"],[]),A=X.useCallback(async L=>{const Z=(O=>{if(!x.includes(O.type))return`Unsupported file type. Please upload ${y.join(", ")} files.`;const T=10*1024*1024;return O.size>T?"File size too large. Please upload files smaller than 10MB.":null})(L);if(Z){m(Z);return}try{await d(L,t),e==null||e(L)}catch(O){console.error("Upload error:",O)}},[d,e,m,x,y,n,t]),w=X.useCallback(L=>{L.preventDefault(),g(!1);const $=Array.from(L.dataTransfer.files);$.length>0&&A($[0])},[A]),C=X.useCallback(L=>{L.preventDefault(),g(!0)},[]),j=X.useCallback(L=>{L.preventDefault(),g(!1)},[]),F=X.useCallback(L=>{const $=L.target.files;$&&$.length>0&&A($[0]),L.target.value=""},[A]),M=X.useCallback(()=>{f(null),m(null)},[f,m]),z=L=>{if(L===0)return"0 Bytes";const $=1024,Z=["Bytes","KB","MB","GB"],O=Math.floor(Math.log(L)/Math.log($));return parseFloat((L/Math.pow($,O)).toFixed(2))+" "+Z[O]},_=()=>h.jsx(b3,{color:"primary"});return h.jsxs(de,{sx:{width:"100%",maxWidth:600,mx:"auto"},children:[!r&&h.jsxs(gn,{sx:{p:4,border:"2px dashed",borderColor:b?"primary.main":"grey.300",backgroundColor:b?"primary.50":"background.paper",cursor:"pointer",transition:"all 0.3s ease",textAlign:"center","&:hover":{borderColor:"primary.main",backgroundColor:"primary.50"}},onDragOver:C,onDragLeave:j,onDrop:w,onClick:()=>{var L;return(L=document.getElementById("syllabus-file-input"))==null?void 0:L.click()},children:[h.jsx(g3,{sx:{fontSize:48,color:b?"primary.main":"grey.400",mb:2}}),h.jsx(he,{variant:"h6",gutterBottom:!0,children:"Upload Your Syllabus"}),h.jsx(he,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Drag and drop your syllabus file here, or click to browse"}),h.jsx(de,{sx:{display:"flex",flexWrap:"wrap",gap:1,justifyContent:"center"},children:y.map(L=>h.jsx(cr,{label:L.toUpperCase(),size:"small",variant:"outlined",color:"primary"},L))}),h.jsx(he,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:"Maximum file size: 10MB"}),h.jsx("input",{id:"syllabus-file-input",type:"file",accept:x.join(","),onChange:F,style:{display:"none"}})]}),r&&h.jsxs(gn,{sx:{p:3,mb:2},children:[h.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:2},children:[_(),h.jsxs(de,{sx:{flexGrow:1},children:[h.jsx(he,{variant:"subtitle1",sx:{fontWeight:500},children:r.name}),h.jsx(he,{variant:"body2",color:"text.secondary",children:z(r.size)})]}),!s&&h.jsx(_n,{onClick:M,color:"error",size:"small",children:h.jsx(mu,{})})]}),i>0&&i<100&&h.jsxs(de,{sx:{mt:2},children:[h.jsx(Qo,{variant:"determinate",value:i,sx:{height:6,borderRadius:3}}),h.jsxs(he,{variant:"caption",sx:{mt:1,display:"block"},children:["Uploading... ",i,"%"]})]}),s&&h.jsx(de,{sx:{mt:2},children:u?h.jsxs(h.Fragment,{children:[h.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[h.jsx(cr,{label:u.stage.charAt(0).toUpperCase()+u.stage.slice(1),size:"small",color:"primary",variant:"outlined"}),h.jsxs(he,{variant:"caption",color:"text.secondary",children:[u.percentage,"%"]})]}),h.jsx(Qo,{variant:"determinate",value:u.percentage,sx:{height:6,borderRadius:3,mb:1}}),h.jsx(he,{variant:"caption",sx:{display:"block",color:"text.secondary"},children:u.currentOperation})]}):h.jsxs(h.Fragment,{children:[h.jsx(Qo,{sx:{height:6,borderRadius:3}}),h.jsx(he,{variant:"caption",sx:{mt:1,display:"block"},children:l?"AI is analyzing your syllabus...":"Processing syllabus..."})]})})]}),a&&h.jsx(rr,{severity:"error",sx:{mt:2},onClose:()=>m(null),children:a}),h.jsxs(gn,{sx:{p:2,mt:2,backgroundColor:"info.50"},children:[h.jsx(he,{variant:"body2",color:"info.main",sx:{fontWeight:500,mb:1},children:" Tips for best results:"}),h.jsxs(he,{variant:"body2",color:"text.secondary",component:"ul",sx:{m:0,pl:2},children:[h.jsx("li",{children:"Include course objectives and weekly schedule"}),h.jsx("li",{children:"List reading assignments and materials"}),h.jsx("li",{children:"Ensure text is well-structured with clear headings"})]})]})]})},EX=({onContinue:e})=>{var C;const{parsedCourseInfo:n,editCourseInfo:t,error:r,isProcessing:i,currentStep:a}=_p(),[s,l]=X.useState(!1),[u,d]=X.useState(null);if(!n)return h.jsx(rr,{severity:"warning",children:"No course information available. Please upload and process a syllabus first."});if(i||a==="processing")return h.jsx(rr,{severity:"info",children:h.jsx(he,{variant:"body2",children:" Processing complete! Preparing course information for review..."})});const f=()=>{d({...n}),l(!0)},m=()=>{u&&(t(u),l(!1),d(null))},b=()=>{l(!1),d(null)},g=()=>{u&&d({...u,objectives:[...u.objectives,"New objective"]})},x=j=>{if(u){const F=u.objectives.filter((M,z)=>z!==j);d({...u,objectives:F})}},y=(j,F)=>{if(u){const M=[...u.objectives];M[j]=F,d({...u,objectives:M})}},A=(j,F,M)=>{if(u){const z=[...u.schedule];z[j]={...z[j],[F]:M},d({...u,schedule:z})}},w=s?u:n;return w?h.jsx(de,{sx:{maxWidth:800,mx:"auto"},children:h.jsxs(gn,{sx:{p:3},children:[h.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[h.jsx(he,{variant:"h5",component:"h2",children:"Course Information Preview"}),s?h.jsxs(de,{sx:{display:"flex",gap:1},children:[h.jsx(Ct,{startIcon:h.jsx(O0,{}),onClick:m,variant:"contained",color:"primary",children:"Save"}),h.jsx(Ct,{startIcon:h.jsx(T6,{}),onClick:b,variant:"outlined",children:"Cancel"})]}):h.jsx(Ct,{startIcon:h.jsx(bu,{}),onClick:f,variant:"outlined",children:"Edit Details"})]}),r&&h.jsx(rr,{severity:"error",sx:{mb:3},children:r}),h.jsxs(wt,{container:!0,spacing:3,children:[h.jsx(wt,{item:!0,xs:12,md:6,children:h.jsx(Jt,{fullWidth:!0,label:"Course Number",value:w.suggestedNumber,onChange:j=>s&&u&&d({...u,suggestedNumber:j.target.value}),disabled:!s,variant:s?"outlined":"filled"})}),h.jsx(wt,{item:!0,xs:12,md:6,children:h.jsx(Jt,{fullWidth:!0,label:"Course Title",value:w.suggestedTitle,onChange:j=>s&&u&&d({...u,suggestedTitle:j.target.value}),disabled:!s,variant:s?"outlined":"filled"})}),h.jsx(wt,{item:!0,xs:12,children:h.jsx(Jt,{fullWidth:!0,multiline:!0,rows:4,label:"Course Description",value:w.suggestedDescription,onChange:j=>s&&u&&d({...u,suggestedDescription:j.target.value}),disabled:!s,variant:s?"outlined":"filled"})})]}),h.jsx(qs,{sx:{my:3}}),h.jsxs(de,{sx:{mb:3},children:[h.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[h.jsxs(he,{variant:"h6",children:["Learning Objectives (",w.objectives.length,")"]}),s&&h.jsx(_n,{onClick:g,color:"primary",children:h.jsx(pu,{})})]}),h.jsx(de,{sx:{display:"flex",flexDirection:"column",gap:2},children:w.objectives.map((j,F)=>h.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:1},children:[h.jsxs(he,{variant:"body2",sx:{minWidth:24,color:"text.secondary"},children:[F+1,"."]}),s?h.jsxs(h.Fragment,{children:[h.jsx(Jt,{fullWidth:!0,multiline:!0,value:j,onChange:M=>y(F,M.target.value),size:"small"}),h.jsx(_n,{onClick:()=>x(F),color:"error",size:"small",children:h.jsx(mu,{})})]}):h.jsx(he,{variant:"body2",children:j})]},F))})]}),h.jsx(qs,{sx:{my:3}}),h.jsxs(xd,{children:[h.jsx(vd,{expandIcon:h.jsx(Nl,{}),children:h.jsxs(he,{variant:"h6",children:["Course Schedule (",w.schedule.length," weeks)"]})}),h.jsx(wd,{children:h.jsx(de,{sx:{display:"flex",flexDirection:"column",gap:2},children:w.schedule.map((j,F)=>h.jsx(gn,{sx:{p:2,backgroundColor:"grey.50"},children:h.jsxs(wt,{container:!0,spacing:2,alignItems:"center",children:[h.jsx(wt,{item:!0,xs:12,sm:1,children:h.jsx(cr,{label:`W${j.week}`,size:"small",color:"primary"})}),h.jsx(wt,{item:!0,xs:12,sm:5,children:s?h.jsx(Jt,{fullWidth:!0,size:"small",label:"Topic",value:j.topic,onChange:M=>A(F,"topic",M.target.value)}):h.jsx(he,{variant:"body2",sx:{fontWeight:500},children:j.topic})}),h.jsx(wt,{item:!0,xs:12,sm:6,children:s?h.jsx(Jt,{fullWidth:!0,size:"small",label:"Description",value:j.description||"",onChange:M=>A(F,"description",M.target.value)}):h.jsx(he,{variant:"body2",color:"text.secondary",children:j.description||"No description"})})]})},F))})})]}),(((C=w.prerequisites)==null?void 0:C.length)||w.textbook||w.grading)&&h.jsxs(h.Fragment,{children:[h.jsx(qs,{sx:{my:3}}),h.jsx(he,{variant:"h6",sx:{mb:2},children:"Additional Information"}),h.jsxs(wt,{container:!0,spacing:2,children:[w.prerequisites&&w.prerequisites.length>0&&h.jsxs(wt,{item:!0,xs:12,md:4,children:[h.jsx(he,{variant:"subtitle2",sx:{mb:1},children:"Prerequisites:"}),h.jsx(he,{variant:"body2",color:"text.secondary",children:w.prerequisites.join(", ")})]}),w.textbook&&h.jsxs(wt,{item:!0,xs:12,md:4,children:[h.jsx(he,{variant:"subtitle2",sx:{mb:1},children:"Textbook:"}),h.jsx(he,{variant:"body2",color:"text.secondary",children:w.textbook})]}),w.grading&&h.jsxs(wt,{item:!0,xs:12,md:4,children:[h.jsx(he,{variant:"subtitle2",sx:{mb:1},children:"Grading:"}),h.jsx(he,{variant:"body2",color:"text.secondary",children:w.grading})]})]})]}),e&&h.jsx(de,{sx:{mt:4,textAlign:"right"},children:h.jsx(Ct,{variant:"contained",color:"primary",size:"large",onClick:e,disabled:s,children:"Continue to Materials Preview"})})]})}):null},_X=({onContinue:e,onBack:n})=>{const{generatedMaterials:t,editMaterial:r,error:i}=_p(),[a,s]=X.useState(null),[l,u]=X.useState(null);if(!t.length)return h.jsx(rr,{severity:"warning",children:"No materials generated. Please go back and process a syllabus first."});const d=w=>{s({index:w,material:{...t[w]}})},f=()=>{a&&(r(a.index,a.material),s(null))},m=()=>{s(null)},b=w=>{u(w)},g=w=>{const C=t[w];r(w,{published:!C.published})},x=(w,C=150)=>{const j=w.replace(/<[^>]*>/g,"");return j.length>C?j.substring(0,C)+"...":j},y=w=>w.toLowerCase().includes("overview")?h.jsx(Od,{color:"primary"}):w.toLowerCase().includes("week")?h.jsx(G0,{color:"secondary"}):h.jsx(Od,{color:"action"}),A=t.filter(w=>w.published).length;return h.jsxs(de,{sx:{maxWidth:1e3,mx:"auto"},children:[h.jsxs(gn,{sx:{p:3,mb:3},children:[h.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[h.jsx(he,{variant:"h5",component:"h2",children:"Generated Course Materials"}),h.jsx(cr,{label:`${A}/${t.length} will be published`,color:"primary",variant:"outlined"})]}),h.jsx(he,{variant:"body2",color:"text.secondary",children:"Review and customize the course materials generated from your syllabus. You can edit content, toggle publication status, and organize materials before creating your course."}),i&&h.jsx(rr,{severity:"error",sx:{mt:2},children:i})]}),h.jsx(wt,{container:!0,spacing:3,children:t.map((w,C)=>h.jsx(wt,{item:!0,xs:12,md:6,lg:4,children:h.jsxs(Ja,{sx:{height:"100%",display:"flex",flexDirection:"column",border:w.published?"2px solid":"1px solid",borderColor:w.published?"success.main":"divider"},children:[h.jsxs(es,{sx:{flexGrow:1},children:[h.jsxs(de,{sx:{display:"flex",alignItems:"flex-start",gap:1,mb:2},children:[y(w.title),h.jsxs(de,{sx:{flexGrow:1},children:[h.jsx(he,{variant:"h6",component:"h3",sx:{fontSize:"1rem",lineHeight:1.3,mb:1},children:w.title}),h.jsxs(de,{sx:{display:"flex",gap:1,alignItems:"center"},children:[h.jsx(Sd,{control:h.jsx(Ad,{checked:w.published,onChange:()=>g(C),size:"small"}),label:h.jsx(he,{variant:"caption",children:w.published?"Publish":"Draft"}),sx:{mr:0}}),w.scheduledTimestamp&&h.jsx(cr,{label:"Scheduled",size:"small",variant:"outlined",color:"info"})]})]})]}),h.jsxs(he,{variant:"body2",color:"text.secondary",sx:{mb:2},children:[h.jsx("strong",{children:"Sections:"})," ",w.sections.length]}),w.sections[0]&&h.jsxs(de,{sx:{mb:2},children:[h.jsx(he,{variant:"subtitle2",sx:{mb:1},children:w.sections[0].title}),h.jsx(he,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.85rem",fontStyle:"italic"},children:x(w.sections[0].content)})]})]}),h.jsxs(Yj,{children:[h.jsx(Ct,{size:"small",startIcon:h.jsx(I6,{}),onClick:()=>b(w),children:"Preview"}),h.jsx(Ct,{size:"small",startIcon:h.jsx(bu,{}),onClick:()=>d(C),children:"Edit"})]})]})},w.id))}),h.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[n&&h.jsx(Ct,{variant:"outlined",onClick:n,size:"large",children:"Back to Course Info"}),e&&h.jsxs(Ct,{variant:"contained",color:"primary",onClick:e,size:"large",disabled:A===0,children:["Create Course with ",A," Materials"]})]}),h.jsxs(Zi,{open:a!==null,onClose:m,maxWidth:"md",fullWidth:!0,children:[h.jsxs(pa,{children:["Edit Material: ",a==null?void 0:a.material.title]}),h.jsx(Ji,{children:a&&h.jsxs(de,{sx:{pt:1},children:[h.jsx(Jt,{fullWidth:!0,label:"Material Title",value:a.material.title,onChange:w=>s({...a,material:{...a.material,title:w.target.value}}),sx:{mb:3}}),h.jsx(he,{variant:"h6",sx:{mb:2},children:"Header"}),h.jsx(Jt,{fullWidth:!0,label:"Header Title",value:a.material.header.title,onChange:w=>s({...a,material:{...a.material,header:{...a.material.header,title:w.target.value}}}),sx:{mb:2}}),h.jsx(Jt,{fullWidth:!0,multiline:!0,rows:2,label:"Header Content",value:a.material.header.content,onChange:w=>s({...a,material:{...a.material,header:{...a.material.header,content:w.target.value}}}),sx:{mb:3}}),h.jsx(he,{variant:"h6",sx:{mb:2},children:"Sections"}),a.material.sections.map((w,C)=>h.jsxs(xd,{sx:{mb:2},children:[h.jsx(vd,{expandIcon:h.jsx(Nl,{}),children:h.jsx(he,{children:w.title})}),h.jsxs(wd,{children:[h.jsx(Jt,{fullWidth:!0,label:"Section Title",value:w.title,onChange:j=>{const F=[...a.material.sections];F[C]={...F[C],title:j.target.value},s({...a,material:{...a.material,sections:F}})},sx:{mb:2}}),h.jsx(Jt,{fullWidth:!0,multiline:!0,rows:4,label:"Section Content",value:w.content,onChange:j=>{const F=[...a.material.sections];F[C]={...F[C],content:j.target.value},s({...a,material:{...a.material,sections:F}})}})]})]},w.id))]})}),h.jsxs(ma,{children:[h.jsx(Ct,{onClick:m,children:"Cancel"}),h.jsx(Ct,{onClick:f,variant:"contained",children:"Save Changes"})]})]}),h.jsxs(Zi,{open:l!==null,onClose:()=>u(null),maxWidth:"md",fullWidth:!0,children:[h.jsx(pa,{children:l==null?void 0:l.title}),h.jsx(Ji,{children:l&&h.jsxs(de,{sx:{pt:1},children:[h.jsxs(gn,{sx:{p:2,mb:3,backgroundColor:"primary.50"},children:[h.jsx(he,{variant:"h6",color:"primary",children:l.header.title}),h.jsx(he,{variant:"body2",sx:{mt:1},children:l.header.content.replace(/<[^>]*>/g,"")})]}),l.sections.map(w=>h.jsxs(de,{sx:{mb:3},children:[h.jsx(he,{variant:"h6",sx:{mb:2},children:w.title}),h.jsx(he,{variant:"body1",sx:{mb:2},children:w.content.replace(/<[^>]*>/g,"")}),w.subsections.map(C=>h.jsxs(de,{sx:{ml:2,mb:2},children:[h.jsx(he,{variant:"subtitle1",sx:{mb:1},children:C.title}),h.jsx(he,{variant:"body2",color:"text.secondary",children:C.content.replace(/<[^>]*>/g,"")})]},C.id))]},w.id)),h.jsx(gn,{sx:{p:2,backgroundColor:"grey.50"},children:h.jsx(he,{variant:"body2",color:"text.secondary",children:l.footer.content.replace(/<[^>]*>/g,"")})})]})}),h.jsx(ma,{children:h.jsx(Ct,{onClick:()=>u(null),children:"Close"})})]})]})},NX=({onConfigChange:e,compact:n=!1})=>{const{useAIProcessing:t,setUseAIProcessing:r}=_p(),[i,a]=X.useState(null);X.useEffect(()=>{const{config:f,isValid:m,errors:b}=pD();a({config:f,isValid:m,errors:b})},[]);const s=f=>{if(r(f),i){const m={...i.config,enableAIProcessing:f},b=hD(m);a({config:m,...b}),e==null||e(m)}},l=()=>i?i.isValid&&t?h.jsx(Dg,{color:"success"}):!i.isValid&&t?h.jsx(x3,{color:"error"}):h.jsx(xx,{color:"action"}):h.jsx(xx,{color:"action"}),u=()=>t?i?i.isValid?"AI processing ready - enhanced syllabus analysis enabled":`Configuration issues: ${i.errors.join(", ")}`:"Loading configuration...":"AI processing disabled - using pattern-based parsing",d=()=>t?i?i.isValid?"success":"error":"info":"warning";return n?h.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:2},children:[l(),h.jsx(Sd,{control:h.jsx(Ad,{checked:t,onChange:f=>s(f.target.checked),size:"small"}),label:"AI Processing"}),h.jsx(fi,{title:u(),children:h.jsx(y3,{fontSize:"small",color:"action"})})]}):h.jsx(gn,{sx:{p:2,mb:2},children:h.jsxs(xd,{children:[h.jsx(vd,{expandIcon:h.jsx(Nl,{}),children:h.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:2,width:"100%"},children:[l(),h.jsxs(de,{sx:{flexGrow:1},children:[h.jsx(he,{variant:"subtitle1",sx:{fontWeight:500},children:"AI-Powered Processing Settings"}),h.jsx(he,{variant:"caption",color:"text.secondary",children:u()})]}),h.jsx(cr,{label:t?"Enabled":"Disabled",color:t?"success":"default",size:"small"})]})}),h.jsx(wd,{children:h.jsxs(wt,{container:!0,spacing:3,children:[h.jsx(wt,{item:!0,xs:12,children:h.jsx(Sd,{control:h.jsx(Ad,{checked:t,onChange:f=>s(f.target.checked)}),label:h.jsxs(de,{children:[h.jsx(he,{variant:"body2",sx:{fontWeight:500},children:"Enable AI-Powered Analysis"}),h.jsx(he,{variant:"caption",color:"text.secondary",children:"Use Google Gemini to extract structured information from syllabi"})]})})}),t&&h.jsx(wt,{item:!0,xs:12,children:h.jsxs(gn,{sx:{p:2,backgroundColor:i!=null&&i.isValid?"success.50":"error.50",border:"1px solid",borderColor:i!=null&&i.isValid?"success.200":"error.200"},children:[h.jsx(he,{variant:"subtitle2",sx:{mb:1,color:i!=null&&i.isValid?"success.main":"error.main"},children:i!=null&&i.isValid?" API Configuration":" API Configuration"}),h.jsx(he,{variant:"body2",color:"text.secondary",children:i!=null&&i.isValid?"AI processing is ready. API keys are securely managed by Firebase Functions.":"Configuration check in progress..."})]})}),h.jsx(wt,{item:!0,xs:12,children:h.jsxs(rr,{severity:d(),sx:{mb:2},children:[h.jsx(he,{variant:"body2",children:u()}),(i==null?void 0:i.errors)&&i.errors.length>0&&h.jsx(de,{sx:{mt:1},children:i.errors.map((f,m)=>h.jsxs(he,{variant:"caption",display:"block",children:[" ",f]},m))})]})}),t&&(i==null?void 0:i.isValid)&&h.jsx(wt,{item:!0,xs:12,children:h.jsxs(gn,{sx:{p:2,backgroundColor:"primary.50",border:"1px solid",borderColor:"primary.200"},children:[h.jsx(he,{variant:"subtitle2",sx:{mb:1,color:"primary.main"},children:" Enhanced Features with AI:"}),h.jsxs(wt,{container:!0,spacing:1,children:[h.jsxs(wt,{item:!0,xs:12,sm:6,children:[h.jsx(he,{variant:"caption",display:"block",children:" Intelligent course information extraction"}),h.jsx(he,{variant:"caption",display:"block",children:" Automatic learning objectives identification"}),h.jsx(he,{variant:"caption",display:"block",children:" Smart schedule parsing and organization"})]}),h.jsxs(wt,{item:!0,xs:12,sm:6,children:[h.jsx(he,{variant:"caption",display:"block",children:" Grading policy analysis"}),h.jsx(he,{variant:"caption",display:"block",children:" Assignment and due date extraction"}),h.jsx(he,{variant:"caption",display:"block",children:" Enhanced material generation"})]})]})]})}),!t&&h.jsx(wt,{item:!0,xs:12,children:h.jsxs(gn,{sx:{p:2,backgroundColor:"warning.50",border:"1px solid",borderColor:"warning.200"},children:[h.jsx(he,{variant:"subtitle2",sx:{mb:1,color:"warning.main"},children:" Pattern-Based Processing:"}),h.jsx(he,{variant:"caption",color:"text.secondary",children:"Using traditional text parsing methods. Results may be less accurate than AI processing. Enable AI processing for better extraction accuracy."})]})})]})})]})})},mD=({onComplete:e,onCancel:n,educatorUid:t})=>{const{currentStep:r,setCurrentStep:i,parsedCourseInfo:a,generatedMaterials:s,isProcessing:l,error:u,useAIProcessing:d,processingProgress:f,reset:m}=_p(),[b,g]=X.useState(null);st.useEffect(()=>{const{config:z}=pD();g(z)},[]);const x=[{label:"Upload Syllabus",description:"Upload your syllabus document"},{label:"Review Course Info",description:"Verify and edit course information"},{label:"Review Materials",description:"Customize generated course materials"}],y=()=>{switch(r){case"upload":case"processing":return 0;case"review":return 1;case"editing":return 2;case"complete":return 2;default:return 0}},A=()=>{i("editing")},w=()=>{i("review")},C=()=>{if(a&&s.length>0){const z=s.filter(_=>_.published);e==null||e({courseInfo:a,materials:z})}},j=()=>{m(),n==null||n()},F=z=>{g(z)},M=()=>{switch(r){case"upload":case"processing":return h.jsx(o_,{onUploadComplete:()=>{},educatorUid:t});case"review":return h.jsx(EX,{onContinue:A});case"editing":case"complete":return h.jsx(_X,{onContinue:C,onBack:w});default:return h.jsx(o_,{onUploadComplete:()=>{},educatorUid:t})}};return h.jsxs(de,{sx:{width:"100%",maxWidth:1200,mx:"auto",p:3},children:[h.jsxs(gn,{sx:{p:3,mb:4},children:[h.jsx(he,{variant:"h4",component:"h1",gutterBottom:!0,children:"Import Course from Syllabus"}),h.jsx(he,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Upload your syllabus document and we'll automatically create a course structure with organized materials based on your content."}),h.jsx(v3,{activeStep:y(),alternativeLabel:!0,children:x.map(z=>h.jsx(w3,{children:h.jsxs(S3,{children:[h.jsx(he,{variant:"body2",sx:{fontWeight:500},children:z.label}),h.jsx(he,{variant:"caption",color:"text.secondary",children:z.description})]})},z.label))})]}),r==="upload"&&h.jsx(NX,{onConfigChange:F,compact:!1}),u&&h.jsx(rr,{severity:"error",sx:{mb:3},onClose:()=>{},children:u}),l&&h.jsx(rr,{severity:"info",sx:{mb:3},children:h.jsx(he,{variant:"body2",children:d?" AI is analyzing your syllabus for enhanced data extraction... This usually takes 10-30 seconds.":" Processing your syllabus with pattern-based analysis... This usually takes a moment."})}),h.jsx(de,{sx:{minHeight:400},children:M()}),r!=="upload"&&n&&h.jsx(de,{sx:{display:"flex",justifyContent:"center",mt:3},children:h.jsx(Ct,{variant:"outlined",color:"secondary",onClick:j,size:"small",children:"Cancel & Return to Manual Entry"})})]})},gD=(e,n,t,r,i,a)=>{const s=n.filter(u=>u.published).length,l=n.filter(u=>!u.published).length;return{parsedCourseInfo:e,generatedMaterials:n,aiExtractedInfo:t,storedSyllabusFile:r,metadata:{importedAt:new Date,processingMethod:a&&t?"ai":"fallback",fileType:(i==null?void 0:i.type)||"unknown",fileName:(i==null?void 0:i.name)||"unknown",totalMaterialCount:n.length,publishedMaterialCount:s,draftMaterialCount:l}}},Ux=e=>{if(e==null)return null;if(e instanceof Date)return e;if(Array.isArray(e))return e.map(Ux).filter(n=>n!=null);if(typeof e=="object"){const n={};return Object.keys(e).forEach(t=>{const r=e[t];if(r!==void 0){const i=Ux(r);i!=null&&(n[t]=i)}}),n}return e},jX=()=>{const{userDetails:e}=zi(),n=ya(),t=Xn(),[r,i]=X.useState(""),[a,s]=X.useState(""),[l,u]=X.useState(""),[d,f]=X.useState(""),[m,b]=X.useState(""),[g,x]=X.useState(""),[y,A]=X.useState(""),[w,C]=X.useState("primary"),[j,F]=X.useState("manual"),{parsedCourseInfo:M,generatedMaterials:z,aiExtractedInfo:_,storedSyllabusFile:L,uploadedFile:$,useAIProcessing:Z,reset:O,currentStep:T}=_p(),[R,N]=X.useState(!1),[G,W]=X.useState(!1),[Q,J]=X.useState("");X.useEffect(()=>{(j==="manual"||w==="co-instructor")&&O()},[j,w,O]),X.useEffect(()=>{w==="primary"&&j==="syllabus"&&M&&(b(M.suggestedNumber||""),x(M.suggestedTitle||""),A(M.suggestedDescription||""))},[w,j,M]);const se=ye=>Se=>{ye(Se.target.value)},U=ye=>{const Se=ye.target.value;C(Se),Se==="co-instructor"&&(F("manual"),b(""),x(""),A(""))},le=(ye,Se)=>{Se!==null&&(F(Se),Se==="syllabus"&&(b(""),x(""),A("")))},q=()=>{if(!r||!a||!l||!d||!m||!g)return"Please fill in all required fields.";if(w==="primary"){if(j==="manual"&&!y)return"Please provide a course description.";if(j==="syllabus"){if(!M)return"Please complete the syllabus import process first.";if(!y)return"Please ensure course description is properly filled from your syllabus."}}return null},B=ye=>{console.log("Syllabus import completed for educator request:",ye)},ee=async()=>{const ye=q();if(ye){J(ye),W(!0);return}N(!0);try{const Se={uid:(e==null?void 0:e.uid)||"",firstName:r||"",lastName:a||"",institution:l||"",email:d||"",courseNumber:m||"",courseTitle:g||"",courseDescription:w==="primary"?y||"":"CO-INSTRUCTOR REQUEST",requestType:w||"primary",status:"pending",timestamp:new Date,syllabusImported:!1};if(w==="primary"&&j==="syllabus"&&M&&z.length>0){const ne=gD(M,z,_,L,$,Z),be=Ux(ne);Se.syllabusImported=!0,Se.syllabusData=be}const Te=Ux(Se);console.log("Submitting clean educator request document:",Te);const Le=await Ai(ln(t,"educatorRequests"),Te),He={to:["andriy@intofuture.org","dylan@intofuture.org"],message:{subject:`New Educator Request Submitted${w==="primary"&&j==="syllabus"?" (With Syllabus Import)":""}`,html:`
            <p>A new educator request has been submitted:</p>
            <p><strong>Name:</strong> ${r} ${a}</p>
            <p><strong>Email:</strong> ${d}</p>
            <p><strong>Institution:</strong> ${l}</p>
            <p><strong>Course:</strong> ${m} - ${g}</p>
            <p><strong>Request Type:</strong> ${w}</p>
            ${w==="primary"?`<p><strong>Course Creation Method:</strong> ${j==="syllabus"?"Imported from Syllabus":"Manual Entry"}</p>`:""}
            ${w==="primary"&&j==="syllabus"&&z.length>0?`<p><strong>Generated Materials:</strong> ${z.filter(ne=>ne.published).length} materials ready for publication</p>`:""}
            <p><strong>Description:</strong> ${y}</p>
            <p><strong>Request ID:</strong> ${Le.id}</p>
            <p><a href="https://nexlab.bio/educator-requests">
            Click here to review the request.
            </a></p>
          `}};await Ai(ln(t,"mail"),He);const Ye={firstName:r,lastName:a,email:d,institution:l,courseNumber:m,courseTitle:g,requestType:w,courseCreationMode:w==="primary"?j:void 0,generatedMaterialsCount:w==="primary"&&j==="syllabus"?z.filter(ne=>ne.published).length:void 0,requestId:Le.id,submittedAt:new Date().toISOString()},V=bF(Ye),Ae=eS([d],"Instructor Request Submitted - NexLAB",V);await Ai(ln(t,"mail"),Ae),J(w==="primary"&&j==="syllabus"&&z.length>0?`Your educator request has been submitted for review with ${z.filter(ne=>ne.published).length} auto-generated course materials.`:"Your request has been submitted for review."),i(""),s(""),u(""),f(""),b(""),x(""),A(""),C("primary"),F("manual"),j==="syllabus"&&O(),W(!0),setTimeout(()=>{n("/my-profile")},3e3)}catch(Se){console.error("Error submitting request: ",Se),Se instanceof Error&&console.error("Error details:",{message:Se.message,name:Se.name,stack:Se.stack}),J("Error submitting your request. Please try again."),W(!0)}finally{N(!1)}},re=()=>{W(!1)},oe=w==="primary"&&j==="syllabus"&&T!=="upload"&&!M,Ce=w==="primary"&&j==="syllabus"&&(T==="review"||T==="editing"||T==="complete")&&M;return h.jsxs(q6,{title:"Request Educator Permissions",subtitle:"Request permissions to create courses or join existing courses as a co-instructor.",children:[h.jsx(Hf,{title:"Request Type",description:"Select the type of educator permissions you are requesting.",children:h.jsxs(gF,{label:"Request Type",value:w,onChange:U,required:!0,disabled:R,helperText:"Choose whether you want to create a new course or join an existing one",children:[h.jsx(ai,{value:"primary",children:"I am a primary course instructor, I want to create a new course"}),h.jsx(ai,{value:"co-instructor",children:"I am a co-instructor, I want to be added to an existing course"})]})}),h.jsxs(Hf,{title:"Personal Information",description:"Provide your contact and institutional details.",showDivider:!0,children:[h.jsxs(wt,{container:!0,spacing:3,children:[h.jsx(wt,{item:!0,xs:12,md:6,children:h.jsx(fu,{label:"First Name",value:r,onChange:se(i),required:!0,disabled:R,placeholder:"John"})}),h.jsx(wt,{item:!0,xs:12,md:6,children:h.jsx(fu,{label:"Last Name",value:a,onChange:se(s),required:!0,disabled:R,placeholder:"Doe"})})]}),h.jsxs(wt,{container:!0,spacing:3,children:[h.jsx(wt,{item:!0,xs:12,md:6,children:h.jsx(fu,{label:"Institution Affiliation",value:l,onChange:se(u),required:!0,disabled:R,placeholder:"University Name",helperText:"The name of your educational institution"})}),h.jsx(wt,{item:!0,xs:12,md:6,children:h.jsx(fu,{label:"Institutional Email",type:"email",value:d,onChange:se(f),required:!0,disabled:R,placeholder:"name@institution.edu",helperText:"Please use your institutional email to confirm your affiliation"})})]})]}),h.jsxs(Hf,{title:w==="primary"?"New Course Details":"Existing Course Details",description:w==="primary"?"Provide details for the course you want to create.":"Provide details about the existing course you want to join.",showDivider:!0,children:[w==="primary"&&h.jsxs(gn,{sx:{p:3,mb:4,backgroundColor:"grey.50"},children:[h.jsxs(O6,{value:j,exclusive:!0,onChange:le,"aria-label":"course creation mode",fullWidth:!0,sx:{mb:2},children:[h.jsxs(Q0,{value:"manual","aria-label":"manual entry",children:[h.jsx(bu,{sx:{mr:1}}),"Manual Entry"]}),h.jsxs(Q0,{value:"syllabus","aria-label":"syllabus import",children:[h.jsx(Gj,{sx:{mr:1}}),"Import from Syllabus"]})]}),h.jsx(gn,{sx:{p:2,backgroundColor:"primary.50",border:"1px solid",borderColor:"primary.200",fontFamily:we.fontFamily.primary,fontSize:we.fontSize.sm,color:K.text.secondary},children:j==="manual"?"Fill out the course information manually using the form below.":"Upload your syllabus document and we'll automatically extract course information and generate materials."})]}),w==="primary"&&j==="syllabus"&&h.jsx(mD,{onComplete:B,onCancel:()=>F("manual"),educatorUid:e==null?void 0:e.uid}),(w==="co-instructor"||w==="primary"&&j==="manual")&&h.jsxs(h.Fragment,{children:[h.jsxs(wt,{container:!0,spacing:3,children:[h.jsx(wt,{item:!0,xs:12,md:3,children:h.jsx(fu,{label:"Course Number",value:m,onChange:se(b),required:!0,disabled:R,placeholder:"e.g., BIOL301",helperText:"Enter the official course number or code"})}),h.jsx(wt,{item:!0,xs:12,md:9,children:h.jsx(fu,{label:"Course Title",value:g,onChange:se(x),required:!0,disabled:R,placeholder:"e.g., Biotech Research Methods",helperText:"Enter the full course title"})})]}),w==="primary"&&h.jsx(fu,{label:"Course Description",value:y,onChange:se(A),required:!0,disabled:R,multiline:!0,rows:4,placeholder:"A comprehensive course covering advanced methods and tools in modern biotech labs, focusing on CRISPR, NGS, and bioinformatics.",helperText:"Describe the course content, objectives, and learning outcomes"})]})]}),(w==="co-instructor"||w==="primary"&&j==="manual"||Ce)&&h.jsxs(B6,{align:"space-between",children:[h.jsx(K0,{variant:"text",onClick:()=>n("/my-profile"),disabled:R,children:"Cancel"}),h.jsx(K0,{variant:"primary",onClick:ee,disabled:R||oe,loading:R,children:w==="primary"&&j==="syllabus"&&z.length>0?`Submit with ${z.filter(ye=>ye.published).length} Materials`:"Submit"})]}),h.jsxs(Zi,{open:G,onClose:re,children:[h.jsx(pa,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:h.jsx(Dg,{sx:{color:"green",fontSize:50,marginRight:1}})}),h.jsx(Ji,{children:h.jsx(Il,{sx:{textAlign:"center"},children:Q})}),h.jsx(ma,{children:h.jsx(Ct,{onClick:re,color:"primary",autoFocus:!0,children:"Close"})})]})]})},TX=({requests:e,loading:n=!1,onApprove:t,onDeny:r,onDelete:i})=>{const a=l=>{switch(l.toLowerCase()){case"approved":return"success";case"pending":return"warning";case"denied":return"error";default:return"default"}},s=[{id:"firstName",label:"Name",width:"12%",render:(l,u)=>h.jsx(Za,{text:`${l} ${u.lastName}`,weight:"semibold"})},{id:"uid",label:"User ID",width:"12%",render:l=>h.jsx(ih,{userId:l,userType:"student"})},{id:"institution",label:"Institution",width:"12%",render:l=>h.jsx(Za,{text:l,maxLength:30})},{id:"email",label:"Email",width:"12%",render:l=>h.jsx(Za,{text:l,maxLength:30,variant:"monospace"})},{id:"courseNumber",label:"Course",width:"12%",render:(l,u)=>h.jsx(bp,{courseId:u.courseId||"",courseNumber:l,courseTitle:u.courseTitle,variant:"link",maxTitleLength:30})},{id:"timestamp",label:"Submitted",width:"10%",render:l=>h.jsx(yp,{date:new Date(l.seconds*1e3),format:"full"})},{id:"status",label:"Status",width:"7%",render:l=>h.jsx(cv,{label:l,status:a(l)})},{id:"actions",label:"Actions",width:"15%",align:"center",render:(l,u)=>{const d=u.status==="pending",f=u.status==="approved"||u.status==="denied";return h.jsx(zg,{actions:[{icon:h.jsx(Qj,{}),tooltip:d?"Approve Request":"Already processed",onClick:()=>t(u.id),disabled:!d,color:K.success,hoverColor:K.success+"20"},{icon:h.jsx(ig,{}),tooltip:d?"Deny Request":"Already processed",onClick:()=>r(u.id),disabled:!d,color:K.error,hoverColor:K.error+"20"},{icon:h.jsx(mu,{}),tooltip:f?"Delete Request":"Request must be approved or denied first",onClick:()=>i(u.id),disabled:!f,color:K.text.secondary,hoverColor:K.text.secondary+"20"}]})}}];return h.jsx(rh,{data:e,columns:s,loading:n,emptyMessage:"No educator permission requests found.",stickyHeader:!0})},OX=()=>{const[e,n]=X.useState([]),[t,r]=X.useState([]),[i,a]=X.useState(""),[s,l]=X.useState(!1),[u,d]=X.useState(""),[f,m]=X.useState("success"),[b,g]=X.useState(!1),[x,y]=X.useState(null),[A,w]=X.useState(null),[C,j]=X.useState(null),F=Xn();ya(),X.useEffect(()=>{(async()=>{const N=(await Ci(ln(F,"educatorRequests"))).docs.map(J=>({id:J.id,...J.data()})),W=(await Ci(ln(F,"courses"))).docs.map(J=>({id:J.id,...J.data()})),Q=N.sort((J,se)=>{var B,ee;const U=((B=J.timestamp)==null?void 0:B.seconds)||0,q=(((ee=se.timestamp)==null?void 0:ee.seconds)||0)-U;return q!==0?q:J.status==="pending"&&se.status!=="pending"||J.status==="approved"&&se.status==="denied"?-1:J.status==="denied"&&se.status==="approved"?1:0});n(Q),r(W)})()},[F]);function M(){const T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let R="";for(let N=0;N<28;N++)R+=T.charAt(Math.floor(Math.random()*T.length));return R}const z=async()=>{var T,R,N;if(!(!A||!C)){if(!C.courseNumber||!C.courseTitle){d("Course number or title is missing. Cannot approve request."),m("error"),l(!0);return}if(C.requestType==="co-instructor"&&!i){d("Please select a course for the co-instructor request."),m("error"),l(!0);return}if(C.status!=="pending"){d("This request has already been processed."),m("warning"),l(!0);return}try{const G=un(F,"users",C.uid);if(C.requestType==="primary"){const W=M(),Q=await Ai(ln(F,"courses"),{number:C.courseNumber,title:C.courseTitle,passcode:W,courseAdmin:[C.uid],createdAt:new Date,courseCreatedAt:new Date}),J=await ga(G),se=J.exists()?((T=J.data())==null?void 0:T.classes)||{}:{};await Hr(G,{isAdmin:!0,classes:{...se,[Q.id]:{number:C.courseNumber,title:C.courseTitle,isCourseAdmin:!0,courseCreatedAt:new Date,enrolledAt:new Date}}}),await Hr(un(F,"educatorRequests",A),{status:"approved",courseId:Q.id,passcode:W});let U=0;if(C.syllabusImported&&((R=C.syllabusData)!=null&&R.generatedMaterials)){const re=av(F);C.syllabusData.generatedMaterials.forEach((oe,Ce)=>{const ye=un(ln(F,"materials")),Se={title:oe.title||"Untitled Material",header:oe.header||{title:"",content:""},footer:oe.footer||{title:"",content:""},sections:(oe.sections||[]).map(Te=>({...Te,images:Te.images||[],links:Te.links||[],subsections:(Te.subsections||[]).map(Le=>({...Le,images:Le.images||[],links:Le.links||[],subSubsections:(Le.subSubsections||[]).map(He=>({...He,images:He.images||[],links:He.links||[]}))}))})),published:oe.published||!1,course:Q.id,author:C.uid,timestamp:Si.now(),sequenceNumber:Ce,createdAt:new Date,updatedAt:new Date};if(oe.scheduledTimestamp)try{const Te=oe.scheduledTimestamp instanceof Date?oe.scheduledTimestamp:new Date(oe.scheduledTimestamp);isNaN(Te.getTime())?console.warn(`Invalid scheduledTimestamp for material "${oe.title}", skipping...`):Se.scheduledTimestamp=Si.fromDate(Te)}catch(Te){console.warn(`Error converting scheduledTimestamp for material "${oe.title}":`,Te)}re.set(ye,Se),U++}),await re.commit(),console.log(` Created ${U} materials from syllabus import`)}const le={firstName:C.firstName,lastName:C.lastName,email:C.email,institution:C.institution,courseNumber:C.courseNumber,courseTitle:C.courseTitle,requestType:C.requestType,passcode:W,courseId:Q.id,requestId:A,approvedAt:new Date().toISOString()},q=L8(le),B=eS([C.email],"Instructor Request Approved - NexLAB",q);await Ai(ln(F,"mail"),B);const ee={to:["andriy@intofuture.org","dylan@intofuture.org"],message:{subject:`Educator Request Approved - NexLAB${U>0?` (${U} Materials Created)`:""}`,html:`
              <p>An educator request has been approved:</p>
              <p><strong>Name:</strong> ${C.firstName} ${C.lastName}</p>
              <p><strong>Email:</strong> ${C.email}</p>
              <p><strong>Institution:</strong> ${C.institution}</p>
              <p><strong>Course:</strong> ${C.courseNumber} - ${C.courseTitle}</p>
              <p><strong>Request Type:</strong> ${C.requestType==="primary"?"Primary Instructor":"Co-Instructor"}</p>
              ${U>0?`<p><strong>Syllabus Import:</strong>  ${U} course materials were automatically created from syllabus</p>`:""}
              <p><strong>Course ID:</strong> ${Q.id}</p>
              <p><strong>Passcode:</strong> ${W}</p>
              <p><strong>Request ID:</strong> ${A}</p>
              <p><strong>Approved:</strong> ${new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}</p>
            `}};await Ai(ln(F,"mail"),ee)}else if(C.requestType==="co-instructor"){if(!i){d("Please select a course for the co-instructor request."),m("error"),l(!0);return}const W=un(F,"courses",i);await Hr(W,{courseAdmin:sR(C.uid)});const Q=await ga(G),J=Q.exists()?((N=Q.data())==null?void 0:N.classes)||{}:{};await Hr(G,{isAdmin:!0,classes:{...J,[i]:{number:C.courseNumber,title:C.courseTitle,isCourseAdmin:!0,courseCreatedAt:new Date,enrolledAt:new Date}}}),await Hr(un(F,"educatorRequests",A),{status:"approved",courseId:i});const se={firstName:C.firstName,lastName:C.lastName,email:C.email,institution:C.institution,courseNumber:C.courseNumber,courseTitle:C.courseTitle,requestType:C.requestType,courseId:i,requestId:A,approvedAt:new Date().toISOString()},U=L8(se),le=eS([C.email],"Instructor Request Approved - NexLAB",U);await Ai(ln(F,"mail"),le);const q={to:["andriy@intofuture.org","dylan@intofuture.org"],message:{subject:"Co-Instructor Request Approved - NexLAB",html:`
              <p>A co-instructor request has been approved:</p>
              <p><strong>Name:</strong> ${C.firstName} ${C.lastName}</p>
              <p><strong>Email:</strong> ${C.email}</p>
              <p><strong>Institution:</strong> ${C.institution}</p>
              <p><strong>Course:</strong> ${C.courseNumber} - ${C.courseTitle}</p>
              <p><strong>Request Type:</strong> Co-Instructor</p>
              <p><strong>Course ID:</strong> ${i}</p>
              <p><strong>Request ID:</strong> ${A}</p>
              <p><strong>Approved:</strong> ${new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}</p>
            `}};await Ai(ln(F,"mail"),q)}d("Request approved, and user promoted to educator."),m("success"),n(W=>W.map(J=>J.id===A?{...J,status:"approved"}:J).sort((J,se)=>{var B,ee;const U=((B=J.timestamp)==null?void 0:B.seconds)||0,q=(((ee=se.timestamp)==null?void 0:ee.seconds)||0)-U;return q!==0?q:J.status==="pending"&&se.status!=="pending"||J.status==="approved"&&se.status==="denied"?-1:J.status==="denied"&&se.status==="approved"?1:0}))}catch(G){console.error("Error approving request: ",G),d("Error approving the request. Please try again."),m("error")}l(!0),Z()}},_=async()=>{if(A){try{await Hr(un(F,"educatorRequests",A),{status:"denied"}),d("Request denied."),m("success"),n(T=>T.map(N=>N.id===A?{...N,status:"denied"}:N).sort((N,G)=>{var se,U;const W=((se=N.timestamp)==null?void 0:se.seconds)||0,J=(((U=G.timestamp)==null?void 0:U.seconds)||0)-W;return J!==0?J:N.status==="pending"&&G.status!=="pending"||N.status==="approved"&&G.status==="denied"?-1:N.status==="denied"&&G.status==="approved"?1:0}))}catch(T){console.error("Error denying request: ",T),d("Error denying the request. Please try again."),m("error")}l(!0),Z()}},L=async()=>{if(A){try{await Ig(un(F,"educatorRequests",A)),d("Educator request deleted successfully."),m("success"),n(T=>T.filter(N=>N.id!==A).sort((N,G)=>{var se,U;const W=((se=N.timestamp)==null?void 0:se.seconds)||0,J=(((U=G.timestamp)==null?void 0:U.seconds)||0)-W;return J!==0?J:N.status==="pending"&&G.status!=="pending"||N.status==="approved"&&G.status==="denied"?-1:N.status==="denied"&&G.status==="approved"?1:0}))}catch(T){console.error("Error deleting request: ",T),d("Error deleting the request. Please try again."),m("error")}l(!0),Z()}},$=(T,R,N)=>{y(T),w(R),j(N),a(""),g(!0)},Z=()=>{g(!1),y(null),w(null),j(null)},O=()=>{l(!1)};return h.jsxs(de,{sx:{p:$e[6],backgroundColor:K.background.primary,minHeight:"100vh"},children:[h.jsx(So,{title:"Educator Permission Requests"}),h.jsx(he,{variant:"body1",sx:{mb:$e[4],color:K.text.secondary,fontFamily:"Gabarito, sans-serif"},children:"Review and manage educator permission requests from users seeking to become course instructors."}),h.jsx(TX,{requests:e,loading:!1,onApprove:T=>{const R=e.find(N=>N.id===T);R&&$("approve",T,R)},onDeny:T=>{const R=e.find(N=>N.id===T);R&&$("deny",T,R)},onDelete:T=>{const R=e.find(N=>N.id===T);R&&$("delete",T,R)}}),h.jsx(Ll,{open:s,autoHideDuration:6e3,onClose:O,children:h.jsx(rr,{onClose:O,severity:f,sx:{width:"100%"},children:u})}),h.jsxs(Zi,{open:b,onClose:Z,"aria-labelledby":"confirmation-dialog-title","aria-describedby":"confirmation-dialog-description",children:[h.jsx(pa,{id:"confirmation-dialog-title",children:x==="approve"?"Confirm Approval":x==="deny"?"Confirm Denial":"Delete Request"}),h.jsxs(Ji,{children:[h.jsx(Il,{id:"confirmation-dialog-description",children:x==="delete"?`Are you sure you want to delete this request for ${C==null?void 0:C.firstName} ${C==null?void 0:C.lastName}? This action cannot be undone.`:`Are you sure you want to ${x} this request for ${C==null?void 0:C.firstName} ${C==null?void 0:C.lastName}?`}),x==="approve"&&(C==null?void 0:C.requestType)==="co-instructor"&&h.jsxs(de,{sx:{mt:2},children:[h.jsx(he,{children:"Select Course:"}),h.jsx(Dc,{fullWidth:!0,value:i,onChange:T=>a(T.target.value),children:t.map(T=>h.jsx(ai,{value:T.id,children:`${T.number} - ${T.title}`},T.id))})]})]}),h.jsxs(ma,{children:[h.jsx(Ct,{onClick:Z,color:"primary",children:"Cancel"}),h.jsx(Ct,{onClick:x==="approve"?z:x==="deny"?_:L,color:x==="delete"?"error":"primary",variant:"contained",autoFocus:!0,disabled:(C==null?void 0:C.requestType)==="co-instructor"&&x==="approve"&&!i,children:x==="approve"?"Approve":x==="deny"?"Deny":"Delete"})]})]})]})},Hx=e=>{if(e==null)return null;if(e instanceof Date)return e;if(Array.isArray(e))return e.map(Hx).filter(n=>n!=null);if(typeof e=="object"){const n={};return Object.keys(e).forEach(t=>{const r=e[t];if(r!==void 0){const i=Hx(r);i!=null&&(n[t]=i)}}),n}return e},DX=()=>{const{userDetails:e}=zi(),n=ya(),t=Xn(),[r,i]=X.useState("manual"),[a,s]=X.useState(""),[l,u]=X.useState(""),[d,f]=X.useState(""),{parsedCourseInfo:m,generatedMaterials:b,aiExtractedInfo:g,storedSyllabusFile:x,uploadedFile:y,useAIProcessing:A,reset:w,currentStep:C}=_p(),[j,F]=X.useState(!1),[M,z]=X.useState(!1),[_,L]=X.useState("");X.useEffect(()=>{r==="manual"&&w()},[r,w]),X.useEffect(()=>{r==="syllabus"&&m&&(s(m.suggestedNumber||""),u(m.suggestedTitle||""),f(m.suggestedDescription||""))},[r,m]);const $=Q=>J=>{Q(J.target.value)},Z=(Q,J)=>{J!==null&&(i(J),J==="syllabus"&&(s(""),u(""),f("")))},O=()=>{if(r==="manual"){if(!a||!l||!d)return"Please fill in all required fields."}else if(r==="syllabus"){if(!m)return"Please complete the syllabus import process first.";if(!a||!l||!d)return"Please ensure course information is properly filled from your syllabus."}return null},T=Q=>{console.log("Syllabus import completed:",Q)},R=async()=>{const Q=O();if(Q){L(Q),z(!0);return}F(!0);try{const J={uid:(e==null?void 0:e.uid)||"",courseNumber:a||"",courseTitle:l||"",courseDescription:d||"",status:"pending",timestamp:new Date,syllabusImported:!1};if(r==="syllabus"&&m&&b.length>0){const q=gD(m,b,g,x,y,A),B=Hx(q);J.syllabusImported=!0,J.syllabusData=B}const se=Hx(J);console.log("Submitting clean request document:",se);const U=await Ai(ln(t,"courseRequests"),se),le={to:["andriy@intofuture.org"],message:{subject:`New Course Request Submitted${r==="syllabus"?" (With Syllabus Import)":""}`,html:`
            <p>A new course request has been submitted:</p>
            <p><strong>Educator ID:</strong> ${(e==null?void 0:e.uid)||"Unknown"}</p>
            <p><strong>Course:</strong> ${a} - ${l}</p>
            <p><strong>Description:</strong> ${d}</p>
            <p><strong>Creation Method:</strong> ${r==="syllabus"?"Imported from Syllabus":"Manual Entry"}</p>
            ${r==="syllabus"&&b.length>0?`<p><strong>Generated Materials:</strong> ${b.filter(q=>q.published).length} materials ready for publication</p>`:""}
            <p><strong>Request ID:</strong> ${U.id}</p>
            <p><a href="https://nexlab.bio/course-requests">
            Click here to review the request.
            </a></p>
          `}};await Ai(ln(t,"mail"),le),L(r==="syllabus"?`Your course request has been submitted for review with ${b.filter(q=>q.published).length} auto-generated materials.`:"Your course request has been submitted for review."),s(""),u(""),f(""),r==="syllabus"&&w(),z(!0),setTimeout(()=>{n("/course-management")},3e3)}catch(J){console.error("Error submitting course request: ",J),J instanceof Error&&console.error("Error details:",{message:J.message,name:J.name,stack:J.stack}),L("Error submitting your course request. Please try again."),z(!0)}finally{F(!1)}},N=()=>{z(!1)},G=r==="syllabus"&&C!=="upload"&&!m,W=r==="syllabus"&&(C==="review"||C==="editing"||C==="complete")&&m;return h.jsxs(q6,{title:"Request New Course",subtitle:"Create a new course by entering course information manually or importing from a syllabus document.",children:[h.jsx(Hf,{title:"Course Creation Method",description:"Choose how you would like to create your course.",children:h.jsxs(gn,{sx:{p:3,mb:4,backgroundColor:"grey.50"},children:[h.jsxs(O6,{value:r,exclusive:!0,onChange:Z,"aria-label":"course creation mode",fullWidth:!0,sx:{mb:2},children:[h.jsxs(Q0,{value:"manual","aria-label":"manual entry",children:[h.jsx(bu,{sx:{mr:1}}),"Manual Entry"]}),h.jsxs(Q0,{value:"syllabus","aria-label":"syllabus import",children:[h.jsx(Gj,{sx:{mr:1}}),"Import from Syllabus"]})]}),h.jsx(gn,{sx:{p:2,backgroundColor:"primary.50",border:"1px solid",borderColor:"primary.200",fontFamily:we.fontFamily.primary,fontSize:we.fontSize.sm,color:K.text.secondary},children:r==="manual"?"Fill out the course information manually using the form below.":"Upload your syllabus document and we'll automatically extract course information and generate materials."})]})}),r==="syllabus"&&h.jsx(Hf,{title:"Syllabus Import",description:"Upload your syllabus document to automatically extract course information.",showDivider:!0,children:h.jsx(mD,{onComplete:T,onCancel:()=>i("manual"),educatorUid:e==null?void 0:e.uid})}),r==="manual"&&h.jsxs(Hf,{title:"Course Information",description:"Provide the basic details for your course.",showDivider:!0,children:[h.jsxs(wt,{container:!0,spacing:3,children:[h.jsx(wt,{item:!0,xs:12,md:4,children:h.jsx(fu,{label:"Course Number",value:a,onChange:$(s),required:!0,disabled:j,placeholder:"e.g., BIOL301",helperText:"Enter the official course number or code"})}),h.jsx(wt,{item:!0,xs:12,md:8,children:h.jsx(fu,{label:"Course Title",value:l,onChange:$(u),required:!0,disabled:j,placeholder:"e.g., Biotech Research Methods",helperText:"Enter the full course title"})})]}),h.jsx(fu,{label:"Course Description",value:d,onChange:$(f),required:!0,disabled:j,multiline:!0,rows:4,placeholder:"A comprehensive course covering advanced methods and tools in modern biotech labs, focusing on CRISPR, NGS, and bioinformatics.",helperText:"Describe the course content, objectives, and learning outcomes"})]}),(r==="manual"||W)&&h.jsxs(B6,{align:"space-between",children:[h.jsx(K0,{variant:"text",onClick:()=>n("/course-management"),disabled:j,children:"Cancel"}),h.jsx(K0,{variant:"primary",onClick:R,disabled:j||G,loading:j,children:r==="syllabus"&&b.length>0?`Submit Request with ${b.filter(Q=>Q.published).length} Materials`:"Submit"})]}),h.jsxs(Zi,{open:M,onClose:N,children:[h.jsx(pa,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:h.jsx(Dg,{sx:{color:"green",fontSize:50,marginRight:1}})}),h.jsx(Ji,{children:h.jsx(Il,{sx:{textAlign:"center"},children:_})}),h.jsx(ma,{children:h.jsx(Ct,{onClick:N,color:"primary",autoFocus:!0,children:"Close"})})]})]})},IX=({requests:e,loading:n=!1,onApprove:t,onDeny:r,onDelete:i,onViewSyllabus:a})=>{const s=d=>{switch(d.toLowerCase()){case"approved":return"success";case"pending":return"warning";case"denied":return"error";default:return"default"}},l=d=>d.syllabusImported?"Syllabus Import":"Manual Creation",u=[{id:"uid",label:"Educator ID",width:"15%",render:d=>h.jsx(ih,{userId:d,userType:"educator"})},{id:"courseNumber",label:"Course",width:"25%",render:(d,f)=>h.jsx(bp,{courseId:f.id||"",courseNumber:d,courseTitle:f.courseTitle,variant:"link",maxTitleLength:35})},{id:"courseDescription",label:"Description",width:"15%",render:d=>h.jsx(Za,{text:d,maxLength:60,variant:"secondary"})},{id:"syllabusImported",label:"Creation Method",width:"10%",render:(d,f)=>h.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:1},children:[h.jsx(Za,{text:l(f)}),d&&a&&h.jsx(fi,{title:"View Syllabus Data",children:h.jsx(_n,{size:"small",onClick:()=>a(f),sx:{color:K.primary[600],"&:hover":{backgroundColor:K.primary[100]}},children:h.jsx(yx,{fontSize:"small"})})})]})},{id:"timestamp",label:"Submitted",width:"8%",render:d=>h.jsx(yp,{date:new Date(d.seconds*1e3),format:"full"})},{id:"status",label:"Status",width:"7%",render:d=>h.jsx(cv,{label:d,status:s(d)})},{id:"actions",label:"Actions",width:"15%",align:"center",render:(d,f)=>{const m=f.status==="pending",b=f.status==="approved"||f.status==="denied";return h.jsx(zg,{actions:[{icon:h.jsx(Qj,{}),tooltip:m?"Approve Request":"Already processed",onClick:()=>t(f.id),disabled:!m,color:K.success,hoverColor:K.success+"20"},{icon:h.jsx(ig,{}),tooltip:m?"Deny Request":"Already processed",onClick:()=>r(f.id),disabled:!m,color:K.error,hoverColor:K.error+"20"},{icon:h.jsx(mu,{}),tooltip:b?"Delete Request":"Request must be approved or denied first",onClick:()=>i(f.id),disabled:!b,color:K.text.secondary,hoverColor:K.text.secondary+"20"}]})}}];return h.jsx(rh,{data:e,columns:u,loading:n,emptyMessage:"No course creation requests found.",stickyHeader:!1})},LX=()=>{var L,$,Z,O;const[e,n]=X.useState([]),[t,r]=X.useState(!1),[i,a]=X.useState(""),[s,l]=X.useState("success"),[u,d]=X.useState(!1),[f,m]=X.useState(null),[b,g]=X.useState(null),[x,y]=X.useState(null),A=Xn();X.useEffect(()=>{(async()=>{try{const N=(await Ci(ln(A,"courseRequests"))).docs.map(G=>({id:G.id,...G.data()}));N.sort((G,W)=>{var U,le;const Q=((U=G.timestamp)==null?void 0:U.seconds)||0,se=(((le=W.timestamp)==null?void 0:le.seconds)||0)-Q;return se!==0?se:G.status==="pending"&&W.status!=="pending"||G.status==="approved"&&W.status==="denied"?-1:G.status==="denied"&&W.status==="approved"?1:0}),n(N)}catch(R){console.error("Error fetching course requests: ",R)}})()},[A]);function w(){const T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let R="";for(let N=0;N<28;N++)R+=T.charAt(Math.floor(Math.random()*T.length));return R}const C=async()=>{var T,R,N,G;if(!(!b||!x)){try{const W=w(),Q={number:x.courseNumber,title:x.courseTitle,description:x.courseDescription,passcode:W,courseAdmin:[x.uid],createdAt:new Date,courseCreatedAt:new Date};if(x.syllabusImported&&((T=x.syllabusData)!=null&&T.additionalInfo)){const ee=x.syllabusData.additionalInfo;Q.additionalInfo={contactInfo:ee.contactInfo||{},policies:ee.policies||{},additionalResources:ee.additionalResources||{},labSpecific:ee.labSpecific||{},textbooks:ee.textbooks||[],gradingPolicy:ee.gradingPolicy||[],assignments:ee.assignments||[],prerequisites:ee.prerequisites||[],lastUpdated:new Date}}x.syllabusImported&&((R=x.syllabusData)!=null&&R.syllabusFile)&&(Q.syllabusFile=x.syllabusData.syllabusFile);const J=await Ai(ln(A,"courses"),Q),se=un(A,"users",x.uid),U=await ga(se),le=U.exists()?((N=U.data())==null?void 0:N.classes)||{}:{};await Hr(se,{classes:{...le,[J.id]:{number:x.courseNumber,title:x.courseTitle,isCourseAdmin:!0,courseCreatedAt:new Date,enrolledAt:new Date}}});let q=0;if(x.syllabusImported&&((G=x.syllabusData)!=null&&G.generatedMaterials)){const ee=av(A);x.syllabusData.generatedMaterials.forEach((re,oe)=>{const Ce=un(ln(A,"materials")),ye={title:re.title||"Untitled Material",header:re.header||{title:"",content:""},footer:re.footer||{title:"",content:""},sections:(re.sections||[]).map(Se=>({...Se,images:Se.images||[],links:Se.links||[],subsections:(Se.subsections||[]).map(Te=>({...Te,images:Te.images||[],links:Te.links||[],subSubsections:(Te.subSubsections||[]).map(Le=>({...Le,images:Le.images||[],links:Le.links||[]}))}))})),published:!0,course:J.id,author:x.uid,timestamp:Si.now(),sequenceNumber:oe,createdAt:new Date,updatedAt:new Date};if(re.scheduledTimestamp)try{const Se=re.scheduledTimestamp instanceof Date?re.scheduledTimestamp:new Date(re.scheduledTimestamp);isNaN(Se.getTime())?console.warn(`Invalid scheduledTimestamp for material "${re.title}", skipping...`):ye.scheduledTimestamp=Si.fromDate(Se)}catch(Se){console.warn(`Error converting scheduledTimestamp for material "${re.title}":`,Se)}ee.set(Ce,ye),q++}),await ee.commit(),console.log(`Created ${q} materials from syllabus`)}await Hr(un(A,"courseRequests",b),{status:"approved",courseId:J.id,passcode:W});const B={to:["andriy@intofuture.org"],message:{subject:"Your Course Request Has Been Approved",html:`
            <p>Your course request has been approved:</p>
            <p><strong>Course:</strong> ${x.courseNumber} - ${x.courseTitle}</p>
            <p><strong>Passcode:</strong> ${W}</p>
            ${x.syllabusImported&&q>0?`<p><strong>Materials Created:</strong> ${q} materials have been automatically added to your course from your syllabus import.</p>`:""}
            <p><a href="https://nexlab.bio/supplemental-materials">
            Click here to view your course.
            </a></p>
          `}};await Ai(ln(A,"mail"),B),a(`Course request approved, course added${q>0?` with ${q} materials`:""}.`),l("success"),n(ee=>ee.map(oe=>oe.id===b?{...oe,status:"approved"}:oe).sort((oe,Ce)=>{var Le,He;const ye=((Le=oe.timestamp)==null?void 0:Le.seconds)||0,Te=(((He=Ce.timestamp)==null?void 0:He.seconds)||0)-ye;return Te!==0?Te:oe.status==="pending"&&Ce.status!=="pending"||oe.status==="approved"&&Ce.status==="denied"?-1:oe.status==="denied"&&Ce.status==="approved"?1:0}))}catch(W){console.error("Error approving request: ",W),a("Error approving the request. Please try again."),l("error")}r(!0),z()}},j=async()=>{if(b){try{await Hr(un(A,"courseRequests",b),{status:"denied"}),a("Course request denied."),l("success"),n(T=>T.map(N=>N.id===b?{...N,status:"denied"}:N).sort((N,G)=>{var se,U;const W=((se=N.timestamp)==null?void 0:se.seconds)||0,J=(((U=G.timestamp)==null?void 0:U.seconds)||0)-W;return J!==0?J:N.status==="pending"&&G.status!=="pending"||N.status==="approved"&&G.status==="denied"?-1:N.status==="denied"&&G.status==="approved"?1:0}))}catch(T){console.error("Error denying request: ",T),a("Error denying the request. Please try again."),l("error")}r(!0),z()}},F=async()=>{if(b){try{await Ig(un(A,"courseRequests",b)),a("Course request deleted successfully."),l("success"),n(T=>T.filter(N=>N.id!==b).sort((N,G)=>{var se,U;const W=((se=N.timestamp)==null?void 0:se.seconds)||0,J=(((U=G.timestamp)==null?void 0:U.seconds)||0)-W;return J!==0?J:N.status==="pending"&&G.status!=="pending"||N.status==="approved"&&G.status==="denied"?-1:N.status==="denied"&&G.status==="approved"?1:0}))}catch(T){console.error("Error deleting request: ",T),a("Error deleting the request. Please try again."),l("error")}r(!0),z()}},M=(T,R,N)=>{m(T),g(R),y(N),d(!0)},z=()=>{d(!1),m(null),g(null),y(null)},_=()=>{r(!1)};return h.jsxs(de,{sx:{p:$e[6],backgroundColor:K.background.primary,minHeight:"100vh"},children:[h.jsx(So,{title:"Course Creation Requests"}),h.jsx(he,{variant:"body1",sx:{mb:$e[4],color:K.text.secondary,fontFamily:"Gabarito, sans-serif"},children:"Review and approve course creation requests from educators."}),h.jsx(IX,{requests:e,loading:!1,onApprove:T=>{const R=e.find(N=>N.id===T);R&&M("approve",T,R)},onDeny:T=>{const R=e.find(N=>N.id===T);R&&M("deny",T,R)},onDelete:T=>{const R=e.find(N=>N.id===T);R&&M("delete",T,R)},onViewSyllabus:T=>{var R;(R=T.syllabusData)!=null&&R.syllabusFile&&typeof T.syllabusData.syllabusFile=="object"&&T.syllabusData.syllabusFile!==null&&"url"in T.syllabusData.syllabusFile&&window.open(T.syllabusData.syllabusFile.url,"_blank")}}),h.jsxs(Zi,{open:u,onClose:z,children:[h.jsx(pa,{children:f==="approve"?"Approve Course Request":f==="deny"?"Deny Course Request":"Delete Course Request"}),h.jsx(Ji,{children:h.jsx(Il,{children:f==="approve"?h.jsxs(h.Fragment,{children:["Are you sure you want to approve this course request?",(x==null?void 0:x.syllabusImported)&&h.jsxs(de,{sx:{mt:2,p:2,backgroundColor:"#ECF4FE",borderRadius:1},children:[h.jsx(he,{variant:"body2",sx:{fontWeight:"bold"},children:" Syllabus Import Detected"}),h.jsxs(he,{variant:"body2",children:["This request includes ",(($=(L=x==null?void 0:x.syllabusData)==null?void 0:L.generatedMaterials)==null?void 0:$.length)||0," auto-generated materials that will be added to the course."]}),((Z=x==null?void 0:x.syllabusData)==null?void 0:Z.syllabusFile)&&h.jsxs(de,{sx:{mt:1},children:[h.jsxs(he,{variant:"body2",sx:{mb:1},children:[h.jsx("strong",{children:"Syllabus File:"})," ",x.syllabusData.syllabusFile.metadata.originalFilename," ","(",(x.syllabusData.syllabusFile.metadata.fileSize/1024/1024).toFixed(2)," MB)"]}),h.jsx(Ct,{size:"small",variant:"outlined",startIcon:h.jsx(rg,{}),onClick:()=>{var T;(T=x.syllabusData)!=null&&T.syllabusFile&&"url"in x.syllabusData.syllabusFile&&window.open(x.syllabusData.syllabusFile.url,"_blank")},sx:{mt:.5},children:"View/Download Syllabus"})]}),((O=x==null?void 0:x.syllabusData)==null?void 0:O.additionalInfo)&&h.jsxs(he,{variant:"body2",sx:{mt:1},children:[h.jsx("strong",{children:"Additional Info:"})," Contact info, policies, textbooks, and other course details extracted"]})]})]}):f==="deny"?"Are you sure you want to deny this course request?":"Are you sure you want to delete this course request? This action cannot be undone."})}),h.jsxs(ma,{children:[h.jsx(Ct,{onClick:z,color:"primary",children:"Cancel"}),h.jsx(Ct,{onClick:f==="approve"?C:f==="deny"?j:F,color:f==="approve"?"success":"error",variant:"contained",children:f==="approve"?"Approve":f==="deny"?"Deny":"Delete"})]})]}),h.jsx(Ll,{open:t,autoHideDuration:6e3,onClose:_,children:h.jsx(rr,{onClose:_,severity:s,sx:{width:"100%"},children:i})})]})},RX=({courses:e,loading:n=!1,onAddSuperAdmin:t,onDeleteCourse:r,userUid:i})=>{const a=d=>!!i&&d.courseAdmin.includes(i),s=d=>d.length===0?h.jsx(Za,{text:"No admins assigned",variant:"secondary"}):h.jsx(de,{sx:{display:"flex",flexDirection:"column",gap:$e[1]},children:d.map((f,m)=>h.jsx(ih,{userId:f,userType:"educator"},m))}),l=d=>{const f=d.courseCreatedAt||d.createdAt||d.timestamp;if(!f)return h.jsx(Za,{text:"Unknown",variant:"secondary"});const m=f.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return h.jsx(Za,{text:m})},u=[{id:"number",label:"Course",width:"30%",render:(d,f)=>{const m=a(f);return h.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:$e[2]},children:[h.jsx(bp,{courseId:f.id,courseNumber:d,courseTitle:f.title,variant:"link",maxTitleLength:999}),m&&h.jsx(cr,{label:"ADMIN",size:"small",sx:{backgroundColor:K.success,color:K.text.inverse,fontSize:we.fontSize.xs,fontWeight:we.fontWeight.bold,height:"20px"}})]})}},{id:"id",label:"Course ID",width:"15%",render:d=>h.jsx(LT,{courseId:d})},{id:"createdAt",label:"Created",width:"20%",render:(d,f)=>l(f)},{id:"courseAdmin",label:"Course Admins",width:"20%",render:d=>s(d)},{id:"actions",label:"Actions",width:"15%",align:"center",render:(d,f)=>{const m=a(f);return h.jsx(zg,{actions:[{icon:og.add,tooltip:m?"Already an instructor":"Add yourself as an instructor",onClick:()=>t(f.id),disabled:m,color:K.success,hoverColor:K.success+"20"},{icon:og.delete,tooltip:m?"Delete this course":"You are not authorized to delete this course",onClick:()=>r(f.id),disabled:!m,color:K.error,hoverColor:K.error+"20"}]})}}];return h.jsx(rh,{data:e,columns:u,loading:n,emptyMessage:"No courses found.",stickyHeader:!1,showRowNumbers:!0})},MX=()=>{const e=Xn(),{userDetails:n}=zi(),[t,r]=X.useState([]),[i,a]=X.useState(!0),[s,l]=X.useState(!1),[u,d]=X.useState(""),[f,m]=X.useState("info"),[b,g]=X.useState(!1),[x,y]=X.useState(""),[A,w]=X.useState("");ya(),X.useEffect(()=>{(async()=>{a(!0);try{const O=(await Ci(ln(e,"courses"))).docs.map(T=>{const R=T.data(),N=G=>{if(G){if(G instanceof Date)return G;if(G instanceof Si)return G.toDate();if(G.seconds)return new Si(G.seconds,G.nanoseconds||0).toDate()}};return{id:T.id,title:R.title||"Untitled",number:R.number||"N/A",courseAdmin:R.courseAdmin||[],createdAt:N(R.createdAt),courseCreatedAt:N(R.courseCreatedAt),timestamp:N(R.timestamp)}}).sort((T,R)=>{const N=T.courseCreatedAt||T.createdAt||T.timestamp,G=R.courseCreatedAt||R.createdAt||R.timestamp;return!N&&!G?0:N?G?G.getTime()-N.getTime():-1:1});r(O)}catch($){console.error("Error fetching courses: ",$)}finally{a(!1)}})()},[e]);const C=async L=>{if(!n){M("User details are not available.","error");return}const $=t.find(Z=>Z.id===L);if($&&n)try{if($.courseAdmin.includes(n.uid)){M("You are already an admin for this course.","warning");return}const Z=un(e,"courses",L),O=[...$.courseAdmin,n.uid];await Hr(Z,{courseAdmin:O});const T=await ga(Z),R=T.exists()?T.data():null,N=(R==null?void 0:R.courseCreatedAt)||(R==null?void 0:R.createdAt)||(R==null?void 0:R.timestamp)||new Date,G=un(e,"users",n.uid);await Hr(G,{[`classes.${L}`]:{number:$.number,title:$.title,isCourseAdmin:!0,courseCreatedAt:N,enrolledAt:new Date}}),r(t.map(W=>W.id===L?{...W,courseAdmin:O}:W)),M("You have been successfully added as an admin to this course.","success")}catch(Z){console.error("Error adding super-admin to course: ",Z),M("Failed to add admin to course.","error")}},j=L=>{w(L),g(!0)},F=async()=>{if(n&&x===n.uid){const L=t.find($=>$.id===A);if(L&&L.courseAdmin.includes(n.uid))try{await Ig(un(e,"courses",A));const $=await Ci(ln(e,"users")),Z=av(e);$.forEach(O=>{const T=un(e,"users",O.id),N={...O.data().classes};delete N[A],Z.update(T,{classes:N})}),await Z.commit(),r(t.filter(O=>O.id!==A)),M("Course deleted successfully.","success")}catch($){console.error("Error deleting course: ",$),M("Failed to delete course.","error")}finally{g(!1),y("")}else M("You are not authorized to delete this course.","warning"),g(!1)}else M("User ID does not match. Please try again.","error")},M=(L,$)=>{d(L),m($),l(!0)},z=(L,$)=>{$!=="clickaway"&&l(!1)},_=()=>{g(!1),y("")};return h.jsxs(de,{sx:{p:$e[6],backgroundColor:K.background.primary,minHeight:"100vh"},children:[h.jsx(So,{title:"Super Admin Course Management"}),h.jsx(he,{variant:"body1",sx:{mb:$e[4],color:K.text.secondary},children:"Manage all courses in the system. Add yourself as an instructor or delete courses you manage."}),h.jsx(RX,{courses:t,loading:i,onAddSuperAdmin:C,onDeleteCourse:j,userUid:n==null?void 0:n.uid}),h.jsx(Ll,{open:s,autoHideDuration:6e3,onClose:z,children:h.jsx(rr,{onClose:z,severity:f,sx:{width:"100%"},children:u})}),h.jsxs(Zi,{open:b,onClose:_,children:[h.jsx(pa,{children:"Confirm Delete"}),h.jsxs(Ji,{children:[h.jsx(Il,{children:"To confirm the deletion of this course, please enter your User ID:"}),h.jsx(Jt,{autoFocus:!0,margin:"dense",id:"userId",label:"User ID",type:"text",fullWidth:!0,variant:"outlined",value:x,onChange:L=>y(L.target.value)})]}),h.jsxs(ma,{children:[h.jsx(Ct,{onClick:_,color:"primary",children:"Cancel"}),h.jsx(Ct,{onClick:F,color:"primary",children:"Confirm"})]})]})]})},FX=({requests:e,loading:n=!1})=>{const t=i=>{switch(i.toLowerCase()){case"approved":return"success";case"pending":return"warning";case"denied":return"error";default:return"default"}},r=[{id:"title",label:"Title",width:"25%",render:i=>h.jsx(Za,{text:i,maxLength:50,weight:"semibold"})},{id:"courseNumber",label:"Course",width:"20%",render:(i,a)=>h.jsx(bp,{courseId:a.courseId||"",courseNumber:i,courseTitle:a.courseTitle,variant:"link",maxTitleLength:30})},{id:"materialTitle",label:"Material",width:"20%",render:(i,a)=>i&&a.materialId?h.jsx(OT,{materialId:a.materialId,materialTitle:i,variant:"link",maxTitleLength:999}):h.jsx(Za,{text:"N/A",variant:"secondary"})},{id:"timestamp",label:"Submitted",width:"15%",render:i=>h.jsx(yp,{date:new Date(i),format:"full"})},{id:"status",label:"Status",width:"10%",render:i=>h.jsx(cv,{label:i,status:t(i)})},{id:"files",label:"Files",width:"10%",render:i=>h.jsxs(de,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[i&&i.length>0?i.slice(0,2).map((a,s)=>h.jsxs(Og,{href:a,target:"_blank",rel:"noopener noreferrer",sx:{fontSize:"0.75rem",color:K.primary[600],textDecoration:"none","&:hover":{textDecoration:"underline"}},children:["File ",s+1]},s)):h.jsx(Za,{text:"No files",variant:"secondary"}),i&&i.length>2&&h.jsx(Za,{text:`+${i.length-2} more`,variant:"secondary"})]})}];return h.jsx(rh,{data:e,columns:r,loading:n,emptyMessage:"No chatbot requests found. Submit your first request to get started!",stickyHeader:!0})},PX=()=>{const{userDetails:e}=zi(),[n,t]=X.useState([]),[r,i]=X.useState(!0);return X.useEffect(()=>{(async()=>{if(!(e!=null&&e.uid))return;const s=Xn(),l=ln(s,"chatbotRequests"),u=Ol(l,Ri("educatorId","==",e.uid));try{const f=(await Ci(u)).docs.map(m=>({id:m.id,...m.data()}));t(f)}catch(d){console.error("Error fetching chatbot requests:",d)}finally{i(!1)}})()},[e==null?void 0:e.uid]),r?h.jsx(de,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:h.jsx(Zr,{})}):n.length===0?h.jsx(he,{variant:"body1",sx:{textAlign:"center",mt:4},children:"No chatbot requests found."}):h.jsxs(de,{sx:{mt:$e[6]},children:[h.jsx(he,{variant:"h5",sx:{mb:$e[4],fontFamily:we.fontFamily.display,fontWeight:we.fontWeight.bold,color:K.primary[500]},children:"Your Chatbot Requests"}),h.jsx(FX,{requests:n,loading:r})]})},zX=()=>{const e=ya();return h.jsxs(de,{className:"profile-container",sx:{p:4},children:[h.jsx(So,{title:"Chatbot Management"}),h.jsx(he,{variant:"body1",className:"profile-text",sx:{mb:3},children:"Manage your chatbots or create new chatbot requests."}),h.jsx(Ct,{variant:"contained",onClick:()=>e("/request-chatbot"),sx:{mt:2},className:"submit-button",children:"Request a New Chatbot"}),h.jsx(PX,{})]})},qX=({folderPath:e,onUploadComplete:n})=>{const[t,r]=X.useState(!1),[i,a]=X.useState([]),[s,l]=X.useState(null),u=5*1024*1024,d=[".pdf",".ppt",".pptx",".doc",".docx",".txt"],f=async m=>{if(!m.target.files)return;const b=Array.from(m.target.files),g=mp(),x=[];r(!0),l(null);try{for(const y of b){const A=y.name.slice(y.name.lastIndexOf(".")).toLowerCase();if(!d.includes(A)){l(`File ${y.name} is not a supported format.`);continue}if(y.size>u){l(`File ${y.name} exceeds the 5 MB limit and cannot be uploaded.`);continue}const w=yc(g,`${e}/files/${y.name}`);await $f(w,y);const C=await Uf(w);x.push(C)}a(y=>[...y,...b]),n(x)}catch(y){console.error("Error uploading files:",y),l("Failed to upload files. Please try again.")}finally{r(!1)}};return h.jsxs(de,{children:[h.jsx("input",{type:"file",accept:".pdf,.ppt,.pptx,.doc,.docx,.txt",multiple:!0,onChange:f,style:{display:"none"},id:"file-upload"}),h.jsx("label",{htmlFor:"file-upload",children:h.jsx(Ct,{variant:"contained",component:"span",disabled:t,startIcon:t?h.jsx(Zr,{size:20}):null,children:t?"Uploading...":"Select and Upload Files"})}),s&&h.jsx(rr,{severity:"error",sx:{mt:2},children:s}),h.jsx(de,{sx:{marginTop:2},children:i.map((m,b)=>h.jsx(he,{children:m.name},b))})]})},BX=gp()(qg((e,n)=>({materials:[],selectedCourse:null,loading:!1,error:null,isEditing:!1,selectedMaterial:null,setMaterials:t=>e({materials:t}),addMaterial:t=>e(r=>({materials:[...r.materials,t]})),updateMaterial:(t,r)=>e(i=>({materials:i.materials.map(a=>a.id===t?{...a,...r}:a)})),deleteMaterial:t=>e(r=>({materials:r.materials.filter(i=>i.id!==t)})),setSelectedCourse:t=>e({selectedCourse:t}),setLoading:t=>e({loading:t}),setError:t=>e({error:t}),setIsEditing:t=>e({isEditing:t}),setSelectedMaterial:t=>e({selectedMaterial:t}),fetchMaterials:async t=>{e({loading:!0,error:null});try{const{db:r}=await wi(async()=>{const{db:f}=await Promise.resolve().then(()=>Kh);return{db:f}},void 0),{collection:i,query:a,where:s,onSnapshot:l,orderBy:u}=await wi(async()=>{const{collection:f,query:m,where:b,onSnapshot:g,orderBy:x}=await import("./firebase-CiLlnz7t.js").then(y=>y.N);return{collection:f,query:m,where:b,onSnapshot:g,orderBy:x}},[]),d=a(i(r,"materials"),s("course","==",t));return new Promise(f=>{l(d,m=>{const g=m.docs.map(x=>({id:x.id,...x.data()})).sort((x,y)=>x.sequenceNumber!==void 0&&y.sequenceNumber!==void 0?x.sequenceNumber-y.sequenceNumber:x.sequenceNumber!==void 0?-1:y.sequenceNumber!==void 0?1:y.timestamp.toMillis()-x.timestamp.toMillis());e({materials:g,loading:!1}),f(void 0)})})}catch(r){e({error:r instanceof Error?r.message:"Failed to fetch materials",loading:!1})}},publishMaterial:async t=>{try{const{db:r}=await wi(async()=>{const{db:s}=await Promise.resolve().then(()=>Kh);return{db:s}},void 0),{doc:i,updateDoc:a}=await wi(async()=>{const{doc:s,updateDoc:l}=await import("./firebase-CiLlnz7t.js").then(u=>u.N);return{doc:s,updateDoc:l}},[]);await a(i(r,"materials",t),{published:!0}),n().updateMaterial(t,{published:!0})}catch{e({error:"Failed to publish material"})}},unpublishMaterial:async t=>{try{const{db:r}=await wi(async()=>{const{db:s}=await Promise.resolve().then(()=>Kh);return{db:s}},void 0),{doc:i,updateDoc:a}=await wi(async()=>{const{doc:s,updateDoc:l}=await import("./firebase-CiLlnz7t.js").then(u=>u.N);return{doc:s,updateDoc:l}},[]);await a(i(r,"materials",t),{published:!1}),n().updateMaterial(t,{published:!1})}catch{e({error:"Failed to unpublish material"})}}}))),$X=()=>{const{userDetails:e}=zi(),n=ya(),t=Xn(),[r,i]=X.useState(""),[a,s]=X.useState(""),[l,u]=X.useState(""),[d,f]=X.useState([]),[m,b]=X.useState(!1),[g,x]=X.useState(""),[y,A]=X.useState("success"),{materials:w,loading:C,error:j,fetchMaterials:F}=BX(),M=Object.entries((e==null?void 0:e.classes)||{}).filter(([Z,O])=>O.isCourseAdmin).map(([Z,O])=>({id:Z,number:O.number,title:O.title,isCourseAdmin:O.isCourseAdmin}));X.useEffect(()=>{u(""),a&&F(a)},[a,F]);const z=Z=>{f(O=>[...O,...Z])},_=async()=>{var G;if(!r||!a||!l||d.length===0){x("Please fill all required fields and upload at least one file."),A("error"),b(!0);return}const Z=(G=e==null?void 0:e.classes)==null?void 0:G[a];if(!Z||!Z.isCourseAdmin){x("You are not authorized to request a chatbot for this course."),A("error"),b(!0);return}const O=(Z==null?void 0:Z.number)??"N/A",T=(Z==null?void 0:Z.title)??"Untitled Course",R=w.find(W=>W.id===l);if(!R){x("Selected material details could not be found."),A("error"),b(!0);return}const{title:N}=R;try{const W=await Ai(ln(t,"chatbotRequests"),{educatorId:e==null?void 0:e.uid,courseId:a,courseNumber:O,courseTitle:T,materialId:l,materialTitle:N,title:r,files:d,status:"pending",timestamp:new Date().toISOString()});await Ai(ln(t,"mail"),{to:["andriy@intofuture.org"],message:{subject:"New Chatbot Request Submitted",html:`
            <p>A new chatbot request has been submitted:</p>
            <p><strong>Title:</strong> ${r}</p>
            <p><strong>Educator ID:</strong> ${e==null?void 0:e.uid}</p>
            <p><strong>Course:</strong> ${O} - ${T}</p>
            <p><strong>Material:</strong> ${N}</p>
            <p><strong>Request ID:</strong> ${W.id}</p>
            <p><a href="https://nexlab.bio/super-admin-chatbot-requests">
            Click here to review the request.
            </a></p>
          `}}),x("Chatbot request submitted successfully!"),A("success"),b(!0),setTimeout(()=>n("/chatbot-management"),1500)}catch(W){console.error("Error submitting chatbot request:",W),x("Failed to submit the chatbot request. Please try again."),A("error"),b(!0)}},L=()=>{n("/chatbot-management")},$=()=>{b(!1)};return h.jsxs(q6,{title:"Create a Chatbot",subtitle:"Fill out the form below to request a chatbot. Please upload all related materials for the chatbot's knowledge base.",children:[h.jsxs(Hf,{title:"Basic Information",description:"Provide the basic details for your chatbot request.",children:[h.jsx(fu,{label:"Chatbot Title",value:r,onChange:Z=>i(Z.target.value),required:!0,placeholder:"Enter a descriptive title for your chatbot",helperText:"Choose a clear, descriptive name that reflects the chatbot's purpose"}),h.jsxs(wt,{container:!0,spacing:3,children:[h.jsx(wt,{item:!0,xs:12,md:6,children:h.jsx(cm,{value:a,onChange:s,courses:M,label:"Course",placeholder:"Select a course",helperText:"Only courses where you are an admin are available for chatbot requests.",required:!0,showNumber:!0,showTitle:!0,showAdminBadge:!1})}),h.jsx(wt,{item:!0,xs:12,md:6,children:h.jsx(nF,{value:l,onChange:u,materials:w.map(Z=>({id:Z.id,title:Z.title,course:Z.course})),label:"Material",placeholder:"Select a material",helperText:a?j||(C?"Loading materials...":w.length===0?"No materials available for this course.":"Select the primary material for your chatbot"):"Please select a course first.",required:!0,disabled:!a||C,loading:C,error:!!j})})]})]}),h.jsx(Hf,{title:"Additional Materials",description:"Upload additional files to enhance your chatbot's knowledge base. Supported formats: PDF, PPT, DOC/DOCX, TXT.",showDivider:!0,children:h.jsx(qX,{folderPath:`chatbotRequests/${e==null?void 0:e.uid}`,onUploadComplete:z})}),h.jsxs(B6,{align:"space-between",children:[h.jsx(K0,{variant:"text",onClick:L,children:"Cancel"}),h.jsx(K0,{variant:"primary",onClick:_,disabled:!r||!a||!l||d.length===0,children:"Submit"})]}),h.jsx(Ll,{open:m,autoHideDuration:6e3,onClose:$,children:h.jsx(rr,{severity:y,onClose:$,children:g})})]})},UX=({conversations:e,loading:n=!1,onViewHistory:t,onDeleteConversation:r,loadingMap:i})=>{const a=[{id:"id",label:"Conversation ID",width:"25%",render:s=>h.jsx(rF,{conversationId:s})},{id:"userId",label:"User ID",width:"25%",render:s=>h.jsx(ih,{userId:s,userType:"student"})},{id:"chatbotId",label:"Chatbot ID",width:"25%",render:s=>h.jsx(IT,{chatbotId:s})},{id:"startedAt",label:"Started At",width:"15%",render:s=>h.jsx(yp,{date:new Date(s),format:"full"})},{id:"actions",label:"Actions",width:"10%",align:"center",render:(s,l)=>{const u=i[l.id];return h.jsx(zg,{actions:[{icon:og.view,tooltip:u?"Loading...":"View Conversation History",onClick:()=>t(l.chatbotId,l.id,{userId:l.userId,startedAt:l.startedAt}),disabled:u,color:K.primary[600],hoverColor:K.primary[100]},{icon:og.delete,tooltip:u?"Loading...":"Delete Conversation",onClick:()=>r(l.id),disabled:u,color:K.error,hoverColor:K.error+"20"}]})}}];return h.jsx(rh,{data:e,columns:a,loading:n,emptyMessage:"No conversations available to display.",stickyHeader:!1,showRowNumbers:!0})};function bD(e,n){return function(){return e.apply(n,arguments)}}const{toString:HX}=Object.prototype,{getPrototypeOf:kA}=Object,{iterator:Dv,toStringTag:yD}=Symbol,Iv=(e=>n=>{const t=HX.call(n);return e[t]||(e[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),_u=e=>(e=e.toLowerCase(),n=>Iv(n)===e),Lv=e=>n=>typeof n===e,{isArray:hm}=Array,xg=Lv("undefined");function WX(e){return e!==null&&!xg(e)&&e.constructor!==null&&!xg(e.constructor)&&go(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const xD=_u("ArrayBuffer");function VX(e){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(e):n=e&&e.buffer&&xD(e.buffer),n}const YX=Lv("string"),go=Lv("function"),vD=Lv("number"),Rv=e=>e!==null&&typeof e=="object",GX=e=>e===!0||e===!1,rx=e=>{if(Iv(e)!=="object")return!1;const n=kA(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(yD in e)&&!(Dv in e)},QX=_u("Date"),KX=_u("File"),XX=_u("Blob"),ZX=_u("FileList"),JX=e=>Rv(e)&&go(e.pipe),eZ=e=>{let n;return e&&(typeof FormData=="function"&&e instanceof FormData||go(e.append)&&((n=Iv(e))==="formdata"||n==="object"&&go(e.toString)&&e.toString()==="[object FormData]"))},tZ=_u("URLSearchParams"),[nZ,rZ,iZ,aZ]=["ReadableStream","Request","Response","Headers"].map(_u),sZ=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Kg(e,n,{allOwnKeys:t=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),hm(e))for(r=0,i=e.length;r<i;r++)n.call(null,e[r],r,e);else{const a=t?Object.getOwnPropertyNames(e):Object.keys(e),s=a.length;let l;for(r=0;r<s;r++)l=a[r],n.call(null,e[l],l,e)}}function wD(e,n){n=n.toLowerCase();const t=Object.keys(e);let r=t.length,i;for(;r-- >0;)if(i=t[r],n===i.toLowerCase())return i;return null}const Vh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:globalThis,SD=e=>!xg(e)&&e!==Vh;function YS(){const{caseless:e}=SD(this)&&this||{},n={},t=(r,i)=>{const a=e&&wD(n,i)||i;rx(n[a])&&rx(r)?n[a]=YS(n[a],r):rx(r)?n[a]=YS({},r):hm(r)?n[a]=r.slice():n[a]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Kg(arguments[r],t);return n}const oZ=(e,n,t,{allOwnKeys:r}={})=>(Kg(n,(i,a)=>{t&&go(i)?e[a]=bD(i,t):e[a]=i},{allOwnKeys:r}),e),lZ=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),uZ=(e,n,t,r)=>{e.prototype=Object.create(n.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:n.prototype}),t&&Object.assign(e.prototype,t)},cZ=(e,n,t,r)=>{let i,a,s;const l={};if(n=n||{},e==null)return n;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)s=i[a],(!r||r(s,e,n))&&!l[s]&&(n[s]=e[s],l[s]=!0);e=t!==!1&&kA(e)}while(e&&(!t||t(e,n))&&e!==Object.prototype);return n},dZ=(e,n,t)=>{e=String(e),(t===void 0||t>e.length)&&(t=e.length),t-=n.length;const r=e.indexOf(n,t);return r!==-1&&r===t},fZ=e=>{if(!e)return null;if(hm(e))return e;let n=e.length;if(!vD(n))return null;const t=new Array(n);for(;n-- >0;)t[n]=e[n];return t},hZ=(e=>n=>e&&n instanceof e)(typeof Uint8Array<"u"&&kA(Uint8Array)),pZ=(e,n)=>{const r=(e&&e[Dv]).call(e);let i;for(;(i=r.next())&&!i.done;){const a=i.value;n.call(e,a[0],a[1])}},mZ=(e,n)=>{let t;const r=[];for(;(t=e.exec(n))!==null;)r.push(t);return r},gZ=_u("HTMLFormElement"),bZ=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),l_=(({hasOwnProperty:e})=>(n,t)=>e.call(n,t))(Object.prototype),yZ=_u("RegExp"),AD=(e,n)=>{const t=Object.getOwnPropertyDescriptors(e),r={};Kg(t,(i,a)=>{let s;(s=n(i,a,e))!==!1&&(r[a]=s||i)}),Object.defineProperties(e,r)},xZ=e=>{AD(e,(n,t)=>{if(go(e)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=e[t];if(go(r)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},vZ=(e,n)=>{const t={},r=i=>{i.forEach(a=>{t[a]=!0})};return hm(e)?r(e):r(String(e).split(n)),t},wZ=()=>{},SZ=(e,n)=>e!=null&&Number.isFinite(e=+e)?e:n;function AZ(e){return!!(e&&go(e.append)&&e[yD]==="FormData"&&e[Dv])}const CZ=e=>{const n=new Array(10),t=(r,i)=>{if(Rv(r)){if(n.indexOf(r)>=0)return;if(!("toJSON"in r)){n[i]=r;const a=hm(r)?[]:{};return Kg(r,(s,l)=>{const u=t(s,i+1);!xg(u)&&(a[l]=u)}),n[i]=void 0,a}}return r};return t(e,0)},kZ=_u("AsyncFunction"),EZ=e=>e&&(Rv(e)||go(e))&&go(e.then)&&go(e.catch),CD=((e,n)=>e?setImmediate:n?((t,r)=>(Vh.addEventListener("message",({source:i,data:a})=>{i===Vh&&a===t&&r.length&&r.shift()()},!1),i=>{r.push(i),Vh.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",go(Vh.postMessage)),_Z=typeof queueMicrotask<"u"?queueMicrotask.bind(Vh):typeof process<"u"&&process.nextTick||CD,NZ=e=>e!=null&&go(e[Dv]),ot={isArray:hm,isArrayBuffer:xD,isBuffer:WX,isFormData:eZ,isArrayBufferView:VX,isString:YX,isNumber:vD,isBoolean:GX,isObject:Rv,isPlainObject:rx,isReadableStream:nZ,isRequest:rZ,isResponse:iZ,isHeaders:aZ,isUndefined:xg,isDate:QX,isFile:KX,isBlob:XX,isRegExp:yZ,isFunction:go,isStream:JX,isURLSearchParams:tZ,isTypedArray:hZ,isFileList:ZX,forEach:Kg,merge:YS,extend:oZ,trim:sZ,stripBOM:lZ,inherits:uZ,toFlatObject:cZ,kindOf:Iv,kindOfTest:_u,endsWith:dZ,toArray:fZ,forEachEntry:pZ,matchAll:mZ,isHTMLForm:gZ,hasOwnProperty:l_,hasOwnProp:l_,reduceDescriptors:AD,freezeMethods:xZ,toObjectSet:vZ,toCamelCase:bZ,noop:wZ,toFiniteNumber:SZ,findKey:wD,global:Vh,isContextDefined:SD,isSpecCompliantForm:AZ,toJSONObject:CZ,isAsyncFn:kZ,isThenable:EZ,setImmediate:CD,asap:_Z,isIterable:NZ};function Nn(e,n,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",n&&(this.code=n),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}ot.inherits(Nn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ot.toJSONObject(this.config),code:this.code,status:this.status}}});const kD=Nn.prototype,ED={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{ED[e]={value:e}});Object.defineProperties(Nn,ED);Object.defineProperty(kD,"isAxiosError",{value:!0});Nn.from=(e,n,t,r,i,a)=>{const s=Object.create(kD);return ot.toFlatObject(e,s,function(u){return u!==Error.prototype},l=>l!=="isAxiosError"),Nn.call(s,e.message,n,t,r,i),s.cause=e,s.name=e.name,a&&Object.assign(s,a),s};const jZ=null;function GS(e){return ot.isPlainObject(e)||ot.isArray(e)}function _D(e){return ot.endsWith(e,"[]")?e.slice(0,-2):e}function u_(e,n,t){return e?e.concat(n).map(function(i,a){return i=_D(i),!t&&a?"["+i+"]":i}).join(t?".":""):n}function TZ(e){return ot.isArray(e)&&!e.some(GS)}const OZ=ot.toFlatObject(ot,{},null,function(n){return/^is[A-Z]/.test(n)});function Mv(e,n,t){if(!ot.isObject(e))throw new TypeError("target must be an object");n=n||new FormData,t=ot.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,A){return!ot.isUndefined(A[y])});const r=t.metaTokens,i=t.visitor||f,a=t.dots,s=t.indexes,u=(t.Blob||typeof Blob<"u"&&Blob)&&ot.isSpecCompliantForm(n);if(!ot.isFunction(i))throw new TypeError("visitor must be a function");function d(x){if(x===null)return"";if(ot.isDate(x))return x.toISOString();if(ot.isBoolean(x))return x.toString();if(!u&&ot.isBlob(x))throw new Nn("Blob is not supported. Use a Buffer instead.");return ot.isArrayBuffer(x)||ot.isTypedArray(x)?u&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function f(x,y,A){let w=x;if(x&&!A&&typeof x=="object"){if(ot.endsWith(y,"{}"))y=r?y:y.slice(0,-2),x=JSON.stringify(x);else if(ot.isArray(x)&&TZ(x)||(ot.isFileList(x)||ot.endsWith(y,"[]"))&&(w=ot.toArray(x)))return y=_D(y),w.forEach(function(j,F){!(ot.isUndefined(j)||j===null)&&n.append(s===!0?u_([y],F,a):s===null?y:y+"[]",d(j))}),!1}return GS(x)?!0:(n.append(u_(A,y,a),d(x)),!1)}const m=[],b=Object.assign(OZ,{defaultVisitor:f,convertValue:d,isVisitable:GS});function g(x,y){if(!ot.isUndefined(x)){if(m.indexOf(x)!==-1)throw Error("Circular reference detected in "+y.join("."));m.push(x),ot.forEach(x,function(w,C){(!(ot.isUndefined(w)||w===null)&&i.call(n,w,ot.isString(C)?C.trim():C,y,b))===!0&&g(w,y?y.concat(C):[C])}),m.pop()}}if(!ot.isObject(e))throw new TypeError("data must be an object");return g(e),n}function c_(e){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return n[r]})}function EA(e,n){this._pairs=[],e&&Mv(e,this,n)}const ND=EA.prototype;ND.append=function(n,t){this._pairs.push([n,t])};ND.toString=function(n){const t=n?function(r){return n.call(this,r,c_)}:c_;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function DZ(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function jD(e,n,t){if(!n)return e;const r=t&&t.encode||DZ;ot.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let a;if(i?a=i(n,t):a=ot.isURLSearchParams(n)?n.toString():new EA(n,t).toString(r),a){const s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class d_{constructor(){this.handlers=[]}use(n,t,r){return this.handlers.push({fulfilled:n,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){ot.forEach(this.handlers,function(r){r!==null&&n(r)})}}const TD={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},IZ=typeof URLSearchParams<"u"?URLSearchParams:EA,LZ=typeof FormData<"u"?FormData:null,RZ=typeof Blob<"u"?Blob:null,MZ={isBrowser:!0,classes:{URLSearchParams:IZ,FormData:LZ,Blob:RZ},protocols:["http","https","file","blob","url","data"]},_A=typeof window<"u"&&typeof document<"u",QS=typeof navigator=="object"&&navigator||void 0,FZ=_A&&(!QS||["ReactNative","NativeScript","NS"].indexOf(QS.product)<0),PZ=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",zZ=_A&&window.location.href||"http://localhost",qZ=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:_A,hasStandardBrowserEnv:FZ,hasStandardBrowserWebWorkerEnv:PZ,navigator:QS,origin:zZ},Symbol.toStringTag,{value:"Module"})),Ps={...qZ,...MZ};function BZ(e,n){return Mv(e,new Ps.classes.URLSearchParams,Object.assign({visitor:function(t,r,i,a){return Ps.isNode&&ot.isBuffer(t)?(this.append(r,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},n))}function $Z(e){return ot.matchAll(/\w+|\[(\w*)]/g,e).map(n=>n[0]==="[]"?"":n[1]||n[0])}function UZ(e){const n={},t=Object.keys(e);let r;const i=t.length;let a;for(r=0;r<i;r++)a=t[r],n[a]=e[a];return n}function OD(e){function n(t,r,i,a){let s=t[a++];if(s==="__proto__")return!0;const l=Number.isFinite(+s),u=a>=t.length;return s=!s&&ot.isArray(i)?i.length:s,u?(ot.hasOwnProp(i,s)?i[s]=[i[s],r]:i[s]=r,!l):((!i[s]||!ot.isObject(i[s]))&&(i[s]=[]),n(t,r,i[s],a)&&ot.isArray(i[s])&&(i[s]=UZ(i[s])),!l)}if(ot.isFormData(e)&&ot.isFunction(e.entries)){const t={};return ot.forEachEntry(e,(r,i)=>{n($Z(r),i,t,0)}),t}return null}function HZ(e,n,t){if(ot.isString(e))try{return(n||JSON.parse)(e),ot.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(e)}const Xg={transitional:TD,adapter:["xhr","http","fetch"],transformRequest:[function(n,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,a=ot.isObject(n);if(a&&ot.isHTMLForm(n)&&(n=new FormData(n)),ot.isFormData(n))return i?JSON.stringify(OD(n)):n;if(ot.isArrayBuffer(n)||ot.isBuffer(n)||ot.isStream(n)||ot.isFile(n)||ot.isBlob(n)||ot.isReadableStream(n))return n;if(ot.isArrayBufferView(n))return n.buffer;if(ot.isURLSearchParams(n))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let l;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return BZ(n,this.formSerializer).toString();if((l=ot.isFileList(n))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Mv(l?{"files[]":n}:n,u&&new u,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),HZ(n)):n}],transformResponse:[function(n){const t=this.transitional||Xg.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(ot.isResponse(n)||ot.isReadableStream(n))return n;if(n&&ot.isString(n)&&(r&&!this.responseType||i)){const s=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(n)}catch(l){if(s)throw l.name==="SyntaxError"?Nn.from(l,Nn.ERR_BAD_RESPONSE,this,null,this.response):l}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ps.classes.FormData,Blob:Ps.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ot.forEach(["delete","get","head","post","put","patch"],e=>{Xg.headers[e]={}});const WZ=ot.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),VZ=e=>{const n={};let t,r,i;return e&&e.split(`
`).forEach(function(s){i=s.indexOf(":"),t=s.substring(0,i).trim().toLowerCase(),r=s.substring(i+1).trim(),!(!t||n[t]&&WZ[t])&&(t==="set-cookie"?n[t]?n[t].push(r):n[t]=[r]:n[t]=n[t]?n[t]+", "+r:r)}),n},f_=Symbol("internals");function k1(e){return e&&String(e).trim().toLowerCase()}function ix(e){return e===!1||e==null?e:ot.isArray(e)?e.map(ix):String(e)}function YZ(e){const n=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(e);)n[r[1]]=r[2];return n}const GZ=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function yw(e,n,t,r,i){if(ot.isFunction(r))return r.call(this,n,t);if(i&&(n=t),!!ot.isString(n)){if(ot.isString(r))return n.indexOf(r)!==-1;if(ot.isRegExp(r))return r.test(n)}}function QZ(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,t,r)=>t.toUpperCase()+r)}function KZ(e,n){const t=ot.toCamelCase(" "+n);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+t,{value:function(i,a,s){return this[r].call(this,n,i,a,s)},configurable:!0})})}let bo=class{constructor(n){n&&this.set(n)}set(n,t,r){const i=this;function a(l,u,d){const f=k1(u);if(!f)throw new Error("header name must be a non-empty string");const m=ot.findKey(i,f);(!m||i[m]===void 0||d===!0||d===void 0&&i[m]!==!1)&&(i[m||u]=ix(l))}const s=(l,u)=>ot.forEach(l,(d,f)=>a(d,f,u));if(ot.isPlainObject(n)||n instanceof this.constructor)s(n,t);else if(ot.isString(n)&&(n=n.trim())&&!GZ(n))s(VZ(n),t);else if(ot.isObject(n)&&ot.isIterable(n)){let l={},u,d;for(const f of n){if(!ot.isArray(f))throw TypeError("Object iterator must return a key-value pair");l[d=f[0]]=(u=l[d])?ot.isArray(u)?[...u,f[1]]:[u,f[1]]:f[1]}s(l,t)}else n!=null&&a(t,n,r);return this}get(n,t){if(n=k1(n),n){const r=ot.findKey(this,n);if(r){const i=this[r];if(!t)return i;if(t===!0)return YZ(i);if(ot.isFunction(t))return t.call(this,i,r);if(ot.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,t){if(n=k1(n),n){const r=ot.findKey(this,n);return!!(r&&this[r]!==void 0&&(!t||yw(this,this[r],r,t)))}return!1}delete(n,t){const r=this;let i=!1;function a(s){if(s=k1(s),s){const l=ot.findKey(r,s);l&&(!t||yw(r,r[l],l,t))&&(delete r[l],i=!0)}}return ot.isArray(n)?n.forEach(a):a(n),i}clear(n){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const a=t[r];(!n||yw(this,this[a],a,n,!0))&&(delete this[a],i=!0)}return i}normalize(n){const t=this,r={};return ot.forEach(this,(i,a)=>{const s=ot.findKey(r,a);if(s){t[s]=ix(i),delete t[a];return}const l=n?QZ(a):String(a).trim();l!==a&&delete t[a],t[l]=ix(i),r[l]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const t=Object.create(null);return ot.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=n&&ot.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,t])=>n+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...t){const r=new this(n);return t.forEach(i=>r.set(i)),r}static accessor(n){const r=(this[f_]=this[f_]={accessors:{}}).accessors,i=this.prototype;function a(s){const l=k1(s);r[l]||(KZ(i,s),r[l]=!0)}return ot.isArray(n)?n.forEach(a):a(n),this}};bo.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ot.reduceDescriptors(bo.prototype,({value:e},n)=>{let t=n[0].toUpperCase()+n.slice(1);return{get:()=>e,set(r){this[t]=r}}});ot.freezeMethods(bo);function xw(e,n){const t=this||Xg,r=n||t,i=bo.from(r.headers);let a=r.data;return ot.forEach(e,function(l){a=l.call(t,a,i.normalize(),n?n.status:void 0)}),i.normalize(),a}function DD(e){return!!(e&&e.__CANCEL__)}function pm(e,n,t){Nn.call(this,e??"canceled",Nn.ERR_CANCELED,n,t),this.name="CanceledError"}ot.inherits(pm,Nn,{__CANCEL__:!0});function ID(e,n,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?e(t):n(new Nn("Request failed with status code "+t.status,[Nn.ERR_BAD_REQUEST,Nn.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function XZ(e){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}function ZZ(e,n){e=e||10;const t=new Array(e),r=new Array(e);let i=0,a=0,s;return n=n!==void 0?n:1e3,function(u){const d=Date.now(),f=r[a];s||(s=d),t[i]=u,r[i]=d;let m=a,b=0;for(;m!==i;)b+=t[m++],m=m%e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),d-s<n)return;const g=f&&d-f;return g?Math.round(b*1e3/g):void 0}}function JZ(e,n){let t=0,r=1e3/n,i,a;const s=(d,f=Date.now())=>{t=f,i=null,a&&(clearTimeout(a),a=null),e.apply(null,d)};return[(...d)=>{const f=Date.now(),m=f-t;m>=r?s(d,f):(i=d,a||(a=setTimeout(()=>{a=null,s(i)},r-m)))},()=>i&&s(i)]}const Wx=(e,n,t=3)=>{let r=0;const i=ZZ(50,250);return JZ(a=>{const s=a.loaded,l=a.lengthComputable?a.total:void 0,u=s-r,d=i(u),f=s<=l;r=s;const m={loaded:s,total:l,progress:l?s/l:void 0,bytes:u,rate:d||void 0,estimated:d&&l&&f?(l-s)/d:void 0,event:a,lengthComputable:l!=null,[n?"download":"upload"]:!0};e(m)},t)},h_=(e,n)=>{const t=e!=null;return[r=>n[0]({lengthComputable:t,total:e,loaded:r}),n[1]]},p_=e=>(...n)=>ot.asap(()=>e(...n)),eJ=Ps.hasStandardBrowserEnv?((e,n)=>t=>(t=new URL(t,Ps.origin),e.protocol===t.protocol&&e.host===t.host&&(n||e.port===t.port)))(new URL(Ps.origin),Ps.navigator&&/(msie|trident)/i.test(Ps.navigator.userAgent)):()=>!0,tJ=Ps.hasStandardBrowserEnv?{write(e,n,t,r,i,a){const s=[e+"="+encodeURIComponent(n)];ot.isNumber(t)&&s.push("expires="+new Date(t).toGMTString()),ot.isString(r)&&s.push("path="+r),ot.isString(i)&&s.push("domain="+i),a===!0&&s.push("secure"),document.cookie=s.join("; ")},read(e){const n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function nJ(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function rJ(e,n){return n?e.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):e}function LD(e,n,t){let r=!nJ(n);return e&&(r||t==!1)?rJ(e,n):n}const m_=e=>e instanceof bo?{...e}:e;function fp(e,n){n=n||{};const t={};function r(d,f,m,b){return ot.isPlainObject(d)&&ot.isPlainObject(f)?ot.merge.call({caseless:b},d,f):ot.isPlainObject(f)?ot.merge({},f):ot.isArray(f)?f.slice():f}function i(d,f,m,b){if(ot.isUndefined(f)){if(!ot.isUndefined(d))return r(void 0,d,m,b)}else return r(d,f,m,b)}function a(d,f){if(!ot.isUndefined(f))return r(void 0,f)}function s(d,f){if(ot.isUndefined(f)){if(!ot.isUndefined(d))return r(void 0,d)}else return r(void 0,f)}function l(d,f,m){if(m in n)return r(d,f);if(m in e)return r(void 0,d)}const u={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:l,headers:(d,f,m)=>i(m_(d),m_(f),m,!0)};return ot.forEach(Object.keys(Object.assign({},e,n)),function(f){const m=u[f]||i,b=m(e[f],n[f],f);ot.isUndefined(b)&&m!==l||(t[f]=b)}),t}const RD=e=>{const n=fp({},e);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:a,headers:s,auth:l}=n;n.headers=s=bo.from(s),n.url=jD(LD(n.baseURL,n.url,n.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&s.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let u;if(ot.isFormData(t)){if(Ps.hasStandardBrowserEnv||Ps.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((u=s.getContentType())!==!1){const[d,...f]=u?u.split(";").map(m=>m.trim()).filter(Boolean):[];s.setContentType([d||"multipart/form-data",...f].join("; "))}}if(Ps.hasStandardBrowserEnv&&(r&&ot.isFunction(r)&&(r=r(n)),r||r!==!1&&eJ(n.url))){const d=i&&a&&tJ.read(a);d&&s.set(i,d)}return n},iJ=typeof XMLHttpRequest<"u",aJ=iJ&&function(e){return new Promise(function(t,r){const i=RD(e);let a=i.data;const s=bo.from(i.headers).normalize();let{responseType:l,onUploadProgress:u,onDownloadProgress:d}=i,f,m,b,g,x;function y(){g&&g(),x&&x(),i.cancelToken&&i.cancelToken.unsubscribe(f),i.signal&&i.signal.removeEventListener("abort",f)}let A=new XMLHttpRequest;A.open(i.method.toUpperCase(),i.url,!0),A.timeout=i.timeout;function w(){if(!A)return;const j=bo.from("getAllResponseHeaders"in A&&A.getAllResponseHeaders()),M={data:!l||l==="text"||l==="json"?A.responseText:A.response,status:A.status,statusText:A.statusText,headers:j,config:e,request:A};ID(function(_){t(_),y()},function(_){r(_),y()},M),A=null}"onloadend"in A?A.onloadend=w:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(w)},A.onabort=function(){A&&(r(new Nn("Request aborted",Nn.ECONNABORTED,e,A)),A=null)},A.onerror=function(){r(new Nn("Network Error",Nn.ERR_NETWORK,e,A)),A=null},A.ontimeout=function(){let F=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const M=i.transitional||TD;i.timeoutErrorMessage&&(F=i.timeoutErrorMessage),r(new Nn(F,M.clarifyTimeoutError?Nn.ETIMEDOUT:Nn.ECONNABORTED,e,A)),A=null},a===void 0&&s.setContentType(null),"setRequestHeader"in A&&ot.forEach(s.toJSON(),function(F,M){A.setRequestHeader(M,F)}),ot.isUndefined(i.withCredentials)||(A.withCredentials=!!i.withCredentials),l&&l!=="json"&&(A.responseType=i.responseType),d&&([b,x]=Wx(d,!0),A.addEventListener("progress",b)),u&&A.upload&&([m,g]=Wx(u),A.upload.addEventListener("progress",m),A.upload.addEventListener("loadend",g)),(i.cancelToken||i.signal)&&(f=j=>{A&&(r(!j||j.type?new pm(null,e,A):j),A.abort(),A=null)},i.cancelToken&&i.cancelToken.subscribe(f),i.signal&&(i.signal.aborted?f():i.signal.addEventListener("abort",f)));const C=XZ(i.url);if(C&&Ps.protocols.indexOf(C)===-1){r(new Nn("Unsupported protocol "+C+":",Nn.ERR_BAD_REQUEST,e));return}A.send(a||null)})},sJ=(e,n)=>{const{length:t}=e=e?e.filter(Boolean):[];if(n||t){let r=new AbortController,i;const a=function(d){if(!i){i=!0,l();const f=d instanceof Error?d:this.reason;r.abort(f instanceof Nn?f:new pm(f instanceof Error?f.message:f))}};let s=n&&setTimeout(()=>{s=null,a(new Nn(`timeout ${n} of ms exceeded`,Nn.ETIMEDOUT))},n);const l=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(a):d.removeEventListener("abort",a)}),e=null)};e.forEach(d=>d.addEventListener("abort",a));const{signal:u}=r;return u.unsubscribe=()=>ot.asap(l),u}},oJ=function*(e,n){let t=e.byteLength;if(t<n){yield e;return}let r=0,i;for(;r<t;)i=r+n,yield e.slice(r,i),r=i},lJ=async function*(e,n){for await(const t of uJ(e))yield*oJ(t,n)},uJ=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const n=e.getReader();try{for(;;){const{done:t,value:r}=await n.read();if(t)break;yield r}}finally{await n.cancel()}},g_=(e,n,t,r)=>{const i=lJ(e,n);let a=0,s,l=u=>{s||(s=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:d,value:f}=await i.next();if(d){l(),u.close();return}let m=f.byteLength;if(t){let b=a+=m;t(b)}u.enqueue(new Uint8Array(f))}catch(d){throw l(d),d}},cancel(u){return l(u),i.return()}},{highWaterMark:2})},Fv=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",MD=Fv&&typeof ReadableStream=="function",cJ=Fv&&(typeof TextEncoder=="function"?(e=>n=>e.encode(n))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),FD=(e,...n)=>{try{return!!e(...n)}catch{return!1}},dJ=MD&&FD(()=>{let e=!1;const n=new Request(Ps.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!n}),b_=64*1024,KS=MD&&FD(()=>ot.isReadableStream(new Response("").body)),Vx={stream:KS&&(e=>e.body)};Fv&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(n=>{!Vx[n]&&(Vx[n]=ot.isFunction(e[n])?t=>t[n]():(t,r)=>{throw new Nn(`Response type '${n}' is not supported`,Nn.ERR_NOT_SUPPORT,r)})})})(new Response);const fJ=async e=>{if(e==null)return 0;if(ot.isBlob(e))return e.size;if(ot.isSpecCompliantForm(e))return(await new Request(Ps.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(ot.isArrayBufferView(e)||ot.isArrayBuffer(e))return e.byteLength;if(ot.isURLSearchParams(e)&&(e=e+""),ot.isString(e))return(await cJ(e)).byteLength},hJ=async(e,n)=>{const t=ot.toFiniteNumber(e.getContentLength());return t??fJ(n)},pJ=Fv&&(async e=>{let{url:n,method:t,data:r,signal:i,cancelToken:a,timeout:s,onDownloadProgress:l,onUploadProgress:u,responseType:d,headers:f,withCredentials:m="same-origin",fetchOptions:b}=RD(e);d=d?(d+"").toLowerCase():"text";let g=sJ([i,a&&a.toAbortSignal()],s),x;const y=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let A;try{if(u&&dJ&&t!=="get"&&t!=="head"&&(A=await hJ(f,r))!==0){let M=new Request(n,{method:"POST",body:r,duplex:"half"}),z;if(ot.isFormData(r)&&(z=M.headers.get("content-type"))&&f.setContentType(z),M.body){const[_,L]=h_(A,Wx(p_(u)));r=g_(M.body,b_,_,L)}}ot.isString(m)||(m=m?"include":"omit");const w="credentials"in Request.prototype;x=new Request(n,{...b,signal:g,method:t.toUpperCase(),headers:f.normalize().toJSON(),body:r,duplex:"half",credentials:w?m:void 0});let C=await fetch(x,b);const j=KS&&(d==="stream"||d==="response");if(KS&&(l||j&&y)){const M={};["status","statusText","headers"].forEach($=>{M[$]=C[$]});const z=ot.toFiniteNumber(C.headers.get("content-length")),[_,L]=l&&h_(z,Wx(p_(l),!0))||[];C=new Response(g_(C.body,b_,_,()=>{L&&L(),y&&y()}),M)}d=d||"text";let F=await Vx[ot.findKey(Vx,d)||"text"](C,e);return!j&&y&&y(),await new Promise((M,z)=>{ID(M,z,{data:F,headers:bo.from(C.headers),status:C.status,statusText:C.statusText,config:e,request:x})})}catch(w){throw y&&y(),w&&w.name==="TypeError"&&/Load failed|fetch/i.test(w.message)?Object.assign(new Nn("Network Error",Nn.ERR_NETWORK,e,x),{cause:w.cause||w}):Nn.from(w,w&&w.code,e,x)}}),XS={http:jZ,xhr:aJ,fetch:pJ};ot.forEach(XS,(e,n)=>{if(e){try{Object.defineProperty(e,"name",{value:n})}catch{}Object.defineProperty(e,"adapterName",{value:n})}});const y_=e=>`- ${e}`,mJ=e=>ot.isFunction(e)||e===null||e===!1,PD={getAdapter:e=>{e=ot.isArray(e)?e:[e];const{length:n}=e;let t,r;const i={};for(let a=0;a<n;a++){t=e[a];let s;if(r=t,!mJ(t)&&(r=XS[(s=String(t)).toLowerCase()],r===void 0))throw new Nn(`Unknown adapter '${s}'`);if(r)break;i[s||"#"+a]=r}if(!r){const a=Object.entries(i).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let s=n?a.length>1?`since :
`+a.map(y_).join(`
`):" "+y_(a[0]):"as no adapter specified";throw new Nn("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return r},adapters:XS};function vw(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new pm(null,e)}function x_(e){return vw(e),e.headers=bo.from(e.headers),e.data=xw.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),PD.getAdapter(e.adapter||Xg.adapter)(e).then(function(r){return vw(e),r.data=xw.call(e,e.transformResponse,r),r.headers=bo.from(r.headers),r},function(r){return DD(r)||(vw(e),r&&r.response&&(r.response.data=xw.call(e,e.transformResponse,r.response),r.response.headers=bo.from(r.response.headers))),Promise.reject(r)})}const zD="1.10.0",Pv={};["object","boolean","number","function","string","symbol"].forEach((e,n)=>{Pv[e]=function(r){return typeof r===e||"a"+(n<1?"n ":" ")+e}});const v_={};Pv.transitional=function(n,t,r){function i(a,s){return"[Axios v"+zD+"] Transitional option '"+a+"'"+s+(r?". "+r:"")}return(a,s,l)=>{if(n===!1)throw new Nn(i(s," has been removed"+(t?" in "+t:"")),Nn.ERR_DEPRECATED);return t&&!v_[s]&&(v_[s]=!0,console.warn(i(s," has been deprecated since v"+t+" and will be removed in the near future"))),n?n(a,s,l):!0}};Pv.spelling=function(n){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${n}`),!0)};function gJ(e,n,t){if(typeof e!="object")throw new Nn("options must be an object",Nn.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const a=r[i],s=n[a];if(s){const l=e[a],u=l===void 0||s(l,a,e);if(u!==!0)throw new Nn("option "+a+" must be "+u,Nn.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Nn("Unknown option "+a,Nn.ERR_BAD_OPTION)}}const ax={assertOptions:gJ,validators:Pv},nc=ax.validators;let np=class{constructor(n){this.defaults=n||{},this.interceptors={request:new d_,response:new d_}}async request(n,t){try{return await this._request(n,t)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(n,t){typeof n=="string"?(t=t||{},t.url=n):t=n||{},t=fp(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:a}=t;r!==void 0&&ax.assertOptions(r,{silentJSONParsing:nc.transitional(nc.boolean),forcedJSONParsing:nc.transitional(nc.boolean),clarifyTimeoutError:nc.transitional(nc.boolean)},!1),i!=null&&(ot.isFunction(i)?t.paramsSerializer={serialize:i}:ax.assertOptions(i,{encode:nc.function,serialize:nc.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),ax.assertOptions(t,{baseUrl:nc.spelling("baseURL"),withXsrfToken:nc.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=a&&ot.merge(a.common,a[t.method]);a&&ot.forEach(["delete","get","head","post","put","patch","common"],x=>{delete a[x]}),t.headers=bo.concat(s,a);const l=[];let u=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(t)===!1||(u=u&&y.synchronous,l.unshift(y.fulfilled,y.rejected))});const d=[];this.interceptors.response.forEach(function(y){d.push(y.fulfilled,y.rejected)});let f,m=0,b;if(!u){const x=[x_.bind(this),void 0];for(x.unshift.apply(x,l),x.push.apply(x,d),b=x.length,f=Promise.resolve(t);m<b;)f=f.then(x[m++],x[m++]);return f}b=l.length;let g=t;for(m=0;m<b;){const x=l[m++],y=l[m++];try{g=x(g)}catch(A){y.call(this,A);break}}try{f=x_.call(this,g)}catch(x){return Promise.reject(x)}for(m=0,b=d.length;m<b;)f=f.then(d[m++],d[m++]);return f}getUri(n){n=fp(this.defaults,n);const t=LD(n.baseURL,n.url,n.allowAbsoluteUrls);return jD(t,n.params,n.paramsSerializer)}};ot.forEach(["delete","get","head","options"],function(n){np.prototype[n]=function(t,r){return this.request(fp(r||{},{method:n,url:t,data:(r||{}).data}))}});ot.forEach(["post","put","patch"],function(n){function t(r){return function(a,s,l){return this.request(fp(l||{},{method:n,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:s}))}}np.prototype[n]=t(),np.prototype[n+"Form"]=t(!0)});let bJ=class qD{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});const r=this;this.promise.then(i=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](i);r._listeners=null}),this.promise.then=i=>{let a;const s=new Promise(l=>{r.subscribe(l),a=l}).then(i);return s.cancel=function(){r.unsubscribe(a)},s},n(function(a,s,l){r.reason||(r.reason=new pm(a,s,l),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const t=this._listeners.indexOf(n);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const n=new AbortController,t=r=>{n.abort(r)};return this.subscribe(t),n.signal.unsubscribe=()=>this.unsubscribe(t),n.signal}static source(){let n;return{token:new qD(function(i){n=i}),cancel:n}}};function yJ(e){return function(t){return e.apply(null,t)}}function xJ(e){return ot.isObject(e)&&e.isAxiosError===!0}const ZS={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ZS).forEach(([e,n])=>{ZS[n]=e});function BD(e){const n=new np(e),t=bD(np.prototype.request,n);return ot.extend(t,np.prototype,n,{allOwnKeys:!0}),ot.extend(t,n,null,{allOwnKeys:!0}),t.create=function(i){return BD(fp(e,i))},t}const ba=BD(Xg);ba.Axios=np;ba.CanceledError=pm;ba.CancelToken=bJ;ba.isCancel=DD;ba.VERSION=zD;ba.toFormData=Mv;ba.AxiosError=Nn;ba.Cancel=ba.CanceledError;ba.all=function(n){return Promise.all(n)};ba.spread=yJ;ba.isAxiosError=xJ;ba.mergeConfig=fp;ba.AxiosHeaders=bo;ba.formToJSON=e=>OD(ot.isHTMLForm(e)?new FormData(e):e);ba.getAdapter=PD.getAdapter;ba.HttpStatusCode=ZS;ba.default=ba;const{Axios:jhe,AxiosError:The,CanceledError:Ohe,isCancel:Dhe,CancelToken:Ihe,VERSION:Lhe,all:Rhe,Cancel:Mhe,isAxiosError:Fhe,spread:Phe,toFormData:zhe,AxiosHeaders:qhe,HttpStatusCode:Bhe,formToJSON:$he,getAdapter:Uhe,mergeConfig:Hhe}=ba;function Ry(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ww={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var w_;function vJ(){return w_||(w_=1,function(e,n){(function(t){e.exports=t()})(function(){return function t(r,i,a){function s(d,f){if(!i[d]){if(!r[d]){var m=typeof Ry=="function"&&Ry;if(!f&&m)return m(d,!0);if(l)return l(d,!0);var b=new Error("Cannot find module '"+d+"'");throw b.code="MODULE_NOT_FOUND",b}var g=i[d]={exports:{}};r[d][0].call(g.exports,function(x){var y=r[d][1][x];return s(y||x)},g,g.exports,t,r,i,a)}return i[d].exports}for(var l=typeof Ry=="function"&&Ry,u=0;u<a.length;u++)s(a[u]);return s}({1:[function(t,r,i){var a=t("./utils"),s=t("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(u){for(var d,f,m,b,g,x,y,A=[],w=0,C=u.length,j=C,F=a.getTypeOf(u)!=="string";w<u.length;)j=C-w,m=F?(d=u[w++],f=w<C?u[w++]:0,w<C?u[w++]:0):(d=u.charCodeAt(w++),f=w<C?u.charCodeAt(w++):0,w<C?u.charCodeAt(w++):0),b=d>>2,g=(3&d)<<4|f>>4,x=1<j?(15&f)<<2|m>>6:64,y=2<j?63&m:64,A.push(l.charAt(b)+l.charAt(g)+l.charAt(x)+l.charAt(y));return A.join("")},i.decode=function(u){var d,f,m,b,g,x,y=0,A=0,w="data:";if(u.substr(0,w.length)===w)throw new Error("Invalid base64 input, it looks like a data url.");var C,j=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===l.charAt(64)&&j--,u.charAt(u.length-2)===l.charAt(64)&&j--,j%1!=0)throw new Error("Invalid base64 input, bad content length.");for(C=s.uint8array?new Uint8Array(0|j):new Array(0|j);y<u.length;)d=l.indexOf(u.charAt(y++))<<2|(b=l.indexOf(u.charAt(y++)))>>4,f=(15&b)<<4|(g=l.indexOf(u.charAt(y++)))>>2,m=(3&g)<<6|(x=l.indexOf(u.charAt(y++))),C[A++]=d,g!==64&&(C[A++]=f),x!==64&&(C[A++]=m);return C}},{"./support":30,"./utils":32}],2:[function(t,r,i){var a=t("./external"),s=t("./stream/DataWorker"),l=t("./stream/Crc32Probe"),u=t("./stream/DataLengthProbe");function d(f,m,b,g,x){this.compressedSize=f,this.uncompressedSize=m,this.crc32=b,this.compression=g,this.compressedContent=x}d.prototype={getContentWorker:function(){var f=new s(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),m=this;return f.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new s(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(f,m,b){return f.pipe(new l).pipe(new u("uncompressedSize")).pipe(m.compressWorker(b)).pipe(new u("compressedSize")).withStreamInfo("compression",m)},r.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,r,i){var a=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,r,i){var a=t("./utils"),s=function(){for(var l,u=[],d=0;d<256;d++){l=d;for(var f=0;f<8;f++)l=1&l?3988292384^l>>>1:l>>>1;u[d]=l}return u}();r.exports=function(l,u){return l!==void 0&&l.length?a.getTypeOf(l)!=="string"?function(d,f,m,b){var g=s,x=b+m;d^=-1;for(var y=b;y<x;y++)d=d>>>8^g[255&(d^f[y])];return-1^d}(0|u,l,l.length,0):function(d,f,m,b){var g=s,x=b+m;d^=-1;for(var y=b;y<x;y++)d=d>>>8^g[255&(d^f.charCodeAt(y))];return-1^d}(0|u,l,l.length,0):0}},{"./utils":32}],5:[function(t,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,r,i){var a=null;a=typeof Promise<"u"?Promise:t("lie"),r.exports={Promise:a}},{lie:37}],7:[function(t,r,i){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=t("pako"),l=t("./utils"),u=t("./stream/GenericWorker"),d=a?"uint8array":"array";function f(m,b){u.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=b,this.meta={}}i.magic="\b\0",l.inherits(f,u),f.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(d,m.data),!1)},f.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(b){m.push({data:b,meta:m.meta})}},i.compressWorker=function(m){return new f("Deflate",m)},i.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,r,i){function a(g,x){var y,A="";for(y=0;y<x;y++)A+=String.fromCharCode(255&g),g>>>=8;return A}function s(g,x,y,A,w,C){var j,F,M=g.file,z=g.compression,_=C!==d.utf8encode,L=l.transformTo("string",C(M.name)),$=l.transformTo("string",d.utf8encode(M.name)),Z=M.comment,O=l.transformTo("string",C(Z)),T=l.transformTo("string",d.utf8encode(Z)),R=$.length!==M.name.length,N=T.length!==Z.length,G="",W="",Q="",J=M.dir,se=M.date,U={crc32:0,compressedSize:0,uncompressedSize:0};x&&!y||(U.crc32=g.crc32,U.compressedSize=g.compressedSize,U.uncompressedSize=g.uncompressedSize);var le=0;x&&(le|=8),_||!R&&!N||(le|=2048);var q=0,B=0;J&&(q|=16),w==="UNIX"?(B=798,q|=function(re,oe){var Ce=re;return re||(Ce=oe?16893:33204),(65535&Ce)<<16}(M.unixPermissions,J)):(B=20,q|=function(re){return 63&(re||0)}(M.dosPermissions)),j=se.getUTCHours(),j<<=6,j|=se.getUTCMinutes(),j<<=5,j|=se.getUTCSeconds()/2,F=se.getUTCFullYear()-1980,F<<=4,F|=se.getUTCMonth()+1,F<<=5,F|=se.getUTCDate(),R&&(W=a(1,1)+a(f(L),4)+$,G+="up"+a(W.length,2)+W),N&&(Q=a(1,1)+a(f(O),4)+T,G+="uc"+a(Q.length,2)+Q);var ee="";return ee+=`
\0`,ee+=a(le,2),ee+=z.magic,ee+=a(j,2),ee+=a(F,2),ee+=a(U.crc32,4),ee+=a(U.compressedSize,4),ee+=a(U.uncompressedSize,4),ee+=a(L.length,2),ee+=a(G.length,2),{fileRecord:m.LOCAL_FILE_HEADER+ee+L+G,dirRecord:m.CENTRAL_FILE_HEADER+a(B,2)+ee+a(O.length,2)+"\0\0\0\0"+a(q,4)+a(A,4)+L+G+O}}var l=t("../utils"),u=t("../stream/GenericWorker"),d=t("../utf8"),f=t("../crc32"),m=t("../signature");function b(g,x,y,A){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=x,this.zipPlatform=y,this.encodeFileName=A,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(b,u),b.prototype.push=function(g){var x=g.meta.percent||0,y=this.entriesCount,A=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,u.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:y?(x+100*(y-A-1))/y:100}}))},b.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var x=this.streamFiles&&!g.file.dir;if(x){var y=s(g,x,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:y.fileRecord,meta:{percent:0}})}else this.accumulate=!0},b.prototype.closedSource=function(g){this.accumulate=!1;var x=this.streamFiles&&!g.file.dir,y=s(g,x,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(y.dirRecord),x)this.push({data:function(A){return m.DATA_DESCRIPTOR+a(A.crc32,4)+a(A.compressedSize,4)+a(A.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:y.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},b.prototype.flush=function(){for(var g=this.bytesWritten,x=0;x<this.dirRecords.length;x++)this.push({data:this.dirRecords[x],meta:{percent:100}});var y=this.bytesWritten-g,A=function(w,C,j,F,M){var z=l.transformTo("string",M(F));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(w,2)+a(w,2)+a(C,4)+a(j,4)+a(z.length,2)+z}(this.dirRecords.length,y,g,this.zipComment,this.encodeFileName);this.push({data:A,meta:{percent:100}})},b.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},b.prototype.registerPrevious=function(g){this._sources.push(g);var x=this;return g.on("data",function(y){x.processChunk(y)}),g.on("end",function(){x.closedSource(x.previous.streamInfo),x._sources.length?x.prepareNextSource():x.end()}),g.on("error",function(y){x.error(y)}),this},b.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},b.prototype.error=function(g){var x=this._sources;if(!u.prototype.error.call(this,g))return!1;for(var y=0;y<x.length;y++)try{x[y].error(g)}catch{}return!0},b.prototype.lock=function(){u.prototype.lock.call(this);for(var g=this._sources,x=0;x<g.length;x++)g[x].lock()},r.exports=b},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,r,i){var a=t("../compressions"),s=t("./ZipFileWorker");i.generateWorker=function(l,u,d){var f=new s(u.streamFiles,d,u.platform,u.encodeFileName),m=0;try{l.forEach(function(b,g){m++;var x=function(C,j){var F=C||j,M=a[F];if(!M)throw new Error(F+" is not a valid compression method !");return M}(g.options.compression,u.compression),y=g.options.compressionOptions||u.compressionOptions||{},A=g.dir,w=g.date;g._compressWorker(x,y).withStreamInfo("file",{name:b,dir:A,date:w,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(f)}),f.entriesCount=m}catch(b){f.error(b)}return f}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,r,i){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new a;for(var l in this)typeof this[l]!="function"&&(s[l]=this[l]);return s}}(a.prototype=t("./object")).loadAsync=t("./load"),a.support=t("./support"),a.defaults=t("./defaults"),a.version="3.10.1",a.loadAsync=function(s,l){return new a().loadAsync(s,l)},a.external=t("./external"),r.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,r,i){var a=t("./utils"),s=t("./external"),l=t("./utf8"),u=t("./zipEntries"),d=t("./stream/Crc32Probe"),f=t("./nodejsUtils");function m(b){return new s.Promise(function(g,x){var y=b.decompressed.getContentWorker().pipe(new d);y.on("error",function(A){x(A)}).on("end",function(){y.streamInfo.crc32!==b.decompressed.crc32?x(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}r.exports=function(b,g){var x=this;return g=a.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),f.isNode&&f.isStream(b)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",b,!0,g.optimizedBinaryString,g.base64).then(function(y){var A=new u(g);return A.load(y),A}).then(function(y){var A=[s.Promise.resolve(y)],w=y.files;if(g.checkCRC32)for(var C=0;C<w.length;C++)A.push(m(w[C]));return s.Promise.all(A)}).then(function(y){for(var A=y.shift(),w=A.files,C=0;C<w.length;C++){var j=w[C],F=j.fileNameStr,M=a.resolve(j.fileNameStr);x.file(M,j.decompressed,{binary:!0,optimizedBinaryString:!0,date:j.date,dir:j.dir,comment:j.fileCommentStr.length?j.fileCommentStr:null,unixPermissions:j.unixPermissions,dosPermissions:j.dosPermissions,createFolders:g.createFolders}),j.dir||(x.file(M).unsafeOriginalName=F)}return A.zipComment.length&&(x.comment=A.zipComment),x})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,r,i){var a=t("../utils"),s=t("../stream/GenericWorker");function l(u,d){s.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(d)}a.inherits(l,s),l.prototype._bindStream=function(u){var d=this;(this._stream=u).pause(),u.on("data",function(f){d.push({data:f,meta:{percent:0}})}).on("error",function(f){d.isPaused?this.generatedError=f:d.error(f)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},l.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,r,i){var a=t("readable-stream").Readable;function s(l,u,d){a.call(this,u),this._helper=l;var f=this;l.on("data",function(m,b){f.push(m)||f._helper.pause(),d&&d(b)}).on("error",function(m){f.emit("error",m)}).on("end",function(){f.push(null)})}t("../utils").inherits(s,a),s.prototype._read=function(){this._helper.resume()},r.exports=s},{"../utils":32,"readable-stream":16}],14:[function(t,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(a,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,s);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,s)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var s=new Buffer(a);return s.fill(0),s},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(t,r,i){function a(M,z,_){var L,$=l.getTypeOf(z),Z=l.extend(_||{},f);Z.date=Z.date||new Date,Z.compression!==null&&(Z.compression=Z.compression.toUpperCase()),typeof Z.unixPermissions=="string"&&(Z.unixPermissions=parseInt(Z.unixPermissions,8)),Z.unixPermissions&&16384&Z.unixPermissions&&(Z.dir=!0),Z.dosPermissions&&16&Z.dosPermissions&&(Z.dir=!0),Z.dir&&(M=w(M)),Z.createFolders&&(L=A(M))&&C.call(this,L,!0);var O=$==="string"&&Z.binary===!1&&Z.base64===!1;_&&_.binary!==void 0||(Z.binary=!O),(z instanceof m&&z.uncompressedSize===0||Z.dir||!z||z.length===0)&&(Z.base64=!1,Z.binary=!0,z="",Z.compression="STORE",$="string");var T=null;T=z instanceof m||z instanceof u?z:x.isNode&&x.isStream(z)?new y(M,z):l.prepareContent(M,z,Z.binary,Z.optimizedBinaryString,Z.base64);var R=new b(M,T,Z);this.files[M]=R}var s=t("./utf8"),l=t("./utils"),u=t("./stream/GenericWorker"),d=t("./stream/StreamHelper"),f=t("./defaults"),m=t("./compressedObject"),b=t("./zipObject"),g=t("./generate"),x=t("./nodejsUtils"),y=t("./nodejs/NodejsStreamInputAdapter"),A=function(M){M.slice(-1)==="/"&&(M=M.substring(0,M.length-1));var z=M.lastIndexOf("/");return 0<z?M.substring(0,z):""},w=function(M){return M.slice(-1)!=="/"&&(M+="/"),M},C=function(M,z){return z=z!==void 0?z:f.createFolders,M=w(M),this.files[M]||a.call(this,M,null,{dir:!0,createFolders:z}),this.files[M]};function j(M){return Object.prototype.toString.call(M)==="[object RegExp]"}var F={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(M){var z,_,L;for(z in this.files)L=this.files[z],(_=z.slice(this.root.length,z.length))&&z.slice(0,this.root.length)===this.root&&M(_,L)},filter:function(M){var z=[];return this.forEach(function(_,L){M(_,L)&&z.push(L)}),z},file:function(M,z,_){if(arguments.length!==1)return M=this.root+M,a.call(this,M,z,_),this;if(j(M)){var L=M;return this.filter(function(Z,O){return!O.dir&&L.test(Z)})}var $=this.files[this.root+M];return $&&!$.dir?$:null},folder:function(M){if(!M)return this;if(j(M))return this.filter(function($,Z){return Z.dir&&M.test($)});var z=this.root+M,_=C.call(this,z),L=this.clone();return L.root=_.name,L},remove:function(M){M=this.root+M;var z=this.files[M];if(z||(M.slice(-1)!=="/"&&(M+="/"),z=this.files[M]),z&&!z.dir)delete this.files[M];else for(var _=this.filter(function($,Z){return Z.name.slice(0,M.length)===M}),L=0;L<_.length;L++)delete this.files[_[L].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(M){var z,_={};try{if((_=l.extend(M||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=_.type.toLowerCase(),_.compression=_.compression.toUpperCase(),_.type==="binarystring"&&(_.type="string"),!_.type)throw new Error("No output type specified.");l.checkSupport(_.type),_.platform!=="darwin"&&_.platform!=="freebsd"&&_.platform!=="linux"&&_.platform!=="sunos"||(_.platform="UNIX"),_.platform==="win32"&&(_.platform="DOS");var L=_.comment||this.comment||"";z=g.generateWorker(this,_,L)}catch($){(z=new u("error")).error($)}return new d(z,_.type||"string",_.mimeType)},generateAsync:function(M,z){return this.generateInternalStream(M).accumulate(z)},generateNodeStream:function(M,z){return(M=M||{}).type||(M.type="nodebuffer"),this.generateInternalStream(M).toNodejsStream(z)}};r.exports=F},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,r,i){r.exports=t("stream")},{stream:void 0}],17:[function(t,r,i){var a=t("./DataReader");function s(l){a.call(this,l);for(var u=0;u<this.data.length;u++)l[u]=255&l[u]}t("../utils").inherits(s,a),s.prototype.byteAt=function(l){return this.data[this.zero+l]},s.prototype.lastIndexOfSignature=function(l){for(var u=l.charCodeAt(0),d=l.charCodeAt(1),f=l.charCodeAt(2),m=l.charCodeAt(3),b=this.length-4;0<=b;--b)if(this.data[b]===u&&this.data[b+1]===d&&this.data[b+2]===f&&this.data[b+3]===m)return b-this.zero;return-1},s.prototype.readAndCheckSignature=function(l){var u=l.charCodeAt(0),d=l.charCodeAt(1),f=l.charCodeAt(2),m=l.charCodeAt(3),b=this.readData(4);return u===b[0]&&d===b[1]&&f===b[2]&&m===b[3]},s.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},r.exports=s},{"../utils":32,"./DataReader":18}],18:[function(t,r,i){var a=t("../utils");function s(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var u,d=0;for(this.checkOffset(l),u=this.index+l-1;u>=this.index;u--)d=(d<<8)+this.byteAt(u);return this.index+=l,d},readString:function(l){return a.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},r.exports=s},{"../utils":32}],19:[function(t,r,i){var a=t("./Uint8ArrayReader");function s(l){a.call(this,l)}t("../utils").inherits(s,a),s.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},r.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,r,i){var a=t("./DataReader");function s(l){a.call(this,l)}t("../utils").inherits(s,a),s.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},s.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},s.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},s.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},r.exports=s},{"../utils":32,"./DataReader":18}],21:[function(t,r,i){var a=t("./ArrayReader");function s(l){a.call(this,l)}t("../utils").inherits(s,a),s.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},r.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(t,r,i){var a=t("../utils"),s=t("../support"),l=t("./ArrayReader"),u=t("./StringReader"),d=t("./NodeBufferReader"),f=t("./Uint8ArrayReader");r.exports=function(m){var b=a.getTypeOf(m);return a.checkSupport(b),b!=="string"||s.uint8array?b==="nodebuffer"?new d(m):s.uint8array?new f(a.transformTo("uint8array",m)):new l(a.transformTo("array",m)):new u(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,r,i){var a=t("./GenericWorker"),s=t("../utils");function l(u){a.call(this,"ConvertWorker to "+u),this.destType=u}s.inherits(l,a),l.prototype.processChunk=function(u){this.push({data:s.transformTo(this.destType,u.data),meta:u.meta})},r.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(t,r,i){var a=t("./GenericWorker"),s=t("../crc32");function l(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(l,a),l.prototype.processChunk=function(u){this.streamInfo.crc32=s(u.data,this.streamInfo.crc32||0),this.push(u)},r.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,r,i){var a=t("../utils"),s=t("./GenericWorker");function l(u){s.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}a.inherits(l,s),l.prototype.processChunk=function(u){if(u){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+u.data.length}s.prototype.processChunk.call(this,u)},r.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(t,r,i){var a=t("../utils"),s=t("./GenericWorker");function l(u){s.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(f){d.dataIsReady=!0,d.data=f,d.max=f&&f.length||0,d.type=a.getTypeOf(f),d.isPaused||d._tickAndRepeat()},function(f){d.error(f)})}a.inherits(l,s),l.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,d);break;case"uint8array":u=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":u=this.data.slice(this.index,d)}return this.index=d,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(t,r,i){function a(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,l){return this._listeners[s].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,l){if(this._listeners[s])for(var u=0;u<this._listeners[s].length;u++)this._listeners[s][u].call(this,l)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var l=this;return s.on("data",function(u){l.processChunk(u)}),s.on("end",function(){l.end()}),s.on("error",function(u){l.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,l){return this.extraStreamInfo[s]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},r.exports=a},{}],29:[function(t,r,i){var a=t("../utils"),s=t("./ConvertWorker"),l=t("./GenericWorker"),u=t("../base64"),d=t("../support"),f=t("../external"),m=null;if(d.nodestream)try{m=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function b(x,y){return new f.Promise(function(A,w){var C=[],j=x._internalType,F=x._outputType,M=x._mimeType;x.on("data",function(z,_){C.push(z),y&&y(_)}).on("error",function(z){C=[],w(z)}).on("end",function(){try{var z=function(_,L,$){switch(_){case"blob":return a.newBlob(a.transformTo("arraybuffer",L),$);case"base64":return u.encode(L);default:return a.transformTo(_,L)}}(F,function(_,L){var $,Z=0,O=null,T=0;for($=0;$<L.length;$++)T+=L[$].length;switch(_){case"string":return L.join("");case"array":return Array.prototype.concat.apply([],L);case"uint8array":for(O=new Uint8Array(T),$=0;$<L.length;$++)O.set(L[$],Z),Z+=L[$].length;return O;case"nodebuffer":return Buffer.concat(L);default:throw new Error("concat : unsupported type '"+_+"'")}}(j,C),M);A(z)}catch(_){w(_)}C=[]}).resume()})}function g(x,y,A){var w=y;switch(y){case"blob":case"arraybuffer":w="uint8array";break;case"base64":w="string"}try{this._internalType=w,this._outputType=y,this._mimeType=A,a.checkSupport(w),this._worker=x.pipe(new s(w)),x.lock()}catch(C){this._worker=new l("error"),this._worker.error(C)}}g.prototype={accumulate:function(x){return b(this,x)},on:function(x,y){var A=this;return x==="data"?this._worker.on(x,function(w){y.call(A,w.data,w.meta)}):this._worker.on(x,function(){a.delay(y,arguments,A)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(x){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},x)}},r.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var a=new ArrayBuffer(0);try{i.blob=new Blob([a],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(a),i.blob=s.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(t,r,i){for(var a=t("./utils"),s=t("./support"),l=t("./nodejsUtils"),u=t("./stream/GenericWorker"),d=new Array(256),f=0;f<256;f++)d[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;d[254]=d[254]=1;function m(){u.call(this,"utf-8 decode"),this.leftOver=null}function b(){u.call(this,"utf-8 encode")}i.utf8encode=function(g){return s.nodebuffer?l.newBufferFrom(g,"utf-8"):function(x){var y,A,w,C,j,F=x.length,M=0;for(C=0;C<F;C++)(64512&(A=x.charCodeAt(C)))==55296&&C+1<F&&(64512&(w=x.charCodeAt(C+1)))==56320&&(A=65536+(A-55296<<10)+(w-56320),C++),M+=A<128?1:A<2048?2:A<65536?3:4;for(y=s.uint8array?new Uint8Array(M):new Array(M),C=j=0;j<M;C++)(64512&(A=x.charCodeAt(C)))==55296&&C+1<F&&(64512&(w=x.charCodeAt(C+1)))==56320&&(A=65536+(A-55296<<10)+(w-56320),C++),A<128?y[j++]=A:(A<2048?y[j++]=192|A>>>6:(A<65536?y[j++]=224|A>>>12:(y[j++]=240|A>>>18,y[j++]=128|A>>>12&63),y[j++]=128|A>>>6&63),y[j++]=128|63&A);return y}(g)},i.utf8decode=function(g){return s.nodebuffer?a.transformTo("nodebuffer",g).toString("utf-8"):function(x){var y,A,w,C,j=x.length,F=new Array(2*j);for(y=A=0;y<j;)if((w=x[y++])<128)F[A++]=w;else if(4<(C=d[w]))F[A++]=65533,y+=C-1;else{for(w&=C===2?31:C===3?15:7;1<C&&y<j;)w=w<<6|63&x[y++],C--;1<C?F[A++]=65533:w<65536?F[A++]=w:(w-=65536,F[A++]=55296|w>>10&1023,F[A++]=56320|1023&w)}return F.length!==A&&(F.subarray?F=F.subarray(0,A):F.length=A),a.applyFromCharCode(F)}(g=a.transformTo(s.uint8array?"uint8array":"array",g))},a.inherits(m,u),m.prototype.processChunk=function(g){var x=a.transformTo(s.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var y=x;(x=new Uint8Array(y.length+this.leftOver.length)).set(this.leftOver,0),x.set(y,this.leftOver.length)}else x=this.leftOver.concat(x);this.leftOver=null}var A=function(C,j){var F;for((j=j||C.length)>C.length&&(j=C.length),F=j-1;0<=F&&(192&C[F])==128;)F--;return F<0||F===0?j:F+d[C[F]]>j?F:j}(x),w=x;A!==x.length&&(s.uint8array?(w=x.subarray(0,A),this.leftOver=x.subarray(A,x.length)):(w=x.slice(0,A),this.leftOver=x.slice(A,x.length))),this.push({data:i.utf8decode(w),meta:g.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=m,a.inherits(b,u),b.prototype.processChunk=function(g){this.push({data:i.utf8encode(g.data),meta:g.meta})},i.Utf8EncodeWorker=b},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,r,i){var a=t("./support"),s=t("./base64"),l=t("./nodejsUtils"),u=t("./external");function d(y){return y}function f(y,A){for(var w=0;w<y.length;++w)A[w]=255&y.charCodeAt(w);return A}t("setimmediate"),i.newBlob=function(y,A){i.checkSupport("blob");try{return new Blob([y],{type:A})}catch{try{var w=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return w.append(y),w.getBlob(A)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(y,A,w){var C=[],j=0,F=y.length;if(F<=w)return String.fromCharCode.apply(null,y);for(;j<F;)A==="array"||A==="nodebuffer"?C.push(String.fromCharCode.apply(null,y.slice(j,Math.min(j+w,F)))):C.push(String.fromCharCode.apply(null,y.subarray(j,Math.min(j+w,F)))),j+=w;return C.join("")},stringifyByChar:function(y){for(var A="",w=0;w<y.length;w++)A+=String.fromCharCode(y[w]);return A},applyCanBeUsed:{uint8array:function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}}()}};function b(y){var A=65536,w=i.getTypeOf(y),C=!0;if(w==="uint8array"?C=m.applyCanBeUsed.uint8array:w==="nodebuffer"&&(C=m.applyCanBeUsed.nodebuffer),C)for(;1<A;)try{return m.stringifyByChunk(y,w,A)}catch{A=Math.floor(A/2)}return m.stringifyByChar(y)}function g(y,A){for(var w=0;w<y.length;w++)A[w]=y[w];return A}i.applyFromCharCode=b;var x={};x.string={string:d,array:function(y){return f(y,new Array(y.length))},arraybuffer:function(y){return x.string.uint8array(y).buffer},uint8array:function(y){return f(y,new Uint8Array(y.length))},nodebuffer:function(y){return f(y,l.allocBuffer(y.length))}},x.array={string:b,array:d,arraybuffer:function(y){return new Uint8Array(y).buffer},uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return l.newBufferFrom(y)}},x.arraybuffer={string:function(y){return b(new Uint8Array(y))},array:function(y){return g(new Uint8Array(y),new Array(y.byteLength))},arraybuffer:d,uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return l.newBufferFrom(new Uint8Array(y))}},x.uint8array={string:b,array:function(y){return g(y,new Array(y.length))},arraybuffer:function(y){return y.buffer},uint8array:d,nodebuffer:function(y){return l.newBufferFrom(y)}},x.nodebuffer={string:b,array:function(y){return g(y,new Array(y.length))},arraybuffer:function(y){return x.nodebuffer.uint8array(y).buffer},uint8array:function(y){return g(y,new Uint8Array(y.length))},nodebuffer:d},i.transformTo=function(y,A){if(A=A||"",!y)return A;i.checkSupport(y);var w=i.getTypeOf(A);return x[w][y](A)},i.resolve=function(y){for(var A=y.split("/"),w=[],C=0;C<A.length;C++){var j=A[C];j==="."||j===""&&C!==0&&C!==A.length-1||(j===".."?w.pop():w.push(j))}return w.join("/")},i.getTypeOf=function(y){return typeof y=="string"?"string":Object.prototype.toString.call(y)==="[object Array]"?"array":a.nodebuffer&&l.isBuffer(y)?"nodebuffer":a.uint8array&&y instanceof Uint8Array?"uint8array":a.arraybuffer&&y instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(y){if(!a[y.toLowerCase()])throw new Error(y+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(y){var A,w,C="";for(w=0;w<(y||"").length;w++)C+="\\x"+((A=y.charCodeAt(w))<16?"0":"")+A.toString(16).toUpperCase();return C},i.delay=function(y,A,w){setImmediate(function(){y.apply(w||null,A||[])})},i.inherits=function(y,A){function w(){}w.prototype=A.prototype,y.prototype=new w},i.extend=function(){var y,A,w={};for(y=0;y<arguments.length;y++)for(A in arguments[y])Object.prototype.hasOwnProperty.call(arguments[y],A)&&w[A]===void 0&&(w[A]=arguments[y][A]);return w},i.prepareContent=function(y,A,w,C,j){return u.Promise.resolve(A).then(function(F){return a.blob&&(F instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(F))!==-1)&&typeof FileReader<"u"?new u.Promise(function(M,z){var _=new FileReader;_.onload=function(L){M(L.target.result)},_.onerror=function(L){z(L.target.error)},_.readAsArrayBuffer(F)}):F}).then(function(F){var M=i.getTypeOf(F);return M?(M==="arraybuffer"?F=i.transformTo("uint8array",F):M==="string"&&(j?F=s.decode(F):w&&C!==!0&&(F=function(z){return f(z,a.uint8array?new Uint8Array(z.length):new Array(z.length))}(F))),F):u.Promise.reject(new Error("Can't read the data of '"+y+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,r,i){var a=t("./reader/readerFor"),s=t("./utils"),l=t("./signature"),u=t("./zipEntry"),d=t("./support");function f(m){this.files=[],this.loadOptions=m}f.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(b)+", expected "+s.pretty(m)+")")}},isSignature:function(m,b){var g=this.reader.index;this.reader.setIndex(m);var x=this.reader.readString(4)===b;return this.reader.setIndex(g),x},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),b=d.uint8array?"uint8array":"array",g=s.transformTo(b,m);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,b,g,x=this.zip64EndOfCentralSize-44;0<x;)m=this.reader.readInt(2),b=this.reader.readInt(4),g=this.reader.readData(b),this.zip64ExtensibleData[m]={id:m,length:b,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,b;for(m=0;m<this.files.length;m++)b=this.files[m],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(m=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var b=m;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var x=b-g;if(0<x)this.isSignature(b,l.CENTRAL_FILE_HEADER)||(this.reader.zero=x);else if(x<0)throw new Error("Corrupted zip: missing "+Math.abs(x)+" bytes.")},prepareReader:function(m){this.reader=a(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,r,i){var a=t("./reader/readerFor"),s=t("./utils"),l=t("./compressedObject"),u=t("./crc32"),d=t("./utf8"),f=t("./compressions"),m=t("./support");function b(g,x){this.options=g,this.loadOptions=x}b.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var x,y;if(g.skip(22),this.fileNameLength=g.readInt(2),y=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(y),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((x=function(A){for(var w in f)if(Object.prototype.hasOwnProperty.call(f,w)&&f[w].magic===A)return f[w];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,x,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var x=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(x),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=a(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var x,y,A,w=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<w;)x=g.readInt(2),y=g.readInt(2),A=g.readData(y),this.extraFields[x]={id:x,length:y,value:A};g.setIndex(w)},handleUTF8:function(){var g=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var x=this.findExtraFieldUnicodePath();if(x!==null)this.fileNameStr=x;else{var y=s.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(y)}var A=this.findExtraFieldUnicodeComment();if(A!==null)this.fileCommentStr=A;else{var w=s.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(w)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var x=a(g.value);return x.readInt(1)!==1||u(this.fileName)!==x.readInt(4)?null:d.utf8decode(x.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var x=a(g.value);return x.readInt(1)!==1||u(this.fileComment)!==x.readInt(4)?null:d.utf8decode(x.readData(g.length-5))}return null}},r.exports=b},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,r,i){function a(x,y,A){this.name=x,this.dir=A.dir,this.date=A.date,this.comment=A.comment,this.unixPermissions=A.unixPermissions,this.dosPermissions=A.dosPermissions,this._data=y,this._dataBinary=A.binary,this.options={compression:A.compression,compressionOptions:A.compressionOptions}}var s=t("./stream/StreamHelper"),l=t("./stream/DataWorker"),u=t("./utf8"),d=t("./compressedObject"),f=t("./stream/GenericWorker");a.prototype={internalStream:function(x){var y=null,A="string";try{if(!x)throw new Error("No output type specified.");var w=(A=x.toLowerCase())==="string"||A==="text";A!=="binarystring"&&A!=="text"||(A="string"),y=this._decompressWorker();var C=!this._dataBinary;C&&!w&&(y=y.pipe(new u.Utf8EncodeWorker)),!C&&w&&(y=y.pipe(new u.Utf8DecodeWorker))}catch(j){(y=new f("error")).error(j)}return new s(y,A,"")},async:function(x,y){return this.internalStream(x).accumulate(y)},nodeStream:function(x,y){return this.internalStream(x||"nodebuffer").toNodejsStream(y)},_compressWorker:function(x,y){if(this._data instanceof d&&this._data.compression.magic===x.magic)return this._data.getCompressedWorker();var A=this._decompressWorker();return this._dataBinary||(A=A.pipe(new u.Utf8EncodeWorker)),d.createWorkerFrom(A,x,y)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof f?this._data:new l(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],b=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<m.length;g++)a.prototype[m[g]]=b;r.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,r,i){(function(a){var s,l,u=a.MutationObserver||a.WebKitMutationObserver;if(u){var d=0,f=new u(x),m=a.document.createTextNode("");f.observe(m,{characterData:!0}),s=function(){m.data=d=++d%2}}else if(a.setImmediate||a.MessageChannel===void 0)s="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var y=a.document.createElement("script");y.onreadystatechange=function(){x(),y.onreadystatechange=null,y.parentNode.removeChild(y),y=null},a.document.documentElement.appendChild(y)}:function(){setTimeout(x,0)};else{var b=new a.MessageChannel;b.port1.onmessage=x,s=function(){b.port2.postMessage(0)}}var g=[];function x(){var y,A;l=!0;for(var w=g.length;w;){for(A=g,g=[],y=-1;++y<w;)A[y]();w=g.length}l=!1}r.exports=function(y){g.push(y)!==1||l||s()}}).call(this,typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,r,i){var a=t("immediate");function s(){}var l={},u=["REJECTED"],d=["FULFILLED"],f=["PENDING"];function m(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,w!==s&&y(this,w)}function b(w,C,j){this.promise=w,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof j=="function"&&(this.onRejected=j,this.callRejected=this.otherCallRejected)}function g(w,C,j){a(function(){var F;try{F=C(j)}catch(M){return l.reject(w,M)}F===w?l.reject(w,new TypeError("Cannot resolve promise with itself")):l.resolve(w,F)})}function x(w){var C=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof C=="function")return function(){C.apply(w,arguments)}}function y(w,C){var j=!1;function F(_){j||(j=!0,l.reject(w,_))}function M(_){j||(j=!0,l.resolve(w,_))}var z=A(function(){C(M,F)});z.status==="error"&&F(z.value)}function A(w,C){var j={};try{j.value=w(C),j.status="success"}catch(F){j.status="error",j.value=F}return j}(r.exports=m).prototype.finally=function(w){if(typeof w!="function")return this;var C=this.constructor;return this.then(function(j){return C.resolve(w()).then(function(){return j})},function(j){return C.resolve(w()).then(function(){throw j})})},m.prototype.catch=function(w){return this.then(null,w)},m.prototype.then=function(w,C){if(typeof w!="function"&&this.state===d||typeof C!="function"&&this.state===u)return this;var j=new this.constructor(s);return this.state!==f?g(j,this.state===d?w:C,this.outcome):this.queue.push(new b(j,w,C)),j},b.prototype.callFulfilled=function(w){l.resolve(this.promise,w)},b.prototype.otherCallFulfilled=function(w){g(this.promise,this.onFulfilled,w)},b.prototype.callRejected=function(w){l.reject(this.promise,w)},b.prototype.otherCallRejected=function(w){g(this.promise,this.onRejected,w)},l.resolve=function(w,C){var j=A(x,C);if(j.status==="error")return l.reject(w,j.value);var F=j.value;if(F)y(w,F);else{w.state=d,w.outcome=C;for(var M=-1,z=w.queue.length;++M<z;)w.queue[M].callFulfilled(C)}return w},l.reject=function(w,C){w.state=u,w.outcome=C;for(var j=-1,F=w.queue.length;++j<F;)w.queue[j].callRejected(C);return w},m.resolve=function(w){return w instanceof this?w:l.resolve(new this(s),w)},m.reject=function(w){var C=new this(s);return l.reject(C,w)},m.all=function(w){var C=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=w.length,F=!1;if(!j)return this.resolve([]);for(var M=new Array(j),z=0,_=-1,L=new this(s);++_<j;)$(w[_],_);return L;function $(Z,O){C.resolve(Z).then(function(T){M[O]=T,++z!==j||F||(F=!0,l.resolve(L,M))},function(T){F||(F=!0,l.reject(L,T))})}},m.race=function(w){var C=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=w.length,F=!1;if(!j)return this.resolve([]);for(var M=-1,z=new this(s);++M<j;)_=w[M],C.resolve(_).then(function(L){F||(F=!0,l.resolve(z,L))},function(L){F||(F=!0,l.reject(z,L))});var _;return z}},{immediate:36}],38:[function(t,r,i){var a={};(0,t("./lib/utils/common").assign)(a,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),r.exports=a},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,r,i){var a=t("./zlib/deflate"),s=t("./utils/common"),l=t("./utils/strings"),u=t("./zlib/messages"),d=t("./zlib/zstream"),f=Object.prototype.toString,m=0,b=-1,g=0,x=8;function y(w){if(!(this instanceof y))return new y(w);this.options=s.assign({level:b,method:x,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},w||{});var C=this.options;C.raw&&0<C.windowBits?C.windowBits=-C.windowBits:C.gzip&&0<C.windowBits&&C.windowBits<16&&(C.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var j=a.deflateInit2(this.strm,C.level,C.method,C.windowBits,C.memLevel,C.strategy);if(j!==m)throw new Error(u[j]);if(C.header&&a.deflateSetHeader(this.strm,C.header),C.dictionary){var F;if(F=typeof C.dictionary=="string"?l.string2buf(C.dictionary):f.call(C.dictionary)==="[object ArrayBuffer]"?new Uint8Array(C.dictionary):C.dictionary,(j=a.deflateSetDictionary(this.strm,F))!==m)throw new Error(u[j]);this._dict_set=!0}}function A(w,C){var j=new y(C);if(j.push(w,!0),j.err)throw j.msg||u[j.err];return j.result}y.prototype.push=function(w,C){var j,F,M=this.strm,z=this.options.chunkSize;if(this.ended)return!1;F=C===~~C?C:C===!0?4:0,typeof w=="string"?M.input=l.string2buf(w):f.call(w)==="[object ArrayBuffer]"?M.input=new Uint8Array(w):M.input=w,M.next_in=0,M.avail_in=M.input.length;do{if(M.avail_out===0&&(M.output=new s.Buf8(z),M.next_out=0,M.avail_out=z),(j=a.deflate(M,F))!==1&&j!==m)return this.onEnd(j),!(this.ended=!0);M.avail_out!==0&&(M.avail_in!==0||F!==4&&F!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(s.shrinkBuf(M.output,M.next_out))):this.onData(s.shrinkBuf(M.output,M.next_out)))}while((0<M.avail_in||M.avail_out===0)&&j!==1);return F===4?(j=a.deflateEnd(this.strm),this.onEnd(j),this.ended=!0,j===m):F!==2||(this.onEnd(m),!(M.avail_out=0))},y.prototype.onData=function(w){this.chunks.push(w)},y.prototype.onEnd=function(w){w===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},i.Deflate=y,i.deflate=A,i.deflateRaw=function(w,C){return(C=C||{}).raw=!0,A(w,C)},i.gzip=function(w,C){return(C=C||{}).gzip=!0,A(w,C)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,r,i){var a=t("./zlib/inflate"),s=t("./utils/common"),l=t("./utils/strings"),u=t("./zlib/constants"),d=t("./zlib/messages"),f=t("./zlib/zstream"),m=t("./zlib/gzheader"),b=Object.prototype.toString;function g(y){if(!(this instanceof g))return new g(y);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},y||{});var A=this.options;A.raw&&0<=A.windowBits&&A.windowBits<16&&(A.windowBits=-A.windowBits,A.windowBits===0&&(A.windowBits=-15)),!(0<=A.windowBits&&A.windowBits<16)||y&&y.windowBits||(A.windowBits+=32),15<A.windowBits&&A.windowBits<48&&(15&A.windowBits)==0&&(A.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var w=a.inflateInit2(this.strm,A.windowBits);if(w!==u.Z_OK)throw new Error(d[w]);this.header=new m,a.inflateGetHeader(this.strm,this.header)}function x(y,A){var w=new g(A);if(w.push(y,!0),w.err)throw w.msg||d[w.err];return w.result}g.prototype.push=function(y,A){var w,C,j,F,M,z,_=this.strm,L=this.options.chunkSize,$=this.options.dictionary,Z=!1;if(this.ended)return!1;C=A===~~A?A:A===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof y=="string"?_.input=l.binstring2buf(y):b.call(y)==="[object ArrayBuffer]"?_.input=new Uint8Array(y):_.input=y,_.next_in=0,_.avail_in=_.input.length;do{if(_.avail_out===0&&(_.output=new s.Buf8(L),_.next_out=0,_.avail_out=L),(w=a.inflate(_,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&$&&(z=typeof $=="string"?l.string2buf($):b.call($)==="[object ArrayBuffer]"?new Uint8Array($):$,w=a.inflateSetDictionary(this.strm,z)),w===u.Z_BUF_ERROR&&Z===!0&&(w=u.Z_OK,Z=!1),w!==u.Z_STREAM_END&&w!==u.Z_OK)return this.onEnd(w),!(this.ended=!0);_.next_out&&(_.avail_out!==0&&w!==u.Z_STREAM_END&&(_.avail_in!==0||C!==u.Z_FINISH&&C!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(j=l.utf8border(_.output,_.next_out),F=_.next_out-j,M=l.buf2string(_.output,j),_.next_out=F,_.avail_out=L-F,F&&s.arraySet(_.output,_.output,j,F,0),this.onData(M)):this.onData(s.shrinkBuf(_.output,_.next_out)))),_.avail_in===0&&_.avail_out===0&&(Z=!0)}while((0<_.avail_in||_.avail_out===0)&&w!==u.Z_STREAM_END);return w===u.Z_STREAM_END&&(C=u.Z_FINISH),C===u.Z_FINISH?(w=a.inflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===u.Z_OK):C!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(_.avail_out=0))},g.prototype.onData=function(y){this.chunks.push(y)},g.prototype.onEnd=function(y){y===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},i.Inflate=g,i.inflate=x,i.inflateRaw=function(y,A){return(A=A||{}).raw=!0,x(y,A)},i.ungzip=x},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,r,i){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(u){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var f=d.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var m in f)f.hasOwnProperty(m)&&(u[m]=f[m])}}return u},i.shrinkBuf=function(u,d){return u.length===d?u:u.subarray?u.subarray(0,d):(u.length=d,u)};var s={arraySet:function(u,d,f,m,b){if(d.subarray&&u.subarray)u.set(d.subarray(f,f+m),b);else for(var g=0;g<m;g++)u[b+g]=d[f+g]},flattenChunks:function(u){var d,f,m,b,g,x;for(d=m=0,f=u.length;d<f;d++)m+=u[d].length;for(x=new Uint8Array(m),d=b=0,f=u.length;d<f;d++)g=u[d],x.set(g,b),b+=g.length;return x}},l={arraySet:function(u,d,f,m,b){for(var g=0;g<m;g++)u[b+g]=d[f+g]},flattenChunks:function(u){return[].concat.apply([],u)}};i.setTyped=function(u){u?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,s)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,l))},i.setTyped(a)},{}],42:[function(t,r,i){var a=t("./common"),s=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var u=new a.Buf8(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function f(m,b){if(b<65537&&(m.subarray&&l||!m.subarray&&s))return String.fromCharCode.apply(null,a.shrinkBuf(m,b));for(var g="",x=0;x<b;x++)g+=String.fromCharCode(m[x]);return g}u[254]=u[254]=1,i.string2buf=function(m){var b,g,x,y,A,w=m.length,C=0;for(y=0;y<w;y++)(64512&(g=m.charCodeAt(y)))==55296&&y+1<w&&(64512&(x=m.charCodeAt(y+1)))==56320&&(g=65536+(g-55296<<10)+(x-56320),y++),C+=g<128?1:g<2048?2:g<65536?3:4;for(b=new a.Buf8(C),y=A=0;A<C;y++)(64512&(g=m.charCodeAt(y)))==55296&&y+1<w&&(64512&(x=m.charCodeAt(y+1)))==56320&&(g=65536+(g-55296<<10)+(x-56320),y++),g<128?b[A++]=g:(g<2048?b[A++]=192|g>>>6:(g<65536?b[A++]=224|g>>>12:(b[A++]=240|g>>>18,b[A++]=128|g>>>12&63),b[A++]=128|g>>>6&63),b[A++]=128|63&g);return b},i.buf2binstring=function(m){return f(m,m.length)},i.binstring2buf=function(m){for(var b=new a.Buf8(m.length),g=0,x=b.length;g<x;g++)b[g]=m.charCodeAt(g);return b},i.buf2string=function(m,b){var g,x,y,A,w=b||m.length,C=new Array(2*w);for(g=x=0;g<w;)if((y=m[g++])<128)C[x++]=y;else if(4<(A=u[y]))C[x++]=65533,g+=A-1;else{for(y&=A===2?31:A===3?15:7;1<A&&g<w;)y=y<<6|63&m[g++],A--;1<A?C[x++]=65533:y<65536?C[x++]=y:(y-=65536,C[x++]=55296|y>>10&1023,C[x++]=56320|1023&y)}return f(C,x)},i.utf8border=function(m,b){var g;for((b=b||m.length)>m.length&&(b=m.length),g=b-1;0<=g&&(192&m[g])==128;)g--;return g<0||g===0?b:g+u[m[g]]>b?g:b}},{"./common":41}],43:[function(t,r,i){r.exports=function(a,s,l,u){for(var d=65535&a|0,f=a>>>16&65535|0,m=0;l!==0;){for(l-=m=2e3<l?2e3:l;f=f+(d=d+s[u++]|0)|0,--m;);d%=65521,f%=65521}return d|f<<16|0}},{}],44:[function(t,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,r,i){var a=function(){for(var s,l=[],u=0;u<256;u++){s=u;for(var d=0;d<8;d++)s=1&s?3988292384^s>>>1:s>>>1;l[u]=s}return l}();r.exports=function(s,l,u,d){var f=a,m=d+u;s^=-1;for(var b=d;b<m;b++)s=s>>>8^f[255&(s^l[b])];return-1^s}},{}],46:[function(t,r,i){var a,s=t("../utils/common"),l=t("./trees"),u=t("./adler32"),d=t("./crc32"),f=t("./messages"),m=0,b=4,g=0,x=-2,y=-1,A=4,w=2,C=8,j=9,F=286,M=30,z=19,_=2*F+1,L=15,$=3,Z=258,O=Z+$+1,T=42,R=113,N=1,G=2,W=3,Q=4;function J(V,Ae){return V.msg=f[Ae],Ae}function se(V){return(V<<1)-(4<V?9:0)}function U(V){for(var Ae=V.length;0<=--Ae;)V[Ae]=0}function le(V){var Ae=V.state,ne=Ae.pending;ne>V.avail_out&&(ne=V.avail_out),ne!==0&&(s.arraySet(V.output,Ae.pending_buf,Ae.pending_out,ne,V.next_out),V.next_out+=ne,Ae.pending_out+=ne,V.total_out+=ne,V.avail_out-=ne,Ae.pending-=ne,Ae.pending===0&&(Ae.pending_out=0))}function q(V,Ae){l._tr_flush_block(V,0<=V.block_start?V.block_start:-1,V.strstart-V.block_start,Ae),V.block_start=V.strstart,le(V.strm)}function B(V,Ae){V.pending_buf[V.pending++]=Ae}function ee(V,Ae){V.pending_buf[V.pending++]=Ae>>>8&255,V.pending_buf[V.pending++]=255&Ae}function re(V,Ae){var ne,be,fe=V.max_chain_length,ke=V.strstart,Re=V.prev_length,qe=V.nice_match,je=V.strstart>V.w_size-O?V.strstart-(V.w_size-O):0,Ze=V.window,ut=V.w_mask,rt=V.prev,Pe=V.strstart+Z,ve=Ze[ke+Re-1],Ne=Ze[ke+Re];V.prev_length>=V.good_match&&(fe>>=2),qe>V.lookahead&&(qe=V.lookahead);do if(Ze[(ne=Ae)+Re]===Ne&&Ze[ne+Re-1]===ve&&Ze[ne]===Ze[ke]&&Ze[++ne]===Ze[ke+1]){ke+=2,ne++;do;while(Ze[++ke]===Ze[++ne]&&Ze[++ke]===Ze[++ne]&&Ze[++ke]===Ze[++ne]&&Ze[++ke]===Ze[++ne]&&Ze[++ke]===Ze[++ne]&&Ze[++ke]===Ze[++ne]&&Ze[++ke]===Ze[++ne]&&Ze[++ke]===Ze[++ne]&&ke<Pe);if(be=Z-(Pe-ke),ke=Pe-Z,Re<be){if(V.match_start=Ae,qe<=(Re=be))break;ve=Ze[ke+Re-1],Ne=Ze[ke+Re]}}while((Ae=rt[Ae&ut])>je&&--fe!=0);return Re<=V.lookahead?Re:V.lookahead}function oe(V){var Ae,ne,be,fe,ke,Re,qe,je,Ze,ut,rt=V.w_size;do{if(fe=V.window_size-V.lookahead-V.strstart,V.strstart>=rt+(rt-O)){for(s.arraySet(V.window,V.window,rt,rt,0),V.match_start-=rt,V.strstart-=rt,V.block_start-=rt,Ae=ne=V.hash_size;be=V.head[--Ae],V.head[Ae]=rt<=be?be-rt:0,--ne;);for(Ae=ne=rt;be=V.prev[--Ae],V.prev[Ae]=rt<=be?be-rt:0,--ne;);fe+=rt}if(V.strm.avail_in===0)break;if(Re=V.strm,qe=V.window,je=V.strstart+V.lookahead,Ze=fe,ut=void 0,ut=Re.avail_in,Ze<ut&&(ut=Ze),ne=ut===0?0:(Re.avail_in-=ut,s.arraySet(qe,Re.input,Re.next_in,ut,je),Re.state.wrap===1?Re.adler=u(Re.adler,qe,ut,je):Re.state.wrap===2&&(Re.adler=d(Re.adler,qe,ut,je)),Re.next_in+=ut,Re.total_in+=ut,ut),V.lookahead+=ne,V.lookahead+V.insert>=$)for(ke=V.strstart-V.insert,V.ins_h=V.window[ke],V.ins_h=(V.ins_h<<V.hash_shift^V.window[ke+1])&V.hash_mask;V.insert&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[ke+$-1])&V.hash_mask,V.prev[ke&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=ke,ke++,V.insert--,!(V.lookahead+V.insert<$)););}while(V.lookahead<O&&V.strm.avail_in!==0)}function Ce(V,Ae){for(var ne,be;;){if(V.lookahead<O){if(oe(V),V.lookahead<O&&Ae===m)return N;if(V.lookahead===0)break}if(ne=0,V.lookahead>=$&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+$-1])&V.hash_mask,ne=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),ne!==0&&V.strstart-ne<=V.w_size-O&&(V.match_length=re(V,ne)),V.match_length>=$)if(be=l._tr_tally(V,V.strstart-V.match_start,V.match_length-$),V.lookahead-=V.match_length,V.match_length<=V.max_lazy_match&&V.lookahead>=$){for(V.match_length--;V.strstart++,V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+$-1])&V.hash_mask,ne=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart,--V.match_length!=0;);V.strstart++}else V.strstart+=V.match_length,V.match_length=0,V.ins_h=V.window[V.strstart],V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+1])&V.hash_mask;else be=l._tr_tally(V,0,V.window[V.strstart]),V.lookahead--,V.strstart++;if(be&&(q(V,!1),V.strm.avail_out===0))return N}return V.insert=V.strstart<$-1?V.strstart:$-1,Ae===b?(q(V,!0),V.strm.avail_out===0?W:Q):V.last_lit&&(q(V,!1),V.strm.avail_out===0)?N:G}function ye(V,Ae){for(var ne,be,fe;;){if(V.lookahead<O){if(oe(V),V.lookahead<O&&Ae===m)return N;if(V.lookahead===0)break}if(ne=0,V.lookahead>=$&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+$-1])&V.hash_mask,ne=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),V.prev_length=V.match_length,V.prev_match=V.match_start,V.match_length=$-1,ne!==0&&V.prev_length<V.max_lazy_match&&V.strstart-ne<=V.w_size-O&&(V.match_length=re(V,ne),V.match_length<=5&&(V.strategy===1||V.match_length===$&&4096<V.strstart-V.match_start)&&(V.match_length=$-1)),V.prev_length>=$&&V.match_length<=V.prev_length){for(fe=V.strstart+V.lookahead-$,be=l._tr_tally(V,V.strstart-1-V.prev_match,V.prev_length-$),V.lookahead-=V.prev_length-1,V.prev_length-=2;++V.strstart<=fe&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+$-1])&V.hash_mask,ne=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),--V.prev_length!=0;);if(V.match_available=0,V.match_length=$-1,V.strstart++,be&&(q(V,!1),V.strm.avail_out===0))return N}else if(V.match_available){if((be=l._tr_tally(V,0,V.window[V.strstart-1]))&&q(V,!1),V.strstart++,V.lookahead--,V.strm.avail_out===0)return N}else V.match_available=1,V.strstart++,V.lookahead--}return V.match_available&&(be=l._tr_tally(V,0,V.window[V.strstart-1]),V.match_available=0),V.insert=V.strstart<$-1?V.strstart:$-1,Ae===b?(q(V,!0),V.strm.avail_out===0?W:Q):V.last_lit&&(q(V,!1),V.strm.avail_out===0)?N:G}function Se(V,Ae,ne,be,fe){this.good_length=V,this.max_lazy=Ae,this.nice_length=ne,this.max_chain=be,this.func=fe}function Te(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=C,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*_),this.dyn_dtree=new s.Buf16(2*(2*M+1)),this.bl_tree=new s.Buf16(2*(2*z+1)),U(this.dyn_ltree),U(this.dyn_dtree),U(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(L+1),this.heap=new s.Buf16(2*F+1),U(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*F+1),U(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Le(V){var Ae;return V&&V.state?(V.total_in=V.total_out=0,V.data_type=w,(Ae=V.state).pending=0,Ae.pending_out=0,Ae.wrap<0&&(Ae.wrap=-Ae.wrap),Ae.status=Ae.wrap?T:R,V.adler=Ae.wrap===2?0:1,Ae.last_flush=m,l._tr_init(Ae),g):J(V,x)}function He(V){var Ae=Le(V);return Ae===g&&function(ne){ne.window_size=2*ne.w_size,U(ne.head),ne.max_lazy_match=a[ne.level].max_lazy,ne.good_match=a[ne.level].good_length,ne.nice_match=a[ne.level].nice_length,ne.max_chain_length=a[ne.level].max_chain,ne.strstart=0,ne.block_start=0,ne.lookahead=0,ne.insert=0,ne.match_length=ne.prev_length=$-1,ne.match_available=0,ne.ins_h=0}(V.state),Ae}function Ye(V,Ae,ne,be,fe,ke){if(!V)return x;var Re=1;if(Ae===y&&(Ae=6),be<0?(Re=0,be=-be):15<be&&(Re=2,be-=16),fe<1||j<fe||ne!==C||be<8||15<be||Ae<0||9<Ae||ke<0||A<ke)return J(V,x);be===8&&(be=9);var qe=new Te;return(V.state=qe).strm=V,qe.wrap=Re,qe.gzhead=null,qe.w_bits=be,qe.w_size=1<<qe.w_bits,qe.w_mask=qe.w_size-1,qe.hash_bits=fe+7,qe.hash_size=1<<qe.hash_bits,qe.hash_mask=qe.hash_size-1,qe.hash_shift=~~((qe.hash_bits+$-1)/$),qe.window=new s.Buf8(2*qe.w_size),qe.head=new s.Buf16(qe.hash_size),qe.prev=new s.Buf16(qe.w_size),qe.lit_bufsize=1<<fe+6,qe.pending_buf_size=4*qe.lit_bufsize,qe.pending_buf=new s.Buf8(qe.pending_buf_size),qe.d_buf=1*qe.lit_bufsize,qe.l_buf=3*qe.lit_bufsize,qe.level=Ae,qe.strategy=ke,qe.method=ne,He(V)}a=[new Se(0,0,0,0,function(V,Ae){var ne=65535;for(ne>V.pending_buf_size-5&&(ne=V.pending_buf_size-5);;){if(V.lookahead<=1){if(oe(V),V.lookahead===0&&Ae===m)return N;if(V.lookahead===0)break}V.strstart+=V.lookahead,V.lookahead=0;var be=V.block_start+ne;if((V.strstart===0||V.strstart>=be)&&(V.lookahead=V.strstart-be,V.strstart=be,q(V,!1),V.strm.avail_out===0)||V.strstart-V.block_start>=V.w_size-O&&(q(V,!1),V.strm.avail_out===0))return N}return V.insert=0,Ae===b?(q(V,!0),V.strm.avail_out===0?W:Q):(V.strstart>V.block_start&&(q(V,!1),V.strm.avail_out),N)}),new Se(4,4,8,4,Ce),new Se(4,5,16,8,Ce),new Se(4,6,32,32,Ce),new Se(4,4,16,16,ye),new Se(8,16,32,32,ye),new Se(8,16,128,128,ye),new Se(8,32,128,256,ye),new Se(32,128,258,1024,ye),new Se(32,258,258,4096,ye)],i.deflateInit=function(V,Ae){return Ye(V,Ae,C,15,8,0)},i.deflateInit2=Ye,i.deflateReset=He,i.deflateResetKeep=Le,i.deflateSetHeader=function(V,Ae){return V&&V.state?V.state.wrap!==2?x:(V.state.gzhead=Ae,g):x},i.deflate=function(V,Ae){var ne,be,fe,ke;if(!V||!V.state||5<Ae||Ae<0)return V?J(V,x):x;if(be=V.state,!V.output||!V.input&&V.avail_in!==0||be.status===666&&Ae!==b)return J(V,V.avail_out===0?-5:x);if(be.strm=V,ne=be.last_flush,be.last_flush=Ae,be.status===T)if(be.wrap===2)V.adler=0,B(be,31),B(be,139),B(be,8),be.gzhead?(B(be,(be.gzhead.text?1:0)+(be.gzhead.hcrc?2:0)+(be.gzhead.extra?4:0)+(be.gzhead.name?8:0)+(be.gzhead.comment?16:0)),B(be,255&be.gzhead.time),B(be,be.gzhead.time>>8&255),B(be,be.gzhead.time>>16&255),B(be,be.gzhead.time>>24&255),B(be,be.level===9?2:2<=be.strategy||be.level<2?4:0),B(be,255&be.gzhead.os),be.gzhead.extra&&be.gzhead.extra.length&&(B(be,255&be.gzhead.extra.length),B(be,be.gzhead.extra.length>>8&255)),be.gzhead.hcrc&&(V.adler=d(V.adler,be.pending_buf,be.pending,0)),be.gzindex=0,be.status=69):(B(be,0),B(be,0),B(be,0),B(be,0),B(be,0),B(be,be.level===9?2:2<=be.strategy||be.level<2?4:0),B(be,3),be.status=R);else{var Re=C+(be.w_bits-8<<4)<<8;Re|=(2<=be.strategy||be.level<2?0:be.level<6?1:be.level===6?2:3)<<6,be.strstart!==0&&(Re|=32),Re+=31-Re%31,be.status=R,ee(be,Re),be.strstart!==0&&(ee(be,V.adler>>>16),ee(be,65535&V.adler)),V.adler=1}if(be.status===69)if(be.gzhead.extra){for(fe=be.pending;be.gzindex<(65535&be.gzhead.extra.length)&&(be.pending!==be.pending_buf_size||(be.gzhead.hcrc&&be.pending>fe&&(V.adler=d(V.adler,be.pending_buf,be.pending-fe,fe)),le(V),fe=be.pending,be.pending!==be.pending_buf_size));)B(be,255&be.gzhead.extra[be.gzindex]),be.gzindex++;be.gzhead.hcrc&&be.pending>fe&&(V.adler=d(V.adler,be.pending_buf,be.pending-fe,fe)),be.gzindex===be.gzhead.extra.length&&(be.gzindex=0,be.status=73)}else be.status=73;if(be.status===73)if(be.gzhead.name){fe=be.pending;do{if(be.pending===be.pending_buf_size&&(be.gzhead.hcrc&&be.pending>fe&&(V.adler=d(V.adler,be.pending_buf,be.pending-fe,fe)),le(V),fe=be.pending,be.pending===be.pending_buf_size)){ke=1;break}ke=be.gzindex<be.gzhead.name.length?255&be.gzhead.name.charCodeAt(be.gzindex++):0,B(be,ke)}while(ke!==0);be.gzhead.hcrc&&be.pending>fe&&(V.adler=d(V.adler,be.pending_buf,be.pending-fe,fe)),ke===0&&(be.gzindex=0,be.status=91)}else be.status=91;if(be.status===91)if(be.gzhead.comment){fe=be.pending;do{if(be.pending===be.pending_buf_size&&(be.gzhead.hcrc&&be.pending>fe&&(V.adler=d(V.adler,be.pending_buf,be.pending-fe,fe)),le(V),fe=be.pending,be.pending===be.pending_buf_size)){ke=1;break}ke=be.gzindex<be.gzhead.comment.length?255&be.gzhead.comment.charCodeAt(be.gzindex++):0,B(be,ke)}while(ke!==0);be.gzhead.hcrc&&be.pending>fe&&(V.adler=d(V.adler,be.pending_buf,be.pending-fe,fe)),ke===0&&(be.status=103)}else be.status=103;if(be.status===103&&(be.gzhead.hcrc?(be.pending+2>be.pending_buf_size&&le(V),be.pending+2<=be.pending_buf_size&&(B(be,255&V.adler),B(be,V.adler>>8&255),V.adler=0,be.status=R)):be.status=R),be.pending!==0){if(le(V),V.avail_out===0)return be.last_flush=-1,g}else if(V.avail_in===0&&se(Ae)<=se(ne)&&Ae!==b)return J(V,-5);if(be.status===666&&V.avail_in!==0)return J(V,-5);if(V.avail_in!==0||be.lookahead!==0||Ae!==m&&be.status!==666){var qe=be.strategy===2?function(je,Ze){for(var ut;;){if(je.lookahead===0&&(oe(je),je.lookahead===0)){if(Ze===m)return N;break}if(je.match_length=0,ut=l._tr_tally(je,0,je.window[je.strstart]),je.lookahead--,je.strstart++,ut&&(q(je,!1),je.strm.avail_out===0))return N}return je.insert=0,Ze===b?(q(je,!0),je.strm.avail_out===0?W:Q):je.last_lit&&(q(je,!1),je.strm.avail_out===0)?N:G}(be,Ae):be.strategy===3?function(je,Ze){for(var ut,rt,Pe,ve,Ne=je.window;;){if(je.lookahead<=Z){if(oe(je),je.lookahead<=Z&&Ze===m)return N;if(je.lookahead===0)break}if(je.match_length=0,je.lookahead>=$&&0<je.strstart&&(rt=Ne[Pe=je.strstart-1])===Ne[++Pe]&&rt===Ne[++Pe]&&rt===Ne[++Pe]){ve=je.strstart+Z;do;while(rt===Ne[++Pe]&&rt===Ne[++Pe]&&rt===Ne[++Pe]&&rt===Ne[++Pe]&&rt===Ne[++Pe]&&rt===Ne[++Pe]&&rt===Ne[++Pe]&&rt===Ne[++Pe]&&Pe<ve);je.match_length=Z-(ve-Pe),je.match_length>je.lookahead&&(je.match_length=je.lookahead)}if(je.match_length>=$?(ut=l._tr_tally(je,1,je.match_length-$),je.lookahead-=je.match_length,je.strstart+=je.match_length,je.match_length=0):(ut=l._tr_tally(je,0,je.window[je.strstart]),je.lookahead--,je.strstart++),ut&&(q(je,!1),je.strm.avail_out===0))return N}return je.insert=0,Ze===b?(q(je,!0),je.strm.avail_out===0?W:Q):je.last_lit&&(q(je,!1),je.strm.avail_out===0)?N:G}(be,Ae):a[be.level].func(be,Ae);if(qe!==W&&qe!==Q||(be.status=666),qe===N||qe===W)return V.avail_out===0&&(be.last_flush=-1),g;if(qe===G&&(Ae===1?l._tr_align(be):Ae!==5&&(l._tr_stored_block(be,0,0,!1),Ae===3&&(U(be.head),be.lookahead===0&&(be.strstart=0,be.block_start=0,be.insert=0))),le(V),V.avail_out===0))return be.last_flush=-1,g}return Ae!==b?g:be.wrap<=0?1:(be.wrap===2?(B(be,255&V.adler),B(be,V.adler>>8&255),B(be,V.adler>>16&255),B(be,V.adler>>24&255),B(be,255&V.total_in),B(be,V.total_in>>8&255),B(be,V.total_in>>16&255),B(be,V.total_in>>24&255)):(ee(be,V.adler>>>16),ee(be,65535&V.adler)),le(V),0<be.wrap&&(be.wrap=-be.wrap),be.pending!==0?g:1)},i.deflateEnd=function(V){var Ae;return V&&V.state?(Ae=V.state.status)!==T&&Ae!==69&&Ae!==73&&Ae!==91&&Ae!==103&&Ae!==R&&Ae!==666?J(V,x):(V.state=null,Ae===R?J(V,-3):g):x},i.deflateSetDictionary=function(V,Ae){var ne,be,fe,ke,Re,qe,je,Ze,ut=Ae.length;if(!V||!V.state||(ke=(ne=V.state).wrap)===2||ke===1&&ne.status!==T||ne.lookahead)return x;for(ke===1&&(V.adler=u(V.adler,Ae,ut,0)),ne.wrap=0,ut>=ne.w_size&&(ke===0&&(U(ne.head),ne.strstart=0,ne.block_start=0,ne.insert=0),Ze=new s.Buf8(ne.w_size),s.arraySet(Ze,Ae,ut-ne.w_size,ne.w_size,0),Ae=Ze,ut=ne.w_size),Re=V.avail_in,qe=V.next_in,je=V.input,V.avail_in=ut,V.next_in=0,V.input=Ae,oe(ne);ne.lookahead>=$;){for(be=ne.strstart,fe=ne.lookahead-($-1);ne.ins_h=(ne.ins_h<<ne.hash_shift^ne.window[be+$-1])&ne.hash_mask,ne.prev[be&ne.w_mask]=ne.head[ne.ins_h],ne.head[ne.ins_h]=be,be++,--fe;);ne.strstart=be,ne.lookahead=$-1,oe(ne)}return ne.strstart+=ne.lookahead,ne.block_start=ne.strstart,ne.insert=ne.lookahead,ne.lookahead=0,ne.match_length=ne.prev_length=$-1,ne.match_available=0,V.next_in=qe,V.input=je,V.avail_in=Re,ne.wrap=ke,g},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,r,i){r.exports=function(a,s){var l,u,d,f,m,b,g,x,y,A,w,C,j,F,M,z,_,L,$,Z,O,T,R,N,G;l=a.state,u=a.next_in,N=a.input,d=u+(a.avail_in-5),f=a.next_out,G=a.output,m=f-(s-a.avail_out),b=f+(a.avail_out-257),g=l.dmax,x=l.wsize,y=l.whave,A=l.wnext,w=l.window,C=l.hold,j=l.bits,F=l.lencode,M=l.distcode,z=(1<<l.lenbits)-1,_=(1<<l.distbits)-1;e:do{j<15&&(C+=N[u++]<<j,j+=8,C+=N[u++]<<j,j+=8),L=F[C&z];t:for(;;){if(C>>>=$=L>>>24,j-=$,($=L>>>16&255)===0)G[f++]=65535&L;else{if(!(16&$)){if((64&$)==0){L=F[(65535&L)+(C&(1<<$)-1)];continue t}if(32&$){l.mode=12;break e}a.msg="invalid literal/length code",l.mode=30;break e}Z=65535&L,($&=15)&&(j<$&&(C+=N[u++]<<j,j+=8),Z+=C&(1<<$)-1,C>>>=$,j-=$),j<15&&(C+=N[u++]<<j,j+=8,C+=N[u++]<<j,j+=8),L=M[C&_];n:for(;;){if(C>>>=$=L>>>24,j-=$,!(16&($=L>>>16&255))){if((64&$)==0){L=M[(65535&L)+(C&(1<<$)-1)];continue n}a.msg="invalid distance code",l.mode=30;break e}if(O=65535&L,j<($&=15)&&(C+=N[u++]<<j,(j+=8)<$&&(C+=N[u++]<<j,j+=8)),g<(O+=C&(1<<$)-1)){a.msg="invalid distance too far back",l.mode=30;break e}if(C>>>=$,j-=$,($=f-m)<O){if(y<($=O-$)&&l.sane){a.msg="invalid distance too far back",l.mode=30;break e}if(R=w,(T=0)===A){if(T+=x-$,$<Z){for(Z-=$;G[f++]=w[T++],--$;);T=f-O,R=G}}else if(A<$){if(T+=x+A-$,($-=A)<Z){for(Z-=$;G[f++]=w[T++],--$;);if(T=0,A<Z){for(Z-=$=A;G[f++]=w[T++],--$;);T=f-O,R=G}}}else if(T+=A-$,$<Z){for(Z-=$;G[f++]=w[T++],--$;);T=f-O,R=G}for(;2<Z;)G[f++]=R[T++],G[f++]=R[T++],G[f++]=R[T++],Z-=3;Z&&(G[f++]=R[T++],1<Z&&(G[f++]=R[T++]))}else{for(T=f-O;G[f++]=G[T++],G[f++]=G[T++],G[f++]=G[T++],2<(Z-=3););Z&&(G[f++]=G[T++],1<Z&&(G[f++]=G[T++]))}break}}break}}while(u<d&&f<b);u-=Z=j>>3,C&=(1<<(j-=Z<<3))-1,a.next_in=u,a.next_out=f,a.avail_in=u<d?d-u+5:5-(u-d),a.avail_out=f<b?b-f+257:257-(f-b),l.hold=C,l.bits=j}},{}],49:[function(t,r,i){var a=t("../utils/common"),s=t("./adler32"),l=t("./crc32"),u=t("./inffast"),d=t("./inftrees"),f=1,m=2,b=0,g=-2,x=1,y=852,A=592;function w(T){return(T>>>24&255)+(T>>>8&65280)+((65280&T)<<8)+((255&T)<<24)}function C(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function j(T){var R;return T&&T.state?(R=T.state,T.total_in=T.total_out=R.total=0,T.msg="",R.wrap&&(T.adler=1&R.wrap),R.mode=x,R.last=0,R.havedict=0,R.dmax=32768,R.head=null,R.hold=0,R.bits=0,R.lencode=R.lendyn=new a.Buf32(y),R.distcode=R.distdyn=new a.Buf32(A),R.sane=1,R.back=-1,b):g}function F(T){var R;return T&&T.state?((R=T.state).wsize=0,R.whave=0,R.wnext=0,j(T)):g}function M(T,R){var N,G;return T&&T.state?(G=T.state,R<0?(N=0,R=-R):(N=1+(R>>4),R<48&&(R&=15)),R&&(R<8||15<R)?g:(G.window!==null&&G.wbits!==R&&(G.window=null),G.wrap=N,G.wbits=R,F(T))):g}function z(T,R){var N,G;return T?(G=new C,(T.state=G).window=null,(N=M(T,R))!==b&&(T.state=null),N):g}var _,L,$=!0;function Z(T){if($){var R;for(_=new a.Buf32(512),L=new a.Buf32(32),R=0;R<144;)T.lens[R++]=8;for(;R<256;)T.lens[R++]=9;for(;R<280;)T.lens[R++]=7;for(;R<288;)T.lens[R++]=8;for(d(f,T.lens,0,288,_,0,T.work,{bits:9}),R=0;R<32;)T.lens[R++]=5;d(m,T.lens,0,32,L,0,T.work,{bits:5}),$=!1}T.lencode=_,T.lenbits=9,T.distcode=L,T.distbits=5}function O(T,R,N,G){var W,Q=T.state;return Q.window===null&&(Q.wsize=1<<Q.wbits,Q.wnext=0,Q.whave=0,Q.window=new a.Buf8(Q.wsize)),G>=Q.wsize?(a.arraySet(Q.window,R,N-Q.wsize,Q.wsize,0),Q.wnext=0,Q.whave=Q.wsize):(G<(W=Q.wsize-Q.wnext)&&(W=G),a.arraySet(Q.window,R,N-G,W,Q.wnext),(G-=W)?(a.arraySet(Q.window,R,N-G,G,0),Q.wnext=G,Q.whave=Q.wsize):(Q.wnext+=W,Q.wnext===Q.wsize&&(Q.wnext=0),Q.whave<Q.wsize&&(Q.whave+=W))),0}i.inflateReset=F,i.inflateReset2=M,i.inflateResetKeep=j,i.inflateInit=function(T){return z(T,15)},i.inflateInit2=z,i.inflate=function(T,R){var N,G,W,Q,J,se,U,le,q,B,ee,re,oe,Ce,ye,Se,Te,Le,He,Ye,V,Ae,ne,be,fe=0,ke=new a.Buf8(4),Re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!T||!T.state||!T.output||!T.input&&T.avail_in!==0)return g;(N=T.state).mode===12&&(N.mode=13),J=T.next_out,W=T.output,U=T.avail_out,Q=T.next_in,G=T.input,se=T.avail_in,le=N.hold,q=N.bits,B=se,ee=U,Ae=b;e:for(;;)switch(N.mode){case x:if(N.wrap===0){N.mode=13;break}for(;q<16;){if(se===0)break e;se--,le+=G[Q++]<<q,q+=8}if(2&N.wrap&&le===35615){ke[N.check=0]=255&le,ke[1]=le>>>8&255,N.check=l(N.check,ke,2,0),q=le=0,N.mode=2;break}if(N.flags=0,N.head&&(N.head.done=!1),!(1&N.wrap)||(((255&le)<<8)+(le>>8))%31){T.msg="incorrect header check",N.mode=30;break}if((15&le)!=8){T.msg="unknown compression method",N.mode=30;break}if(q-=4,V=8+(15&(le>>>=4)),N.wbits===0)N.wbits=V;else if(V>N.wbits){T.msg="invalid window size",N.mode=30;break}N.dmax=1<<V,T.adler=N.check=1,N.mode=512&le?10:12,q=le=0;break;case 2:for(;q<16;){if(se===0)break e;se--,le+=G[Q++]<<q,q+=8}if(N.flags=le,(255&N.flags)!=8){T.msg="unknown compression method",N.mode=30;break}if(57344&N.flags){T.msg="unknown header flags set",N.mode=30;break}N.head&&(N.head.text=le>>8&1),512&N.flags&&(ke[0]=255&le,ke[1]=le>>>8&255,N.check=l(N.check,ke,2,0)),q=le=0,N.mode=3;case 3:for(;q<32;){if(se===0)break e;se--,le+=G[Q++]<<q,q+=8}N.head&&(N.head.time=le),512&N.flags&&(ke[0]=255&le,ke[1]=le>>>8&255,ke[2]=le>>>16&255,ke[3]=le>>>24&255,N.check=l(N.check,ke,4,0)),q=le=0,N.mode=4;case 4:for(;q<16;){if(se===0)break e;se--,le+=G[Q++]<<q,q+=8}N.head&&(N.head.xflags=255&le,N.head.os=le>>8),512&N.flags&&(ke[0]=255&le,ke[1]=le>>>8&255,N.check=l(N.check,ke,2,0)),q=le=0,N.mode=5;case 5:if(1024&N.flags){for(;q<16;){if(se===0)break e;se--,le+=G[Q++]<<q,q+=8}N.length=le,N.head&&(N.head.extra_len=le),512&N.flags&&(ke[0]=255&le,ke[1]=le>>>8&255,N.check=l(N.check,ke,2,0)),q=le=0}else N.head&&(N.head.extra=null);N.mode=6;case 6:if(1024&N.flags&&(se<(re=N.length)&&(re=se),re&&(N.head&&(V=N.head.extra_len-N.length,N.head.extra||(N.head.extra=new Array(N.head.extra_len)),a.arraySet(N.head.extra,G,Q,re,V)),512&N.flags&&(N.check=l(N.check,G,re,Q)),se-=re,Q+=re,N.length-=re),N.length))break e;N.length=0,N.mode=7;case 7:if(2048&N.flags){if(se===0)break e;for(re=0;V=G[Q+re++],N.head&&V&&N.length<65536&&(N.head.name+=String.fromCharCode(V)),V&&re<se;);if(512&N.flags&&(N.check=l(N.check,G,re,Q)),se-=re,Q+=re,V)break e}else N.head&&(N.head.name=null);N.length=0,N.mode=8;case 8:if(4096&N.flags){if(se===0)break e;for(re=0;V=G[Q+re++],N.head&&V&&N.length<65536&&(N.head.comment+=String.fromCharCode(V)),V&&re<se;);if(512&N.flags&&(N.check=l(N.check,G,re,Q)),se-=re,Q+=re,V)break e}else N.head&&(N.head.comment=null);N.mode=9;case 9:if(512&N.flags){for(;q<16;){if(se===0)break e;se--,le+=G[Q++]<<q,q+=8}if(le!==(65535&N.check)){T.msg="header crc mismatch",N.mode=30;break}q=le=0}N.head&&(N.head.hcrc=N.flags>>9&1,N.head.done=!0),T.adler=N.check=0,N.mode=12;break;case 10:for(;q<32;){if(se===0)break e;se--,le+=G[Q++]<<q,q+=8}T.adler=N.check=w(le),q=le=0,N.mode=11;case 11:if(N.havedict===0)return T.next_out=J,T.avail_out=U,T.next_in=Q,T.avail_in=se,N.hold=le,N.bits=q,2;T.adler=N.check=1,N.mode=12;case 12:if(R===5||R===6)break e;case 13:if(N.last){le>>>=7&q,q-=7&q,N.mode=27;break}for(;q<3;){if(se===0)break e;se--,le+=G[Q++]<<q,q+=8}switch(N.last=1&le,q-=1,3&(le>>>=1)){case 0:N.mode=14;break;case 1:if(Z(N),N.mode=20,R!==6)break;le>>>=2,q-=2;break e;case 2:N.mode=17;break;case 3:T.msg="invalid block type",N.mode=30}le>>>=2,q-=2;break;case 14:for(le>>>=7&q,q-=7&q;q<32;){if(se===0)break e;se--,le+=G[Q++]<<q,q+=8}if((65535&le)!=(le>>>16^65535)){T.msg="invalid stored block lengths",N.mode=30;break}if(N.length=65535&le,q=le=0,N.mode=15,R===6)break e;case 15:N.mode=16;case 16:if(re=N.length){if(se<re&&(re=se),U<re&&(re=U),re===0)break e;a.arraySet(W,G,Q,re,J),se-=re,Q+=re,U-=re,J+=re,N.length-=re;break}N.mode=12;break;case 17:for(;q<14;){if(se===0)break e;se--,le+=G[Q++]<<q,q+=8}if(N.nlen=257+(31&le),le>>>=5,q-=5,N.ndist=1+(31&le),le>>>=5,q-=5,N.ncode=4+(15&le),le>>>=4,q-=4,286<N.nlen||30<N.ndist){T.msg="too many length or distance symbols",N.mode=30;break}N.have=0,N.mode=18;case 18:for(;N.have<N.ncode;){for(;q<3;){if(se===0)break e;se--,le+=G[Q++]<<q,q+=8}N.lens[Re[N.have++]]=7&le,le>>>=3,q-=3}for(;N.have<19;)N.lens[Re[N.have++]]=0;if(N.lencode=N.lendyn,N.lenbits=7,ne={bits:N.lenbits},Ae=d(0,N.lens,0,19,N.lencode,0,N.work,ne),N.lenbits=ne.bits,Ae){T.msg="invalid code lengths set",N.mode=30;break}N.have=0,N.mode=19;case 19:for(;N.have<N.nlen+N.ndist;){for(;Se=(fe=N.lencode[le&(1<<N.lenbits)-1])>>>16&255,Te=65535&fe,!((ye=fe>>>24)<=q);){if(se===0)break e;se--,le+=G[Q++]<<q,q+=8}if(Te<16)le>>>=ye,q-=ye,N.lens[N.have++]=Te;else{if(Te===16){for(be=ye+2;q<be;){if(se===0)break e;se--,le+=G[Q++]<<q,q+=8}if(le>>>=ye,q-=ye,N.have===0){T.msg="invalid bit length repeat",N.mode=30;break}V=N.lens[N.have-1],re=3+(3&le),le>>>=2,q-=2}else if(Te===17){for(be=ye+3;q<be;){if(se===0)break e;se--,le+=G[Q++]<<q,q+=8}q-=ye,V=0,re=3+(7&(le>>>=ye)),le>>>=3,q-=3}else{for(be=ye+7;q<be;){if(se===0)break e;se--,le+=G[Q++]<<q,q+=8}q-=ye,V=0,re=11+(127&(le>>>=ye)),le>>>=7,q-=7}if(N.have+re>N.nlen+N.ndist){T.msg="invalid bit length repeat",N.mode=30;break}for(;re--;)N.lens[N.have++]=V}}if(N.mode===30)break;if(N.lens[256]===0){T.msg="invalid code -- missing end-of-block",N.mode=30;break}if(N.lenbits=9,ne={bits:N.lenbits},Ae=d(f,N.lens,0,N.nlen,N.lencode,0,N.work,ne),N.lenbits=ne.bits,Ae){T.msg="invalid literal/lengths set",N.mode=30;break}if(N.distbits=6,N.distcode=N.distdyn,ne={bits:N.distbits},Ae=d(m,N.lens,N.nlen,N.ndist,N.distcode,0,N.work,ne),N.distbits=ne.bits,Ae){T.msg="invalid distances set",N.mode=30;break}if(N.mode=20,R===6)break e;case 20:N.mode=21;case 21:if(6<=se&&258<=U){T.next_out=J,T.avail_out=U,T.next_in=Q,T.avail_in=se,N.hold=le,N.bits=q,u(T,ee),J=T.next_out,W=T.output,U=T.avail_out,Q=T.next_in,G=T.input,se=T.avail_in,le=N.hold,q=N.bits,N.mode===12&&(N.back=-1);break}for(N.back=0;Se=(fe=N.lencode[le&(1<<N.lenbits)-1])>>>16&255,Te=65535&fe,!((ye=fe>>>24)<=q);){if(se===0)break e;se--,le+=G[Q++]<<q,q+=8}if(Se&&(240&Se)==0){for(Le=ye,He=Se,Ye=Te;Se=(fe=N.lencode[Ye+((le&(1<<Le+He)-1)>>Le)])>>>16&255,Te=65535&fe,!(Le+(ye=fe>>>24)<=q);){if(se===0)break e;se--,le+=G[Q++]<<q,q+=8}le>>>=Le,q-=Le,N.back+=Le}if(le>>>=ye,q-=ye,N.back+=ye,N.length=Te,Se===0){N.mode=26;break}if(32&Se){N.back=-1,N.mode=12;break}if(64&Se){T.msg="invalid literal/length code",N.mode=30;break}N.extra=15&Se,N.mode=22;case 22:if(N.extra){for(be=N.extra;q<be;){if(se===0)break e;se--,le+=G[Q++]<<q,q+=8}N.length+=le&(1<<N.extra)-1,le>>>=N.extra,q-=N.extra,N.back+=N.extra}N.was=N.length,N.mode=23;case 23:for(;Se=(fe=N.distcode[le&(1<<N.distbits)-1])>>>16&255,Te=65535&fe,!((ye=fe>>>24)<=q);){if(se===0)break e;se--,le+=G[Q++]<<q,q+=8}if((240&Se)==0){for(Le=ye,He=Se,Ye=Te;Se=(fe=N.distcode[Ye+((le&(1<<Le+He)-1)>>Le)])>>>16&255,Te=65535&fe,!(Le+(ye=fe>>>24)<=q);){if(se===0)break e;se--,le+=G[Q++]<<q,q+=8}le>>>=Le,q-=Le,N.back+=Le}if(le>>>=ye,q-=ye,N.back+=ye,64&Se){T.msg="invalid distance code",N.mode=30;break}N.offset=Te,N.extra=15&Se,N.mode=24;case 24:if(N.extra){for(be=N.extra;q<be;){if(se===0)break e;se--,le+=G[Q++]<<q,q+=8}N.offset+=le&(1<<N.extra)-1,le>>>=N.extra,q-=N.extra,N.back+=N.extra}if(N.offset>N.dmax){T.msg="invalid distance too far back",N.mode=30;break}N.mode=25;case 25:if(U===0)break e;if(re=ee-U,N.offset>re){if((re=N.offset-re)>N.whave&&N.sane){T.msg="invalid distance too far back",N.mode=30;break}oe=re>N.wnext?(re-=N.wnext,N.wsize-re):N.wnext-re,re>N.length&&(re=N.length),Ce=N.window}else Ce=W,oe=J-N.offset,re=N.length;for(U<re&&(re=U),U-=re,N.length-=re;W[J++]=Ce[oe++],--re;);N.length===0&&(N.mode=21);break;case 26:if(U===0)break e;W[J++]=N.length,U--,N.mode=21;break;case 27:if(N.wrap){for(;q<32;){if(se===0)break e;se--,le|=G[Q++]<<q,q+=8}if(ee-=U,T.total_out+=ee,N.total+=ee,ee&&(T.adler=N.check=N.flags?l(N.check,W,ee,J-ee):s(N.check,W,ee,J-ee)),ee=U,(N.flags?le:w(le))!==N.check){T.msg="incorrect data check",N.mode=30;break}q=le=0}N.mode=28;case 28:if(N.wrap&&N.flags){for(;q<32;){if(se===0)break e;se--,le+=G[Q++]<<q,q+=8}if(le!==(4294967295&N.total)){T.msg="incorrect length check",N.mode=30;break}q=le=0}N.mode=29;case 29:Ae=1;break e;case 30:Ae=-3;break e;case 31:return-4;case 32:default:return g}return T.next_out=J,T.avail_out=U,T.next_in=Q,T.avail_in=se,N.hold=le,N.bits=q,(N.wsize||ee!==T.avail_out&&N.mode<30&&(N.mode<27||R!==4))&&O(T,T.output,T.next_out,ee-T.avail_out)?(N.mode=31,-4):(B-=T.avail_in,ee-=T.avail_out,T.total_in+=B,T.total_out+=ee,N.total+=ee,N.wrap&&ee&&(T.adler=N.check=N.flags?l(N.check,W,ee,T.next_out-ee):s(N.check,W,ee,T.next_out-ee)),T.data_type=N.bits+(N.last?64:0)+(N.mode===12?128:0)+(N.mode===20||N.mode===15?256:0),(B==0&&ee===0||R===4)&&Ae===b&&(Ae=-5),Ae)},i.inflateEnd=function(T){if(!T||!T.state)return g;var R=T.state;return R.window&&(R.window=null),T.state=null,b},i.inflateGetHeader=function(T,R){var N;return T&&T.state?(2&(N=T.state).wrap)==0?g:((N.head=R).done=!1,b):g},i.inflateSetDictionary=function(T,R){var N,G=R.length;return T&&T.state?(N=T.state).wrap!==0&&N.mode!==11?g:N.mode===11&&s(1,R,G,0)!==N.check?-3:O(T,R,G,G)?(N.mode=31,-4):(N.havedict=1,b):g},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,r,i){var a=t("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(f,m,b,g,x,y,A,w){var C,j,F,M,z,_,L,$,Z,O=w.bits,T=0,R=0,N=0,G=0,W=0,Q=0,J=0,se=0,U=0,le=0,q=null,B=0,ee=new a.Buf16(16),re=new a.Buf16(16),oe=null,Ce=0;for(T=0;T<=15;T++)ee[T]=0;for(R=0;R<g;R++)ee[m[b+R]]++;for(W=O,G=15;1<=G&&ee[G]===0;G--);if(G<W&&(W=G),G===0)return x[y++]=20971520,x[y++]=20971520,w.bits=1,0;for(N=1;N<G&&ee[N]===0;N++);for(W<N&&(W=N),T=se=1;T<=15;T++)if(se<<=1,(se-=ee[T])<0)return-1;if(0<se&&(f===0||G!==1))return-1;for(re[1]=0,T=1;T<15;T++)re[T+1]=re[T]+ee[T];for(R=0;R<g;R++)m[b+R]!==0&&(A[re[m[b+R]]++]=R);if(_=f===0?(q=oe=A,19):f===1?(q=s,B-=257,oe=l,Ce-=257,256):(q=u,oe=d,-1),T=N,z=y,J=R=le=0,F=-1,M=(U=1<<(Q=W))-1,f===1&&852<U||f===2&&592<U)return 1;for(;;){for(L=T-J,Z=A[R]<_?($=0,A[R]):A[R]>_?($=oe[Ce+A[R]],q[B+A[R]]):($=96,0),C=1<<T-J,N=j=1<<Q;x[z+(le>>J)+(j-=C)]=L<<24|$<<16|Z|0,j!==0;);for(C=1<<T-1;le&C;)C>>=1;if(C!==0?(le&=C-1,le+=C):le=0,R++,--ee[T]==0){if(T===G)break;T=m[b+A[R]]}if(W<T&&(le&M)!==F){for(J===0&&(J=W),z+=N,se=1<<(Q=T-J);Q+J<G&&!((se-=ee[Q+J])<=0);)Q++,se<<=1;if(U+=1<<Q,f===1&&852<U||f===2&&592<U)return 1;x[F=le&M]=W<<24|Q<<16|z-y|0}}return le!==0&&(x[z+le]=T-J<<24|64<<16|0),w.bits=W,0}},{"../utils/common":41}],51:[function(t,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,r,i){var a=t("../utils/common"),s=0,l=1;function u(fe){for(var ke=fe.length;0<=--ke;)fe[ke]=0}var d=0,f=29,m=256,b=m+1+f,g=30,x=19,y=2*b+1,A=15,w=16,C=7,j=256,F=16,M=17,z=18,_=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],L=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],$=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],O=new Array(2*(b+2));u(O);var T=new Array(2*g);u(T);var R=new Array(512);u(R);var N=new Array(256);u(N);var G=new Array(f);u(G);var W,Q,J,se=new Array(g);function U(fe,ke,Re,qe,je){this.static_tree=fe,this.extra_bits=ke,this.extra_base=Re,this.elems=qe,this.max_length=je,this.has_stree=fe&&fe.length}function le(fe,ke){this.dyn_tree=fe,this.max_code=0,this.stat_desc=ke}function q(fe){return fe<256?R[fe]:R[256+(fe>>>7)]}function B(fe,ke){fe.pending_buf[fe.pending++]=255&ke,fe.pending_buf[fe.pending++]=ke>>>8&255}function ee(fe,ke,Re){fe.bi_valid>w-Re?(fe.bi_buf|=ke<<fe.bi_valid&65535,B(fe,fe.bi_buf),fe.bi_buf=ke>>w-fe.bi_valid,fe.bi_valid+=Re-w):(fe.bi_buf|=ke<<fe.bi_valid&65535,fe.bi_valid+=Re)}function re(fe,ke,Re){ee(fe,Re[2*ke],Re[2*ke+1])}function oe(fe,ke){for(var Re=0;Re|=1&fe,fe>>>=1,Re<<=1,0<--ke;);return Re>>>1}function Ce(fe,ke,Re){var qe,je,Ze=new Array(A+1),ut=0;for(qe=1;qe<=A;qe++)Ze[qe]=ut=ut+Re[qe-1]<<1;for(je=0;je<=ke;je++){var rt=fe[2*je+1];rt!==0&&(fe[2*je]=oe(Ze[rt]++,rt))}}function ye(fe){var ke;for(ke=0;ke<b;ke++)fe.dyn_ltree[2*ke]=0;for(ke=0;ke<g;ke++)fe.dyn_dtree[2*ke]=0;for(ke=0;ke<x;ke++)fe.bl_tree[2*ke]=0;fe.dyn_ltree[2*j]=1,fe.opt_len=fe.static_len=0,fe.last_lit=fe.matches=0}function Se(fe){8<fe.bi_valid?B(fe,fe.bi_buf):0<fe.bi_valid&&(fe.pending_buf[fe.pending++]=fe.bi_buf),fe.bi_buf=0,fe.bi_valid=0}function Te(fe,ke,Re,qe){var je=2*ke,Ze=2*Re;return fe[je]<fe[Ze]||fe[je]===fe[Ze]&&qe[ke]<=qe[Re]}function Le(fe,ke,Re){for(var qe=fe.heap[Re],je=Re<<1;je<=fe.heap_len&&(je<fe.heap_len&&Te(ke,fe.heap[je+1],fe.heap[je],fe.depth)&&je++,!Te(ke,qe,fe.heap[je],fe.depth));)fe.heap[Re]=fe.heap[je],Re=je,je<<=1;fe.heap[Re]=qe}function He(fe,ke,Re){var qe,je,Ze,ut,rt=0;if(fe.last_lit!==0)for(;qe=fe.pending_buf[fe.d_buf+2*rt]<<8|fe.pending_buf[fe.d_buf+2*rt+1],je=fe.pending_buf[fe.l_buf+rt],rt++,qe===0?re(fe,je,ke):(re(fe,(Ze=N[je])+m+1,ke),(ut=_[Ze])!==0&&ee(fe,je-=G[Ze],ut),re(fe,Ze=q(--qe),Re),(ut=L[Ze])!==0&&ee(fe,qe-=se[Ze],ut)),rt<fe.last_lit;);re(fe,j,ke)}function Ye(fe,ke){var Re,qe,je,Ze=ke.dyn_tree,ut=ke.stat_desc.static_tree,rt=ke.stat_desc.has_stree,Pe=ke.stat_desc.elems,ve=-1;for(fe.heap_len=0,fe.heap_max=y,Re=0;Re<Pe;Re++)Ze[2*Re]!==0?(fe.heap[++fe.heap_len]=ve=Re,fe.depth[Re]=0):Ze[2*Re+1]=0;for(;fe.heap_len<2;)Ze[2*(je=fe.heap[++fe.heap_len]=ve<2?++ve:0)]=1,fe.depth[je]=0,fe.opt_len--,rt&&(fe.static_len-=ut[2*je+1]);for(ke.max_code=ve,Re=fe.heap_len>>1;1<=Re;Re--)Le(fe,Ze,Re);for(je=Pe;Re=fe.heap[1],fe.heap[1]=fe.heap[fe.heap_len--],Le(fe,Ze,1),qe=fe.heap[1],fe.heap[--fe.heap_max]=Re,fe.heap[--fe.heap_max]=qe,Ze[2*je]=Ze[2*Re]+Ze[2*qe],fe.depth[je]=(fe.depth[Re]>=fe.depth[qe]?fe.depth[Re]:fe.depth[qe])+1,Ze[2*Re+1]=Ze[2*qe+1]=je,fe.heap[1]=je++,Le(fe,Ze,1),2<=fe.heap_len;);fe.heap[--fe.heap_max]=fe.heap[1],function(Ne,De){var ft,et,Pt,Nt,Vt,Rt,Xt=De.dyn_tree,nn=De.max_code,cn=De.stat_desc.static_tree,Pn=De.stat_desc.has_stree,zn=De.stat_desc.extra_bits,Yr=De.stat_desc.extra_base,ir=De.stat_desc.max_length,Rn=0;for(Nt=0;Nt<=A;Nt++)Ne.bl_count[Nt]=0;for(Xt[2*Ne.heap[Ne.heap_max]+1]=0,ft=Ne.heap_max+1;ft<y;ft++)ir<(Nt=Xt[2*Xt[2*(et=Ne.heap[ft])+1]+1]+1)&&(Nt=ir,Rn++),Xt[2*et+1]=Nt,nn<et||(Ne.bl_count[Nt]++,Vt=0,Yr<=et&&(Vt=zn[et-Yr]),Rt=Xt[2*et],Ne.opt_len+=Rt*(Nt+Vt),Pn&&(Ne.static_len+=Rt*(cn[2*et+1]+Vt)));if(Rn!==0){do{for(Nt=ir-1;Ne.bl_count[Nt]===0;)Nt--;Ne.bl_count[Nt]--,Ne.bl_count[Nt+1]+=2,Ne.bl_count[ir]--,Rn-=2}while(0<Rn);for(Nt=ir;Nt!==0;Nt--)for(et=Ne.bl_count[Nt];et!==0;)nn<(Pt=Ne.heap[--ft])||(Xt[2*Pt+1]!==Nt&&(Ne.opt_len+=(Nt-Xt[2*Pt+1])*Xt[2*Pt],Xt[2*Pt+1]=Nt),et--)}}(fe,ke),Ce(Ze,ve,fe.bl_count)}function V(fe,ke,Re){var qe,je,Ze=-1,ut=ke[1],rt=0,Pe=7,ve=4;for(ut===0&&(Pe=138,ve=3),ke[2*(Re+1)+1]=65535,qe=0;qe<=Re;qe++)je=ut,ut=ke[2*(qe+1)+1],++rt<Pe&&je===ut||(rt<ve?fe.bl_tree[2*je]+=rt:je!==0?(je!==Ze&&fe.bl_tree[2*je]++,fe.bl_tree[2*F]++):rt<=10?fe.bl_tree[2*M]++:fe.bl_tree[2*z]++,Ze=je,ve=(rt=0)===ut?(Pe=138,3):je===ut?(Pe=6,3):(Pe=7,4))}function Ae(fe,ke,Re){var qe,je,Ze=-1,ut=ke[1],rt=0,Pe=7,ve=4;for(ut===0&&(Pe=138,ve=3),qe=0;qe<=Re;qe++)if(je=ut,ut=ke[2*(qe+1)+1],!(++rt<Pe&&je===ut)){if(rt<ve)for(;re(fe,je,fe.bl_tree),--rt!=0;);else je!==0?(je!==Ze&&(re(fe,je,fe.bl_tree),rt--),re(fe,F,fe.bl_tree),ee(fe,rt-3,2)):rt<=10?(re(fe,M,fe.bl_tree),ee(fe,rt-3,3)):(re(fe,z,fe.bl_tree),ee(fe,rt-11,7));Ze=je,ve=(rt=0)===ut?(Pe=138,3):je===ut?(Pe=6,3):(Pe=7,4)}}u(se);var ne=!1;function be(fe,ke,Re,qe){ee(fe,(d<<1)+(qe?1:0),3),function(je,Ze,ut,rt){Se(je),B(je,ut),B(je,~ut),a.arraySet(je.pending_buf,je.window,Ze,ut,je.pending),je.pending+=ut}(fe,ke,Re)}i._tr_init=function(fe){ne||(function(){var ke,Re,qe,je,Ze,ut=new Array(A+1);for(je=qe=0;je<f-1;je++)for(G[je]=qe,ke=0;ke<1<<_[je];ke++)N[qe++]=je;for(N[qe-1]=je,je=Ze=0;je<16;je++)for(se[je]=Ze,ke=0;ke<1<<L[je];ke++)R[Ze++]=je;for(Ze>>=7;je<g;je++)for(se[je]=Ze<<7,ke=0;ke<1<<L[je]-7;ke++)R[256+Ze++]=je;for(Re=0;Re<=A;Re++)ut[Re]=0;for(ke=0;ke<=143;)O[2*ke+1]=8,ke++,ut[8]++;for(;ke<=255;)O[2*ke+1]=9,ke++,ut[9]++;for(;ke<=279;)O[2*ke+1]=7,ke++,ut[7]++;for(;ke<=287;)O[2*ke+1]=8,ke++,ut[8]++;for(Ce(O,b+1,ut),ke=0;ke<g;ke++)T[2*ke+1]=5,T[2*ke]=oe(ke,5);W=new U(O,_,m+1,b,A),Q=new U(T,L,0,g,A),J=new U(new Array(0),$,0,x,C)}(),ne=!0),fe.l_desc=new le(fe.dyn_ltree,W),fe.d_desc=new le(fe.dyn_dtree,Q),fe.bl_desc=new le(fe.bl_tree,J),fe.bi_buf=0,fe.bi_valid=0,ye(fe)},i._tr_stored_block=be,i._tr_flush_block=function(fe,ke,Re,qe){var je,Ze,ut=0;0<fe.level?(fe.strm.data_type===2&&(fe.strm.data_type=function(rt){var Pe,ve=4093624447;for(Pe=0;Pe<=31;Pe++,ve>>>=1)if(1&ve&&rt.dyn_ltree[2*Pe]!==0)return s;if(rt.dyn_ltree[18]!==0||rt.dyn_ltree[20]!==0||rt.dyn_ltree[26]!==0)return l;for(Pe=32;Pe<m;Pe++)if(rt.dyn_ltree[2*Pe]!==0)return l;return s}(fe)),Ye(fe,fe.l_desc),Ye(fe,fe.d_desc),ut=function(rt){var Pe;for(V(rt,rt.dyn_ltree,rt.l_desc.max_code),V(rt,rt.dyn_dtree,rt.d_desc.max_code),Ye(rt,rt.bl_desc),Pe=x-1;3<=Pe&&rt.bl_tree[2*Z[Pe]+1]===0;Pe--);return rt.opt_len+=3*(Pe+1)+5+5+4,Pe}(fe),je=fe.opt_len+3+7>>>3,(Ze=fe.static_len+3+7>>>3)<=je&&(je=Ze)):je=Ze=Re+5,Re+4<=je&&ke!==-1?be(fe,ke,Re,qe):fe.strategy===4||Ze===je?(ee(fe,2+(qe?1:0),3),He(fe,O,T)):(ee(fe,4+(qe?1:0),3),function(rt,Pe,ve,Ne){var De;for(ee(rt,Pe-257,5),ee(rt,ve-1,5),ee(rt,Ne-4,4),De=0;De<Ne;De++)ee(rt,rt.bl_tree[2*Z[De]+1],3);Ae(rt,rt.dyn_ltree,Pe-1),Ae(rt,rt.dyn_dtree,ve-1)}(fe,fe.l_desc.max_code+1,fe.d_desc.max_code+1,ut+1),He(fe,fe.dyn_ltree,fe.dyn_dtree)),ye(fe),qe&&Se(fe)},i._tr_tally=function(fe,ke,Re){return fe.pending_buf[fe.d_buf+2*fe.last_lit]=ke>>>8&255,fe.pending_buf[fe.d_buf+2*fe.last_lit+1]=255&ke,fe.pending_buf[fe.l_buf+fe.last_lit]=255&Re,fe.last_lit++,ke===0?fe.dyn_ltree[2*Re]++:(fe.matches++,ke--,fe.dyn_ltree[2*(N[Re]+m+1)]++,fe.dyn_dtree[2*q(ke)]++),fe.last_lit===fe.lit_bufsize-1},i._tr_align=function(fe){ee(fe,2,3),re(fe,j,O),function(ke){ke.bi_valid===16?(B(ke,ke.bi_buf),ke.bi_buf=0,ke.bi_valid=0):8<=ke.bi_valid&&(ke.pending_buf[ke.pending++]=255&ke.bi_buf,ke.bi_buf>>=8,ke.bi_valid-=8)}(fe)}},{"../utils/common":41}],53:[function(t,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,r,i){(function(a){(function(s,l){if(!s.setImmediate){var u,d,f,m,b=1,g={},x=!1,y=s.document,A=Object.getPrototypeOf&&Object.getPrototypeOf(s);A=A&&A.setTimeout?A:s,u={}.toString.call(s.process)==="[object process]"?function(F){process.nextTick(function(){C(F)})}:function(){if(s.postMessage&&!s.importScripts){var F=!0,M=s.onmessage;return s.onmessage=function(){F=!1},s.postMessage("","*"),s.onmessage=M,F}}()?(m="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",j,!1):s.attachEvent("onmessage",j),function(F){s.postMessage(m+F,"*")}):s.MessageChannel?((f=new MessageChannel).port1.onmessage=function(F){C(F.data)},function(F){f.port2.postMessage(F)}):y&&"onreadystatechange"in y.createElement("script")?(d=y.documentElement,function(F){var M=y.createElement("script");M.onreadystatechange=function(){C(F),M.onreadystatechange=null,d.removeChild(M),M=null},d.appendChild(M)}):function(F){setTimeout(C,0,F)},A.setImmediate=function(F){typeof F!="function"&&(F=new Function(""+F));for(var M=new Array(arguments.length-1),z=0;z<M.length;z++)M[z]=arguments[z+1];var _={callback:F,args:M};return g[b]=_,u(b),b++},A.clearImmediate=w}function w(F){delete g[F]}function C(F){if(x)setTimeout(C,0,F);else{var M=g[F];if(M){x=!0;try{(function(z){var _=z.callback,L=z.args;switch(L.length){case 0:_();break;case 1:_(L[0]);break;case 2:_(L[0],L[1]);break;case 3:_(L[0],L[1],L[2]);break;default:_.apply(l,L)}})(M)}finally{w(F),x=!1}}}}function j(F){F.source===s&&typeof F.data=="string"&&F.data.indexOf(m)===0&&C(+F.data.slice(m.length))}})(typeof self>"u"?a===void 0?this:a:self)}).call(this,typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(ww)),ww.exports}var wJ=vJ();const SJ=ns(wJ),AJ=async(e,n,t)=>{const r=new SJ,i=["timestamp,question,answer"];n.forEach(({timestamp:u,question:d,answer:f})=>{i.push(`"${new Date(u).toLocaleString()}","${d.replace(/"/g,'""')}","${f.replace(/"/g,'""')}"`)}),r.file(`${e}.csv`,i.join(`
`)),r.file(`${e}_metadata.json`,JSON.stringify(t,null,4));const a=await r.generateAsync({type:"blob"}),s=URL.createObjectURL(a),l=document.createElement("a");l.href=s,l.download=`${e}.zip`,document.body.appendChild(l),l.click(),document.body.removeChild(l)},CJ=ip(de)({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"600px",maxHeight:"80vh",overflowY:"auto",backgroundColor:"#fff",borderRadius:"10px",boxShadow:"0px 5px 15px rgba(0,0,0,0.2)",padding:"20px"}),kJ=ip(de)({marginBottom:"20px",display:"flex",justifyContent:"space-between",alignItems:"center"}),EJ=({open:e,onClose:n,conversationHistory:t,conversationId:r,conversationHistoryError:i,chatbotDetails:a,userId:s,startedAt:l})=>{const u=async()=>{const d={conversationId:r,userId:s,chatbotId:a.chatbotId,chatbotTitle:a.chatbotTitle,startedAt:new Date(l).toLocaleString(),courseTitle:a.courseTitle,courseId:a.courseId,materialTitle:a.materialTitle,materialId:a.materialId,materialLink:a.materialLink,chatbotCreatedBy:a.chatbotCreatedBy,chatbotCreatedAt:new Date(a.chatbotCreatedAt).toLocaleString()};await AJ(r,t,d)};return h.jsx(vx,{open:e,onClose:n,children:h.jsxs(CJ,{children:[h.jsxs(kJ,{children:[h.jsxs(he,{variant:"h6",children:["Conversation History for ",r]}),h.jsx(fi,{title:"Download ZIP",children:h.jsx(_n,{onClick:u,"aria-label":"Download as ZIP",children:h.jsx(mF,{})})})]}),i&&h.jsx(he,{color:"error",sx:{marginBottom:"20px"},children:i}),t.length===0?h.jsx(he,{children:"No messages found in this conversation."}):h.jsx(Gh,{children:t.map((d,f)=>h.jsx(yd,{sx:{padding:"10px 0"},children:h.jsx(dc,{primary:`Q: ${d.question}`,secondary:`A: ${d.answer} (${new Date(d.timestamp).toLocaleString()})`})},f))}),h.jsx(Ct,{variant:"contained",onClick:n,style:{marginTop:"20px",backgroundColor:"#000",color:"#fff"},children:"Close"})]})})},_J=({totalItems:e,itemsPerPage:n,currentPage:t,onPageChange:r})=>{const i=Math.ceil(e/n),a=()=>{t>1&&r(t-1)},s=()=>{t<i&&r(t+1)};return h.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:3},children:[h.jsx(Ct,{variant:"outlined",disabled:t===1,onClick:a,children:"Previous"}),h.jsxs(he,{variant:"body1",children:["Page ",t," of ",i]}),h.jsx(Ct,{variant:"outlined",disabled:t===i,onClick:s,children:"Next"})]})},NJ=({chatbotId:e})=>{const n=Xn(),[t,r]=X.useState(null),[i,a]=X.useState(!0),[s,l]=X.useState(null);if(X.useEffect(()=>{e!=="All"&&(async()=>{a(!0),l(null);try{const C=Ol(ln(n,"chatbots"),Ri("chatbotId","==",e)),j=await Ci(C);j.empty?l("Chatbot details not found!"):r(j.docs[0].data())}catch(C){console.error("Error fetching chatbot details:",C),l("Failed to fetch chatbot details.")}finally{a(!1)}})()},[n,e]),i)return h.jsx(de,{sx:{mt:3},children:h.jsx(Zr,{})});if(s)return h.jsx(he,{variant:"body1",color:"error",sx:{mt:3},children:s});if(!t)return null;const{title:u="N/A",courseId:d,createdBy:f="Unknown",timestamp:m,material:b}=t,g=(d==null?void 0:d.title)||"N/A",x=(b==null?void 0:b.title)||"N/A",y=(b==null?void 0:b.id)||"N/A",A=`https://nexlab.bio/view-material/${y}`;return h.jsxs(de,{sx:{mt:3,p:2,border:"1px solid #ddd",borderRadius:"8px",backgroundColor:"#f9f9f9"},children:[h.jsx(he,{variant:"h6",children:"Chatbot Details"}),h.jsxs(he,{variant:"body1",children:[h.jsx("strong",{children:"Title:"})," ",u]}),h.jsxs(he,{variant:"body1",children:[h.jsx("strong",{children:"Course:"})," ",g]}),h.jsxs(he,{variant:"body1",children:[h.jsx("strong",{children:"Material:"})," ",y!=="N/A"?h.jsx(Og,{href:A,target:"_blank",rel:"noopener noreferrer",children:x}):x]}),h.jsx(qs,{sx:{my:2}}),h.jsxs(he,{variant:"body1",children:[h.jsx("strong",{children:"Created By:"})," ",f]}),h.jsxs(he,{variant:"body1",children:[h.jsx("strong",{children:"Created At:"})," ",m?new Date(m).toLocaleString():"N/A"]})]})},S_=ip(Ct)({width:100,height:40,display:"flex",alignItems:"center",justifyContent:"center"}),jJ=({open:e,onClose:n,onConfirm:t,conversationId:r,deleting:i})=>h.jsxs(Zi,{open:e,onClose:n,children:[h.jsx(pa,{children:"Confirm Deletion"}),h.jsx(Ji,{children:h.jsxs(Il,{children:["Are you sure you want to delete the conversation with ID: ",h.jsx("strong",{children:r}),"? This action cannot be undone."]})}),h.jsxs(ma,{children:[h.jsx(S_,{onClick:n,color:"primary",variant:"outlined",children:"Cancel"}),h.jsx(S_,{onClick:t,color:"error",disabled:i,children:i?h.jsx(Zr,{size:20,color:"inherit"}):"Delete"})]})]}),TJ=()=>{const e=Xn(),[n,t]=X.useState([]),[r,i]=X.useState([]),[a,s]=X.useState(1),[l]=X.useState(10),[u,d]=X.useState(!0),[f,m]=X.useState(null),[b,g]=X.useState([]),[x,y]=X.useState(null),[A,w]=X.useState(!1),[C,j]=X.useState(null),[F,M]=X.useState({}),z="https://rag-flask-api.onrender.com",[_,L]=X.useState([]),[$,Z]=X.useState([]),[O,T]=X.useState("All"),[R,N]=X.useState("All"),[G,W]=X.useState(null),[Q,J]=X.useState(null),[se,U]=X.useState(!1),[le,q]=X.useState(null),[B,ee]=X.useState(!1),[re,oe]=X.useState({open:!1,message:"",type:"success"}),Ce=()=>{oe(ne=>({...ne,open:!1}))};X.useEffect(()=>{(async()=>{try{const fe=(await Ci(ln(e,"conversations"))).docs.map(qe=>({id:qe.id,...qe.data()}));t(fe);const ke=Array.from(new Set(fe.map(qe=>qe.chatbotId)));L(fe.length>0?["All",...ke]:[]);const Re=Array.from(new Set(fe.map(qe=>qe.userId)));Z(fe.length>0?["All",...Re]:[]),i(fe)}catch(be){console.error("Error fetching chatbot conversations:",be),m("Failed to load conversations. Please try again later.")}finally{d(!1)}})()},[e]);const ye=(ne,be)=>{ne==="chatbot"?T(be):N(be);const fe=ne==="chatbot"?be:O,ke=ne==="user"?be:R;let Re=n;fe!=="All"&&(Re=Re.filter(qe=>qe.chatbotId===fe)),ke!=="All"&&(Re=Re.filter(qe=>qe.userId===ke)),i(Re),fe==="All"&&ke==="All"&&i(n),s(1)},Se=async(ne,be,fe,ke)=>{var Re,qe,je,Ze,ut;M(rt=>({...rt,[be]:!0})),y(null);try{const rt=await ba.get(`${z}/conversations/${ne}/${be}`);g(rt.data);const Ne=(await(async()=>{try{const De=new Map;return(await Ci(ln(e,"chatbots"))).forEach(et=>{De.set(et.data().chatbotId,et.data())}),De}catch(De){return console.error("Error fetching chatbots:",De),new Map}})()).get(ne);W(Ne?{chatbotId:ne,chatbotTitle:Ne.title||"N/A",courseTitle:((Re=Ne.courseId)==null?void 0:Re.title)||"N/A",courseId:((qe=Ne.courseId)==null?void 0:qe.id)||"N/A",materialTitle:((je=Ne.material)==null?void 0:je.title)||"N/A",materialId:((Ze=Ne.material)==null?void 0:Ze.id)||"N/A",materialLink:`https://nexlab.bio/view-material/${((ut=Ne.material)==null?void 0:ut.id)||""}`,chatbotCreatedBy:Ne.createdBy||"Unknown",chatbotCreatedAt:Ne.timestamp||"N/A"}:null),J({userId:fe,startedAt:ke}),j({chatbotId:ne,conversationId:be}),w(!0)}catch(rt){console.error("Error fetching conversation or chatbot details:",rt),y("Failed to fetch conversation history or chatbot details.")}finally{M(rt=>({...rt,[be]:!1}))}},Te=a*l,Le=Te-l,He=r.slice(Le,Te);if(u)return h.jsx(de,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:h.jsx(Zr,{})});if(f)return h.jsx(de,{sx:{textAlign:"center",mt:4},children:h.jsx(he,{variant:"h6",color:"error",children:f})});const Ye=ne=>{q(ne),U(!0)},V=()=>{U(!1),q(null)},Ae=async()=>{if(le){ee(!0);try{await Ig(un(e,"conversations",le)),t(ne=>ne.filter(be=>be.id!==le)),i(ne=>ne.filter(be=>be.id!==le)),oe({open:!0,message:"Conversation deleted successfully.",type:"success"}),V()}catch(ne){console.error("Error deleting conversation:",ne),oe({open:!0,message:"Failed to delete the conversation. Please try again.",type:"error"})}finally{ee(!1),V()}}};return h.jsxs(de,{className:"profile-container",sx:{p:4},children:[h.jsx(So,{title:"Chatbot Conversations"}),h.jsxs(de,{sx:{display:"flex",gap:2,mb:3},children:[h.jsxs(Td,{sx:{minWidth:200},children:[h.jsx(ap,{id:"filter-chatbot-id",children:"Filter by Chatbot ID"}),h.jsx(Dc,{labelId:"filter-chatbot-id",value:O,onChange:ne=>ye("chatbot",ne.target.value),children:_.length>0?_.map(ne=>h.jsx(ai,{value:ne,children:ne},ne)):h.jsx(ai,{value:"",disabled:!0,children:"No Chatbots Available"})})]}),h.jsxs(Td,{sx:{minWidth:200},children:[h.jsx(ap,{id:"filter-user-id",children:"Filter by User ID"}),h.jsx(Dc,{labelId:"filter-user-id",value:R,onChange:ne=>ye("user",ne.target.value),children:$.map(ne=>h.jsx(ai,{value:ne,children:ne},ne))})]})]}),O!=="All"&&h.jsx(NJ,{chatbotId:O}),h.jsxs(de,{className:"profile-container",sx:{p:4},children:[h.jsx(UX,{conversations:He,onViewHistory:(ne,be,fe)=>Se(ne,be,fe.userId,fe.startedAt),onDeleteConversation:Ye,loadingMap:F,loading:u}),h.jsx(jJ,{open:se,onClose:V,onConfirm:Ae,conversationId:le||"",deleting:B})]}),h.jsx(_J,{totalItems:r.length,itemsPerPage:l,currentPage:a,onPageChange:s}),C&&G&&Q&&h.jsx(EJ,{open:A,onClose:()=>{w(!1),j(null)},conversationHistory:b,conversationId:C.conversationId,conversationHistoryError:x,chatbotDetails:G,userId:Q.userId,startedAt:Q.startedAt}),h.jsx(Ll,{open:re.open,autoHideDuration:3e3,onClose:Ce,message:re.message,anchorOrigin:{vertical:"top",horizontal:"center"},ContentProps:{style:{backgroundColor:re.type==="success"?"#4caf50":"#f44336"}}})]})},OJ=({requests:e,loading:n=!1,onApprove:t,chatbotIdMap:r,onChatbotIdChange:i})=>{const[a,s]=X.useState(0),[l,u]=X.useState(10),d=A=>{switch(A.toLowerCase()){case"approved":return"success";case"pending":return"warning";case"denied":return"error";default:return"default"}},f=A=>A.charAt(0).toUpperCase()+A.slice(1),m=(A,w)=>A==="approved"?"Approved":A==="denied"?"Denied":"Enter ID",b=[{id:"title",label:"Title",width:"15%",render:A=>h.jsx(Za,{text:A,maxLength:999,weight:"semibold"})},{id:"courseNumber",label:"Course",width:"18%",render:(A,w)=>h.jsxs(de,{sx:{display:"flex",flexDirection:"column",gap:$e[1]},children:[h.jsx(bp,{courseId:w.courseId,courseNumber:A,courseTitle:w.courseTitle,variant:"link",maxTitleLength:999}),h.jsx(LT,{courseId:w.courseId})]})},{id:"materialTitle",label:"Material",width:"15%",render:(A,w)=>h.jsxs(de,{sx:{display:"flex",flexDirection:"column",gap:$e[1]},children:[A&&w.materialId?h.jsx(OT,{materialId:w.materialId,materialTitle:A,variant:"link",maxTitleLength:999}):h.jsx(Za,{text:"N/A",variant:"secondary"}),w.materialId&&h.jsx(iF,{materialId:w.materialId})]})},{id:"educatorId",label:"Educator",width:"12%",render:A=>h.jsx(ih,{userId:A,userType:"educator"})},{id:"timestamp",label:"Submitted",width:"10%",render:A=>h.jsx(yp,{date:new Date(A),format:"full"})},{id:"status",label:"Status",width:"8%",render:A=>h.jsx(cv,{label:f(A),status:d(A)})},{id:"files",label:"Files",width:"8%",render:A=>h.jsxs(de,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[A&&A.length>0?A.slice(0,2).map((w,C)=>h.jsxs(Og,{href:w,target:"_blank",rel:"noopener noreferrer",sx:{fontSize:"0.7rem",color:K.primary[600],textDecoration:"none","&:hover":{textDecoration:"underline"}},children:["File ",C+1]},C)):h.jsx(Za,{text:"No files",variant:"secondary"}),A&&A.length>2&&h.jsx(Za,{text:`+${A.length-2}`,variant:"secondary"})]})},{id:"chatbotId",label:"Chatbot ID",width:"12%",render:(A,w)=>w.status==="pending"?h.jsx(Jt,{size:"small",variant:"outlined",placeholder:"Enter ID",value:r[w.id]||"",onChange:j=>i(w.id,j.target.value),sx:{width:"100%","& .MuiOutlinedInput-root":{fontSize:we.fontSize.xs,height:"32px",fontFamily:"monospace"}}}):A?h.jsx(IT,{chatbotId:A}):h.jsx(Za,{text:"Not assigned",variant:"secondary"})},{id:"actions",label:"Action",width:"8%",align:"center",render:(A,w)=>{var F;const C=w.status==="pending",j=(F=r[w.id])==null?void 0:F.trim();return C?h.jsx(zg,{actions:[{icon:og.add,tooltip:j?"Approve Request":"Enter Chatbot ID first",onClick:()=>t(w.id,r[w.id]),disabled:!j,color:K.success,hoverColor:K.success+"20"}]}):h.jsx(Za,{text:m(w.status),variant:"secondary",weight:"medium"})}}],g=(A,w)=>{s(w)},x=A=>{u(parseInt(A.target.value,10)),s(0)},y=e.slice(a*l,a*l+l);return h.jsxs(de,{children:[h.jsx(rh,{data:y,columns:b,loading:n,emptyMessage:"No chatbot requests found.",stickyHeader:!1}),e.length>0&&h.jsx(gn,{elevation:0,sx:{borderRadius:0,borderTop:`1px solid ${K.neutral[200]}`},children:h.jsx(A3,{rowsPerPageOptions:[5,10,25,50],component:"div",count:e.length,rowsPerPage:l,page:a,onPageChange:g,onRowsPerPageChange:x,sx:{"& .MuiTablePagination-toolbar":{paddingLeft:$e[4],paddingRight:$e[4]},"& .MuiTablePagination-selectLabel, & .MuiTablePagination-displayedRows":{color:K.text.secondary,fontSize:we.fontSize.sm}}})})]})},DJ=()=>{const[e,n]=X.useState([]),[t,r]=X.useState(!0),[i,a]=X.useState({}),[s,l]=X.useState(!1),[u,d]=X.useState(""),[f,m]=X.useState("success");X.useEffect(()=>{(async()=>{const A=Xn(),w=ln(A,"chatbotRequests");try{const j=(await Ci(w)).docs.map(F=>({id:F.id,...F.data()}));n(j)}catch(C){console.error("Error fetching chatbot requests:",C)}finally{r(!1)}})()},[]);const b=async y=>{const A=i[y];if(!A){d("Please assign a Chatbot ID before approving the request."),m("error"),l(!0);return}try{const w=Xn(),C=un(w,"chatbotRequests",y),j=await ga(C);if(!j.exists()){d("Request not found. Please refresh the page."),m("error"),l(!0);return}const F=j.data();if(F.status!=="pending"){d("This request has already been processed."),m("warning"),l(!0);return}await Hr(C,{status:"approved",chatbotId:A});const M={chatbotId:A,title:F.title,courseId:{id:F.courseId,number:F.courseNumber,title:F.courseTitle},material:{id:F.materialId||null,title:F.materialTitle||"N/A"},createdBy:F.educatorId,files:F.files,timestamp:new Date().toISOString()};await Ai(ln(w,"chatbots"),M),n(z=>z.map(_=>_.id===y?{..._,status:"approved",chatbotId:A}:_)),d("Chatbot request approved and chatbot created successfully!"),m("success"),l(!0)}catch(w){console.error("Error approving chatbot request or creating chatbot:",w),d("Failed to approve the request and create the chatbot. Please try again."),m("error"),l(!0)}},g=()=>{l(!1)},x=(y,A)=>{a(w=>({...w,[y]:A}))};return t?h.jsx(de,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:h.jsx(Zr,{})}):e.length===0?h.jsx(he,{variant:"body1",sx:{textAlign:"center",mt:4},children:"No chatbot requests found."}):h.jsxs(de,{sx:{p:$e[6],backgroundColor:K.background.primary,minHeight:"100vh"},children:[h.jsx(So,{title:"Chatbot Requests Management"}),h.jsx(he,{variant:"body1",sx:{mb:$e[4],color:K.text.secondary},children:"Manage chatbot requests submitted by educators. Approve requests and assign Chatbot IDs."}),h.jsx(OJ,{requests:e,loading:t,onApprove:b,chatbotIdMap:i,onChatbotIdChange:x}),h.jsx(Ll,{open:s,autoHideDuration:6e3,onClose:g,children:h.jsx(rr,{onClose:g,severity:f,sx:{width:"100%"},children:u})})]})},vg=Xn(),wg={CHATBOTS:"chatbots",QUIZ_SESSIONS:"quizSessions",QUIZ_EVENTS:"quizEvents",USERS:"users"},IJ=async()=>{var e,n,t,r;try{console.log(" Loading chatbots with quiz information...");const i=Ol(ln(vg,wg.CHATBOTS),sv("timestamp","desc")),a=await Ci(i),s=[];for(const l of a.docs){const u=l.data(),d={chatbotId:u.chatbotId,title:u.title||"Untitled Chatbot",materialTitle:((e=u.material)==null?void 0:e.title)||"Unknown Material",materialId:((n=u.material)==null?void 0:n.id)||"",courseId:((t=u.courseId)==null?void 0:t.id)||"",courseTitle:((r=u.courseId)==null?void 0:r.title)||"Unknown Course",createdBy:u.createdBy||"",timestamp:u.timestamp||new Date().toISOString(),quizId:null,hasQuiz:!0};s.push(d)}for(const l of s)try{const u=Ol(ln(vg,wg.QUIZ_SESSIONS),Ri("chatbotId","==",l.chatbotId),ov(1)),d=await Ci(u);if(!d.empty){const f=d.docs[0].data();l.quizId=f.quizId||null}}catch(u){console.warn(` Could not fetch quiz ID for chatbot ${l.chatbotId}:`,u),l.quizId=null}return console.log(` Loaded ${s.length} chatbots with quiz information`),s}catch(i){throw console.error(" Error loading chatbots with quizzes:",i),i}},LJ=async(e={},n=100,t)=>{var r,i;try{console.log(" Loading enhanced quiz sessions with filters:",e);const a=ln(vg,wg.QUIZ_SESSIONS),s=[];e.chatbotId&&s.push(Ri("chatbotId","==",e.chatbotId)),e.difficulty&&e.difficulty!=="all"&&s.push(Ri("difficulty","==",e.difficulty)),e.completionStatus&&e.completionStatus!=="all"&&s.push(Ri("completed","==",e.completionStatus==="completed")),e.userId&&s.push(Ri("userId","==",e.userId)),e.dateRange&&(s.push(Ri("startedAt",">=",Si.fromDate(new Date(e.dateRange.start)))),s.push(Ri("startedAt","<=",Si.fromDate(new Date(e.dateRange.end))))),s.push(sv("startedAt","desc")),s.push(ov(n));const l=Ol(a,...s),u=await Ci(l),d=[],f=new Map;for(const g of u.docs){const x=g.data();let y=f.get(x.userId);if(!y){const F=x.userId.length>12?`${x.userId.substring(0,8)}...${x.userId.slice(-4)}`:x.userId.substring(0,12);y={email:F,displayName:`User ${F}`},f.set(x.userId,y)}let A,w;if(x.startedAt&&x.submittedAt){const F=x.startedAt.toMillis(),M=x.submittedAt.toMillis(),z=Math.round((M-F)/1e3),_=Math.floor(z/60),L=z%60;A=z,w=`${_}m ${L}s`}const C=Object.keys(x.finalAnswers||{}).length,j={id:g.id,quizId:x.quizId,chatbotId:x.chatbotId,userId:x.userId,userEmail:y.email,userName:y.displayName,difficulty:x.difficulty,startedAt:x.startedAt.toDate().toISOString(),submittedAt:(r=x.submittedAt)==null?void 0:r.toDate().toISOString(),closedAt:(i=x.closedAt)==null?void 0:i.toDate().toISOString(),completed:x.completed,answers:x.finalAnswers||{},summary:x.summary,questionsAttempted:C,timeSpent:A,timeSpentFormatted:w};d.push(j)}const m=u.docs.length===n,b=u.docs.length>0?u.docs[u.docs.length-1]:void 0;return console.log(` Loaded ${d.length} enhanced quiz sessions`),{sessions:d,hasMore:m,lastDoc:b}}catch(a){throw console.error(" Error loading enhanced quiz sessions:",a),a}},RJ=async e=>{var n;try{console.log(" Loading quiz pool for quiz:",e);const t=Ol(ln(vg,wg.QUIZ_SESSIONS),Ri("quizId","==",e),sv("startedAt","desc"),ov(50)),r=await Ci(t),i=new Set,a=new Map;for(const m of r.docs){const b=m.data();(n=b.summary)!=null&&n.items&&Object.keys(b.summary.items).forEach(g=>{i.add(g)}),b.finalAnswers&&Object.entries(b.finalAnswers).forEach(([g,x])=>{i.add(g),a.has(g)||a.set(g,x)})}const s=Array.from(i).map(m=>{const b=a.get(m)||"",g=b.length>0?`Question about: ${b.split(" ").slice(0,10).join(" ")}${b.split(" ").length>10?"...":""}`:"Question text not available";return{questionId:m,question:g,category:"Biology Fundamentals",difficulty:"medium",maxScore:100}}),l=s.length>0?s:[{questionId:"no-sessions-found",question:"No quiz sessions found for this quiz ID. Question IDs will appear here once students take quizzes.",category:"Biology Fundamentals",difficulty:"medium",maxScore:100}],u={},d={easy:0,medium:0,hard:0};l.forEach(m=>{u[m.category]=(u[m.category]||0)+1,d[m.difficulty]=(d[m.difficulty]||0)+1});const f={quizId:e,chatbotId:e,questions:l,categoryCounts:u,difficultyBreakdown:d,totalQuestions:l.length,lastUpdated:new Date().toISOString()};return console.log(` Loaded quiz pool with ${l.length} real question IDs from ${r.docs.length} sessions`),f}catch(t){throw console.error(" Error loading quiz pool:",t),t}},MJ=e=>{try{console.log(" Generating quiz analytics from",e.length,"sessions");const n=e.filter(f=>f.completed&&f.summary),t=e.length,r=t>0?n.length/t*100:0,i=n.length>0?n.reduce((f,m)=>{var b;return f+(((b=m.summary)==null?void 0:b.percent)||0)},0)/n.length:0,a=e.filter(f=>f.timeSpent).length>0?Math.round(e.filter(f=>f.timeSpent).reduce((f,m)=>f+(m.timeSpent||0),0)/e.filter(f=>f.timeSpent).length):0,s={easy:0,medium:0,hard:0};e.forEach(f=>{s[f.difficulty]=(s[f.difficulty]||0)+1});const l={};n.forEach(f=>{var m;(m=f.summary)!=null&&m.items&&Object.values(f.summary.items).forEach(b=>{const g="Mixed Questions";l[g]||(l[g]={averageScore:0,totalAttempts:0,successRate:0}),l[g].totalAttempts+=1,l[g].averageScore+=b.score,b.verdict==="correct"&&(l[g].successRate+=1)})}),Object.keys(l).forEach(f=>{const m=l[f];m.totalAttempts>0&&(m.averageScore=m.averageScore/m.totalAttempts,m.successRate=m.successRate/m.totalAttempts*100)});const u={daily:{},weekly:{},monthly:{}};e.forEach(f=>{const m=new Date(f.startedAt),b=m.toISOString().split("T")[0],g=`${m.getFullYear()}-W${Math.ceil(m.getDate()/7)}`,x=`${m.getFullYear()}-${String(m.getMonth()+1).padStart(2,"0")}`;u.daily[b]=(u.daily[b]||0)+1,u.weekly[g]=(u.weekly[g]||0)+1,u.monthly[x]=(u.monthly[x]||0)+1});const d={totalSessions:t,completionRate:r,averageScore:i,averageTimeSpent:a,difficultyDistribution:s,categoryPerformance:l,timeBasedStats:u};return console.log(" Generated quiz analytics:",d),d}catch(n){throw console.error(" Error generating quiz analytics:",n),n}},FJ=async e=>{var n;try{console.log(" Exporting quiz session data for:",e);const t=await ga(un(vg,wg.QUIZ_SESSIONS,e));if(!t.exists())throw new Error("Quiz session not found");const r=t.data(),i={sessionId:e,quizId:r.quizId,chatbotId:r.chatbotId,userId:r.userId,difficulty:r.difficulty,startedAt:r.startedAt.toDate().toISOString(),submittedAt:(n=r.submittedAt)==null?void 0:n.toDate().toISOString(),completed:r.completed,answers:r.finalAnswers||{},summary:r.summary,exportedAt:new Date().toISOString()},a=JSON.stringify(i,null,2),s=new Blob([a],{type:"application/json"});return console.log(" Quiz session data exported successfully"),s}catch(t){throw console.error(" Error exporting quiz session data:",t),t}},A_={difficulty:"all",completionStatus:"all"},$D=gp()(qg(dv((e,n)=>({courses:[],selectedCourse:null,chatbotsWithQuizzes:[],filteredChatbots:[],selectedChatbot:null,quizSessions:[],quizPools:{},analytics:null,loading:!1,error:null,filters:A_,selectedSession:null,loadChatbotsWithQuizzes:async()=>{try{e({loading:!0,error:null}),console.log(" Quiz Management Store: Loading chatbots with quizzes...");const t=await IJ(),r=new Map;t.forEach(a=>{r.has(a.courseId)||r.set(a.courseId,{courseId:a.courseId,courseTitle:a.courseTitle,chatbotCount:0,quizCount:0});const s=r.get(a.courseId);s.chatbotCount++,a.quizId&&s.quizCount++});const i=Array.from(r.values()).sort((a,s)=>a.courseTitle.localeCompare(s.courseTitle));e({chatbotsWithQuizzes:t,courses:i,filteredChatbots:t,loading:!1}),console.log(` Loaded ${t.length} chatbots with quiz information from ${i.length} courses`)}catch(t){console.error(" Failed to load chatbots with quizzes:",t),e({error:t instanceof Error?t.message:"Failed to load chatbots",loading:!1})}},selectCourse:t=>{console.log(" Quiz Management Store: Selecting course:",t==null?void 0:t.courseId);const{chatbotsWithQuizzes:r}=n(),i=t?r.filter(a=>a.courseId===t.courseId):r;e({selectedCourse:t,filteredChatbots:i,selectedChatbot:null,selectedSession:null,quizSessions:[]})},selectChatbot:t=>{console.log(" Quiz Management Store: Selecting chatbot:",t==null?void 0:t.chatbotId),e({selectedChatbot:t,selectedSession:null,filters:{...n().filters,chatbotId:t==null?void 0:t.chatbotId}}),t&&n().loadQuizSessions(t.chatbotId)},loadQuizSessions:async t=>{try{e({loading:!0,error:null}),console.log(" Quiz Management Store: Loading quiz sessions for chatbot:",t);const r=n().filters,i=t?{...r,chatbotId:t}:r,a=await LJ(i);e({quizSessions:a.sessions,loading:!1}),n().generateAnalytics(),console.log(` Loaded ${a.sessions.length} enhanced quiz sessions`)}catch(r){console.error(" Failed to load quiz sessions:",r),e({error:r instanceof Error?r.message:"Failed to load quiz sessions",loading:!1})}},loadQuizPool:async t=>{try{e({loading:!0,error:null}),console.log(" Quiz Management Store: Loading quiz pool for:",t);const r=await RJ(t);e(i=>({quizPools:{...i.quizPools,[t]:r},loading:!1})),console.log(` Loaded quiz pool with ${r.totalQuestions} questions`)}catch(r){console.error(" Failed to load quiz pool:",r),e({error:r instanceof Error?r.message:"Failed to load quiz pool",loading:!1})}},updateFilters:t=>{const r={...n().filters,...t};console.log(" Quiz Management Store: Updating filters:",r),e({filters:r}),n().loadQuizSessions(r.chatbotId)},selectSession:t=>{console.log(" Quiz Management Store: Selecting session:",t==null?void 0:t.id),e({selectedSession:t})},generateAnalytics:()=>{try{const{quizSessions:t}=n();console.log(" Quiz Management Store: Generating analytics from",t.length,"sessions");const r=MJ(t);e({analytics:r}),console.log(" Generated quiz analytics successfully")}catch(t){console.error(" Failed to generate analytics:",t),e({error:t instanceof Error?t.message:"Failed to generate analytics"})}},exportSessionData:async t=>{try{e({loading:!0,error:null}),console.log(" Quiz Management Store: Exporting session data for:",t);const r=await FJ(t),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=`quiz-session-${t}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i),e({loading:!1}),console.log(" Quiz session data exported successfully")}catch(r){console.error(" Failed to export session data:",r),e({error:r instanceof Error?r.message:"Failed to export session data",loading:!1})}},clearError:()=>{e({error:null})},reset:()=>{console.log(" Quiz Management Store: Resetting store state"),e({chatbotsWithQuizzes:[],selectedChatbot:null,quizSessions:[],quizPools:{},analytics:null,loading:!1,error:null,filters:A_,selectedSession:null})}}),{name:"quiz-management-store",partialize:e=>({filters:e.filters,selectedChatbot:e.selectedChatbot}),merge:(e,n)=>({...n,...e||{},courses:[],selectedCourse:null,chatbotsWithQuizzes:[],filteredChatbots:[],selectedChatbot:null,quizSessions:[],quizPools:{},analytics:null,loading:!1,error:null,selectedSession:null})}),{name:"quiz-management-store"})),PJ=({courses:e,selectedCourse:n,onSelect:t,loading:r=!1})=>h.jsx(de,{children:h.jsx(Kj,{value:n,onChange:(i,a)=>t(a),options:e,getOptionLabel:i=>i.courseTitle,loading:r,renderInput:i=>h.jsx(Jt,{...i,label:"Select Course",placeholder:"Choose a course to filter materials...",variant:"outlined",sx:{"& .MuiOutlinedInput-root":{fontFamily:"Gabarito, sans-serif","& fieldset":{borderColor:"#CDDAFF",borderWidth:2},"&:hover fieldset":{borderColor:"#0B53C0"},"&.Mui-focused fieldset":{borderColor:"#0B53C0",borderWidth:2}},"& .MuiInputLabel-root":{fontFamily:"Gabarito, sans-serif",color:"#0B53C0",fontWeight:"bold","&.Mui-focused":{color:"#0B53C0"}}},InputProps:{...i.InputProps,endAdornment:h.jsxs(h.Fragment,{children:[r?h.jsx(Zr,{color:"inherit",size:20}):null,i.InputProps.endAdornment]})}}),renderOption:(i,a)=>{const{...s}=i;return h.jsx(de,{component:"li",...s,sx:{"&:hover":{backgroundColor:"#F0F4FF !important"}},children:h.jsxs(de,{sx:{display:"flex",alignItems:"center",width:"100%",p:2},children:[h.jsx(Od,{sx:{mr:2,flexShrink:0,color:"#0B53C0",fontSize:28}}),h.jsxs(de,{sx:{flex:1,minWidth:0},children:[h.jsx(he,{variant:"subtitle1",noWrap:!0,sx:{fontFamily:"Staatliches, sans-serif",fontSize:"1.1rem",color:"#0B53C0",fontWeight:"bold"},children:a.courseTitle}),h.jsxs(he,{variant:"body2",sx:{fontFamily:"Gabarito, sans-serif",color:"#666666",display:"flex",alignItems:"center",mt:.5},children:[h.jsx(Ic,{sx:{fontSize:14,mr:.5}}),a.chatbotCount," material",a.chatbotCount!==1?"s":"","  ",a.quizCount," quiz",a.quizCount!==1?"zes":""," available"]})]}),h.jsxs(de,{sx:{ml:2,display:"flex",flexDirection:"column",alignItems:"flex-end",gap:.5},children:[h.jsx(cr,{label:`${a.chatbotCount} Material${a.chatbotCount!==1?"s":""}`,size:"small",sx:{backgroundColor:"#CDDAFF",color:"#0B53C0",fontFamily:"Gabarito, sans-serif",fontSize:"0.75rem",fontWeight:"bold"}}),a.quizCount>0&&h.jsx(cr,{label:`${a.quizCount} Quiz${a.quizCount!==1?"zes":""}`,size:"small",sx:{backgroundColor:"#C8E6C9",color:"#2E7D32",fontFamily:"Gabarito, sans-serif",fontSize:"0.75rem",fontWeight:"bold"}})]})]})},a.courseId)},PaperComponent:i=>h.jsx(gn,{...i,sx:{mt:1,borderRadius:2,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",border:"1px solid #CDDAFF",backgroundColor:"#FFFFFF"}}),isOptionEqualToValue:(i,a)=>i.courseId===a.courseId,noOptionsText:r?"Loading courses...":"No courses found.",clearOnBlur:!0,selectOnFocus:!0})}),zJ=({chatbots:e,selectedChatbot:n,onSelect:t,loading:r=!1})=>h.jsxs(de,{children:[h.jsx(Kj,{value:n,onChange:(i,a)=>t(a),options:e,getOptionLabel:i=>i.title,loading:r,renderInput:i=>h.jsx(Jt,{...i,label:"Select Chatbot & Material",placeholder:"Choose a chatbot to view its quiz data...",variant:"outlined",sx:{"& .MuiOutlinedInput-root":{fontFamily:"Gabarito, sans-serif","& fieldset":{borderColor:"#CDDAFF",borderWidth:2},"&:hover fieldset":{borderColor:"#0B53C0"},"&.Mui-focused fieldset":{borderColor:"#0B53C0",borderWidth:2}},"& .MuiInputLabel-root":{fontFamily:"Gabarito, sans-serif",color:"#0B53C0",fontWeight:"bold","&.Mui-focused":{color:"#0B53C0"}}},InputProps:{...i.InputProps,endAdornment:h.jsxs(h.Fragment,{children:[r?h.jsx(Zr,{color:"inherit",size:20}):null,i.InputProps.endAdornment]})}}),renderOption:(i,a)=>{const{...s}=i;return h.jsx(de,{component:"li",...s,sx:{"&:hover":{backgroundColor:"#F0F4FF !important"}},children:h.jsxs(de,{sx:{display:"flex",alignItems:"center",width:"100%",p:2},children:[h.jsx(Ic,{sx:{mr:2,flexShrink:0,color:"#0B53C0",fontSize:28}}),h.jsxs(de,{sx:{flex:1,minWidth:0},children:[h.jsx(he,{variant:"subtitle1",noWrap:!0,sx:{fontFamily:"Staatliches, sans-serif",fontSize:"1.1rem",color:"#0B53C0",fontWeight:"bold"},children:a.title}),h.jsxs(he,{variant:"body2",noWrap:!0,sx:{fontFamily:"Gabarito, sans-serif",color:"#666666",display:"flex",alignItems:"center",mt:.5},children:[h.jsx(C3,{sx:{fontSize:14,mr:.5}}),a.materialTitle]}),h.jsxs(he,{variant:"caption",noWrap:!0,sx:{fontFamily:"Gabarito, sans-serif",color:"#888888",display:"flex",alignItems:"center",mt:.25},children:[h.jsx(Od,{sx:{fontSize:12,mr:.5}}),a.courseTitle]})]}),h.jsxs(de,{sx:{ml:2,display:"flex",flexDirection:"column",alignItems:"flex-end",gap:.5},children:[a.quizId&&h.jsx(cr,{label:"Quiz Available",size:"small",sx:{backgroundColor:"#C8E6C9",color:"#2E7D32",fontFamily:"Gabarito, sans-serif",fontSize:"0.75rem",fontWeight:"bold"}}),h.jsxs(he,{variant:"caption",sx:{fontFamily:"monospace",color:a.quizId?"#0B53C0":"#888888",fontSize:"0.7rem",backgroundColor:a.quizId?"#F0F4FF":"#F5F5F5",padding:"2px 6px",borderRadius:"4px",border:`1px solid ${a.quizId?"#CDDAFF":"#E0E0E0"}`},children:["Quiz: ",a.quizId?a.quizId.substring(0,8)+"...":"N/A"]}),h.jsxs(he,{variant:"caption",sx:{fontFamily:"monospace",color:"#888888",fontSize:"0.65rem"},children:["ChatBot: ",a.chatbotId.substring(0,8),"..."]})]})]})},a.chatbotId)},PaperComponent:i=>h.jsx(gn,{...i,sx:{mt:1,borderRadius:2,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",border:"1px solid #CDDAFF",backgroundColor:"#FFFFFF"}}),isOptionEqualToValue:(i,a)=>i.chatbotId===a.chatbotId,noOptionsText:r?"Loading chatbots...":"No chatbots found. Create a chatbot first to see quiz data.",clearOnBlur:!0,handleHomeEndKeys:!0}),e.length===0&&!r&&h.jsx(de,{sx:{mt:2,p:2,bgcolor:"info.light",borderRadius:1},children:h.jsxs(he,{variant:"body2",color:"info.contrastText",children:[h.jsx("strong",{children:"No chatbots available."})," You need to create chatbots first before you can manage quiz sessions. Each chatbot automatically has an associated quiz with predefined questions."]})})]}),qJ=({sessions:e,loading:n=!1,onViewDetails:t,onExportSession:r})=>{const i=l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),a=l=>{switch(l){case"easy":return"success";case"medium":return"warning";case"hard":return"error";default:return"warning"}},s=l=>l>=80?"success":l>=60?"warning":"error";return n?h.jsxs(de,{sx:{width:"100%",mt:2},children:[h.jsx(Qo,{}),h.jsx(he,{variant:"body2",sx:{mt:1,textAlign:"center"},children:"Loading quiz sessions..."})]}):e.length===0?h.jsxs(de,{sx:{textAlign:"center",py:8},children:[h.jsx(Ic,{sx:{fontSize:64,color:"text.secondary",mb:2}}),h.jsx(he,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No quiz sessions found"}),h.jsx(he,{variant:"body2",color:"text.secondary",children:"No quiz sessions have been completed for this chatbot yet. Students need to take quizzes to see data here."})]}):h.jsx(tv,{component:gn,variant:"outlined",children:h.jsxs(nv,{children:[h.jsx(rv,{children:h.jsxs(bc,{children:[h.jsx(En,{children:h.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:1},children:[h.jsx(Ic,{fontSize:"small"}),"Session ID"]})}),h.jsx(En,{children:h.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:1},children:[h.jsx(Xj,{fontSize:"small"}),"User ID"]})}),h.jsx(En,{children:h.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:1},children:[h.jsx(k3,{fontSize:"small"}),"Date & Time"]})}),h.jsx(En,{children:"Difficulty"}),h.jsx(En,{children:"Status"}),h.jsx(En,{align:"center",children:"Questions"}),h.jsx(En,{align:"center",children:"Time Spent"}),h.jsx(En,{align:"center",children:"Score"}),h.jsx(En,{align:"center",children:"Performance"}),h.jsx(En,{align:"center",children:"Actions"})]})}),h.jsx(iv,{children:e.map(l=>h.jsxs(bc,{hover:!0,children:[h.jsx(En,{children:h.jsx(he,{variant:"body2",fontFamily:"monospace",sx:{wordBreak:"break-all",fontSize:"0.875rem"},children:l.id})}),h.jsx(En,{children:h.jsx(he,{variant:"body2",fontFamily:"monospace",sx:{wordBreak:"break-all",fontSize:"0.875rem"},children:l.userId})}),h.jsx(En,{children:h.jsxs(de,{children:[h.jsx(he,{variant:"body2",children:i(l.startedAt)}),l.submittedAt&&h.jsxs(he,{variant:"caption",color:"text.secondary",children:["Submitted: ",i(l.submittedAt)]})]})}),h.jsx(En,{children:h.jsx(cr,{label:l.difficulty.charAt(0).toUpperCase()+l.difficulty.slice(1),color:a(l.difficulty),size:"small"})}),h.jsx(En,{children:h.jsx(cr,{label:l.completed?"Completed":"In Progress",color:l.completed?"success":"warning",size:"small",variant:l.completed?"filled":"outlined"})}),h.jsxs(En,{align:"center",children:[h.jsx(he,{variant:"body2",fontWeight:"medium",children:l.questionsAttempted}),h.jsx(he,{variant:"caption",color:"text.secondary",children:"attempted"})]}),h.jsx(En,{align:"center",children:l.timeSpentFormatted?h.jsxs(de,{children:[h.jsx(he,{variant:"body2",fontWeight:"medium",children:l.timeSpentFormatted}),h.jsx(he,{variant:"caption",color:"text.secondary",children:"duration"})]}):h.jsx(he,{variant:"body2",color:"text.secondary",children:"-"})}),h.jsx(En,{align:"center",children:l.summary?h.jsxs(de,{children:[h.jsxs(he,{variant:"body2",fontWeight:"bold",children:[l.summary.total_score,"/",l.summary.total_max]}),h.jsx(he,{variant:"caption",color:"text.secondary",children:"points"})]}):h.jsx(he,{variant:"body2",color:"text.secondary",children:"-"})}),h.jsx(En,{align:"center",children:l.summary?h.jsx(cr,{label:`${Math.round(l.summary.percent)}%`,color:s(l.summary.percent),size:"small"}):h.jsx(he,{variant:"body2",color:"text.secondary",children:"-"})}),h.jsx(En,{align:"center",children:h.jsxs(Qw,{direction:"row",spacing:1,justifyContent:"center",children:[h.jsx(fi,{title:"View Details",children:h.jsx(_n,{size:"small",onClick:()=>t(l),color:"primary",children:h.jsx(I6,{fontSize:"small"})})}),h.jsx(fi,{title:"Export Data",children:h.jsx(_n,{size:"small",onClick:()=>r(l.id),color:"secondary",children:h.jsx(rg,{fontSize:"small"})})})]})})]},l.id))})]})})},BJ=({analytics:e})=>{const n=i=>{switch(i){case"easy":return"success";case"medium":return"warning";case"hard":return"error";default:return"warning"}},t=i=>i>=70?"success":i>=50?"warning":"error",r=i=>{if(i===0)return"0s";const a=Math.floor(i/60),s=i%60;return a===0?`${s}s`:s===0?`${a}m`:`${a}m ${s}s`};return h.jsx(Ja,{sx:{mb:4,backgroundColor:"#FFFFFF",borderRadius:2,boxShadow:"0 1px 4px rgba(0, 0, 0, 0.1)"},children:h.jsxs(es,{sx:{p:3},children:[h.jsxs(he,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1,fontFamily:"Staatliches, sans-serif",color:"#0B53C0",fontSize:"1.5rem"},children:[h.jsx(E3,{color:"primary"}),"Quiz Analytics & Insights"]}),h.jsxs(wt,{container:!0,spacing:3,sx:{mb:4},children:[h.jsx(wt,{item:!0,xs:12,sm:6,md:3,children:h.jsxs(de,{sx:{textAlign:"center",p:2,bgcolor:"#CDDAFF",borderRadius:2,border:"1px solid #0B53C0"},children:[h.jsx(Ic,{sx:{fontSize:40,color:"#0B53C0",mb:1}}),h.jsx(he,{variant:"h4",sx:{color:"#0B53C0",fontFamily:"Staatliches, sans-serif"},children:e.totalSessions}),h.jsx(he,{variant:"body2",sx:{color:"#0B53C0",fontFamily:"Gabarito, sans-serif"},children:"Total Sessions"})]})}),h.jsx(wt,{item:!0,xs:12,sm:6,md:3,children:h.jsxs(de,{sx:{textAlign:"center",p:2,bgcolor:"#C8E6C9",borderRadius:2,border:"1px solid #2E7D32"},children:[h.jsx(Dg,{sx:{fontSize:40,color:"#2E7D32",mb:1}}),h.jsxs(he,{variant:"h4",sx:{color:"#2E7D32",fontFamily:"Staatliches, sans-serif"},children:[Math.round(e.completionRate),"%"]}),h.jsx(he,{variant:"body2",sx:{color:"#2E7D32",fontFamily:"Gabarito, sans-serif"},children:"Completion Rate"})]})}),h.jsx(wt,{item:!0,xs:12,sm:6,md:3,children:h.jsxs(de,{sx:{textAlign:"center",p:2,bgcolor:"#E3F2FD",borderRadius:2,border:"1px solid #1565C0"},children:[h.jsx(Zj,{sx:{fontSize:40,color:"#1565C0",mb:1}}),h.jsxs(he,{variant:"h4",sx:{color:"#1565C0",fontFamily:"Staatliches, sans-serif"},children:[Math.round(e.averageScore),"%"]}),h.jsx(he,{variant:"body2",sx:{color:"#1565C0",fontFamily:"Gabarito, sans-serif"},children:"Average Score"})]})}),h.jsx(wt,{item:!0,xs:12,sm:6,md:3,children:h.jsxs(de,{sx:{textAlign:"center",p:2,bgcolor:"#FFF3E0",borderRadius:2,border:"1px solid #F57C00"},children:[h.jsx(G0,{sx:{fontSize:40,color:"#F57C00",mb:1}}),h.jsx(he,{variant:"h4",sx:{color:"#F57C00",fontFamily:"Staatliches, sans-serif"},children:r(e.averageTimeSpent)}),h.jsx(he,{variant:"body2",sx:{color:"#F57C00",fontFamily:"Gabarito, sans-serif"},children:"Avg. Time Spent"})]})})]}),h.jsx(qs,{sx:{my:3}}),h.jsxs(wt,{container:!0,spacing:4,children:[h.jsxs(wt,{item:!0,xs:12,md:6,children:[h.jsxs(he,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[h.jsx(Ic,{color:"primary"}),"Difficulty Distribution"]}),h.jsx(de,{sx:{mt:2},children:Object.entries(e.difficultyDistribution).map(([i,a])=>{const s=e.totalSessions>0?a/e.totalSessions*100:0;return h.jsxs(de,{sx:{mb:2},children:[h.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[h.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:1},children:[h.jsx(cr,{label:i.charAt(0).toUpperCase()+i.slice(1),color:n(i),size:"small"}),h.jsxs(he,{variant:"body2",children:[a," sessions"]})]}),h.jsxs(he,{variant:"body2",color:"text.secondary",children:[Math.round(s),"%"]})]}),h.jsx(Qo,{variant:"determinate",value:s,color:n(i),sx:{height:8,borderRadius:4}})]},i)})})]}),h.jsxs(wt,{item:!0,xs:12,md:6,children:[h.jsxs(he,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[h.jsx(Od,{color:"primary"}),"Bloom's Taxonomy Performance"]}),h.jsx(de,{sx:{mt:2},children:Object.entries(e.categoryPerformance).map(([i,a])=>h.jsxs(de,{sx:{mb:2},children:[h.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[h.jsxs(de,{children:[h.jsx(he,{variant:"body2",fontWeight:"medium",children:i}),h.jsxs(he,{variant:"caption",color:"text.secondary",children:[a.totalAttempts," attempts"]})]}),h.jsxs(de,{sx:{textAlign:"right"},children:[h.jsxs(he,{variant:"body2",fontWeight:"medium",children:[Math.round(a.averageScore),"%"]}),h.jsx(cr,{label:`${a.successRate}% success`,color:t(a.successRate),size:"small",variant:"outlined"})]})]}),h.jsx(Qo,{variant:"determinate",value:a.successRate,color:t(a.successRate),sx:{height:6,borderRadius:3}})]},i))})]})]})]})})},$J=({quizId:e,open:n,onClose:t})=>{const{quizPools:r,loading:i}=$D(),a=r[e],s=u=>({Remember:"success",Understand:"info",Apply:"primary",Analyze:"warning",Evaluate:"error",Create:"secondary"})[u]||"primary",l=u=>{const d=["Remember","Understand","Apply","Analyze","Evaluate","Create"],f=u.split("").reduce((m,b)=>m+b.charCodeAt(0),0);return d[f%d.length]};return i?h.jsx(Zi,{open:n,onClose:t,maxWidth:"md",fullWidth:!0,children:h.jsx(Ji,{children:h.jsxs(de,{sx:{display:"flex",flexDirection:"column",alignItems:"center",py:4},children:[h.jsx(Qo,{sx:{width:"100%",mb:2}}),h.jsx(he,{variant:"body1",children:"Loading quiz questions..."})]})})}):a?h.jsxs(Zi,{open:n,onClose:t,maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{minHeight:"80vh"}},children:[h.jsx(pa,{children:h.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[h.jsxs(de,{children:[h.jsx(he,{variant:"h5",component:"div",children:"Quiz Question Pool"}),h.jsxs(he,{variant:"body2",color:"text.secondary",children:["Quiz ID: ",e.substring(0,16),"..."]})]}),h.jsx(_n,{onClick:t,edge:"end",children:h.jsx(ig,{})})]})}),h.jsxs(Ji,{dividers:!0,children:[h.jsx(Ja,{sx:{mb:3},children:h.jsxs(es,{children:[h.jsxs(he,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[h.jsx(Zj,{color:"primary"}),"Pool Statistics"]}),h.jsxs(wt,{container:!0,spacing:3,children:[h.jsx(wt,{item:!0,xs:12,sm:6,md:3,children:h.jsxs(de,{sx:{textAlign:"center",p:2,bgcolor:"primary.light",borderRadius:1},children:[h.jsx(he,{variant:"h4",color:"primary.contrastText",children:a.totalQuestions}),h.jsx(he,{variant:"body2",color:"primary.contrastText",children:"Total Questions"})]})}),h.jsx(wt,{item:!0,xs:12,sm:6,md:3,children:h.jsxs(de,{sx:{textAlign:"center",p:2,bgcolor:"success.light",borderRadius:1},children:[h.jsx(he,{variant:"h4",color:"success.contrastText",children:a.difficultyBreakdown.easy||0}),h.jsx(he,{variant:"body2",color:"success.contrastText",children:"Easy Questions"})]})}),h.jsx(wt,{item:!0,xs:12,sm:6,md:3,children:h.jsxs(de,{sx:{textAlign:"center",p:2,bgcolor:"warning.light",borderRadius:1},children:[h.jsx(he,{variant:"h4",color:"warning.contrastText",children:a.difficultyBreakdown.medium||0}),h.jsx(he,{variant:"body2",color:"warning.contrastText",children:"Medium Questions"})]})}),h.jsx(wt,{item:!0,xs:12,sm:6,md:3,children:h.jsxs(de,{sx:{textAlign:"center",p:2,bgcolor:"error.light",borderRadius:1},children:[h.jsx(he,{variant:"h4",color:"error.contrastText",children:a.difficultyBreakdown.hard||0}),h.jsx(he,{variant:"body2",color:"error.contrastText",children:"Hard Questions"})]})})]})]})}),h.jsx(Ja,{sx:{mb:3},children:h.jsxs(es,{children:[h.jsxs(he,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[h.jsx(_3,{color:"primary"}),"Bloom's Taxonomy Categories"]}),h.jsx(wt,{container:!0,spacing:2,children:Object.entries(a.categoryCounts).map(([u,d])=>{const f=d/a.totalQuestions*100;return h.jsx(wt,{item:!0,xs:12,sm:6,md:4,children:h.jsxs(de,{sx:{p:2,border:"1px solid",borderColor:"grey.300",borderRadius:1},children:[h.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[h.jsx(cr,{label:u,color:s(u),size:"small"}),h.jsxs(he,{variant:"body2",fontWeight:"bold",children:[d," questions"]})]}),h.jsx(Qo,{variant:"determinate",value:f,color:s(u),sx:{height:6,borderRadius:3}}),h.jsxs(he,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:[Math.round(f),"% of total"]})]})},u)})})]})}),h.jsx(Ja,{children:h.jsxs(es,{children:[h.jsxs(he,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[h.jsx(Jj,{color:"primary"}),"Quiz Questions"]}),h.jsx(he,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"All available question IDs from the quiz pool. Questions are categorized using Bloom's taxonomy levels and automatically selected based on quiz difficulty mode."}),h.jsx(tv,{component:gn,variant:"outlined",children:h.jsxs(nv,{children:[h.jsx(rv,{children:h.jsxs(bc,{children:[h.jsx(En,{children:"Question ID"}),h.jsx(En,{children:"Question"}),h.jsx(En,{align:"center",children:"Bloom's Taxonomy Category"})]})}),h.jsx(iv,{children:a.questions.map((u,d)=>{const f=l(u.category);return h.jsxs(bc,{hover:!0,children:[h.jsx(En,{children:h.jsx(he,{variant:"body2",fontFamily:"monospace",children:u.questionId})}),h.jsx(En,{children:h.jsx(he,{variant:"body2",sx:{maxWidth:400},children:u.question.length>120?`${u.question.substring(0,120)}...`:u.question})}),h.jsx(En,{align:"center",children:h.jsx(cr,{label:f,color:s(f),size:"small"})})]},u.questionId)})})]})})]})}),h.jsx(qs,{sx:{my:3}}),h.jsxs(de,{sx:{p:2,bgcolor:"info.light",borderRadius:1},children:[h.jsxs(he,{variant:"body2",color:"info.contrastText",children:[h.jsx("strong",{children:"Quiz Question Pool:"})," This shows the available questions that can be selected for quizzes. When students take a quiz, questions are automatically chosen from this pool based on the selected difficulty mode: Easy (~5 questions), Medium (~8 questions), Hard (~10 questions)."]}),h.jsxs(he,{variant:"caption",color:"info.contrastText",sx:{mt:1,display:"block"},children:[h.jsx("strong",{children:"Note:"})," This is placeholder data for demonstration. Actual questions will be loaded from the quiz API."]})]})]}),h.jsx(ma,{children:h.jsx(Ct,{onClick:t,variant:"contained",children:"Close"})})]}):h.jsxs(Zi,{open:n,onClose:t,maxWidth:"md",fullWidth:!0,children:[h.jsx(pa,{children:h.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[h.jsx(he,{variant:"h6",children:"Quiz Pool"}),h.jsx(_n,{onClick:t,edge:"end",children:h.jsx(ig,{})})]})}),h.jsx(Ji,{children:h.jsxs(de,{sx:{textAlign:"center",py:4},children:[h.jsx(he,{variant:"h6",color:"text.secondary",children:"Quiz pool not found"}),h.jsxs(he,{variant:"body2",color:"text.secondary",children:["Unable to load questions for quiz ID: ",e]})]})}),h.jsx(ma,{children:h.jsx(Ct,{onClick:t,children:"Close"})})]})},UJ=({session:e,open:n,onClose:t})=>{const r=u=>new Date(u).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),i=u=>{switch(u){case"easy":return"success";case"medium":return"warning";case"hard":return"error";default:return"warning"}},a=u=>u==="correct"?"success":"error",s=u=>{const d=e.answers[u];if(!d)return"Question text not available";const f=d.split(" ");return f.length>15?`Question about: ${f.slice(0,15).join(" ")}...`:`Question about: ${d.substring(0,100)}${d.length>100?"...":""}`},l=()=>{const u={sessionId:e.id,quizId:e.quizId,chatbotId:e.chatbotId,student:{userId:e.userId,name:e.userName,email:e.userEmail},quiz:{difficulty:e.difficulty,startedAt:e.startedAt,submittedAt:e.submittedAt,completed:e.completed,timeSpent:e.timeSpent},answers:e.answers,summary:e.summary,exportedAt:new Date().toISOString()},d=JSON.stringify(u,null,2),f=new Blob([d],{type:"application/json"}),m=URL.createObjectURL(f),b=document.createElement("a");b.href=m,b.download=`quiz-session-${e.id}.json`,document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(m)};return h.jsxs(Zi,{open:n,onClose:t,maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{minHeight:"80vh"}},children:[h.jsx(pa,{children:h.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[h.jsxs(de,{children:[h.jsx(he,{variant:"h5",component:"div",children:"Quiz Session Details"}),h.jsxs(he,{variant:"body2",color:"text.secondary",children:["Session ID: ",e.id]})]}),h.jsx(_n,{onClick:t,edge:"end",children:h.jsx(ig,{})})]})}),h.jsxs(Ji,{dividers:!0,children:[h.jsx(Ja,{sx:{mb:3},children:h.jsxs(es,{children:[h.jsxs(he,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[h.jsx(Xj,{color:"primary"}),"User Information"]}),h.jsx(wt,{container:!0,spacing:2,children:h.jsxs(wt,{item:!0,xs:12,children:[h.jsx(he,{variant:"subtitle2",color:"text.secondary",children:"User ID"}),h.jsx(he,{variant:"body1",fontFamily:"monospace",sx:{wordBreak:"break-all"},children:e.userId})]})})]})}),h.jsx(Ja,{sx:{mb:3},children:h.jsxs(es,{children:[h.jsxs(he,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[h.jsx(Ic,{color:"primary"}),"Quiz Information"]}),h.jsxs(wt,{container:!0,spacing:2,children:[h.jsxs(wt,{item:!0,xs:12,md:6,children:[h.jsx(he,{variant:"subtitle2",color:"text.secondary",children:"Quiz ID"}),h.jsx(he,{variant:"body1",fontFamily:"monospace",sx:{wordBreak:"break-all",fontSize:"0.875rem"},children:e.quizId})]}),h.jsxs(wt,{item:!0,xs:12,md:6,children:[h.jsx(he,{variant:"subtitle2",color:"text.secondary",children:"Chatbot ID"}),h.jsx(he,{variant:"body1",fontFamily:"monospace",sx:{wordBreak:"break-all",fontSize:"0.875rem"},children:e.chatbotId})]}),h.jsxs(wt,{item:!0,xs:12,md:6,children:[h.jsx(he,{variant:"subtitle2",color:"text.secondary",children:"Difficulty"}),h.jsx(cr,{label:e.difficulty.charAt(0).toUpperCase()+e.difficulty.slice(1),color:i(e.difficulty),size:"small"})]}),h.jsxs(wt,{item:!0,xs:12,md:6,children:[h.jsx(he,{variant:"subtitle2",color:"text.secondary",children:"Status"}),h.jsx(cr,{label:e.completed?"Completed":"In Progress",color:e.completed?"success":"warning",size:"small"})]}),h.jsxs(wt,{item:!0,xs:12,md:6,children:[h.jsx(he,{variant:"subtitle2",color:"text.secondary",children:"Questions Attempted"}),h.jsxs(he,{variant:"body1",children:[e.questionsAttempted," questions answered"]})]}),h.jsxs(wt,{item:!0,xs:12,md:6,children:[h.jsx(he,{variant:"subtitle2",color:"text.secondary",children:"Quiz Mode"}),h.jsx(he,{variant:"body1",children:e.difficulty==="easy"?"~5 questions (Remember/Understand focus)":e.difficulty==="medium"?"~8 questions (Mixed difficulty)":"~10 questions (Analyze/Evaluate focus)"})]})]})]})}),h.jsx(Ja,{sx:{mb:3},children:h.jsxs(es,{children:[h.jsxs(he,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[h.jsx(G0,{color:"primary"}),"Session Timeline"]}),h.jsxs(wt,{container:!0,spacing:2,children:[h.jsxs(wt,{item:!0,xs:12,md:4,children:[h.jsx(he,{variant:"subtitle2",color:"text.secondary",children:"Started At"}),h.jsx(he,{variant:"body1",children:r(e.startedAt)})]}),e.submittedAt&&h.jsxs(wt,{item:!0,xs:12,md:4,children:[h.jsx(he,{variant:"subtitle2",color:"text.secondary",children:"Submitted At"}),h.jsx(he,{variant:"body1",children:r(e.submittedAt)})]}),e.timeSpentFormatted&&h.jsxs(wt,{item:!0,xs:12,md:4,children:[h.jsx(he,{variant:"subtitle2",color:"text.secondary",children:"Time Spent"}),h.jsx(he,{variant:"body1",children:e.timeSpentFormatted})]})]})]})}),e.summary&&h.jsx(Ja,{sx:{mb:3},children:h.jsxs(es,{children:[h.jsx(he,{variant:"h6",gutterBottom:!0,children:"Quiz Results"}),h.jsxs(wt,{container:!0,spacing:2,sx:{mb:3},children:[h.jsx(wt,{item:!0,xs:12,md:4,children:h.jsxs(de,{sx:{textAlign:"center",p:2,bgcolor:"primary.light",borderRadius:1},children:[h.jsx(he,{variant:"h4",color:"primary.contrastText",children:e.summary.total_score}),h.jsx(he,{variant:"body2",color:"primary.contrastText",children:"Total Score"})]})}),h.jsx(wt,{item:!0,xs:12,md:4,children:h.jsxs(de,{sx:{textAlign:"center",p:2,bgcolor:"info.light",borderRadius:1},children:[h.jsx(he,{variant:"h4",color:"info.contrastText",children:e.summary.total_max}),h.jsx(he,{variant:"body2",color:"info.contrastText",children:"Maximum Score"})]})}),h.jsx(wt,{item:!0,xs:12,md:4,children:h.jsxs(de,{sx:{textAlign:"center",p:2,bgcolor:"success.light",borderRadius:1},children:[h.jsxs(he,{variant:"h4",color:"success.contrastText",children:[Math.round(e.summary.percent),"%"]}),h.jsx(he,{variant:"body2",color:"success.contrastText",children:"Percentage"})]})})]}),h.jsx(qs,{sx:{my:2}}),h.jsx(he,{variant:"h6",gutterBottom:!0,children:"Question Results"}),h.jsx(tv,{component:gn,variant:"outlined",children:h.jsxs(nv,{size:"small",children:[h.jsx(rv,{children:h.jsxs(bc,{children:[h.jsx(En,{children:"Question"}),h.jsx(En,{align:"center",children:"Score"}),h.jsx(En,{align:"center",children:"Max Score"}),h.jsx(En,{align:"center",children:"Verdict"}),h.jsx(En,{children:"Reasoning"})]})}),h.jsx(iv,{children:Object.entries(e.summary.items).map(([u,d])=>h.jsxs(bc,{children:[h.jsxs(En,{children:[h.jsx(he,{variant:"body2",sx:{mb:1},children:s(u)}),h.jsxs(he,{variant:"caption",color:"text.secondary",fontFamily:"monospace",children:["ID: ",u]})]}),h.jsx(En,{align:"center",children:h.jsx(he,{variant:"body2",fontWeight:"bold",children:d.score})}),h.jsx(En,{align:"center",children:h.jsx(he,{variant:"body2",children:d.max_score})}),h.jsx(En,{align:"center",children:(()=>{let f;return d.verdict==="correct"?f="correct":d.verdict==="incorrect"?f="incorrect":f=d.score>=d.max_score*.7?"correct":"incorrect",h.jsx(cr,{label:f,color:a(f),size:"small",icon:f==="correct"?h.jsx(Dg,{}):h.jsx(T6,{})})})()}),h.jsx(En,{children:h.jsx(he,{variant:"body2",children:d.reasoning||"No reasoning provided"})})]},u))})]})})]})}),Object.keys(e.answers).length>0&&h.jsx(Ja,{children:h.jsxs(es,{children:[h.jsx(he,{variant:"h6",gutterBottom:!0,children:"User Answers"}),Object.entries(e.answers).map(([u,d],f)=>h.jsxs(xd,{children:[h.jsx(vd,{expandIcon:h.jsx(Nl,{}),children:h.jsxs(he,{variant:"subtitle1",children:["Question ",f+1," (",u,")"]})}),h.jsx(wd,{children:h.jsx(de,{sx:{p:2,bgcolor:"grey.50",borderRadius:1},children:h.jsx(he,{variant:"body1",sx:{whiteSpace:"pre-wrap"},children:d})})})]},u))]})})]}),h.jsxs(ma,{children:[h.jsx(Ct,{startIcon:h.jsx(rg,{}),onClick:l,variant:"outlined",children:"Export Session Data"}),h.jsx(Ct,{onClick:t,variant:"contained",children:"Close"})]})]})},HJ=()=>{ya();const{userDetails:e}=zi(),{courses:n,selectedCourse:t,chatbotsWithQuizzes:r,filteredChatbots:i,selectedChatbot:a,quizSessions:s,analytics:l,loading:u,error:d,filters:f,selectedSession:m,loadChatbotsWithQuizzes:b,selectCourse:g,selectChatbot:x,loadQuizSessions:y,loadQuizPool:A,updateFilters:w,selectSession:C,exportSessionData:j,clearError:F}=$D(),[M,z]=X.useState(!1),[_,L]=X.useState(!1),[$,Z]=X.useState("");X.useEffect(()=>{console.log(" Enhanced Quiz Management Page: Initializing..."),b()},[b]);const O=U=>{g(U),U&&console.log(" Selected course:",U.courseTitle,"with",U.chatbotCount,"chatbots")},T=U=>{x(U),U&&console.log(" Selected chatbot:",U.title,"with quiz ID:",U.quizId)},R=U=>{C(U),z(!0)},N=async U=>{await A(U),L(!0)},G=()=>{b(),a&&y(a.chatbotId)},W=async U=>{await j(U)},Q=U=>{w({difficulty:U})},J=U=>{w({completionStatus:U})},se=U=>{Z(U),w({userId:U||void 0})};return u&&r.length===0?h.jsxs(de,{sx:{width:"100%",mt:2},children:[h.jsx(Qo,{}),h.jsx(he,{variant:"body2",sx:{mt:1,textAlign:"center"},children:"Loading quiz management data..."})]}):h.jsxs(de,{className:"profile-container",children:[h.jsx(So,{title:"Quiz Management"}),h.jsx(de,{sx:{mb:4},children:h.jsx(de,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:h.jsx(de,{children:h.jsx(Qw,{direction:"row",spacing:2,children:h.jsx(fi,{title:"Refresh Data",children:h.jsx("span",{children:h.jsx(_n,{onClick:G,disabled:u,children:h.jsx($j,{})})})})})})})}),d&&h.jsx(rr,{severity:"error",sx:{mb:3},onClose:F,children:d}),h.jsx(Ja,{sx:{mb:4,backgroundColor:"#FFFFFF",borderRadius:2,boxShadow:"0 1px 4px rgba(0, 0, 0, 0.1)"},children:h.jsxs(es,{sx:{p:3},children:[h.jsxs(he,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1,fontFamily:"Staatliches, sans-serif",color:"#0B53C0",fontSize:"1.5rem"},children:[h.jsx(Od,{color:"primary"}),"Course & Quiz Selection"]}),h.jsx(he,{variant:"body2",sx:{mb:3,fontFamily:"Gabarito, sans-serif",color:"#666666"},children:"First select a course to filter materials, then choose a specific chatbot to view its quiz sessions and manage quiz data."}),h.jsx(de,{sx:{mb:3},children:h.jsx(PJ,{courses:n,selectedCourse:t,onSelect:O,loading:u})}),h.jsx(de,{children:h.jsx(zJ,{chatbots:i,selectedChatbot:a,onSelect:T,loading:u})}),a&&h.jsxs(de,{sx:{mt:3,p:2,bgcolor:"#F0F4FF",borderRadius:2,border:"1px solid #CDDAFF"},children:[h.jsxs(wt,{container:!0,spacing:2,children:[h.jsxs(wt,{item:!0,xs:12,md:6,children:[h.jsx(he,{variant:"subtitle2",sx:{fontFamily:"Gabarito, sans-serif",fontWeight:"bold",color:"#0B53C0"},children:"Material"}),h.jsx(he,{variant:"body1",sx:{fontFamily:"Gabarito, sans-serif"},children:a.materialTitle})]}),h.jsxs(wt,{item:!0,xs:12,md:3,children:[h.jsx(he,{variant:"subtitle2",sx:{fontFamily:"Gabarito, sans-serif",fontWeight:"bold",color:"#0B53C0"},children:"Course"}),h.jsx(he,{variant:"body1",sx:{fontFamily:"Gabarito, sans-serif"},children:a.courseTitle})]}),h.jsxs(wt,{item:!0,xs:12,md:3,children:[h.jsx(he,{variant:"subtitle2",sx:{fontFamily:"Gabarito, sans-serif",fontWeight:"bold",color:"#0B53C0"},children:"Quiz ID"}),h.jsx(he,{variant:"body1",fontFamily:"monospace",sx:{fontSize:"0.875rem",wordBreak:"break-all",lineHeight:1.2},children:a.quizId||"No Quiz ID Available"})]})]}),h.jsxs(de,{sx:{mt:2,display:"flex",gap:2},children:[h.jsx(Ct,{variant:"outlined",startIcon:h.jsx(Jj,{}),onClick:()=>a.quizId&&N(a.quizId),size:"small",sx:{fontFamily:"Gabarito, sans-serif",color:"#0B53C0",borderColor:"#0B53C0","&:hover":{backgroundColor:"#0B53C0",color:"#FFFFFF"}},children:"View Quiz Questions"}),h.jsx(e8,{badgeContent:s.length,color:"primary",children:h.jsx(Ct,{variant:"outlined",size:"small",sx:{fontFamily:"Gabarito, sans-serif",color:"#0B53C0",borderColor:"#0B53C0"},children:"Quiz Sessions"})})]})]})]})}),l&&h.jsx(BJ,{analytics:l}),a&&h.jsx(Ja,{sx:{backgroundColor:"#FFFFFF",borderRadius:2,boxShadow:"0 1px 4px rgba(0, 0, 0, 0.1)"},children:h.jsxs(es,{sx:{p:3},children:[h.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[h.jsxs(he,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1,fontFamily:"Staatliches, sans-serif",color:"#0B53C0",fontSize:"1.5rem"},children:[h.jsx(Ic,{color:"primary"}),"Quiz Sessions",h.jsx(e8,{badgeContent:s.length,color:"primary",sx:{ml:1}})]}),h.jsxs(Qw,{direction:"row",spacing:2,alignItems:"center",flexWrap:"wrap",children:[h.jsx(Jt,{size:"small",label:"Filter by User ID",placeholder:"Enter user ID...",value:$,onChange:U=>se(U.target.value),sx:{minWidth:200}}),h.jsxs(Td,{size:"small",sx:{minWidth:120},children:[h.jsx(ap,{children:"Difficulty"}),h.jsxs(Dc,{value:f.difficulty||"all",label:"Difficulty",onChange:U=>Q(U.target.value),children:[h.jsx(ai,{value:"all",children:"All Levels"}),h.jsx(ai,{value:"easy",children:"Easy"}),h.jsx(ai,{value:"medium",children:"Medium"}),h.jsx(ai,{value:"hard",children:"Hard"})]})]}),h.jsxs(Td,{size:"small",sx:{minWidth:120},children:[h.jsx(ap,{children:"Status"}),h.jsxs(Dc,{value:f.completionStatus||"all",label:"Status",onChange:U=>J(U.target.value),children:[h.jsx(ai,{value:"all",children:"All Sessions"}),h.jsx(ai,{value:"completed",children:"Completed"}),h.jsx(ai,{value:"incomplete",children:"In Progress"})]})]})]})]}),h.jsx(qJ,{sessions:s,loading:u,onViewDetails:R,onExportSession:W})]})}),m&&h.jsx(UJ,{session:m,open:M,onClose:()=>z(!1)}),(a==null?void 0:a.quizId)&&h.jsx($J,{quizId:a.quizId,open:_,onClose:()=>L(!1)})]})},WJ=X.lazy(()=>wi(()=>import("./index-DnhDUOBe.js"),__vite__mapDeps([7,4,1,5]))),VJ=X.lazy(()=>wi(()=>import("./index-D0RLAIPH.js"),__vite__mapDeps([8,4,1,9,5,10]))),YJ=X.lazy(()=>wi(()=>import("./DesignDetailPage-GUCtDcIU.js"),__vite__mapDeps([11,4,1,9,5,10,12]))),GJ=X.lazy(()=>wi(()=>import("./SupplementalMaterials-DZ_K5zUM.js"),__vite__mapDeps([13,4,1,5]))),QJ=X.lazy(()=>wi(()=>import("./MessagesPage-CNk4d88R.js"),__vite__mapDeps([14,4,1,5]))),E1=({element:e})=>h.jsx(jT,{children:h.jsx(Qa,{element:e})}),KJ=({element:e})=>h.jsx(uv,{children:e}),XJ=(e,n)=>[{path:"/",element:e?h.jsx(jT,{children:h.jsx(yF,{})}):h.jsx(KJ,{element:h.jsx(WJ,{})})},{path:"/messages",element:h.jsx(E1,{element:QJ})},{path:"/laboratory-notebook",element:h.jsx(E1,{element:VJ})},{path:"/laboratory-notebook/:designId",element:h.jsx(E1,{element:YJ})},{path:"/supplemental-materials",element:h.jsx(E1,{element:GJ})},{path:"/my-profile",element:h.jsx(E1,{element:lX})},{path:"/add-material",element:h.jsx(Qa,{element:LO})},{path:"/edit-material/:id",element:h.jsx(Qa,{element:kQ})},{path:"/view-material/:id",element:h.jsx(Qa,{element:KK})},{path:"/add-message",element:h.jsx(Qa,{element:XK})},{path:"/edit-message/:id",element:h.jsx(Qa,{element:ZK})},{path:"/chatbot-management",element:h.jsx(Qa,{element:zX})},{path:"/course-management",element:h.jsx(Qa,{element:wX})},{path:"/request-chatbot",element:h.jsx(Qa,{element:$X})},{path:"/quiz-management",element:h.jsx(Qa,{element:HJ})},{path:"/request-educator-permissions",element:h.jsx(Qa,{element:jX})},{path:"/educator-requests",element:h.jsx(Qa,{element:OX})},{path:"/request-new-course",element:h.jsx(Qa,{element:DX})},{path:"/course-requests",element:h.jsx(Qa,{element:LX})},{path:"/super-admin-course-management",element:h.jsx(Qa,{element:MX})},{path:"/super-admin-chatbot-requests",element:h.jsx(Qa,{element:DJ})},...n?[{path:"/user-management",element:h.jsx(Qa,{element:nX})},{path:"/chatbot-conversations",element:h.jsx(Qa,{element:TJ})}]:[],{path:"*",element:h.jsx(ST,{to:"/"})}],ZJ=Uj(TT()),JJ=gp()(dv((e,n)=>({isOpen:!0,isMobile:!1,messagesExpanded:!1,setOpen:t=>e({isOpen:t}),setMobile:t=>e({isMobile:t}),toggleMessages:()=>e(t=>({messagesExpanded:!t.messagesExpanded})),toggleSidebar:()=>e(t=>({isOpen:!t.isOpen}))}),{name:"nexlab-sidebar-storage",partialize:e=>({isOpen:e.isOpen,messagesExpanded:e.messagesExpanded})})),eee=()=>{const e=pp(),n=jd(e.breakpoints.down("md"));return{...JJ(),isMobile:n}},tee=({children:e})=>{const n=ya(),t=Fg(),{userDetails:r,isSuperAdmin:i}=zi(),{isOpen:a,isMobile:s,setOpen:l,toggleSidebar:u}=eee(),d=A=>{n(A),s&&l(!1)},f=A=>t.pathname===A,m=[{title:"Home",icon:h.jsx(N3,{}),path:"/",roles:["student","educator","superadmin"],color:K.primary[500]},{title:"My Account",icon:h.jsx(Wj,{}),path:"/my-profile",roles:["student","educator","superadmin"],color:K.primary[500]},{title:"Messages",icon:h.jsx(Vj,{}),path:"/messages",roles:["student","educator","superadmin"],color:K.info},{title:"Course Materials",icon:h.jsx(Od,{}),path:"/supplemental-materials",roles:["student","educator","superadmin"],color:K.warning},{title:"Laboratory Notebook",icon:h.jsx(j6,{}),path:"/laboratory-notebook",roles:["student","educator","superadmin"],disabled:r&&!r.isAdmin&&(!r.classes||Object.keys(r.classes).length===0),color:K.secondary[500]}],b=[{title:"Course Management",icon:h.jsx(xx,{}),path:"/course-management",roles:["educator","superadmin"],color:K.primary[600]},{title:"Chatbot Management",icon:h.jsx(t8,{}),path:"/chatbot-management",roles:["educator","superadmin"],color:K.secondary[600]},{title:"Quiz Management",icon:h.jsx(Ic,{}),path:"/quiz-management",roles:["educator","superadmin"],color:K.warning},{title:"Request Chatbot",icon:h.jsx(t8,{}),path:"/request-chatbot",roles:["educator","superadmin"],color:K.info}],g=[{title:"User Management",icon:h.jsx(I3,{}),path:"/user-management",roles:["superadmin"],color:K.error},{title:"Educator Requests",icon:h.jsx(n8,{}),path:"/educator-requests",roles:["superadmin"],color:K.info},{title:"Course Requests",icon:h.jsx(xx,{}),path:"/course-requests",roles:["superadmin"],color:K.primary[600]},{title:"Super Admin Chatbot Requests",icon:h.jsx(n8,{}),path:"/super-admin-chatbot-requests",roles:["superadmin"],color:K.warning},{title:"Chatbot Conversations",icon:h.jsx(eT,{}),path:"/chatbot-conversations",roles:["superadmin"],color:K.primary[700]},{title:"Super Admin Course Management",icon:h.jsx(L3,{}),path:"/super-admin-course-management",roles:["superadmin"],color:K.secondary[700]}],x=A=>{const w=f(A.path),C=i?"superadmin":r!=null&&r.isAdmin?"educator":"student";if(!A.roles.includes(C))return null;const F=h.jsxs(S5,{onClick:()=>d(A.path),disabled:A.disabled,sx:{minHeight:56,justifyContent:a?"initial":"center",px:a?3:2,mx:1,borderRadius:kt.lg,backgroundColor:w?A.color:"transparent",color:w?K.text.inverse:K.text.primary,fontFamily:we.fontFamily.display,fontWeight:w?we.fontWeight.bold:we.fontWeight.medium,fontSize:we.fontSize.lg,transition:"all 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)",boxShadow:w?Ft.sm:"none","&:hover":{backgroundColor:w?A.color:K.neutral[100],transform:"translateY(-1px)",boxShadow:w?Ft.md:Ft.sm},"&:disabled":{opacity:.5,cursor:"not-allowed"}},children:[h.jsx($y,{sx:{minWidth:0,mr:a?2:"auto",justifyContent:"center",color:w?K.text.inverse:A.color,transition:"all 300ms cubic-bezier(0.25, 0.46, 0.45, 0.94)"},children:A.icon}),a&&h.jsx(dc,{primary:A.title,sx:{opacity:a?1:0,transform:a?"translateX(0)":"translateX(-20px)",transition:"opacity 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)","& .MuiListItemText-primary":{fontSize:we.fontSize.lg,fontWeight:w?we.fontWeight.bold:we.fontWeight.medium,fontFamily:we.fontFamily.display}}})]});return A.disabled&&a?h.jsx(fi,{title:"Enroll in a course to access this feature",placement:"right",children:h.jsx("span",{children:F})}):F},y=h.jsxs(de,{sx:{height:"100%",display:"flex",flexDirection:"column",backgroundColor:K.background.secondary,borderRight:`1px solid ${K.neutral[200]}`},children:[h.jsxs(de,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:a?3:2,minHeight:80,backgroundColor:K.background.primary,borderBottom:`1px solid ${K.neutral[200]}`,boxShadow:Ft.sm},children:[a&&h.jsx(de,{sx:{display:"flex",alignItems:"center",gap:2,flex:1},children:h.jsx(de,{sx:{flex:1}})}),h.jsx(_n,{onClick:u,sx:{backgroundColor:K.primary[100],color:K.primary[600],"&:hover":{backgroundColor:K.primary[200],transform:"scale(1.08) rotate(5deg)",boxShadow:Ft.md},"&:active":{transform:"scale(0.95)"},transition:"all 250ms cubic-bezier(0.34, 1.56, 0.64, 1)",borderRadius:kt.lg,zIndex:101},children:a?h.jsx(j3,{}):h.jsx(T3,{})})]}),h.jsxs(de,{sx:{flexGrow:1,overflow:"auto",py:2,"&::-webkit-scrollbar":{width:a?"8px":"6px",transition:"width 300ms ease"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:a?K.neutral[300]:K.neutral[200],borderRadius:"4px",transition:"background 300ms ease","&:hover":{background:a?K.neutral[400]:K.neutral[300]}},"&::-webkit-scrollbar-thumb:hover":{background:a?K.neutral[400]:K.neutral[300]},scrollbarWidth:"thin",scrollbarColor:`${a?K.neutral[300]:K.neutral[200]} transparent`},children:[h.jsx(Gh,{sx:{px:1},children:m.map((A,w)=>h.jsx(yd,{disablePadding:!0,sx:{display:"block",mb:.5},children:x(A)},w))}),(r==null?void 0:r.isAdmin)&&h.jsxs(h.Fragment,{children:[h.jsx(qs,{sx:{my:3,mx:2,borderColor:K.neutral[200]}}),h.jsx(de,{sx:{px:3,py:1},children:a&&h.jsx(he,{variant:"caption",sx:{fontFamily:we.fontFamily.display,fontWeight:we.fontWeight.bold,color:K.warning,fontSize:we.fontSize.xs,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Educator Tools"})}),h.jsx(Gh,{sx:{px:1},children:b.map((A,w)=>h.jsx(yd,{disablePadding:!0,sx:{display:"block",mb:.5},children:x(A)},`educator-${w}`))})]}),i&&h.jsxs(h.Fragment,{children:[h.jsx(qs,{sx:{my:3,mx:2,borderColor:K.neutral[200]}}),h.jsx(de,{sx:{px:3,py:1},children:a&&h.jsx(he,{variant:"caption",sx:{fontFamily:we.fontFamily.display,fontWeight:we.fontWeight.bold,color:K.error,fontSize:we.fontSize.xs,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Super Admin Tools"})}),h.jsx(Gh,{sx:{px:1},children:g.map((A,w)=>h.jsx(yd,{disablePadding:!0,sx:{display:"block",mb:.5},children:x(A)},`superadmin-${w}`))})]}),h.jsxs(de,{sx:{mt:"auto",p:2,borderTop:`1px solid ${K.neutral[200]}`,backgroundColor:K.background.primary},children:[h.jsx(de,{sx:{mb:2},children:h.jsxs(S5,{onClick:()=>{window.open("https://help.waveshi.org","_blank","noopener,noreferrer")},sx:{borderRadius:kt.lg,backgroundColor:K.secondary[50],color:K.secondary[700],fontFamily:we.fontFamily.display,fontWeight:we.fontWeight.medium,fontSize:we.fontSize.lg,"&:hover":{backgroundColor:K.secondary[100],transform:"translateY(-1px)",boxShadow:Ft.sm},transition:xc.transitions.normal},children:[h.jsx($y,{sx:{color:K.secondary[600]},children:h.jsx(O3,{})}),a&&h.jsx(dc,{primary:"Provide Feedback",sx:{"& .MuiListItemText-primary":{fontSize:we.fontSize.lg,fontWeight:we.fontWeight.medium,fontFamily:we.fontFamily.display}}})]})}),h.jsxs(S5,{onClick:async()=>{try{await AT.signOut()}catch(A){console.error("Logout failed:",A)}},sx:{borderRadius:kt.lg,backgroundColor:K.error+"20",color:K.error,fontFamily:we.fontFamily.display,fontWeight:we.fontWeight.medium,fontSize:we.fontSize.lg,"&:hover":{backgroundColor:K.error+"30",transform:"translateY(-1px)",boxShadow:Ft.sm},transition:xc.transitions.normal},children:[h.jsx($y,{sx:{color:K.error},children:h.jsx(D3,{})}),a&&h.jsx(dc,{primary:"Logout",sx:{"& .MuiListItemText-primary":{fontSize:we.fontSize.lg,fontWeight:we.fontWeight.medium,fontFamily:we.fontFamily.display}}})]})]})]})]});return h.jsxs(de,{sx:{display:"flex",flex:1,width:"100%"},children:[h.jsx(de,{sx:{width:a?320:100,height:"100%",flexShrink:0,transition:"width 400ms cubic-bezier(0.25, 0.46, 0.45, 0.94), box-shadow 300ms ease-out",backgroundColor:K.primary[100],borderRight:`1px solid ${K.primary[200]}`,boxShadow:a?Ft.xl:Ft.md,overflow:"auto",position:"relative",zIndex:100,"&::-webkit-scrollbar":{width:a?"8px":"6px",transition:"width 300ms ease"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:a?K.neutral[300]:K.neutral[200],borderRadius:"4px",transition:"background 300ms ease","&:hover":{background:a?K.neutral[400]:K.neutral[300]}},scrollbarWidth:"thin",scrollbarColor:`${a?K.neutral[300]:K.neutral[200]} transparent`},children:y}),h.jsx(de,{sx:{flex:1,backgroundColor:"#F0F4FF",overflow:"auto",transition:"margin-left 400ms cubic-bezier(0.25, 0.46, 0.45, 0.94)"},children:e})]})},nee=()=>h.jsx(de,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",padding:$e[4],backgroundColor:K.primary[100],borderBottom:`1px solid ${K.primary[200]}`,boxShadow:Ft.sm,height:"100%",width:"100%",position:"relative",zIndex:1},children:h.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:$e[4],width:"100%"},children:[h.jsx("img",{src:"/nexlab-logo.png",alt:"NexLab Logo",style:{height:85,borderRadius:kt.lg}}),h.jsx(de,{className:"divider",sx:{height:"85px",borderLeft:`2px solid ${K.primary[500]}`,marginRight:$e[5]}}),h.jsx(he,{variant:"h4",component:"p",sx:{color:K.primary[700],fontFamily:we.fontFamily.secondary,fontSize:we.fontSize["2xl"],fontWeight:we.fontWeight.normal,whiteSpace:"nowrap",flex:1},children:"Next-Generation Experiments and Learning for Advanced Biotech"})]})}),ree=()=>h.jsxs(de,{sx:{backgroundColor:K.primary[100],borderTop:`1px solid ${K.primary[200]}`,height:"10vh",minHeight:70,maxHeight:100,display:"flex",flexDirection:"column",justifyContent:"center",flexShrink:0},children:[h.jsx(qs,{}),h.jsxs(de,{sx:{display:"flex",alignItems:"center",justifyContent:"center",flex:1,px:$e[4],gap:$e[4]},children:[h.jsx(de,{sx:{flex:.25,display:"flex",justifyContent:"center"},children:h.jsx("img",{src:"/FooterLogoLong.png",alt:"Partner Logos",style:{height:60,borderRadius:kt.lg,border:`1px solid ${K.primary[700]}`,opacity:.8}})}),h.jsx(de,{className:"divider",sx:{height:"60px",borderLeft:`2px solid ${K.primary[500]}`,opacity:.8}}),h.jsx(de,{sx:{flex:.4},children:h.jsx(he,{variant:"body2",sx:{color:K.primary[700],fontFamily:we.fontFamily.secondary,fontSize:we.fontSize.sm,lineHeight:1.4,opacity:.8},children:"This project is supported by the National Science Foundation (NSF) under grant number #2300976. Any opinions, findings, and conclusions or recommendations expressed in this material, however, are those of the authors and do not necessarily reflect the views of NSF."})}),h.jsx(de,{className:"divider",sx:{height:"60px",borderLeft:`2px solid ${K.primary[500]}`,opacity:.8}}),h.jsxs(de,{sx:{flex:.1},children:[h.jsx(he,{variant:"body2",sx:{color:K.primary[700],fontFamily:we.fontFamily.secondary,fontSize:we.fontSize.sm,lineHeight:1.4,opacity:.8,mb:1},children:"Legal:"}),h.jsxs(he,{variant:"body2",sx:{color:K.primary[700],fontFamily:we.fontFamily.secondary,fontSize:we.fontSize.sm,lineHeight:1.4,opacity:.8},children:[h.jsx("a",{href:"https://intofuture.org/nexlab-privacy.html",target:"_blank",rel:"noopener noreferrer",style:{color:"inherit",textDecoration:"underline",opacity:.8},children:"Privacy Policy"}),"  ",h.jsx("a",{href:"https://intofuture.org/nexlab-terms.html",target:"_blank",rel:"noopener noreferrer",style:{color:"inherit",textDecoration:"underline",opacity:.8},children:"Terms of Service"})]})]}),h.jsx(de,{className:"divider",sx:{height:"60px",borderLeft:`2px solid ${K.primary[500]}`,opacity:.8}}),h.jsx(de,{sx:{flex:.25},children:h.jsx(he,{variant:"body2",sx:{color:K.primary[700],fontFamily:we.fontFamily.secondary,fontSize:we.fontSize.sm,lineHeight:1.4,opacity:.8},children:" 2025 Institute for Future Intelligence and Kapi'olani Community College Antibody Engineering & Research Projects."})})]})]}),C_=["http","https","mailto","tel"];function iee(e){const n=(e||"").trim(),t=n.charAt(0);if(t==="#"||t==="/")return n;const r=n.indexOf(":");if(r===-1)return n;let i=-1;for(;++i<C_.length;){const a=C_[i];if(r===a.length&&n.slice(0,a.length).toLowerCase()===a)return n}return i=n.indexOf("?"),i!==-1&&r>i||(i=n.indexOf("#"),i!==-1&&r>i)?n:"javascript:void(0)"}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Sw,k_;function aee(){return k_||(k_=1,Sw=function(n){return n!=null&&n.constructor!=null&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}),Sw}var see=aee();const UD=ns(see);function X1(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?E_(e.position):"start"in e||"end"in e?E_(e):"line"in e||"column"in e?JS(e):""}function JS(e){return __(e&&e.line)+":"+__(e&&e.column)}function E_(e){return JS(e&&e.start)+"-"+JS(e&&e.end)}function __(e){return e&&typeof e=="number"?e:1}class Rl extends Error{constructor(n,t,r){const i=[null,null];let a={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof t=="string"&&(r=t,t=void 0),typeof r=="string"){const s=r.indexOf(":");s===-1?i[1]=r:(i[0]=r.slice(0,s),i[1]=r.slice(s+1))}t&&("type"in t||"position"in t?t.position&&(a=t.position):"start"in t||"end"in t?a=t:("line"in t||"column"in t)&&(a.start=t)),this.name=X1(t)||"1:1",this.message=typeof n=="object"?n.message:n,this.stack="",typeof n=="object"&&n.stack&&(this.stack=n.stack),this.reason=this.message,this.fatal,this.line=a.start.line,this.column=a.start.column,this.position=a,this.source=i[0],this.ruleId=i[1],this.file,this.actual,this.expected,this.url,this.note}}Rl.prototype.file="";Rl.prototype.name="";Rl.prototype.reason="";Rl.prototype.message="";Rl.prototype.stack="";Rl.prototype.fatal=null;Rl.prototype.column=null;Rl.prototype.line=null;Rl.prototype.source=null;Rl.prototype.ruleId=null;Rl.prototype.position=null;const ac={basename:oee,dirname:lee,extname:uee,join:cee,sep:"/"};function oee(e,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');Zg(e);let t=0,r=-1,i=e.length,a;if(n===void 0||n.length===0||n.length>e.length){for(;i--;)if(e.charCodeAt(i)===47){if(a){t=i+1;break}}else r<0&&(a=!0,r=i+1);return r<0?"":e.slice(t,r)}if(n===e)return"";let s=-1,l=n.length-1;for(;i--;)if(e.charCodeAt(i)===47){if(a){t=i+1;break}}else s<0&&(a=!0,s=i+1),l>-1&&(e.charCodeAt(i)===n.charCodeAt(l--)?l<0&&(r=i):(l=-1,r=s));return t===r?r=s:r<0&&(r=e.length),e.slice(t,r)}function lee(e){if(Zg(e),e.length===0)return".";let n=-1,t=e.length,r;for(;--t;)if(e.charCodeAt(t)===47){if(r){n=t;break}}else r||(r=!0);return n<0?e.charCodeAt(0)===47?"/":".":n===1&&e.charCodeAt(0)===47?"//":e.slice(0,n)}function uee(e){Zg(e);let n=e.length,t=-1,r=0,i=-1,a=0,s;for(;n--;){const l=e.charCodeAt(n);if(l===47){if(s){r=n+1;break}continue}t<0&&(s=!0,t=n+1),l===46?i<0?i=n:a!==1&&(a=1):i>-1&&(a=-1)}return i<0||t<0||a===0||a===1&&i===t-1&&i===r+1?"":e.slice(i,t)}function cee(...e){let n=-1,t;for(;++n<e.length;)Zg(e[n]),e[n]&&(t=t===void 0?e[n]:t+"/"+e[n]);return t===void 0?".":dee(t)}function dee(e){Zg(e);const n=e.charCodeAt(0)===47;let t=fee(e,!n);return t.length===0&&!n&&(t="."),t.length>0&&e.charCodeAt(e.length-1)===47&&(t+="/"),n?"/"+t:t}function fee(e,n){let t="",r=0,i=-1,a=0,s=-1,l,u;for(;++s<=e.length;){if(s<e.length)l=e.charCodeAt(s);else{if(l===47)break;l=47}if(l===47){if(!(i===s-1||a===1))if(i!==s-1&&a===2){if(t.length<2||r!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){if(u=t.lastIndexOf("/"),u!==t.length-1){u<0?(t="",r=0):(t=t.slice(0,u),r=t.length-1-t.lastIndexOf("/")),i=s,a=0;continue}}else if(t.length>0){t="",r=0,i=s,a=0;continue}}n&&(t=t.length>0?t+"/..":"..",r=2)}else t.length>0?t+="/"+e.slice(i+1,s):t=e.slice(i+1,s),r=s-i-1;i=s,a=0}else l===46&&a>-1?a++:a=-1}return t}function Zg(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const hee={cwd:pee};function pee(){return"/"}function e6(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function mee(e){if(typeof e=="string")e=new URL(e);else if(!e6(e)){const n=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw n.code="ERR_INVALID_ARG_TYPE",n}if(e.protocol!=="file:"){const n=new TypeError("The URL must be of scheme file");throw n.code="ERR_INVALID_URL_SCHEME",n}return gee(e)}function gee(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const n=e.pathname;let t=-1;for(;++t<n.length;)if(n.charCodeAt(t)===37&&n.charCodeAt(t+1)===50){const r=n.charCodeAt(t+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(n)}const Aw=["history","path","basename","stem","extname","dirname"];class HD{constructor(n){let t;n?typeof n=="string"||bee(n)?t={value:n}:e6(n)?t={path:n}:t=n:t={},this.data={},this.messages=[],this.history=[],this.cwd=hee.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<Aw.length;){const a=Aw[r];a in t&&t[a]!==void 0&&t[a]!==null&&(this[a]=a==="history"?[...t[a]]:t[a])}let i;for(i in t)Aw.includes(i)||(this[i]=t[i])}get path(){return this.history[this.history.length-1]}set path(n){e6(n)&&(n=mee(n)),kw(n,"path"),this.path!==n&&this.history.push(n)}get dirname(){return typeof this.path=="string"?ac.dirname(this.path):void 0}set dirname(n){N_(this.basename,"dirname"),this.path=ac.join(n||"",this.basename)}get basename(){return typeof this.path=="string"?ac.basename(this.path):void 0}set basename(n){kw(n,"basename"),Cw(n,"basename"),this.path=ac.join(this.dirname||"",n)}get extname(){return typeof this.path=="string"?ac.extname(this.path):void 0}set extname(n){if(Cw(n,"extname"),N_(this.dirname,"extname"),n){if(n.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(n.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ac.join(this.dirname,this.stem+(n||""))}get stem(){return typeof this.path=="string"?ac.basename(this.path,this.extname):void 0}set stem(n){kw(n,"stem"),Cw(n,"stem"),this.path=ac.join(this.dirname||"",n+(this.extname||""))}toString(n){return(this.value||"").toString(n||void 0)}message(n,t,r){const i=new Rl(n,t,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}info(n,t,r){const i=this.message(n,t,r);return i.fatal=null,i}fail(n,t,r){const i=this.message(n,t,r);throw i.fatal=!0,i}}function Cw(e,n){if(e&&e.includes(ac.sep))throw new Error("`"+n+"` cannot be a path: did not expect `"+ac.sep+"`")}function kw(e,n){if(!e)throw new Error("`"+n+"` cannot be empty")}function N_(e,n){if(!e)throw new Error("Setting `"+n+"` requires `path` to be set too")}function bee(e){return UD(e)}function j_(e){if(e)throw e}var Ew,T_;function yee(){if(T_)return Ew;T_=1;var e=Object.prototype.hasOwnProperty,n=Object.prototype.toString,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(d){return typeof Array.isArray=="function"?Array.isArray(d):n.call(d)==="[object Array]"},a=function(d){if(!d||n.call(d)!=="[object Object]")return!1;var f=e.call(d,"constructor"),m=d.constructor&&d.constructor.prototype&&e.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!f&&!m)return!1;var b;for(b in d);return typeof b>"u"||e.call(d,b)},s=function(d,f){t&&f.name==="__proto__"?t(d,f.name,{enumerable:!0,configurable:!0,value:f.newValue,writable:!0}):d[f.name]=f.newValue},l=function(d,f){if(f==="__proto__")if(e.call(d,f)){if(r)return r(d,f).value}else return;return d[f]};return Ew=function u(){var d,f,m,b,g,x,y=arguments[0],A=1,w=arguments.length,C=!1;for(typeof y=="boolean"&&(C=y,y=arguments[1]||{},A=2),(y==null||typeof y!="object"&&typeof y!="function")&&(y={});A<w;++A)if(d=arguments[A],d!=null)for(f in d)m=l(y,f),b=l(d,f),y!==b&&(C&&b&&(a(b)||(g=i(b)))?(g?(g=!1,x=m&&i(m)?m:[]):x=m&&a(m)?m:{},s(y,{name:f,newValue:u(C,x,b)})):typeof b<"u"&&s(y,{name:f,newValue:b}));return y},Ew}var xee=yee();const O_=ns(xee);function t6(e){if(typeof e!="object"||e===null)return!1;const n=Object.getPrototypeOf(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function vee(){const e=[],n={run:t,use:r};return n;function t(...i){let a=-1;const s=i.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);l(null,...i);function l(u,...d){const f=e[++a];let m=-1;if(u){s(u);return}for(;++m<i.length;)(d[m]===null||d[m]===void 0)&&(d[m]=i[m]);i=d,f?wee(f,l)(...d):s(null,...d)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),n}}function wee(e,n){let t;return r;function r(...s){const l=e.length>s.length;let u;l&&s.push(i);try{u=e.apply(this,s)}catch(d){const f=d;if(l&&t)throw f;return i(f)}l||(u&&u.then&&typeof u.then=="function"?u.then(a,i):u instanceof Error?i(u):a(u))}function i(s,...l){t||(t=!0,n(s,...l))}function a(s){i(null,s)}}const See=VD().freeze(),WD={}.hasOwnProperty;function VD(){const e=vee(),n=[];let t={},r,i=-1;return a.data=s,a.Parser=void 0,a.Compiler=void 0,a.freeze=l,a.attachers=n,a.use=u,a.parse=d,a.stringify=f,a.run=m,a.runSync=b,a.process=g,a.processSync=x,a;function a(){const y=VD();let A=-1;for(;++A<n.length;)y.use(...n[A]);return y.data(O_(!0,{},t)),y}function s(y,A){return typeof y=="string"?arguments.length===2?(jw("data",r),t[y]=A,a):WD.call(t,y)&&t[y]||null:y?(jw("data",r),t=y,a):t}function l(){if(r)return a;for(;++i<n.length;){const[y,...A]=n[i];if(A[0]===!1)continue;A[0]===!0&&(A[0]=void 0);const w=y.call(a,...A);typeof w=="function"&&e.use(w)}return r=!0,i=Number.POSITIVE_INFINITY,a}function u(y,...A){let w;if(jw("use",r),y!=null)if(typeof y=="function")M(y,...A);else if(typeof y=="object")Array.isArray(y)?F(y):j(y);else throw new TypeError("Expected usable value, not `"+y+"`");return w&&(t.settings=Object.assign(t.settings||{},w)),a;function C(z){if(typeof z=="function")M(z);else if(typeof z=="object")if(Array.isArray(z)){const[_,...L]=z;M(_,...L)}else j(z);else throw new TypeError("Expected usable value, not `"+z+"`")}function j(z){F(z.plugins),z.settings&&(w=Object.assign(w||{},z.settings))}function F(z){let _=-1;if(z!=null)if(Array.isArray(z))for(;++_<z.length;){const L=z[_];C(L)}else throw new TypeError("Expected a list of plugins, not `"+z+"`")}function M(z,_){let L=-1,$;for(;++L<n.length;)if(n[L][0]===z){$=n[L];break}$?(t6($[1])&&t6(_)&&(_=O_(!0,$[1],_)),$[1]=_):n.push([...arguments])}}function d(y){a.freeze();const A=_1(y),w=a.Parser;return _w("parse",w),D_(w,"parse")?new w(String(A),A).parse():w(String(A),A)}function f(y,A){a.freeze();const w=_1(A),C=a.Compiler;return Nw("stringify",C),I_(y),D_(C,"compile")?new C(y,w).compile():C(y,w)}function m(y,A,w){if(I_(y),a.freeze(),!w&&typeof A=="function"&&(w=A,A=void 0),!w)return new Promise(C);C(null,w);function C(j,F){e.run(y,_1(A),M);function M(z,_,L){_=_||y,z?F(z):j?j(_):w(null,_,L)}}}function b(y,A){let w,C;return a.run(y,A,j),L_("runSync","run",C),w;function j(F,M){j_(F),w=M,C=!0}}function g(y,A){if(a.freeze(),_w("process",a.Parser),Nw("process",a.Compiler),!A)return new Promise(w);w(null,A);function w(C,j){const F=_1(y);a.run(a.parse(F),F,(z,_,L)=>{if(z||!_||!L)M(z);else{const $=a.stringify(_,L);$==null||(kee($)?L.value=$:L.result=$),M(z,L)}});function M(z,_){z||!_?j(z):C?C(_):A(null,_)}}}function x(y){let A;a.freeze(),_w("processSync",a.Parser),Nw("processSync",a.Compiler);const w=_1(y);return a.process(w,C),L_("processSync","process",A),w;function C(j){A=!0,j_(j)}}}function D_(e,n){return typeof e=="function"&&e.prototype&&(Aee(e.prototype)||n in e.prototype)}function Aee(e){let n;for(n in e)if(WD.call(e,n))return!0;return!1}function _w(e,n){if(typeof n!="function")throw new TypeError("Cannot `"+e+"` without `Parser`")}function Nw(e,n){if(typeof n!="function")throw new TypeError("Cannot `"+e+"` without `Compiler`")}function jw(e,n){if(n)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function I_(e){if(!t6(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function L_(e,n,t){if(!t)throw new Error("`"+e+"` finished async. Use `"+n+"` instead")}function _1(e){return Cee(e)?e:new HD(e)}function Cee(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function kee(e){return typeof e=="string"||UD(e)}const Eee={};function _ee(e,n){const t=Eee,r=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,i=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return YD(e,r,i)}function YD(e,n,t){if(Nee(e)){if("value"in e)return e.type==="html"&&!t?"":e.value;if(n&&"alt"in e&&e.alt)return e.alt;if("children"in e)return R_(e.children,n,t)}return Array.isArray(e)?R_(e,n,t):""}function R_(e,n,t){const r=[];let i=-1;for(;++i<e.length;)r[i]=YD(e[i],n,t);return r.join("")}function Nee(e){return!!(e&&typeof e=="object")}function Fc(e,n,t,r){const i=e.length;let a=0,s;if(n<0?n=-n>i?0:i+n:n=n>i?i:n,t=t>0?t:0,r.length<1e4)s=Array.from(r),s.unshift(n,t),e.splice(...s);else for(t&&e.splice(n,t);a<r.length;)s=r.slice(a,a+1e4),s.unshift(n,0),e.splice(...s),a+=1e4,n+=1e4}function kl(e,n){return e.length>0?(Fc(e,e.length,0,n),e):n}const M_={}.hasOwnProperty;function jee(e){const n={};let t=-1;for(;++t<e.length;)Tee(n,e[t]);return n}function Tee(e,n){let t;for(t in n){const i=(M_.call(e,t)?e[t]:void 0)||(e[t]={}),a=n[t];let s;if(a)for(s in a){M_.call(i,s)||(i[s]=[]);const l=a[s];Oee(i[s],Array.isArray(l)?l:l?[l]:[])}}}function Oee(e,n){let t=-1;const r=[];for(;++t<n.length;)(n[t].add==="after"?e:r).push(n[t]);Fc(e,0,0,r)}const Dee=/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,gc=oh(/[A-Za-z]/),Go=oh(/[\dA-Za-z]/),Iee=oh(/[#-'*+\--9=?A-Z^-~]/);function n6(e){return e!==null&&(e<32||e===127)}const r6=oh(/\d/),Lee=oh(/[\dA-Fa-f]/),Ree=oh(/[!-/:-@[-`{-~]/);function mn(e){return e!==null&&e<-2}function yo(e){return e!==null&&(e<0||e===32)}function xr(e){return e===-2||e===-1||e===32}const Mee=oh(Dee),Fee=oh(/\s/);function oh(e){return n;function n(t){return t!==null&&e.test(String.fromCharCode(t))}}function si(e,n,t,r){const i=r?r-1:Number.POSITIVE_INFINITY;let a=0;return s;function s(u){return xr(u)?(e.enter(t),l(u)):n(u)}function l(u){return xr(u)&&a++<i?(e.consume(u),l):(e.exit(t),n(u))}}const Pee={tokenize:zee};function zee(e){const n=e.attempt(this.parser.constructs.contentInitial,r,i);let t;return n;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),si(e,n,"linePrefix")}function i(l){return e.enter("paragraph"),a(l)}function a(l){const u=e.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=u),t=u,s(l)}function s(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return mn(l)?(e.consume(l),e.exit("chunkText"),a):(e.consume(l),s)}}const qee={tokenize:Bee},F_={tokenize:$ee};function Bee(e){const n=this,t=[];let r=0,i,a,s;return l;function l(j){if(r<t.length){const F=t[r];return n.containerState=F[1],e.attempt(F[0].continuation,u,d)(j)}return d(j)}function u(j){if(r++,n.containerState._closeFlow){n.containerState._closeFlow=void 0,i&&C();const F=n.events.length;let M=F,z;for(;M--;)if(n.events[M][0]==="exit"&&n.events[M][1].type==="chunkFlow"){z=n.events[M][1].end;break}w(r);let _=F;for(;_<n.events.length;)n.events[_][1].end=Object.assign({},z),_++;return Fc(n.events,M+1,0,n.events.slice(F)),n.events.length=_,d(j)}return l(j)}function d(j){if(r===t.length){if(!i)return b(j);if(i.currentConstruct&&i.currentConstruct.concrete)return x(j);n.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return n.containerState={},e.check(F_,f,m)(j)}function f(j){return i&&C(),w(r),b(j)}function m(j){return n.parser.lazy[n.now().line]=r!==t.length,s=n.now().offset,x(j)}function b(j){return n.containerState={},e.attempt(F_,g,x)(j)}function g(j){return r++,t.push([n.currentConstruct,n.containerState]),b(j)}function x(j){if(j===null){i&&C(),w(0),e.consume(j);return}return i=i||n.parser.flow(n.now()),e.enter("chunkFlow",{contentType:"flow",previous:a,_tokenizer:i}),y(j)}function y(j){if(j===null){A(e.exit("chunkFlow"),!0),w(0),e.consume(j);return}return mn(j)?(e.consume(j),A(e.exit("chunkFlow")),r=0,n.interrupt=void 0,l):(e.consume(j),y)}function A(j,F){const M=n.sliceStream(j);if(F&&M.push(null),j.previous=a,a&&(a.next=j),a=j,i.defineSkip(j.start),i.write(M),n.parser.lazy[j.start.line]){let z=i.events.length;for(;z--;)if(i.events[z][1].start.offset<s&&(!i.events[z][1].end||i.events[z][1].end.offset>s))return;const _=n.events.length;let L=_,$,Z;for(;L--;)if(n.events[L][0]==="exit"&&n.events[L][1].type==="chunkFlow"){if($){Z=n.events[L][1].end;break}$=!0}for(w(r),z=_;z<n.events.length;)n.events[z][1].end=Object.assign({},Z),z++;Fc(n.events,L+1,0,n.events.slice(_)),n.events.length=z}}function w(j){let F=t.length;for(;F-- >j;){const M=t[F];n.containerState=M[1],M[0].exit.call(n,e)}t.length=j}function C(){i.write([null]),a=void 0,i=void 0,n.containerState._closeFlow=void 0}}function $ee(e,n,t){return si(e,e.attempt(this.parser.constructs.document,n,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function P_(e){if(e===null||yo(e)||Fee(e))return 1;if(Mee(e))return 2}function NA(e,n,t){const r=[];let i=-1;for(;++i<e.length;){const a=e[i].resolveAll;a&&!r.includes(a)&&(n=a(n,t),r.push(a))}return n}const i6={name:"attention",tokenize:Hee,resolveAll:Uee};function Uee(e,n){let t=-1,r,i,a,s,l,u,d,f;for(;++t<e.length;)if(e[t][0]==="enter"&&e[t][1].type==="attentionSequence"&&e[t][1]._close){for(r=t;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&n.sliceSerialize(e[r][1]).charCodeAt(0)===n.sliceSerialize(e[t][1]).charCodeAt(0)){if((e[r][1]._close||e[t][1]._open)&&(e[t][1].end.offset-e[t][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[t][1].end.offset-e[t][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[t][1].end.offset-e[t][1].start.offset>1?2:1;const m=Object.assign({},e[r][1].end),b=Object.assign({},e[t][1].start);z_(m,-u),z_(b,u),s={type:u>1?"strongSequence":"emphasisSequence",start:m,end:Object.assign({},e[r][1].end)},l={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[t][1].start),end:b},a={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[t][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},s.start),end:Object.assign({},l.end)},e[r][1].end=Object.assign({},s.start),e[t][1].start=Object.assign({},l.end),d=[],e[r][1].end.offset-e[r][1].start.offset&&(d=kl(d,[["enter",e[r][1],n],["exit",e[r][1],n]])),d=kl(d,[["enter",i,n],["enter",s,n],["exit",s,n],["enter",a,n]]),d=kl(d,NA(n.parser.constructs.insideSpan.null,e.slice(r+1,t),n)),d=kl(d,[["exit",a,n],["enter",l,n],["exit",l,n],["exit",i,n]]),e[t][1].end.offset-e[t][1].start.offset?(f=2,d=kl(d,[["enter",e[t][1],n],["exit",e[t][1],n]])):f=0,Fc(e,r-1,t-r+3,d),t=r+d.length-f-2;break}}for(t=-1;++t<e.length;)e[t][1].type==="attentionSequence"&&(e[t][1].type="data");return e}function Hee(e,n){const t=this.parser.constructs.attentionMarkers.null,r=this.previous,i=P_(r);let a;return s;function s(u){return a=u,e.enter("attentionSequence"),l(u)}function l(u){if(u===a)return e.consume(u),l;const d=e.exit("attentionSequence"),f=P_(u),m=!f||f===2&&i||t.includes(u),b=!i||i===2&&f||t.includes(r);return d._open=!!(a===42?m:m&&(i||!b)),d._close=!!(a===42?b:b&&(f||!m)),n(u)}}function z_(e,n){e.column+=n,e.offset+=n,e._bufferIndex+=n}const Wee={name:"autolink",tokenize:Vee};function Vee(e,n,t){let r=0;return i;function i(g){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(g),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a}function a(g){return gc(g)?(e.consume(g),s):d(g)}function s(g){return g===43||g===45||g===46||Go(g)?(r=1,l(g)):d(g)}function l(g){return g===58?(e.consume(g),r=0,u):(g===43||g===45||g===46||Go(g))&&r++<32?(e.consume(g),l):(r=0,d(g))}function u(g){return g===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(g),e.exit("autolinkMarker"),e.exit("autolink"),n):g===null||g===32||g===60||n6(g)?t(g):(e.consume(g),u)}function d(g){return g===64?(e.consume(g),f):Iee(g)?(e.consume(g),d):t(g)}function f(g){return Go(g)?m(g):t(g)}function m(g){return g===46?(e.consume(g),r=0,f):g===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(g),e.exit("autolinkMarker"),e.exit("autolink"),n):b(g)}function b(g){if((g===45||Go(g))&&r++<63){const x=g===45?b:m;return e.consume(g),x}return t(g)}}const zv={tokenize:Yee,partial:!0};function Yee(e,n,t){return r;function r(a){return xr(a)?si(e,i,"linePrefix")(a):i(a)}function i(a){return a===null||mn(a)?n(a):t(a)}}const GD={name:"blockQuote",tokenize:Gee,continuation:{tokenize:Qee},exit:Kee};function Gee(e,n,t){const r=this;return i;function i(s){if(s===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(s),e.exit("blockQuoteMarker"),a}return t(s)}function a(s){return xr(s)?(e.enter("blockQuotePrefixWhitespace"),e.consume(s),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),n):(e.exit("blockQuotePrefix"),n(s))}}function Qee(e,n,t){const r=this;return i;function i(s){return xr(s)?si(e,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):a(s)}function a(s){return e.attempt(GD,n,t)(s)}}function Kee(e){e.exit("blockQuote")}const QD={name:"characterEscape",tokenize:Xee};function Xee(e,n,t){return r;function r(a){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(a),e.exit("escapeMarker"),i}function i(a){return Ree(a)?(e.enter("characterEscapeValue"),e.consume(a),e.exit("characterEscapeValue"),e.exit("characterEscape"),n):t(a)}}const q_=document.createElement("i");function jA(e){const n="&"+e+";";q_.innerHTML=n;const t=q_.textContent;return t.charCodeAt(t.length-1)===59&&e!=="semi"||t===n?!1:t}const KD={name:"characterReference",tokenize:Zee};function Zee(e,n,t){const r=this;let i=0,a,s;return l;function l(m){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(m),e.exit("characterReferenceMarker"),u}function u(m){return m===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(m),e.exit("characterReferenceMarkerNumeric"),d):(e.enter("characterReferenceValue"),a=31,s=Go,f(m))}function d(m){return m===88||m===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(m),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,s=Lee,f):(e.enter("characterReferenceValue"),a=7,s=r6,f(m))}function f(m){if(m===59&&i){const b=e.exit("characterReferenceValue");return s===Go&&!jA(r.sliceSerialize(b))?t(m):(e.enter("characterReferenceMarker"),e.consume(m),e.exit("characterReferenceMarker"),e.exit("characterReference"),n)}return s(m)&&i++<a?(e.consume(m),f):t(m)}}const B_={tokenize:ete,partial:!0},$_={name:"codeFenced",tokenize:Jee,concrete:!0};function Jee(e,n,t){const r=this,i={tokenize:M,partial:!0};let a=0,s=0,l;return u;function u(z){return d(z)}function d(z){const _=r.events[r.events.length-1];return a=_&&_[1].type==="linePrefix"?_[2].sliceSerialize(_[1],!0).length:0,l=z,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),f(z)}function f(z){return z===l?(s++,e.consume(z),f):s<3?t(z):(e.exit("codeFencedFenceSequence"),xr(z)?si(e,m,"whitespace")(z):m(z))}function m(z){return z===null||mn(z)?(e.exit("codeFencedFence"),r.interrupt?n(z):e.check(B_,y,F)(z)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),b(z))}function b(z){return z===null||mn(z)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),m(z)):xr(z)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),si(e,g,"whitespace")(z)):z===96&&z===l?t(z):(e.consume(z),b)}function g(z){return z===null||mn(z)?m(z):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),x(z))}function x(z){return z===null||mn(z)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),m(z)):z===96&&z===l?t(z):(e.consume(z),x)}function y(z){return e.attempt(i,F,A)(z)}function A(z){return e.enter("lineEnding"),e.consume(z),e.exit("lineEnding"),w}function w(z){return a>0&&xr(z)?si(e,C,"linePrefix",a+1)(z):C(z)}function C(z){return z===null||mn(z)?e.check(B_,y,F)(z):(e.enter("codeFlowValue"),j(z))}function j(z){return z===null||mn(z)?(e.exit("codeFlowValue"),C(z)):(e.consume(z),j)}function F(z){return e.exit("codeFenced"),n(z)}function M(z,_,L){let $=0;return Z;function Z(G){return z.enter("lineEnding"),z.consume(G),z.exit("lineEnding"),O}function O(G){return z.enter("codeFencedFence"),xr(G)?si(z,T,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(G):T(G)}function T(G){return G===l?(z.enter("codeFencedFenceSequence"),R(G)):L(G)}function R(G){return G===l?($++,z.consume(G),R):$>=s?(z.exit("codeFencedFenceSequence"),xr(G)?si(z,N,"whitespace")(G):N(G)):L(G)}function N(G){return G===null||mn(G)?(z.exit("codeFencedFence"),_(G)):L(G)}}}function ete(e,n,t){const r=this;return i;function i(s){return s===null?t(s):(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),a)}function a(s){return r.parser.lazy[r.now().line]?t(s):n(s)}}const Tw={name:"codeIndented",tokenize:nte},tte={tokenize:rte,partial:!0};function nte(e,n,t){const r=this;return i;function i(d){return e.enter("codeIndented"),si(e,a,"linePrefix",5)(d)}function a(d){const f=r.events[r.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?s(d):t(d)}function s(d){return d===null?u(d):mn(d)?e.attempt(tte,s,u)(d):(e.enter("codeFlowValue"),l(d))}function l(d){return d===null||mn(d)?(e.exit("codeFlowValue"),s(d)):(e.consume(d),l)}function u(d){return e.exit("codeIndented"),n(d)}}function rte(e,n,t){const r=this;return i;function i(s){return r.parser.lazy[r.now().line]?t(s):mn(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),i):si(e,a,"linePrefix",5)(s)}function a(s){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?n(s):mn(s)?i(s):t(s)}}const ite={name:"codeText",tokenize:ote,resolve:ate,previous:ste};function ate(e){let n=e.length-4,t=3,r,i;if((e[t][1].type==="lineEnding"||e[t][1].type==="space")&&(e[n][1].type==="lineEnding"||e[n][1].type==="space")){for(r=t;++r<n;)if(e[r][1].type==="codeTextData"){e[t][1].type="codeTextPadding",e[n][1].type="codeTextPadding",t+=2,n-=2;break}}for(r=t-1,n++;++r<=n;)i===void 0?r!==n&&e[r][1].type!=="lineEnding"&&(i=r):(r===n||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),n-=r-i-2,r=i+2),i=void 0);return e}function ste(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function ote(e,n,t){let r=0,i,a;return s;function s(m){return e.enter("codeText"),e.enter("codeTextSequence"),l(m)}function l(m){return m===96?(e.consume(m),r++,l):(e.exit("codeTextSequence"),u(m))}function u(m){return m===null?t(m):m===32?(e.enter("space"),e.consume(m),e.exit("space"),u):m===96?(a=e.enter("codeTextSequence"),i=0,f(m)):mn(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),u):(e.enter("codeTextData"),d(m))}function d(m){return m===null||m===32||m===96||mn(m)?(e.exit("codeTextData"),u(m)):(e.consume(m),d)}function f(m){return m===96?(e.consume(m),i++,f):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),n(m)):(a.type="codeTextData",d(m))}}function XD(e){const n={};let t=-1,r,i,a,s,l,u,d;for(;++t<e.length;){for(;t in n;)t=n[t];if(r=e[t],t&&r[1].type==="chunkFlow"&&e[t-1][1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,a=0,a<u.length&&u[a][1].type==="lineEndingBlank"&&(a+=2),a<u.length&&u[a][1].type==="content"))for(;++a<u.length&&u[a][1].type!=="content";)u[a][1].type==="chunkText"&&(u[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(n,lte(e,t)),t=n[t],d=!0);else if(r[1]._container){for(a=t,i=void 0;a--&&(s=e[a],s[1].type==="lineEnding"||s[1].type==="lineEndingBlank");)s[0]==="enter"&&(i&&(e[i][1].type="lineEndingBlank"),s[1].type="lineEnding",i=a);i&&(r[1].end=Object.assign({},e[i][1].start),l=e.slice(i,t),l.unshift(r),Fc(e,i,t-i+1,l))}}return!d}function lte(e,n){const t=e[n][1],r=e[n][2];let i=n-1;const a=[],s=t._tokenizer||r.parser[t.contentType](t.start),l=s.events,u=[],d={};let f,m,b=-1,g=t,x=0,y=0;const A=[y];for(;g;){for(;e[++i][1]!==g;);a.push(i),g._tokenizer||(f=r.sliceStream(g),g.next||f.push(null),m&&s.defineSkip(g.start),g._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(f),g._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),m=g,g=g.next}for(g=t;++b<l.length;)l[b][0]==="exit"&&l[b-1][0]==="enter"&&l[b][1].type===l[b-1][1].type&&l[b][1].start.line!==l[b][1].end.line&&(y=b+1,A.push(y),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(s.events=[],g?(g._tokenizer=void 0,g.previous=void 0):A.pop(),b=A.length;b--;){const w=l.slice(A[b],A[b+1]),C=a.pop();u.unshift([C,C+w.length-1]),Fc(e,C,2,w)}for(b=-1;++b<u.length;)d[x+u[b][0]]=x+u[b][1],x+=u[b][1]-u[b][0]-1;return d}const ute={tokenize:fte,resolve:dte},cte={tokenize:hte,partial:!0};function dte(e){return XD(e),e}function fte(e,n){let t;return r;function r(l){return e.enter("content"),t=e.enter("chunkContent",{contentType:"content"}),i(l)}function i(l){return l===null?a(l):mn(l)?e.check(cte,s,a)(l):(e.consume(l),i)}function a(l){return e.exit("chunkContent"),e.exit("content"),n(l)}function s(l){return e.consume(l),e.exit("chunkContent"),t.next=e.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,i}}function hte(e,n,t){const r=this;return i;function i(s){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),si(e,a,"linePrefix")}function a(s){if(s===null||mn(s))return t(s);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?n(s):e.interrupt(r.parser.constructs.flow,t,n)(s)}}function ZD(e,n,t,r,i,a,s,l,u){const d=u||Number.POSITIVE_INFINITY;let f=0;return m;function m(w){return w===60?(e.enter(r),e.enter(i),e.enter(a),e.consume(w),e.exit(a),b):w===null||w===32||w===41||n6(w)?t(w):(e.enter(r),e.enter(s),e.enter(l),e.enter("chunkString",{contentType:"string"}),y(w))}function b(w){return w===62?(e.enter(a),e.consume(w),e.exit(a),e.exit(i),e.exit(r),n):(e.enter(l),e.enter("chunkString",{contentType:"string"}),g(w))}function g(w){return w===62?(e.exit("chunkString"),e.exit(l),b(w)):w===null||w===60||mn(w)?t(w):(e.consume(w),w===92?x:g)}function x(w){return w===60||w===62||w===92?(e.consume(w),g):g(w)}function y(w){return!f&&(w===null||w===41||yo(w))?(e.exit("chunkString"),e.exit(l),e.exit(s),e.exit(r),n(w)):f<d&&w===40?(e.consume(w),f++,y):w===41?(e.consume(w),f--,y):w===null||w===32||w===40||n6(w)?t(w):(e.consume(w),w===92?A:y)}function A(w){return w===40||w===41||w===92?(e.consume(w),y):y(w)}}function JD(e,n,t,r,i,a){const s=this;let l=0,u;return d;function d(g){return e.enter(r),e.enter(i),e.consume(g),e.exit(i),e.enter(a),f}function f(g){return l>999||g===null||g===91||g===93&&!u||g===94&&!l&&"_hiddenFootnoteSupport"in s.parser.constructs?t(g):g===93?(e.exit(a),e.enter(i),e.consume(g),e.exit(i),e.exit(r),n):mn(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),f):(e.enter("chunkString",{contentType:"string"}),m(g))}function m(g){return g===null||g===91||g===93||mn(g)||l++>999?(e.exit("chunkString"),f(g)):(e.consume(g),u||(u=!xr(g)),g===92?b:m)}function b(g){return g===91||g===92||g===93?(e.consume(g),l++,m):m(g)}}function eI(e,n,t,r,i,a){let s;return l;function l(b){return b===34||b===39||b===40?(e.enter(r),e.enter(i),e.consume(b),e.exit(i),s=b===40?41:b,u):t(b)}function u(b){return b===s?(e.enter(i),e.consume(b),e.exit(i),e.exit(r),n):(e.enter(a),d(b))}function d(b){return b===s?(e.exit(a),u(s)):b===null?t(b):mn(b)?(e.enter("lineEnding"),e.consume(b),e.exit("lineEnding"),si(e,d,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),f(b))}function f(b){return b===s||b===null||mn(b)?(e.exit("chunkString"),d(b)):(e.consume(b),b===92?m:f)}function m(b){return b===s||b===92?(e.consume(b),f):f(b)}}function Z1(e,n){let t;return r;function r(i){return mn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t=!0,r):xr(i)?si(e,r,t?"linePrefix":"lineSuffix")(i):n(i)}}function $0(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const pte={name:"definition",tokenize:gte},mte={tokenize:bte,partial:!0};function gte(e,n,t){const r=this;let i;return a;function a(g){return e.enter("definition"),s(g)}function s(g){return JD.call(r,e,l,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function l(g){return i=$0(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),g===58?(e.enter("definitionMarker"),e.consume(g),e.exit("definitionMarker"),u):t(g)}function u(g){return yo(g)?Z1(e,d)(g):d(g)}function d(g){return ZD(e,f,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function f(g){return e.attempt(mte,m,m)(g)}function m(g){return xr(g)?si(e,b,"whitespace")(g):b(g)}function b(g){return g===null||mn(g)?(e.exit("definition"),r.parser.defined.push(i),n(g)):t(g)}}function bte(e,n,t){return r;function r(l){return yo(l)?Z1(e,i)(l):t(l)}function i(l){return eI(e,a,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function a(l){return xr(l)?si(e,s,"whitespace")(l):s(l)}function s(l){return l===null||mn(l)?n(l):t(l)}}const yte={name:"hardBreakEscape",tokenize:xte};function xte(e,n,t){return r;function r(a){return e.enter("hardBreakEscape"),e.consume(a),i}function i(a){return mn(a)?(e.exit("hardBreakEscape"),n(a)):t(a)}}const vte={name:"headingAtx",tokenize:Ste,resolve:wte};function wte(e,n){let t=e.length-2,r=3,i,a;return e[r][1].type==="whitespace"&&(r+=2),t-2>r&&e[t][1].type==="whitespace"&&(t-=2),e[t][1].type==="atxHeadingSequence"&&(r===t-1||t-4>r&&e[t-2][1].type==="whitespace")&&(t-=r+1===t?2:4),t>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[t][1].end},a={type:"chunkText",start:e[r][1].start,end:e[t][1].end,contentType:"text"},Fc(e,r,t-r+1,[["enter",i,n],["enter",a,n],["exit",a,n],["exit",i,n]])),e}function Ste(e,n,t){let r=0;return i;function i(f){return e.enter("atxHeading"),a(f)}function a(f){return e.enter("atxHeadingSequence"),s(f)}function s(f){return f===35&&r++<6?(e.consume(f),s):f===null||yo(f)?(e.exit("atxHeadingSequence"),l(f)):t(f)}function l(f){return f===35?(e.enter("atxHeadingSequence"),u(f)):f===null||mn(f)?(e.exit("atxHeading"),n(f)):xr(f)?si(e,l,"whitespace")(f):(e.enter("atxHeadingText"),d(f))}function u(f){return f===35?(e.consume(f),u):(e.exit("atxHeadingSequence"),l(f))}function d(f){return f===null||f===35||yo(f)?(e.exit("atxHeadingText"),l(f)):(e.consume(f),d)}}const Ate=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],U_=["pre","script","style","textarea"],Cte={name:"htmlFlow",tokenize:Nte,resolveTo:_te,concrete:!0},kte={tokenize:Tte,partial:!0},Ete={tokenize:jte,partial:!0};function _te(e){let n=e.length;for(;n--&&!(e[n][0]==="enter"&&e[n][1].type==="htmlFlow"););return n>1&&e[n-2][1].type==="linePrefix"&&(e[n][1].start=e[n-2][1].start,e[n+1][1].start=e[n-2][1].start,e.splice(n-2,2)),e}function Nte(e,n,t){const r=this;let i,a,s,l,u;return d;function d(B){return f(B)}function f(B){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(B),m}function m(B){return B===33?(e.consume(B),b):B===47?(e.consume(B),a=!0,y):B===63?(e.consume(B),i=3,r.interrupt?n:U):gc(B)?(e.consume(B),s=String.fromCharCode(B),A):t(B)}function b(B){return B===45?(e.consume(B),i=2,g):B===91?(e.consume(B),i=5,l=0,x):gc(B)?(e.consume(B),i=4,r.interrupt?n:U):t(B)}function g(B){return B===45?(e.consume(B),r.interrupt?n:U):t(B)}function x(B){const ee="CDATA[";return B===ee.charCodeAt(l++)?(e.consume(B),l===ee.length?r.interrupt?n:T:x):t(B)}function y(B){return gc(B)?(e.consume(B),s=String.fromCharCode(B),A):t(B)}function A(B){if(B===null||B===47||B===62||yo(B)){const ee=B===47,re=s.toLowerCase();return!ee&&!a&&U_.includes(re)?(i=1,r.interrupt?n(B):T(B)):Ate.includes(s.toLowerCase())?(i=6,ee?(e.consume(B),w):r.interrupt?n(B):T(B)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?t(B):a?C(B):j(B))}return B===45||Go(B)?(e.consume(B),s+=String.fromCharCode(B),A):t(B)}function w(B){return B===62?(e.consume(B),r.interrupt?n:T):t(B)}function C(B){return xr(B)?(e.consume(B),C):Z(B)}function j(B){return B===47?(e.consume(B),Z):B===58||B===95||gc(B)?(e.consume(B),F):xr(B)?(e.consume(B),j):Z(B)}function F(B){return B===45||B===46||B===58||B===95||Go(B)?(e.consume(B),F):M(B)}function M(B){return B===61?(e.consume(B),z):xr(B)?(e.consume(B),M):j(B)}function z(B){return B===null||B===60||B===61||B===62||B===96?t(B):B===34||B===39?(e.consume(B),u=B,_):xr(B)?(e.consume(B),z):L(B)}function _(B){return B===u?(e.consume(B),u=null,$):B===null||mn(B)?t(B):(e.consume(B),_)}function L(B){return B===null||B===34||B===39||B===47||B===60||B===61||B===62||B===96||yo(B)?M(B):(e.consume(B),L)}function $(B){return B===47||B===62||xr(B)?j(B):t(B)}function Z(B){return B===62?(e.consume(B),O):t(B)}function O(B){return B===null||mn(B)?T(B):xr(B)?(e.consume(B),O):t(B)}function T(B){return B===45&&i===2?(e.consume(B),W):B===60&&i===1?(e.consume(B),Q):B===62&&i===4?(e.consume(B),le):B===63&&i===3?(e.consume(B),U):B===93&&i===5?(e.consume(B),se):mn(B)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(kte,q,R)(B)):B===null||mn(B)?(e.exit("htmlFlowData"),R(B)):(e.consume(B),T)}function R(B){return e.check(Ete,N,q)(B)}function N(B){return e.enter("lineEnding"),e.consume(B),e.exit("lineEnding"),G}function G(B){return B===null||mn(B)?R(B):(e.enter("htmlFlowData"),T(B))}function W(B){return B===45?(e.consume(B),U):T(B)}function Q(B){return B===47?(e.consume(B),s="",J):T(B)}function J(B){if(B===62){const ee=s.toLowerCase();return U_.includes(ee)?(e.consume(B),le):T(B)}return gc(B)&&s.length<8?(e.consume(B),s+=String.fromCharCode(B),J):T(B)}function se(B){return B===93?(e.consume(B),U):T(B)}function U(B){return B===62?(e.consume(B),le):B===45&&i===2?(e.consume(B),U):T(B)}function le(B){return B===null||mn(B)?(e.exit("htmlFlowData"),q(B)):(e.consume(B),le)}function q(B){return e.exit("htmlFlow"),n(B)}}function jte(e,n,t){const r=this;return i;function i(s){return mn(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),a):t(s)}function a(s){return r.parser.lazy[r.now().line]?t(s):n(s)}}function Tte(e,n,t){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(zv,n,t)}}const Ote={name:"htmlText",tokenize:Dte};function Dte(e,n,t){const r=this;let i,a,s;return l;function l(U){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(U),u}function u(U){return U===33?(e.consume(U),d):U===47?(e.consume(U),M):U===63?(e.consume(U),j):gc(U)?(e.consume(U),L):t(U)}function d(U){return U===45?(e.consume(U),f):U===91?(e.consume(U),a=0,x):gc(U)?(e.consume(U),C):t(U)}function f(U){return U===45?(e.consume(U),g):t(U)}function m(U){return U===null?t(U):U===45?(e.consume(U),b):mn(U)?(s=m,Q(U)):(e.consume(U),m)}function b(U){return U===45?(e.consume(U),g):m(U)}function g(U){return U===62?W(U):U===45?b(U):m(U)}function x(U){const le="CDATA[";return U===le.charCodeAt(a++)?(e.consume(U),a===le.length?y:x):t(U)}function y(U){return U===null?t(U):U===93?(e.consume(U),A):mn(U)?(s=y,Q(U)):(e.consume(U),y)}function A(U){return U===93?(e.consume(U),w):y(U)}function w(U){return U===62?W(U):U===93?(e.consume(U),w):y(U)}function C(U){return U===null||U===62?W(U):mn(U)?(s=C,Q(U)):(e.consume(U),C)}function j(U){return U===null?t(U):U===63?(e.consume(U),F):mn(U)?(s=j,Q(U)):(e.consume(U),j)}function F(U){return U===62?W(U):j(U)}function M(U){return gc(U)?(e.consume(U),z):t(U)}function z(U){return U===45||Go(U)?(e.consume(U),z):_(U)}function _(U){return mn(U)?(s=_,Q(U)):xr(U)?(e.consume(U),_):W(U)}function L(U){return U===45||Go(U)?(e.consume(U),L):U===47||U===62||yo(U)?$(U):t(U)}function $(U){return U===47?(e.consume(U),W):U===58||U===95||gc(U)?(e.consume(U),Z):mn(U)?(s=$,Q(U)):xr(U)?(e.consume(U),$):W(U)}function Z(U){return U===45||U===46||U===58||U===95||Go(U)?(e.consume(U),Z):O(U)}function O(U){return U===61?(e.consume(U),T):mn(U)?(s=O,Q(U)):xr(U)?(e.consume(U),O):$(U)}function T(U){return U===null||U===60||U===61||U===62||U===96?t(U):U===34||U===39?(e.consume(U),i=U,R):mn(U)?(s=T,Q(U)):xr(U)?(e.consume(U),T):(e.consume(U),N)}function R(U){return U===i?(e.consume(U),i=void 0,G):U===null?t(U):mn(U)?(s=R,Q(U)):(e.consume(U),R)}function N(U){return U===null||U===34||U===39||U===60||U===61||U===96?t(U):U===47||U===62||yo(U)?$(U):(e.consume(U),N)}function G(U){return U===47||U===62||yo(U)?$(U):t(U)}function W(U){return U===62?(e.consume(U),e.exit("htmlTextData"),e.exit("htmlText"),n):t(U)}function Q(U){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(U),e.exit("lineEnding"),J}function J(U){return xr(U)?si(e,se,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(U):se(U)}function se(U){return e.enter("htmlTextData"),s(U)}}const TA={name:"labelEnd",tokenize:Pte,resolveTo:Fte,resolveAll:Mte},Ite={tokenize:zte},Lte={tokenize:qte},Rte={tokenize:Bte};function Mte(e){let n=-1;for(;++n<e.length;){const t=e[n][1];(t.type==="labelImage"||t.type==="labelLink"||t.type==="labelEnd")&&(e.splice(n+1,t.type==="labelImage"?4:2),t.type="data",n++)}return e}function Fte(e,n){let t=e.length,r=0,i,a,s,l;for(;t--;)if(i=e[t][1],a){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[t][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(s){if(e[t][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(a=t,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(s=t);const u={type:e[a][1].type==="labelLink"?"link":"image",start:Object.assign({},e[a][1].start),end:Object.assign({},e[e.length-1][1].end)},d={type:"label",start:Object.assign({},e[a][1].start),end:Object.assign({},e[s][1].end)},f={type:"labelText",start:Object.assign({},e[a+r+2][1].end),end:Object.assign({},e[s-2][1].start)};return l=[["enter",u,n],["enter",d,n]],l=kl(l,e.slice(a+1,a+r+3)),l=kl(l,[["enter",f,n]]),l=kl(l,NA(n.parser.constructs.insideSpan.null,e.slice(a+r+4,s-3),n)),l=kl(l,[["exit",f,n],e[s-2],e[s-1],["exit",d,n]]),l=kl(l,e.slice(s+1)),l=kl(l,[["exit",u,n]]),Fc(e,a,e.length,l),e}function Pte(e,n,t){const r=this;let i=r.events.length,a,s;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){a=r.events[i][1];break}return l;function l(b){return a?a._inactive?m(b):(s=r.parser.defined.includes($0(r.sliceSerialize({start:a.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(b),e.exit("labelMarker"),e.exit("labelEnd"),u):t(b)}function u(b){return b===40?e.attempt(Ite,f,s?f:m)(b):b===91?e.attempt(Lte,f,s?d:m)(b):s?f(b):m(b)}function d(b){return e.attempt(Rte,f,m)(b)}function f(b){return n(b)}function m(b){return a._balanced=!0,t(b)}}function zte(e,n,t){return r;function r(m){return e.enter("resource"),e.enter("resourceMarker"),e.consume(m),e.exit("resourceMarker"),i}function i(m){return yo(m)?Z1(e,a)(m):a(m)}function a(m){return m===41?f(m):ZD(e,s,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(m)}function s(m){return yo(m)?Z1(e,u)(m):f(m)}function l(m){return t(m)}function u(m){return m===34||m===39||m===40?eI(e,d,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(m):f(m)}function d(m){return yo(m)?Z1(e,f)(m):f(m)}function f(m){return m===41?(e.enter("resourceMarker"),e.consume(m),e.exit("resourceMarker"),e.exit("resource"),n):t(m)}}function qte(e,n,t){const r=this;return i;function i(l){return JD.call(r,e,a,s,"reference","referenceMarker","referenceString")(l)}function a(l){return r.parser.defined.includes($0(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?n(l):t(l)}function s(l){return t(l)}}function Bte(e,n,t){return r;function r(a){return e.enter("reference"),e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),i}function i(a){return a===93?(e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),e.exit("reference"),n):t(a)}}const $te={name:"labelStartImage",tokenize:Ute,resolveAll:TA.resolveAll};function Ute(e,n,t){const r=this;return i;function i(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),a}function a(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),s):t(l)}function s(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(l):n(l)}}const Hte={name:"labelStartLink",tokenize:Wte,resolveAll:TA.resolveAll};function Wte(e,n,t){const r=this;return i;function i(s){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(s),e.exit("labelMarker"),e.exit("labelLink"),a}function a(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(s):n(s)}}const Ow={name:"lineEnding",tokenize:Vte};function Vte(e,n){return t;function t(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),si(e,n,"linePrefix")}}const sx={name:"thematicBreak",tokenize:Yte};function Yte(e,n,t){let r=0,i;return a;function a(d){return e.enter("thematicBreak"),s(d)}function s(d){return i=d,l(d)}function l(d){return d===i?(e.enter("thematicBreakSequence"),u(d)):r>=3&&(d===null||mn(d))?(e.exit("thematicBreak"),n(d)):t(d)}function u(d){return d===i?(e.consume(d),r++,u):(e.exit("thematicBreakSequence"),xr(d)?si(e,l,"whitespace")(d):l(d))}}const mo={name:"list",tokenize:Kte,continuation:{tokenize:Xte},exit:Jte},Gte={tokenize:ene,partial:!0},Qte={tokenize:Zte,partial:!0};function Kte(e,n,t){const r=this,i=r.events[r.events.length-1];let a=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,s=0;return l;function l(g){const x=r.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!r.containerState.marker||g===r.containerState.marker:r6(g)){if(r.containerState.type||(r.containerState.type=x,e.enter(x,{_container:!0})),x==="listUnordered")return e.enter("listItemPrefix"),g===42||g===45?e.check(sx,t,d)(g):d(g);if(!r.interrupt||g===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(g)}return t(g)}function u(g){return r6(g)&&++s<10?(e.consume(g),u):(!r.interrupt||s<2)&&(r.containerState.marker?g===r.containerState.marker:g===41||g===46)?(e.exit("listItemValue"),d(g)):t(g)}function d(g){return e.enter("listItemMarker"),e.consume(g),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||g,e.check(zv,r.interrupt?t:f,e.attempt(Gte,b,m))}function f(g){return r.containerState.initialBlankLine=!0,a++,b(g)}function m(g){return xr(g)?(e.enter("listItemPrefixWhitespace"),e.consume(g),e.exit("listItemPrefixWhitespace"),b):t(g)}function b(g){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,n(g)}}function Xte(e,n,t){const r=this;return r.containerState._closeFlow=void 0,e.check(zv,i,a);function i(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,si(e,n,"listItemIndent",r.containerState.size+1)(l)}function a(l){return r.containerState.furtherBlankLines||!xr(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,s(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(Qte,n,s)(l))}function s(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,si(e,e.attempt(mo,n,t),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function Zte(e,n,t){const r=this;return si(e,i,"listItemIndent",r.containerState.size+1);function i(a){const s=r.events[r.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===r.containerState.size?n(a):t(a)}}function Jte(e){e.exit(this.containerState.type)}function ene(e,n,t){const r=this;return si(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(a){const s=r.events[r.events.length-1];return!xr(a)&&s&&s[1].type==="listItemPrefixWhitespace"?n(a):t(a)}}const H_={name:"setextUnderline",tokenize:nne,resolveTo:tne};function tne(e,n){let t=e.length,r,i,a;for(;t--;)if(e[t][0]==="enter"){if(e[t][1].type==="content"){r=t;break}e[t][1].type==="paragraph"&&(i=t)}else e[t][1].type==="content"&&e.splice(t,1),!a&&e[t][1].type==="definition"&&(a=t);const s={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",a?(e.splice(i,0,["enter",s,n]),e.splice(a+1,0,["exit",e[r][1],n]),e[r][1].end=Object.assign({},e[a][1].end)):e[r][1]=s,e.push(["exit",s,n]),e}function nne(e,n,t){const r=this;let i;return a;function a(d){let f=r.events.length,m;for(;f--;)if(r.events[f][1].type!=="lineEnding"&&r.events[f][1].type!=="linePrefix"&&r.events[f][1].type!=="content"){m=r.events[f][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||m)?(e.enter("setextHeadingLine"),i=d,s(d)):t(d)}function s(d){return e.enter("setextHeadingLineSequence"),l(d)}function l(d){return d===i?(e.consume(d),l):(e.exit("setextHeadingLineSequence"),xr(d)?si(e,u,"lineSuffix")(d):u(d))}function u(d){return d===null||mn(d)?(e.exit("setextHeadingLine"),n(d)):t(d)}}const rne={tokenize:ine};function ine(e){const n=this,t=e.attempt(zv,r,e.attempt(this.parser.constructs.flowInitial,i,si(e,e.attempt(this.parser.constructs.flow,i,e.attempt(ute,i)),"linePrefix")));return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),n.currentConstruct=void 0,t}function i(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),n.currentConstruct=void 0,t}}const ane={resolveAll:nI()},sne=tI("string"),one=tI("text");function tI(e){return{tokenize:n,resolveAll:nI(e==="text"?lne:void 0)};function n(t){const r=this,i=this.parser.constructs[e],a=t.attempt(i,s,l);return s;function s(f){return d(f)?a(f):l(f)}function l(f){if(f===null){t.consume(f);return}return t.enter("data"),t.consume(f),u}function u(f){return d(f)?(t.exit("data"),a(f)):(t.consume(f),u)}function d(f){if(f===null)return!0;const m=i[f];let b=-1;if(m)for(;++b<m.length;){const g=m[b];if(!g.previous||g.previous.call(r,r.previous))return!0}return!1}}}function nI(e){return n;function n(t,r){let i=-1,a;for(;++i<=t.length;)a===void 0?t[i]&&t[i][1].type==="data"&&(a=i,i++):(!t[i]||t[i][1].type!=="data")&&(i!==a+2&&(t[a][1].end=t[i-1][1].end,t.splice(a+2,i-a-2),i=a+2),a=void 0);return e?e(t,r):t}}function lne(e,n){let t=0;for(;++t<=e.length;)if((t===e.length||e[t][1].type==="lineEnding")&&e[t-1][1].type==="data"){const r=e[t-1][1],i=n.sliceStream(r);let a=i.length,s=-1,l=0,u;for(;a--;){const d=i[a];if(typeof d=="string"){for(s=d.length;d.charCodeAt(s-1)===32;)l++,s--;if(s)break;s=-1}else if(d===-2)u=!0,l++;else if(d!==-1){a++;break}}if(l){const d={type:t===e.length||u||l<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-l,offset:r.end.offset-l,_index:r.start._index+a,_bufferIndex:a?s:r.start._bufferIndex+s},end:Object.assign({},r.end)};r.end=Object.assign({},d.start),r.start.offset===r.end.offset?Object.assign(r,d):(e.splice(t,0,["enter",d,n],["exit",d,n]),t+=2)}t++}return e}function une(e,n,t){let r=Object.assign(t?Object.assign({},t):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},a=[];let s=[],l=[];const u={consume:C,enter:j,exit:F,attempt:_(M),check:_(z),interrupt:_(z,{interrupt:!0})},d={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:g,sliceSerialize:b,now:x,defineSkip:y,write:m};let f=n.tokenize.call(d,u);return n.resolveAll&&a.push(n),d;function m(O){return s=kl(s,O),A(),s[s.length-1]!==null?[]:(L(n,0),d.events=NA(a,d.events,d),d.events)}function b(O,T){return dne(g(O),T)}function g(O){return cne(s,O)}function x(){const{line:O,column:T,offset:R,_index:N,_bufferIndex:G}=r;return{line:O,column:T,offset:R,_index:N,_bufferIndex:G}}function y(O){i[O.line]=O.column,Z()}function A(){let O;for(;r._index<s.length;){const T=s[r._index];if(typeof T=="string")for(O=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===O&&r._bufferIndex<T.length;)w(T.charCodeAt(r._bufferIndex));else w(T)}}function w(O){f=f(O)}function C(O){mn(O)?(r.line++,r.column=1,r.offset+=O===-3?2:1,Z()):O!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===s[r._index].length&&(r._bufferIndex=-1,r._index++)),d.previous=O}function j(O,T){const R=T||{};return R.type=O,R.start=x(),d.events.push(["enter",R,d]),l.push(R),R}function F(O){const T=l.pop();return T.end=x(),d.events.push(["exit",T,d]),T}function M(O,T){L(O,T.from)}function z(O,T){T.restore()}function _(O,T){return R;function R(N,G,W){let Q,J,se,U;return Array.isArray(N)?q(N):"tokenize"in N?q([N]):le(N);function le(oe){return Ce;function Ce(ye){const Se=ye!==null&&oe[ye],Te=ye!==null&&oe.null,Le=[...Array.isArray(Se)?Se:Se?[Se]:[],...Array.isArray(Te)?Te:Te?[Te]:[]];return q(Le)(ye)}}function q(oe){return Q=oe,J=0,oe.length===0?W:B(oe[J])}function B(oe){return Ce;function Ce(ye){return U=$(),se=oe,oe.partial||(d.currentConstruct=oe),oe.name&&d.parser.constructs.disable.null.includes(oe.name)?re():oe.tokenize.call(T?Object.assign(Object.create(d),T):d,u,ee,re)(ye)}}function ee(oe){return O(se,U),G}function re(oe){return U.restore(),++J<Q.length?B(Q[J]):W}}}function L(O,T){O.resolveAll&&!a.includes(O)&&a.push(O),O.resolve&&Fc(d.events,T,d.events.length-T,O.resolve(d.events.slice(T),d)),O.resolveTo&&(d.events=O.resolveTo(d.events,d))}function $(){const O=x(),T=d.previous,R=d.currentConstruct,N=d.events.length,G=Array.from(l);return{restore:W,from:N};function W(){r=O,d.previous=T,d.currentConstruct=R,d.events.length=N,l=G,Z()}}function Z(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function cne(e,n){const t=n.start._index,r=n.start._bufferIndex,i=n.end._index,a=n.end._bufferIndex;let s;if(t===i)s=[e[t].slice(r,a)];else{if(s=e.slice(t,i),r>-1){const l=s[0];typeof l=="string"?s[0]=l.slice(r):s.shift()}a>0&&s.push(e[i].slice(0,a))}return s}function dne(e,n){let t=-1;const r=[];let i;for(;++t<e.length;){const a=e[t];let s;if(typeof a=="string")s=a;else switch(a){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=n?" ":"	";break}case-1:{if(!n&&i)continue;s=" ";break}default:s=String.fromCharCode(a)}i=a===-2,r.push(s)}return r.join("")}const fne={42:mo,43:mo,45:mo,48:mo,49:mo,50:mo,51:mo,52:mo,53:mo,54:mo,55:mo,56:mo,57:mo,62:GD},hne={91:pte},pne={[-2]:Tw,[-1]:Tw,32:Tw},mne={35:vte,42:sx,45:[H_,sx],60:Cte,61:H_,95:sx,96:$_,126:$_},gne={38:KD,92:QD},bne={[-5]:Ow,[-4]:Ow,[-3]:Ow,33:$te,38:KD,42:i6,60:[Wee,Ote],91:Hte,92:[yte,QD],93:TA,95:i6,96:ite},yne={null:[i6,ane]},xne={null:[42,95]},vne={null:[]},wne=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:xne,contentInitial:hne,disable:vne,document:fne,flow:mne,flowInitial:pne,insideSpan:yne,string:gne,text:bne},Symbol.toStringTag,{value:"Module"}));function Sne(e){const t=jee([wne,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:t,content:i(Pee),document:i(qee),flow:i(rne),string:i(sne),text:i(one)};return r;function i(a){return s;function s(l){return une(r,a,l)}}}const W_=/[\0\t\n\r]/g;function Ane(){let e=1,n="",t=!0,r;return i;function i(a,s,l){const u=[];let d,f,m,b,g;for(a=n+a.toString(s),m=0,n="",t&&(a.charCodeAt(0)===65279&&m++,t=void 0);m<a.length;){if(W_.lastIndex=m,d=W_.exec(a),b=d&&d.index!==void 0?d.index:a.length,g=a.charCodeAt(b),!d){n=a.slice(m);break}if(g===10&&m===b&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),m<b&&(u.push(a.slice(m,b)),e+=b-m),g){case 0:{u.push(65533),e++;break}case 9:{for(f=Math.ceil(e/4)*4,u.push(-2);e++<f;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}m=b+1}return l&&(r&&u.push(-5),n&&u.push(n),u.push(null)),u}}function Cne(e){for(;!XD(e););return e}function rI(e,n){const t=Number.parseInt(e,n);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"":String.fromCharCode(t)}const kne=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Ene(e){return e.replace(kne,_ne)}function _ne(e,n,t){if(n)return n;if(t.charCodeAt(0)===35){const i=t.charCodeAt(1),a=i===120||i===88;return rI(t.slice(a?2:1),a?16:10)}return jA(t)||e}const iI={}.hasOwnProperty,Nne=function(e,n,t){return typeof n!="string"&&(t=n,n=void 0),jne(t)(Cne(Sne(t).document().write(Ane()(e,n,!0))))};function jne(e){const n={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:l(Re),autolinkProtocol:O,autolinkEmail:O,atxHeading:l(ne),blockQuote:l(Le),characterEscape:O,characterReference:O,codeFenced:l(He),codeFencedFenceInfo:u,codeFencedFenceMeta:u,codeIndented:l(He,u),codeText:l(Ye,u),codeTextData:O,data:O,codeFlowValue:O,definition:l(V),definitionDestinationString:u,definitionLabelString:u,definitionTitleString:u,emphasis:l(Ae),hardBreakEscape:l(be),hardBreakTrailing:l(be),htmlFlow:l(fe,u),htmlFlowData:O,htmlText:l(fe,u),htmlTextData:O,image:l(ke),label:u,link:l(Re),listItem:l(je),listItemValue:x,listOrdered:l(qe,g),listUnordered:l(qe),paragraph:l(Ze),reference:re,referenceString:u,resourceDestinationString:u,resourceTitleString:u,setextHeading:l(ne),strong:l(ut),thematicBreak:l(Pe)},exit:{atxHeading:f(),atxHeadingSequence:_,autolink:f(),autolinkEmail:Te,autolinkProtocol:Se,blockQuote:f(),characterEscapeValue:T,characterReferenceMarkerHexadecimal:Ce,characterReferenceMarkerNumeric:Ce,characterReferenceValue:ye,codeFenced:f(C),codeFencedFence:w,codeFencedFenceInfo:y,codeFencedFenceMeta:A,codeFlowValue:T,codeIndented:f(j),codeText:f(Q),codeTextData:T,data:T,definition:f(),definitionDestinationString:z,definitionLabelString:F,definitionTitleString:M,emphasis:f(),hardBreakEscape:f(N),hardBreakTrailing:f(N),htmlFlow:f(G),htmlFlowData:T,htmlText:f(W),htmlTextData:T,image:f(se),label:le,labelText:U,lineEnding:R,link:f(J),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:oe,resourceDestinationString:q,resourceTitleString:B,resource:ee,setextHeading:f(Z),setextHeadingLineSequence:$,setextHeadingText:L,strong:f(),thematicBreak:f()}};aI(n,(e||{}).mdastExtensions||[]);const t={};return r;function r(ve){let Ne={type:"root",children:[]};const De={stack:[Ne],tokenStack:[],config:n,enter:d,exit:m,buffer:u,resume:b,setData:a,getData:s},ft=[];let et=-1;for(;++et<ve.length;)if(ve[et][1].type==="listOrdered"||ve[et][1].type==="listUnordered")if(ve[et][0]==="enter")ft.push(et);else{const Pt=ft.pop();et=i(ve,Pt,et)}for(et=-1;++et<ve.length;){const Pt=n[ve[et][0]];iI.call(Pt,ve[et][1].type)&&Pt[ve[et][1].type].call(Object.assign({sliceSerialize:ve[et][2].sliceSerialize},De),ve[et][1])}if(De.tokenStack.length>0){const Pt=De.tokenStack[De.tokenStack.length-1];(Pt[1]||V_).call(De,void 0,Pt[0])}for(Ne.position={start:Tf(ve.length>0?ve[0][1].start:{line:1,column:1,offset:0}),end:Tf(ve.length>0?ve[ve.length-2][1].end:{line:1,column:1,offset:0})},et=-1;++et<n.transforms.length;)Ne=n.transforms[et](Ne)||Ne;return Ne}function i(ve,Ne,De){let ft=Ne-1,et=-1,Pt=!1,Nt,Vt,Rt,Xt;for(;++ft<=De;){const nn=ve[ft];if(nn[1].type==="listUnordered"||nn[1].type==="listOrdered"||nn[1].type==="blockQuote"?(nn[0]==="enter"?et++:et--,Xt=void 0):nn[1].type==="lineEndingBlank"?nn[0]==="enter"&&(Nt&&!Xt&&!et&&!Rt&&(Rt=ft),Xt=void 0):nn[1].type==="linePrefix"||nn[1].type==="listItemValue"||nn[1].type==="listItemMarker"||nn[1].type==="listItemPrefix"||nn[1].type==="listItemPrefixWhitespace"||(Xt=void 0),!et&&nn[0]==="enter"&&nn[1].type==="listItemPrefix"||et===-1&&nn[0]==="exit"&&(nn[1].type==="listUnordered"||nn[1].type==="listOrdered")){if(Nt){let cn=ft;for(Vt=void 0;cn--;){const Pn=ve[cn];if(Pn[1].type==="lineEnding"||Pn[1].type==="lineEndingBlank"){if(Pn[0]==="exit")continue;Vt&&(ve[Vt][1].type="lineEndingBlank",Pt=!0),Pn[1].type="lineEnding",Vt=cn}else if(!(Pn[1].type==="linePrefix"||Pn[1].type==="blockQuotePrefix"||Pn[1].type==="blockQuotePrefixWhitespace"||Pn[1].type==="blockQuoteMarker"||Pn[1].type==="listItemIndent"))break}Rt&&(!Vt||Rt<Vt)&&(Nt._spread=!0),Nt.end=Object.assign({},Vt?ve[Vt][1].start:nn[1].end),ve.splice(Vt||ft,0,["exit",Nt,nn[2]]),ft++,De++}nn[1].type==="listItemPrefix"&&(Nt={type:"listItem",_spread:!1,start:Object.assign({},nn[1].start),end:void 0},ve.splice(ft,0,["enter",Nt,nn[2]]),ft++,De++,Rt=void 0,Xt=!0)}}return ve[Ne][1]._spread=Pt,De}function a(ve,Ne){t[ve]=Ne}function s(ve){return t[ve]}function l(ve,Ne){return De;function De(ft){d.call(this,ve(ft),ft),Ne&&Ne.call(this,ft)}}function u(){this.stack.push({type:"fragment",children:[]})}function d(ve,Ne,De){return this.stack[this.stack.length-1].children.push(ve),this.stack.push(ve),this.tokenStack.push([Ne,De]),ve.position={start:Tf(Ne.start)},ve}function f(ve){return Ne;function Ne(De){ve&&ve.call(this,De),m.call(this,De)}}function m(ve,Ne){const De=this.stack.pop(),ft=this.tokenStack.pop();if(ft)ft[0].type!==ve.type&&(Ne?Ne.call(this,ve,ft[0]):(ft[1]||V_).call(this,ve,ft[0]));else throw new Error("Cannot close `"+ve.type+"` ("+X1({start:ve.start,end:ve.end})+"): its not open");return De.position.end=Tf(ve.end),De}function b(){return _ee(this.stack.pop())}function g(){a("expectingFirstListItemValue",!0)}function x(ve){if(s("expectingFirstListItemValue")){const Ne=this.stack[this.stack.length-2];Ne.start=Number.parseInt(this.sliceSerialize(ve),10),a("expectingFirstListItemValue")}}function y(){const ve=this.resume(),Ne=this.stack[this.stack.length-1];Ne.lang=ve}function A(){const ve=this.resume(),Ne=this.stack[this.stack.length-1];Ne.meta=ve}function w(){s("flowCodeInside")||(this.buffer(),a("flowCodeInside",!0))}function C(){const ve=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=ve.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),a("flowCodeInside")}function j(){const ve=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=ve.replace(/(\r?\n|\r)$/g,"")}function F(ve){const Ne=this.resume(),De=this.stack[this.stack.length-1];De.label=Ne,De.identifier=$0(this.sliceSerialize(ve)).toLowerCase()}function M(){const ve=this.resume(),Ne=this.stack[this.stack.length-1];Ne.title=ve}function z(){const ve=this.resume(),Ne=this.stack[this.stack.length-1];Ne.url=ve}function _(ve){const Ne=this.stack[this.stack.length-1];if(!Ne.depth){const De=this.sliceSerialize(ve).length;Ne.depth=De}}function L(){a("setextHeadingSlurpLineEnding",!0)}function $(ve){const Ne=this.stack[this.stack.length-1];Ne.depth=this.sliceSerialize(ve).charCodeAt(0)===61?1:2}function Z(){a("setextHeadingSlurpLineEnding")}function O(ve){const Ne=this.stack[this.stack.length-1];let De=Ne.children[Ne.children.length-1];(!De||De.type!=="text")&&(De=rt(),De.position={start:Tf(ve.start)},Ne.children.push(De)),this.stack.push(De)}function T(ve){const Ne=this.stack.pop();Ne.value+=this.sliceSerialize(ve),Ne.position.end=Tf(ve.end)}function R(ve){const Ne=this.stack[this.stack.length-1];if(s("atHardBreak")){const De=Ne.children[Ne.children.length-1];De.position.end=Tf(ve.end),a("atHardBreak");return}!s("setextHeadingSlurpLineEnding")&&n.canContainEols.includes(Ne.type)&&(O.call(this,ve),T.call(this,ve))}function N(){a("atHardBreak",!0)}function G(){const ve=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=ve}function W(){const ve=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=ve}function Q(){const ve=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=ve}function J(){const ve=this.stack[this.stack.length-1];if(s("inReference")){const Ne=s("referenceType")||"shortcut";ve.type+="Reference",ve.referenceType=Ne,delete ve.url,delete ve.title}else delete ve.identifier,delete ve.label;a("referenceType")}function se(){const ve=this.stack[this.stack.length-1];if(s("inReference")){const Ne=s("referenceType")||"shortcut";ve.type+="Reference",ve.referenceType=Ne,delete ve.url,delete ve.title}else delete ve.identifier,delete ve.label;a("referenceType")}function U(ve){const Ne=this.sliceSerialize(ve),De=this.stack[this.stack.length-2];De.label=Ene(Ne),De.identifier=$0(Ne).toLowerCase()}function le(){const ve=this.stack[this.stack.length-1],Ne=this.resume(),De=this.stack[this.stack.length-1];if(a("inReference",!0),De.type==="link"){const ft=ve.children;De.children=ft}else De.alt=Ne}function q(){const ve=this.resume(),Ne=this.stack[this.stack.length-1];Ne.url=ve}function B(){const ve=this.resume(),Ne=this.stack[this.stack.length-1];Ne.title=ve}function ee(){a("inReference")}function re(){a("referenceType","collapsed")}function oe(ve){const Ne=this.resume(),De=this.stack[this.stack.length-1];De.label=Ne,De.identifier=$0(this.sliceSerialize(ve)).toLowerCase(),a("referenceType","full")}function Ce(ve){a("characterReferenceType",ve.type)}function ye(ve){const Ne=this.sliceSerialize(ve),De=s("characterReferenceType");let ft;De?(ft=rI(Ne,De==="characterReferenceMarkerNumeric"?10:16),a("characterReferenceType")):ft=jA(Ne);const et=this.stack.pop();et.value+=ft,et.position.end=Tf(ve.end)}function Se(ve){T.call(this,ve);const Ne=this.stack[this.stack.length-1];Ne.url=this.sliceSerialize(ve)}function Te(ve){T.call(this,ve);const Ne=this.stack[this.stack.length-1];Ne.url="mailto:"+this.sliceSerialize(ve)}function Le(){return{type:"blockquote",children:[]}}function He(){return{type:"code",lang:null,meta:null,value:""}}function Ye(){return{type:"inlineCode",value:""}}function V(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ae(){return{type:"emphasis",children:[]}}function ne(){return{type:"heading",depth:void 0,children:[]}}function be(){return{type:"break"}}function fe(){return{type:"html",value:""}}function ke(){return{type:"image",title:null,url:"",alt:null}}function Re(){return{type:"link",title:null,url:"",children:[]}}function qe(ve){return{type:"list",ordered:ve.type==="listOrdered",start:null,spread:ve._spread,children:[]}}function je(ve){return{type:"listItem",spread:ve._spread,checked:null,children:[]}}function Ze(){return{type:"paragraph",children:[]}}function ut(){return{type:"strong",children:[]}}function rt(){return{type:"text",value:""}}function Pe(){return{type:"thematicBreak"}}}function Tf(e){return{line:e.line,column:e.column,offset:e.offset}}function aI(e,n){let t=-1;for(;++t<n.length;){const r=n[t];Array.isArray(r)?aI(e,r):Tne(e,r)}}function Tne(e,n){let t;for(t in n)if(iI.call(n,t)){if(t==="canContainEols"){const r=n[t];r&&e[t].push(...r)}else if(t==="transforms"){const r=n[t];r&&e[t].push(...r)}else if(t==="enter"||t==="exit"){const r=n[t];r&&Object.assign(e[t],r)}}}function V_(e,n){throw e?new Error("Cannot close `"+e.type+"` ("+X1({start:e.start,end:e.end})+"): a different token (`"+n.type+"`, "+X1({start:n.start,end:n.end})+") is open"):new Error("Cannot close document, a token (`"+n.type+"`, "+X1({start:n.start,end:n.end})+") is still open")}function One(e){Object.assign(this,{Parser:t=>{const r=this.data("settings");return Nne(t,Object.assign({},r,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}function Dne(e,n){const t={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(n),!0)};return e.patch(n,t),e.applyData(n,t)}function Ine(e,n){const t={type:"element",tagName:"br",properties:{},children:[]};return e.patch(n,t),[e.applyData(n,t),{type:"text",value:`
`}]}function Lne(e,n){const t=n.value?n.value+`
`:"",r=n.lang?n.lang.match(/^[^ \t]+(?=[ \t]|$)/):null,i={};r&&(i.className=["language-"+r]);let a={type:"element",tagName:"code",properties:i,children:[{type:"text",value:t}]};return n.meta&&(a.data={meta:n.meta}),e.patch(n,a),a=e.applyData(n,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(n,a),a}function Rne(e,n){const t={type:"element",tagName:"del",properties:{},children:e.all(n)};return e.patch(n,t),e.applyData(n,t)}function Mne(e,n){const t={type:"element",tagName:"em",properties:{},children:e.all(n)};return e.patch(n,t),e.applyData(n,t)}function mm(e){const n=[];let t=-1,r=0,i=0;for(;++t<e.length;){const a=e.charCodeAt(t);let s="";if(a===37&&Go(e.charCodeAt(t+1))&&Go(e.charCodeAt(t+2)))i=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(s=String.fromCharCode(a));else if(a>55295&&a<57344){const l=e.charCodeAt(t+1);a<56320&&l>56319&&l<57344?(s=String.fromCharCode(a,l),i=1):s=""}else s=String.fromCharCode(a);s&&(n.push(e.slice(r,t),encodeURIComponent(s)),r=t+i+1,s=""),i&&(t+=i,i=0)}return n.join("")+e.slice(r)}function sI(e,n){const t=String(n.identifier).toUpperCase(),r=mm(t.toLowerCase()),i=e.footnoteOrder.indexOf(t);let a;i===-1?(e.footnoteOrder.push(t),e.footnoteCounts[t]=1,a=e.footnoteOrder.length):(e.footnoteCounts[t]++,a=i+1);const s=e.footnoteCounts[t],l={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fn-"+r,id:e.clobberPrefix+"fnref-"+r+(s>1?"-"+s:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(n,l);const u={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(n,u),e.applyData(n,u)}function Fne(e,n){const t=e.footnoteById;let r=1;for(;r in t;)r++;const i=String(r);return t[i]={type:"footnoteDefinition",identifier:i,children:[{type:"paragraph",children:n.children}],position:n.position},sI(e,{type:"footnoteReference",identifier:i,position:n.position})}function Pne(e,n){const t={type:"element",tagName:"h"+n.depth,properties:{},children:e.all(n)};return e.patch(n,t),e.applyData(n,t)}function zne(e,n){if(e.dangerous){const t={type:"raw",value:n.value};return e.patch(n,t),e.applyData(n,t)}return null}function oI(e,n){const t=n.referenceType;let r="]";if(t==="collapsed"?r+="[]":t==="full"&&(r+="["+(n.label||n.identifier)+"]"),n.type==="imageReference")return{type:"text",value:"!["+n.alt+r};const i=e.all(n),a=i[0];a&&a.type==="text"?a.value="["+a.value:i.unshift({type:"text",value:"["});const s=i[i.length-1];return s&&s.type==="text"?s.value+=r:i.push({type:"text",value:r}),i}function qne(e,n){const t=e.definition(n.identifier);if(!t)return oI(e,n);const r={src:mm(t.url||""),alt:n.alt};t.title!==null&&t.title!==void 0&&(r.title=t.title);const i={type:"element",tagName:"img",properties:r,children:[]};return e.patch(n,i),e.applyData(n,i)}function Bne(e,n){const t={src:mm(n.url)};n.alt!==null&&n.alt!==void 0&&(t.alt=n.alt),n.title!==null&&n.title!==void 0&&(t.title=n.title);const r={type:"element",tagName:"img",properties:t,children:[]};return e.patch(n,r),e.applyData(n,r)}function $ne(e,n){const t={type:"text",value:n.value.replace(/\r?\n|\r/g," ")};e.patch(n,t);const r={type:"element",tagName:"code",properties:{},children:[t]};return e.patch(n,r),e.applyData(n,r)}function Une(e,n){const t=e.definition(n.identifier);if(!t)return oI(e,n);const r={href:mm(t.url||"")};t.title!==null&&t.title!==void 0&&(r.title=t.title);const i={type:"element",tagName:"a",properties:r,children:e.all(n)};return e.patch(n,i),e.applyData(n,i)}function Hne(e,n){const t={href:mm(n.url)};n.title!==null&&n.title!==void 0&&(t.title=n.title);const r={type:"element",tagName:"a",properties:t,children:e.all(n)};return e.patch(n,r),e.applyData(n,r)}function Wne(e,n,t){const r=e.all(n),i=t?Vne(t):lI(n),a={},s=[];if(typeof n.checked=="boolean"){const f=r[0];let m;f&&f.type==="element"&&f.tagName==="p"?m=f:(m={type:"element",tagName:"p",properties:{},children:[]},r.unshift(m)),m.children.length>0&&m.children.unshift({type:"text",value:" "}),m.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:n.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const f=r[l];(i||l!==0||f.type!=="element"||f.tagName!=="p")&&s.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!i?s.push(...f.children):s.push(f)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&s.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:a,children:s};return e.patch(n,d),e.applyData(n,d)}function Vne(e){let n=!1;if(e.type==="list"){n=e.spread||!1;const t=e.children;let r=-1;for(;!n&&++r<t.length;)n=lI(t[r])}return n}function lI(e){const n=e.spread;return n??e.children.length>1}function Yne(e,n){const t={},r=e.all(n);let i=-1;for(typeof n.start=="number"&&n.start!==1&&(t.start=n.start);++i<r.length;){const s=r[i];if(s.type==="element"&&s.tagName==="li"&&s.properties&&Array.isArray(s.properties.className)&&s.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const a={type:"element",tagName:n.ordered?"ol":"ul",properties:t,children:e.wrap(r,!0)};return e.patch(n,a),e.applyData(n,a)}function Gne(e,n){const t={type:"element",tagName:"p",properties:{},children:e.all(n)};return e.patch(n,t),e.applyData(n,t)}function Qne(e,n){const t={type:"root",children:e.wrap(e.all(n))};return e.patch(n,t),e.applyData(n,t)}function Kne(e,n){const t={type:"element",tagName:"strong",properties:{},children:e.all(n)};return e.patch(n,t),e.applyData(n,t)}const OA=uI("start"),DA=uI("end");function Xne(e){return{start:OA(e),end:DA(e)}}function uI(e){return n;function n(t){const r=t&&t.position&&t.position[e]||{};return{line:r.line||null,column:r.column||null,offset:r.offset>-1?r.offset:null}}}function Zne(e,n){const t=e.all(n),r=t.shift(),i=[];if(r){const s={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(n.children[0],s),i.push(s)}if(t.length>0){const s={type:"element",tagName:"tbody",properties:{},children:e.wrap(t,!0)},l=OA(n.children[1]),u=DA(n.children[n.children.length-1]);l.line&&u.line&&(s.position={start:l,end:u}),i.push(s)}const a={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(n,a),e.applyData(n,a)}function Jne(e,n,t){const r=t?t.children:void 0,a=(r?r.indexOf(n):1)===0?"th":"td",s=t&&t.type==="table"?t.align:void 0,l=s?s.length:n.children.length;let u=-1;const d=[];for(;++u<l;){const m=n.children[u],b={},g=s?s[u]:void 0;g&&(b.align=g);let x={type:"element",tagName:a,properties:b,children:[]};m&&(x.children=e.all(m),e.patch(m,x),x=e.applyData(n,x)),d.push(x)}const f={type:"element",tagName:"tr",properties:{},children:e.wrap(d,!0)};return e.patch(n,f),e.applyData(n,f)}function ere(e,n){const t={type:"element",tagName:"td",properties:{},children:e.all(n)};return e.patch(n,t),e.applyData(n,t)}const Y_=9,G_=32;function tre(e){const n=String(e),t=/\r?\n|\r/g;let r=t.exec(n),i=0;const a=[];for(;r;)a.push(Q_(n.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=t.exec(n);return a.push(Q_(n.slice(i),i>0,!1)),a.join("")}function Q_(e,n,t){let r=0,i=e.length;if(n){let a=e.codePointAt(r);for(;a===Y_||a===G_;)r++,a=e.codePointAt(r)}if(t){let a=e.codePointAt(i-1);for(;a===Y_||a===G_;)i--,a=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function nre(e,n){const t={type:"text",value:tre(String(n.value))};return e.patch(n,t),e.applyData(n,t)}function rre(e,n){const t={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(n,t),e.applyData(n,t)}const ire={blockquote:Dne,break:Ine,code:Lne,delete:Rne,emphasis:Mne,footnoteReference:sI,footnote:Fne,heading:Pne,html:zne,imageReference:qne,image:Bne,inlineCode:$ne,linkReference:Une,link:Hne,listItem:Wne,list:Yne,paragraph:Gne,root:Qne,strong:Kne,table:Zne,tableCell:ere,tableRow:Jne,text:nre,thematicBreak:rre,toml:My,yaml:My,definition:My,footnoteDefinition:My};function My(){return null}const cI=function(e){if(e==null)return lre;if(typeof e=="string")return ore(e);if(typeof e=="object")return Array.isArray(e)?are(e):sre(e);if(typeof e=="function")return qv(e);throw new Error("Expected function, string, or object as test")};function are(e){const n=[];let t=-1;for(;++t<e.length;)n[t]=cI(e[t]);return qv(r);function r(...i){let a=-1;for(;++a<n.length;)if(n[a].call(this,...i))return!0;return!1}}function sre(e){return qv(n);function n(t){let r;for(r in e)if(t[r]!==e[r])return!1;return!0}}function ore(e){return qv(n);function n(t){return t&&t.type===e}}function qv(e){return n;function n(t,...r){return!!(t&&typeof t=="object"&&"type"in t&&e.call(this,t,...r))}}function lre(){return!0}const ure=!0,K_=!1,cre="skip",dre=function(e,n,t,r){typeof n=="function"&&typeof t!="function"&&(r=t,t=n,n=null);const i=cI(n),a=r?-1:1;s(e,void 0,[])();function s(l,u,d){const f=l&&typeof l=="object"?l:{};if(typeof f.type=="string"){const b=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(l.type+(b?"<"+b+">":""))+")"})}return m;function m(){let b=[],g,x,y;if((!n||i(l,u,d[d.length-1]||null))&&(b=fre(t(l,d)),b[0]===K_))return b;if(l.children&&b[0]!==cre)for(x=(r?l.children.length:-1)+a,y=d.concat(l);x>-1&&x<l.children.length;){if(g=s(l.children[x],x,y)(),g[0]===K_)return g;x=typeof g[1]=="number"?g[1]:x+a}return b}}};function fre(e){return Array.isArray(e)?e:typeof e=="number"?[ure,e]:[e]}const IA=function(e,n,t,r){typeof n=="function"&&typeof t!="function"&&(r=t,t=n,n=null),dre(e,n,i,r);function i(a,s){const l=s[s.length-1];return t(a,l?l.children.indexOf(a):null,l)}};function hre(e){return!e||!e.position||!e.position.start||!e.position.start.line||!e.position.start.column||!e.position.end||!e.position.end.line||!e.position.end.column}const X_={}.hasOwnProperty;function pre(e){const n=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return IA(e,"definition",r=>{const i=Z_(r.identifier);i&&!X_.call(n,i)&&(n[i]=r)}),t;function t(r){const i=Z_(r);return i&&X_.call(n,i)?n[i]:null}}function Z_(e){return String(e||"").toUpperCase()}const Yx={}.hasOwnProperty;function mre(e,n){const t=n||{},r=t.allowDangerousHtml||!1,i={};return s.dangerous=r,s.clobberPrefix=t.clobberPrefix===void 0||t.clobberPrefix===null?"user-content-":t.clobberPrefix,s.footnoteLabel=t.footnoteLabel||"Footnotes",s.footnoteLabelTagName=t.footnoteLabelTagName||"h2",s.footnoteLabelProperties=t.footnoteLabelProperties||{className:["sr-only"]},s.footnoteBackLabel=t.footnoteBackLabel||"Back to content",s.unknownHandler=t.unknownHandler,s.passThrough=t.passThrough,s.handlers={...ire,...t.handlers},s.definition=pre(e),s.footnoteById=i,s.footnoteOrder=[],s.footnoteCounts={},s.patch=gre,s.applyData=bre,s.one=l,s.all=u,s.wrap=xre,s.augment=a,IA(e,"footnoteDefinition",d=>{const f=String(d.identifier).toUpperCase();Yx.call(i,f)||(i[f]=d)}),s;function a(d,f){if(d&&"data"in d&&d.data){const m=d.data;m.hName&&(f.type!=="element"&&(f={type:"element",tagName:"",properties:{},children:[]}),f.tagName=m.hName),f.type==="element"&&m.hProperties&&(f.properties={...f.properties,...m.hProperties}),"children"in f&&f.children&&m.hChildren&&(f.children=m.hChildren)}if(d){const m="type"in d?d:{position:d};hre(m)||(f.position={start:OA(m),end:DA(m)})}return f}function s(d,f,m,b){return Array.isArray(m)&&(b=m,m={}),a(d,{type:"element",tagName:f,properties:m||{},children:b||[]})}function l(d,f){return dI(s,d,f)}function u(d){return LA(s,d)}}function gre(e,n){e.position&&(n.position=Xne(e))}function bre(e,n){let t=n;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,a=e.data.hProperties;typeof r=="string"&&(t.type==="element"?t.tagName=r:t={type:"element",tagName:r,properties:{},children:[]}),t.type==="element"&&a&&(t.properties={...t.properties,...a}),"children"in t&&t.children&&i!==null&&i!==void 0&&(t.children=i)}return t}function dI(e,n,t){const r=n&&n.type;if(!r)throw new Error("Expected node, got `"+n+"`");return Yx.call(e.handlers,r)?e.handlers[r](e,n,t):e.passThrough&&e.passThrough.includes(r)?"children"in n?{...n,children:LA(e,n)}:n:e.unknownHandler?e.unknownHandler(e,n,t):yre(e,n)}function LA(e,n){const t=[];if("children"in n){const r=n.children;let i=-1;for(;++i<r.length;){const a=dI(e,r[i],n);if(a){if(i&&r[i-1].type==="break"&&(!Array.isArray(a)&&a.type==="text"&&(a.value=a.value.replace(/^\s+/,"")),!Array.isArray(a)&&a.type==="element")){const s=a.children[0];s&&s.type==="text"&&(s.value=s.value.replace(/^\s+/,""))}Array.isArray(a)?t.push(...a):t.push(a)}}}return t}function yre(e,n){const t=n.data||{},r="value"in n&&!(Yx.call(t,"hProperties")||Yx.call(t,"hChildren"))?{type:"text",value:n.value}:{type:"element",tagName:"div",properties:{},children:LA(e,n)};return e.patch(n,r),e.applyData(n,r)}function xre(e,n){const t=[];let r=-1;for(n&&t.push({type:"text",value:`
`});++r<e.length;)r&&t.push({type:"text",value:`
`}),t.push(e[r]);return n&&e.length>0&&t.push({type:"text",value:`
`}),t}function vre(e){const n=[];let t=-1;for(;++t<e.footnoteOrder.length;){const r=e.footnoteById[e.footnoteOrder[t]];if(!r)continue;const i=e.all(r),a=String(r.identifier).toUpperCase(),s=mm(a.toLowerCase());let l=0;const u=[];for(;++l<=e.footnoteCounts[a];){const m={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fnref-"+s+(l>1?"-"+l:""),dataFootnoteBackref:!0,className:["data-footnote-backref"],ariaLabel:e.footnoteBackLabel},children:[{type:"text",value:""}]};l>1&&m.children.push({type:"element",tagName:"sup",children:[{type:"text",value:String(l)}]}),u.length>0&&u.push({type:"text",value:" "}),u.push(m)}const d=i[i.length-1];if(d&&d.type==="element"&&d.tagName==="p"){const m=d.children[d.children.length-1];m&&m.type==="text"?m.value+=" ":d.children.push({type:"text",value:" "}),d.children.push(...u)}else i.push(...u);const f={type:"element",tagName:"li",properties:{id:e.clobberPrefix+"fn-"+s},children:e.wrap(i,!0)};e.patch(r,f),n.push(f)}if(n.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:e.footnoteLabelTagName,properties:{...JSON.parse(JSON.stringify(e.footnoteLabelProperties)),id:"footnote-label"},children:[{type:"text",value:e.footnoteLabel}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(n,!0)},{type:"text",value:`
`}]}}function fI(e,n){const t=mre(e,n),r=t.one(e,null),i=vre(t);return i&&r.children.push({type:"text",value:`
`},i),Array.isArray(r)?{type:"root",children:r}:r}const wre=function(e,n){return e&&"run"in e?Sre(e,n):Are(e||n)};function Sre(e,n){return(t,r,i)=>{e.run(fI(t,n),r,a=>{i(a)})}}function Are(e){return n=>fI(n,e)}class Jg{constructor(n,t,r){this.property=n,this.normal=t,r&&(this.space=r)}}Jg.prototype.property={};Jg.prototype.normal={};Jg.prototype.space=null;function hI(e,n){const t={},r={};let i=-1;for(;++i<e.length;)Object.assign(t,e[i].property),Object.assign(r,e[i].normal);return new Jg(t,r,n)}function a6(e){return e.toLowerCase()}class Ml{constructor(n,t){this.property=n,this.attribute=t}}Ml.prototype.space=null;Ml.prototype.boolean=!1;Ml.prototype.booleanish=!1;Ml.prototype.overloadedBoolean=!1;Ml.prototype.number=!1;Ml.prototype.commaSeparated=!1;Ml.prototype.spaceSeparated=!1;Ml.prototype.commaOrSpaceSeparated=!1;Ml.prototype.mustUseProperty=!1;Ml.prototype.defined=!1;let Cre=0;const kn=Np(),Ta=Np(),pI=Np(),_t=Np(),ii=Np(),U0=Np(),$o=Np();function Np(){return 2**++Cre}const s6=Object.freeze(Object.defineProperty({__proto__:null,boolean:kn,booleanish:Ta,commaOrSpaceSeparated:$o,commaSeparated:U0,number:_t,overloadedBoolean:pI,spaceSeparated:ii},Symbol.toStringTag,{value:"Module"})),Dw=Object.keys(s6);class RA extends Ml{constructor(n,t,r,i){let a=-1;if(super(n,t),J_(this,"space",i),typeof r=="number")for(;++a<Dw.length;){const s=Dw[a];J_(this,Dw[a],(r&s6[s])===s6[s])}}}RA.prototype.defined=!0;function J_(e,n,t){t&&(e[n]=t)}const kre={}.hasOwnProperty;function gm(e){const n={},t={};let r;for(r in e.properties)if(kre.call(e.properties,r)){const i=e.properties[r],a=new RA(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),n[r]=a,t[a6(r)]=r,t[a6(a.attribute)]=r}return new Jg(n,t,e.space)}const mI=gm({space:"xlink",transform(e,n){return"xlink:"+n.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),gI=gm({space:"xml",transform(e,n){return"xml:"+n.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function bI(e,n){return n in e?e[n]:n}function yI(e,n){return bI(e,n.toLowerCase())}const xI=gm({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:yI,properties:{xmlns:null,xmlnsXLink:null}}),vI=gm({transform(e,n){return n==="role"?n:"aria-"+n.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Ta,ariaAutoComplete:null,ariaBusy:Ta,ariaChecked:Ta,ariaColCount:_t,ariaColIndex:_t,ariaColSpan:_t,ariaControls:ii,ariaCurrent:null,ariaDescribedBy:ii,ariaDetails:null,ariaDisabled:Ta,ariaDropEffect:ii,ariaErrorMessage:null,ariaExpanded:Ta,ariaFlowTo:ii,ariaGrabbed:Ta,ariaHasPopup:null,ariaHidden:Ta,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ii,ariaLevel:_t,ariaLive:null,ariaModal:Ta,ariaMultiLine:Ta,ariaMultiSelectable:Ta,ariaOrientation:null,ariaOwns:ii,ariaPlaceholder:null,ariaPosInSet:_t,ariaPressed:Ta,ariaReadOnly:Ta,ariaRelevant:null,ariaRequired:Ta,ariaRoleDescription:ii,ariaRowCount:_t,ariaRowIndex:_t,ariaRowSpan:_t,ariaSelected:Ta,ariaSetSize:_t,ariaSort:null,ariaValueMax:_t,ariaValueMin:_t,ariaValueNow:_t,ariaValueText:null,role:null}}),Ere=gm({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:yI,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:U0,acceptCharset:ii,accessKey:ii,action:null,allow:null,allowFullScreen:kn,allowPaymentRequest:kn,allowUserMedia:kn,alt:null,as:null,async:kn,autoCapitalize:null,autoComplete:ii,autoFocus:kn,autoPlay:kn,blocking:ii,capture:null,charSet:null,checked:kn,cite:null,className:ii,cols:_t,colSpan:null,content:null,contentEditable:Ta,controls:kn,controlsList:ii,coords:_t|U0,crossOrigin:null,data:null,dateTime:null,decoding:null,default:kn,defer:kn,dir:null,dirName:null,disabled:kn,download:pI,draggable:Ta,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:kn,formTarget:null,headers:ii,height:_t,hidden:kn,high:_t,href:null,hrefLang:null,htmlFor:ii,httpEquiv:ii,id:null,imageSizes:null,imageSrcSet:null,inert:kn,inputMode:null,integrity:null,is:null,isMap:kn,itemId:null,itemProp:ii,itemRef:ii,itemScope:kn,itemType:ii,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:kn,low:_t,manifest:null,max:null,maxLength:_t,media:null,method:null,min:null,minLength:_t,multiple:kn,muted:kn,name:null,nonce:null,noModule:kn,noValidate:kn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:kn,optimum:_t,pattern:null,ping:ii,placeholder:null,playsInline:kn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:kn,referrerPolicy:null,rel:ii,required:kn,reversed:kn,rows:_t,rowSpan:_t,sandbox:ii,scope:null,scoped:kn,seamless:kn,selected:kn,shadowRootClonable:kn,shadowRootDelegatesFocus:kn,shadowRootMode:null,shape:null,size:_t,sizes:null,slot:null,span:_t,spellCheck:Ta,src:null,srcDoc:null,srcLang:null,srcSet:null,start:_t,step:null,style:null,tabIndex:_t,target:null,title:null,translate:null,type:null,typeMustMatch:kn,useMap:null,value:Ta,width:_t,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ii,axis:null,background:null,bgColor:null,border:_t,borderColor:null,bottomMargin:_t,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:kn,declare:kn,event:null,face:null,frame:null,frameBorder:null,hSpace:_t,leftMargin:_t,link:null,longDesc:null,lowSrc:null,marginHeight:_t,marginWidth:_t,noResize:kn,noHref:kn,noShade:kn,noWrap:kn,object:null,profile:null,prompt:null,rev:null,rightMargin:_t,rules:null,scheme:null,scrolling:Ta,standby:null,summary:null,text:null,topMargin:_t,valueType:null,version:null,vAlign:null,vLink:null,vSpace:_t,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:kn,disableRemotePlayback:kn,prefix:null,property:null,results:_t,security:null,unselectable:null}}),_re=gm({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:bI,properties:{about:$o,accentHeight:_t,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:_t,amplitude:_t,arabicForm:null,ascent:_t,attributeName:null,attributeType:null,azimuth:_t,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:_t,by:null,calcMode:null,capHeight:_t,className:ii,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:_t,diffuseConstant:_t,direction:null,display:null,dur:null,divisor:_t,dominantBaseline:null,download:kn,dx:null,dy:null,edgeMode:null,editable:null,elevation:_t,enableBackground:null,end:null,event:null,exponent:_t,externalResourcesRequired:null,fill:null,fillOpacity:_t,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:U0,g2:U0,glyphName:U0,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:_t,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:_t,horizOriginX:_t,horizOriginY:_t,id:null,ideographic:_t,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:_t,k:_t,k1:_t,k2:_t,k3:_t,k4:_t,kernelMatrix:$o,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:_t,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:_t,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:_t,overlineThickness:_t,paintOrder:null,panose1:null,path:null,pathLength:_t,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ii,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:_t,pointsAtY:_t,pointsAtZ:_t,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:$o,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:$o,rev:$o,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:$o,requiredFeatures:$o,requiredFonts:$o,requiredFormats:$o,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:_t,specularExponent:_t,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:_t,strikethroughThickness:_t,string:null,stroke:null,strokeDashArray:$o,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:_t,strokeOpacity:_t,strokeWidth:null,style:null,surfaceScale:_t,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:$o,tabIndex:_t,tableValues:null,target:null,targetX:_t,targetY:_t,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:$o,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:_t,underlineThickness:_t,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:_t,values:null,vAlphabetic:_t,vMathematical:_t,vectorEffect:null,vHanging:_t,vIdeographic:_t,version:null,vertAdvY:_t,vertOriginX:_t,vertOriginY:_t,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:_t,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),Nre=/^data[-\w.:]+$/i,eN=/-[a-z]/g,jre=/[A-Z]/g;function Tre(e,n){const t=a6(n);let r=n,i=Ml;if(t in e.normal)return e.property[e.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&Nre.test(n)){if(n.charAt(4)==="-"){const a=n.slice(5).replace(eN,Dre);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=n.slice(4);if(!eN.test(a)){let s=a.replace(jre,Ore);s.charAt(0)!=="-"&&(s="-"+s),n="data"+s}}i=RA}return new i(r,n)}function Ore(e){return"-"+e.toLowerCase()}function Dre(e){return e.charAt(1).toUpperCase()}const tN={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Ire=hI([gI,mI,xI,vI,Ere],"html"),Lre=hI([gI,mI,xI,vI,_re],"svg");function Rre(e){if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return n=>{IA(n,"element",(t,r,i)=>{const a=i;let s;if(e.allowedElements?s=!e.allowedElements.includes(t.tagName):e.disallowedElements&&(s=e.disallowedElements.includes(t.tagName)),!s&&e.allowElement&&typeof r=="number"&&(s=!e.allowElement(t,r,a)),s&&typeof r=="number")return e.unwrapDisallowed&&t.children?a.children.splice(r,1,...t.children):a.children.splice(r,1),r})}}var Iw={exports:{}},kr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nN;function Mre(){if(nN)return kr;nN=1;var e=Symbol.for("react.element"),n=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),s=Symbol.for("react.context"),l=Symbol.for("react.server_context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen"),x;x=Symbol.for("react.module.reference");function y(A){if(typeof A=="object"&&A!==null){var w=A.$$typeof;switch(w){case e:switch(A=A.type,A){case t:case i:case r:case d:case f:return A;default:switch(A=A&&A.$$typeof,A){case l:case s:case u:case b:case m:case a:return A;default:return w}}case n:return w}}}return kr.ContextConsumer=s,kr.ContextProvider=a,kr.Element=e,kr.ForwardRef=u,kr.Fragment=t,kr.Lazy=b,kr.Memo=m,kr.Portal=n,kr.Profiler=i,kr.StrictMode=r,kr.Suspense=d,kr.SuspenseList=f,kr.isAsyncMode=function(){return!1},kr.isConcurrentMode=function(){return!1},kr.isContextConsumer=function(A){return y(A)===s},kr.isContextProvider=function(A){return y(A)===a},kr.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===e},kr.isForwardRef=function(A){return y(A)===u},kr.isFragment=function(A){return y(A)===t},kr.isLazy=function(A){return y(A)===b},kr.isMemo=function(A){return y(A)===m},kr.isPortal=function(A){return y(A)===n},kr.isProfiler=function(A){return y(A)===i},kr.isStrictMode=function(A){return y(A)===r},kr.isSuspense=function(A){return y(A)===d},kr.isSuspenseList=function(A){return y(A)===f},kr.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===t||A===i||A===r||A===d||A===f||A===g||typeof A=="object"&&A!==null&&(A.$$typeof===b||A.$$typeof===m||A.$$typeof===a||A.$$typeof===s||A.$$typeof===u||A.$$typeof===x||A.getModuleId!==void 0)},kr.typeOf=y,kr}var rN;function Fre(){return rN||(rN=1,Iw.exports=Mre()),Iw.exports}var Pre=Fre();const zre=ns(Pre);function qre(e){const n=e&&typeof e=="object"&&e.type==="text"?e.value||"":e;return typeof n=="string"&&n.replace(/[ \t\n\f\r]/g,"")===""}function Bre(e){return e.join(" ").trim()}function $re(e,n){const t={};return(e[e.length-1]===""?[...e,""]:e).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}var Fy={exports:{}},Lw,iN;function Ure(){if(iN)return Lw;iN=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,t=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,l=/^\s+|\s+$/g,u=`
`,d="/",f="*",m="",b="comment",g="declaration";Lw=function(y,A){if(typeof y!="string")throw new TypeError("First argument must be a string");if(!y)return[];A=A||{};var w=1,C=1;function j(R){var N=R.match(n);N&&(w+=N.length);var G=R.lastIndexOf(u);C=~G?R.length-G:C+R.length}function F(){var R={line:w,column:C};return function(N){return N.position=new M(R),L(),N}}function M(R){this.start=R,this.end={line:w,column:C},this.source=A.source}M.prototype.content=y;function z(R){var N=new Error(A.source+":"+w+":"+C+": "+R);if(N.reason=R,N.filename=A.source,N.line=w,N.column=C,N.source=y,!A.silent)throw N}function _(R){var N=R.exec(y);if(N){var G=N[0];return j(G),y=y.slice(G.length),N}}function L(){_(t)}function $(R){var N;for(R=R||[];N=Z();)N!==!1&&R.push(N);return R}function Z(){var R=F();if(!(d!=y.charAt(0)||f!=y.charAt(1))){for(var N=2;m!=y.charAt(N)&&(f!=y.charAt(N)||d!=y.charAt(N+1));)++N;if(N+=2,m===y.charAt(N-1))return z("End of comment missing");var G=y.slice(2,N-2);return C+=2,j(G),y=y.slice(N),C+=2,R({type:b,comment:G})}}function O(){var R=F(),N=_(r);if(N){if(Z(),!_(i))return z("property missing ':'");var G=_(a),W=R({type:g,property:x(N[0].replace(e,m)),value:G?x(G[0].replace(e,m)):m});return _(s),W}}function T(){var R=[];$(R);for(var N;N=O();)N!==!1&&(R.push(N),$(R));return R}return L(),T()};function x(y){return y?y.replace(l,m):m}return Lw}var aN;function Hre(){if(aN)return Fy.exports;aN=1;var e=Ure();function n(t,r){var i=null;if(!t||typeof t!="string")return i;for(var a,s=e(t),l=typeof r=="function",u,d,f=0,m=s.length;f<m;f++)a=s[f],u=a.property,d=a.value,l?r(u,d,a):d&&(i||(i={}),i[u]=d);return i}return Fy.exports=n,Fy.exports.default=n,Fy.exports}var Wre=Hre();const Vre=ns(Wre),o6={}.hasOwnProperty,Yre=new Set(["table","thead","tbody","tfoot","tr"]);function wI(e,n){const t=[];let r=-1,i;for(;++r<n.children.length;)i=n.children[r],i.type==="element"?t.push(Gre(e,i,r,n)):i.type==="text"?(n.type!=="element"||!Yre.has(n.tagName)||!qre(i))&&t.push(i.value):i.type==="raw"&&!e.options.skipHtml&&t.push(i.value);return t}function Gre(e,n,t,r){const i=e.options,a=i.transformLinkUri===void 0?iee:i.transformLinkUri,s=e.schema,l=n.tagName,u={};let d=s,f;if(s.space==="html"&&l==="svg"&&(d=Lre,e.schema=d),n.properties)for(f in n.properties)o6.call(n.properties,f)&&Kre(u,f,n.properties[f],e);(l==="ol"||l==="ul")&&e.listDepth++;const m=wI(e,n);(l==="ol"||l==="ul")&&e.listDepth--,e.schema=s;const b=n.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},g=i.components&&o6.call(i.components,l)?i.components[l]:l,x=typeof g=="string"||g===st.Fragment;if(!zre.isValidElementType(g))throw new TypeError(`Component for name \`${l}\` not defined or is not renderable`);if(u.key=t,l==="a"&&i.linkTarget&&(u.target=typeof i.linkTarget=="function"?i.linkTarget(String(u.href||""),n.children,typeof u.title=="string"?u.title:null):i.linkTarget),l==="a"&&a&&(u.href=a(String(u.href||""),n.children,typeof u.title=="string"?u.title:null)),!x&&l==="code"&&r.type==="element"&&r.tagName!=="pre"&&(u.inline=!0),!x&&(l==="h1"||l==="h2"||l==="h3"||l==="h4"||l==="h5"||l==="h6")&&(u.level=Number.parseInt(l.charAt(1),10)),l==="img"&&i.transformImageUri&&(u.src=i.transformImageUri(String(u.src||""),String(u.alt||""),typeof u.title=="string"?u.title:null)),!x&&l==="li"&&r.type==="element"){const y=Qre(n);u.checked=y&&y.properties?!!y.properties.checked:null,u.index=Rw(r,n),u.ordered=r.tagName==="ol"}return!x&&(l==="ol"||l==="ul")&&(u.ordered=l==="ol",u.depth=e.listDepth),(l==="td"||l==="th")&&(u.align&&(u.style||(u.style={}),u.style.textAlign=u.align,delete u.align),x||(u.isHeader=l==="th")),!x&&l==="tr"&&r.type==="element"&&(u.isHeader=r.tagName==="thead"),i.sourcePos&&(u["data-sourcepos"]=Jre(b)),!x&&i.rawSourcePos&&(u.sourcePosition=n.position),!x&&i.includeElementIndex&&(u.index=Rw(r,n),u.siblingCount=Rw(r)),x||(u.node=n),m.length>0?st.createElement(g,u,m):st.createElement(g,u)}function Qre(e){let n=-1;for(;++n<e.children.length;){const t=e.children[n];if(t.type==="element"&&t.tagName==="input")return t}return null}function Rw(e,n){let t=-1,r=0;for(;++t<e.children.length&&e.children[t]!==n;)e.children[t].type==="element"&&r++;return r}function Kre(e,n,t,r){const i=Tre(r.schema,n);let a=t;a==null||a!==a||(Array.isArray(a)&&(a=i.commaSeparated?$re(a):Bre(a)),i.property==="style"&&typeof a=="string"&&(a=Xre(a)),i.space&&i.property?e[o6.call(tN,i.property)?tN[i.property]:i.property]=a:i.attribute&&(e[i.attribute]=a))}function Xre(e){const n={};try{Vre(e,t)}catch{}return n;function t(r,i){const a=r.slice(0,4)==="-ms-"?`ms-${r.slice(4)}`:r;n[a.replace(/-([a-z])/g,Zre)]=i}}function Zre(e,n){return n.toUpperCase()}function Jre(e){return[e.start.line,":",e.start.column,"-",e.end.line,":",e.end.column].map(String).join("")}const sN={}.hasOwnProperty,eie="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Py={plugins:{to:"remarkPlugins",id:"change-plugins-to-remarkplugins"},renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function MA(e){for(const a in Py)if(sN.call(Py,a)&&sN.call(e,a)){const s=Py[a];console.warn(`[react-markdown] Warning: please ${s.to?`use \`${s.to}\` instead of`:"remove"} \`${a}\` (see <${eie}#${s.id}> for more info)`),delete Py[a]}const n=See().use(One).use(e.remarkPlugins||[]).use(wre,{...e.remarkRehypeOptions,allowDangerousHtml:!0}).use(e.rehypePlugins||[]).use(Rre,e),t=new HD;typeof e.children=="string"?t.value=e.children:e.children!==void 0&&e.children!==null&&console.warn(`[react-markdown] Warning: please pass a string as \`children\` (not: \`${e.children}\`)`);const r=n.runSync(n.parse(t),t);if(r.type!=="root")throw new TypeError("Expected a `root` node");let i=st.createElement(st.Fragment,{},wI({options:e,schema:Ire,listDepth:0},r));return e.className&&(i=st.createElement("div",{className:e.className},i)),i}MA.propTypes={children:wn.string,className:wn.string,allowElement:wn.func,allowedElements:wn.arrayOf(wn.string),disallowedElements:wn.arrayOf(wn.string),unwrapDisallowed:wn.bool,remarkPlugins:wn.arrayOf(wn.oneOfType([wn.object,wn.func,wn.arrayOf(wn.oneOfType([wn.bool,wn.string,wn.object,wn.func,wn.arrayOf(wn.any)]))])),rehypePlugins:wn.arrayOf(wn.oneOfType([wn.object,wn.func,wn.arrayOf(wn.oneOfType([wn.bool,wn.string,wn.object,wn.func,wn.arrayOf(wn.any)]))])),sourcePos:wn.bool,rawSourcePos:wn.bool,skipHtml:wn.bool,includeElementIndex:wn.bool,transformLinkUri:wn.oneOfType([wn.func,wn.bool]),linkTarget:wn.oneOfType([wn.func,wn.string]),transformImageUri:wn.func,components:wn.object};function FA(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ud(e){if(e.__esModule)return e;var n=e.default;if(typeof n=="function"){var t=function r(){return this instanceof r?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};t.prototype=n.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),t}var oN={exports:{}},N1={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lN;function tie(){if(lN)return N1;lN=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function t(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var l in i)l!=="key"&&(a[l]=i[l])}else a=i;return i=a.ref,{$$typeof:e,type:r,key:s,ref:i!==void 0?i:null,props:a}}return N1.Fragment=n,N1.jsx=t,N1.jsxs=t,N1}var uN;function PA(){return uN||(uN=1,oN.exports=tie()),oN.exports}var xn=PA(),j1={},cN={exports:{}},dN;function Bv(){return dN||(dN=1,function(e){function n(t){return t&&t.__esModule?t:{default:t}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(cN)),cN.exports}var fN={};function Wr(){return Wr=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Wr.apply(null,arguments)}function If(e){if(typeof e!="object"||e===null)return!1;const n=Object.getPrototypeOf(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function SI(e){if(X.isValidElement(e)||!If(e))return e;const n={};return Object.keys(e).forEach(t=>{n[t]=SI(e[t])}),n}function Nc(e,n,t={clone:!0}){const r=t.clone?Wr({},e):e;return If(e)&&If(n)&&Object.keys(n).forEach(i=>{X.isValidElement(n[i])?r[i]=n[i]:If(n[i])&&Object.prototype.hasOwnProperty.call(e,i)&&If(e[i])?r[i]=Nc(e[i],n[i],t):t.clone?r[i]=If(n[i])?SI(n[i]):n[i]:r[i]=n[i]}),r}const nie=Object.freeze(Object.defineProperty({__proto__:null,default:Nc,isPlainObject:If},Symbol.toStringTag,{value:"Module"}));function Sg(e){let n="https://mui.com/production-error/?code="+e;for(let t=1;t<arguments.length;t+=1)n+="&args[]="+encodeURIComponent(arguments[t]);return"Minified MUI error #"+e+"; visit "+n+" for the full message."}const rie=Object.freeze(Object.defineProperty({__proto__:null,default:Sg},Symbol.toStringTag,{value:"Module"}));var hN={exports:{}},$r={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pN;function iie(){if(pN)return $r;pN=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),g=Symbol.for("react.client.reference");function x(y){if(typeof y=="object"&&y!==null){var A=y.$$typeof;switch(A){case e:switch(y=y.type,y){case t:case i:case r:case u:case d:return y;default:switch(y=y&&y.$$typeof,y){case s:case l:case m:case f:return y;case a:return y;default:return A}}case n:return A}}}return $r.ContextConsumer=a,$r.ContextProvider=s,$r.Element=e,$r.ForwardRef=l,$r.Fragment=t,$r.Lazy=m,$r.Memo=f,$r.Portal=n,$r.Profiler=i,$r.StrictMode=r,$r.Suspense=u,$r.SuspenseList=d,$r.isContextConsumer=function(y){return x(y)===a},$r.isContextProvider=function(y){return x(y)===s},$r.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===e},$r.isForwardRef=function(y){return x(y)===l},$r.isFragment=function(y){return x(y)===t},$r.isLazy=function(y){return x(y)===m},$r.isMemo=function(y){return x(y)===f},$r.isPortal=function(y){return x(y)===n},$r.isProfiler=function(y){return x(y)===i},$r.isStrictMode=function(y){return x(y)===r},$r.isSuspense=function(y){return x(y)===u},$r.isSuspenseList=function(y){return x(y)===d},$r.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===t||y===i||y===r||y===u||y===d||y===b||typeof y=="object"&&y!==null&&(y.$$typeof===m||y.$$typeof===f||y.$$typeof===s||y.$$typeof===a||y.$$typeof===l||y.$$typeof===g||y.getModuleId!==void 0)},$r.typeOf=x,$r}var mN;function aie(){return mN||(mN=1,hN.exports=iie()),hN.exports}var gN=aie();const sie=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function AI(e){const n=`${e}`.match(sie);return n&&n[1]||""}function CI(e,n=""){return e.displayName||e.name||AI(e)||n}function bN(e,n,t){const r=CI(n);return e.displayName||(r!==""?`${t}(${r})`:t)}function oie(e){if(e!=null){if(typeof e=="string")return e;if(typeof e=="function")return CI(e,"Component");if(typeof e=="object")switch(e.$$typeof){case gN.ForwardRef:return bN(e,e.render,"ForwardRef");case gN.Memo:return bN(e,e.type,"memo");default:return}}}const lie=Object.freeze(Object.defineProperty({__proto__:null,default:oie,getFunctionName:AI},Symbol.toStringTag,{value:"Module"}));function eh(e){if(typeof e!="string")throw new Error(Sg(7));return e.charAt(0).toUpperCase()+e.slice(1)}const uie=Object.freeze(Object.defineProperty({__proto__:null,default:eh},Symbol.toStringTag,{value:"Module"}));function cie(...e){return e.reduce((n,t)=>t==null?n:function(...r){n.apply(this,r),t.apply(this,r)},()=>{})}function die(e,n=166){let t;function r(...i){const a=()=>{e.apply(this,i)};clearTimeout(t),t=setTimeout(a,n)}return r.clear=()=>{clearTimeout(t)},r}function fie(e,n){return()=>null}function hie(e,n){var t,r;return X.isValidElement(e)&&n.indexOf((t=e.type.muiName)!=null?t:(r=e.type)==null||(r=r._payload)==null||(r=r.value)==null?void 0:r.muiName)!==-1}function kI(e){return e&&e.ownerDocument||document}function pie(e){return kI(e).defaultView||window}function mie(e,n){return()=>null}function EI(e,n){typeof e=="function"?e(n):e&&(e.current=n)}const _I=typeof window<"u"?X.useLayoutEffect:X.useEffect;let yN=0;function gie(e){const[n,t]=X.useState(e),r=e||n;return X.useEffect(()=>{n==null&&(yN+=1,t(`mui-${yN}`))},[n]),r}const xN=X.useId;function bie(e){if(xN!==void 0){const n=xN();return e??n}return gie(e)}function yie(e,n,t,r,i){return null}function xie({controlled:e,default:n,name:t,state:r="value"}){const{current:i}=X.useRef(e!==void 0),[a,s]=X.useState(n),l=i?e:a,u=X.useCallback(d=>{i||s(d)},[]);return[l,u]}function vie(e){const n=X.useRef(e);return _I(()=>{n.current=e}),X.useRef((...t)=>(0,n.current)(...t)).current}function wie(...e){return X.useMemo(()=>e.every(n=>n==null)?null:n=>{e.forEach(t=>{EI(t,n)})},e)}let Sie=class NI{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new NI}start(n,t){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,t()},n)}},$v=!0,l6=!1;const Aie=new Sie,Cie={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function kie(e){const{type:n,tagName:t}=e;return!!(t==="INPUT"&&Cie[n]&&!e.readOnly||t==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function Eie(e){e.metaKey||e.altKey||e.ctrlKey||($v=!0)}function Mw(){$v=!1}function _ie(){this.visibilityState==="hidden"&&l6&&($v=!0)}function Nie(e){e.addEventListener("keydown",Eie,!0),e.addEventListener("mousedown",Mw,!0),e.addEventListener("pointerdown",Mw,!0),e.addEventListener("touchstart",Mw,!0),e.addEventListener("visibilitychange",_ie,!0)}function jie(e){const{target:n}=e;try{return n.matches(":focus-visible")}catch{}return $v||kie(n)}function Tie(){const e=X.useCallback(i=>{i!=null&&Nie(i.ownerDocument)},[]),n=X.useRef(!1);function t(){return n.current?(l6=!0,Aie.start(100,()=>{l6=!1}),n.current=!1,!0):!1}function r(i){return jie(i)?(n.current=!0,!0):!1}return{isFocusVisibleRef:n,onFocus:r,onBlur:t,ref:e}}function u6(e,n){const t=Wr({},n);return Object.keys(e).forEach(r=>{if(r.toString().match(/^(components|slots)$/))t[r]=Wr({},e[r],t[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=e[r]||{},a=n[r];t[r]={},!a||!Object.keys(a)?t[r]=i:!i||!Object.keys(i)?t[r]=a:(t[r]=Wr({},a),Object.keys(i).forEach(s=>{t[r][s]=u6(i[s],a[s])}))}else t[r]===void 0&&(t[r]=e[r])}),t}function Oie(e,n,t=void 0){const r={};return Object.keys(e).forEach(i=>{r[i]=e[i].reduce((a,s)=>{if(s){const l=n(s);l!==""&&a.push(l),t&&t[s]&&a.push(t[s])}return a},[]).join(" ")}),r}const vN=e=>e,Die=()=>{let e=vN;return{configure(n){e=n},generate(n){return e(n)},reset(){e=vN}}},jI=Die(),Iie={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function TI(e,n,t="Mui"){const r=Iie[n];return r?`${t}-${r}`:`${jI.generate(e)}-${n}`}function Lie(e,n,t="Mui"){const r={};return n.forEach(i=>{r[i]=TI(e,i,t)}),r}function Rie(e,n=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER){return Math.max(n,Math.min(e,t))}const Mie=Object.freeze(Object.defineProperty({__proto__:null,default:Rie},Symbol.toStringTag,{value:"Module"}));function lh(e,n){if(e==null)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(n.includes(r))continue;t[r]=e[r]}return t}function OI(e){var n,t,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(n=0;n<i;n++)e[n]&&(t=OI(e[n]))&&(r&&(r+=" "),r+=t)}else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function Fie(){for(var e,n,t=0,r="",i=arguments.length;t<i;t++)(e=arguments[t])&&(n=OI(e))&&(r&&(r+=" "),r+=n);return r}const Pie=X.createContext(void 0);function zie(e){const{theme:n,name:t,props:r}=e;if(!n||!n.components||!n.components[t])return r;const i=n.components[t];return i.defaultProps?u6(i.defaultProps,r):!i.styleOverrides&&!i.variants?u6(i,r):r}function qie({props:e,name:n}){const t=X.useContext(Pie);return zie({props:e,name:n,theme:{components:t}})}function Bie(e){return qie(e)}var Fh={},wN={exports:{}},SN;function $ie(){return SN||(SN=1,function(e){function n(){return e.exports=n=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)({}).hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},e.exports.__esModule=!0,e.exports.default=e.exports,n.apply(null,arguments)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(wN)),wN.exports}var AN={exports:{}},CN;function Uie(){return CN||(CN=1,function(e){function n(t,r){if(t==null)return{};var i={};for(var a in t)if({}.hasOwnProperty.call(t,a)){if(r.includes(a))continue;i[a]=t[a]}return i}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(AN)),AN.exports}function Hie(e){if(e.sheet)return e.sheet;for(var n=0;n<document.styleSheets.length;n++)if(document.styleSheets[n].ownerNode===e)return document.styleSheets[n]}function Wie(e){var n=document.createElement("style");return n.setAttribute("data-emotion",e.key),e.nonce!==void 0&&n.setAttribute("nonce",e.nonce),n.appendChild(document.createTextNode("")),n.setAttribute("data-s",""),n}var Vie=function(){function e(t){var r=this;this._insertTag=function(i){var a;r.tags.length===0?r.insertionPoint?a=r.insertionPoint.nextSibling:r.prepend?a=r.container.firstChild:a=r.before:a=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,a),r.tags.push(i)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var n=e.prototype;return n.hydrate=function(t){t.forEach(this._insertTag)},n.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Wie(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var i=Hie(r);try{i.insertRule(t,i.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(t));this.ctr++},n.flush=function(){this.tags.forEach(function(t){var r;return(r=t.parentNode)==null?void 0:r.removeChild(t)}),this.tags=[],this.ctr=0},e}(),Ls="-ms-",Gx="-moz-",mr="-webkit-",DI="comm",zA="rule",qA="decl",Yie="@import",II="@keyframes",Gie="@layer",Qie=Math.abs,Uv=String.fromCharCode,Kie=Object.assign;function Xie(e,n){return ps(e,0)^45?(((n<<2^ps(e,0))<<2^ps(e,1))<<2^ps(e,2))<<2^ps(e,3):0}function LI(e){return e.trim()}function Zie(e,n){return(e=n.exec(e))?e[0]:e}function br(e,n,t){return e.replace(n,t)}function c6(e,n){return e.indexOf(n)}function ps(e,n){return e.charCodeAt(n)|0}function Ag(e,n,t){return e.slice(n,t)}function uc(e){return e.length}function BA(e){return e.length}function zy(e,n){return n.push(e),e}function Jie(e,n){return e.map(n).join("")}var Hv=1,lm=1,RI=0,vo=0,Oa=0,bm="";function Wv(e,n,t,r,i,a,s){return{value:e,root:n,parent:t,type:r,props:i,children:a,line:Hv,column:lm,length:s,return:""}}function T1(e,n){return Kie(Wv("",null,null,"",null,null,0),e,{length:-e.length},n)}function eae(){return Oa}function tae(){return Oa=vo>0?ps(bm,--vo):0,lm--,Oa===10&&(lm=1,Hv--),Oa}function Xo(){return Oa=vo<RI?ps(bm,vo++):0,lm++,Oa===10&&(lm=1,Hv++),Oa}function jc(){return ps(bm,vo)}function ox(){return vo}function eb(e,n){return Ag(bm,e,n)}function Cg(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function MI(e){return Hv=lm=1,RI=uc(bm=e),vo=0,[]}function FI(e){return bm="",e}function lx(e){return LI(eb(vo-1,d6(e===91?e+2:e===40?e+1:e)))}function nae(e){for(;(Oa=jc())&&Oa<33;)Xo();return Cg(e)>2||Cg(Oa)>3?"":" "}function rae(e,n){for(;--n&&Xo()&&!(Oa<48||Oa>102||Oa>57&&Oa<65||Oa>70&&Oa<97););return eb(e,ox()+(n<6&&jc()==32&&Xo()==32))}function d6(e){for(;Xo();)switch(Oa){case e:return vo;case 34:case 39:e!==34&&e!==39&&d6(Oa);break;case 40:e===41&&d6(e);break;case 92:Xo();break}return vo}function iae(e,n){for(;Xo()&&e+Oa!==57&&!(e+Oa===84&&jc()===47););return"/*"+eb(n,vo-1)+"*"+Uv(e===47?e:Xo())}function aae(e){for(;!Cg(jc());)Xo();return eb(e,vo)}function sae(e){return FI(ux("",null,null,null,[""],e=MI(e),0,[0],e))}function ux(e,n,t,r,i,a,s,l,u){for(var d=0,f=0,m=s,b=0,g=0,x=0,y=1,A=1,w=1,C=0,j="",F=i,M=a,z=r,_=j;A;)switch(x=C,C=Xo()){case 40:if(x!=108&&ps(_,m-1)==58){c6(_+=br(lx(C),"&","&\f"),"&\f")!=-1&&(w=-1);break}case 34:case 39:case 91:_+=lx(C);break;case 9:case 10:case 13:case 32:_+=nae(x);break;case 92:_+=rae(ox()-1,7);continue;case 47:switch(jc()){case 42:case 47:zy(oae(iae(Xo(),ox()),n,t),u);break;default:_+="/"}break;case 123*y:l[d++]=uc(_)*w;case 125*y:case 59:case 0:switch(C){case 0:case 125:A=0;case 59+f:w==-1&&(_=br(_,/\f/g,"")),g>0&&uc(_)-m&&zy(g>32?EN(_+";",r,t,m-1):EN(br(_," ","")+";",r,t,m-2),u);break;case 59:_+=";";default:if(zy(z=kN(_,n,t,d,f,i,l,j,F=[],M=[],m),a),C===123)if(f===0)ux(_,n,z,z,F,a,m,l,M);else switch(b===99&&ps(_,3)===110?100:b){case 100:case 108:case 109:case 115:ux(e,z,z,r&&zy(kN(e,z,z,0,0,i,l,j,i,F=[],m),M),i,M,m,l,r?F:M);break;default:ux(_,z,z,z,[""],M,0,l,M)}}d=f=g=0,y=w=1,j=_="",m=s;break;case 58:m=1+uc(_),g=x;default:if(y<1){if(C==123)--y;else if(C==125&&y++==0&&tae()==125)continue}switch(_+=Uv(C),C*y){case 38:w=f>0?1:(_+="\f",-1);break;case 44:l[d++]=(uc(_)-1)*w,w=1;break;case 64:jc()===45&&(_+=lx(Xo())),b=jc(),f=m=uc(j=_+=aae(ox())),C++;break;case 45:x===45&&uc(_)==2&&(y=0)}}return a}function kN(e,n,t,r,i,a,s,l,u,d,f){for(var m=i-1,b=i===0?a:[""],g=BA(b),x=0,y=0,A=0;x<r;++x)for(var w=0,C=Ag(e,m+1,m=Qie(y=s[x])),j=e;w<g;++w)(j=LI(y>0?b[w]+" "+C:br(C,/&\f/g,b[w])))&&(u[A++]=j);return Wv(e,n,t,i===0?zA:l,u,d,f)}function oae(e,n,t){return Wv(e,n,t,DI,Uv(eae()),Ag(e,2,-2),0)}function EN(e,n,t,r){return Wv(e,n,t,qA,Ag(e,0,r),Ag(e,r+1,-1),r)}function H0(e,n){for(var t="",r=BA(e),i=0;i<r;i++)t+=n(e[i],i,e,n)||"";return t}function lae(e,n,t,r){switch(e.type){case Gie:if(e.children.length)break;case Yie:case qA:return e.return=e.return||e.value;case DI:return"";case II:return e.return=e.value+"{"+H0(e.children,r)+"}";case zA:e.value=e.props.join(",")}return uc(t=H0(e.children,r))?e.return=e.value+"{"+t+"}":""}function uae(e){var n=BA(e);return function(t,r,i,a){for(var s="",l=0;l<n;l++)s+=e[l](t,r,i,a)||"";return s}}function cae(e){return function(n){n.root||(n=n.return)&&e(n)}}var dae=function(e,n,t){for(var r=0,i=0;r=i,i=jc(),r===38&&i===12&&(n[t]=1),!Cg(i);)Xo();return eb(e,vo)},fae=function(e,n){var t=-1,r=44;do switch(Cg(r)){case 0:r===38&&jc()===12&&(n[t]=1),e[t]+=dae(vo-1,n,t);break;case 2:e[t]+=lx(r);break;case 4:if(r===44){e[++t]=jc()===58?"&\f":"",n[t]=e[t].length;break}default:e[t]+=Uv(r)}while(r=Xo());return e},hae=function(e,n){return FI(fae(MI(e),n))},_N=new WeakMap,pae=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,t=e.parent,r=e.column===t.column&&e.line===t.line;t.type!=="rule";)if(t=t.parent,!t)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!_N.get(t))&&!r){_N.set(e,!0);for(var i=[],a=hae(n,i),s=t.props,l=0,u=0;l<a.length;l++)for(var d=0;d<s.length;d++,u++)e.props[u]=i[l]?a[l].replace(/&\f/g,s[d]):s[d]+" "+a[l]}}},mae=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function PI(e,n){switch(Xie(e,n)){case 5103:return mr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return mr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return mr+e+Gx+e+Ls+e+e;case 6828:case 4268:return mr+e+Ls+e+e;case 6165:return mr+e+Ls+"flex-"+e+e;case 5187:return mr+e+br(e,/(\w+).+(:[^]+)/,mr+"box-$1$2"+Ls+"flex-$1$2")+e;case 5443:return mr+e+Ls+"flex-item-"+br(e,/flex-|-self/,"")+e;case 4675:return mr+e+Ls+"flex-line-pack"+br(e,/align-content|flex-|-self/,"")+e;case 5548:return mr+e+Ls+br(e,"shrink","negative")+e;case 5292:return mr+e+Ls+br(e,"basis","preferred-size")+e;case 6060:return mr+"box-"+br(e,"-grow","")+mr+e+Ls+br(e,"grow","positive")+e;case 4554:return mr+br(e,/([^-])(transform)/g,"$1"+mr+"$2")+e;case 6187:return br(br(br(e,/(zoom-|grab)/,mr+"$1"),/(image-set)/,mr+"$1"),e,"")+e;case 5495:case 3959:return br(e,/(image-set\([^]*)/,mr+"$1$`$1");case 4968:return br(br(e,/(.+:)(flex-)?(.*)/,mr+"box-pack:$3"+Ls+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+mr+e+e;case 4095:case 3583:case 4068:case 2532:return br(e,/(.+)-inline(.+)/,mr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(uc(e)-1-n>6)switch(ps(e,n+1)){case 109:if(ps(e,n+4)!==45)break;case 102:return br(e,/(.+:)(.+)-([^]+)/,"$1"+mr+"$2-$3$1"+Gx+(ps(e,n+3)==108?"$3":"$2-$3"))+e;case 115:return~c6(e,"stretch")?PI(br(e,"stretch","fill-available"),n)+e:e}break;case 4949:if(ps(e,n+1)!==115)break;case 6444:switch(ps(e,uc(e)-3-(~c6(e,"!important")&&10))){case 107:return br(e,":",":"+mr)+e;case 101:return br(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+mr+(ps(e,14)===45?"inline-":"")+"box$3$1"+mr+"$2$3$1"+Ls+"$2box$3")+e}break;case 5936:switch(ps(e,n+11)){case 114:return mr+e+Ls+br(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return mr+e+Ls+br(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return mr+e+Ls+br(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return mr+e+Ls+e+e}return e}var gae=function(e,n,t,r){if(e.length>-1&&!e.return)switch(e.type){case qA:e.return=PI(e.value,e.length);break;case II:return H0([T1(e,{value:br(e.value,"@","@"+mr)})],r);case zA:if(e.length)return Jie(e.props,function(i){switch(Zie(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return H0([T1(e,{props:[br(i,/:(read-\w+)/,":"+Gx+"$1")]})],r);case"::placeholder":return H0([T1(e,{props:[br(i,/:(plac\w+)/,":"+mr+"input-$1")]}),T1(e,{props:[br(i,/:(plac\w+)/,":"+Gx+"$1")]}),T1(e,{props:[br(i,/:(plac\w+)/,Ls+"input-$1")]})],r)}return""})}},bae=[gae],yae=function(e){var n=e.key;if(n==="css"){var t=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(t,function(x){var y=x.getAttribute("data-emotion");y.indexOf(" ")!==-1&&(document.head.appendChild(x),x.setAttribute("data-s",""))})}var r=e.stylisPlugins||bae,i={},a,s=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(x){for(var y=x.getAttribute("data-emotion").split(" "),A=1;A<y.length;A++)i[y[A]]=!0;s.push(x)});var l,u=[pae,mae];{var d,f=[lae,cae(function(x){d.insert(x)})],m=uae(u.concat(r,f)),b=function(x){return H0(sae(x),m)};l=function(x,y,A,w){d=A,b(x?x+"{"+y.styles+"}":y.styles),w&&(g.inserted[y.name]=!0)}}var g={key:n,sheet:new Vie({key:n,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:l};return g.sheet.hydrate(s),g};let f6;typeof document=="object"&&(f6=yae({key:"css",prepend:!0}));function xae(e){const{injectFirst:n,children:t}=e;return n&&f6?xn.jsx(aT,{value:f6,children:t}):t}function vae(e){return e==null||Object.keys(e).length===0}function wae(e){const{styles:n,defaultTheme:t={}}=e,r=typeof n=="function"?i=>n(vae(i)?t:i):n;return xn.jsx(sT,{styles:r})}/**
 * @mui/styled-engine v5.16.12
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function Sae(e,n){return iT(e,n)}const Aae=(e,n)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=n(e.__emotion_styles))},Cae=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:wae,StyledEngineProvider:xae,ThemeContext:rT,css:nT,default:Sae,internal_processStyles:Aae,keyframes:tT},Symbol.toStringTag,{value:"Module"})),kae=Ud(Cae),Eae=Ud(nie),_ae=Ud(uie),Nae=Ud(lie),jae=["values","unit","step"],Tae=e=>{const n=Object.keys(e).map(t=>({key:t,val:e[t]}))||[];return n.sort((t,r)=>t.val-r.val),n.reduce((t,r)=>Wr({},t,{[r.key]:r.val}),{})};function zI(e){const{values:n={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:r=5}=e,i=lh(e,jae),a=Tae(n),s=Object.keys(a);function l(b){return`@media (min-width:${typeof n[b]=="number"?n[b]:b}${t})`}function u(b){return`@media (max-width:${(typeof n[b]=="number"?n[b]:b)-r/100}${t})`}function d(b,g){const x=s.indexOf(g);return`@media (min-width:${typeof n[b]=="number"?n[b]:b}${t}) and (max-width:${(x!==-1&&typeof n[s[x]]=="number"?n[s[x]]:g)-r/100}${t})`}function f(b){return s.indexOf(b)+1<s.length?d(b,s[s.indexOf(b)+1]):l(b)}function m(b){const g=s.indexOf(b);return g===0?l(s[1]):g===s.length-1?u(s[g]):d(b,s[s.indexOf(b)+1]).replace("@media","@media not all and")}return Wr({keys:s,values:a,up:l,down:u,between:d,only:f,not:m,unit:t},i)}const Oae={borderRadius:4};function J1(e,n){return n?Nc(e,n,{clone:!1}):e}const $A={xs:0,sm:600,md:900,lg:1200,xl:1536},NN={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${$A[e]}px)`};function Md(e,n,t){const r=e.theme||{};if(Array.isArray(n)){const i=r.breakpoints||NN;return n.reduce((a,s,l)=>(a[i.up(i.keys[l])]=t(n[l]),a),{})}if(typeof n=="object"){const i=r.breakpoints||NN;return Object.keys(n).reduce((a,s)=>{if(Object.keys(i.values||$A).indexOf(s)!==-1){const l=i.up(s);a[l]=t(n[s],s)}else{const l=s;a[l]=n[l]}return a},{})}return t(n)}function Dae(e={}){var n;return((n=e.keys)==null?void 0:n.reduce((t,r)=>{const i=e.up(r);return t[i]={},t},{}))||{}}function Iae(e,n){return e.reduce((t,r)=>{const i=t[r];return(!i||Object.keys(i).length===0)&&delete t[r],t},n)}function Vv(e,n,t=!0){if(!n||typeof n!="string")return null;if(e&&e.vars&&t){const r=`vars.${n}`.split(".").reduce((i,a)=>i&&i[a]?i[a]:null,e);if(r!=null)return r}return n.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,e)}function Qx(e,n,t,r=t){let i;return typeof e=="function"?i=e(t):Array.isArray(e)?i=e[t]||r:i=Vv(e,t)||r,n&&(i=n(i,r,e)),i}function xa(e){const{prop:n,cssProperty:t=e.prop,themeKey:r,transform:i}=e,a=s=>{if(s[n]==null)return null;const l=s[n],u=s.theme,d=Vv(u,r)||{};return Md(s,l,f=>{let m=Qx(d,i,f);return f===m&&typeof f=="string"&&(m=Qx(d,i,`${n}${f==="default"?"":eh(f)}`,f)),t===!1?m:{[t]:m}})};return a.propTypes={},a.filterProps=[n],a}function Lae(e){const n={};return t=>(n[t]===void 0&&(n[t]=e(t)),n[t])}const Rae={m:"margin",p:"padding"},Mae={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},jN={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Fae=Lae(e=>{if(e.length>2)if(jN[e])e=jN[e];else return[e];const[n,t]=e.split(""),r=Rae[n],i=Mae[t]||"";return Array.isArray(i)?i.map(a=>r+a):[r+i]}),UA=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],HA=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...UA,...HA];function tb(e,n,t,r){var i;const a=(i=Vv(e,n,!1))!=null?i:t;return typeof a=="number"?s=>typeof s=="string"?s:a*s:Array.isArray(a)?s=>typeof s=="string"?s:a[s]:typeof a=="function"?a:()=>{}}function qI(e){return tb(e,"spacing",8)}function nb(e,n){if(typeof n=="string"||n==null)return n;const t=Math.abs(n),r=e(t);return n>=0?r:typeof r=="number"?-r:`-${r}`}function Pae(e,n){return t=>e.reduce((r,i)=>(r[i]=nb(n,t),r),{})}function zae(e,n,t,r){if(n.indexOf(t)===-1)return null;const i=Fae(t),a=Pae(i,r),s=e[t];return Md(e,s,a)}function BI(e,n){const t=qI(e.theme);return Object.keys(e).map(r=>zae(e,n,r,t)).reduce(J1,{})}function Yi(e){return BI(e,UA)}Yi.propTypes={};Yi.filterProps=UA;function Gi(e){return BI(e,HA)}Gi.propTypes={};Gi.filterProps=HA;function qae(e=8){if(e.mui)return e;const n=qI({spacing:e}),t=(...r)=>(r.length===0?[1]:r).map(i=>{const a=n(i);return typeof a=="number"?`${a}px`:a}).join(" ");return t.mui=!0,t}function Yv(...e){const n=e.reduce((r,i)=>(i.filterProps.forEach(a=>{r[a]=i}),r),{}),t=r=>Object.keys(r).reduce((i,a)=>n[a]?J1(i,n[a](r)):i,{});return t.propTypes={},t.filterProps=e.reduce((r,i)=>r.concat(i.filterProps),[]),t}function El(e){return typeof e!="number"?e:`${e}px solid`}function Fl(e,n){return xa({prop:e,themeKey:"borders",transform:n})}const Bae=Fl("border",El),$ae=Fl("borderTop",El),Uae=Fl("borderRight",El),Hae=Fl("borderBottom",El),Wae=Fl("borderLeft",El),Vae=Fl("borderColor"),Yae=Fl("borderTopColor"),Gae=Fl("borderRightColor"),Qae=Fl("borderBottomColor"),Kae=Fl("borderLeftColor"),Xae=Fl("outline",El),Zae=Fl("outlineColor"),Gv=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const n=tb(e.theme,"shape.borderRadius",4),t=r=>({borderRadius:nb(n,r)});return Md(e,e.borderRadius,t)}return null};Gv.propTypes={};Gv.filterProps=["borderRadius"];Yv(Bae,$ae,Uae,Hae,Wae,Vae,Yae,Gae,Qae,Kae,Gv,Xae,Zae);const Qv=e=>{if(e.gap!==void 0&&e.gap!==null){const n=tb(e.theme,"spacing",8),t=r=>({gap:nb(n,r)});return Md(e,e.gap,t)}return null};Qv.propTypes={};Qv.filterProps=["gap"];const Kv=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const n=tb(e.theme,"spacing",8),t=r=>({columnGap:nb(n,r)});return Md(e,e.columnGap,t)}return null};Kv.propTypes={};Kv.filterProps=["columnGap"];const Xv=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const n=tb(e.theme,"spacing",8),t=r=>({rowGap:nb(n,r)});return Md(e,e.rowGap,t)}return null};Xv.propTypes={};Xv.filterProps=["rowGap"];const Jae=xa({prop:"gridColumn"}),ese=xa({prop:"gridRow"}),tse=xa({prop:"gridAutoFlow"}),nse=xa({prop:"gridAutoColumns"}),rse=xa({prop:"gridAutoRows"}),ise=xa({prop:"gridTemplateColumns"}),ase=xa({prop:"gridTemplateRows"}),sse=xa({prop:"gridTemplateAreas"}),ose=xa({prop:"gridArea"});Yv(Qv,Kv,Xv,Jae,ese,tse,nse,rse,ise,ase,sse,ose);function W0(e,n){return n==="grey"?n:e}const lse=xa({prop:"color",themeKey:"palette",transform:W0}),use=xa({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:W0}),cse=xa({prop:"backgroundColor",themeKey:"palette",transform:W0});Yv(lse,use,cse);function Wo(e){return e<=1&&e!==0?`${e*100}%`:e}const dse=xa({prop:"width",transform:Wo}),WA=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const n=t=>{var r,i;const a=((r=e.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[t])||$A[t];return a?((i=e.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:`${a}${e.theme.breakpoints.unit}`}:{maxWidth:a}:{maxWidth:Wo(t)}};return Md(e,e.maxWidth,n)}return null};WA.filterProps=["maxWidth"];const fse=xa({prop:"minWidth",transform:Wo}),hse=xa({prop:"height",transform:Wo}),pse=xa({prop:"maxHeight",transform:Wo}),mse=xa({prop:"minHeight",transform:Wo});xa({prop:"size",cssProperty:"width",transform:Wo});xa({prop:"size",cssProperty:"height",transform:Wo});const gse=xa({prop:"boxSizing"});Yv(dse,WA,fse,hse,pse,mse,gse);const rb={border:{themeKey:"borders",transform:El},borderTop:{themeKey:"borders",transform:El},borderRight:{themeKey:"borders",transform:El},borderBottom:{themeKey:"borders",transform:El},borderLeft:{themeKey:"borders",transform:El},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:El},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Gv},color:{themeKey:"palette",transform:W0},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:W0},backgroundColor:{themeKey:"palette",transform:W0},p:{style:Gi},pt:{style:Gi},pr:{style:Gi},pb:{style:Gi},pl:{style:Gi},px:{style:Gi},py:{style:Gi},padding:{style:Gi},paddingTop:{style:Gi},paddingRight:{style:Gi},paddingBottom:{style:Gi},paddingLeft:{style:Gi},paddingX:{style:Gi},paddingY:{style:Gi},paddingInline:{style:Gi},paddingInlineStart:{style:Gi},paddingInlineEnd:{style:Gi},paddingBlock:{style:Gi},paddingBlockStart:{style:Gi},paddingBlockEnd:{style:Gi},m:{style:Yi},mt:{style:Yi},mr:{style:Yi},mb:{style:Yi},ml:{style:Yi},mx:{style:Yi},my:{style:Yi},margin:{style:Yi},marginTop:{style:Yi},marginRight:{style:Yi},marginBottom:{style:Yi},marginLeft:{style:Yi},marginX:{style:Yi},marginY:{style:Yi},marginInline:{style:Yi},marginInlineStart:{style:Yi},marginInlineEnd:{style:Yi},marginBlock:{style:Yi},marginBlockStart:{style:Yi},marginBlockEnd:{style:Yi},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Qv},rowGap:{style:Xv},columnGap:{style:Kv},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Wo},maxWidth:{style:WA},minWidth:{transform:Wo},height:{transform:Wo},maxHeight:{transform:Wo},minHeight:{transform:Wo},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function bse(...e){const n=e.reduce((r,i)=>r.concat(Object.keys(i)),[]),t=new Set(n);return e.every(r=>t.size===Object.keys(r).length)}function yse(e,n){return typeof e=="function"?e(n):e}function $I(){function e(t,r,i,a){const s={[t]:r,theme:i},l=a[t];if(!l)return{[t]:r};const{cssProperty:u=t,themeKey:d,transform:f,style:m}=l;if(r==null)return null;if(d==="typography"&&r==="inherit")return{[t]:r};const b=Vv(i,d)||{};return m?m(s):Md(s,r,g=>{let x=Qx(b,f,g);return g===x&&typeof g=="string"&&(x=Qx(b,f,`${t}${g==="default"?"":eh(g)}`,g)),u===!1?x:{[u]:x}})}function n(t){var r;const{sx:i,theme:a={}}=t||{};if(!i)return null;const s=(r=a.unstable_sxConfig)!=null?r:rb;function l(u){let d=u;if(typeof u=="function")d=u(a);else if(typeof u!="object")return u;if(!d)return null;const f=Dae(a.breakpoints),m=Object.keys(f);let b=f;return Object.keys(d).forEach(g=>{const x=yse(d[g],a);if(x!=null)if(typeof x=="object")if(s[g])b=J1(b,e(g,x,a,s));else{const y=Md({theme:a},x,A=>({[g]:A}));bse(y,x)?b[g]=n({sx:x,theme:a}):b=J1(b,y)}else b=J1(b,e(g,x,a,s))}),Iae(m,b)}return Array.isArray(i)?i.map(l):l(i)}return n}const Zv=$I();Zv.filterProps=["sx"];function UI(e,n){const t=this;return t.vars&&typeof t.getColorSchemeSelector=="function"?{[t.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:n}:t.palette.mode===e?n:{}}const xse=["breakpoints","palette","spacing","shape"];function HI(e={},...n){const{breakpoints:t={},palette:r={},spacing:i,shape:a={}}=e,s=lh(e,xse),l=zI(t),u=qae(i);let d=Nc({breakpoints:l,direction:"ltr",components:{},palette:Wr({mode:"light"},r),spacing:u,shape:Wr({},Oae,a)},s);return d.applyStyles=UI,d=n.reduce((f,m)=>Nc(f,m),d),d.unstable_sxConfig=Wr({},rb,s==null?void 0:s.unstable_sxConfig),d.unstable_sx=function(f){return Zv({sx:f,theme:this})},d}const vse=Object.freeze(Object.defineProperty({__proto__:null,default:HI,private_createBreakpoints:zI,unstable_applyStyles:UI},Symbol.toStringTag,{value:"Module"})),wse=Ud(vse),Sse=["sx"],Ase=e=>{var n,t;const r={systemProps:{},otherProps:{}},i=(n=e==null||(t=e.theme)==null?void 0:t.unstable_sxConfig)!=null?n:rb;return Object.keys(e).forEach(a=>{i[a]?r.systemProps[a]=e[a]:r.otherProps[a]=e[a]}),r};function Cse(e){const{sx:n}=e,t=lh(e,Sse),{systemProps:r,otherProps:i}=Ase(t);let a;return Array.isArray(n)?a=[r,...n]:typeof n=="function"?a=(...s)=>{const l=n(...s);return If(l)?Wr({},r,l):r}:a=Wr({},r,n),Wr({},i,{sx:a})}const kse=Object.freeze(Object.defineProperty({__proto__:null,default:Zv,extendSxProp:Cse,unstable_createStyleFunctionSx:$I,unstable_defaultSxConfig:rb},Symbol.toStringTag,{value:"Module"})),Ese=Ud(kse);var TN;function _se(){if(TN)return Fh;TN=1;var e=Bv();Object.defineProperty(Fh,"__esModule",{value:!0}),Fh.default=F,Fh.shouldForwardProp=x,Fh.systemDefaultTheme=void 0;var n=e($ie()),t=e(Uie()),r=m(kae),i=Eae;e(_ae),e(Nae);var a=e(wse),s=e(Ese);const l=["ownerState"],u=["variants"],d=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function f(M){if(typeof WeakMap!="function")return null;var z=new WeakMap,_=new WeakMap;return(f=function(L){return L?_:z})(M)}function m(M,z){if(M&&M.__esModule)return M;if(M===null||typeof M!="object"&&typeof M!="function")return{default:M};var _=f(z);if(_&&_.has(M))return _.get(M);var L={__proto__:null},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Z in M)if(Z!=="default"&&Object.prototype.hasOwnProperty.call(M,Z)){var O=$?Object.getOwnPropertyDescriptor(M,Z):null;O&&(O.get||O.set)?Object.defineProperty(L,Z,O):L[Z]=M[Z]}return L.default=M,_&&_.set(M,L),L}function b(M){return Object.keys(M).length===0}function g(M){return typeof M=="string"&&M.charCodeAt(0)>96}function x(M){return M!=="ownerState"&&M!=="theme"&&M!=="sx"&&M!=="as"}const y=Fh.systemDefaultTheme=(0,a.default)(),A=M=>M&&M.charAt(0).toLowerCase()+M.slice(1);function w({defaultTheme:M,theme:z,themeId:_}){return b(z)?M:z[_]||z}function C(M){return M?(z,_)=>_[M]:null}function j(M,z){let{ownerState:_}=z,L=(0,t.default)(z,l);const $=typeof M=="function"?M((0,n.default)({ownerState:_},L)):M;if(Array.isArray($))return $.flatMap(Z=>j(Z,(0,n.default)({ownerState:_},L)));if($&&typeof $=="object"&&Array.isArray($.variants)){const{variants:Z=[]}=$;let O=(0,t.default)($,u);return Z.forEach(T=>{let R=!0;typeof T.props=="function"?R=T.props((0,n.default)({ownerState:_},L,_)):Object.keys(T.props).forEach(N=>{(_==null?void 0:_[N])!==T.props[N]&&L[N]!==T.props[N]&&(R=!1)}),R&&(Array.isArray(O)||(O=[O]),O.push(typeof T.style=="function"?T.style((0,n.default)({ownerState:_},L,_)):T.style))}),O}return $}function F(M={}){const{themeId:z,defaultTheme:_=y,rootShouldForwardProp:L=x,slotShouldForwardProp:$=x}=M,Z=O=>(0,s.default)((0,n.default)({},O,{theme:w((0,n.default)({},O,{defaultTheme:_,themeId:z}))}));return Z.__mui_systemSx=!0,(O,T={})=>{(0,r.internal_processStyles)(O,oe=>oe.filter(Ce=>!(Ce!=null&&Ce.__mui_systemSx)));const{name:R,slot:N,skipVariantsResolver:G,skipSx:W,overridesResolver:Q=C(A(N))}=T,J=(0,t.default)(T,d),se=G!==void 0?G:N&&N!=="Root"&&N!=="root"||!1,U=W||!1;let le,q=x;N==="Root"||N==="root"?q=L:N?q=$:g(O)&&(q=void 0);const B=(0,r.default)(O,(0,n.default)({shouldForwardProp:q,label:le},J)),ee=oe=>typeof oe=="function"&&oe.__emotion_real!==oe||(0,i.isPlainObject)(oe)?Ce=>j(oe,(0,n.default)({},Ce,{theme:w({theme:Ce.theme,defaultTheme:_,themeId:z})})):oe,re=(oe,...Ce)=>{let ye=ee(oe);const Se=Ce?Ce.map(ee):[];R&&Q&&Se.push(He=>{const Ye=w((0,n.default)({},He,{defaultTheme:_,themeId:z}));if(!Ye.components||!Ye.components[R]||!Ye.components[R].styleOverrides)return null;const V=Ye.components[R].styleOverrides,Ae={};return Object.entries(V).forEach(([ne,be])=>{Ae[ne]=j(be,(0,n.default)({},He,{theme:Ye}))}),Q(He,Ae)}),R&&!se&&Se.push(He=>{var Ye;const V=w((0,n.default)({},He,{defaultTheme:_,themeId:z})),Ae=V==null||(Ye=V.components)==null||(Ye=Ye[R])==null?void 0:Ye.variants;return j({variants:Ae},(0,n.default)({},He,{theme:V}))}),U||Se.push(Z);const Te=Se.length-Ce.length;if(Array.isArray(oe)&&Te>0){const He=new Array(Te).fill("");ye=[...oe,...He],ye.raw=[...oe.raw,...He]}const Le=B(ye,...Se);return O.muiName&&(Le.muiName=O.muiName),Le};return B.withConfig&&(re.withConfig=B.withConfig),re}}return Fh}var Nse=_se();const jse=FA(Nse);function Tse(e,n){return Wr({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},n)}var Ii={};const Ose=Ud(rie),Dse=Ud(Mie);var ON;function Ise(){if(ON)return Ii;ON=1;var e=Bv();Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.alpha=x,Ii.blend=z,Ii.colorChannel=void 0,Ii.darken=A,Ii.decomposeColor=s,Ii.emphasize=F,Ii.getContrastRatio=g,Ii.getLuminance=b,Ii.hexToRgb=i,Ii.hslToRgb=m,Ii.lighten=C,Ii.private_safeAlpha=y,Ii.private_safeColorChannel=void 0,Ii.private_safeDarken=w,Ii.private_safeEmphasize=M,Ii.private_safeLighten=j,Ii.recomposeColor=d,Ii.rgbToHex=f;var n=e(Ose),t=e(Dse);function r(_,L=0,$=1){return(0,t.default)(_,L,$)}function i(_){_=_.slice(1);const L=new RegExp(`.{1,${_.length>=6?2:1}}`,"g");let $=_.match(L);return $&&$[0].length===1&&($=$.map(Z=>Z+Z)),$?`rgb${$.length===4?"a":""}(${$.map((Z,O)=>O<3?parseInt(Z,16):Math.round(parseInt(Z,16)/255*1e3)/1e3).join(", ")})`:""}function a(_){const L=_.toString(16);return L.length===1?`0${L}`:L}function s(_){if(_.type)return _;if(_.charAt(0)==="#")return s(i(_));const L=_.indexOf("("),$=_.substring(0,L);if(["rgb","rgba","hsl","hsla","color"].indexOf($)===-1)throw new Error((0,n.default)(9,_));let Z=_.substring(L+1,_.length-1),O;if($==="color"){if(Z=Z.split(" "),O=Z.shift(),Z.length===4&&Z[3].charAt(0)==="/"&&(Z[3]=Z[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(O)===-1)throw new Error((0,n.default)(10,O))}else Z=Z.split(",");return Z=Z.map(T=>parseFloat(T)),{type:$,values:Z,colorSpace:O}}const l=_=>{const L=s(_);return L.values.slice(0,3).map(($,Z)=>L.type.indexOf("hsl")!==-1&&Z!==0?`${$}%`:$).join(" ")};Ii.colorChannel=l;const u=(_,L)=>{try{return l(_)}catch{return _}};Ii.private_safeColorChannel=u;function d(_){const{type:L,colorSpace:$}=_;let{values:Z}=_;return L.indexOf("rgb")!==-1?Z=Z.map((O,T)=>T<3?parseInt(O,10):O):L.indexOf("hsl")!==-1&&(Z[1]=`${Z[1]}%`,Z[2]=`${Z[2]}%`),L.indexOf("color")!==-1?Z=`${$} ${Z.join(" ")}`:Z=`${Z.join(", ")}`,`${L}(${Z})`}function f(_){if(_.indexOf("#")===0)return _;const{values:L}=s(_);return`#${L.map(($,Z)=>a(Z===3?Math.round(255*$):$)).join("")}`}function m(_){_=s(_);const{values:L}=_,$=L[0],Z=L[1]/100,O=L[2]/100,T=Z*Math.min(O,1-O),R=(W,Q=(W+$/30)%12)=>O-T*Math.max(Math.min(Q-3,9-Q,1),-1);let N="rgb";const G=[Math.round(R(0)*255),Math.round(R(8)*255),Math.round(R(4)*255)];return _.type==="hsla"&&(N+="a",G.push(L[3])),d({type:N,values:G})}function b(_){_=s(_);let L=_.type==="hsl"||_.type==="hsla"?s(m(_)).values:_.values;return L=L.map($=>(_.type!=="color"&&($/=255),$<=.03928?$/12.92:(($+.055)/1.055)**2.4)),Number((.2126*L[0]+.7152*L[1]+.0722*L[2]).toFixed(3))}function g(_,L){const $=b(_),Z=b(L);return(Math.max($,Z)+.05)/(Math.min($,Z)+.05)}function x(_,L){return _=s(_),L=r(L),(_.type==="rgb"||_.type==="hsl")&&(_.type+="a"),_.type==="color"?_.values[3]=`/${L}`:_.values[3]=L,d(_)}function y(_,L,$){try{return x(_,L)}catch{return _}}function A(_,L){if(_=s(_),L=r(L),_.type.indexOf("hsl")!==-1)_.values[2]*=1-L;else if(_.type.indexOf("rgb")!==-1||_.type.indexOf("color")!==-1)for(let $=0;$<3;$+=1)_.values[$]*=1-L;return d(_)}function w(_,L,$){try{return A(_,L)}catch{return _}}function C(_,L){if(_=s(_),L=r(L),_.type.indexOf("hsl")!==-1)_.values[2]+=(100-_.values[2])*L;else if(_.type.indexOf("rgb")!==-1)for(let $=0;$<3;$+=1)_.values[$]+=(255-_.values[$])*L;else if(_.type.indexOf("color")!==-1)for(let $=0;$<3;$+=1)_.values[$]+=(1-_.values[$])*L;return d(_)}function j(_,L,$){try{return C(_,L)}catch{return _}}function F(_,L=.15){return b(_)>.5?A(_,L):C(_,L)}function M(_,L,$){try{return F(_,L)}catch{return _}}function z(_,L,$,Z=1){const O=(G,W)=>Math.round((G**(1/Z)*(1-$)+W**(1/Z)*$)**Z),T=s(_),R=s(L),N=[O(T.values[0],R.values[0]),O(T.values[1],R.values[1]),O(T.values[2],R.values[2])];return d({type:"rgb",values:N})}return Ii}var h6=Ise();const kg={black:"#000",white:"#fff"},Lse={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},c0={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},d0={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},O1={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},f0={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},h0={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},p0={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},Rse=["mode","contrastThreshold","tonalOffset"],DN={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:kg.white,default:kg.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Fw={text:{primary:kg.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:kg.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function IN(e,n,t,r){const i=r.light||r,a=r.dark||r*1.5;e[n]||(e.hasOwnProperty(t)?e[n]=e[t]:n==="light"?e.light=h6.lighten(e.main,i):n==="dark"&&(e.dark=h6.darken(e.main,a)))}function Mse(e="light"){return e==="dark"?{main:f0[200],light:f0[50],dark:f0[400]}:{main:f0[700],light:f0[400],dark:f0[800]}}function Fse(e="light"){return e==="dark"?{main:c0[200],light:c0[50],dark:c0[400]}:{main:c0[500],light:c0[300],dark:c0[700]}}function Pse(e="light"){return e==="dark"?{main:d0[500],light:d0[300],dark:d0[700]}:{main:d0[700],light:d0[400],dark:d0[800]}}function zse(e="light"){return e==="dark"?{main:h0[400],light:h0[300],dark:h0[700]}:{main:h0[700],light:h0[500],dark:h0[900]}}function qse(e="light"){return e==="dark"?{main:p0[400],light:p0[300],dark:p0[700]}:{main:p0[800],light:p0[500],dark:p0[900]}}function Bse(e="light"){return e==="dark"?{main:O1[400],light:O1[300],dark:O1[700]}:{main:"#ed6c02",light:O1[500],dark:O1[900]}}function $se(e){const{mode:n="light",contrastThreshold:t=3,tonalOffset:r=.2}=e,i=lh(e,Rse),a=e.primary||Mse(n),s=e.secondary||Fse(n),l=e.error||Pse(n),u=e.info||zse(n),d=e.success||qse(n),f=e.warning||Bse(n);function m(x){return h6.getContrastRatio(x,Fw.text.primary)>=t?Fw.text.primary:DN.text.primary}const b=({color:x,name:y,mainShade:A=500,lightShade:w=300,darkShade:C=700})=>{if(x=Wr({},x),!x.main&&x[A]&&(x.main=x[A]),!x.hasOwnProperty("main"))throw new Error(Sg(11,y?` (${y})`:"",A));if(typeof x.main!="string")throw new Error(Sg(12,y?` (${y})`:"",JSON.stringify(x.main)));return IN(x,"light",w,r),IN(x,"dark",C,r),x.contrastText||(x.contrastText=m(x.main)),x},g={dark:Fw,light:DN};return Nc(Wr({common:Wr({},kg),mode:n,primary:b({color:a,name:"primary"}),secondary:b({color:s,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:b({color:l,name:"error"}),warning:b({color:f,name:"warning"}),info:b({color:u,name:"info"}),success:b({color:d,name:"success"}),grey:Lse,contrastThreshold:t,getContrastText:m,augmentColor:b,tonalOffset:r},g[n]),i)}const Use=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function Hse(e){return Math.round(e*1e5)/1e5}const LN={textTransform:"uppercase"},RN='"Roboto", "Helvetica", "Arial", sans-serif';function Wse(e,n){const t=typeof n=="function"?n(e):n,{fontFamily:r=RN,fontSize:i=14,fontWeightLight:a=300,fontWeightRegular:s=400,fontWeightMedium:l=500,fontWeightBold:u=700,htmlFontSize:d=16,allVariants:f,pxToRem:m}=t,b=lh(t,Use),g=i/14,x=m||(w=>`${w/d*g}rem`),y=(w,C,j,F,M)=>Wr({fontFamily:r,fontWeight:w,fontSize:x(C),lineHeight:j},r===RN?{letterSpacing:`${Hse(F/C)}em`}:{},M,f),A={h1:y(a,96,1.167,-1.5),h2:y(a,60,1.2,-.5),h3:y(s,48,1.167,0),h4:y(s,34,1.235,.25),h5:y(s,24,1.334,0),h6:y(l,20,1.6,.15),subtitle1:y(s,16,1.75,.15),subtitle2:y(l,14,1.57,.1),body1:y(s,16,1.5,.15),body2:y(s,14,1.43,.15),button:y(l,14,1.75,.4,LN),caption:y(s,12,1.66,.4),overline:y(s,12,2.66,1,LN),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Nc(Wr({htmlFontSize:d,pxToRem:x,fontFamily:r,fontSize:i,fontWeightLight:a,fontWeightRegular:s,fontWeightMedium:l,fontWeightBold:u},A),b,{clone:!1})}const Vse=.2,Yse=.14,Gse=.12;function xi(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${Vse})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${Yse})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${Gse})`].join(",")}const Qse=["none",xi(0,2,1,-1,0,1,1,0,0,1,3,0),xi(0,3,1,-2,0,2,2,0,0,1,5,0),xi(0,3,3,-2,0,3,4,0,0,1,8,0),xi(0,2,4,-1,0,4,5,0,0,1,10,0),xi(0,3,5,-1,0,5,8,0,0,1,14,0),xi(0,3,5,-1,0,6,10,0,0,1,18,0),xi(0,4,5,-2,0,7,10,1,0,2,16,1),xi(0,5,5,-3,0,8,10,1,0,3,14,2),xi(0,5,6,-3,0,9,12,1,0,3,16,2),xi(0,6,6,-3,0,10,14,1,0,4,18,3),xi(0,6,7,-4,0,11,15,1,0,4,20,3),xi(0,7,8,-4,0,12,17,2,0,5,22,4),xi(0,7,8,-4,0,13,19,2,0,5,24,4),xi(0,7,9,-4,0,14,21,2,0,5,26,4),xi(0,8,9,-5,0,15,22,2,0,6,28,5),xi(0,8,10,-5,0,16,24,2,0,6,30,5),xi(0,8,11,-5,0,17,26,2,0,6,32,5),xi(0,9,11,-5,0,18,28,2,0,7,34,6),xi(0,9,12,-6,0,19,29,2,0,7,36,6),xi(0,10,13,-6,0,20,31,3,0,8,38,7),xi(0,10,13,-6,0,21,33,3,0,8,40,7),xi(0,10,14,-6,0,22,35,3,0,8,42,7),xi(0,11,14,-7,0,23,36,3,0,9,44,8),xi(0,11,15,-7,0,24,38,3,0,9,46,8)],Kse=["duration","easing","delay"],Xse={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Zse={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function MN(e){return`${Math.round(e)}ms`}function Jse(e){if(!e)return 0;const n=e/36;return Math.round((4+15*n**.25+n/5)*10)}function eoe(e){const n=Wr({},Xse,e.easing),t=Wr({},Zse,e.duration);return Wr({getAutoHeightDuration:Jse,create:(r=["all"],i={})=>{const{duration:a=t.standard,easing:s=n.easeInOut,delay:l=0}=i;return lh(i,Kse),(Array.isArray(r)?r:[r]).map(u=>`${u} ${typeof a=="string"?a:MN(a)} ${s} ${typeof l=="string"?l:MN(l)}`).join(",")}},e,{easing:n,duration:t})}const toe={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},noe=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function roe(e={},...n){const{mixins:t={},palette:r={},transitions:i={},typography:a={}}=e,s=lh(e,noe);if(e.vars)throw new Error(Sg(18));const l=$se(r),u=HI(e);let d=Nc(u,{mixins:Tse(u.breakpoints,t),palette:l,shadows:Qse.slice(),typography:Wse(l,a),transitions:eoe(i),zIndex:Wr({},toe)});return d=Nc(d,s),d=n.reduce((f,m)=>Nc(f,m),d),d.unstable_sxConfig=Wr({},rb,s==null?void 0:s.unstable_sxConfig),d.unstable_sx=function(f){return Zv({sx:f,theme:this})},d}const ioe=roe(),aoe="$$material";function soe(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const ooe=e=>soe(e)&&e!=="classes",loe=jse({themeId:aoe,defaultTheme:ioe,rootShouldForwardProp:ooe});function uoe(e){return TI("MuiSvgIcon",e)}Lie("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const coe=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],doe=e=>{const{color:n,fontSize:t,classes:r}=e,i={root:["root",n!=="inherit"&&`color${eh(n)}`,`fontSize${eh(t)}`]};return Oie(i,uoe,r)},foe=loe("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:t}=e;return[n.root,t.color!=="inherit"&&n[`color${eh(t.color)}`],n[`fontSize${eh(t.fontSize)}`]]}})(({theme:e,ownerState:n})=>{var t,r,i,a,s,l,u,d,f,m,b,g,x;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:n.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(t=e.transitions)==null||(r=t.create)==null?void 0:r.call(t,"fill",{duration:(i=e.transitions)==null||(i=i.duration)==null?void 0:i.shorter}),fontSize:{inherit:"inherit",small:((a=e.typography)==null||(s=a.pxToRem)==null?void 0:s.call(a,20))||"1.25rem",medium:((l=e.typography)==null||(u=l.pxToRem)==null?void 0:u.call(l,24))||"1.5rem",large:((d=e.typography)==null||(f=d.pxToRem)==null?void 0:f.call(d,35))||"2.1875rem"}[n.fontSize],color:(m=(b=(e.vars||e).palette)==null||(b=b[n.color])==null?void 0:b.main)!=null?m:{action:(g=(e.vars||e).palette)==null||(g=g.action)==null?void 0:g.active,disabled:(x=(e.vars||e).palette)==null||(x=x.action)==null?void 0:x.disabled,inherit:void 0}[n.color]}}),p6=X.forwardRef(function(e,n){const t=Bie({props:e,name:"MuiSvgIcon"}),{children:r,className:i,color:a="inherit",component:s="svg",fontSize:l="medium",htmlColor:u,inheritViewBox:d=!1,titleAccess:f,viewBox:m="0 0 24 24"}=t,b=lh(t,coe),g=X.isValidElement(r)&&r.type==="svg",x=Wr({},t,{color:a,component:s,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:d,viewBox:m,hasSvgAsChild:g}),y={};d||(y.viewBox=m);const A=doe(x);return xn.jsxs(foe,Wr({as:s,className:Fie(A.root,i),focusable:"false",color:u,"aria-hidden":f?void 0:!0,role:f?"img":void 0,ref:n},y,b,g&&r.props,{ownerState:x,children:[g?r.props.children:r,f?xn.jsx("title",{children:f}):null]}))});p6.muiName="SvgIcon";function hoe(e,n){function t(r,i){return xn.jsx(p6,Wr({"data-testid":`${n}Icon`,ref:i},r,{children:e}))}return t.muiName=p6.muiName,X.memo(X.forwardRef(t))}const poe={configure:e=>{jI.configure(e)}},moe=Object.freeze(Object.defineProperty({__proto__:null,capitalize:eh,createChainedFunction:cie,createSvgIcon:hoe,debounce:die,deprecatedPropType:fie,isMuiElement:hie,ownerDocument:kI,ownerWindow:pie,requirePropFactory:mie,setRef:EI,unstable_ClassNameGenerator:poe,unstable_useEnhancedEffect:_I,unstable_useId:bie,unsupportedProp:yie,useControlled:xie,useEventCallback:vie,useForkRef:wie,useIsFocusVisible:Tie},Symbol.toStringTag,{value:"Module"})),goe=Ud(moe);var FN;function WI(){return FN||(FN=1,function(e){"use client";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.createSvgIcon}});var n=goe}(fN)),fN}var PN;function boe(){if(PN)return j1;PN=1;var e=Bv();Object.defineProperty(j1,"__esModule",{value:!0}),j1.default=void 0;var n=e(WI()),t=PA();return j1.default=(0,n.default)((0,t.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 9h12v2H6zm8 5H6v-2h8zm4-6H6V6h12z"}),"Chat"),j1}var yoe=boe();const xoe=FA(yoe),Pw={chatToggleButton:{position:"fixed",bottom:20,right:20,bgcolor:"#CDDAFF",color:"white",width:60,height:60,borderRadius:"50%",boxShadow:"0px 4px 15px rgba(0, 0, 0, 0.3)","&:hover":{bgcolor:"#0B53C0"},transition:"background-color 0.3s, transform 0.3s","&:active":{transform:"scale(0.95)"}},chatContainer:(e,n)=>({position:"fixed",bottom:e?0:20,right:e?0:20,width:e?"80%":n?"60%":650,height:e?"50%":n?"55%":700,padding:e?1:2,display:"flex",flexDirection:"column",borderRadius:e?0:"16px",backgroundColor:"#F0F4FF",boxShadow:"0px 10px 30px rgba(0, 0, 0, 0.2)"}),chatHeader:{fontFamily:"Staatliches, Arial, sans-serif",fontWeight:"bold",color:"black",fontSize:"1.25rem"},chatMessageInput:{"& .MuiOutlinedInput-root":{fontFamily:"Gabarito, Arial, sans-serif",borderRadius:"20px","& fieldset":{borderColor:"#ccc"},"&:hover fieldset":{borderColor:"#185cc4"}}},chatMessageBox:{maxWidth:"70%",borderRadius:"15px",padding:1,paddingX:2,boxShadow:"0px 2px 5px rgba(0, 0, 0, 0.1)","&.user":{bgcolor:"#f0f0f0",color:"#555",alignSelf:"flex-end"},"&.bot":{bgcolor:"#CDDAFF",color:"black",alignSelf:"flex-start","&:hover":{bgcolor:"#0B53C0",color:"white"}}},chatButtons:{backgroundColor:"#CDDAFF",color:"black",fontFamily:"Staatliches, sans-serif",fontSize:"1.25rem","&:hover":{backgroundColor:"#0B53C0",color:"white"}}},voe=({responses:e})=>xn.jsx(de,{sx:{flexGrow:1,overflowY:"auto",display:"flex",flexDirection:"column",gap:2,padding:2,backgroundColor:"transparent"},children:e.length>0?e.map((n,t)=>xn.jsxs(de,{sx:{display:"flex",flexDirection:"column",alignItems:n.question?"flex-end":"flex-start"},children:[n.question&&xn.jsx(de,{sx:{maxWidth:"70%",bgcolor:"#f0f0f0",color:"#555",borderRadius:"15px",p:1,px:2,mb:2,alignSelf:"flex-end",boxShadow:"0px 2px 5px rgba(0, 0, 0, 0.1)"},children:xn.jsx(he,{variant:"body1",sx:{fontFamily:"Gabarito, Arial, sans-serif",fontSize:"1rem",color:"#555"},children:n.question})}),(n.answer||n.text)&&xn.jsx(de,{sx:{maxWidth:"70%",bgcolor:"#CDDAFF",color:"black",borderRadius:"15px",p:1,px:2,alignSelf:"flex-start",boxShadow:"0px 2px 5px rgba(0, 0, 0, 0.2)",mb:.3,"&:hover":{bgcolor:"#0B53C0",color:"white"}},children:xn.jsx(he,{variant:"body1",sx:{fontFamily:"Gabarito, Arial, sans-serif",fontSize:"1rem",color:"inherit",transition:"color 0.3s ease"},children:xn.jsx(MA,{children:n.answer||n.text})})})]},t)):xn.jsx(he,{variant:"body2",sx:{textAlign:"center",color:"#6c757d",fontFamily:"Gabarito, Arial, sans-serif"},children:"No messages yet. Start the conversation!"})}),woe=({onSendMessage:e,onStartConversation:n,onEndConversation:t,conversationId:r})=>{const[i,a]=X.useState(""),s=()=>{i.trim()&&(e(i),a(""))},l=()=>{r||n()},u=()=>{r&&t()};return xn.jsxs(de,{sx:{display:"flex",flexDirection:"column",gap:2,mt:2},children:[xn.jsxs(de,{sx:{display:"flex",gap:1},children:[xn.jsx(Jt,{variant:"outlined",placeholder:"Type your message...",fullWidth:!0,size:"small",value:i,onChange:d=>a(d.target.value),onKeyDown:d=>{d.key==="Enter"&&s()},sx:{"& .MuiOutlinedInput-root":{borderRadius:"20px","& fieldset":{borderColor:"#ccc"},"&:hover fieldset":{borderColor:"#185cc4"}}}}),xn.jsx(Ct,{variant:"contained",onClick:s,sx:{backgroundColor:"#CDDAFF",color:"#000",fontFamily:"Staatliches, sans-serif",fontSize:"1rem",textTransform:"none","&:hover":{backgroundColor:"#0B53C0",color:"#fff"}},children:"Send"})]}),r?xn.jsx(Ct,{variant:"outlined",onClick:u,sx:{color:"#000",fontFamily:"Staatliches, sans-serif",fontSize:"1rem",textTransform:"none",borderColor:"#CDDAFF","&:hover":{borderColor:"#0B53C0",color:"#0B53C0"}},children:"END CONVERSATION"}):xn.jsx(Ct,{variant:"contained",onClick:l,sx:{backgroundColor:"#CDDAFF",color:"#000",fontFamily:"Staatliches, sans-serif",fontSize:"1rem",textTransform:"none","&:hover":{backgroundColor:"#0B53C0",color:"#fff"}},children:"START CONVERSATION"})]})};var D1={},zN;function Soe(){if(zN)return D1;zN=1;var e=Bv();Object.defineProperty(D1,"__esModule",{value:!0}),D1.default=void 0;var n=e(WI()),t=PA();return D1.default=(0,n.default)((0,t.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),D1}var Aoe=Soe();const Coe=FA(Aoe);function VI(e,n){return function(){return e.apply(n,arguments)}}const{toString:koe}=Object.prototype,{getPrototypeOf:VA}=Object,Jv=(e=>n=>{const t=koe.call(n);return e[t]||(e[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Nu=e=>(e=e.toLowerCase(),n=>Jv(n)===e),e2=e=>n=>typeof n===e,{isArray:ym}=Array,Eg=e2("undefined");function Eoe(e){return e!==null&&!Eg(e)&&e.constructor!==null&&!Eg(e.constructor)&&Zo(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const YI=Nu("ArrayBuffer");function _oe(e){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(e):n=e&&e.buffer&&YI(e.buffer),n}const Noe=e2("string"),Zo=e2("function"),GI=e2("number"),t2=e=>e!==null&&typeof e=="object",joe=e=>e===!0||e===!1,cx=e=>{if(Jv(e)!=="object")return!1;const n=VA(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Toe=Nu("Date"),Ooe=Nu("File"),Doe=Nu("Blob"),Ioe=Nu("FileList"),Loe=e=>t2(e)&&Zo(e.pipe),Roe=e=>{let n;return e&&(typeof FormData=="function"&&e instanceof FormData||Zo(e.append)&&((n=Jv(e))==="formdata"||n==="object"&&Zo(e.toString)&&e.toString()==="[object FormData]"))},Moe=Nu("URLSearchParams"),[Foe,Poe,zoe,qoe]=["ReadableStream","Request","Response","Headers"].map(Nu),Boe=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ib(e,n,{allOwnKeys:t=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),ym(e))for(r=0,i=e.length;r<i;r++)n.call(null,e[r],r,e);else{const a=t?Object.getOwnPropertyNames(e):Object.keys(e),s=a.length;let l;for(r=0;r<s;r++)l=a[r],n.call(null,e[l],l,e)}}function QI(e,n){n=n.toLowerCase();const t=Object.keys(e);let r=t.length,i;for(;r-- >0;)if(i=t[r],n===i.toLowerCase())return i;return null}const Yh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:globalThis,KI=e=>!Eg(e)&&e!==Yh;function m6(){const{caseless:e}=KI(this)&&this||{},n={},t=(r,i)=>{const a=e&&QI(n,i)||i;cx(n[a])&&cx(r)?n[a]=m6(n[a],r):cx(r)?n[a]=m6({},r):ym(r)?n[a]=r.slice():n[a]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&ib(arguments[r],t);return n}const $oe=(e,n,t,{allOwnKeys:r}={})=>(ib(n,(i,a)=>{t&&Zo(i)?e[a]=VI(i,t):e[a]=i},{allOwnKeys:r}),e),Uoe=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Hoe=(e,n,t,r)=>{e.prototype=Object.create(n.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:n.prototype}),t&&Object.assign(e.prototype,t)},Woe=(e,n,t,r)=>{let i,a,s;const l={};if(n=n||{},e==null)return n;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)s=i[a],(!r||r(s,e,n))&&!l[s]&&(n[s]=e[s],l[s]=!0);e=t!==!1&&VA(e)}while(e&&(!t||t(e,n))&&e!==Object.prototype);return n},Voe=(e,n,t)=>{e=String(e),(t===void 0||t>e.length)&&(t=e.length),t-=n.length;const r=e.indexOf(n,t);return r!==-1&&r===t},Yoe=e=>{if(!e)return null;if(ym(e))return e;let n=e.length;if(!GI(n))return null;const t=new Array(n);for(;n-- >0;)t[n]=e[n];return t},Goe=(e=>n=>e&&n instanceof e)(typeof Uint8Array<"u"&&VA(Uint8Array)),Qoe=(e,n)=>{const t=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=t.next())&&!r.done;){const i=r.value;n.call(e,i[0],i[1])}},Koe=(e,n)=>{let t;const r=[];for(;(t=e.exec(n))!==null;)r.push(t);return r},Xoe=Nu("HTMLFormElement"),Zoe=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,t,r){return t.toUpperCase()+r}),qN=(({hasOwnProperty:e})=>(n,t)=>e.call(n,t))(Object.prototype),Joe=Nu("RegExp"),XI=(e,n)=>{const t=Object.getOwnPropertyDescriptors(e),r={};ib(t,(i,a)=>{let s;(s=n(i,a,e))!==!1&&(r[a]=s||i)}),Object.defineProperties(e,r)},ele=e=>{XI(e,(n,t)=>{if(Zo(e)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=e[t];if(Zo(r)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},tle=(e,n)=>{const t={},r=i=>{i.forEach(a=>{t[a]=!0})};return ym(e)?r(e):r(String(e).split(n)),t},nle=()=>{},rle=(e,n)=>e!=null&&Number.isFinite(e=+e)?e:n,zw="abcdefghijklmnopqrstuvwxyz",BN="0123456789",ZI={DIGIT:BN,ALPHA:zw,ALPHA_DIGIT:zw+zw.toUpperCase()+BN},ile=(e=16,n=ZI.ALPHA_DIGIT)=>{let t="";const{length:r}=n;for(;e--;)t+=n[Math.random()*r|0];return t};function ale(e){return!!(e&&Zo(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const sle=e=>{const n=new Array(10),t=(r,i)=>{if(t2(r)){if(n.indexOf(r)>=0)return;if(!("toJSON"in r)){n[i]=r;const a=ym(r)?[]:{};return ib(r,(s,l)=>{const u=t(s,i+1);!Eg(u)&&(a[l]=u)}),n[i]=void 0,a}}return r};return t(e,0)},ole=Nu("AsyncFunction"),lle=e=>e&&(t2(e)||Zo(e))&&Zo(e.then)&&Zo(e.catch),JI=((e,n)=>e?setImmediate:n?((t,r)=>(Yh.addEventListener("message",({source:i,data:a})=>{i===Yh&&a===t&&r.length&&r.shift()()},!1),i=>{r.push(i),Yh.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Zo(Yh.postMessage)),ule=typeof queueMicrotask<"u"?queueMicrotask.bind(Yh):typeof process<"u"&&process.nextTick||JI,ct={isArray:ym,isArrayBuffer:YI,isBuffer:Eoe,isFormData:Roe,isArrayBufferView:_oe,isString:Noe,isNumber:GI,isBoolean:joe,isObject:t2,isPlainObject:cx,isReadableStream:Foe,isRequest:Poe,isResponse:zoe,isHeaders:qoe,isUndefined:Eg,isDate:Toe,isFile:Ooe,isBlob:Doe,isRegExp:Joe,isFunction:Zo,isStream:Loe,isURLSearchParams:Moe,isTypedArray:Goe,isFileList:Ioe,forEach:ib,merge:m6,extend:$oe,trim:Boe,stripBOM:Uoe,inherits:Hoe,toFlatObject:Woe,kindOf:Jv,kindOfTest:Nu,endsWith:Voe,toArray:Yoe,forEachEntry:Qoe,matchAll:Koe,isHTMLForm:Xoe,hasOwnProperty:qN,hasOwnProp:qN,reduceDescriptors:XI,freezeMethods:ele,toObjectSet:tle,toCamelCase:Zoe,noop:nle,toFiniteNumber:rle,findKey:QI,global:Yh,isContextDefined:KI,ALPHABET:ZI,generateString:ile,isSpecCompliantForm:ale,toJSONObject:sle,isAsyncFn:ole,isThenable:lle,setImmediate:JI,asap:ule};function jn(e,n,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",n&&(this.code=n),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}ct.inherits(jn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ct.toJSONObject(this.config),code:this.code,status:this.status}}});const eL=jn.prototype,tL={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{tL[e]={value:e}});Object.defineProperties(jn,tL);Object.defineProperty(eL,"isAxiosError",{value:!0});jn.from=(e,n,t,r,i,a)=>{const s=Object.create(eL);return ct.toFlatObject(e,s,function(l){return l!==Error.prototype},l=>l!=="isAxiosError"),jn.call(s,e.message,n,t,r,i),s.cause=e,s.name=e.name,a&&Object.assign(s,a),s};const cle=null;function g6(e){return ct.isPlainObject(e)||ct.isArray(e)}function nL(e){return ct.endsWith(e,"[]")?e.slice(0,-2):e}function $N(e,n,t){return e?e.concat(n).map(function(r,i){return r=nL(r),!t&&i?"["+r+"]":r}).join(t?".":""):n}function dle(e){return ct.isArray(e)&&!e.some(g6)}const fle=ct.toFlatObject(ct,{},null,function(e){return/^is[A-Z]/.test(e)});function n2(e,n,t){if(!ct.isObject(e))throw new TypeError("target must be an object");n=n||new FormData,t=ct.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,x){return!ct.isUndefined(x[g])});const r=t.metaTokens,i=t.visitor||d,a=t.dots,s=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&ct.isSpecCompliantForm(n);if(!ct.isFunction(i))throw new TypeError("visitor must be a function");function u(g){if(g===null)return"";if(ct.isDate(g))return g.toISOString();if(!l&&ct.isBlob(g))throw new jn("Blob is not supported. Use a Buffer instead.");return ct.isArrayBuffer(g)||ct.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function d(g,x,y){let A=g;if(g&&!y&&typeof g=="object"){if(ct.endsWith(x,"{}"))x=r?x:x.slice(0,-2),g=JSON.stringify(g);else if(ct.isArray(g)&&dle(g)||(ct.isFileList(g)||ct.endsWith(x,"[]"))&&(A=ct.toArray(g)))return x=nL(x),A.forEach(function(w,C){!(ct.isUndefined(w)||w===null)&&n.append(s===!0?$N([x],C,a):s===null?x:x+"[]",u(w))}),!1}return g6(g)?!0:(n.append($N(y,x,a),u(g)),!1)}const f=[],m=Object.assign(fle,{defaultVisitor:d,convertValue:u,isVisitable:g6});function b(g,x){if(!ct.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+x.join("."));f.push(g),ct.forEach(g,function(y,A){(!(ct.isUndefined(y)||y===null)&&i.call(n,y,ct.isString(A)?A.trim():A,x,m))===!0&&b(y,x?x.concat(A):[A])}),f.pop()}}if(!ct.isObject(e))throw new TypeError("data must be an object");return b(e),n}function UN(e){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(t){return n[t]})}function YA(e,n){this._pairs=[],e&&n2(e,this,n)}const rL=YA.prototype;rL.append=function(e,n){this._pairs.push([e,n])};rL.toString=function(e){const n=e?function(t){return e.call(this,t,UN)}:UN;return this._pairs.map(function(t){return n(t[0])+"="+n(t[1])},"").join("&")};function hle(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function iL(e,n,t){if(!n)return e;const r=t&&t.encode||hle;ct.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let a;if(i?a=i(n,t):a=ct.isURLSearchParams(n)?n.toString():new YA(n,t).toString(r),a){const s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}let HN=class{constructor(){this.handlers=[]}use(n,t,r){return this.handlers.push({fulfilled:n,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){ct.forEach(this.handlers,function(t){t!==null&&n(t)})}};const aL={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ple=typeof URLSearchParams<"u"?URLSearchParams:YA,mle=typeof FormData<"u"?FormData:null,gle=typeof Blob<"u"?Blob:null,ble={isBrowser:!0,classes:{URLSearchParams:ple,FormData:mle,Blob:gle},protocols:["http","https","file","blob","url","data"]},GA=typeof window<"u"&&typeof document<"u",b6=typeof navigator=="object"&&navigator||void 0,yle=GA&&(!b6||["ReactNative","NativeScript","NS"].indexOf(b6.product)<0),xle=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",vle=GA&&window.location.href||"http://localhost",wle=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:GA,hasStandardBrowserEnv:yle,hasStandardBrowserWebWorkerEnv:xle,navigator:b6,origin:vle},Symbol.toStringTag,{value:"Module"})),zs={...wle,...ble};function Sle(e,n){return n2(e,new zs.classes.URLSearchParams,Object.assign({visitor:function(t,r,i,a){return zs.isNode&&ct.isBuffer(t)?(this.append(r,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},n))}function Ale(e){return ct.matchAll(/\w+|\[(\w*)]/g,e).map(n=>n[0]==="[]"?"":n[1]||n[0])}function Cle(e){const n={},t=Object.keys(e);let r;const i=t.length;let a;for(r=0;r<i;r++)a=t[r],n[a]=e[a];return n}function sL(e){function n(t,r,i,a){let s=t[a++];if(s==="__proto__")return!0;const l=Number.isFinite(+s),u=a>=t.length;return s=!s&&ct.isArray(i)?i.length:s,u?(ct.hasOwnProp(i,s)?i[s]=[i[s],r]:i[s]=r,!l):((!i[s]||!ct.isObject(i[s]))&&(i[s]=[]),n(t,r,i[s],a)&&ct.isArray(i[s])&&(i[s]=Cle(i[s])),!l)}if(ct.isFormData(e)&&ct.isFunction(e.entries)){const t={};return ct.forEachEntry(e,(r,i)=>{n(Ale(r),i,t,0)}),t}return null}function kle(e,n,t){if(ct.isString(e))try{return(n||JSON.parse)(e),ct.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(0,JSON.stringify)(e)}const ab={transitional:aL,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const t=n.getContentType()||"",r=t.indexOf("application/json")>-1,i=ct.isObject(e);if(i&&ct.isHTMLForm(e)&&(e=new FormData(e)),ct.isFormData(e))return r?JSON.stringify(sL(e)):e;if(ct.isArrayBuffer(e)||ct.isBuffer(e)||ct.isStream(e)||ct.isFile(e)||ct.isBlob(e)||ct.isReadableStream(e))return e;if(ct.isArrayBufferView(e))return e.buffer;if(ct.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(t.indexOf("application/x-www-form-urlencoded")>-1)return Sle(e,this.formSerializer).toString();if((a=ct.isFileList(e))||t.indexOf("multipart/form-data")>-1){const s=this.env&&this.env.FormData;return n2(a?{"files[]":e}:e,s&&new s,this.formSerializer)}}return i||r?(n.setContentType("application/json",!1),kle(e)):e}],transformResponse:[function(e){const n=this.transitional||ab.transitional,t=n&&n.forcedJSONParsing,r=this.responseType==="json";if(ct.isResponse(e)||ct.isReadableStream(e))return e;if(e&&ct.isString(e)&&(t&&!this.responseType||r)){const i=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(a){if(i)throw a.name==="SyntaxError"?jn.from(a,jn.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:zs.classes.FormData,Blob:zs.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ct.forEach(["delete","get","head","post","put","patch"],e=>{ab.headers[e]={}});const Ele=ct.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),_le=e=>{const n={};let t,r,i;return e&&e.split(`
`).forEach(function(a){i=a.indexOf(":"),t=a.substring(0,i).trim().toLowerCase(),r=a.substring(i+1).trim(),!(!t||n[t]&&Ele[t])&&(t==="set-cookie"?n[t]?n[t].push(r):n[t]=[r]:n[t]=n[t]?n[t]+", "+r:r)}),n},WN=Symbol("internals");function I1(e){return e&&String(e).trim().toLowerCase()}function dx(e){return e===!1||e==null?e:ct.isArray(e)?e.map(dx):String(e)}function Nle(e){const n=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(e);)n[r[1]]=r[2];return n}const jle=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function qw(e,n,t,r,i){if(ct.isFunction(r))return r.call(this,n,t);if(i&&(n=t),!!ct.isString(n)){if(ct.isString(r))return n.indexOf(r)!==-1;if(ct.isRegExp(r))return r.test(n)}}function Tle(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,t,r)=>t.toUpperCase()+r)}function Ole(e,n){const t=ct.toCamelCase(" "+n);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+t,{value:function(i,a,s){return this[r].call(this,n,i,a,s)},configurable:!0})})}class xo{constructor(n){n&&this.set(n)}set(n,t,r){const i=this;function a(l,u,d){const f=I1(u);if(!f)throw new Error("header name must be a non-empty string");const m=ct.findKey(i,f);(!m||i[m]===void 0||d===!0||d===void 0&&i[m]!==!1)&&(i[m||u]=dx(l))}const s=(l,u)=>ct.forEach(l,(d,f)=>a(d,f,u));if(ct.isPlainObject(n)||n instanceof this.constructor)s(n,t);else if(ct.isString(n)&&(n=n.trim())&&!jle(n))s(_le(n),t);else if(ct.isHeaders(n))for(const[l,u]of n.entries())a(u,l,r);else n!=null&&a(t,n,r);return this}get(n,t){if(n=I1(n),n){const r=ct.findKey(this,n);if(r){const i=this[r];if(!t)return i;if(t===!0)return Nle(i);if(ct.isFunction(t))return t.call(this,i,r);if(ct.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,t){if(n=I1(n),n){const r=ct.findKey(this,n);return!!(r&&this[r]!==void 0&&(!t||qw(this,this[r],r,t)))}return!1}delete(n,t){const r=this;let i=!1;function a(s){if(s=I1(s),s){const l=ct.findKey(r,s);l&&(!t||qw(r,r[l],l,t))&&(delete r[l],i=!0)}}return ct.isArray(n)?n.forEach(a):a(n),i}clear(n){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const a=t[r];(!n||qw(this,this[a],a,n,!0))&&(delete this[a],i=!0)}return i}normalize(n){const t=this,r={};return ct.forEach(this,(i,a)=>{const s=ct.findKey(r,a);if(s){t[s]=dx(i),delete t[a];return}const l=n?Tle(a):String(a).trim();l!==a&&delete t[a],t[l]=dx(i),r[l]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const t=Object.create(null);return ct.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=n&&ct.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,t])=>n+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...t){const r=new this(n);return t.forEach(i=>r.set(i)),r}static accessor(n){const t=(this[WN]=this[WN]={accessors:{}}).accessors,r=this.prototype;function i(a){const s=I1(a);t[s]||(Ole(r,a),t[s]=!0)}return ct.isArray(n)?n.forEach(i):i(n),this}}xo.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ct.reduceDescriptors(xo.prototype,({value:e},n)=>{let t=n[0].toUpperCase()+n.slice(1);return{get:()=>e,set(r){this[t]=r}}});ct.freezeMethods(xo);function Bw(e,n){const t=this||ab,r=n||t,i=xo.from(r.headers);let a=r.data;return ct.forEach(e,function(s){a=s.call(t,a,i.normalize(),n?n.status:void 0)}),i.normalize(),a}function oL(e){return!!(e&&e.__CANCEL__)}function xm(e,n,t){jn.call(this,e??"canceled",jn.ERR_CANCELED,n,t),this.name="CanceledError"}ct.inherits(xm,jn,{__CANCEL__:!0});function lL(e,n,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?e(t):n(new jn("Request failed with status code "+t.status,[jn.ERR_BAD_REQUEST,jn.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function Dle(e){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}function Ile(e,n){e=e||10;const t=new Array(e),r=new Array(e);let i=0,a=0,s;return n=n!==void 0?n:1e3,function(l){const u=Date.now(),d=r[a];s||(s=u),t[i]=l,r[i]=u;let f=a,m=0;for(;f!==i;)m+=t[f++],f=f%e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),u-s<n)return;const b=d&&u-d;return b?Math.round(m*1e3/b):void 0}}function Lle(e,n){let t=0,r=1e3/n,i,a;const s=(l,u=Date.now())=>{t=u,i=null,a&&(clearTimeout(a),a=null),e.apply(null,l)};return[(...l)=>{const u=Date.now(),d=u-t;d>=r?s(l,u):(i=l,a||(a=setTimeout(()=>{a=null,s(i)},r-d)))},()=>i&&s(i)]}const Kx=(e,n,t=3)=>{let r=0;const i=Ile(50,250);return Lle(a=>{const s=a.loaded,l=a.lengthComputable?a.total:void 0,u=s-r,d=i(u),f=s<=l;r=s;const m={loaded:s,total:l,progress:l?s/l:void 0,bytes:u,rate:d||void 0,estimated:d&&l&&f?(l-s)/d:void 0,event:a,lengthComputable:l!=null,[n?"download":"upload"]:!0};e(m)},t)},VN=(e,n)=>{const t=e!=null;return[r=>n[0]({lengthComputable:t,total:e,loaded:r}),n[1]]},YN=e=>(...n)=>ct.asap(()=>e(...n)),Rle=zs.hasStandardBrowserEnv?((e,n)=>t=>(t=new URL(t,zs.origin),e.protocol===t.protocol&&e.host===t.host&&(n||e.port===t.port)))(new URL(zs.origin),zs.navigator&&/(msie|trident)/i.test(zs.navigator.userAgent)):()=>!0,Mle=zs.hasStandardBrowserEnv?{write(e,n,t,r,i,a){const s=[e+"="+encodeURIComponent(n)];ct.isNumber(t)&&s.push("expires="+new Date(t).toGMTString()),ct.isString(r)&&s.push("path="+r),ct.isString(i)&&s.push("domain="+i),a===!0&&s.push("secure"),document.cookie=s.join("; ")},read(e){const n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Fle(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Ple(e,n){return n?e.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):e}function uL(e,n){return e&&!Fle(n)?Ple(e,n):n}const GN=e=>e instanceof xo?{...e}:e;function hp(e,n){n=n||{};const t={};function r(d,f,m,b){return ct.isPlainObject(d)&&ct.isPlainObject(f)?ct.merge.call({caseless:b},d,f):ct.isPlainObject(f)?ct.merge({},f):ct.isArray(f)?f.slice():f}function i(d,f,m,b){if(ct.isUndefined(f)){if(!ct.isUndefined(d))return r(void 0,d,m,b)}else return r(d,f,m,b)}function a(d,f){if(!ct.isUndefined(f))return r(void 0,f)}function s(d,f){if(ct.isUndefined(f)){if(!ct.isUndefined(d))return r(void 0,d)}else return r(void 0,f)}function l(d,f,m){if(m in n)return r(d,f);if(m in e)return r(void 0,d)}const u={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:l,headers:(d,f,m)=>i(GN(d),GN(f),m,!0)};return ct.forEach(Object.keys(Object.assign({},e,n)),function(d){const f=u[d]||i,m=f(e[d],n[d],d);ct.isUndefined(m)&&f!==l||(t[d]=m)}),t}const cL=e=>{const n=hp({},e);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:a,headers:s,auth:l}=n;n.headers=s=xo.from(s),n.url=iL(uL(n.baseURL,n.url),e.params,e.paramsSerializer),l&&s.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let u;if(ct.isFormData(t)){if(zs.hasStandardBrowserEnv||zs.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((u=s.getContentType())!==!1){const[d,...f]=u?u.split(";").map(m=>m.trim()).filter(Boolean):[];s.setContentType([d||"multipart/form-data",...f].join("; "))}}if(zs.hasStandardBrowserEnv&&(r&&ct.isFunction(r)&&(r=r(n)),r||r!==!1&&Rle(n.url))){const d=i&&a&&Mle.read(a);d&&s.set(i,d)}return n},zle=typeof XMLHttpRequest<"u",qle=zle&&function(e){return new Promise(function(n,t){const r=cL(e);let i=r.data;const a=xo.from(r.headers).normalize();let{responseType:s,onUploadProgress:l,onDownloadProgress:u}=r,d,f,m,b,g;function x(){b&&b(),g&&g(),r.cancelToken&&r.cancelToken.unsubscribe(d),r.signal&&r.signal.removeEventListener("abort",d)}let y=new XMLHttpRequest;y.open(r.method.toUpperCase(),r.url,!0),y.timeout=r.timeout;function A(){if(!y)return;const C=xo.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),j={data:!s||s==="text"||s==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:C,config:e,request:y};lL(function(F){n(F),x()},function(F){t(F),x()},j),y=null}"onloadend"in y?y.onloadend=A:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(A)},y.onabort=function(){y&&(t(new jn("Request aborted",jn.ECONNABORTED,e,y)),y=null)},y.onerror=function(){t(new jn("Network Error",jn.ERR_NETWORK,e,y)),y=null},y.ontimeout=function(){let C=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const j=r.transitional||aL;r.timeoutErrorMessage&&(C=r.timeoutErrorMessage),t(new jn(C,j.clarifyTimeoutError?jn.ETIMEDOUT:jn.ECONNABORTED,e,y)),y=null},i===void 0&&a.setContentType(null),"setRequestHeader"in y&&ct.forEach(a.toJSON(),function(C,j){y.setRequestHeader(j,C)}),ct.isUndefined(r.withCredentials)||(y.withCredentials=!!r.withCredentials),s&&s!=="json"&&(y.responseType=r.responseType),u&&([m,g]=Kx(u,!0),y.addEventListener("progress",m)),l&&y.upload&&([f,b]=Kx(l),y.upload.addEventListener("progress",f),y.upload.addEventListener("loadend",b)),(r.cancelToken||r.signal)&&(d=C=>{y&&(t(!C||C.type?new xm(null,e,y):C),y.abort(),y=null)},r.cancelToken&&r.cancelToken.subscribe(d),r.signal&&(r.signal.aborted?d():r.signal.addEventListener("abort",d)));const w=Dle(r.url);if(w&&zs.protocols.indexOf(w)===-1){t(new jn("Unsupported protocol "+w+":",jn.ERR_BAD_REQUEST,e));return}y.send(i||null)})},Ble=(e,n)=>{const{length:t}=e=e?e.filter(Boolean):[];if(n||t){let r=new AbortController,i;const a=function(d){if(!i){i=!0,l();const f=d instanceof Error?d:this.reason;r.abort(f instanceof jn?f:new xm(f instanceof Error?f.message:f))}};let s=n&&setTimeout(()=>{s=null,a(new jn(`timeout ${n} of ms exceeded`,jn.ETIMEDOUT))},n);const l=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(a):d.removeEventListener("abort",a)}),e=null)};e.forEach(d=>d.addEventListener("abort",a));const{signal:u}=r;return u.unsubscribe=()=>ct.asap(l),u}},$le=function*(e,n){let t=e.byteLength;if(t<n){yield e;return}let r=0,i;for(;r<t;)i=r+n,yield e.slice(r,i),r=i},Ule=async function*(e,n){for await(const t of Hle(e))yield*$le(t,n)},Hle=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const n=e.getReader();try{for(;;){const{done:t,value:r}=await n.read();if(t)break;yield r}}finally{await n.cancel()}},QN=(e,n,t,r)=>{const i=Ule(e,n);let a=0,s,l=u=>{s||(s=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:d,value:f}=await i.next();if(d){l(),u.close();return}let m=f.byteLength;if(t){let b=a+=m;t(b)}u.enqueue(new Uint8Array(f))}catch(d){throw l(d),d}},cancel(u){return l(u),i.return()}},{highWaterMark:2})},r2=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",dL=r2&&typeof ReadableStream=="function",Wle=r2&&(typeof TextEncoder=="function"?(e=>n=>e.encode(n))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),fL=(e,...n)=>{try{return!!e(...n)}catch{return!1}},Vle=dL&&fL(()=>{let e=!1;const n=new Request(zs.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!n}),KN=64*1024,y6=dL&&fL(()=>ct.isReadableStream(new Response("").body)),Xx={stream:y6&&(e=>e.body)};r2&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(n=>{!Xx[n]&&(Xx[n]=ct.isFunction(e[n])?t=>t[n]():(t,r)=>{throw new jn(`Response type '${n}' is not supported`,jn.ERR_NOT_SUPPORT,r)})})})(new Response);const Yle=async e=>{if(e==null)return 0;if(ct.isBlob(e))return e.size;if(ct.isSpecCompliantForm(e))return(await new Request(zs.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(ct.isArrayBufferView(e)||ct.isArrayBuffer(e))return e.byteLength;if(ct.isURLSearchParams(e)&&(e=e+""),ct.isString(e))return(await Wle(e)).byteLength},Gle=async(e,n)=>ct.toFiniteNumber(e.getContentLength())??Yle(n),Qle=r2&&(async e=>{let{url:n,method:t,data:r,signal:i,cancelToken:a,timeout:s,onDownloadProgress:l,onUploadProgress:u,responseType:d,headers:f,withCredentials:m="same-origin",fetchOptions:b}=cL(e);d=d?(d+"").toLowerCase():"text";let g=Ble([i,a&&a.toAbortSignal()],s),x;const y=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let A;try{if(u&&Vle&&t!=="get"&&t!=="head"&&(A=await Gle(f,r))!==0){let M=new Request(n,{method:"POST",body:r,duplex:"half"}),z;if(ct.isFormData(r)&&(z=M.headers.get("content-type"))&&f.setContentType(z),M.body){const[_,L]=VN(A,Kx(YN(u)));r=QN(M.body,KN,_,L)}}ct.isString(m)||(m=m?"include":"omit");const w="credentials"in Request.prototype;x=new Request(n,{...b,signal:g,method:t.toUpperCase(),headers:f.normalize().toJSON(),body:r,duplex:"half",credentials:w?m:void 0});let C=await fetch(x);const j=y6&&(d==="stream"||d==="response");if(y6&&(l||j&&y)){const M={};["status","statusText","headers"].forEach($=>{M[$]=C[$]});const z=ct.toFiniteNumber(C.headers.get("content-length")),[_,L]=l&&VN(z,Kx(YN(l),!0))||[];C=new Response(QN(C.body,KN,_,()=>{L&&L(),y&&y()}),M)}d=d||"text";let F=await Xx[ct.findKey(Xx,d)||"text"](C,e);return!j&&y&&y(),await new Promise((M,z)=>{lL(M,z,{data:F,headers:xo.from(C.headers),status:C.status,statusText:C.statusText,config:e,request:x})})}catch(w){throw y&&y(),w&&w.name==="TypeError"&&/fetch/i.test(w.message)?Object.assign(new jn("Network Error",jn.ERR_NETWORK,e,x),{cause:w.cause||w}):jn.from(w,w&&w.code,e,x)}}),x6={http:cle,xhr:qle,fetch:Qle};ct.forEach(x6,(e,n)=>{if(e){try{Object.defineProperty(e,"name",{value:n})}catch{}Object.defineProperty(e,"adapterName",{value:n})}});const XN=e=>`- ${e}`,Kle=e=>ct.isFunction(e)||e===null||e===!1,hL={getAdapter:e=>{e=ct.isArray(e)?e:[e];const{length:n}=e;let t,r;const i={};for(let a=0;a<n;a++){t=e[a];let s;if(r=t,!Kle(t)&&(r=x6[(s=String(t)).toLowerCase()],r===void 0))throw new jn(`Unknown adapter '${s}'`);if(r)break;i[s||"#"+a]=r}if(!r){const a=Object.entries(i).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let s=n?a.length>1?`since :
`+a.map(XN).join(`
`):" "+XN(a[0]):"as no adapter specified";throw new jn("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return r},adapters:x6};function $w(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new xm(null,e)}function ZN(e){return $w(e),e.headers=xo.from(e.headers),e.data=Bw.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),hL.getAdapter(e.adapter||ab.adapter)(e).then(function(n){return $w(e),n.data=Bw.call(e,e.transformResponse,n),n.headers=xo.from(n.headers),n},function(n){return oL(n)||($w(e),n&&n.response&&(n.response.data=Bw.call(e,e.transformResponse,n.response),n.response.headers=xo.from(n.response.headers))),Promise.reject(n)})}const pL="1.7.9",i2={};["object","boolean","number","function","string","symbol"].forEach((e,n)=>{i2[e]=function(t){return typeof t===e||"a"+(n<1?"n ":" ")+e}});const JN={};i2.transitional=function(e,n,t){function r(i,a){return"[Axios v"+pL+"] Transitional option '"+i+"'"+a+(t?". "+t:"")}return(i,a,s)=>{if(e===!1)throw new jn(r(a," has been removed"+(n?" in "+n:"")),jn.ERR_DEPRECATED);return n&&!JN[a]&&(JN[a]=!0,console.warn(r(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,a,s):!0}};i2.spelling=function(e){return(n,t)=>(console.warn(`${t} is likely a misspelling of ${e}`),!0)};function Xle(e,n,t){if(typeof e!="object")throw new jn("options must be an object",jn.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const a=r[i],s=n[a];if(s){const l=e[a],u=l===void 0||s(l,a,e);if(u!==!0)throw new jn("option "+a+" must be "+u,jn.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new jn("Unknown option "+a,jn.ERR_BAD_OPTION)}}const fx={assertOptions:Xle,validators:i2},rc=fx.validators;let rp=class{constructor(n){this.defaults=n,this.interceptors={request:new HN,response:new HN}}async request(n,t){try{return await this._request(n,t)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(n,t){typeof n=="string"?(t=t||{},t.url=n):t=n||{},t=hp(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:a}=t;r!==void 0&&fx.assertOptions(r,{silentJSONParsing:rc.transitional(rc.boolean),forcedJSONParsing:rc.transitional(rc.boolean),clarifyTimeoutError:rc.transitional(rc.boolean)},!1),i!=null&&(ct.isFunction(i)?t.paramsSerializer={serialize:i}:fx.assertOptions(i,{encode:rc.function,serialize:rc.function},!0)),fx.assertOptions(t,{baseUrl:rc.spelling("baseURL"),withXsrfToken:rc.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=a&&ct.merge(a.common,a[t.method]);a&&ct.forEach(["delete","get","head","post","put","patch","common"],x=>{delete a[x]}),t.headers=xo.concat(s,a);const l=[];let u=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(t)===!1||(u=u&&x.synchronous,l.unshift(x.fulfilled,x.rejected))});const d=[];this.interceptors.response.forEach(function(x){d.push(x.fulfilled,x.rejected)});let f,m=0,b;if(!u){const x=[ZN.bind(this),void 0];for(x.unshift.apply(x,l),x.push.apply(x,d),b=x.length,f=Promise.resolve(t);m<b;)f=f.then(x[m++],x[m++]);return f}b=l.length;let g=t;for(m=0;m<b;){const x=l[m++],y=l[m++];try{g=x(g)}catch(A){y.call(this,A);break}}try{f=ZN.call(this,g)}catch(x){return Promise.reject(x)}for(m=0,b=d.length;m<b;)f=f.then(d[m++],d[m++]);return f}getUri(n){n=hp(this.defaults,n);const t=uL(n.baseURL,n.url);return iL(t,n.params,n.paramsSerializer)}};ct.forEach(["delete","get","head","options"],function(e){rp.prototype[e]=function(n,t){return this.request(hp(t||{},{method:e,url:n,data:(t||{}).data}))}});ct.forEach(["post","put","patch"],function(e){function n(t){return function(r,i,a){return this.request(hp(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:i}))}}rp.prototype[e]=n(),rp.prototype[e+"Form"]=n(!0)});let Zle=class mL{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(i){t=i});const r=this;this.promise.then(i=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](i);r._listeners=null}),this.promise.then=i=>{let a;const s=new Promise(l=>{r.subscribe(l),a=l}).then(i);return s.cancel=function(){r.unsubscribe(a)},s},n(function(i,a,s){r.reason||(r.reason=new xm(i,a,s),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const t=this._listeners.indexOf(n);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const n=new AbortController,t=r=>{n.abort(r)};return this.subscribe(t),n.signal.unsubscribe=()=>this.unsubscribe(t),n.signal}static source(){let n;return{token:new mL(function(t){n=t}),cancel:n}}};function Jle(e){return function(n){return e.apply(null,n)}}function eue(e){return ct.isObject(e)&&e.isAxiosError===!0}const v6={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(v6).forEach(([e,n])=>{v6[n]=e});function gL(e){const n=new rp(e),t=VI(rp.prototype.request,n);return ct.extend(t,rp.prototype,n,{allOwnKeys:!0}),ct.extend(t,n,null,{allOwnKeys:!0}),t.create=function(r){return gL(hp(e,r))},t}const Pi=gL(ab);Pi.Axios=rp;Pi.CanceledError=xm;Pi.CancelToken=Zle;Pi.isCancel=oL;Pi.VERSION=pL;Pi.toFormData=n2;Pi.AxiosError=jn;Pi.Cancel=Pi.CanceledError;Pi.all=function(e){return Promise.all(e)};Pi.spread=Jle;Pi.isAxiosError=eue;Pi.mergeConfig=hp;Pi.AxiosHeaders=xo;Pi.formToJSON=e=>sL(ct.isHTMLForm(e)?new FormData(e):e);Pi.getAdapter=hL.getAdapter;Pi.HttpStatusCode=v6;Pi.default=Pi;const tue=async e=>{const n=new FormData;n.append("chatbot_id",e);try{const t=await Pi.post("https://rag-flask-api.onrender.com/start_conversation",n,{headers:{"Content-Type":"multipart/form-data"}}),{conversation_id:r,intro_message:i}=t.data;if(!r)throw new Error("Failed to retrieve conversation ID from server.");return{conversationId:r,introMessage:i}}catch(t){throw console.error("Error starting conversation:",t),t}},nue=async(e,n,t)=>{const r=new FormData;r.append("chatbot_id",e),r.append("conversation_id",n),r.append("question",t);try{return(await Pi.post("https://rag-flask-api.onrender.com/ask",r,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(i){throw console.error("Error sending message:",i),i}},rue=async(e,n)=>{const t=new FormData;t.append("chatbot_id",e),t.append("conversation_id",n);try{await Pi.post("https://rag-flask-api.onrender.com/end_conversation",t,{headers:{"Content-Type":"multipart/form-data"}})}catch(r){throw console.error("Error ending conversation:",r),r}},iue=async e=>{try{const n=await Pi.get(`https://rag-flask-api.onrender.com/summary/${e}`);if(n.status===200&&n.data.summary)return n.data.summary;throw new Error("Summary not found for this chatbot.")}catch(n){throw console.error("Error fetching summary:",n),n}},aue=({chatbotId:e,open:n,onClose:t})=>{const[r,i]=X.useState(null),[a,s]=X.useState(!1),[l,u]=X.useState(null),d=async()=>{s(!0),u(null);try{const f=await iue(e);i(f)}catch(f){u(f.message||"Failed to fetch summary. Please try again.")}finally{s(!1)}};return X.useEffect(()=>{n&&d()},[n]),xn.jsx(vx,{open:n,onClose:t,"aria-labelledby":"summary-modal-title","aria-describedby":"summary-modal-description",children:xn.jsxs(de,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",maxWidth:600,bgcolor:"background.paper",borderRadius:4,boxShadow:24,p:4},children:[xn.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[xn.jsx(he,{id:"summary-modal-title",variant:"h6",component:"h2",children:"Document Summary"}),xn.jsx(_n,{onClick:t,children:xn.jsx(Coe,{})})]}),a?xn.jsx(de,{sx:{display:"flex",justifyContent:"center",my:4},children:xn.jsx(Zr,{})}):l?xn.jsx(he,{color:"error",children:l}):xn.jsx(de,{sx:{maxHeight:300,overflowY:"auto",padding:2,border:"1px solid #ddd",borderRadius:2,backgroundColor:"#f9f9f9"},children:xn.jsx(MA,{children:r})}),xn.jsx(Ct,{variant:"contained",sx:{mt:2},onClick:t,fullWidth:!0,children:"Close"})]})})},sue=X.forwardRef(({chatbotId:e,onConversationStart:n},t)=>{const[r,i]=X.useState(!1),[a,s]=X.useState(()=>{const z=localStorage.getItem("responses");return z?JSON.parse(z):[]}),[l,u]=X.useState(()=>localStorage.getItem("conversationId")||null),[d,f]=X.useState(!1),[m,b]=X.useState(null),[g,x]=X.useState(!1),y=jd("(max-width:600px)"),A=jd("(min-width:601px) and (max-width:960px)"),w=X.useRef(null);X.useEffect(()=>{typeof n=="function"&&l&&n(l)},[l,n]),X.useEffect(()=>{w.current&&w.current.scrollIntoView({behavior:"smooth"})},[a]);const C=async()=>{i(z=>!z),!r&&!l&&!d&&j()},j=async()=>{if(!l){f(!0),b(null);try{const z=await tue(e),{conversationId:_,introMessage:L}=z;u(_),localStorage.setItem("conversationId",_),s($=>{const Z=[...$,{id:"intro",sender:"chatbot",text:L}];return localStorage.setItem("responses",JSON.stringify(Z)),Z})}catch(z){console.error("Error starting conversation:",z),b("Failed to start a conversation. Please try again.")}finally{f(!1)}}},F=async(z,_=l)=>{f(!0),b(null);try{const L=await nue(e,_,z);s($=>{const Z=[...$,{question:z,answer:L.answer}];return localStorage.setItem("responses",JSON.stringify(Z)),Z})}catch(L){console.error("Error sending message:",L),b("Failed to send the message. Please try again.")}finally{f(!1)}},M=async()=>{f(!0),b(null);try{l&&await rue(e,l),u(null),s([]),localStorage.removeItem("conversationId"),localStorage.removeItem("responses")}catch(z){console.error("Error ending conversation:",z),b("Failed to end the conversation. Please try again.")}finally{f(!1)}};return X.useImperativeHandle(t,()=>({endConversation:M})),xn.jsx(xn.Fragment,{children:r?xn.jsxs(gn,{elevation:3,sx:Pw.chatContainer(y,A),children:[xn.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[xn.jsx(he,{sx:Pw.chatHeader,children:"PAT (Personalized Academic Tutor)"}),xn.jsx(_n,{onClick:C,sx:{color:"black"},children:"X"})]}),xn.jsx(voe,{responses:a}),xn.jsx("div",{ref:w}),d&&xn.jsx(Qo,{sx:{position:"absolute",top:0,left:0,width:"100%"}}),m&&xn.jsx(he,{color:"error",children:m}),xn.jsx(woe,{onSendMessage:F,onStartConversation:j,onEndConversation:M,conversationId:l}),xn.jsx(Ct,{variant:"outlined",onClick:()=>x(!0),sx:{mt:2},children:"View Summary"}),xn.jsx(aue,{chatbotId:e,open:g,onClose:()=>x(!1)})]}):xn.jsx(_n,{onClick:C,sx:Pw.chatToggleButton,children:xn.jsx(xoe,{fontSize:"large"})})})});class oue extends X.Component{constructor(n){super(n),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(n){console.error("Error caught by ErrorBoundary:",n)}render(){return this.state.hasError?h.jsx("h2",{children:"Something went wrong while loading the Chatbot."}):this.props.children}}const bL=X.forwardRef(({chatbotId:e},n)=>{const{userDetails:t}=zi(),r=X.useRef(null),[i,a]=X.useState(!1),s=async l=>{if(console.log(` Chatbot started. Chatbot ID: ${e}, Conversation ID: ${l}`),t!=null&&t.uid)try{await oT(un(ET,"conversations",l),{conversationId:l,chatbotId:e,userId:t.uid,startedAt:new Date().toISOString()},{merge:!0}),console.log("Conversation saved to Firestore")}catch(u){console.error("Failed to save conversation:",u)}};return X.useImperativeHandle(n,()=>({endConversation:()=>{r.current&&(console.log("Ending chatbot conversation..."),r.current.endConversation())}})),h.jsx(de,{sx:{position:"relative",display:"flex",flexDirection:"column",alignItems:"flex-end"},children:h.jsxs(de,{sx:{background:i?"rgba(255, 255, 255, 0.95)":"#0B53C0",borderRadius:4,boxShadow:i?"0 8px 32px rgba(0, 0, 0, 0.12)":"0 2px 8px rgba(0, 0, 0, 0.15)",overflow:"hidden",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:i?"1px solid #e0e0e0":"none",minWidth:i?400:"auto",maxWidth:i?450:"auto"},children:[h.jsxs(Ct,{variant:"text",onClick:()=>a(!i),sx:{background:i?"#0B53C0 !important":"transparent !important",backgroundColor:i?"#0B53C0 !important":"transparent !important",color:"white !important",px:2.5,py:1.5,borderRadius:i?"16px 16px 0 0":"12px",textTransform:"none",display:"flex",alignItems:"center",gap:1.5,minWidth:"auto",width:"100%",justifyContent:"flex-start","&:hover":{background:"#064a9e !important",backgroundColor:"#064a9e !important",boxShadow:i?"none":"0px 4px 12px rgba(11, 83, 192, 0.3)"},"&:active":{background:"#064a9e !important",backgroundColor:"#064a9e !important"},"&:focus":{background:i?"#0B53C0 !important":"#064a9e !important",backgroundColor:i?"#0B53C0 !important":"#064a9e !important"},"&.Mui-focusVisible":{background:i?"#0B53C0 !important":"#064a9e !important",backgroundColor:i?"#0B53C0 !important":"#064a9e !important"},transition:"all 0.2s ease-in-out"},children:[h.jsx(eT,{sx:{fontSize:"1.5rem",color:"white !important"}}),h.jsxs(de,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",lineHeight:1,flex:1},children:[h.jsx(he,{variant:"body1",sx:{fontFamily:"Staatliches, sans-serif",fontSize:"1rem",fontWeight:"bold",mb:0,lineHeight:1.1,color:"white !important"},children:"Chat with PAT"}),h.jsx(he,{variant:"caption",sx:{fontFamily:"Gabarito, sans-serif",fontSize:"0.75rem",opacity:.9,lineHeight:1,mt:.2,color:"white !important"},children:"AI Tutor"})]}),i?h.jsx(bx,{sx:{fontSize:"1.2rem",color:"white !important"}}):h.jsx(Nl,{sx:{fontSize:"1.2rem",color:"white !important"}})]}),h.jsx(gx,{in:i,timeout:300,easing:{enter:"cubic-bezier(0.4, 0, 0.2, 1)",exit:"cubic-bezier(0.4, 0, 0.6, 1)"},children:h.jsx(de,{sx:{background:"white",borderRadius:"0 0 16px 16px",overflow:"hidden"},children:h.jsx(oue,{children:h.jsx(sue,{ref:r,chatbotId:e,onConversationStart:s})})})})]})})});bL.displayName="ChatbotWrapper";const L1="ce5f7921-a3a0-4ea7-b95f-10fe41becda5",lue=()=>{const[e,n]=X.useState(L1),[t]=Pg(),r=X.useRef(null);return X.useEffect(()=>{const i=t.get("material");if(!i){e!==L1&&n(L1);return}(async()=>{var f;console.log("Fetching chatbot ID for material:",i);const s=Xn(),l=ln(s,"chatbots"),u=Ol(l,Ri("material.id","==",i)),d=await Ci(u);if(d.empty)console.log(` No chatbot found for material ${i}, using default:`,L1),n(L1);else{const m=d.docs[0].data();console.log(` Found chatbot for material ${i}:`,m.chatbotId),m.chatbotId!==e&&((f=r.current)==null||f.endConversation()),n(m.chatbotId)}})()},[t,e]),h.jsx(de,{sx:{position:"fixed",bottom:16,right:16,zIndex:1100},children:h.jsx(bL,{ref:r,chatbotId:e})})};function sb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Hd(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var n=e.default;if(typeof n=="function"){var t=function r(){return this instanceof r?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};t.prototype=n.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),t}var ej={exports:{}},R1={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tj;function uue(){if(tj)return R1;tj=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function t(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var l in i)l!=="key"&&(a[l]=i[l])}else a=i;return i=a.ref,{$$typeof:e,type:r,key:s,ref:i!==void 0?i:null,props:a}}return R1.Fragment=n,R1.jsx=t,R1.jsxs=t,R1}var nj;function ob(){return nj||(nj=1,ej.exports=uue()),ej.exports}var Qt=ob(),M1={},rj={exports:{}},ij;function vm(){return ij||(ij=1,function(e){function n(t){return t&&t.__esModule?t:{default:t}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(rj)),rj.exports}var aj={};function Vr(){return Vr=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Vr.apply(null,arguments)}function Lf(e){if(typeof e!="object"||e===null)return!1;const n=Object.getPrototypeOf(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function yL(e){if(X.isValidElement(e)||!Lf(e))return e;const n={};return Object.keys(e).forEach(t=>{n[t]=yL(e[t])}),n}function Tc(e,n,t={clone:!0}){const r=t.clone?Vr({},e):e;return Lf(e)&&Lf(n)&&Object.keys(n).forEach(i=>{X.isValidElement(n[i])?r[i]=n[i]:Lf(n[i])&&Object.prototype.hasOwnProperty.call(e,i)&&Lf(e[i])?r[i]=Tc(e[i],n[i],t):t.clone?r[i]=Lf(n[i])?yL(n[i]):n[i]:r[i]=n[i]}),r}const cue=Object.freeze(Object.defineProperty({__proto__:null,default:Tc,isPlainObject:Lf},Symbol.toStringTag,{value:"Module"}));function _g(e){let n="https://mui.com/production-error/?code="+e;for(let t=1;t<arguments.length;t+=1)n+="&args[]="+encodeURIComponent(arguments[t]);return"Minified MUI error #"+e+"; visit "+n+" for the full message."}const due=Object.freeze(Object.defineProperty({__proto__:null,default:_g},Symbol.toStringTag,{value:"Module"}));var sj={exports:{}},Ur={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oj;function fue(){if(oj)return Ur;oj=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),b=Symbol.for("react.view_transition"),g=Symbol.for("react.client.reference");function x(y){if(typeof y=="object"&&y!==null){var A=y.$$typeof;switch(A){case e:switch(y=y.type,y){case t:case i:case r:case u:case d:case b:return y;default:switch(y=y&&y.$$typeof,y){case s:case l:case m:case f:return y;case a:return y;default:return A}}case n:return A}}}return Ur.ContextConsumer=a,Ur.ContextProvider=s,Ur.Element=e,Ur.ForwardRef=l,Ur.Fragment=t,Ur.Lazy=m,Ur.Memo=f,Ur.Portal=n,Ur.Profiler=i,Ur.StrictMode=r,Ur.Suspense=u,Ur.SuspenseList=d,Ur.isContextConsumer=function(y){return x(y)===a},Ur.isContextProvider=function(y){return x(y)===s},Ur.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===e},Ur.isForwardRef=function(y){return x(y)===l},Ur.isFragment=function(y){return x(y)===t},Ur.isLazy=function(y){return x(y)===m},Ur.isMemo=function(y){return x(y)===f},Ur.isPortal=function(y){return x(y)===n},Ur.isProfiler=function(y){return x(y)===i},Ur.isStrictMode=function(y){return x(y)===r},Ur.isSuspense=function(y){return x(y)===u},Ur.isSuspenseList=function(y){return x(y)===d},Ur.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===t||y===i||y===r||y===u||y===d||typeof y=="object"&&y!==null&&(y.$$typeof===m||y.$$typeof===f||y.$$typeof===s||y.$$typeof===a||y.$$typeof===l||y.$$typeof===g||y.getModuleId!==void 0)},Ur.typeOf=x,Ur}var lj;function hue(){return lj||(lj=1,sj.exports=fue()),sj.exports}var uj=hue();const pue=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function xL(e){const n=`${e}`.match(pue);return n&&n[1]||""}function vL(e,n=""){return e.displayName||e.name||xL(e)||n}function cj(e,n,t){const r=vL(n);return e.displayName||(r!==""?`${t}(${r})`:t)}function mue(e){if(e!=null){if(typeof e=="string")return e;if(typeof e=="function")return vL(e,"Component");if(typeof e=="object")switch(e.$$typeof){case uj.ForwardRef:return cj(e,e.render,"ForwardRef");case uj.Memo:return cj(e,e.type,"memo");default:return}}}const gue=Object.freeze(Object.defineProperty({__proto__:null,default:mue,getFunctionName:xL},Symbol.toStringTag,{value:"Module"}));function th(e){if(typeof e!="string")throw new Error(_g(7));return e.charAt(0).toUpperCase()+e.slice(1)}const bue=Object.freeze(Object.defineProperty({__proto__:null,default:th},Symbol.toStringTag,{value:"Module"}));function yue(...e){return e.reduce((n,t)=>t==null?n:function(...r){n.apply(this,r),t.apply(this,r)},()=>{})}function xue(e,n=166){let t;function r(...i){const a=()=>{e.apply(this,i)};clearTimeout(t),t=setTimeout(a,n)}return r.clear=()=>{clearTimeout(t)},r}function vue(e,n){return()=>null}function wue(e,n){var t,r;return X.isValidElement(e)&&n.indexOf((t=e.type.muiName)!=null?t:(r=e.type)==null||(r=r._payload)==null||(r=r.value)==null?void 0:r.muiName)!==-1}function wL(e){return e&&e.ownerDocument||document}function Sue(e){return wL(e).defaultView||window}function Aue(e,n){return()=>null}function SL(e,n){typeof e=="function"?e(n):e&&(e.current=n)}const AL=typeof window<"u"?X.useLayoutEffect:X.useEffect;let dj=0;function Cue(e){const[n,t]=X.useState(e),r=e||n;return X.useEffect(()=>{n==null&&(dj+=1,t(`mui-${dj}`))},[n]),r}const fj=X.useId;function kue(e){if(fj!==void 0){const n=fj();return e??n}return Cue(e)}function Eue(e,n,t,r,i){return null}function _ue({controlled:e,default:n,name:t,state:r="value"}){const{current:i}=X.useRef(e!==void 0),[a,s]=X.useState(n),l=i?e:a,u=X.useCallback(d=>{i||s(d)},[]);return[l,u]}function Nue(e){const n=X.useRef(e);return AL(()=>{n.current=e}),X.useRef((...t)=>(0,n.current)(...t)).current}function jue(...e){return X.useMemo(()=>e.every(n=>n==null)?null:n=>{e.forEach(t=>{SL(t,n)})},e)}class QA{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new QA}start(n,t){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,t()},n)}}let a2=!0,w6=!1;const Tue=new QA,Oue={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function Due(e){const{type:n,tagName:t}=e;return!!(t==="INPUT"&&Oue[n]&&!e.readOnly||t==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function Iue(e){e.metaKey||e.altKey||e.ctrlKey||(a2=!0)}function Uw(){a2=!1}function Lue(){this.visibilityState==="hidden"&&w6&&(a2=!0)}function Rue(e){e.addEventListener("keydown",Iue,!0),e.addEventListener("mousedown",Uw,!0),e.addEventListener("pointerdown",Uw,!0),e.addEventListener("touchstart",Uw,!0),e.addEventListener("visibilitychange",Lue,!0)}function Mue(e){const{target:n}=e;try{return n.matches(":focus-visible")}catch{}return a2||Due(n)}function Fue(){const e=X.useCallback(i=>{i!=null&&Rue(i.ownerDocument)},[]),n=X.useRef(!1);function t(){return n.current?(w6=!0,Tue.start(100,()=>{w6=!1}),n.current=!1,!0):!1}function r(i){return Mue(i)?(n.current=!0,!0):!1}return{isFocusVisibleRef:n,onFocus:r,onBlur:t,ref:e}}function S6(e,n){const t=Vr({},n);return Object.keys(e).forEach(r=>{if(r.toString().match(/^(components|slots)$/))t[r]=Vr({},e[r],t[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=e[r]||{},a=n[r];t[r]={},!a||!Object.keys(a)?t[r]=i:!i||!Object.keys(i)?t[r]=a:(t[r]=Vr({},a),Object.keys(i).forEach(s=>{t[r][s]=S6(i[s],a[s])}))}else t[r]===void 0&&(t[r]=e[r])}),t}function Pue(e,n,t=void 0){const r={};return Object.keys(e).forEach(i=>{r[i]=e[i].reduce((a,s)=>{if(s){const l=n(s);l!==""&&a.push(l),t&&t[s]&&a.push(t[s])}return a},[]).join(" ")}),r}const hj=e=>e,zue=()=>{let e=hj;return{configure(n){e=n},generate(n){return e(n)},reset(){e=hj}}},CL=zue(),que={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function kL(e,n,t="Mui"){const r=que[n];return r?`${t}-${r}`:`${CL.generate(e)}-${n}`}function Bue(e,n,t="Mui"){const r={};return n.forEach(i=>{r[i]=kL(e,i,t)}),r}function $ue(e,n=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER){return Math.max(n,Math.min(e,t))}const Uue=Object.freeze(Object.defineProperty({__proto__:null,default:$ue},Symbol.toStringTag,{value:"Module"}));function uh(e,n){if(e==null)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(n.indexOf(r)!==-1)continue;t[r]=e[r]}return t}function EL(e){var n,t,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(n=0;n<i;n++)e[n]&&(t=EL(e[n]))&&(r&&(r+=" "),r+=t)}else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function Hue(){for(var e,n,t=0,r="",i=arguments.length;t<i;t++)(e=arguments[t])&&(n=EL(e))&&(r&&(r+=" "),r+=n);return r}const Wue=X.createContext(void 0);function Vue(e){const{theme:n,name:t,props:r}=e;if(!n||!n.components||!n.components[t])return r;const i=n.components[t];return i.defaultProps?S6(i.defaultProps,r):!i.styleOverrides&&!i.variants?S6(i,r):r}function Yue({props:e,name:n}){const t=X.useContext(Wue);return Vue({props:e,name:n,theme:{components:t}})}function Gue(e){return Yue(e)}var Ph={},pj={exports:{}},mj;function Que(){return mj||(mj=1,function(e){function n(){return e.exports=n=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)({}).hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},e.exports.__esModule=!0,e.exports.default=e.exports,n.apply(null,arguments)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(pj)),pj.exports}var gj={exports:{}},bj;function Kue(){return bj||(bj=1,function(e){function n(t,r){if(t==null)return{};var i={};for(var a in t)if({}.hasOwnProperty.call(t,a)){if(r.indexOf(a)!==-1)continue;i[a]=t[a]}return i}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(gj)),gj.exports}function Xue(e){for(var n=0,t,r=0,i=e.length;i>=4;++r,i-=4)t=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,n=(t&65535)*1540483477+((t>>>16)*59797<<16)^(n&65535)*1540483477+((n>>>16)*59797<<16);switch(i){case 3:n^=(e.charCodeAt(r+2)&255)<<16;case 2:n^=(e.charCodeAt(r+1)&255)<<8;case 1:n^=e.charCodeAt(r)&255,n=(n&65535)*1540483477+((n>>>16)*59797<<16)}return n^=n>>>13,n=(n&65535)*1540483477+((n>>>16)*59797<<16),((n^n>>>15)>>>0).toString(36)}var Zue={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function Jue(e){var n=Object.create(null);return function(t){return n[t]===void 0&&(n[t]=e(t)),n[t]}}var ece=/[A-Z]|^ms/g,tce=/_EMO_([^_]+?)_([^]*?)_EMO_/g,_L=function(e){return e.charCodeAt(1)===45},yj=function(e){return e!=null&&typeof e!="boolean"},Hw=Jue(function(e){return _L(e)?e:e.replace(ece,"-$&").toLowerCase()}),xj=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(tce,function(t,r,i){return qf={name:r,styles:i,next:qf},r})}return Zue[e]!==1&&!_L(e)&&typeof n=="number"&&n!==0?n+"px":n};function Zx(e,n,t){if(t==null)return"";var r=t;if(r.__emotion_styles!==void 0)return r;switch(typeof t){case"boolean":return"";case"object":{var i=t;if(i.anim===1)return qf={name:i.name,styles:i.styles,next:qf},i.name;var a=t;if(a.styles!==void 0){var s=a.next;if(s!==void 0)for(;s!==void 0;)qf={name:s.name,styles:s.styles,next:qf},s=s.next;var l=a.styles+";";return l}return nce(e,n,t)}}var u=t;return u}function nce(e,n,t){var r="";if(Array.isArray(t))for(var i=0;i<t.length;i++)r+=Zx(e,n,t[i])+";";else for(var a in t){var s=t[a];if(typeof s!="object"){var l=s;yj(l)&&(r+=Hw(a)+":"+xj(a,l)+";")}else if(Array.isArray(s)&&typeof s[0]=="string"&&n==null)for(var u=0;u<s.length;u++)yj(s[u])&&(r+=Hw(a)+":"+xj(a,s[u])+";");else{var d=Zx(e,n,s);switch(a){case"animation":case"animationName":{r+=Hw(a)+":"+d+";";break}default:r+=a+"{"+d+"}"}}}return r}var vj=/label:\s*([^\s;{]+)\s*(;|$)/g,qf;function rce(e,n,t){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,i="";qf=void 0;var a=e[0];if(a==null||a.raw===void 0)r=!1,i+=Zx(t,n,a);else{var s=a;i+=s[0]}for(var l=1;l<e.length;l++)if(i+=Zx(t,n,e[l]),r){var u=a;i+=u[l]}vj.lastIndex=0;for(var d="",f;(f=vj.exec(i))!==null;)d+="-"+f[1];var m=Xue(i)+d;return{name:m,styles:i,next:qf}}function ice(e){if(e.sheet)return e.sheet;for(var n=0;n<document.styleSheets.length;n++)if(document.styleSheets[n].ownerNode===e)return document.styleSheets[n]}function ace(e){var n=document.createElement("style");return n.setAttribute("data-emotion",e.key),e.nonce!==void 0&&n.setAttribute("nonce",e.nonce),n.appendChild(document.createTextNode("")),n.setAttribute("data-s",""),n}var sce=function(){function e(t){var r=this;this._insertTag=function(i){var a;r.tags.length===0?r.insertionPoint?a=r.insertionPoint.nextSibling:r.prepend?a=r.container.firstChild:a=r.before:a=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,a),r.tags.push(i)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var n=e.prototype;return n.hydrate=function(t){t.forEach(this._insertTag)},n.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(ace(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var i=ice(r);try{i.insertRule(t,i.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(t));this.ctr++},n.flush=function(){this.tags.forEach(function(t){var r;return(r=t.parentNode)==null?void 0:r.removeChild(t)}),this.tags=[],this.ctr=0},e}(),Rs="-ms-",Jx="-moz-",gr="-webkit-",NL="comm",KA="rule",XA="decl",oce="@import",jL="@keyframes",lce="@layer",uce=Math.abs,s2=String.fromCharCode,cce=Object.assign;function dce(e,n){return ms(e,0)^45?(((n<<2^ms(e,0))<<2^ms(e,1))<<2^ms(e,2))<<2^ms(e,3):0}function TL(e){return e.trim()}function fce(e,n){return(e=n.exec(e))?e[0]:e}function yr(e,n,t){return e.replace(n,t)}function A6(e,n){return e.indexOf(n)}function ms(e,n){return e.charCodeAt(n)|0}function Ng(e,n,t){return e.slice(n,t)}function cc(e){return e.length}function ZA(e){return e.length}function qy(e,n){return n.push(e),e}function hce(e,n){return e.map(n).join("")}var o2=1,um=1,OL=0,wo=0,Da=0,wm="";function l2(e,n,t,r,i,a,s){return{value:e,root:n,parent:t,type:r,props:i,children:a,line:o2,column:um,length:s,return:""}}function F1(e,n){return cce(l2("",null,null,"",null,null,0),e,{length:-e.length},n)}function pce(){return Da}function mce(){return Da=wo>0?ms(wm,--wo):0,um--,Da===10&&(um=1,o2--),Da}function Jo(){return Da=wo<OL?ms(wm,wo++):0,um++,Da===10&&(um=1,o2++),Da}function Oc(){return ms(wm,wo)}function hx(){return wo}function lb(e,n){return Ng(wm,e,n)}function jg(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function DL(e){return o2=um=1,OL=cc(wm=e),wo=0,[]}function IL(e){return wm="",e}function px(e){return TL(lb(wo-1,C6(e===91?e+2:e===40?e+1:e)))}function gce(e){for(;(Da=Oc())&&Da<33;)Jo();return jg(e)>2||jg(Da)>3?"":" "}function bce(e,n){for(;--n&&Jo()&&!(Da<48||Da>102||Da>57&&Da<65||Da>70&&Da<97););return lb(e,hx()+(n<6&&Oc()==32&&Jo()==32))}function C6(e){for(;Jo();)switch(Da){case e:return wo;case 34:case 39:e!==34&&e!==39&&C6(Da);break;case 40:e===41&&C6(e);break;case 92:Jo();break}return wo}function yce(e,n){for(;Jo()&&e+Da!==57&&!(e+Da===84&&Oc()===47););return"/*"+lb(n,wo-1)+"*"+s2(e===47?e:Jo())}function xce(e){for(;!jg(Oc());)Jo();return lb(e,wo)}function vce(e){return IL(mx("",null,null,null,[""],e=DL(e),0,[0],e))}function mx(e,n,t,r,i,a,s,l,u){for(var d=0,f=0,m=s,b=0,g=0,x=0,y=1,A=1,w=1,C=0,j="",F=i,M=a,z=r,_=j;A;)switch(x=C,C=Jo()){case 40:if(x!=108&&ms(_,m-1)==58){A6(_+=yr(px(C),"&","&\f"),"&\f")!=-1&&(w=-1);break}case 34:case 39:case 91:_+=px(C);break;case 9:case 10:case 13:case 32:_+=gce(x);break;case 92:_+=bce(hx()-1,7);continue;case 47:switch(Oc()){case 42:case 47:qy(wce(yce(Jo(),hx()),n,t),u);break;default:_+="/"}break;case 123*y:l[d++]=cc(_)*w;case 125*y:case 59:case 0:switch(C){case 0:case 125:A=0;case 59+f:w==-1&&(_=yr(_,/\f/g,"")),g>0&&cc(_)-m&&qy(g>32?Sj(_+";",r,t,m-1):Sj(yr(_," ","")+";",r,t,m-2),u);break;case 59:_+=";";default:if(qy(z=wj(_,n,t,d,f,i,l,j,F=[],M=[],m),a),C===123)if(f===0)mx(_,n,z,z,F,a,m,l,M);else switch(b===99&&ms(_,3)===110?100:b){case 100:case 108:case 109:case 115:mx(e,z,z,r&&qy(wj(e,z,z,0,0,i,l,j,i,F=[],m),M),i,M,m,l,r?F:M);break;default:mx(_,z,z,z,[""],M,0,l,M)}}d=f=g=0,y=w=1,j=_="",m=s;break;case 58:m=1+cc(_),g=x;default:if(y<1){if(C==123)--y;else if(C==125&&y++==0&&mce()==125)continue}switch(_+=s2(C),C*y){case 38:w=f>0?1:(_+="\f",-1);break;case 44:l[d++]=(cc(_)-1)*w,w=1;break;case 64:Oc()===45&&(_+=px(Jo())),b=Oc(),f=m=cc(j=_+=xce(hx())),C++;break;case 45:x===45&&cc(_)==2&&(y=0)}}return a}function wj(e,n,t,r,i,a,s,l,u,d,f){for(var m=i-1,b=i===0?a:[""],g=ZA(b),x=0,y=0,A=0;x<r;++x)for(var w=0,C=Ng(e,m+1,m=uce(y=s[x])),j=e;w<g;++w)(j=TL(y>0?b[w]+" "+C:yr(C,/&\f/g,b[w])))&&(u[A++]=j);return l2(e,n,t,i===0?KA:l,u,d,f)}function wce(e,n,t){return l2(e,n,t,NL,s2(pce()),Ng(e,2,-2),0)}function Sj(e,n,t,r){return l2(e,n,t,XA,Ng(e,0,r),Ng(e,r+1,-1),r)}function V0(e,n){for(var t="",r=ZA(e),i=0;i<r;i++)t+=n(e[i],i,e,n)||"";return t}function Sce(e,n,t,r){switch(e.type){case lce:if(e.children.length)break;case oce:case XA:return e.return=e.return||e.value;case NL:return"";case jL:return e.return=e.value+"{"+V0(e.children,r)+"}";case KA:e.value=e.props.join(",")}return cc(t=V0(e.children,r))?e.return=e.value+"{"+t+"}":""}function Ace(e){var n=ZA(e);return function(t,r,i,a){for(var s="",l=0;l<n;l++)s+=e[l](t,r,i,a)||"";return s}}function Cce(e){return function(n){n.root||(n=n.return)&&e(n)}}var kce=function(e,n,t){for(var r=0,i=0;r=i,i=Oc(),r===38&&i===12&&(n[t]=1),!jg(i);)Jo();return lb(e,wo)},Ece=function(e,n){var t=-1,r=44;do switch(jg(r)){case 0:r===38&&Oc()===12&&(n[t]=1),e[t]+=kce(wo-1,n,t);break;case 2:e[t]+=px(r);break;case 4:if(r===44){e[++t]=Oc()===58?"&\f":"",n[t]=e[t].length;break}default:e[t]+=s2(r)}while(r=Jo());return e},_ce=function(e,n){return IL(Ece(DL(e),n))},Aj=new WeakMap,Nce=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,t=e.parent,r=e.column===t.column&&e.line===t.line;t.type!=="rule";)if(t=t.parent,!t)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!Aj.get(t))&&!r){Aj.set(e,!0);for(var i=[],a=_ce(n,i),s=t.props,l=0,u=0;l<a.length;l++)for(var d=0;d<s.length;d++,u++)e.props[u]=i[l]?a[l].replace(/&\f/g,s[d]):s[d]+" "+a[l]}}},jce=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function LL(e,n){switch(dce(e,n)){case 5103:return gr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return gr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return gr+e+Jx+e+Rs+e+e;case 6828:case 4268:return gr+e+Rs+e+e;case 6165:return gr+e+Rs+"flex-"+e+e;case 5187:return gr+e+yr(e,/(\w+).+(:[^]+)/,gr+"box-$1$2"+Rs+"flex-$1$2")+e;case 5443:return gr+e+Rs+"flex-item-"+yr(e,/flex-|-self/,"")+e;case 4675:return gr+e+Rs+"flex-line-pack"+yr(e,/align-content|flex-|-self/,"")+e;case 5548:return gr+e+Rs+yr(e,"shrink","negative")+e;case 5292:return gr+e+Rs+yr(e,"basis","preferred-size")+e;case 6060:return gr+"box-"+yr(e,"-grow","")+gr+e+Rs+yr(e,"grow","positive")+e;case 4554:return gr+yr(e,/([^-])(transform)/g,"$1"+gr+"$2")+e;case 6187:return yr(yr(yr(e,/(zoom-|grab)/,gr+"$1"),/(image-set)/,gr+"$1"),e,"")+e;case 5495:case 3959:return yr(e,/(image-set\([^]*)/,gr+"$1$`$1");case 4968:return yr(yr(e,/(.+:)(flex-)?(.*)/,gr+"box-pack:$3"+Rs+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+gr+e+e;case 4095:case 3583:case 4068:case 2532:return yr(e,/(.+)-inline(.+)/,gr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(cc(e)-1-n>6)switch(ms(e,n+1)){case 109:if(ms(e,n+4)!==45)break;case 102:return yr(e,/(.+:)(.+)-([^]+)/,"$1"+gr+"$2-$3$1"+Jx+(ms(e,n+3)==108?"$3":"$2-$3"))+e;case 115:return~A6(e,"stretch")?LL(yr(e,"stretch","fill-available"),n)+e:e}break;case 4949:if(ms(e,n+1)!==115)break;case 6444:switch(ms(e,cc(e)-3-(~A6(e,"!important")&&10))){case 107:return yr(e,":",":"+gr)+e;case 101:return yr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+gr+(ms(e,14)===45?"inline-":"")+"box$3$1"+gr+"$2$3$1"+Rs+"$2box$3")+e}break;case 5936:switch(ms(e,n+11)){case 114:return gr+e+Rs+yr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return gr+e+Rs+yr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return gr+e+Rs+yr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return gr+e+Rs+e+e}return e}var Tce=function(e,n,t,r){if(e.length>-1&&!e.return)switch(e.type){case XA:e.return=LL(e.value,e.length);break;case jL:return V0([F1(e,{value:yr(e.value,"@","@"+gr)})],r);case KA:if(e.length)return hce(e.props,function(i){switch(fce(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return V0([F1(e,{props:[yr(i,/:(read-\w+)/,":"+Jx+"$1")]})],r);case"::placeholder":return V0([F1(e,{props:[yr(i,/:(plac\w+)/,":"+gr+"input-$1")]}),F1(e,{props:[yr(i,/:(plac\w+)/,":"+Jx+"$1")]}),F1(e,{props:[yr(i,/:(plac\w+)/,Rs+"input-$1")]})],r)}return""})}},Oce=[Tce],Dce=function(e){var n=e.key;if(n==="css"){var t=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(t,function(x){var y=x.getAttribute("data-emotion");y.indexOf(" ")!==-1&&(document.head.appendChild(x),x.setAttribute("data-s",""))})}var r=e.stylisPlugins||Oce,i={},a,s=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(x){for(var y=x.getAttribute("data-emotion").split(" "),A=1;A<y.length;A++)i[y[A]]=!0;s.push(x)});var l,u=[Nce,jce];{var d,f=[Sce,Cce(function(x){d.insert(x)})],m=Ace(u.concat(r,f)),b=function(x){return V0(vce(x),m)};l=function(x,y,A,w){d=A,b(x?x+"{"+y.styles+"}":y.styles),w&&(g.inserted[y.name]=!0)}}var g={key:n,sheet:new sce({key:n,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:l};return g.sheet.hydrate(s),g};function Ice(e,n){const t=Dce({key:"css",prepend:e});if(n){const r=t.insert;t.insert=(...i)=>(i[1].styles.match(/^@layer\s+[^{]*$/)||(i[1].styles=`@layer mui {${i[1].styles}}`),r(...i))}return t}const Ww=new Map;function Lce(e){const{injectFirst:n,enableCssLayer:t,children:r}=e,i=X.useMemo(()=>{const a=`${n}-${t}`;if(typeof document=="object"&&Ww.has(a))return Ww.get(a);const s=Ice(n,t);return Ww.set(a,s),s},[n,t]);return n||t?Qt.jsx(aT,{value:i,children:r}):r}function Rce(e){return e==null||Object.keys(e).length===0}function Mce(e){const{styles:n,defaultTheme:t={}}=e,r=typeof n=="function"?i=>n(Rce(i)?t:i):n;return Qt.jsx(sT,{styles:r})}/**
 * @mui/styled-engine v5.18.0
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function Fce(e,n){return iT(e,n)}const Pce=(e,n)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=n(e.__emotion_styles))},Cj=[];function zce(e){return Cj[0]=e,rce(Cj)}const qce=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:Mce,StyledEngineProvider:Lce,ThemeContext:rT,css:nT,default:Fce,internal_processStyles:Pce,internal_serializeStyles:zce,keyframes:tT},Symbol.toStringTag,{value:"Module"})),Bce=Hd(qce),$ce=Hd(cue),Uce=Hd(bue),Hce=Hd(gue),Wce=["values","unit","step"],Vce=e=>{const n=Object.keys(e).map(t=>({key:t,val:e[t]}))||[];return n.sort((t,r)=>t.val-r.val),n.reduce((t,r)=>Vr({},t,{[r.key]:r.val}),{})};function RL(e){const{values:n={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:r=5}=e,i=uh(e,Wce),a=Vce(n),s=Object.keys(a);function l(b){return`@media (min-width:${typeof n[b]=="number"?n[b]:b}${t})`}function u(b){return`@media (max-width:${(typeof n[b]=="number"?n[b]:b)-r/100}${t})`}function d(b,g){const x=s.indexOf(g);return`@media (min-width:${typeof n[b]=="number"?n[b]:b}${t}) and (max-width:${(x!==-1&&typeof n[s[x]]=="number"?n[s[x]]:g)-r/100}${t})`}function f(b){return s.indexOf(b)+1<s.length?d(b,s[s.indexOf(b)+1]):l(b)}function m(b){const g=s.indexOf(b);return g===0?l(s[1]):g===s.length-1?u(s[g]):d(b,s[s.indexOf(b)+1]).replace("@media","@media not all and")}return Vr({keys:s,values:a,up:l,down:u,between:d,only:f,not:m,unit:t},i)}const Yce={borderRadius:4};function eg(e,n){return n?Tc(e,n,{clone:!1}):e}const JA={xs:0,sm:600,md:900,lg:1200,xl:1536},kj={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${JA[e]}px)`};function Fd(e,n,t){const r=e.theme||{};if(Array.isArray(n)){const i=r.breakpoints||kj;return n.reduce((a,s,l)=>(a[i.up(i.keys[l])]=t(n[l]),a),{})}if(typeof n=="object"){const i=r.breakpoints||kj;return Object.keys(n).reduce((a,s)=>{if(Object.keys(i.values||JA).indexOf(s)!==-1){const l=i.up(s);a[l]=t(n[s],s)}else{const l=s;a[l]=n[l]}return a},{})}return t(n)}function Gce(e={}){var n;return((n=e.keys)==null?void 0:n.reduce((t,r)=>{const i=e.up(r);return t[i]={},t},{}))||{}}function Ej(e,n){return e.reduce((t,r)=>{const i=t[r];return(!i||Object.keys(i).length===0)&&delete t[r],t},n)}function u2(e,n,t=!0){if(!n||typeof n!="string")return null;if(e&&e.vars&&t){const r=`vars.${n}`.split(".").reduce((i,a)=>i&&i[a]?i[a]:null,e);if(r!=null)return r}return n.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,e)}function ev(e,n,t,r=t){let i;return typeof e=="function"?i=e(t):Array.isArray(e)?i=e[t]||r:i=u2(e,t)||r,n&&(i=n(i,r,e)),i}function va(e){const{prop:n,cssProperty:t=e.prop,themeKey:r,transform:i}=e,a=s=>{if(s[n]==null)return null;const l=s[n],u=s.theme,d=u2(u,r)||{};return Fd(s,l,f=>{let m=ev(d,i,f);return f===m&&typeof f=="string"&&(m=ev(d,i,`${n}${f==="default"?"":th(f)}`,f)),t===!1?m:{[t]:m}})};return a.propTypes={},a.filterProps=[n],a}function Qce(e){const n={};return t=>(n[t]===void 0&&(n[t]=e(t)),n[t])}const Kce={m:"margin",p:"padding"},Xce={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},_j={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Zce=Qce(e=>{if(e.length>2)if(_j[e])e=_j[e];else return[e];const[n,t]=e.split(""),r=Kce[n],i=Xce[t]||"";return Array.isArray(i)?i.map(a=>r+a):[r+i]}),eC=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],tC=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...eC,...tC];function ub(e,n,t,r){var i;const a=(i=u2(e,n,!1))!=null?i:t;return typeof a=="number"?s=>typeof s=="string"?s:a*s:Array.isArray(a)?s=>typeof s=="string"?s:a[s]:typeof a=="function"?a:()=>{}}function ML(e){return ub(e,"spacing",8)}function cb(e,n){if(typeof n=="string"||n==null)return n;const t=Math.abs(n),r=e(t);return n>=0?r:typeof r=="number"?-r:`-${r}`}function Jce(e,n){return t=>e.reduce((r,i)=>(r[i]=cb(n,t),r),{})}function ede(e,n,t,r){if(n.indexOf(t)===-1)return null;const i=Zce(t),a=Jce(i,r),s=e[t];return Fd(e,s,a)}function FL(e,n){const t=ML(e.theme);return Object.keys(e).map(r=>ede(e,n,r,t)).reduce(eg,{})}function Qi(e){return FL(e,eC)}Qi.propTypes={};Qi.filterProps=eC;function Ki(e){return FL(e,tC)}Ki.propTypes={};Ki.filterProps=tC;function tde(e=8){if(e.mui)return e;const n=ML({spacing:e}),t=(...r)=>(r.length===0?[1]:r).map(i=>{const a=n(i);return typeof a=="number"?`${a}px`:a}).join(" ");return t.mui=!0,t}function c2(...e){const n=e.reduce((r,i)=>(i.filterProps.forEach(a=>{r[a]=i}),r),{}),t=r=>Object.keys(r).reduce((i,a)=>n[a]?eg(i,n[a](r)):i,{});return t.propTypes={},t.filterProps=e.reduce((r,i)=>r.concat(i.filterProps),[]),t}function _l(e){return typeof e!="number"?e:`${e}px solid`}function Pl(e,n){return va({prop:e,themeKey:"borders",transform:n})}const nde=Pl("border",_l),rde=Pl("borderTop",_l),ide=Pl("borderRight",_l),ade=Pl("borderBottom",_l),sde=Pl("borderLeft",_l),ode=Pl("borderColor"),lde=Pl("borderTopColor"),ude=Pl("borderRightColor"),cde=Pl("borderBottomColor"),dde=Pl("borderLeftColor"),fde=Pl("outline",_l),hde=Pl("outlineColor"),d2=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const n=ub(e.theme,"shape.borderRadius",4),t=r=>({borderRadius:cb(n,r)});return Fd(e,e.borderRadius,t)}return null};d2.propTypes={};d2.filterProps=["borderRadius"];c2(nde,rde,ide,ade,sde,ode,lde,ude,cde,dde,d2,fde,hde);const f2=e=>{if(e.gap!==void 0&&e.gap!==null){const n=ub(e.theme,"spacing",8),t=r=>({gap:cb(n,r)});return Fd(e,e.gap,t)}return null};f2.propTypes={};f2.filterProps=["gap"];const h2=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const n=ub(e.theme,"spacing",8),t=r=>({columnGap:cb(n,r)});return Fd(e,e.columnGap,t)}return null};h2.propTypes={};h2.filterProps=["columnGap"];const p2=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const n=ub(e.theme,"spacing",8),t=r=>({rowGap:cb(n,r)});return Fd(e,e.rowGap,t)}return null};p2.propTypes={};p2.filterProps=["rowGap"];const pde=va({prop:"gridColumn"}),mde=va({prop:"gridRow"}),gde=va({prop:"gridAutoFlow"}),bde=va({prop:"gridAutoColumns"}),yde=va({prop:"gridAutoRows"}),xde=va({prop:"gridTemplateColumns"}),vde=va({prop:"gridTemplateRows"}),wde=va({prop:"gridTemplateAreas"}),Sde=va({prop:"gridArea"});c2(f2,h2,p2,pde,mde,gde,bde,yde,xde,vde,wde,Sde);function Y0(e,n){return n==="grey"?n:e}const Ade=va({prop:"color",themeKey:"palette",transform:Y0}),Cde=va({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Y0}),kde=va({prop:"backgroundColor",themeKey:"palette",transform:Y0});c2(Ade,Cde,kde);function Vo(e){return e<=1&&e!==0?`${e*100}%`:e}const Ede=va({prop:"width",transform:Vo}),nC=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const n=t=>{var r,i;const a=((r=e.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[t])||JA[t];return a?((i=e.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:`${a}${e.theme.breakpoints.unit}`}:{maxWidth:a}:{maxWidth:Vo(t)}};return Fd(e,e.maxWidth,n)}return null};nC.filterProps=["maxWidth"];const _de=va({prop:"minWidth",transform:Vo}),Nde=va({prop:"height",transform:Vo}),jde=va({prop:"maxHeight",transform:Vo}),Tde=va({prop:"minHeight",transform:Vo});va({prop:"size",cssProperty:"width",transform:Vo});va({prop:"size",cssProperty:"height",transform:Vo});const Ode=va({prop:"boxSizing"});c2(Ede,nC,_de,Nde,jde,Tde,Ode);const db={border:{themeKey:"borders",transform:_l},borderTop:{themeKey:"borders",transform:_l},borderRight:{themeKey:"borders",transform:_l},borderBottom:{themeKey:"borders",transform:_l},borderLeft:{themeKey:"borders",transform:_l},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:_l},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:d2},color:{themeKey:"palette",transform:Y0},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Y0},backgroundColor:{themeKey:"palette",transform:Y0},p:{style:Ki},pt:{style:Ki},pr:{style:Ki},pb:{style:Ki},pl:{style:Ki},px:{style:Ki},py:{style:Ki},padding:{style:Ki},paddingTop:{style:Ki},paddingRight:{style:Ki},paddingBottom:{style:Ki},paddingLeft:{style:Ki},paddingX:{style:Ki},paddingY:{style:Ki},paddingInline:{style:Ki},paddingInlineStart:{style:Ki},paddingInlineEnd:{style:Ki},paddingBlock:{style:Ki},paddingBlockStart:{style:Ki},paddingBlockEnd:{style:Ki},m:{style:Qi},mt:{style:Qi},mr:{style:Qi},mb:{style:Qi},ml:{style:Qi},mx:{style:Qi},my:{style:Qi},margin:{style:Qi},marginTop:{style:Qi},marginRight:{style:Qi},marginBottom:{style:Qi},marginLeft:{style:Qi},marginX:{style:Qi},marginY:{style:Qi},marginInline:{style:Qi},marginInlineStart:{style:Qi},marginInlineEnd:{style:Qi},marginBlock:{style:Qi},marginBlockStart:{style:Qi},marginBlockEnd:{style:Qi},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:f2},rowGap:{style:p2},columnGap:{style:h2},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Vo},maxWidth:{style:nC},minWidth:{transform:Vo},height:{transform:Vo},maxHeight:{transform:Vo},minHeight:{transform:Vo},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function Dde(...e){const n=e.reduce((r,i)=>r.concat(Object.keys(i)),[]),t=new Set(n);return e.every(r=>t.size===Object.keys(r).length)}function Ide(e,n){return typeof e=="function"?e(n):e}function PL(){function e(t,r,i,a){const s={[t]:r,theme:i},l=a[t];if(!l)return{[t]:r};const{cssProperty:u=t,themeKey:d,transform:f,style:m}=l;if(r==null)return null;if(d==="typography"&&r==="inherit")return{[t]:r};const b=u2(i,d)||{};return m?m(s):Fd(s,r,g=>{let x=ev(b,f,g);return g===x&&typeof g=="string"&&(x=ev(b,f,`${t}${g==="default"?"":th(g)}`,g)),u===!1?x:{[u]:x}})}function n(t){var r;const{sx:i,theme:a={},nested:s}=t||{};if(!i)return null;const l=(r=a.unstable_sxConfig)!=null?r:db;function u(d){let f=d;if(typeof d=="function")f=d(a);else if(typeof d!="object")return d;if(!f)return null;const m=Gce(a.breakpoints),b=Object.keys(m);let g=m;return Object.keys(f).forEach(x=>{const y=Ide(f[x],a);if(y!=null)if(typeof y=="object")if(l[x])g=eg(g,e(x,y,a,l));else{const A=Fd({theme:a},y,w=>({[x]:w}));Dde(A,y)?g[x]=n({sx:y,theme:a,nested:!0}):g=eg(g,A)}else g=eg(g,e(x,y,a,l))}),!s&&a.modularCssLayers?{"@layer sx":Ej(b,g)}:Ej(b,g)}return Array.isArray(i)?i.map(u):u(i)}return n}const m2=PL();m2.filterProps=["sx"];function zL(e,n){const t=this;return t.vars&&typeof t.getColorSchemeSelector=="function"?{[t.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:n}:t.palette.mode===e?n:{}}const Lde=["breakpoints","palette","spacing","shape"];function qL(e={},...n){const{breakpoints:t={},palette:r={},spacing:i,shape:a={}}=e,s=uh(e,Lde),l=RL(t),u=tde(i);let d=Tc({breakpoints:l,direction:"ltr",components:{},palette:Vr({mode:"light"},r),spacing:u,shape:Vr({},Yce,a)},s);return d.applyStyles=zL,d=n.reduce((f,m)=>Tc(f,m),d),d.unstable_sxConfig=Vr({},db,s==null?void 0:s.unstable_sxConfig),d.unstable_sx=function(f){return m2({sx:f,theme:this})},d}const Rde=Object.freeze(Object.defineProperty({__proto__:null,default:qL,private_createBreakpoints:RL,unstable_applyStyles:zL},Symbol.toStringTag,{value:"Module"})),Mde=Hd(Rde),Fde=["sx"],Pde=e=>{var n,t;const r={systemProps:{},otherProps:{}},i=(n=e==null||(t=e.theme)==null?void 0:t.unstable_sxConfig)!=null?n:db;return Object.keys(e).forEach(a=>{i[a]?r.systemProps[a]=e[a]:r.otherProps[a]=e[a]}),r};function zde(e){const{sx:n}=e,t=uh(e,Fde),{systemProps:r,otherProps:i}=Pde(t);let a;return Array.isArray(n)?a=[r,...n]:typeof n=="function"?a=(...s)=>{const l=n(...s);return Lf(l)?Vr({},r,l):r}:a=Vr({},r,n),Vr({},i,{sx:a})}const qde=Object.freeze(Object.defineProperty({__proto__:null,default:m2,extendSxProp:zde,unstable_createStyleFunctionSx:PL,unstable_defaultSxConfig:db},Symbol.toStringTag,{value:"Module"})),Bde=Hd(qde);var Nj;function $de(){if(Nj)return Ph;Nj=1;var e=vm();Object.defineProperty(Ph,"__esModule",{value:!0}),Ph.default=M,Ph.shouldForwardProp=x,Ph.systemDefaultTheme=void 0;var n=e(Que()),t=e(Kue()),r=m(Bce),i=$ce;e(Uce),e(Hce);var a=e(Mde),s=e(Bde);const l=["ownerState"],u=["variants"],d=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function f(z){if(typeof WeakMap!="function")return null;var _=new WeakMap,L=new WeakMap;return(f=function($){return $?L:_})(z)}function m(z,_){if(z&&z.__esModule)return z;if(z===null||typeof z!="object"&&typeof z!="function")return{default:z};var L=f(_);if(L&&L.has(z))return L.get(z);var $={__proto__:null},Z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var O in z)if(O!=="default"&&Object.prototype.hasOwnProperty.call(z,O)){var T=Z?Object.getOwnPropertyDescriptor(z,O):null;T&&(T.get||T.set)?Object.defineProperty($,O,T):$[O]=z[O]}return $.default=z,L&&L.set(z,$),$}function b(z){return Object.keys(z).length===0}function g(z){return typeof z=="string"&&z.charCodeAt(0)>96}function x(z){return z!=="ownerState"&&z!=="theme"&&z!=="sx"&&z!=="as"}function y(z,_){return _&&z&&typeof z=="object"&&z.styles&&!z.styles.startsWith("@layer")&&(z.styles=`@layer ${_}{${String(z.styles)}}`),z}const A=Ph.systemDefaultTheme=(0,a.default)(),w=z=>z&&z.charAt(0).toLowerCase()+z.slice(1);function C({defaultTheme:z,theme:_,themeId:L}){return b(_)?z:_[L]||_}function j(z){return z?(_,L)=>L[z]:null}function F(z,_,L){let{ownerState:$}=_,Z=(0,t.default)(_,l);const O=typeof z=="function"?z((0,n.default)({ownerState:$},Z)):z;if(Array.isArray(O))return O.flatMap(T=>F(T,(0,n.default)({ownerState:$},Z),L));if(O&&typeof O=="object"&&Array.isArray(O.variants)){const{variants:T=[]}=O;let R=(0,t.default)(O,u);return T.forEach(N=>{let G=!0;if(typeof N.props=="function"?G=N.props((0,n.default)({ownerState:$},Z,$)):Object.keys(N.props).forEach(W=>{($==null?void 0:$[W])!==N.props[W]&&Z[W]!==N.props[W]&&(G=!1)}),G){Array.isArray(R)||(R=[R]);const W=typeof N.style=="function"?N.style((0,n.default)({ownerState:$},Z,$)):N.style;R.push(L?y((0,r.internal_serializeStyles)(W),L):W)}}),R}return L?y((0,r.internal_serializeStyles)(O),L):O}function M(z={}){const{themeId:_,defaultTheme:L=A,rootShouldForwardProp:$=x,slotShouldForwardProp:Z=x}=z,O=T=>(0,s.default)((0,n.default)({},T,{theme:C((0,n.default)({},T,{defaultTheme:L,themeId:_}))}));return O.__mui_systemSx=!0,(T,R={})=>{(0,r.internal_processStyles)(T,ye=>ye.filter(Se=>!(Se!=null&&Se.__mui_systemSx)));const{name:N,slot:G,skipVariantsResolver:W,skipSx:Q,overridesResolver:J=j(w(G))}=R,se=(0,t.default)(R,d),U=N&&N.startsWith("Mui")||G?"components":"custom",le=W!==void 0?W:G&&G!=="Root"&&G!=="root"||!1,q=Q||!1;let B,ee=x;G==="Root"||G==="root"?ee=$:G?ee=Z:g(T)&&(ee=void 0);const re=(0,r.default)(T,(0,n.default)({shouldForwardProp:ee,label:B},se)),oe=ye=>typeof ye=="function"&&ye.__emotion_real!==ye||(0,i.isPlainObject)(ye)?Se=>{const Te=C({theme:Se.theme,defaultTheme:L,themeId:_});return F(ye,(0,n.default)({},Se,{theme:Te}),Te.modularCssLayers?U:void 0)}:ye,Ce=(ye,...Se)=>{let Te=oe(ye);const Le=Se?Se.map(oe):[];N&&J&&Le.push(V=>{const Ae=C((0,n.default)({},V,{defaultTheme:L,themeId:_}));if(!Ae.components||!Ae.components[N]||!Ae.components[N].styleOverrides)return null;const ne=Ae.components[N].styleOverrides,be={};return Object.entries(ne).forEach(([fe,ke])=>{be[fe]=F(ke,(0,n.default)({},V,{theme:Ae}),Ae.modularCssLayers?"theme":void 0)}),J(V,be)}),N&&!le&&Le.push(V=>{var Ae;const ne=C((0,n.default)({},V,{defaultTheme:L,themeId:_})),be=ne==null||(Ae=ne.components)==null||(Ae=Ae[N])==null?void 0:Ae.variants;return F({variants:be},(0,n.default)({},V,{theme:ne}),ne.modularCssLayers?"theme":void 0)}),q||Le.push(O);const He=Le.length-Se.length;if(Array.isArray(ye)&&He>0){const V=new Array(He).fill("");Te=[...ye,...V],Te.raw=[...ye.raw,...V]}const Ye=re(Te,...Le);return T.muiName&&(Ye.muiName=T.muiName),Ye};return re.withConfig&&(Ce.withConfig=re.withConfig),Ce}}return Ph}var Ude=$de();const Hde=sb(Ude);function Wde(e,n){return Vr({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},n)}var Li={};const Vde=Hd(due),Yde=Hd(Uue);var jj;function Gde(){if(jj)return Li;jj=1;var e=vm();Object.defineProperty(Li,"__esModule",{value:!0}),Li.alpha=x,Li.blend=z,Li.colorChannel=void 0,Li.darken=A,Li.decomposeColor=s,Li.emphasize=F,Li.getContrastRatio=g,Li.getLuminance=b,Li.hexToRgb=i,Li.hslToRgb=m,Li.lighten=C,Li.private_safeAlpha=y,Li.private_safeColorChannel=void 0,Li.private_safeDarken=w,Li.private_safeEmphasize=M,Li.private_safeLighten=j,Li.recomposeColor=d,Li.rgbToHex=f;var n=e(Vde),t=e(Yde);function r(_,L=0,$=1){return(0,t.default)(_,L,$)}function i(_){_=_.slice(1);const L=new RegExp(`.{1,${_.length>=6?2:1}}`,"g");let $=_.match(L);return $&&$[0].length===1&&($=$.map(Z=>Z+Z)),$?`rgb${$.length===4?"a":""}(${$.map((Z,O)=>O<3?parseInt(Z,16):Math.round(parseInt(Z,16)/255*1e3)/1e3).join(", ")})`:""}function a(_){const L=_.toString(16);return L.length===1?`0${L}`:L}function s(_){if(_.type)return _;if(_.charAt(0)==="#")return s(i(_));const L=_.indexOf("("),$=_.substring(0,L);if(["rgb","rgba","hsl","hsla","color"].indexOf($)===-1)throw new Error((0,n.default)(9,_));let Z=_.substring(L+1,_.length-1),O;if($==="color"){if(Z=Z.split(" "),O=Z.shift(),Z.length===4&&Z[3].charAt(0)==="/"&&(Z[3]=Z[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(O)===-1)throw new Error((0,n.default)(10,O))}else Z=Z.split(",");return Z=Z.map(T=>parseFloat(T)),{type:$,values:Z,colorSpace:O}}const l=_=>{const L=s(_);return L.values.slice(0,3).map(($,Z)=>L.type.indexOf("hsl")!==-1&&Z!==0?`${$}%`:$).join(" ")};Li.colorChannel=l;const u=(_,L)=>{try{return l(_)}catch{return _}};Li.private_safeColorChannel=u;function d(_){const{type:L,colorSpace:$}=_;let{values:Z}=_;return L.indexOf("rgb")!==-1?Z=Z.map((O,T)=>T<3?parseInt(O,10):O):L.indexOf("hsl")!==-1&&(Z[1]=`${Z[1]}%`,Z[2]=`${Z[2]}%`),L.indexOf("color")!==-1?Z=`${$} ${Z.join(" ")}`:Z=`${Z.join(", ")}`,`${L}(${Z})`}function f(_){if(_.indexOf("#")===0)return _;const{values:L}=s(_);return`#${L.map(($,Z)=>a(Z===3?Math.round(255*$):$)).join("")}`}function m(_){_=s(_);const{values:L}=_,$=L[0],Z=L[1]/100,O=L[2]/100,T=Z*Math.min(O,1-O),R=(W,Q=(W+$/30)%12)=>O-T*Math.max(Math.min(Q-3,9-Q,1),-1);let N="rgb";const G=[Math.round(R(0)*255),Math.round(R(8)*255),Math.round(R(4)*255)];return _.type==="hsla"&&(N+="a",G.push(L[3])),d({type:N,values:G})}function b(_){_=s(_);let L=_.type==="hsl"||_.type==="hsla"?s(m(_)).values:_.values;return L=L.map($=>(_.type!=="color"&&($/=255),$<=.03928?$/12.92:(($+.055)/1.055)**2.4)),Number((.2126*L[0]+.7152*L[1]+.0722*L[2]).toFixed(3))}function g(_,L){const $=b(_),Z=b(L);return(Math.max($,Z)+.05)/(Math.min($,Z)+.05)}function x(_,L){return _=s(_),L=r(L),(_.type==="rgb"||_.type==="hsl")&&(_.type+="a"),_.type==="color"?_.values[3]=`/${L}`:_.values[3]=L,d(_)}function y(_,L,$){try{return x(_,L)}catch{return _}}function A(_,L){if(_=s(_),L=r(L),_.type.indexOf("hsl")!==-1)_.values[2]*=1-L;else if(_.type.indexOf("rgb")!==-1||_.type.indexOf("color")!==-1)for(let $=0;$<3;$+=1)_.values[$]*=1-L;return d(_)}function w(_,L,$){try{return A(_,L)}catch{return _}}function C(_,L){if(_=s(_),L=r(L),_.type.indexOf("hsl")!==-1)_.values[2]+=(100-_.values[2])*L;else if(_.type.indexOf("rgb")!==-1)for(let $=0;$<3;$+=1)_.values[$]+=(255-_.values[$])*L;else if(_.type.indexOf("color")!==-1)for(let $=0;$<3;$+=1)_.values[$]+=(1-_.values[$])*L;return d(_)}function j(_,L,$){try{return C(_,L)}catch{return _}}function F(_,L=.15){return b(_)>.5?A(_,L):C(_,L)}function M(_,L,$){try{return F(_,L)}catch{return _}}function z(_,L,$,Z=1){const O=(G,W)=>Math.round((G**(1/Z)*(1-$)+W**(1/Z)*$)**Z),T=s(_),R=s(L),N=[O(T.values[0],R.values[0]),O(T.values[1],R.values[1]),O(T.values[2],R.values[2])];return d({type:"rgb",values:N})}return Li}var k6=Gde();const Tg={black:"#000",white:"#fff"},Qde={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},m0={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},g0={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},P1={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},b0={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},y0={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},x0={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},Kde=["mode","contrastThreshold","tonalOffset"],Tj={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Tg.white,default:Tg.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Vw={text:{primary:Tg.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Tg.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Oj(e,n,t,r){const i=r.light||r,a=r.dark||r*1.5;e[n]||(e.hasOwnProperty(t)?e[n]=e[t]:n==="light"?e.light=k6.lighten(e.main,i):n==="dark"&&(e.dark=k6.darken(e.main,a)))}function Xde(e="light"){return e==="dark"?{main:b0[200],light:b0[50],dark:b0[400]}:{main:b0[700],light:b0[400],dark:b0[800]}}function Zde(e="light"){return e==="dark"?{main:m0[200],light:m0[50],dark:m0[400]}:{main:m0[500],light:m0[300],dark:m0[700]}}function Jde(e="light"){return e==="dark"?{main:g0[500],light:g0[300],dark:g0[700]}:{main:g0[700],light:g0[400],dark:g0[800]}}function efe(e="light"){return e==="dark"?{main:y0[400],light:y0[300],dark:y0[700]}:{main:y0[700],light:y0[500],dark:y0[900]}}function tfe(e="light"){return e==="dark"?{main:x0[400],light:x0[300],dark:x0[700]}:{main:x0[800],light:x0[500],dark:x0[900]}}function nfe(e="light"){return e==="dark"?{main:P1[400],light:P1[300],dark:P1[700]}:{main:"#ed6c02",light:P1[500],dark:P1[900]}}function rfe(e){const{mode:n="light",contrastThreshold:t=3,tonalOffset:r=.2}=e,i=uh(e,Kde),a=e.primary||Xde(n),s=e.secondary||Zde(n),l=e.error||Jde(n),u=e.info||efe(n),d=e.success||tfe(n),f=e.warning||nfe(n);function m(x){return k6.getContrastRatio(x,Vw.text.primary)>=t?Vw.text.primary:Tj.text.primary}const b=({color:x,name:y,mainShade:A=500,lightShade:w=300,darkShade:C=700})=>{if(x=Vr({},x),!x.main&&x[A]&&(x.main=x[A]),!x.hasOwnProperty("main"))throw new Error(_g(11,y?` (${y})`:"",A));if(typeof x.main!="string")throw new Error(_g(12,y?` (${y})`:"",JSON.stringify(x.main)));return Oj(x,"light",w,r),Oj(x,"dark",C,r),x.contrastText||(x.contrastText=m(x.main)),x},g={dark:Vw,light:Tj};return Tc(Vr({common:Vr({},Tg),mode:n,primary:b({color:a,name:"primary"}),secondary:b({color:s,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:b({color:l,name:"error"}),warning:b({color:f,name:"warning"}),info:b({color:u,name:"info"}),success:b({color:d,name:"success"}),grey:Qde,contrastThreshold:t,getContrastText:m,augmentColor:b,tonalOffset:r},g[n]),i)}const ife=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function afe(e){return Math.round(e*1e5)/1e5}const Dj={textTransform:"uppercase"},Ij='"Roboto", "Helvetica", "Arial", sans-serif';function sfe(e,n){const t=typeof n=="function"?n(e):n,{fontFamily:r=Ij,fontSize:i=14,fontWeightLight:a=300,fontWeightRegular:s=400,fontWeightMedium:l=500,fontWeightBold:u=700,htmlFontSize:d=16,allVariants:f,pxToRem:m}=t,b=uh(t,ife),g=i/14,x=m||(w=>`${w/d*g}rem`),y=(w,C,j,F,M)=>Vr({fontFamily:r,fontWeight:w,fontSize:x(C),lineHeight:j},r===Ij?{letterSpacing:`${afe(F/C)}em`}:{},M,f),A={h1:y(a,96,1.167,-1.5),h2:y(a,60,1.2,-.5),h3:y(s,48,1.167,0),h4:y(s,34,1.235,.25),h5:y(s,24,1.334,0),h6:y(l,20,1.6,.15),subtitle1:y(s,16,1.75,.15),subtitle2:y(l,14,1.57,.1),body1:y(s,16,1.5,.15),body2:y(s,14,1.43,.15),button:y(l,14,1.75,.4,Dj),caption:y(s,12,1.66,.4),overline:y(s,12,2.66,1,Dj),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Tc(Vr({htmlFontSize:d,pxToRem:x,fontFamily:r,fontSize:i,fontWeightLight:a,fontWeightRegular:s,fontWeightMedium:l,fontWeightBold:u},A),b,{clone:!1})}const ofe=.2,lfe=.14,ufe=.12;function vi(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${ofe})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${lfe})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${ufe})`].join(",")}const cfe=["none",vi(0,2,1,-1,0,1,1,0,0,1,3,0),vi(0,3,1,-2,0,2,2,0,0,1,5,0),vi(0,3,3,-2,0,3,4,0,0,1,8,0),vi(0,2,4,-1,0,4,5,0,0,1,10,0),vi(0,3,5,-1,0,5,8,0,0,1,14,0),vi(0,3,5,-1,0,6,10,0,0,1,18,0),vi(0,4,5,-2,0,7,10,1,0,2,16,1),vi(0,5,5,-3,0,8,10,1,0,3,14,2),vi(0,5,6,-3,0,9,12,1,0,3,16,2),vi(0,6,6,-3,0,10,14,1,0,4,18,3),vi(0,6,7,-4,0,11,15,1,0,4,20,3),vi(0,7,8,-4,0,12,17,2,0,5,22,4),vi(0,7,8,-4,0,13,19,2,0,5,24,4),vi(0,7,9,-4,0,14,21,2,0,5,26,4),vi(0,8,9,-5,0,15,22,2,0,6,28,5),vi(0,8,10,-5,0,16,24,2,0,6,30,5),vi(0,8,11,-5,0,17,26,2,0,6,32,5),vi(0,9,11,-5,0,18,28,2,0,7,34,6),vi(0,9,12,-6,0,19,29,2,0,7,36,6),vi(0,10,13,-6,0,20,31,3,0,8,38,7),vi(0,10,13,-6,0,21,33,3,0,8,40,7),vi(0,10,14,-6,0,22,35,3,0,8,42,7),vi(0,11,14,-7,0,23,36,3,0,9,44,8),vi(0,11,15,-7,0,24,38,3,0,9,46,8)],dfe=["duration","easing","delay"],ffe={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},hfe={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Lj(e){return`${Math.round(e)}ms`}function pfe(e){if(!e)return 0;const n=e/36;return Math.round((4+15*n**.25+n/5)*10)}function mfe(e){const n=Vr({},ffe,e.easing),t=Vr({},hfe,e.duration);return Vr({getAutoHeightDuration:pfe,create:(r=["all"],i={})=>{const{duration:a=t.standard,easing:s=n.easeInOut,delay:l=0}=i;return uh(i,dfe),(Array.isArray(r)?r:[r]).map(u=>`${u} ${typeof a=="string"?a:Lj(a)} ${s} ${typeof l=="string"?l:Lj(l)}`).join(",")}},e,{easing:n,duration:t})}const gfe={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},bfe=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function yfe(e={},...n){const{mixins:t={},palette:r={},transitions:i={},typography:a={}}=e,s=uh(e,bfe);if(e.vars&&e.generateCssVars===void 0)throw new Error(_g(18));const l=rfe(r),u=qL(e);let d=Tc(u,{mixins:Wde(u.breakpoints,t),palette:l,shadows:cfe.slice(),typography:sfe(l,a),transitions:mfe(i),zIndex:Vr({},gfe)});return d=Tc(d,s),d=n.reduce((f,m)=>Tc(f,m),d),d.unstable_sxConfig=Vr({},db,s==null?void 0:s.unstable_sxConfig),d.unstable_sx=function(f){return m2({sx:f,theme:this})},d}const xfe=yfe(),vfe="$$material";function wfe(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const Sfe=e=>wfe(e)&&e!=="classes",Afe=Hde({themeId:vfe,defaultTheme:xfe,rootShouldForwardProp:Sfe});function Cfe(e){return kL("MuiSvgIcon",e)}Bue("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const kfe=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Efe=e=>{const{color:n,fontSize:t,classes:r}=e,i={root:["root",n!=="inherit"&&`color${th(n)}`,`fontSize${th(t)}`]};return Pue(i,Cfe,r)},_fe=Afe("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:t}=e;return[n.root,t.color!=="inherit"&&n[`color${th(t.color)}`],n[`fontSize${th(t.fontSize)}`]]}})(({theme:e,ownerState:n})=>{var t,r,i,a,s,l,u,d,f,m,b,g,x;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:n.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(t=e.transitions)==null||(r=t.create)==null?void 0:r.call(t,"fill",{duration:(i=e.transitions)==null||(i=i.duration)==null?void 0:i.shorter}),fontSize:{inherit:"inherit",small:((a=e.typography)==null||(s=a.pxToRem)==null?void 0:s.call(a,20))||"1.25rem",medium:((l=e.typography)==null||(u=l.pxToRem)==null?void 0:u.call(l,24))||"1.5rem",large:((d=e.typography)==null||(f=d.pxToRem)==null?void 0:f.call(d,35))||"2.1875rem"}[n.fontSize],color:(m=(b=(e.vars||e).palette)==null||(b=b[n.color])==null?void 0:b.main)!=null?m:{action:(g=(e.vars||e).palette)==null||(g=g.action)==null?void 0:g.active,disabled:(x=(e.vars||e).palette)==null||(x=x.action)==null?void 0:x.disabled,inherit:void 0}[n.color]}}),E6=X.forwardRef(function(e,n){const t=Gue({props:e,name:"MuiSvgIcon"}),{children:r,className:i,color:a="inherit",component:s="svg",fontSize:l="medium",htmlColor:u,inheritViewBox:d=!1,titleAccess:f,viewBox:m="0 0 24 24"}=t,b=uh(t,kfe),g=X.isValidElement(r)&&r.type==="svg",x=Vr({},t,{color:a,component:s,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:d,viewBox:m,hasSvgAsChild:g}),y={};d||(y.viewBox=m);const A=Efe(x);return Qt.jsxs(_fe,Vr({as:s,className:Hue(A.root,i),focusable:"false",color:u,"aria-hidden":f?void 0:!0,role:f?"img":void 0,ref:n},y,b,g&&r.props,{ownerState:x,children:[g?r.props.children:r,f?Qt.jsx("title",{children:f}):null]}))});E6.muiName="SvgIcon";function Nfe(e,n){function t(r,i){return Qt.jsx(E6,Vr({"data-testid":`${n}Icon`,ref:i},r,{children:e}))}return t.muiName=E6.muiName,X.memo(X.forwardRef(t))}const jfe={configure:e=>{CL.configure(e)}},Tfe=Object.freeze(Object.defineProperty({__proto__:null,capitalize:th,createChainedFunction:yue,createSvgIcon:Nfe,debounce:xue,deprecatedPropType:vue,isMuiElement:wue,ownerDocument:wL,ownerWindow:Sue,requirePropFactory:Aue,setRef:SL,unstable_ClassNameGenerator:jfe,unstable_useEnhancedEffect:AL,unstable_useId:kue,unsupportedProp:Eue,useControlled:_ue,useEventCallback:Nue,useForkRef:jue,useIsFocusVisible:Fue},Symbol.toStringTag,{value:"Module"})),Ofe=Hd(Tfe);var Rj;function g2(){return Rj||(Rj=1,function(e){"use client";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.createSvgIcon}});var n=Ofe}(aj)),aj}var Mj;function Dfe(){if(Mj)return M1;Mj=1;var e=vm();Object.defineProperty(M1,"__esModule",{value:!0}),M1.default=void 0;var n=e(g2()),t=ob();return M1.default=(0,n.default)((0,t.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),M1}var Ife=Dfe();const Fj=sb(Ife);var z1={},Pj;function Lfe(){if(Pj)return z1;Pj=1;var e=vm();Object.defineProperty(z1,"__esModule",{value:!0}),z1.default=void 0;var n=e(g2()),t=ob();return z1.default=(0,n.default)((0,t.jsx)("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),z1}var Rfe=Lfe();const Mfe=sb(Rfe);var q1={},zj;function Ffe(){if(zj)return q1;zj=1;var e=vm();Object.defineProperty(q1,"__esModule",{value:!0}),q1.default=void 0;var n=e(g2()),t=ob();return q1.default=(0,n.default)((0,t.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),q1}var Pfe=Ffe();const zfe=sb(Pfe);var B1={},qj;function qfe(){if(qj)return B1;qj=1;var e=vm();Object.defineProperty(B1,"__esModule",{value:!0}),B1.default=void 0;var n=e(g2()),t=ob();return B1.default=(0,n.default)((0,t.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),B1}var Bfe=qfe();const $fe=sb(Bfe),tr={primary:"#0B53C0",primaryLight:"#CDDAFF",background:"#F0F4FF",white:"#FFFFFF",text:"#000000",success:"#4caf50",error:"#f44336",disabled:"#ccc"},Qn={modal:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"95%",sm:"80%",md:700},maxHeight:"90vh",bgcolor:tr.background,borderRadius:"16px",boxShadow:"0px 10px 30px rgba(0, 0, 0, 0.2)",p:3,outline:"none",overflow:"hidden",display:"flex",flexDirection:"column"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,pb:2,borderBottom:`2px solid ${tr.primaryLight}`},title:{fontFamily:"Staatliches, Arial, sans-serif",fontSize:{xs:"1.5rem",sm:"2rem"},color:tr.text},closeButton:{color:tr.text,"&:hover":{bgcolor:tr.primaryLight}},progressBar:{height:8,borderRadius:4,bgcolor:tr.disabled,mb:3,"& .MuiLinearProgress-bar":{bgcolor:tr.primary,borderRadius:4}},questionCard:{bgcolor:tr.white,borderRadius:"12px",p:3,mb:3,minHeight:200,boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.1)"},questionText:{fontFamily:"Gabarito, Arial, sans-serif",fontSize:"1.1rem",color:tr.text,mb:3},categoryBadge:{display:"inline-block",px:2,py:.5,bgcolor:tr.primaryLight,color:tr.text,borderRadius:"20px",fontSize:"0.85rem",fontFamily:"Gabarito, Arial, sans-serif",mb:2},answerInput:{width:"100%","& .MuiOutlinedInput-root":{fontFamily:"Gabarito, Arial, sans-serif","& fieldset":{borderColor:tr.disabled},"&:hover fieldset":{borderColor:tr.primary},"&.Mui-focused fieldset":{borderColor:tr.primary}}},navigationDots:{display:"flex",justifyContent:"center",gap:1,my:2},dot:{width:12,height:12,borderRadius:"50%",border:"none",cursor:"pointer",transition:"all 0.3s","&:hover":{transform:"scale(1.2)"}},dotStates:{unanswered:{bgcolor:tr.disabled},answered:{bgcolor:tr.primaryLight},current:{bgcolor:tr.primary,transform:"scale(1.3)"}},navigationButtons:{display:"flex",justifyContent:"space-between",gap:2,mt:2},button:{fontFamily:"Staatliches, sans-serif",fontSize:"1.1rem",py:1,px:3,borderRadius:"20px",textTransform:"none"},primaryButton:{bgcolor:tr.primaryLight,color:tr.text,"&:hover":{bgcolor:tr.primary,color:tr.white}},secondaryButton:{bgcolor:tr.white,color:tr.text,border:`2px solid ${tr.primaryLight}`,"&:hover":{bgcolor:tr.primaryLight}},submitButton:{bgcolor:tr.success,color:tr.white,"&:hover":{bgcolor:"#388e3c"}},resultsContainer:{flex:1,overflowY:"auto",px:2},scoreCard:{bgcolor:tr.white,borderRadius:"12px",p:3,mb:3,textAlign:"center",boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.1)"},scoreText:{fontSize:"3rem",fontFamily:"Staatliches, sans-serif",color:tr.primary},feedbackCard:{bgcolor:tr.white,borderRadius:"8px",p:2,mb:2,border:`1px solid ${tr.disabled}`},correctAnswer:{borderLeft:`4px solid ${tr.success}`},incorrectAnswer:{borderLeft:`4px solid ${tr.error}`}},BL="https://rag-flask-api.onrender.com",Ufe=async e=>{if(!(e!=null&&e.trim()))throw new Error("Chatbot ID is required");try{const n=await fetch(`${BL}/get_quiz?chatbot_id=${encodeURIComponent(e)}`,{method:"GET",headers:{"Content-Type":"application/json"}}),t=await n.json();if(!n.ok||!t.success)throw new Error(t.error||"Failed to fetch quiz");return{quizId:t.quiz_id,questions:t.questions||[]}}catch(n){throw console.error("Error fetching quiz:",n),n}},Hfe=async(e,n,t)=>{if(!e||!n||!t||Object.keys(t).length===0)throw new Error("Invalid quiz submission");try{const r=await fetch(`${BL}/grade_quiz`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chatbot_id:e,quiz_id:n,answers:t})}),i=await r.json();if(!r.ok||!i.success)throw new Error(i.error||"Quiz grading failed");return i.summary}catch(r){throw console.error("Error grading quiz:",r),r}},Wfe=(e,n)=>{if(e)try{const t=`quiz_progress_${e}`;localStorage.setItem(t,JSON.stringify({answers:n,timestamp:new Date().toISOString()}))}catch(t){console.error("Failed to save progress:",t)}},Vfe=e=>{if(!e)return null;try{const n=`quiz_progress_${e}`,t=localStorage.getItem(n);if(!t)return null;const r=JSON.parse(t),i=new Date(r.timestamp);return(new Date-i)/(1e3*60*60)>24?(localStorage.removeItem(n),null):r.answers}catch(n){return console.error("Failed to load progress:",n),null}},Yw=e=>{if(e)try{const n=`quiz_progress_${e}`;localStorage.removeItem(n)}catch(n){console.error("Failed to clear progress:",n)}},Yfe=e=>{const n=((e==null?void 0:e.bloom_level)||(e==null?void 0:e.bloomLevel)||"").toString().toLowerCase();return n==="remember"||n==="understand"?"lower":n==="apply"?"middle":n==="analyze"||n==="evaluate"||n==="create"?"upper":"lower"},Gfe=e=>e==="easy"?5:e==="hard"?10:8,Qfe=(e,n)=>{const t=[],r=[],i=[];e.forEach(d=>{const f=Yfe(d);f==="lower"?t.push(d):f==="middle"?r.push(d):i.push(d)});const a=d=>{const f=[...d];for(let m=f.length-1;m>0;m-=1){const b=Math.floor(Math.random()*(m+1));[f[m],f[b]]=[f[b],f[m]]}return f},s=Gfe(n);let l=[];if(n==="easy"){const d=a(t),f=a(r),m=a(i);l=[...d.slice(0,s)],l.length<s&&(l=[...l,...f.slice(0,s-l.length)]),l.length<s&&(l=[...l,...m.slice(0,s-l.length)])}else if(n==="medium"){const d=a(r),f=a(t),m=a(i);l=[...d.slice(0,s)],l.length<s&&(l=[...l,...f.slice(0,s-l.length)]),l.length<s&&(l=[...l,...m.slice(0,s-l.length)])}else{const d=a(i),f=a(r),m=a(t);l=[...d.slice(0,s)],l.length<s&&(l=[...l,...f.slice(0,s-l.length)]),l.length<s&&(l=[...l,...m.slice(0,s-l.length)])}const u=Math.min(s,l.length);return{selected:l.slice(0,u),selection:{mode:n,target:s,finalCount:u},totalAvailable:{lower:t.length,middle:r.length,upper:i.length}}},Kfe=X.forwardRef(({chatbotId:e,open:n,onClose:t,difficulty:r="medium",onQuizStart:i,onQuizProgress:a,onAnswerChange:s,onQuizSubmit:l,onQuizClose:u,onError:d},f)=>{const[m,b]=X.useState(null),[g,x]=X.useState([]),[y,A]=X.useState(null),[w,C]=X.useState(0),[j,F]=X.useState({}),[M,z]=X.useState(!0),[_,L]=X.useState(!1),[$,Z]=X.useState(""),[O,T]=X.useState(!1),[R,N]=X.useState(null),G=X.useRef(null),W=X.useRef(null);X.useEffect(()=>{n&&e&&Q()},[n,e,r]),X.useEffect(()=>{if(W.current&&Object.keys(j).length>0){Wfe(W.current,j);const Te=g.length,Le=Te>0?Object.keys(j).length/Te*100:0;a==null||a({quizId:m==null?void 0:m.quizId,answers:j,percentComplete:Le,selection:y||void 0})}},[j,W.current,g.length]);const Q=async()=>{z(!0),Z(""),T(!1),N(null),C(0),F({}),x([]),A(null),G.current=new Date;try{const Te=await Ufe(e),{selected:Le,selection:He,totalAvailable:Ye}=Qfe((Te==null?void 0:Te.questions)||[],r);b(Te),x(Le),A(He);const V=`${Te.quizId}::${r}`;W.current=V;const Ae=Vfe(V);Ae&&F(Ae),i==null||i({quizId:Te.quizId,chatbotId:e,startedAt:G.current,selection:He,totalAvailable:Ye})}catch(Te){const Le=(Te==null?void 0:Te.message)||"Failed to load quiz";Z(Le),d==null||d(Te,"load")}finally{z(!1)}},J=g[w],se=g.length||0,U=se>0?(w+1)/se*100:0,le=Te=>{if(!J)return;const Le={...j,[J.id]:Te};F(Le),s==null||s({quizId:m==null?void 0:m.quizId,questionId:J.id,value:Te,answers:Le})},q=()=>{w<se-1&&C(Te=>Te+1)},B=()=>{w>0&&C(Te=>Te-1)},ee=Te=>C(Te),re=async()=>{if(!m)return;const Te=g.filter(Le=>!j[Le.id]);if(Te.length>0){Z(`Please answer all questions (${Te.length} remaining)`);return}L(!0),Z("");try{const Le=new Date,He={};g.forEach(V=>{He[V.id]=j[V.id]});const Ye=await Hfe(e,m.quizId,He);N(Ye),T(!0),W.current&&Yw(W.current),l==null||l({quizId:m.quizId,chatbotId:e,startedAt:G.current,submittedAt:Le,answers:He,summary:Ye,selection:y||void 0})}catch(Le){const He=`Failed to submit quiz: ${(Le==null?void 0:Le.message)||""}`.trim();Z(He),d==null||d(Le,"submit")}finally{L(!1)}},oe=()=>{W.current&&Yw(W.current),u==null||u({quizId:m==null?void 0:m.quizId,chatbotId:e,answers:j,summary:R,completed:O,closedAt:new Date,selection:y||void 0}),t()},Ce=(Te,Le)=>{const He=Le===w,Ye=!!j[Te];return{isCurrent:He,hasAnswer:Ye}},ye=()=>{const Te=(J==null?void 0:J.answer_type)||"text",Le=j[J==null?void 0:J.id]||"";return Qt.jsx(Jt,{multiline:Te==="long_answer",rows:Te==="long_answer"?6:1,value:Le,onChange:He=>le(He.target.value),placeholder:"Enter your answer here...",sx:Qn.answerInput,disabled:_})};if(X.useImperativeHandle(f,()=>({reloadQuiz:Q,clearProgress:()=>W.current&&Yw(W.current),submit:re,getAnswers:()=>j,getSummary:()=>R,close:oe})),O&&R){const Te=(()=>{const He=R==null?void 0:R.percent;if(typeof He=="number"&&Number.isFinite(He))return Math.round(He);const Ye=R==null?void 0:R.score;if(typeof Ye=="number"&&Number.isFinite(Ye))return Math.round(Ye);const V=Number(R==null?void 0:R.total_score)||0,Ae=Number(R==null?void 0:R.total_max)||0;return Ae>0?Math.round(V/Ae*100):0})(),Le=R.items||R.questions||{};return Qt.jsx(vx,{open:n,onClose:oe,children:Qt.jsxs(de,{sx:Qn.modal,children:[Qt.jsxs(de,{sx:Qn.header,children:[Qt.jsx(he,{sx:Qn.title,children:"Quiz Results"}),Qt.jsx(_n,{onClick:oe,sx:Qn.closeButton,children:Qt.jsx(Fj,{})})]}),Qt.jsxs(de,{sx:Qn.resultsContainer,children:[Qt.jsxs(de,{sx:Qn.scoreCard,children:[Qt.jsxs(he,{sx:Qn.scoreText,children:[Te,"%"]}),Qt.jsx(he,{variant:"h6",sx:{fontFamily:"Gabarito"},children:"Final Score"}),R.total_score!==void 0&&Qt.jsxs(he,{variant:"body2",sx:{mt:1},children:[R.total_score," / ",R.total_max," points"]})]}),R.feedback&&Qt.jsx(rr,{severity:"info",sx:{mb:2},children:R.feedback}),!!g.length&&!!Object.keys(Le).length&&Qt.jsxs(de,{children:[Qt.jsx(he,{variant:"h6",sx:{mb:2,fontFamily:"Staatliches"},children:"Question Breakdown"}),g.map(He=>{const Ye=Le[He.id]||{},V=Ye.score??0,Ae=Ye.verdict==="correct"||V>=70||Ye.passed===!0;return Qt.jsxs(de,{sx:{...Qn.feedbackCard,...Ae?Qn.correctAnswer:Qn.incorrectAnswer},children:[Qt.jsxs(he,{variant:"body2",sx:{mb:1},children:["Q: ",(He==null?void 0:He.question)||"Question not found"]}),Qt.jsxs(he,{variant:"caption",color:"textSecondary",children:["Your answer: ",j[He.id]]}),Ye.score!==void 0&&Qt.jsxs(he,{variant:"caption",display:"block",sx:{mt:1},children:["Score: ",V,"/",Ye.max_score||100]}),(Ye.feedback||Ye.reasoning)&&Qt.jsx(he,{variant:"caption",display:"block",sx:{mt:1},children:Ye.feedback||Ye.reasoning})]},He.id)})]})]}),Qt.jsx(Ct,{fullWidth:!0,variant:"contained",onClick:oe,sx:{...Qn.button,...Qn.primaryButton,mt:2},children:"Close"})]})})}const Se=y&&y.finalCount<y.target;return Qt.jsx(vx,{open:n,onClose:oe,children:Qt.jsxs(de,{sx:Qn.modal,children:[Qt.jsxs(de,{sx:Qn.header,children:[Qt.jsx(he,{sx:Qn.title,children:"Quiz"}),Qt.jsx(_n,{onClick:oe,sx:Qn.closeButton,children:Qt.jsx(Fj,{})})]}),y&&Qt.jsx(de,{sx:{mb:1},children:Qt.jsx(cr,{label:`Mode: ${y.mode}  ${y.finalCount} Qs`,size:"small",sx:Qn.categoryBadge})}),Se&&Qt.jsxs(rr,{severity:"info",sx:{mb:2},children:["Not enough questions available for ",y.mode,". Showing"," ",y.finalCount," instead of ",y.target,"."]}),M?Qt.jsx(de,{sx:{display:"flex",justifyContent:"center",py:5},children:Qt.jsx(Zr,{})}):$&&!m?Qt.jsx(rr,{severity:"error",children:$}):m&&J?Qt.jsxs(Qt.Fragment,{children:[Qt.jsx(Qo,{variant:"determinate",value:U,sx:Qn.progressBar}),Qt.jsxs(de,{sx:Qn.questionCard,children:[Qt.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[Qt.jsxs(he,{variant:"h6",sx:{fontFamily:"Staatliches"},children:["Question ",w+1," of ",se]}),J.category&&Qt.jsx(cr,{label:J.category,size:"small",sx:Qn.categoryBadge})]}),Qt.jsx(he,{sx:Qn.questionText,children:J.question}),ye()]}),$&&Qt.jsx(rr,{severity:"error",sx:{mb:2},children:$}),Qt.jsx(de,{sx:Qn.navigationDots,children:g.map((Te,Le)=>{const{isCurrent:He,hasAnswer:Ye}=Ce(Te.id,Le);return Qt.jsx(de,{component:"button",onClick:()=>ee(Le),title:Ye?"Answered":"Unanswered",sx:{...Qn.dot,...Ye&&!He&&Qn.dotStates.answered,...!Ye&&!He&&Qn.dotStates.unanswered,...He&&Qn.dotStates.current}},Te.id)})}),Qt.jsxs(de,{sx:Qn.navigationButtons,children:[Qt.jsx(Ct,{startIcon:Qt.jsx(Mfe,{}),onClick:B,disabled:w===0,sx:{...Qn.button,...Qn.secondaryButton},children:"Previous"}),w===se-1?Qt.jsx(Ct,{onClick:re,disabled:_,endIcon:Qt.jsx($fe,{}),sx:{...Qn.button,...Qn.submitButton},children:_?Qt.jsx(Zr,{size:20}):"Submit Quiz"}):Qt.jsx(Ct,{endIcon:Qt.jsx(zfe,{}),onClick:q,sx:{...Qn.button,...Qn.primaryButton},children:"Next"})]})]}):Qt.jsx(rr,{severity:"info",children:"No quiz available"})]})})}),Bj={totalQuizzes:0,completedQuizzes:0,averageScore:0,difficultyBreakdown:{easy:0,medium:0,hard:0}},$L=gp()(qg(dv((e,n)=>({currentSession:null,sessions:[],statistics:Bj,isModalOpen:!1,currentChatbotId:null,currentDifficulty:"medium",loading:!1,error:null,isQuizActive:!1,currentAnswers:{},lastSummary:null,openQuizModal:(t,r="medium")=>{e({isModalOpen:!0,currentChatbotId:t,currentDifficulty:r,error:null})},closeQuizModal:()=>{e({isModalOpen:!1,error:null})},setDifficulty:t=>{e({currentDifficulty:t})},setLoading:t=>{e({loading:t})},setError:t=>{e({error:t})},startQuiz:t=>{const r={id:`session_${Date.now()}`,quizId:t.quizId,chatbotId:t.chatbotId,userId:"",difficulty:t.selection.mode,startedAt:t.startedAt,completed:!1,answers:{}};e({currentSession:r,isQuizActive:!0,currentAnswers:{},lastSummary:null,error:null})},updateAnswers:t=>{const{currentSession:r}=n();if(!r)return;const i={...t.answers};e({currentAnswers:i,currentSession:{...r,answers:i}})},submitQuiz:t=>{console.log(" Quiz Store: Quiz submitted. Data should be saved by quiz modal API:",t),e({lastSummary:t.summary,isQuizActive:!1})},closeQuiz:t=>{console.log(" Quiz Store: Quiz closed. Data handled by quiz modal API:",t),e({currentSession:null,isQuizActive:!1,isModalOpen:!1,currentAnswers:{},lastSummary:t.completed?t.summary:null})},addSession:t=>{e(r=>({sessions:[...r.sessions,t]}))},updateSession:(t,r)=>{e(i=>{var a;return{sessions:i.sessions.map(s=>s.id===t?{...s,...r}:s),currentSession:((a=i.currentSession)==null?void 0:a.id)===t?{...i.currentSession,...r}:i.currentSession}})},deleteSession:t=>{e(r=>({sessions:r.sessions.filter(i=>i.id!==t)}))},clearCurrentSession:()=>{e({currentSession:null,isQuizActive:!1,currentAnswers:{},lastSummary:null})},updateStatistics:()=>{const{sessions:t}=n(),r=t.filter(l=>l.completed),i=r.reduce((l,u)=>{var d;return l+(((d=u.summary)==null?void 0:d.percent)||0)},0),a=t.reduce((l,u)=>({...l,[u.difficulty]:l[u.difficulty]+1}),{easy:0,medium:0,hard:0}),s={totalQuizzes:t.length,completedQuizzes:r.length,averageScore:r.length>0?i/r.length:0,difficultyBreakdown:a,lastQuizDate:t.length>0?t[t.length-1].startedAt:void 0};e({statistics:s})},saveSessionToFirestore:async t=>{try{const{db:r}=await wi(async()=>{const{db:s}=await Promise.resolve().then(()=>Kh);return{db:s}},void 0),{doc:i,setDoc:a}=await wi(async()=>{const{doc:s,setDoc:l}=await import("./firebase-CiLlnz7t.js").then(u=>u.N);return{doc:s,setDoc:l}},[]);await a(i(r,"quizSessions",t.id),{...t,timestamp:new Date().toISOString()}),console.log("Quiz session saved to Firestore:",t.id)}catch(r){console.error("Failed to save quiz session:",r),e({error:"Failed to save quiz session"})}},fetchUserSessions:async t=>{try{e({loading:!0,error:null});const{db:r}=await wi(async()=>{const{db:b}=await Promise.resolve().then(()=>Kh);return{db:b}},void 0),{collection:i,query:a,where:s,getDocs:l,orderBy:u}=await wi(async()=>{const{collection:b,query:g,where:x,getDocs:y,orderBy:A}=await import("./firebase-CiLlnz7t.js").then(w=>w.N);return{collection:b,query:g,where:x,getDocs:y,orderBy:A}},[]),d=a(i(r,"quizSessions"),s("userId","==",t),u("startedAt","desc")),m=(await l(d)).docs.map(b=>({id:b.id,...b.data()}));e({sessions:m,loading:!1}),n().updateStatistics()}catch(r){r instanceof Error&&r.message.includes("permissions")?(console.warn("User does not have permission to access quiz sessions"),e({sessions:[],loading:!1,error:null})):(console.error("Failed to fetch quiz sessions:",r),e({error:"Failed to fetch quiz sessions",loading:!1}))}},reset:()=>{e({currentSession:null,sessions:[],statistics:Bj,isModalOpen:!1,currentChatbotId:null,currentDifficulty:"medium",loading:!1,error:null,isQuizActive:!1,currentAnswers:{},lastSummary:null})}}),{name:"quiz-store",partialize:e=>({currentDifficulty:e.currentDifficulty}),merge:(e,n)=>({...n,...e||{},currentDifficulty:(e==null?void 0:e.currentDifficulty)||"medium"})}),{name:"quiz-store"})),Yf=Xn(),Gf={QUIZ_SESSIONS:"quizSessions",QUIZ_EVENTS:"quizEvents"},Xfe=async(e,n)=>{try{const t=Si.now(),r=Si.fromDate(new Date(e.startedAt)),i=5*1e3,a=Si.fromMillis(r.toMillis()-i),s=Si.fromMillis(r.toMillis()+i),l=Ol(ln(Yf,Gf.QUIZ_SESSIONS),Ri("quizId","==",e.quizId),Ri("userId","==",n),Ri("startedAt",">=",a),Ri("startedAt","<=",s),ov(1)),u=await Ci(l);if(!u.empty){console.log(" Quiz session with same start time already exists, skipping duplicate:",{quizId:e.quizId,startedAt:e.startedAt,userId:n.substring(0,8)+"...",existingSessionId:u.docs[0].id});return}const d={quizId:e.quizId,chatbotId:e.chatbotId,userId:n,startedAt:Si.fromDate(new Date(e.startedAt)),completed:!1,difficulty:e.selection.mode,selection:{mode:e.selection.mode,target:e.selection.target,finalCount:e.selection.finalCount},createdAt:t,updatedAt:t},f={quizId:e.quizId,chatbotId:e.chatbotId,userId:n,eventType:"quiz_started",timestamp:t,data:e,createdAt:t};await Promise.all([Ai(ln(Yf,Gf.QUIZ_SESSIONS),d),Ai(ln(Yf,Gf.QUIZ_EVENTS),f)]),console.log(" Quiz start event saved to Firestore:",{quizId:e.quizId,difficulty:e.selection.mode,userId:n.substring(0,8)+"..."})}catch(t){throw console.error(" Error saving quiz start event:",t),t}},Zfe=async(e,n)=>{try{const t=Si.now(),r={quizId:e.quizId,chatbotId:e.chatbotId,userId:n,eventType:"answer_changed",timestamp:t,data:{quizId:e.quizId,chatbotId:e.chatbotId,questionId:e.questionId,value:e.value,answers:e.answers},createdAt:t};await Ai(ln(Yf,Gf.QUIZ_EVENTS),r),console.log(" Answer change event saved to Firestore:",{quizId:e.quizId,questionId:e.questionId,userId:n.substring(0,8)+"..."})}catch(t){console.error(" Error saving answer change event:",t)}},Jfe=async(e,n)=>{try{const t=Si.now(),r=Si.fromMillis(t.toMillis()-3600*1e3),i=Ol(ln(Yf,Gf.QUIZ_SESSIONS),Ri("quizId","==",e.quizId),Ri("userId","==",n),Ri("completed","==",!1),Ri("createdAt",">=",r),sv("createdAt","desc")),a=await Ci(i);if(a.empty)throw console.error(" No incomplete session found for quiz submission - this should not happen!",{quizId:e.quizId,userId:n.substring(0,8)+"...",submittedAt:e.submittedAt}),new Error("No matching quiz session found for submission");{const l=a.docs[0],u=l.ref,d=l.data(),f={submittedAt:Si.fromDate(new Date(e.submittedAt)),completed:!0,finalAnswers:e.answers,summary:e.summary,updatedAt:t};await Hr(u,f),console.log(" Updated quiz session:",{quizId:e.quizId,difficulty:d.difficulty,score:`${e.summary.total_score}/${e.summary.total_max}`,userId:n.substring(0,8)+"..."})}const s={quizId:e.quizId,chatbotId:e.chatbotId,userId:n,eventType:"quiz_submitted",timestamp:t,data:e,createdAt:t};await Ai(ln(Yf,Gf.QUIZ_EVENTS),s),console.log(" Quiz submission saved to Firestore:",{quizId:e.quizId,score:`${e.summary.total_score}/${e.summary.total_max} (${e.summary.percent}%)`})}catch(t){throw console.error(" Error saving quiz submission:",t),t}},ehe=async(e,n)=>{try{const t=Si.now(),r=Ol(ln(Yf,Gf.QUIZ_SESSIONS),Ri("quizId","==",e.quizId),Ri("userId","==",n)),i=await Ci(r);if(!i.empty){const l=i.docs[0].ref,u={closedAt:Si.fromDate(new Date(e.closedAt)),updatedAt:t};e.completed&&e.summary&&(u.completed=!0,u.finalAnswers=e.answers,u.summary=e.summary),await Hr(l,u)}const a={quizId:e.quizId,chatbotId:e.chatbotId,userId:n,eventType:"quiz_closed",timestamp:t,data:e,createdAt:t};await Ai(ln(Yf,Gf.QUIZ_EVENTS),a),console.log(" Quiz close event saved to Firestore:",{quizId:e.quizId,completed:e.completed})}catch(t){throw console.error(" Error saving quiz close event:",t),t}},UL=X.forwardRef(({chatbotId:e,difficulty:n,open:t,onClose:r,eventHandlers:i},a)=>{const{userDetails:s}=zi(),l=X.useRef(null),{startQuiz:u,updateAnswers:d,submitQuiz:f,closeQuiz:m,setError:b}=$L(),g=X.useCallback(C=>{console.log("Quiz started:",C),u(C),s!=null&&s.uid&&Xfe(C,s.uid).catch(j=>{console.error("Failed to save quiz start event:",j)}),i!=null&&i.onQuizStart&&i.onQuizStart(C)},[s==null?void 0:s.uid,u,i]),x=X.useCallback(C=>{if(console.log("Answer changed:",C),d(C),s!=null&&s.uid){const j={...C,chatbotId:C.chatbotId||e};Zfe(j,s.uid).catch(F=>{console.warn("Failed to save answer change event:",F)})}i!=null&&i.onAnswerChange&&i.onAnswerChange(C)},[d,i,s==null?void 0:s.uid,e]),y=X.useCallback(C=>{console.log("Quiz submitted:",C),f(C),s!=null&&s.uid&&Jfe(C,s.uid).catch(j=>{console.error("Failed to save quiz submission event:",j)}),i!=null&&i.onQuizSubmit&&i.onQuizSubmit(C)},[f,i,s==null?void 0:s.uid]),A=X.useCallback(C=>{console.log("Quiz closed:",C),m(C),s!=null&&s.uid&&ehe(C,s.uid).catch(j=>{console.error("Failed to save quiz close event:",j)}),i!=null&&i.onQuizClose&&i.onQuizClose(C)},[m,i,s==null?void 0:s.uid]),w=X.useCallback((C,j)=>{console.error("Error in",j,C),b(`Quiz ${j} failed: ${C.message}`),i!=null&&i.onError&&i.onError(C,j)},[b,i]);return X.useImperativeHandle(a,()=>({reloadQuiz:()=>{l.current&&l.current.reloadQuiz()},clearProgress:()=>{l.current&&l.current.clearProgress()},submit:()=>{l.current&&l.current.submit()},getAnswers:()=>l.current?l.current.getAnswers():{},getSummary:()=>l.current?l.current.getSummary():null,close:()=>{l.current&&l.current.close(),r()}})),h.jsx(Kfe,{ref:l,chatbotId:e,open:t,onClose:r,difficulty:n,onQuizStart:g,onAnswerChange:x,onQuizSubmit:y,onQuizClose:A,onError:w})});UL.displayName="QuizWrapper";const the=({onStartQuiz:e,disabled:n=!1})=>{const[t,r]=X.useState(null),i=!!t,a=d=>{r(d.currentTarget)},s=()=>{r(null)},l=d=>{e(d),s()},u=[{value:"easy",description:"~5 questions",icon:h.jsx(Od,{color:"success"}),color:"success"},{value:"medium",description:"~8 questions",icon:h.jsx(M3,{color:"warning"}),color:"warning"},{value:"hard",description:"Up to 10 questions",icon:h.jsx(F3,{color:"error"}),color:"error"}];return h.jsxs(h.Fragment,{children:[h.jsx(Ct,{variant:"contained",onClick:a,disabled:n,startIcon:i?h.jsx(bx,{}):h.jsx(Ic,{}),sx:{background:"#0B53C0",color:"white",fontFamily:"Staatliches, sans-serif",fontSize:"1rem",fontWeight:"bold",px:3,py:1.5,borderRadius:"12px",textTransform:"none","&:hover":{background:"#064a9e",boxShadow:"0px 4px 12px rgba(11, 83, 192, 0.3)"},"&:disabled":{background:"#ccc",color:"#999"},boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",transition:"all 0.2s ease-in-out"},children:"Start Quiz"}),h.jsxs(R3,{anchorEl:t,open:i,onClose:s,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"right"},PaperProps:{sx:{minWidth:300,borderRadius:2,border:"1px solid #e0e0e0",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)","& .MuiMenuItem-root":{py:1.5,px:2,borderRadius:1,mx:1,mb:.5,"&:hover":{backgroundColor:"#f5f5f5",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},"&:last-child":{mb:1}}}},children:[h.jsx(de,{sx:{px:2,py:1.5,borderBottom:"1px solid #e0e0e0",backgroundColor:"#CDDAFF"},children:h.jsx(he,{variant:"subtitle1",sx:{fontFamily:"Staatliches, sans-serif",color:"#0B53C0",fontSize:"1.1rem",textAlign:"center"},children:"Select Quiz Difficulty"})}),u.map(d=>h.jsxs(ai,{onClick:()=>l(d.value),children:[h.jsx($y,{sx:{minWidth:40},children:d.icon}),h.jsx(dc,{primary:h.jsx(he,{variant:"body1",sx:{fontFamily:"Staatliches, sans-serif",fontSize:"1.1rem",color:"#333",fontWeight:"bold"},children:d.value.charAt(0).toUpperCase()+d.value.slice(1)}),secondary:h.jsx(he,{variant:"body2",sx:{fontFamily:"Gabarito, sans-serif",color:"#666",fontSize:"0.875rem"},children:d.description})})]},d.value))]})]})},v0="ce5f7921-a3a0-4ea7-b95f-10fe41becda5",nhe=({defaultDifficulty:e="medium",position:n="fixed"})=>{const{userDetails:t}=zi(),[r]=Pg(),i=X.useRef(null),{isModalOpen:a,currentChatbotId:s,currentDifficulty:l,statistics:u,openQuizModal:d,closeQuizModal:f,setDifficulty:m,fetchUserSessions:b,setError:g}=$L(),[x,y]=st.useState(v0);X.useEffect(()=>{const F=r.get("material");if(!F){x!==v0&&y(v0);return}(async()=>{try{console.log(" Fetching chatbot ID for quiz material:",F);const z=Xn(),_=ln(z,"chatbots"),L=Ol(_,Ri("material.id","==",F)),$=await Ci(L);if($.empty)console.log(` No chatbot found for material ${F}, using default for quiz:`,v0),y(v0);else{const Z=$.docs[0].data();console.log(` Found chatbot for quiz material ${F}:`,Z.chatbotId),y(Z.chatbotId)}}catch(z){console.error("Failed to fetch chatbot for quiz:",z),g("Failed to load quiz for this material"),y(v0)}})()},[r,x,g]),X.useEffect(()=>{t!=null&&t.uid&&(t.isAdmin||t.isSuperAdmin)&&b(t.uid)},[t==null?void 0:t.uid,t==null?void 0:t.isAdmin,t==null?void 0:t.isSuperAdmin,b]),X.useEffect(()=>{m(e)},[e,m]);const A=X.useCallback(F=>{x?d(x,F):g("No chatbot available for quiz")},[x,d,g]),w=X.useCallback(()=>{f()},[f]);if(!(t!=null&&t.uid)||!r.get("material"))return null;const j=n==="fixed"?{position:"fixed",bottom:120,right:16,zIndex:1e3}:{position:"relative"};return h.jsxs(h.Fragment,{children:[h.jsx(de,{sx:j,children:h.jsx(the,{onStartQuiz:A,disabled:!x})}),a&&s&&h.jsx(UL,{ref:i,chatbotId:s,difficulty:l,open:a,onClose:w,eventHandlers:{onQuizStart:F=>{},onQuizSubmit:F=>{},onError:(F,M)=>{console.error("Quiz error:",M,F)}}})]})},rhe=({children:e})=>h.jsxs(de,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh",backgroundColor:K.background.primary},children:[h.jsx(de,{component:"header",sx:{height:"12.5vh",minHeight:90,maxHeight:120,zIndex:1e3,flexShrink:0,position:"relative"},children:h.jsx(nee,{})}),h.jsx(de,{component:"main",sx:{flex:1,display:"flex",minHeight:0},children:h.jsx(tee,{children:e})}),h.jsx(de,{component:"footer",sx:{height:"10vh",minHeight:70,maxHeight:100,flexShrink:0},children:h.jsx(ree,{})}),h.jsx(lue,{}),h.jsx(nhe,{}),h.jsx(JM,{})]}),ihe=()=>{const{userDetails:e,isSuperAdmin:n}=zi(),t=XJ(e,n),r=BR(t);return e!=null&&e.uid?h.jsx(rhe,{children:r}):r},ahe=()=>{const{userDetails:e,loading:n}=zi();if(n)return h.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:h.jsx(Zr,{})});const t=void 0;return e!=null&&e.uid,h.jsxs(P3,{theme:ZJ,children:[h.jsx(z3,{}),h.jsx(aM,{basename:t,future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:h.jsx(X.Suspense,{fallback:h.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:h.jsx(Zr,{})}),children:h.jsx(ihe,{})})})]})},she=document.getElementById("root"),ohe=fR.createRoot(she);ohe.render(h.jsx(TM,{children:h.jsx(ahe,{})}));export{UF as A,qT as B,cm as C,ree as D,BT as E,HF as F,Kh as G,mhe as H,So as P,vv as R,wi as _,Ft as a,kt as b,K as c,xc as d,AT as e,ya as f,F6 as g,gp as h,qg as i,ht as j,Ehe as k,i_ as l,a_ as m,Pg as n,ZM as o,dv as p,hhe as q,qd as r,$e as s,we as t,zi as u,Mi as v,RT as w,cX as x,vJ as y,$F as z};
