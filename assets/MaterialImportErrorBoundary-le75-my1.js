var l=Object.defineProperty;var d=(a,s,e)=>s in a?l(a,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[s]=e;var n=(a,s,e)=>d(a,typeof s!="symbol"?s+"":s,e);import{r as h,j as r,P as p,B as i,ay as u,T as o,A as g,q as m,s as x,bm as y,i as f,v as j,c,W as I}from"./ui-D97QkXag.js";import"./vendor-CkjDiaq4.js";class b extends h.Component{constructor(e){super(e);n(this,"logErrorToService",(e,t)=>{this.state.errorId,e.message,e.stack,t.componentStack,new Date().toISOString()});n(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorInfo:null,errorId:""}),this.props.onReset&&this.props.onReset()});n(this,"getErrorSeverity",e=>{const t=e.message.toLowerCase();return t.includes("network")||t.includes("api key")||t.includes("rate limit")?"warning":"error"});n(this,"getErrorSuggestion",e=>{const t=e.message.toLowerCase();return t.includes("api key")?"Please check your API key configuration in environment variables.":t.includes("network")||t.includes("fetch")?"Please check your internet connection and try again.":t.includes("rate limit")?"You have exceeded the API rate limit. Please wait a few minutes before trying again.":t.includes("file")||t.includes("upload")?"Please try uploading a different file or check that your file is not corrupted.":"Please try refreshing the page or contact support if the issue persists."});this.state={hasError:!1,error:null,errorInfo:null,errorId:""}}static getDerivedStateFromError(e){const t=`MI_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return{hasError:!0,error:e,errorId:t}}componentDidCatch(e,t){console.error("Material Import Error Boundary caught an error:",e,t),this.setState({errorInfo:t}),this.props.onError&&this.props.onError(e,t),this.logErrorToService(e,t)}render(){if(this.state.hasError&&this.state.error){if(this.props.fallback)return this.props.fallback;const e=this.getErrorSeverity(this.state.error),t=this.getErrorSuggestion(this.state.error);return r.jsxs(p,{elevation:3,sx:{p:3,m:2,bgcolor:"error.50",border:"1px solid",borderColor:"error.200"},children:[r.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[r.jsx(u,{color:"error",sx:{fontSize:32}}),r.jsxs(i,{children:[r.jsx(o,{variant:"h6",color:"error.main",children:"Material Import Error"}),r.jsx(o,{variant:"body2",color:"text.secondary",children:"Something went wrong while processing your material"})]})]}),r.jsxs(g,{severity:e,sx:{mb:2},children:[r.jsxs(o,{variant:"body2",children:[r.jsx("strong",{children:"Error:"})," ",this.state.error.message]}),r.jsxs(o,{variant:"body2",sx:{mt:1},children:[r.jsx("strong",{children:"Suggestion:"})," ",t]})]}),r.jsxs(m,{sx:{mb:2},children:[r.jsx(x,{expandIcon:r.jsx(f,{}),children:r.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(y,{fontSize:"small"}),r.jsxs(o,{variant:"body2",children:["Technical Details (Error ID: ",this.state.errorId,")"]})]})}),r.jsxs(j,{children:[r.jsx(o,{variant:"caption",component:"pre",sx:{bgcolor:"grey.100",p:1,borderRadius:1,overflow:"auto",whiteSpace:"pre-wrap",fontFamily:"monospace"},children:this.state.error.stack}),this.state.errorInfo&&r.jsxs(o,{variant:"caption",component:"pre",sx:{bgcolor:"grey.100",p:1,mt:1,borderRadius:1,overflow:"auto",whiteSpace:"pre-wrap",fontFamily:"monospace"},children:["Component Stack:",this.state.errorInfo.componentStack]})]})]}),r.jsxs(i,{sx:{display:"flex",gap:2,justifyContent:"center"},children:[r.jsx(c,{variant:"contained",onClick:this.handleRetry,startIcon:r.jsx(I,{}),color:"primary",children:"Try Again"}),r.jsx(c,{variant:"outlined",onClick:()=>window.location.reload(),color:"secondary",children:"Reload Page"})]}),r.jsxs(o,{variant:"caption",color:"text.secondary",sx:{display:"block",textAlign:"center",mt:2},children:["If this error persists, please take a screenshot and contact support with Error ID: ",this.state.errorId]})]})}return this.props.children}}export{b as default};
