import{j as e,B as l,a as C,T as n,a8 as U,z as he,a5 as ge,o as se,f as K,g as Q,a9 as I,Y as je,N,y as Y,I as J,O as ye,a7 as ae,a2 as Ce,x as Se,r as p,G as m,bu as ve,bv as ke,ac as ue,D as X,k as V,l as ee,m as pe,n as te,C as fe,V as Ie,W as me,P as we,aG as ne,aD as oe,af as ie,av as P,aw as O,ax as Fe,H as E,ay as $,az as De,q as L,t as q,aA as Ae,L as Te,aB as Me,p as le}from"./ui-CVI8Inx-.js";import{u as G,A as Be,c as r,e as w,b as re,g as Re,f as We,h as ze,B as Pe}from"./index-BmV201xl.js";import{P as H,R as ce,x as de,v as Z,_ as xe,I as Oe,e as _,y as Ee,i as $e,f as be}from"./firebase-DpGenoA-.js";import"./vendor-BFl3bqVE.js";const Le=()=>{const a=G(),x=()=>{a("/")};return e.jsxs(l,{children:[e.jsx(l,{className:"supplemental-header",children:e.jsx(C,{variant:"text",startIcon:e.jsx(Be,{}),onClick:x,className:"supplemental-back-button",children:"Home Page"})}),e.jsx(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:e.jsx(n,{className:"supplemental-title",children:"Course Materials"})})]})},qe=({selectedCourse:a,variant:x="contained",size:t="large",showModeToggle:d=!1,onModeChange:o,currentMode:c="manual"})=>{const h=G(),b=()=>{a&&h(`/add-material?course=${a}&mode=${d?c:"manual"}`)},y=u=>{o&&o(u)};return d?e.jsx(U,{in:!0,timeout:500,children:e.jsxs(l,{sx:{display:"flex",flexDirection:"column",gap:2,p:3,backgroundColor:r.palette.background.paper,borderRadius:w["2xl"],border:`1px solid ${r.palette.divider}`,boxShadow:r.shadows[2]},children:[e.jsx(n,{variant:"h6",sx:{fontFamily:r.typography.h6.fontFamily,fontWeight:r.typography.h6.fontWeight,color:r.palette.text.primary,textAlign:"center",mb:1},children:"Create New Material"}),e.jsx(n,{variant:"body2",sx:{color:r.palette.text.secondary,textAlign:"center",mb:2},children:"Choose how you'd like to create your material"}),e.jsxs(l,{sx:{display:"flex",gap:2},children:[e.jsx(C,{variant:c==="manual"?"contained":"outlined",startIcon:e.jsx(he,{}),onClick:()=>y("manual"),disabled:!a,sx:{flex:1,py:2,borderRadius:w.xl,textTransform:"none",fontWeight:600,...c==="manual"&&{backgroundColor:r.palette.primary.main,"&:hover":{backgroundColor:r.palette.primary.dark}},...c!=="manual"&&{borderColor:r.palette.primary.main,color:r.palette.primary.main,"&:hover":{backgroundColor:r.palette.primary.light,borderColor:r.palette.primary.dark}}},children:"Manual Entry"}),e.jsx(C,{variant:c==="ai"?"contained":"outlined",startIcon:e.jsx(ge,{}),onClick:()=>y("ai"),disabled:!a,sx:{flex:1,py:2,borderRadius:w.xl,textTransform:"none",fontWeight:600,...c==="ai"&&{backgroundColor:r.palette.secondary.main,"&:hover":{backgroundColor:r.palette.secondary.dark}},...c!=="ai"&&{borderColor:r.palette.secondary.main,color:r.palette.secondary.main,"&:hover":{backgroundColor:r.palette.secondary.light,borderColor:r.palette.secondary.dark}}},children:"AI Import"})]}),e.jsx(C,{variant:"contained",startIcon:e.jsx(se,{}),onClick:b,disabled:!a,size:t,sx:{width:"100%",py:2,borderRadius:w.xl,textTransform:"none",fontWeight:600,backgroundColor:c==="ai"?r.palette.secondary.main:r.palette.primary.main,"&:hover":{backgroundColor:c==="ai"?r.palette.secondary.dark:r.palette.primary.dark,transform:"translateY(-1px)",boxShadow:r.shadows[4]},transition:r.transitions.create(["all"],{duration:r.transitions.duration.short})},children:c==="ai"?"Import with AI":"Create Material"})]})}):e.jsx(U,{in:!0,timeout:300,children:e.jsx(C,{variant:x,startIcon:e.jsx(se,{}),onClick:b,disabled:!a,size:t,sx:{borderRadius:r.shape.borderRadius,textTransform:"none",fontWeight:600,py:t==="large"?2:t==="medium"?1.5:1,px:t==="large"?4:t==="medium"?3:2,transition:r.transitions.create(["all"],{duration:r.transitions.duration.short}),"&:hover":{transform:"translateY(-1px)",boxShadow:r.shadows[4]},...x==="contained"&&{backgroundColor:r.palette.primary.main,"&:hover":{backgroundColor:r.palette.primary.dark}},...x==="outlined"&&{borderColor:r.palette.primary.main,color:r.palette.primary.main,"&:hover":{backgroundColor:r.palette.primary.light,borderColor:r.palette.primary.dark}}},children:"Add Material"})})},Ue=a=>{const x=new Date;if(a.scheduledTimestamp){const o=a.scheduledTimestamp.toDate();return o>x?`Scheduled for ${o.toLocaleDateString()}`:`Scheduled ${o.toLocaleDateString()}`}if(a.published){const o=a.timestamp.toDate(),c=Math.floor((x.getTime()-o.getTime())/(1e3*60*60*24));if(c===0)return"Published today";if(c===1)return"Published yesterday";if(c<7)return`Published ${c} days ago`;if(c<30){const h=Math.floor(c/7);return`Published ${h} week${h>1?"s":""} ago`}else return`Published ${o.toLocaleDateString()}`}const t=a.timestamp.toDate(),d=Math.floor((x.getTime()-t.getTime())/(1e3*60*60*24));if(d===0)return"Created today";if(d===1)return"Created yesterday";if(d<7)return`Created ${d} days ago`;if(d<30){const o=Math.floor(d/7);return`Created ${o} week${o>1?"s":""} ago`}else return`Created ${t.toLocaleDateString()}`},Ne=({material:a,isCourseAdmin:x=!1,loading:t=!1,onView:d,onEdit:o,onDelete:c,onUnpublish:h,className:b})=>{const u=(g=>g.published?{label:"Published",color:r.palette.success.main,backgroundColor:r.palette.success.light,icon:e.jsx(ae,{sx:{fontSize:16}})}:g.scheduledTimestamp?{label:"Scheduled",color:r.palette.info.main,backgroundColor:r.palette.info.light,icon:e.jsx(Ce,{sx:{fontSize:16}})}:{label:"Draft",color:r.palette.warning.main,backgroundColor:r.palette.warning.light,icon:e.jsx(Se,{sx:{fontSize:16}})})(a);return t?e.jsxs(K,{className:b,sx:{height:200},children:[e.jsxs(Q,{children:[e.jsx(I,{variant:"text",width:"80%",height:32}),e.jsx(I,{variant:"text",width:"60%",height:24,sx:{mt:1}}),e.jsx(I,{variant:"rectangular",width:"100%",height:40,sx:{mt:2,borderRadius:2}})]}),e.jsxs(je,{children:[e.jsx(I,{variant:"circular",width:40,height:40}),e.jsx(I,{variant:"circular",width:40,height:40}),e.jsx(I,{variant:"circular",width:40,height:40})]})]}):e.jsx(U,{in:!0,timeout:300,children:e.jsx(K,{className:b,sx:{height:"100%",display:"flex",flexDirection:"column",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"translateY(-4px)",boxShadow:r.shadows[8]}},children:e.jsxs(Q,{sx:{flexGrow:1,pb:3,px:3,pt:3},children:[e.jsxs(l,{sx:{mb:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(N,{icon:u.icon,label:u.label,size:"small",sx:{backgroundColor:u.backgroundColor,color:u.color,fontWeight:600,"& .MuiChip-icon":{color:u.color}}}),x&&e.jsxs(l,{sx:{display:"flex",gap:.5},children:[e.jsx(Y,{title:"Edit Material",arrow:!0,children:e.jsx(J,{size:"small",onClick:g=>{g.stopPropagation(),o==null||o(a.id)},sx:{color:r.palette.primary.main,"&:hover":{backgroundColor:r.palette.primary.light,color:r.palette.primary.contrastText}},children:e.jsx(he,{fontSize:"small"})})}),e.jsx(Y,{title:"Delete Material",arrow:!0,children:e.jsx(J,{size:"small",onClick:g=>{g.stopPropagation(),c==null||c(a.id)},sx:{color:r.palette.error.main,"&:hover":{backgroundColor:r.palette.error.light,color:r.palette.error.contrastText}},children:e.jsx(ye,{fontSize:"small"})})}),a.published&&h&&e.jsx(Y,{title:"Unpublish Material",arrow:!0,children:e.jsx(J,{size:"small",onClick:g=>{g.stopPropagation(),h==null||h(a.id)},sx:{color:r.palette.warning.main,"&:hover":{backgroundColor:r.palette.warning.light,color:r.palette.warning.contrastText}},children:e.jsx(ae,{fontSize:"small"})})})]})]}),e.jsx(n,{variant:"h5",component:"h3",sx:{fontFamily:r.typography.h5.fontFamily,fontWeight:600,fontSize:{xs:"1.25rem",sm:"1.5rem"},lineHeight:1.3,color:r.palette.text.primary,mb:1,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{color:r.palette.primary.main,textDecoration:"underline",textDecorationColor:r.palette.primary.main,textDecorationThickness:"2px",textUnderlineOffset:"4px",transform:"translateY(-1px)"}},onClick:g=>{g.stopPropagation(),d==null||d(a.id)},children:a.title||"Untitled Material"}),e.jsx(l,{sx:{mt:2},children:e.jsxs(n,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.875rem",display:"flex",alignItems:"center",gap:1},children:[e.jsx(l,{component:"span",sx:{width:8,height:8,borderRadius:"50%",backgroundColor:u.color}}),Ue(a)]})})]})})})},He=({courseId:a,isCourseAdmin:x,onDeleteClick:t,onUnpublishClick:d})=>{const[o,c]=p.useState(0),[h,b]=p.useState([]),[y,u]=p.useState(!0),[g,S]=p.useState(null),{userDetails:v}=re(),T=G(),F=H(),k=[{key:"published",label:"Published",icon:"ðŸ“š"},{key:"scheduled",label:"Scheduled",icon:"â°"},{key:"saved",label:"Drafts",icon:"ðŸ’¾"}];p.useEffect(()=>{if(!a){b([]),u(!1);return}u(!0);const s=v!=null&&v.isAdmin?ce(xe(F,"materials"),Z("course","==",a),de("timestamp","desc")):ce(xe(F,"materials"),Z("course","==",a),Z("published","==",!0),de("timestamp","desc")),i=Oe(s,f=>{const j=f.docs.map(z=>({id:z.id,...z.data()}));b(j),u(!1),S(null)},f=>{console.error("Error fetching materials:",f),S("Failed to fetch materials"),u(!1)});return()=>i()},[a,F,v]);const M=(s,i)=>{c(i)},B=s=>{T(`/view-material/${s}`)},R=s=>{T(`/edit-material/${s}`)},D=s=>h.filter(i=>{switch(s){case"published":return i.published===!0;case"scheduled":return i.scheduledTimestamp&&!i.published;case"saved":return!i.published&&!i.scheduledTimestamp;default:return!1}}),W=s=>D(s).length,A=D(k[o].key);return y?e.jsxs(l,{sx:{width:"100%"},children:[e.jsx(l,{sx:{mb:4},children:e.jsx(I,{variant:"rectangular",height:60,sx:{borderRadius:2}})}),e.jsx(m,{container:!0,spacing:3,children:Array.from({length:6}).map((s,i)=>e.jsx(m,{item:!0,xs:12,sm:6,md:4,children:e.jsx(I,{variant:"rectangular",height:200,sx:{borderRadius:2}})},i))})]}):g?e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:200,p:4},children:[e.jsx(n,{variant:"h6",sx:{color:r.palette.error.main,mb:2,textAlign:"center"},children:"Error Loading Materials"}),e.jsx(n,{variant:"body2",sx:{color:r.palette.text.secondary,textAlign:"center"},children:g})]}):e.jsxs(l,{sx:{width:"100%"},children:[e.jsx(l,{sx:{mb:4},children:e.jsx(ve,{value:o,onChange:M,variant:"fullWidth",sx:{backgroundColor:r.palette.background.paper,borderRadius:w.xl,boxShadow:r.shadows[1],"& .MuiTabs-indicator":{backgroundColor:r.palette.primary.main,height:3,borderRadius:"3px 3px 0 0"},"& .MuiTabs-flexContainer":{gap:1}},children:k.map((s,i)=>{const f=W(s.key);return e.jsx(ke,{label:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(n,{variant:"button",sx:{fontWeight:600,textTransform:"none",fontSize:"0.875rem"},children:s.label}),e.jsx(N,{label:f,size:"small",sx:{backgroundColor:r.palette.primary.light,color:r.palette.primary.main,fontWeight:600,minWidth:24,height:20,fontSize:"0.75rem"}})]}),sx:{textTransform:"none",fontWeight:600,minHeight:48,color:r.palette.text.primary,"&.Mui-selected":{color:r.palette.primary.main,backgroundColor:r.palette.primary.light,borderRadius:w.xl},"&:hover":{backgroundColor:r.palette.action.hover,borderRadius:w.xl}}},s.key)})})}),A.length===0?e.jsx(ue,{maxWidth:"md",children:e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:300,textAlign:"center"},children:[e.jsxs(n,{variant:"h6",sx:{color:r.palette.text.secondary,mb:2},children:[o===0&&"No published materials yet.",o===1&&"No scheduled materials.",o===2&&"No draft materials saved."]}),e.jsxs(n,{variant:"body2",sx:{color:r.palette.text.disabled},children:[o===0&&"Published materials will appear here once you publish them.",o===1&&"Scheduled materials will appear here once you schedule them.",o===2&&"Draft materials will appear here as you work on them."]})]})}):e.jsx(U,{in:!0,timeout:300,children:e.jsx(m,{container:!0,spacing:3,children:A.map(s=>e.jsx(m,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Ne,{material:s,isCourseAdmin:x,onView:B,onEdit:R,onDelete:t,onUnpublish:d})},s.id))})})]})},Ge=({materialId:a,open:x,onClose:t,onDelete:d})=>{const o=H(),c=async()=>{const h=_(o,"materials",a);await Ee(h),d(),t()};return e.jsxs(X,{open:x,onClose:t,children:[e.jsx(V,{children:"Delete Material"}),e.jsx(ee,{children:e.jsx(pe,{children:"Are you sure you want to delete this material? This action cannot be undone."})}),e.jsxs(te,{children:[e.jsx(C,{onClick:t,color:"primary",children:"Cancel"}),e.jsx(C,{onClick:c,color:"secondary",children:"Delete"})]})]})},_e=({materialId:a,open:x,onClose:t,onUnpublish:d})=>{const o=H(),c=async()=>{const h=_(o,"materials",a);await $e(h,{published:!1}),d(),t()};return e.jsxs(X,{open:x,onClose:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(V,{id:"alert-dialog-title",children:"Unpublish Material"}),e.jsx(ee,{children:e.jsx(pe,{id:"alert-dialog-description",children:"Are you sure you want to unpublish this material? It will no longer be visible to users until it is published again."})}),e.jsxs(te,{children:[e.jsx(C,{onClick:t,color:"primary",children:"Cancel"}),e.jsx(C,{onClick:c,color:"error",autoFocus:!0,children:"Unpublish"})]})]})},Ye=({initialCourse:a})=>{const{userDetails:x}=re(),t=H(),[d,o]=p.useState(a??null),[c,h]=p.useState(!1),[b,y]=p.useState(null),[u,g]=p.useState({open:!1,materialId:null}),[S,v]=p.useState(null),[T,F]=p.useState(!1),k=p.useCallback(async()=>{if(d)try{F(!0);const i=_(t,"courses",d),f=await be(i);if(f.exists()){const j=f.data(),z=(j==null?void 0:j.courseAdmin)||[];h(z.includes(x==null?void 0:x.uid))}else h(!1)}catch(i){console.error("Error fetching course admin status:",i),v("Failed to verify course permissions")}finally{F(!1)}},[d,t,x]);p.useEffect(()=>{d&&k()},[d,k]),p.useEffect(()=>{a&&d!==a&&o(a)},[a,d]);const M=i=>{y(i)},B=()=>{y(null)},R=()=>{console.log("Material deleted:",b),y(null)},D=i=>{g({open:!0,materialId:i})},W=()=>{console.log("Material unpublished:",u.materialId),g({open:!1,materialId:null})},A=()=>{g({open:!1,materialId:null})},s=()=>{v(null)};return e.jsxs(l,{sx:{width:"100%"},children:[d?e.jsx(U,{in:!0,timeout:500,children:e.jsx(l,{children:e.jsx(He,{courseId:d,isCourseAdmin:c,onDeleteClick:M,onUnpublishClick:D})})}):e.jsx(ue,{maxWidth:"md",children:e.jsxs(l,{sx:{textAlign:"center",py:8,px:4,backgroundColor:r.palette.background.paper,borderRadius:w["2xl"],border:`1px solid ${r.palette.divider}`},children:[e.jsx(n,{variant:"h5",sx:{fontFamily:r.typography.h5.fontFamily,fontWeight:r.typography.h5.fontWeight,color:r.palette.text.secondary,mb:2},children:"Select a Course"}),e.jsx(n,{variant:"body1",sx:{color:r.palette.text.secondary,maxWidth:400,mx:"auto"},children:"Please select a course from the dropdown above to view and manage course materials."})]})}),T&&e.jsx(l,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:4},children:e.jsx(fe,{size:40,sx:{color:r.palette.primary.main}})}),b&&e.jsx(Ge,{materialId:b,open:!!b,onClose:B,onDelete:R}),u.materialId&&e.jsx(_e,{materialId:u.materialId,open:u.open,onClose:A,onUnpublish:W}),S&&e.jsx(Ie,{open:!!S,autoHideDuration:6e3,onClose:s,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(me,{onClose:s,severity:"error",sx:{backgroundColor:r.palette.error.light,color:r.palette.error.contrastText,"& .MuiAlert-icon":{color:r.palette.error.main}},children:S})})]})},Je=({courses:a})=>{const x=G();return e.jsxs(l,{sx:{width:"100%",padding:4},children:[e.jsx(n,{variant:"h5",align:"center",sx:{mt:3,pb:2,fontFamily:"Staatliches, sans-serif",fontSize:"2rem",color:"#00695c",textTransform:"uppercase",letterSpacing:"1px"},children:"Select a Course"}),e.jsx(m,{container:!0,spacing:4,justifyContent:"center",children:a.map(t=>e.jsx(m,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(K,{onClick:()=>x(`/supplemental-materials?course=${t.id}`),sx:{cursor:"pointer",borderRadius:"15px",transition:"transform 0.3s, box-shadow 0.3s","&:hover":{transform:"scale(1.05)",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.1)"},boxShadow:"0 3px 10px rgba(0, 0, 0, 0.1)"},children:e.jsxs(Q,{sx:{textAlign:"center",padding:3,backgroundColor:"#e0f7fa","&:hover":{backgroundColor:"#b2ebf2"}},children:[e.jsx(n,{variant:"h5",sx:{fontFamily:"Staatliches, sans-serif",fontSize:"1.5rem",color:"#006064"},children:t.number}),e.jsx(n,{variant:"body1",sx:{fontFamily:"Gabarito, sans-serif",fontSize:"1rem",color:"#004d40",marginTop:1},children:t.title})]})})},t.id))})]})},Ze=({courseId:a,isAdmin:x=!1})=>{var R,D,W,A;const[t,d]=p.useState(null),[o,c]=p.useState(null),[h,b]=p.useState(!0),[y,u]=p.useState(null),[g,S]=p.useState(!1),v=H();p.useEffect(()=>{a&&(async()=>{try{b(!0);const i=_(v,"courses",a),f=await be(i);if(f.exists()){const j=f.data();d(j.additionalInfo||null),c(j.syllabusFile||null)}else u("Course not found")}catch(i){console.error("Error fetching course additional info:",i),u("Failed to load course information")}finally{b(!1)}})()},[a,v]);const T=()=>{o!=null&&o.url&&window.open(o.url,"_blank")},k=(()=>{if(!t)return{};const s=new Set(["contactInfo","policies","additionalResources","labSpecific","textbooks","gradingPolicy","assignments","prerequisites","lastUpdated"]),i={};return Object.keys(t).forEach(f=>{!s.has(f)&&t[f]!=null&&(i[f]=t[f])}),i})(),M=Object.keys(k).length>0,B=t&&(t.contactInfo||t.policies||t.additionalResources||t.labSpecific||((R=t.textbooks)==null?void 0:R.length)||((D=t.gradingPolicy)==null?void 0:D.length)||((W=t.assignments)==null?void 0:W.length)||((A=t.prerequisites)==null?void 0:A.length)||M);return h?e.jsx(l,{sx:{display:"flex",justifyContent:"center",p:3},children:e.jsx(fe,{})}):y?e.jsx(me,{severity:"error",sx:{mb:3},children:y}):!B&&!o?null:e.jsxs(we,{sx:{p:3,mb:4,backgroundColor:"#f8f9fa",borderRadius:"15px",border:"1px solid #e3f2fd"},children:[e.jsxs(n,{variant:"h4",sx:{mb:3,display:"flex",alignItems:"center",gap:1,fontFamily:"Staatliches, sans-serif",fontWeight:"bold",color:"#0B53C0",fontSize:"2rem"},children:[e.jsx(ne,{sx:{color:"#0B53C0"}}),"Course Information"]}),o&&e.jsx(l,{sx:{mb:3},children:e.jsx(C,{variant:"outlined",startIcon:e.jsx(ie,{}),endIcon:e.jsx(oe,{}),onClick:()=>S(!0),sx:{mb:2,fontFamily:"Staatliches, sans-serif",fontSize:"1.2rem",textTransform:"none",borderRadius:"15px",backgroundColor:"#CDDAFF",color:"#0B53C0",border:"1px solid #0B53C0","&:hover":{backgroundColor:"#0B53C0",color:"#FFFFFF"}},children:"Syllabus"})}),B&&e.jsxs(l,{sx:{mb:2},children:[(t==null?void 0:t.contactInfo)&&Object.keys(t.contactInfo).length>0&&e.jsxs(P,{children:[e.jsx(O,{expandIcon:e.jsx(E,{sx:{color:"#0B53C0"}}),sx:{"&:hover":{backgroundColor:"#f0f7ff !important"},"&.Mui-expanded":{backgroundColor:"#f0f7ff"},backgroundColor:"transparent"},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Fe,{sx:{color:"#0B53C0"}}),e.jsx(n,{variant:"h6",sx:{fontFamily:"Staatliches, sans-serif",fontWeight:"bold",color:"#0B53C0",fontSize:"1.25rem"},children:"Contact Information"})]})}),e.jsx($,{children:e.jsxs(m,{container:!0,spacing:2,children:[t.contactInfo.email&&e.jsxs(m,{item:!0,xs:12,md:6,children:[e.jsx(n,{variant:"body2",color:"text.secondary",children:"Email"}),e.jsx(n,{variant:"body1",children:t.contactInfo.email})]}),t.contactInfo.phone&&e.jsxs(m,{item:!0,xs:12,md:6,children:[e.jsx(n,{variant:"body2",color:"text.secondary",children:"Phone"}),e.jsx(n,{variant:"body1",children:t.contactInfo.phone})]}),t.contactInfo.office&&e.jsxs(m,{item:!0,xs:12,md:6,children:[e.jsx(n,{variant:"body2",color:"text.secondary",children:"Office"}),e.jsx(n,{variant:"body1",children:t.contactInfo.office})]}),t.contactInfo.officeHours&&e.jsxs(m,{item:!0,xs:12,md:6,children:[e.jsx(n,{variant:"body2",color:"text.secondary",children:"Office Hours"}),e.jsx(n,{variant:"body1",children:t.contactInfo.officeHours})]}),t.contactInfo.website&&e.jsxs(m,{item:!0,xs:12,children:[e.jsx(n,{variant:"body2",color:"text.secondary",children:"Website"}),e.jsx(n,{variant:"body1",children:e.jsx("a",{href:t.contactInfo.website,target:"_blank",rel:"noopener noreferrer",children:t.contactInfo.website})})]})]})})]}),(t==null?void 0:t.textbooks)&&t.textbooks.length>0&&e.jsxs(P,{children:[e.jsx(O,{expandIcon:e.jsx(E,{sx:{color:"#0B53C0"}}),sx:{"&:hover":{backgroundColor:"#f0f7ff !important"},"&.Mui-expanded":{backgroundColor:"#f0f7ff"},backgroundColor:"transparent"},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(De,{sx:{color:"#0B53C0"}}),e.jsx(n,{variant:"h6",sx:{fontFamily:"Staatliches, sans-serif",fontWeight:"bold",color:"#0B53C0",fontSize:"1.25rem"},children:"Textbooks & Resources"})]})}),e.jsx($,{children:e.jsx(L,{children:t.textbooks.map((s,i)=>e.jsxs(q,{sx:{px:0,flexDirection:"column",alignItems:"flex-start"},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(n,{variant:"body1",sx:{fontWeight:"medium"},children:s.title}),e.jsx(N,{label:s.required?"Required":"Optional",size:"small",color:s.required?"error":"default"})]}),e.jsxs(l,{sx:{pl:0},children:[s.author&&e.jsxs(n,{variant:"body2",color:"text.secondary",children:["by ",s.author]}),s.edition&&e.jsxs(n,{variant:"body2",color:"text.secondary",children:["Edition: ",s.edition]}),s.isbn&&e.jsxs(n,{variant:"body2",color:"text.secondary",children:["ISBN: ",s.isbn]})]})]},i))})})]}),(t==null?void 0:t.gradingPolicy)&&t.gradingPolicy.length>0&&e.jsxs(P,{children:[e.jsx(O,{expandIcon:e.jsx(E,{sx:{color:"#0B53C0"}}),sx:{"&:hover":{backgroundColor:"#f0f7ff !important"},"&.Mui-expanded":{backgroundColor:"#f0f7ff"},backgroundColor:"transparent"},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ae,{sx:{color:"#0B53C0"}}),e.jsx(n,{variant:"h6",sx:{fontFamily:"Staatliches, sans-serif",fontWeight:"bold",color:"#0B53C0",fontSize:"1.25rem"},children:"Grading Policy"})]})}),e.jsx($,{children:e.jsx(L,{children:t.gradingPolicy.map((s,i)=>e.jsxs(q,{sx:{px:0,flexDirection:"column",alignItems:"flex-start"},children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",mb:s.description?1:0},children:[e.jsx(n,{variant:"body1",children:s.component}),e.jsx(N,{label:`${s.percentage}%`,size:"small",color:"primary"})]}),s.description&&e.jsx(n,{variant:"body2",color:"text.secondary",children:s.description})]},i))})})]}),(t==null?void 0:t.labSpecific)&&Object.keys(t.labSpecific).length>0&&e.jsxs(P,{children:[e.jsx(O,{expandIcon:e.jsx(E,{sx:{color:"#0B53C0"}}),sx:{"&:hover":{backgroundColor:"#f0f7ff !important"},"&.Mui-expanded":{backgroundColor:"#f0f7ff"},backgroundColor:"transparent"},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Te,{sx:{color:"#0B53C0"}}),e.jsx(n,{variant:"h6",sx:{fontFamily:"Staatliches, sans-serif",fontWeight:"bold",color:"#0B53C0",fontSize:"1.25rem"},children:"Laboratory Information"})]})}),e.jsx($,{children:e.jsxs(m,{container:!0,spacing:3,children:[t.labSpecific.safetyRequirements&&e.jsxs(m,{item:!0,xs:12,children:[e.jsx(n,{variant:"body2",color:"text.secondary",sx:{fontWeight:"bold"},children:"Safety Requirements"}),e.jsx(L,{dense:!0,children:t.labSpecific.safetyRequirements.map((s,i)=>e.jsx(q,{sx:{py:.5},children:e.jsxs(n,{variant:"body2",children:["â€¢ ",s]})},i))})]}),t.labSpecific.dresscode&&e.jsxs(m,{item:!0,xs:12,md:6,children:[e.jsx(n,{variant:"body2",color:"text.secondary",sx:{fontWeight:"bold"},children:"Dress Code"}),e.jsx(L,{dense:!0,children:t.labSpecific.dresscode.map((s,i)=>e.jsx(q,{sx:{py:.5},children:e.jsxs(n,{variant:"body2",children:["â€¢ ",s]})},i))})]}),t.labSpecific.requiredEquipment&&e.jsxs(m,{item:!0,xs:12,md:6,children:[e.jsx(n,{variant:"body2",color:"text.secondary",sx:{fontWeight:"bold"},children:"Required Equipment"}),e.jsx(L,{dense:!0,children:t.labSpecific.requiredEquipment.map((s,i)=>e.jsx(q,{sx:{py:.5},children:e.jsxs(n,{variant:"body2",children:["â€¢ ",s]})},i))})]})]})})]}),(t==null?void 0:t.policies)&&Object.keys(t.policies).length>0&&e.jsxs(P,{children:[e.jsx(O,{expandIcon:e.jsx(E,{sx:{color:"#0B53C0"}}),sx:{"&:hover":{backgroundColor:"#f0f7ff !important"},"&.Mui-expanded":{backgroundColor:"#f0f7ff"},backgroundColor:"transparent"},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Me,{sx:{color:"#0B53C0"}}),e.jsx(n,{variant:"h6",sx:{fontFamily:"Staatliches, sans-serif",fontWeight:"bold",color:"#0B53C0",fontSize:"1.25rem"},children:"Course Policies"})]})}),e.jsx($,{children:e.jsx(m,{container:!0,spacing:2,children:Object.entries(t.policies).map(([s,i])=>{if(!i)return null;const f=s.replace(/([A-Z])/g," $1").replace(/^./,j=>j.toUpperCase());return e.jsxs(m,{item:!0,xs:12,children:[e.jsx(n,{variant:"body2",color:"text.secondary",sx:{fontWeight:"bold"},children:f}),e.jsx(n,{variant:"body2",sx:{mt:.5},children:i}),e.jsx(le,{sx:{mt:1}})]},s)})})})]}),M&&e.jsxs(P,{children:[e.jsx(O,{expandIcon:e.jsx(E,{sx:{color:"#0B53C0"}}),sx:{"&:hover":{backgroundColor:"#f0f7ff !important"},"&.Mui-expanded":{backgroundColor:"#f0f7ff"},backgroundColor:"transparent"},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ne,{sx:{color:"#0B53C0"}}),e.jsx(n,{variant:"h6",sx:{fontFamily:"Staatliches, sans-serif",fontWeight:"bold",color:"#0B53C0",fontSize:"1.25rem"},children:"Other Course Information"})]})}),e.jsx($,{children:e.jsx(m,{container:!0,spacing:2,children:Object.entries(k).map(([s,i])=>{const f=s.replace(/([A-Z])/g," $1").replace(/^./,j=>j.toUpperCase());return e.jsxs(m,{item:!0,xs:12,children:[e.jsx(n,{variant:"body2",color:"text.secondary",sx:{fontWeight:"bold"},children:f}),e.jsx(l,{sx:{mt:.5},children:Array.isArray(i)?e.jsx(L,{dense:!0,children:i.map((j,z)=>e.jsx(q,{sx:{py:.25,px:0},children:e.jsxs(n,{variant:"body2",children:["â€¢ ",typeof j=="object"?JSON.stringify(j,null,2):String(j)]})},z))}):typeof i=="object"?e.jsx(l,{sx:{p:1,backgroundColor:"grey.100",borderRadius:1},children:e.jsx(n,{variant:"body2",component:"pre",sx:{fontFamily:"monospace",fontSize:"0.875rem"},children:JSON.stringify(i,null,2)})}):e.jsx(n,{variant:"body2",children:String(i)})}),Object.keys(k).indexOf(s)<Object.keys(k).length-1&&e.jsx(le,{sx:{mt:2}})]},s)})})})]})]}),e.jsxs(X,{open:g,onClose:()=>S(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:"15px",backgroundColor:"#f8f9fa"}},children:[e.jsxs(V,{sx:{display:"flex",alignItems:"center",gap:1,fontFamily:"Staatliches, sans-serif",fontSize:"1.5rem",fontWeight:"bold",color:"#0B53C0",backgroundColor:"#ECF4FE",borderBottom:"1px solid #e3f2fd"},children:[e.jsx(ie,{sx:{color:"#0B53C0"}}),"Syllabus Document"]}),e.jsx(ee,{sx:{pt:3},children:o&&e.jsxs(l,{children:[e.jsxs(n,{variant:"body1",sx:{mb:2,fontFamily:"Staatliches, sans-serif",fontSize:"1.1rem",color:"#0B53C0"},children:[e.jsx("strong",{children:"Filename:"})," ",o.metadata.originalFilename]}),e.jsxs(n,{variant:"body2",color:"text.secondary",sx:{mb:1},children:[e.jsx("strong",{children:"Type:"})," ",Re(o.metadata.fileType)]}),e.jsxs(n,{variant:"body2",color:"text.secondary",sx:{mb:1},children:[e.jsx("strong",{children:"Size:"})," ",We(o.metadata.fileSize)]}),e.jsxs(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:[e.jsx("strong",{children:"Uploaded:"})," ",(()=>{if(!o.metadata.uploadedAt)return"Date not available";const s=o.metadata.uploadedAt;if(s instanceof Date)return s.toLocaleDateString();if(typeof s=="object"&&s!==null&&"seconds"in s)return new Date(s.seconds*1e3).toLocaleDateString();try{return new Date(s).toLocaleDateString()}catch{return"Date not available"}})()]})]})}),e.jsxs(te,{sx:{p:3,gap:2},children:[e.jsx(C,{onClick:()=>S(!1),sx:{fontFamily:"Staatliches, sans-serif",fontSize:"1.1rem",textTransform:"none",borderRadius:"15px",color:"#666","&:hover":{backgroundColor:"#f0f0f0"}},children:"Close"}),e.jsx(C,{onClick:T,variant:"contained",startIcon:e.jsx(oe,{}),sx:{fontFamily:"Staatliches, sans-serif",fontSize:"1.1rem",textTransform:"none",borderRadius:"15px",backgroundColor:"#CDDAFF",color:"#0B53C0","&:hover":{backgroundColor:"#0B53C0",color:"#FFFFFF"}},children:"Download"})]})]})]})},et=()=>{const{userDetails:a}=re(),[x]=ze(),t=x.get("course")||null,d=p.useMemo(()=>{const c=a!=null&&a.classes?Object.entries(a.classes).map(([h,b])=>({id:h,number:b.number,title:b.title})):[];return console.log("[SupplementalMaterials] Course list updated:",{count:c.length,courses:c.map(h=>`${h.number} - ${h.title}`),timestamp:new Date().toISOString()}),c},[a==null?void 0:a.classes]),o=p.useMemo(()=>d.find(c=>c.id===t),[d,t]);return e.jsxs(l,{className:"supplemental-container",children:[e.jsx(Le,{}),t?e.jsxs(l,{children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(Pe,{returnToSelection:!0}),e.jsx(N,{label:o?`${o.number} - ${o.title}`:"Selected Course",variant:"outlined",sx:{borderRadius:"15px",fontSize:"32px",fontWeight:"bold",background:"#e0f2f1",color:"#00695c",cursor:"pointer",transition:"background-color 0.3s",fontFamily:"Staatliches, sans-serif",padding:"20px 20px","&:hover":{backgroundColor:"#b2dfdb"}}})]}),e.jsx(Ze,{courseId:t,isAdmin:a==null?void 0:a.isAdmin}),e.jsxs(l,{className:"supplemental-content",children:[(a==null?void 0:a.isAdmin)&&e.jsx(qe,{selectedCourse:t}),e.jsx(Ye,{initialCourse:t})]})]}):e.jsx(e.Fragment,{children:e.jsx(Je,{courses:d})})]})};export{et as default};
